<html lang="en-us"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Elasticsearch Reference [1.7]
      | Elastic
    </title><meta name="generator" content="DocBook XSL Stylesheets V1.78.1"><link rel="home" href="#index" title="Elasticsearch Reference [1.7]"><link rel="next" href="#getting-started" title="Getting Started"><meta name="description" content="Get started with the documentation for Elasticsearch, Kibana, Logstash, Beats, X-Pack, Elastic Cloud, Elasticsearch for Apache Hadoop, and our language clients."><meta name="DC.type" content="Docs/Elasticsearch/Reference/1.7">

    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="application-name" content="Elastic">
<meta name="theme-color" content="#ffffff">

<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
<link rel="schema.DCTERMS" href="http://purl.org/dc/terms/">

	<meta name="description" content="">

    <style>
.content-wrapper{padding-top:48px;
position:relative}.content-block{clear:both}.content-block img{padding:10px 0px 20px}@media screen and (min-width: 769px) and (max-width: 991px){.container{width:auto !important}}/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;
-ms-text-size-adjust:100%;
-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;
vertical-align:baseline}audio:not([controls]){display:none;
height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:bold}dfn{font-style:italic}h1{font-size:2em;
margin:0.67em 0}mark{background:#ff0;
color:#000}small{font-size:80%}sub,sup{font-size:75%;
line-height:0;
position:relative;
vertical-align:baseline}sup{top:-0.5em}sub{bottom:-0.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;
height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace, monospace;
font-size:1em}button,input,optgroup,select,textarea{color:inherit;
font:inherit;
margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;
cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;
padding:0}input{line-height:normal}input[type="checkbox"],input[type="radio"]{box-sizing:border-box;
padding:0}input[type="number"]::-webkit-inner-spin-button,input[type="number"]::-webkit-outer-spin-button{height:auto}input[type="search"]{-webkit-appearance:textfield;
box-sizing:content-box}input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid #c0c0c0;
margin:0 2px;
padding:0.35em 0.625em 0.75em}legend{border:0;
padding:0}textarea{overflow:auto}optgroup{font-weight:bold}table{border-collapse:collapse;
border-spacing:0}td,th{padding:0}/*! Source: https://github.com/h5bp/html5-boilerplate/blob/master/src/css/main.css */@media print{*,*:before,*:after{background:transparent !important;
color:#000 !important;
box-shadow:none !important;
text-shadow:none !important}a,a:visited{text-decoration:underline}a[href]:after{content:" (" attr(href) ")"}abbr[title]:after{content:" (" attr(title) ")"}a[href^="#"]:after,a[href^="javascript:"]:after{content:""}pre,blockquote{border:1px solid #999;
page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}p,h2,h3{orphans:3;
widows:3}h2,h3{page-break-after:avoid}.navbar{display:none}.btn>.caret,.dropup>.btn>.caret{border-top-color:#000 !important}.label{border:1px solid #000}.table{border-collapse:collapse !important}.table td,.table th{background-color:#fff !important}.table-bordered th,.table-bordered td{border:1px solid #ddd !important}}@font-face{font-family:'Glyphicons Halflings';
top:1px;
display:inline-block;
font-family:'Glyphicons Halflings';
font-style:normal;
font-weight:normal;
line-height:1;
-webkit-font-smoothing:antialiased;
-moz-osx-font-smoothing:grayscale}.glyphicon-asterisk:before{content:"\2a"}.glyphicon-plus:before{content:"\2b"}.glyphicon-euro:before,.glyphicon-eur:before{content:"\20ac"}.glyphicon-minus:before{content:"\2212"}.glyphicon-cloud:before{content:"\2601"}.glyphicon-envelope:before{content:"\2709"}.glyphicon-pencil:before{content:"\270f"}.glyphicon-glass:before{content:"\e001"}.glyphicon-music:before{content:"\e002"}.glyphicon-search:before{content:"\e003"}.glyphicon-heart:before{content:"\e005"}.glyphicon-star:before{content:"\e006"}.glyphicon-star-empty:before{content:"\e007"}.glyphicon-user:before{content:"\e008"}.glyphicon-film:before{content:"\e009"}.glyphicon-th-large:before{content:"\e010"}.glyphicon-th:before{content:"\e011"}.glyphicon-th-list:before{content:"\e012"}.glyphicon-ok:before{content:"\e013"}.glyphicon-remove:before{content:"\e014"}.glyphicon-zoom-in:before{content:"\e015"}.glyphicon-zoom-out:before{content:"\e016"}.glyphicon-off:before{content:"\e017"}.glyphicon-signal:before{content:"\e018"}.glyphicon-cog:before{content:"\e019"}.glyphicon-trash:before{content:"\e020"}.glyphicon-home:before{content:"\e021"}.glyphicon-file:before{content:"\e022"}.glyphicon-time:before{content:"\e023"}.glyphicon-road:before{content:"\e024"}.glyphicon-download-alt:before{content:"\e025"}.glyphicon-download:before{content:"\e026"}.glyphicon-upload:before{content:"\e027"}.glyphicon-inbox:before{content:"\e028"}.glyphicon-play-circle:before{content:"\e029"}.glyphicon-repeat:before{content:"\e030"}.glyphicon-refresh:before{content:"\e031"}.glyphicon-list-alt:before{content:"\e032"}.glyphicon-lock:before{content:"\e033"}.glyphicon-flag:before{content:"\e034"}.glyphicon-headphones:before{content:"\e035"}.glyphicon-volume-off:before{content:"\e036"}.glyphicon-volume-down:before{content:"\e037"}.glyphicon-volume-up:before{content:"\e038"}.glyphicon-qrcode:before{content:"\e039"}.glyphicon-barcode:before{content:"\e040"}.glyphicon-tag:before{content:"\e041"}.glyphicon-tags:before{content:"\e042"}.glyphicon-book:before{content:"\e043"}.glyphicon-bookmark:before{content:"\e044"}.glyphicon-print:before{content:"\e045"}.glyphicon-camera:before{content:"\e046"}.glyphicon-font:before{content:"\e047"}.glyphicon-bold:before{content:"\e048"}.glyphicon-italic:before{content:"\e049"}.glyphicon-text-height:before{content:"\e050"}.glyphicon-text-width:before{content:"\e051"}.glyphicon-align-left:before{content:"\e052"}.glyphicon-align-center:before{content:"\e053"}.glyphicon-align-right:before{content:"\e054"}.glyphicon-align-justify:before{content:"\e055"}.glyphicon-list:before{content:"\e056"}.glyphicon-indent-left:before{content:"\e057"}.glyphicon-indent-right:before{content:"\e058"}.glyphicon-facetime-video:before{content:"\e059"}.glyphicon-picture:before{content:"\e060"}.glyphicon-map-marker:before{content:"\e062"}.glyphicon-adjust:before{content:"\e063"}.glyphicon-tint:before{content:"\e064"}.glyphicon-edit:before{content:"\e065"}.glyphicon-share:before{content:"\e066"}.glyphicon-check:before{content:"\e067"}.glyphicon-move:before{content:"\e068"}.glyphicon-step-backward:before{content:"\e069"}.glyphicon-fast-backward:before{content:"\e070"}.glyphicon-backward:before{content:"\e071"}.glyphicon-play:before{content:"\e072"}.glyphicon-pause:before{content:"\e073"}.glyphicon-stop:before{content:"\e074"}.glyphicon-forward:before{content:"\e075"}.glyphicon-fast-forward:before{content:"\e076"}.glyphicon-step-forward:before{content:"\e077"}.glyphicon-eject:before{content:"\e078"}.glyphicon-chevron-left:before{content:"\e079"}.glyphicon-chevron-right:before{content:"\e080"}.glyphicon-plus-sign:before{content:"\e081"}.glyphicon-minus-sign:before{content:"\e082"}.glyphicon-remove-sign:before{content:"\e083"}.glyphicon-ok-sign:before{content:"\e084"}.glyphicon-question-sign:before{content:"\e085"}.glyphicon-info-sign:before{content:"\e086"}.glyphicon-screenshot:before{content:"\e087"}.glyphicon-remove-circle:before{content:"\e088"}.glyphicon-ok-circle:before{content:"\e089"}.glyphicon-ban-circle:before{content:"\e090"}.glyphicon-arrow-left:before{content:"\e091"}.glyphicon-arrow-right:before{content:"\e092"}.glyphicon-arrow-up:before{content:"\e093"}.glyphicon-arrow-down:before{content:"\e094"}.glyphicon-share-alt:before{content:"\e095"}.glyphicon-resize-full:before{content:"\e096"}.glyphicon-resize-small:before{content:"\e097"}.glyphicon-exclamation-sign:before{content:"\e101"}.glyphicon-gift:before{content:"\e102"}.glyphicon-leaf:before{content:"\e103"}.glyphicon-fire:before{content:"\e104"}.glyphicon-eye-open:before{content:"\e105"}.glyphicon-eye-close:before{content:"\e106"}.glyphicon-warning-sign:before{content:"\e107"}.glyphicon-plane:before{content:"\e108"}.glyphicon-calendar:before{content:"\e109"}.glyphicon-random:before{content:"\e110"}.glyphicon-comment:before{content:"\e111"}.glyphicon-magnet:before{content:"\e112"}.glyphicon-chevron-up:before{content:"\e113"}.glyphicon-chevron-down:before{content:"\e114"}.glyphicon-retweet:before{content:"\e115"}.glyphicon-shopping-cart:before{content:"\e116"}.glyphicon-folder-close:before{content:"\e117"}.glyphicon-folder-open:before{content:"\e118"}.glyphicon-resize-vertical:before{content:"\e119"}.glyphicon-resize-horizontal:before{content:"\e120"}.glyphicon-hdd:before{content:"\e121"}.glyphicon-bullhorn:before{content:"\e122"}.glyphicon-bell:before{content:"\e123"}.glyphicon-certificate:before{content:"\e124"}.glyphicon-thumbs-up:before{content:"\e125"}.glyphicon-thumbs-down:before{content:"\e126"}.glyphicon-hand-right:before{content:"\e127"}.glyphicon-hand-left:before{content:"\e128"}.glyphicon-hand-up:before{content:"\e129"}.glyphicon-hand-down:before{content:"\e130"}.glyphicon-circle-arrow-right:before{content:"\e131"}.glyphicon-circle-arrow-left:before{content:"\e132"}.glyphicon-circle-arrow-up:before{content:"\e133"}.glyphicon-circle-arrow-down:before{content:"\e134"}.glyphicon-globe:before{content:"\e135"}.glyphicon-wrench:before{content:"\e136"}.glyphicon-tasks:before{content:"\e137"}.glyphicon-filter:before{content:"\e138"}.glyphicon-briefcase:before{content:"\e139"}.glyphicon-fullscreen:before{content:"\e140"}.glyphicon-dashboard:before{content:"\e141"}.glyphicon-paperclip:before{content:"\e142"}.glyphicon-heart-empty:before{content:"\e143"}.glyphicon-link:before{content:"\e144"}.glyphicon-phone:before{content:"\e145"}.glyphicon-pushpin:before{content:"\e146"}.glyphicon-usd:before{content:"\e148"}.glyphicon-gbp:before{content:"\e149"}.glyphicon-sort:before{content:"\e150"}.glyphicon-sort-by-alphabet:before{content:"\e151"}.glyphicon-sort-by-alphabet-alt:before{content:"\e152"}.glyphicon-sort-by-order:before{content:"\e153"}.glyphicon-sort-by-order-alt:before{content:"\e154"}.glyphicon-sort-by-attributes:before{content:"\e155"}.glyphicon-sort-by-attributes-alt:before{content:"\e156"}.glyphicon-unchecked:before{content:"\e157"}.glyphicon-expand:before{content:"\e158"}.glyphicon-collapse-down:before{content:"\e159"}.glyphicon-collapse-up:before{content:"\e160"}.glyphicon-log-in:before{content:"\e161"}.glyphicon-flash:before{content:"\e162"}.glyphicon-log-out:before{content:"\e163"}.glyphicon-new-window:before{content:"\e164"}.glyphicon-record:before{content:"\e165"}.glyphicon-save:before{content:"\e166"}.glyphicon-open:before{content:"\e167"}.glyphicon-saved:before{content:"\e168"}.glyphicon-import:before{content:"\e169"}.glyphicon-export:before{content:"\e170"}.glyphicon-send:before{content:"\e171"}.glyphicon-floppy-disk:before{content:"\e172"}.glyphicon-floppy-saved:before{content:"\e173"}.glyphicon-floppy-remove:before{content:"\e174"}.glyphicon-floppy-save:before{content:"\e175"}.glyphicon-floppy-open:before{content:"\e176"}.glyphicon-credit-card:before{content:"\e177"}.glyphicon-transfer:before{content:"\e178"}.glyphicon-cutlery:before{content:"\e179"}.glyphicon-header:before{content:"\e180"}.glyphicon-compressed:before{content:"\e181"}.glyphicon-earphone:before{content:"\e182"}.glyphicon-phone-alt:before{content:"\e183"}.glyphicon-tower:before{content:"\e184"}.glyphicon-stats:before{content:"\e185"}.glyphicon-sd-video:before{content:"\e186"}.glyphicon-hd-video:before{content:"\e187"}.glyphicon-subtitles:before{content:"\e188"}.glyphicon-sound-stereo:before{content:"\e189"}.glyphicon-sound-dolby:before{content:"\e190"}.glyphicon-sound-5-1:before{content:"\e191"}.glyphicon-sound-6-1:before{content:"\e192"}.glyphicon-sound-7-1:before{content:"\e193"}.glyphicon-copyright-mark:before{content:"\e194"}.glyphicon-registration-mark:before{content:"\e195"}.glyphicon-cloud-download:before{content:"\e197"}.glyphicon-cloud-upload:before{content:"\e198"}.glyphicon-tree-conifer:before{content:"\e199"}.glyphicon-tree-deciduous:before{content:"\e200"}.glyphicon-cd:before{content:"\e201"}.glyphicon-save-file:before{content:"\e202"}.glyphicon-open-file:before{content:"\e203"}.glyphicon-level-up:before{content:"\e204"}.glyphicon-copy:before{content:"\e205"}.glyphicon-paste:before{content:"\e206"}.glyphicon-alert:before{content:"\e209"}.glyphicon-equalizer:before{content:"\e210"}.glyphicon-king:before{content:"\e211"}.glyphicon-queen:before{content:"\e212"}.glyphicon-pawn:before{content:"\e213"}.glyphicon-bishop:before{content:"\e214"}.glyphicon-knight:before{content:"\e215"}.glyphicon-baby-formula:before{content:"\e216"}.glyphicon-tent:before{content:"\26fa"}.glyphicon-blackboard:before{content:"\e218"}.glyphicon-bed:before{content:"\e219"}.glyphicon-apple:before{content:"\f8ff"}.glyphicon-erase:before{content:"\e221"}.glyphicon-hourglass:before{content:"\231b"}.glyphicon-lamp:before{content:"\e223"}.glyphicon-duplicate:before{content:"\e224"}.glyphicon-piggy-bank:before{content:"\e225"}.glyphicon-scissors:before{content:"\e226"}.glyphicon-bitcoin:before{content:"\e227"}.glyphicon-btc:before{content:"\e227"}.glyphicon-xbt:before{content:"\e227"}.glyphicon-yen:before{content:"\00a5"}.glyphicon-jpy:before{content:"\00a5"}.glyphicon-ruble:before{content:"\20bd"}.glyphicon-rub:before{content:"\20bd"}.glyphicon-scale:before{content:"\e230"}.glyphicon-ice-lolly:before{content:"\e231"}.glyphicon-ice-lolly-tasted:before{content:"\e232"}.glyphicon-education:before{content:"\e233"}.glyphicon-option-horizontal:before{content:"\e234"}.glyphicon-option-vertical:before{content:"\e235"}.glyphicon-menu-hamburger:before{content:"\e236"}.glyphicon-modal-window:before{content:"\e237"}.glyphicon-oil:before{content:"\e238"}.glyphicon-grain:before{content:"\e239"}.glyphicon-sunglasses:before{content:"\e240"}.glyphicon-text-size:before{content:"\e241"}.glyphicon-text-color:before{content:"\e242"}.glyphicon-text-background:before{content:"\e243"}.glyphicon-object-align-top:before{content:"\e244"}.glyphicon-object-align-bottom:before{content:"\e245"}.glyphicon-object-align-horizontal:before{content:"\e246"}.glyphicon-object-align-left:before{content:"\e247"}.glyphicon-object-align-vertical:before{content:"\e248"}.glyphicon-object-align-right:before{content:"\e249"}.glyphicon-triangle-right:before{content:"\e250"}.glyphicon-triangle-left:before{content:"\e251"}.glyphicon-triangle-bottom:before{content:"\e252"}.glyphicon-triangle-top:before{content:"\e253"}.glyphicon-console:before{content:"\e254"}.glyphicon-superscript:before{content:"\e255"}.glyphicon-subscript:before{content:"\e256"}.glyphicon-menu-left:before{content:"\e257"}.glyphicon-menu-right:before{content:"\e258"}.glyphicon-menu-down:before{content:"\e259"}.glyphicon-menu-up:before{content:"\e260"}*{-webkit-box-sizing:border-box;
-moz-box-sizing:border-box;
box-sizing:border-box}*:before,*:after{-webkit-box-sizing:border-box;
-moz-box-sizing:border-box;
box-sizing:border-box}html{font-size:10px;
-webkit-tap-highlight-color:transparent}body{font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
font-size:14px;
line-height:1.42857;
color:#444;
background-color:#fff}input,button,select,textarea{font-family:inherit;
font-size:inherit;
line-height:inherit}a{color:#00a9e5;
text-decoration:none}a:hover,a:focus{color:#007199;
text-decoration:underline}a:focus{outline:thin dotted;
outline:5px auto -webkit-focus-ring-color;
outline-offset:-2px}figure{margin:0}img{vertical-align:middle}.img-responsive{display:block;
max-width:100%;
height:auto}.img-rounded{border-radius:6px}.img-thumbnail{padding:4px;
line-height:1.42857;
background-color:#fff;
border:1px solid #ddd;
border-radius:4px;
-webkit-transition:all 0.2s ease-in-out;
-o-transition:all 0.2s ease-in-out;
transition:all 0.2s ease-in-out;
display:inline-block;
max-width:100%;
height:auto}.img-circle{border-radius:50%}hr{margin-top:20px;
margin-bottom:20px;
border:0;
border-top:1px solid #eeeeee}.sr-only{position:absolute;
width:1px;
height:1px;
margin:-1px;
padding:0;
overflow:hidden;
clip:rect(0, 0, 0, 0);
border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;
width:auto;
height:auto;
margin:0;
overflow:visible;
clip:auto}[role="button"]{cursor:pointer}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{font-family:inherit;
font-weight:500;
line-height:1.1;
color:inherit}h1 small,h1 .small,h2 small,h2 .small,h3 small,h3 .small,h4 small,h4 .small,h5 small,h5 .small,h6 small,h6 .small,.h1 small,.h1 .small,.h2 small,.h2 .small,.h3 small,.h3 .small,.h4 small,.h4 .small,.h5 small,.h5 .small,.h6 small,.h6 .small{font-weight:normal;
line-height:1;
color:#777777}h1,.h1,h2,.h2,h3,.h3{margin-top:20px;
margin-bottom:10px}h1 small,h1 .small,.h1 small,.h1 .small,h2 small,h2 .small,.h2 small,.h2 .small,h3 small,h3 .small,.h3 small,.h3 .small{font-size:65%}h4,.h4,h5,.h5,h6,.h6{margin-top:10px;
margin-bottom:10px}h4 small,h4 .small,.h4 small,.h4 .small,h5 small,h5 .small,.h5 small,.h5 .small,h6 small,h6 .small,.h6 small,.h6 .small{font-size:75%}h1,.h1{font-size:36px}h2,.h2{font-size:30px}h3,.h3{font-size:24px}h4,.h4{font-size:18px}h5,.h5{font-size:14px}h6,.h6{font-size:12px}p{margin:0 0 10px}.lead{margin-bottom:20px;
font-size:16px;
font-weight:300;
line-height:1.4}@media (min-width: 769px){.lead{font-size:21px}}small,.small{font-size:85%}mark,.mark{background-color:#fcf8e3;
padding:.2em}.text-left{text-align:left}.text-right{text-align:right}.text-center{text-align:center}.text-justify{text-align:justify}.text-nowrap{white-space:nowrap}.text-lowercase{text-transform:lowercase}.text-uppercase,.initialism{text-transform:uppercase}.text-capitalize{text-transform:capitalize}.text-muted{color:#777777}.text-primary{color:#337ab7}a.text-primary:hover,a.text-primary:focus{color:#286090}.text-success{color:#3c763d}a.text-success:hover,a.text-success:focus{color:#2b542c}.text-info{color:#31708f}a.text-info:hover,a.text-info:focus{color:#245269}.text-warning{color:#8a6d3b}a.text-warning:hover,a.text-warning:focus{color:#66512c}.text-danger{color:#a94442}a.text-danger:hover,a.text-danger:focus{color:#843534}.bg-primary{color:#fff}.bg-primary{background-color:#337ab7}a.bg-primary:hover,a.bg-primary:focus{background-color:#286090}.bg-success{background-color:#dff0d8}a.bg-success:hover,a.bg-success:focus{background-color:#c1e2b3}.bg-info{background-color:#d9edf7}a.bg-info:hover,a.bg-info:focus{background-color:#afd9ee}.bg-warning{background-color:#fcf8e3}a.bg-warning:hover,a.bg-warning:focus{background-color:#f7ecb5}.bg-danger{background-color:#f2dede}a.bg-danger:hover,a.bg-danger:focus{background-color:#e4b9b9}.page-header{padding-bottom:9px;
margin:40px 0 20px;
border-bottom:1px solid #eeeeee}ul,ol{margin-top:0;
margin-bottom:10px}ul ul,ul ol,ol ul,ol ol{margin-bottom:0}.list-unstyled{padding-left:0;
list-style:none}.list-inline{padding-left:0;
list-style:none;
margin-left:-5px}.list-inline>li{display:inline-block;
padding-left:5px;
padding-right:5px}dl{margin-top:0;
margin-bottom:20px}dt,dd{line-height:1.42857}dt{font-weight:bold}dd{margin-left:0}.dl-horizontal dd:before,.dl-horizontal dd:after{content:" ";
display:table}.dl-horizontal dd:after{clear:both}@media (min-width: 769px){.dl-horizontal dt{float:left;
width:160px;
clear:left;
text-align:right;
overflow:hidden;
text-overflow:ellipsis;
white-space:nowrap}.dl-horizontal dd{margin-left:180px}}abbr[title],abbr[data-original-title]{cursor:help;
border-bottom:1px dotted #777777}.initialism{font-size:90%}blockquote{padding:10px 20px;
margin:0 0 20px;
font-size:17.5px;
border-left:5px solid #eeeeee}blockquote p:last-child,blockquote ul:last-child,blockquote ol:last-child{margin-bottom:0}blockquote footer,blockquote small,blockquote .small{display:block;
font-size:80%;
line-height:1.42857;
color:#777777}blockquote footer:before,blockquote small:before,blockquote .small:before{content:'\2014 \00A0'}.blockquote-reverse,blockquote.pull-right{padding-right:15px;
padding-left:0;
border-right:5px solid #eeeeee;
border-left:0;
text-align:right}.blockquote-reverse footer:before,.blockquote-reverse small:before,.blockquote-reverse .small:before,blockquote.pull-right footer:before,blockquote.pull-right small:before,blockquote.pull-right .small:before{content:''}.blockquote-reverse footer:after,.blockquote-reverse small:after,.blockquote-reverse .small:after,blockquote.pull-right footer:after,blockquote.pull-right small:after,blockquote.pull-right .small:after{content:'\00A0 \2014'}address{margin-bottom:20px;
font-style:normal;
line-height:1.42857}code,kbd,pre,samp{font-family:Menlo, Monaco, Consolas, "Courier New", monospace}code{padding:2px 4px;
font-size:90%;
color:#c7254e;
background-color:#f9f2f4;
border-radius:4px}kbd{padding:2px 4px;
font-size:90%;
color:#fff;
background-color:#333;
border-radius:3px;
box-shadow:inset 0 -1px 0 rgba(0,0,0,0.25)}kbd kbd{padding:0;
font-size:100%;
font-weight:bold;
box-shadow:none}pre{display:block;
padding:9.5px;
margin:0 0 10px;
font-size:13px;
line-height:1.42857;
word-break:break-all;
word-wrap:break-word;
color:#333333;
background-color:#f5f5f5;
border:1px solid #ccc;
border-radius:4px}pre code{padding:0;
font-size:inherit;
color:inherit;
white-space:pre-wrap;
background-color:transparent;
border-radius:0}.pre-scrollable{max-height:340px;
overflow-y:scroll}.container{margin-right:auto;
margin-left:auto;
padding-left:15px;
padding-right:15px}.container:before,.container:after{content:" ";
display:table}.container:after{clear:both}@media (min-width: 769px){.container{width:750px}}@media (min-width: 992px){.container{width:970px}}@media (min-width: 1200px){.container{width:1170px}}.container-fluid{margin-right:auto;
margin-left:auto;
padding-left:15px;
padding-right:15px}.container-fluid:before,.container-fluid:after{content:" ";
display:table}.container-fluid:after{clear:both}.row{margin-left:-15px;
margin-right:-15px}.row:before,.row:after{content:" ";
display:table}.row:after{clear:both}.col-xs-1,.col-sm-1,.col-md-1,.col-lg-1,.col-xs-2,.col-sm-2,.col-md-2,.col-lg-2,.col-xs-3,.col-sm-3,.col-md-3,.col-lg-3,.col-xs-4,.col-sm-4,.col-md-4,.col-lg-4,.col-xs-5,.col-sm-5,.col-md-5,.col-lg-5,.col-xs-6,.col-sm-6,.col-md-6,.col-lg-6,.col-xs-7,.col-sm-7,.col-md-7,.col-lg-7,.col-xs-8,.col-sm-8,.col-md-8,.col-lg-8,.col-xs-9,.col-sm-9,.col-md-9,.col-lg-9,.col-xs-10,.col-sm-10,.col-md-10,.col-lg-10,.col-xs-11,.col-sm-11,.col-md-11,.col-lg-11,.col-xs-12,.col-sm-12,.col-md-12,.col-lg-12{position:relative;
min-height:1px;
padding-left:15px;
padding-right:15px}.col-xs-1,.col-xs-2,.col-xs-3,.col-xs-4,.col-xs-5,.col-xs-6,.col-xs-7,.col-xs-8,.col-xs-9,.col-xs-10,.col-xs-11,.col-xs-12{float:left}.col-xs-1{width:8.33333%}.col-xs-2{width:16.66667%}.col-xs-3{width:25%}.col-xs-4{width:33.33333%}.col-xs-5{width:41.66667%}.col-xs-6{width:50%}.col-xs-7{width:58.33333%}.col-xs-8{width:66.66667%}.col-xs-9{width:75%}.col-xs-10{width:83.33333%}.col-xs-11{width:91.66667%}.col-xs-12{width:100%}.col-xs-pull-0{right:auto}.col-xs-pull-1{right:8.33333%}.col-xs-pull-2{right:16.66667%}.col-xs-pull-3{right:25%}.col-xs-pull-4{right:33.33333%}.col-xs-pull-5{right:41.66667%}.col-xs-pull-6{right:50%}.col-xs-pull-7{right:58.33333%}.col-xs-pull-8{right:66.66667%}.col-xs-pull-9{right:75%}.col-xs-pull-10{right:83.33333%}.col-xs-pull-11{right:91.66667%}.col-xs-pull-12{right:100%}.col-xs-push-0{left:auto}.col-xs-push-1{left:8.33333%}.col-xs-push-2{left:16.66667%}.col-xs-push-3{left:25%}.col-xs-push-4{left:33.33333%}.col-xs-push-5{left:41.66667%}.col-xs-push-6{left:50%}.col-xs-push-7{left:58.33333%}.col-xs-push-8{left:66.66667%}.col-xs-push-9{left:75%}.col-xs-push-10{left:83.33333%}.col-xs-push-11{left:91.66667%}.col-xs-push-12{left:100%}.col-xs-offset-0{margin-left:0%}.col-xs-offset-1{margin-left:8.33333%}.col-xs-offset-2{margin-left:16.66667%}.col-xs-offset-3{margin-left:25%}.col-xs-offset-4{margin-left:33.33333%}.col-xs-offset-5{margin-left:41.66667%}.col-xs-offset-6{margin-left:50%}.col-xs-offset-7{margin-left:58.33333%}.col-xs-offset-8{margin-left:66.66667%}.col-xs-offset-9{margin-left:75%}.col-xs-offset-10{margin-left:83.33333%}.col-xs-offset-11{margin-left:91.66667%}.col-xs-offset-12{margin-left:100%}@media (min-width: 769px){.col-sm-1,.col-sm-2,.col-sm-3,.col-sm-4,.col-sm-5,.col-sm-6,.col-sm-7,.col-sm-8,.col-sm-9,.col-sm-10,.col-sm-11,.col-sm-12{float:left}.col-sm-1{width:8.33333%}.col-sm-2{width:16.66667%}.col-sm-3{width:25%}.col-sm-4{width:33.33333%}.col-sm-5{width:41.66667%}.col-sm-6{width:50%}.col-sm-7{width:58.33333%}.col-sm-8{width:66.66667%}.col-sm-9{width:75%}.col-sm-10{width:83.33333%}.col-sm-11{width:91.66667%}.col-sm-12{width:100%}.col-sm-pull-0{right:auto}.col-sm-pull-1{right:8.33333%}.col-sm-pull-2{right:16.66667%}.col-sm-pull-3{right:25%}.col-sm-pull-4{right:33.33333%}.col-sm-pull-5{right:41.66667%}.col-sm-pull-6{right:50%}.col-sm-pull-7{right:58.33333%}.col-sm-pull-8{right:66.66667%}.col-sm-pull-9{right:75%}.col-sm-pull-10{right:83.33333%}.col-sm-pull-11{right:91.66667%}.col-sm-pull-12{right:100%}.col-sm-push-0{left:auto}.col-sm-push-1{left:8.33333%}.col-sm-push-2{left:16.66667%}.col-sm-push-3{left:25%}.col-sm-push-4{left:33.33333%}.col-sm-push-5{left:41.66667%}.col-sm-push-6{left:50%}.col-sm-push-7{left:58.33333%}.col-sm-push-8{left:66.66667%}.col-sm-push-9{left:75%}.col-sm-push-10{left:83.33333%}.col-sm-push-11{left:91.66667%}.col-sm-push-12{left:100%}.col-sm-offset-0{margin-left:0%}.col-sm-offset-1{margin-left:8.33333%}.col-sm-offset-2{margin-left:16.66667%}.col-sm-offset-3{margin-left:25%}.col-sm-offset-4{margin-left:33.33333%}.col-sm-offset-5{margin-left:41.66667%}.col-sm-offset-6{margin-left:50%}.col-sm-offset-7{margin-left:58.33333%}.col-sm-offset-8{margin-left:66.66667%}.col-sm-offset-9{margin-left:75%}.col-sm-offset-10{margin-left:83.33333%}.col-sm-offset-11{margin-left:91.66667%}.col-sm-offset-12{margin-left:100%}}@media (min-width: 992px){.col-md-1,.col-md-2,.col-md-3,.col-md-4,.col-md-5,.col-md-6,.col-md-7,.col-md-8,.col-md-9,.col-md-10,.col-md-11,.col-md-12{float:left}.col-md-1{width:8.33333%}.col-md-2{width:16.66667%}.col-md-3{width:25%}.col-md-4{width:33.33333%}.col-md-5{width:41.66667%}.col-md-6{width:50%}.col-md-7{width:58.33333%}.col-md-8{width:66.66667%}.col-md-9{width:75%}.col-md-10{width:83.33333%}.col-md-11{width:91.66667%}.col-md-12{width:100%}.col-md-pull-0{right:auto}.col-md-pull-1{right:8.33333%}.col-md-pull-2{right:16.66667%}.col-md-pull-3{right:25%}.col-md-pull-4{right:33.33333%}.col-md-pull-5{right:41.66667%}.col-md-pull-6{right:50%}.col-md-pull-7{right:58.33333%}.col-md-pull-8{right:66.66667%}.col-md-pull-9{right:75%}.col-md-pull-10{right:83.33333%}.col-md-pull-11{right:91.66667%}.col-md-pull-12{right:100%}.col-md-push-0{left:auto}.col-md-push-1{left:8.33333%}.col-md-push-2{left:16.66667%}.col-md-push-3{left:25%}.col-md-push-4{left:33.33333%}.col-md-push-5{left:41.66667%}.col-md-push-6{left:50%}.col-md-push-7{left:58.33333%}.col-md-push-8{left:66.66667%}.col-md-push-9{left:75%}.col-md-push-10{left:83.33333%}.col-md-push-11{left:91.66667%}.col-md-push-12{left:100%}.col-md-offset-0{margin-left:0%}.col-md-offset-1{margin-left:8.33333%}.col-md-offset-2{margin-left:16.66667%}.col-md-offset-3{margin-left:25%}.col-md-offset-4{margin-left:33.33333%}.col-md-offset-5{margin-left:41.66667%}.col-md-offset-6{margin-left:50%}.col-md-offset-7{margin-left:58.33333%}.col-md-offset-8{margin-left:66.66667%}.col-md-offset-9{margin-left:75%}.col-md-offset-10{margin-left:83.33333%}.col-md-offset-11{margin-left:91.66667%}.col-md-offset-12{margin-left:100%}}@media (min-width: 1200px){.col-lg-1,.col-lg-2,.col-lg-3,.col-lg-4,.col-lg-5,.col-lg-6,.col-lg-7,.col-lg-8,.col-lg-9,.col-lg-10,.col-lg-11,.col-lg-12{float:left}.col-lg-1{width:8.33333%}.col-lg-2{width:16.66667%}.col-lg-3{width:25%}.col-lg-4{width:33.33333%}.col-lg-5{width:41.66667%}.col-lg-6{width:50%}.col-lg-7{width:58.33333%}.col-lg-8{width:66.66667%}.col-lg-9{width:75%}.col-lg-10{width:83.33333%}.col-lg-11{width:91.66667%}.col-lg-12{width:100%}.col-lg-pull-0{right:auto}.col-lg-pull-1{right:8.33333%}.col-lg-pull-2{right:16.66667%}.col-lg-pull-3{right:25%}.col-lg-pull-4{right:33.33333%}.col-lg-pull-5{right:41.66667%}.col-lg-pull-6{right:50%}.col-lg-pull-7{right:58.33333%}.col-lg-pull-8{right:66.66667%}.col-lg-pull-9{right:75%}.col-lg-pull-10{right:83.33333%}.col-lg-pull-11{right:91.66667%}.col-lg-pull-12{right:100%}.col-lg-push-0{left:auto}.col-lg-push-1{left:8.33333%}.col-lg-push-2{left:16.66667%}.col-lg-push-3{left:25%}.col-lg-push-4{left:33.33333%}.col-lg-push-5{left:41.66667%}.col-lg-push-6{left:50%}.col-lg-push-7{left:58.33333%}.col-lg-push-8{left:66.66667%}.col-lg-push-9{left:75%}.col-lg-push-10{left:83.33333%}.col-lg-push-11{left:91.66667%}.col-lg-push-12{left:100%}.col-lg-offset-0{margin-left:0%}.col-lg-offset-1{margin-left:8.33333%}.col-lg-offset-2{margin-left:16.66667%}.col-lg-offset-3{margin-left:25%}.col-lg-offset-4{margin-left:33.33333%}.col-lg-offset-5{margin-left:41.66667%}.col-lg-offset-6{margin-left:50%}.col-lg-offset-7{margin-left:58.33333%}.col-lg-offset-8{margin-left:66.66667%}.col-lg-offset-9{margin-left:75%}.col-lg-offset-10{margin-left:83.33333%}.col-lg-offset-11{margin-left:91.66667%}.col-lg-offset-12{margin-left:100%}}table{background-color:transparent}caption{padding-top:8px;
padding-bottom:8px;
color:#777777;
text-align:left}th{text-align:left}.table{width:100%;
max-width:100%;
margin-bottom:20px}.table>thead>tr>th,.table>thead>tr>td,.table>tbody>tr>th,.table>tbody>tr>td,.table>tfoot>tr>th,.table>tfoot>tr>td{padding:8px;
line-height:1.42857;
vertical-align:top;
border-top:1px solid #ddd}.table>thead>tr>th{vertical-align:bottom;
border-bottom:2px solid #ddd}.table>caption+thead>tr:first-child>th,.table>caption+thead>tr:first-child>td,.table>colgroup+thead>tr:first-child>th,.table>colgroup+thead>tr:first-child>td,.table>thead:first-child>tr:first-child>th,.table>thead:first-child>tr:first-child>td{border-top:0}.table>tbody+tbody{border-top:2px solid #ddd}.table .table{background-color:#fff}.table-condensed>thead>tr>th,.table-condensed>thead>tr>td,.table-condensed>tbody>tr>th,.table-condensed>tbody>tr>td,.table-condensed>tfoot>tr>th,.table-condensed>tfoot>tr>td{padding:5px}.table-bordered{border:1px solid #ddd}.table-bordered>thead>tr>th,.table-bordered>thead>tr>td,.table-bordered>tbody>tr>th,.table-bordered>tbody>tr>td,.table-bordered>tfoot>tr>th,.table-bordered>tfoot>tr>td{border:1px solid #ddd}.table-bordered>thead>tr>th,.table-bordered>thead>tr>td{border-bottom-width:2px}.table-striped>tbody>tr:nth-of-type(odd){background-color:#f9f9f9}.table-hover>tbody>tr:hover{background-color:#f5f5f5}table col[class*="col-"]{position:static;
float:none;
display:table-column}table td[class*="col-"],table th[class*="col-"]{position:static;
float:none;
display:table-cell}.table>thead>tr>td.active,.table>thead>tr>th.active,.table>thead>tr.active>td,.table>thead>tr.active>th,.table>tbody>tr>td.active,.table>tbody>tr>th.active,.table>tbody>tr.active>td,.table>tbody>tr.active>th,.table>tfoot>tr>td.active,.table>tfoot>tr>th.active,.table>tfoot>tr.active>td,.table>tfoot>tr.active>th{background-color:#f5f5f5}.table-hover>tbody>tr>td.active:hover,.table-hover>tbody>tr>th.active:hover,.table-hover>tbody>tr.active:hover>td,.table-hover>tbody>tr:hover>.active,.table-hover>tbody>tr.active:hover>th{background-color:#e8e8e8}.table>thead>tr>td.success,.table>thead>tr>th.success,.table>thead>tr.success>td,.table>thead>tr.success>th,.table>tbody>tr>td.success,.table>tbody>tr>th.success,.table>tbody>tr.success>td,.table>tbody>tr.success>th,.table>tfoot>tr>td.success,.table>tfoot>tr>th.success,.table>tfoot>tr.success>td,.table>tfoot>tr.success>th{background-color:#dff0d8}.table-hover>tbody>tr>td.success:hover,.table-hover>tbody>tr>th.success:hover,.table-hover>tbody>tr.success:hover>td,.table-hover>tbody>tr:hover>.success,.table-hover>tbody>tr.success:hover>th{background-color:#d0e9c6}.table>thead>tr>td.info,.table>thead>tr>th.info,.table>thead>tr.info>td,.table>thead>tr.info>th,.table>tbody>tr>td.info,.table>tbody>tr>th.info,.table>tbody>tr.info>td,.table>tbody>tr.info>th,.table>tfoot>tr>td.info,.table>tfoot>tr>th.info,.table>tfoot>tr.info>td,.table>tfoot>tr.info>th{background-color:#d9edf7}.table-hover>tbody>tr>td.info:hover,.table-hover>tbody>tr>th.info:hover,.table-hover>tbody>tr.info:hover>td,.table-hover>tbody>tr:hover>.info,.table-hover>tbody>tr.info:hover>th{background-color:#c4e3f3}.table>thead>tr>td.warning,.table>thead>tr>th.warning,.table>thead>tr.warning>td,.table>thead>tr.warning>th,.table>tbody>tr>td.warning,.table>tbody>tr>th.warning,.table>tbody>tr.warning>td,.table>tbody>tr.warning>th,.table>tfoot>tr>td.warning,.table>tfoot>tr>th.warning,.table>tfoot>tr.warning>td,.table>tfoot>tr.warning>th{background-color:#fcf8e3}.table-hover>tbody>tr>td.warning:hover,.table-hover>tbody>tr>th.warning:hover,.table-hover>tbody>tr.warning:hover>td,.table-hover>tbody>tr:hover>.warning,.table-hover>tbody>tr.warning:hover>th{background-color:#faf2cc}.table>thead>tr>td.danger,.table>thead>tr>th.danger,.table>thead>tr.danger>td,.table>thead>tr.danger>th,.table>tbody>tr>td.danger,.table>tbody>tr>th.danger,.table>tbody>tr.danger>td,.table>tbody>tr.danger>th,.table>tfoot>tr>td.danger,.table>tfoot>tr>th.danger,.table>tfoot>tr.danger>td,.table>tfoot>tr.danger>th{background-color:#f2dede}.table-hover>tbody>tr>td.danger:hover,.table-hover>tbody>tr>th.danger:hover,.table-hover>tbody>tr.danger:hover>td,.table-hover>tbody>tr:hover>.danger,.table-hover>tbody>tr.danger:hover>th{background-color:#ebcccc}.table-responsive{overflow-x:auto;
min-height:0.01%}@media screen and (max-width: 768px){.table-responsive{width:100%;
margin-bottom:15px;
overflow-y:hidden;
-ms-overflow-style:-ms-autohiding-scrollbar;
border:1px solid #ddd}.table-responsive>.table{margin-bottom:0}.table-responsive>.table>thead>tr>th,.table-responsive>.table>thead>tr>td,.table-responsive>.table>tbody>tr>th,.table-responsive>.table>tbody>tr>td,.table-responsive>.table>tfoot>tr>th,.table-responsive>.table>tfoot>tr>td{white-space:nowrap}.table-responsive>.table-bordered{border:0}.table-responsive>.table-bordered>thead>tr>th:first-child,.table-responsive>.table-bordered>thead>tr>td:first-child,.table-responsive>.table-bordered>tbody>tr>th:first-child,.table-responsive>.table-bordered>tbody>tr>td:first-child,.table-responsive>.table-bordered>tfoot>tr>th:first-child,.table-responsive>.table-bordered>tfoot>tr>td:first-child{border-left:0}.table-responsive>.table-bordered>thead>tr>th:last-child,.table-responsive>.table-bordered>thead>tr>td:last-child,.table-responsive>.table-bordered>tbody>tr>th:last-child,.table-responsive>.table-bordered>tbody>tr>td:last-child,.table-responsive>.table-bordered>tfoot>tr>th:last-child,.table-responsive>.table-bordered>tfoot>tr>td:last-child{border-right:0}.table-responsive>.table-bordered>tbody>tr:last-child>th,.table-responsive>.table-bordered>tbody>tr:last-child>td,.table-responsive>.table-bordered>tfoot>tr:last-child>th,.table-responsive>.table-bordered>tfoot>tr:last-child>td{border-bottom:0}}fieldset{padding:0;
margin:0;
border:0;
min-width:0}legend{display:block;
width:100%;
padding:0;
margin-bottom:20px;
font-size:21px;
line-height:inherit;
color:#333333;
border:0;
border-bottom:1px solid #e5e5e5}label{display:inline-block;
max-width:100%;
margin-bottom:5px;
font-weight:bold}input[type="search"]{-webkit-box-sizing:border-box;
-moz-box-sizing:border-box;
box-sizing:border-box}input[type="radio"],input[type="checkbox"]{margin:4px 0 0;
margin-top:1px \9;
line-height:normal}input[type="file"]{display:block}input[type="range"]{display:block;
width:100%}select[multiple],select[size]{height:auto}input[type="file"]:focus,input[type="radio"]:focus,input[type="checkbox"]:focus{outline:thin dotted;
outline:5px auto -webkit-focus-ring-color;
outline-offset:-2px}output{display:block;
padding-top:7px;
font-size:14px;
line-height:1.42857;
color:#555555}.form-control{display:block;
width:100%;
height:34px;
padding:6px 12px;
font-size:14px;
line-height:1.42857;
color:#555555;
background-color:#fff;
background-image:none;
border:1px solid #ccc;
border-radius:4px;
-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);
box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);
-webkit-transition:border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;
-o-transition:border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;
transition:border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s}.form-control:focus{border-color:#66afe9;
outline:0;
-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(102,175,233,0.6);
box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 8px rgba(102,175,233,0.6)}.form-control::-moz-placeholder{color:#999;
opacity:1}.form-control:-ms-input-placeholder{color:#999}.form-control::-webkit-input-placeholder{color:#999}.form-control[disabled],.form-control[readonly],fieldset[disabled] .form-control{background-color:#eeeeee;
opacity:1}.form-control[disabled],fieldset[disabled] .form-control{cursor:not-allowed}textarea.form-control{height:auto}input[type="search"]{-webkit-appearance:none}@media screen and (-webkit-min-device-pixel-ratio: 0){input[type="date"].form-control,input[type="time"].form-control,input[type="datetime-local"].form-control,input[type="month"].form-control{line-height:34px}input[type="date"].input-sm,.input-group-sm>input[type="date"].form-control,.input-group-sm>input[type="date"].input-group-addon,.input-group-sm>.input-group-btn>input[type="date"].btn,.input-group-sm input[type="date"],input[type="time"].input-sm,.input-group-sm>input[type="time"].form-control,.input-group-sm>input[type="time"].input-group-addon,.input-group-sm>.input-group-btn>input[type="time"].btn,.input-group-sm input[type="time"],input[type="datetime-local"].input-sm,.input-group-sm>input[type="datetime-local"].form-control,.input-group-sm>input[type="datetime-local"].input-group-addon,.input-group-sm>.input-group-btn>input[type="datetime-local"].btn,.input-group-sm input[type="datetime-local"],input[type="month"].input-sm,.input-group-sm>input[type="month"].form-control,.input-group-sm>input[type="month"].input-group-addon,.input-group-sm>.input-group-btn>input[type="month"].btn,.input-group-sm input[type="month"]{line-height:30px}input[type="date"].input-lg,.input-group-lg>input[type="date"].form-control,.input-group-lg>input[type="date"].input-group-addon,.input-group-lg>.input-group-btn>input[type="date"].btn,.input-group-lg input[type="date"],input[type="time"].input-lg,.input-group-lg>input[type="time"].form-control,.input-group-lg>input[type="time"].input-group-addon,.input-group-lg>.input-group-btn>input[type="time"].btn,.input-group-lg input[type="time"],input[type="datetime-local"].input-lg,.input-group-lg>input[type="datetime-local"].form-control,.input-group-lg>input[type="datetime-local"].input-group-addon,.input-group-lg>.input-group-btn>input[type="datetime-local"].btn,.input-group-lg input[type="datetime-local"],input[type="month"].input-lg,.input-group-lg>input[type="month"].form-control,.input-group-lg>input[type="month"].input-group-addon,.input-group-lg>.input-group-btn>input[type="month"].btn,.input-group-lg input[type="month"]{line-height:46px}}.form-group{margin-bottom:15px}.radio,.checkbox{position:relative;
display:block;
margin-top:10px;
margin-bottom:10px}.radio label,.checkbox label{min-height:20px;
padding-left:20px;
margin-bottom:0;
font-weight:normal;
cursor:pointer}.radio input[type="radio"],.radio-inline input[type="radio"],.checkbox input[type="checkbox"],.checkbox-inline input[type="checkbox"]{position:absolute;
margin-left:-20px;
margin-top:4px \9}.radio+.radio,.checkbox+.checkbox{margin-top:-5px}.radio-inline,.checkbox-inline{position:relative;
display:inline-block;
padding-left:20px;
margin-bottom:0;
vertical-align:middle;
font-weight:normal;
cursor:pointer}.radio-inline+.radio-inline,.checkbox-inline+.checkbox-inline{margin-top:0;
margin-left:10px}input[type="radio"][disabled],input[type="radio"].disabled,fieldset[disabled] input[type="radio"],input[type="checkbox"][disabled],input[type="checkbox"].disabled,fieldset[disabled] input[type="checkbox"]{cursor:not-allowed}.radio-inline.disabled,fieldset[disabled] .radio-inline,.checkbox-inline.disabled,fieldset[disabled] .checkbox-inline{cursor:not-allowed}.radio.disabled label,fieldset[disabled] .radio label,.checkbox.disabled label,fieldset[disabled] .checkbox label{cursor:not-allowed}.form-control-static{padding-top:7px;
padding-bottom:7px;
margin-bottom:0;
min-height:34px}.form-control-static.input-lg,.input-group-lg>.form-control-static.form-control,.input-group-lg>.form-control-static.input-group-addon,.input-group-lg>.input-group-btn>.form-control-static.btn,.form-control-static.input-sm,.input-group-sm>.form-control-static.form-control,.input-group-sm>.form-control-static.input-group-addon,.input-group-sm>.input-group-btn>.form-control-static.btn{padding-left:0;
padding-right:0}.input-sm,.input-group-sm>.form-control,.input-group-sm>.input-group-addon,.input-group-sm>.input-group-btn>.btn{height:30px;
padding:5px 10px;
font-size:12px;
line-height:1.5;
border-radius:3px}select.input-sm,.input-group-sm>select.form-control,.input-group-sm>select.input-group-addon,.input-group-sm>.input-group-btn>select.btn{height:30px;
line-height:30px}textarea.input-sm,.input-group-sm>textarea.form-control,.input-group-sm>textarea.input-group-addon,.input-group-sm>.input-group-btn>textarea.btn,select[multiple].input-sm,.input-group-sm>select[multiple].form-control,.input-group-sm>select[multiple].input-group-addon,.input-group-sm>.input-group-btn>select[multiple].btn{height:auto}.form-group-sm .form-control{height:30px;
padding:5px 10px;
font-size:12px;
line-height:1.5;
border-radius:3px}.form-group-sm select.form-control{height:30px;
line-height:30px}.form-group-sm textarea.form-control,.form-group-sm select[multiple].form-control{height:auto}.form-group-sm .form-control-static{height:30px;
min-height:32px;
padding:6px 10px;
font-size:12px;
line-height:1.5}.input-lg,.input-group-lg>.form-control,.input-group-lg>.input-group-addon,.input-group-lg>.input-group-btn>.btn{height:46px;
padding:10px 16px;
font-size:18px;
line-height:1.33333;
border-radius:6px}select.input-lg,.input-group-lg>select.form-control,.input-group-lg>select.input-group-addon,.input-group-lg>.input-group-btn>select.btn{height:46px;
line-height:46px}textarea.input-lg,.input-group-lg>textarea.form-control,.input-group-lg>textarea.input-group-addon,.input-group-lg>.input-group-btn>textarea.btn,select[multiple].input-lg,.input-group-lg>select[multiple].form-control,.input-group-lg>select[multiple].input-group-addon,.input-group-lg>.input-group-btn>select[multiple].btn{height:auto}.form-group-lg .form-control{height:46px;
padding:10px 16px;
font-size:18px;
line-height:1.33333;
border-radius:6px}.form-group-lg select.form-control{height:46px;
line-height:46px}.form-group-lg textarea.form-control,.form-group-lg select[multiple].form-control{height:auto}.form-group-lg .form-control-static{height:46px;
min-height:38px;
padding:11px 16px;
font-size:18px;
line-height:1.33333}.has-feedback{position:relative}.has-feedback .form-control{padding-right:42.5px}.form-control-feedback{position:absolute;
top:0;
right:0;
z-index:2;
display:block;
width:34px;
height:34px;
line-height:34px;
text-align:center;
pointer-events:none}.input-lg+.form-control-feedback,.input-group-lg>.form-control+.form-control-feedback,.input-group-lg>.input-group-addon+.form-control-feedback,.input-group-lg>.input-group-btn>.btn+.form-control-feedback,.input-group-lg+.form-control-feedback,.form-group-lg .form-control+.form-control-feedback{width:46px;
height:46px;
line-height:46px}.input-sm+.form-control-feedback,.input-group-sm>.form-control+.form-control-feedback,.input-group-sm>.input-group-addon+.form-control-feedback,.input-group-sm>.input-group-btn>.btn+.form-control-feedback,.input-group-sm+.form-control-feedback,.form-group-sm .form-control+.form-control-feedback{width:30px;
height:30px;
line-height:30px}.has-success .help-block,.has-success .control-label,.has-success .radio,.has-success .checkbox,.has-success .radio-inline,.has-success .checkbox-inline,.has-success.radio label,.has-success.checkbox label,.has-success.radio-inline label,.has-success.checkbox-inline label{color:#3c763d}.has-success .form-control{border-color:#3c763d;
-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);
box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.has-success .form-control:focus{border-color:#2b542c;
-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #67b168;
box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #67b168}.has-success .input-group-addon{color:#3c763d;
border-color:#3c763d;
background-color:#dff0d8}.has-success .form-control-feedback{color:#3c763d}.has-warning .help-block,.has-warning .control-label,.has-warning .radio,.has-warning .checkbox,.has-warning .radio-inline,.has-warning .checkbox-inline,.has-warning.radio label,.has-warning.checkbox label,.has-warning.radio-inline label,.has-warning.checkbox-inline label{color:#8a6d3b}.has-warning .form-control{border-color:#8a6d3b;
-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);
box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.has-warning .form-control:focus{border-color:#66512c;
-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #c0a16b;
box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #c0a16b}.has-warning .input-group-addon{color:#8a6d3b;
border-color:#8a6d3b;
background-color:#fcf8e3}.has-warning .form-control-feedback{color:#8a6d3b}.has-error .help-block,.has-error .control-label,.has-error .radio,.has-error .checkbox,.has-error .radio-inline,.has-error .checkbox-inline,.has-error.radio label,.has-error.checkbox label,.has-error.radio-inline label,.has-error.checkbox-inline label{color:#a94442}.has-error .form-control{border-color:#a94442;
-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075);
box-shadow:inset 0 1px 1px rgba(0,0,0,0.075)}.has-error .form-control:focus{border-color:#843534;
-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #ce8483;
box-shadow:inset 0 1px 1px rgba(0,0,0,0.075),0 0 6px #ce8483}.has-error .input-group-addon{color:#a94442;
border-color:#a94442;
background-color:#f2dede}.has-error .form-control-feedback{color:#a94442}.has-feedback label ~ .form-control-feedback{top:25px}.has-feedback label.sr-only ~ .form-control-feedback{top:0}.help-block{display:block;
margin-top:5px;
margin-bottom:10px;
color:#848484}@media (min-width: 769px){.form-inline .form-group{display:inline-block;
margin-bottom:0;
vertical-align:middle}.form-inline .form-control{display:inline-block;
width:auto;
vertical-align:middle}.form-inline .form-control-static{display:inline-block}.form-inline .input-group{display:inline-table;
vertical-align:middle}.form-inline .input-group .input-group-addon,.form-inline .input-group .input-group-btn,.form-inline .input-group .form-control{width:auto}.form-inline .input-group>.form-control{width:100%}.form-inline .control-label{margin-bottom:0;
vertical-align:middle}.form-inline .radio,.form-inline .checkbox{display:inline-block;
margin-top:0;
margin-bottom:0;
vertical-align:middle}.form-inline .radio label,.form-inline .checkbox label{padding-left:0}.form-inline .radio input[type="radio"],.form-inline .checkbox input[type="checkbox"]{position:relative;
margin-left:0}.form-inline .has-feedback .form-control-feedback{top:0}}.form-horizontal .radio,.form-horizontal .checkbox,.form-horizontal .radio-inline,.form-horizontal .checkbox-inline{margin-top:0;
margin-bottom:0;
padding-top:7px}.form-horizontal .radio,.form-horizontal .checkbox{min-height:27px}.form-horizontal .form-group{margin-left:-15px;
margin-right:-15px}.form-horizontal .form-group:before,.form-horizontal .form-group:after{content:" ";
display:table}.form-horizontal .form-group:after{clear:both}@media (min-width: 769px){.form-horizontal .control-label{text-align:right;
margin-bottom:0;
padding-top:7px}}.form-horizontal .has-feedback .form-control-feedback{right:15px}@media (min-width: 769px){.form-horizontal .form-group-lg .control-label{padding-top:14.33333px;
font-size:18px}}@media (min-width: 769px){.form-horizontal .form-group-sm .control-label{padding-top:6px;
font-size:12px}}.btn{display:inline-block;
margin-bottom:0;
font-weight:normal;
text-align:center;
vertical-align:middle;
touch-action:manipulation;
cursor:pointer;
background-image:none;
border:1px solid transparent;
white-space:nowrap;
padding:6px 12px;
font-size:14px;
line-height:1.42857;
border-radius:4px;
-webkit-user-select:none;
-moz-user-select:none;
-ms-user-select:none;
user-select:none}.btn:focus,.btn.focus,.btn:active:focus,.btn:active.focus,.btn.active:focus,.btn.active.focus{outline:thin dotted;
outline:5px auto -webkit-focus-ring-color;
outline-offset:-2px}.btn:hover,.btn:focus,.btn.focus{color:#333;
text-decoration:none}.btn:active,.btn.active{outline:0;
background-image:none;
-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,0.125);
box-shadow:inset 0 3px 5px rgba(0,0,0,0.125)}.btn.disabled,.btn[disabled],fieldset[disabled] .btn{cursor:not-allowed;
opacity:0.65;
filter:alpha(opacity=65);
-webkit-box-shadow:none;
box-shadow:none}a.btn.disabled,fieldset[disabled] a.btn{pointer-events:none}.btn-default{color:#333;
background-color:#fff;
border-color:#ccc}.btn-default:focus,.btn-default.focus{color:#333;
background-color:#e6e6e6;
border-color:#8c8c8c}.btn-default:hover{color:#333;
background-color:#e6e6e6;
border-color:#adadad}.btn-default:active,.btn-default.active,.open>.btn-default.dropdown-toggle{color:#333;
background-color:#e6e6e6;
border-color:#adadad}.btn-default:active:hover,.btn-default:active:focus,.btn-default:active.focus,.btn-default.active:hover,.btn-default.active:focus,.btn-default.active.focus,.open>.btn-default.dropdown-toggle:hover,.open>.btn-default.dropdown-toggle:focus,.open>.btn-default.dropdown-toggle.focus{color:#333;
background-color:#d4d4d4;
border-color:#8c8c8c}.btn-default:active,.btn-default.active,.open>.btn-default.dropdown-toggle{background-image:none}.btn-default.disabled,.btn-default.disabled:hover,.btn-default.disabled:focus,.btn-default.disabled.focus,.btn-default.disabled:active,.btn-default.disabled.active,.btn-default[disabled],.btn-default[disabled]:hover,.btn-default[disabled]:focus,.btn-default[disabled].focus,.btn-default[disabled]:active,.btn-default[disabled].active,fieldset[disabled] .btn-default,fieldset[disabled] .btn-default:hover,fieldset[disabled] .btn-default:focus,fieldset[disabled] .btn-default.focus,fieldset[disabled] .btn-default:active,fieldset[disabled] .btn-default.active{background-color:#fff;
border-color:#ccc}.btn-default .badge{color:#fff;
background-color:#333}.btn-primary{color:#fff;
background-color:#337ab7;
border-color:#2e6da4}.btn-primary:focus,.btn-primary.focus{color:#fff;
background-color:#286090;
border-color:#122b40}.btn-primary:hover{color:#fff;
background-color:#286090;
border-color:#204d74}.btn-primary:active,.btn-primary.active,.open>.btn-primary.dropdown-toggle{color:#fff;
background-color:#286090;
border-color:#204d74}.btn-primary:active:hover,.btn-primary:active:focus,.btn-primary:active.focus,.btn-primary.active:hover,.btn-primary.active:focus,.btn-primary.active.focus,.open>.btn-primary.dropdown-toggle:hover,.open>.btn-primary.dropdown-toggle:focus,.open>.btn-primary.dropdown-toggle.focus{color:#fff;
background-color:#204d74;
border-color:#122b40}.btn-primary:active,.btn-primary.active,.open>.btn-primary.dropdown-toggle{background-image:none}.btn-primary.disabled,.btn-primary.disabled:hover,.btn-primary.disabled:focus,.btn-primary.disabled.focus,.btn-primary.disabled:active,.btn-primary.disabled.active,.btn-primary[disabled],.btn-primary[disabled]:hover,.btn-primary[disabled]:focus,.btn-primary[disabled].focus,.btn-primary[disabled]:active,.btn-primary[disabled].active,fieldset[disabled] .btn-primary,fieldset[disabled] .btn-primary:hover,fieldset[disabled] .btn-primary:focus,fieldset[disabled] .btn-primary.focus,fieldset[disabled] .btn-primary:active,fieldset[disabled] .btn-primary.active{background-color:#337ab7;
border-color:#2e6da4}.btn-primary .badge{color:#337ab7;
background-color:#fff}.btn-success{color:#fff;
background-color:#5cb85c;
border-color:#4cae4c}.btn-success:focus,.btn-success.focus{color:#fff;
background-color:#449d44;
border-color:#255625}.btn-success:hover{color:#fff;
background-color:#449d44;
border-color:#398439}.btn-success:active,.btn-success.active,.open>.btn-success.dropdown-toggle{color:#fff;
background-color:#449d44;
border-color:#398439}.btn-success:active:hover,.btn-success:active:focus,.btn-success:active.focus,.btn-success.active:hover,.btn-success.active:focus,.btn-success.active.focus,.open>.btn-success.dropdown-toggle:hover,.open>.btn-success.dropdown-toggle:focus,.open>.btn-success.dropdown-toggle.focus{color:#fff;
background-color:#398439;
border-color:#255625}.btn-success:active,.btn-success.active,.open>.btn-success.dropdown-toggle{background-image:none}.btn-success.disabled,.btn-success.disabled:hover,.btn-success.disabled:focus,.btn-success.disabled.focus,.btn-success.disabled:active,.btn-success.disabled.active,.btn-success[disabled],.btn-success[disabled]:hover,.btn-success[disabled]:focus,.btn-success[disabled].focus,.btn-success[disabled]:active,.btn-success[disabled].active,fieldset[disabled] .btn-success,fieldset[disabled] .btn-success:hover,fieldset[disabled] .btn-success:focus,fieldset[disabled] .btn-success.focus,fieldset[disabled] .btn-success:active,fieldset[disabled] .btn-success.active{background-color:#5cb85c;
border-color:#4cae4c}.btn-success .badge{color:#5cb85c;
background-color:#fff}.btn-info{color:#fff;
background-color:#5bc0de;
border-color:#46b8da}.btn-info:focus,.btn-info.focus{color:#fff;
background-color:#31b0d5;
border-color:#1b6d85}.btn-info:hover{color:#fff;
background-color:#31b0d5;
border-color:#269abc}.btn-info:active,.btn-info.active,.open>.btn-info.dropdown-toggle{color:#fff;
background-color:#31b0d5;
border-color:#269abc}.btn-info:active:hover,.btn-info:active:focus,.btn-info:active.focus,.btn-info.active:hover,.btn-info.active:focus,.btn-info.active.focus,.open>.btn-info.dropdown-toggle:hover,.open>.btn-info.dropdown-toggle:focus,.open>.btn-info.dropdown-toggle.focus{color:#fff;
background-color:#269abc;
border-color:#1b6d85}.btn-info:active,.btn-info.active,.open>.btn-info.dropdown-toggle{background-image:none}.btn-info.disabled,.btn-info.disabled:hover,.btn-info.disabled:focus,.btn-info.disabled.focus,.btn-info.disabled:active,.btn-info.disabled.active,.btn-info[disabled],.btn-info[disabled]:hover,.btn-info[disabled]:focus,.btn-info[disabled].focus,.btn-info[disabled]:active,.btn-info[disabled].active,fieldset[disabled] .btn-info,fieldset[disabled] .btn-info:hover,fieldset[disabled] .btn-info:focus,fieldset[disabled] .btn-info.focus,fieldset[disabled] .btn-info:active,fieldset[disabled] .btn-info.active{background-color:#5bc0de;
border-color:#46b8da}.btn-info .badge{color:#5bc0de;
background-color:#fff}.btn-warning{color:#fff;
background-color:#f0ad4e;
border-color:#eea236}.btn-warning:focus,.btn-warning.focus{color:#fff;
background-color:#ec971f;
border-color:#985f0d}.btn-warning:hover{color:#fff;
background-color:#ec971f;
border-color:#d58512}.btn-warning:active,.btn-warning.active,.open>.btn-warning.dropdown-toggle{color:#fff;
background-color:#ec971f;
border-color:#d58512}.btn-warning:active:hover,.btn-warning:active:focus,.btn-warning:active.focus,.btn-warning.active:hover,.btn-warning.active:focus,.btn-warning.active.focus,.open>.btn-warning.dropdown-toggle:hover,.open>.btn-warning.dropdown-toggle:focus,.open>.btn-warning.dropdown-toggle.focus{color:#fff;
background-color:#d58512;
border-color:#985f0d}.btn-warning:active,.btn-warning.active,.open>.btn-warning.dropdown-toggle{background-image:none}.btn-warning.disabled,.btn-warning.disabled:hover,.btn-warning.disabled:focus,.btn-warning.disabled.focus,.btn-warning.disabled:active,.btn-warning.disabled.active,.btn-warning[disabled],.btn-warning[disabled]:hover,.btn-warning[disabled]:focus,.btn-warning[disabled].focus,.btn-warning[disabled]:active,.btn-warning[disabled].active,fieldset[disabled] .btn-warning,fieldset[disabled] .btn-warning:hover,fieldset[disabled] .btn-warning:focus,fieldset[disabled] .btn-warning.focus,fieldset[disabled] .btn-warning:active,fieldset[disabled] .btn-warning.active{background-color:#f0ad4e;
border-color:#eea236}.btn-warning .badge{color:#f0ad4e;
background-color:#fff}.btn-danger{color:#fff;
background-color:#d9534f;
border-color:#d43f3a}.btn-danger:focus,.btn-danger.focus{color:#fff;
background-color:#c9302c;
border-color:#761c19}.btn-danger:hover{color:#fff;
background-color:#c9302c;
border-color:#ac2925}.btn-danger:active,.btn-danger.active,.open>.btn-danger.dropdown-toggle{color:#fff;
background-color:#c9302c;
border-color:#ac2925}.btn-danger:active:hover,.btn-danger:active:focus,.btn-danger:active.focus,.btn-danger.active:hover,.btn-danger.active:focus,.btn-danger.active.focus,.open>.btn-danger.dropdown-toggle:hover,.open>.btn-danger.dropdown-toggle:focus,.open>.btn-danger.dropdown-toggle.focus{color:#fff;
background-color:#ac2925;
border-color:#761c19}.btn-danger:active,.btn-danger.active,.open>.btn-danger.dropdown-toggle{background-image:none}.btn-danger.disabled,.btn-danger.disabled:hover,.btn-danger.disabled:focus,.btn-danger.disabled.focus,.btn-danger.disabled:active,.btn-danger.disabled.active,.btn-danger[disabled],.btn-danger[disabled]:hover,.btn-danger[disabled]:focus,.btn-danger[disabled].focus,.btn-danger[disabled]:active,.btn-danger[disabled].active,fieldset[disabled] .btn-danger,fieldset[disabled] .btn-danger:hover,fieldset[disabled] .btn-danger:focus,fieldset[disabled] .btn-danger.focus,fieldset[disabled] .btn-danger:active,fieldset[disabled] .btn-danger.active{background-color:#d9534f;
border-color:#d43f3a}.btn-danger .badge{color:#d9534f;
background-color:#fff}.btn-link{color:#00a9e5;
font-weight:normal;
border-radius:0}.btn-link,.btn-link:active,.btn-link.active,.btn-link[disabled],fieldset[disabled] .btn-link{background-color:transparent;
-webkit-box-shadow:none;
box-shadow:none}.btn-link,.btn-link:hover,.btn-link:focus,.btn-link:active{border-color:transparent}.btn-link:hover,.btn-link:focus{color:#007199;
text-decoration:underline;
background-color:transparent}.btn-link[disabled]:hover,.btn-link[disabled]:focus,fieldset[disabled] .btn-link:hover,fieldset[disabled] .btn-link:focus{color:#777777;
text-decoration:none}.btn-lg,.btn-group-lg>.btn{padding:10px 16px;
font-size:18px;
line-height:1.33333;
border-radius:6px}.btn-sm,.btn-group-sm>.btn{padding:5px 10px;
font-size:12px;
line-height:1.5;
border-radius:3px}.btn-xs,.btn-group-xs>.btn{padding:1px 5px;
font-size:12px;
line-height:1.5;
border-radius:3px}.btn-block{display:block;
width:100%}.btn-block+.btn-block{margin-top:5px}input[type="submit"].btn-block,input[type="reset"].btn-block,input[type="button"].btn-block{width:100%}.fade{opacity:0;
-webkit-transition:opacity 0.15s linear;
-o-transition:opacity 0.15s linear;
transition:opacity 0.15s linear}.fade.in{opacity:1}.collapse{display:none}.collapse.in{display:block}tr.collapse.in{display:table-row}tbody.collapse.in{display:table-row-group}.collapsing{position:relative;
height:0;
overflow:hidden;
-webkit-transition-property:height, visibility;
transition-property:height, visibility;
-webkit-transition-duration:0.35s;
transition-duration:0.35s;
-webkit-transition-timing-function:ease;
transition-timing-function:ease}.caret{display:inline-block;
width:0;
height:0;
margin-left:2px;
vertical-align:middle;
border-top:4px dashed;
border-top:4px solid \9;
border-right:4px solid transparent;
border-left:4px solid transparent}.dropup,.dropdown{position:relative}.dropdown-toggle:focus{outline:0}.dropdown-menu{position:absolute;
top:100%;
left:0;
z-index:1000;
display:none;
float:left;
min-width:160px;
padding:5px 0;
margin:2px 0 0;
list-style:none;
font-size:14px;
text-align:left;
background-color:#fff;
border:1px solid #ccc;
border:1px solid rgba(0,0,0,0.15);
border-radius:4px;
-webkit-box-shadow:0 6px 12px rgba(0,0,0,0.175);
box-shadow:0 6px 12px rgba(0,0,0,0.175);
background-clip:padding-box}.dropdown-menu.pull-right{right:0;
left:auto}.dropdown-menu .divider{height:1px;
margin:9px 0;
overflow:hidden;
background-color:#e5e5e5}.dropdown-menu>li>a{display:block;
padding:3px 20px;
clear:both;
font-weight:normal;
line-height:1.42857;
color:#333333;
white-space:nowrap}.dropdown-menu>li>a:hover,.dropdown-menu>li>a:focus{text-decoration:none;
color:#262626;
background-color:#f5f5f5}.dropdown-menu>.active>a,.dropdown-menu>.active>a:hover,.dropdown-menu>.active>a:focus{color:#fff;
text-decoration:none;
outline:0;
background-color:#337ab7}.dropdown-menu>.disabled>a,.dropdown-menu>.disabled>a:hover,.dropdown-menu>.disabled>a:focus{color:#777777}.dropdown-menu>.disabled>a:hover,.dropdown-menu>.disabled>a:focus{text-decoration:none;
background-color:transparent;
background-image:none;
filter:progid:DXImageTransform.Microsoft.gradient(enabled = false);
cursor:not-allowed}.open>.dropdown-menu{display:block}.open>a{outline:0}.dropdown-menu-right{left:auto;
right:0}.dropdown-menu-left{left:0;
right:auto}.dropdown-header{display:block;
padding:3px 20px;
font-size:12px;
line-height:1.42857;
color:#777777;
white-space:nowrap}.dropdown-backdrop{position:fixed;
left:0;
right:0;
bottom:0;
top:0;
z-index:990}.pull-right>.dropdown-menu{right:0;
left:auto}.dropup .caret,.navbar-fixed-bottom .dropdown .caret{border-top:0;
border-bottom:4px dashed;
border-bottom:4px solid \9;
content:""}.dropup .dropdown-menu,.navbar-fixed-bottom .dropdown .dropdown-menu{top:auto;
bottom:100%;
margin-bottom:2px}@media (min-width: 769px){.navbar-right .dropdown-menu{right:0;
left:auto}.navbar-right .dropdown-menu-left{left:0;
right:auto}}.btn-group,.btn-group-vertical{position:relative;
display:inline-block;
vertical-align:middle}.btn-group>.btn,.btn-group-vertical>.btn{position:relative;
float:left}.btn-group>.btn:hover,.btn-group>.btn:focus,.btn-group>.btn:active,.btn-group>.btn.active,.btn-group-vertical>.btn:hover,.btn-group-vertical>.btn:focus,.btn-group-vertical>.btn:active,.btn-group-vertical>.btn.active{z-index:2}.btn-group .btn+.btn,.btn-group .btn+.btn-group,.btn-group .btn-group+.btn,.btn-group .btn-group+.btn-group{margin-left:-1px}.btn-toolbar{margin-left:-5px}.btn-toolbar:before,.btn-toolbar:after{content:" ";
display:table}.btn-toolbar:after{clear:both}.btn-toolbar .btn,.btn-toolbar .btn-group,.btn-toolbar .input-group{float:left}.btn-toolbar>.btn,.btn-toolbar>.btn-group,.btn-toolbar>.input-group{margin-left:5px}.btn-group>.btn:not(:first-child):not(:last-child):not(.dropdown-toggle){border-radius:0}.btn-group>.btn:first-child{margin-left:0}.btn-group>.btn:first-child:not(:last-child):not(.dropdown-toggle){border-bottom-right-radius:0;
border-top-right-radius:0}.btn-group>.btn:last-child:not(:first-child),.btn-group>.dropdown-toggle:not(:first-child){border-bottom-left-radius:0;
border-top-left-radius:0}.btn-group>.btn-group{float:left}.btn-group>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group>.btn-group:first-child:not(:last-child)>.btn:last-child,.btn-group>.btn-group:first-child:not(:last-child)>.dropdown-toggle{border-bottom-right-radius:0;
border-top-right-radius:0}.btn-group>.btn-group:last-child:not(:first-child)>.btn:first-child{border-bottom-left-radius:0;
border-top-left-radius:0}.btn-group .dropdown-toggle:active,.btn-group.open .dropdown-toggle{outline:0}.btn-group>.btn+.dropdown-toggle{padding-left:8px;
padding-right:8px}.btn-group>.btn-lg+.dropdown-toggle,.btn-group-lg.btn-group>.btn+.dropdown-toggle{padding-left:12px;
padding-right:12px}.btn-group.open .dropdown-toggle{-webkit-box-shadow:inset 0 3px 5px rgba(0,0,0,0.125);
box-shadow:inset 0 3px 5px rgba(0,0,0,0.125)}.btn-group.open .dropdown-toggle.btn-link{-webkit-box-shadow:none;
box-shadow:none}.btn .caret{margin-left:0}.btn-lg .caret,.btn-group-lg>.btn .caret{border-width:5px 5px 0;
border-bottom-width:0}.dropup .btn-lg .caret,.dropup .btn-group-lg>.btn .caret{border-width:0 5px 5px}.btn-group-vertical>.btn,.btn-group-vertical>.btn-group,.btn-group-vertical>.btn-group>.btn{display:block;
float:none;
width:100%;
max-width:100%}.btn-group-vertical>.btn-group:before,.btn-group-vertical>.btn-group:after{content:" ";
display:table}.btn-group-vertical>.btn-group:after{clear:both}.btn-group-vertical>.btn-group>.btn{float:none}.btn-group-vertical>.btn+.btn,.btn-group-vertical>.btn+.btn-group,.btn-group-vertical>.btn-group+.btn,.btn-group-vertical>.btn-group+.btn-group{margin-top:-1px;
margin-left:0}.btn-group-vertical>.btn:not(:first-child):not(:last-child){border-radius:0}.btn-group-vertical>.btn:first-child:not(:last-child){border-top-right-radius:4px;
border-bottom-right-radius:0;
border-bottom-left-radius:0}.btn-group-vertical>.btn:last-child:not(:first-child){border-bottom-left-radius:4px;
border-top-right-radius:0;
border-top-left-radius:0}.btn-group-vertical>.btn-group:not(:first-child):not(:last-child)>.btn{border-radius:0}.btn-group-vertical>.btn-group:first-child:not(:last-child)>.btn:last-child,.btn-group-vertical>.btn-group:first-child:not(:last-child)>.dropdown-toggle{border-bottom-right-radius:0;
border-bottom-left-radius:0}.btn-group-vertical>.btn-group:last-child:not(:first-child)>.btn:first-child{border-top-right-radius:0;
border-top-left-radius:0}.btn-group-justified{display:table;
width:100%;
table-layout:fixed;
border-collapse:separate}.btn-group-justified>.btn,.btn-group-justified>.btn-group{float:none;
display:table-cell;
width:1%}.btn-group-justified>.btn-group .btn{width:100%}.btn-group-justified>.btn-group .dropdown-menu{left:auto}[data-toggle="buttons"]>.btn input[type="radio"],[data-toggle="buttons"]>.btn input[type="checkbox"],[data-toggle="buttons"]>.btn-group>.btn input[type="radio"],[data-toggle="buttons"]>.btn-group>.btn input[type="checkbox"]{position:absolute;
clip:rect(0, 0, 0, 0);
pointer-events:none}.input-group{position:relative;
display:table;
border-collapse:separate}.input-group[class*="col-"]{float:none;
padding-left:0;
padding-right:0}.input-group .form-control{position:relative;
z-index:2;
float:left;
width:100%;
margin-bottom:0}.input-group-addon,.input-group-btn,.input-group .form-control{display:table-cell}.input-group-addon:not(:first-child):not(:last-child),.input-group-btn:not(:first-child):not(:last-child),.input-group .form-control:not(:first-child):not(:last-child){border-radius:0}.input-group-addon,.input-group-btn{width:1%;
white-space:nowrap;
vertical-align:middle}.input-group-addon{padding:6px 12px;
font-size:14px;
font-weight:normal;
line-height:1;
color:#555555;
text-align:center;
background-color:#eeeeee;
border:1px solid #ccc;
border-radius:4px}.input-group-addon.input-sm,.input-group-sm>.input-group-addon,.input-group-sm>.input-group-btn>.input-group-addon.btn{padding:5px 10px;
font-size:12px;
border-radius:3px}.input-group-addon.input-lg,.input-group-lg>.input-group-addon,.input-group-lg>.input-group-btn>.input-group-addon.btn{padding:10px 16px;
font-size:18px;
border-radius:6px}.input-group-addon input[type="radio"],.input-group-addon input[type="checkbox"]{margin-top:0}.input-group .form-control:first-child,.input-group-addon:first-child,.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group>.btn,.input-group-btn:first-child>.dropdown-toggle,.input-group-btn:last-child>.btn:not(:last-child):not(.dropdown-toggle),.input-group-btn:last-child>.btn-group:not(:last-child)>.btn{border-bottom-right-radius:0;
border-top-right-radius:0}.input-group-addon:first-child{border-right:0}.input-group .form-control:last-child,.input-group-addon:last-child,.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group>.btn,.input-group-btn:last-child>.dropdown-toggle,.input-group-btn:first-child>.btn:not(:first-child),.input-group-btn:first-child>.btn-group:not(:first-child)>.btn{border-bottom-left-radius:0;
border-top-left-radius:0}.input-group-addon:last-child{border-left:0}.input-group-btn{position:relative;
font-size:0;
white-space:nowrap}.input-group-btn>.btn{position:relative}.input-group-btn>.btn+.btn{margin-left:-1px}.input-group-btn>.btn:hover,.input-group-btn>.btn:focus,.input-group-btn>.btn:active{z-index:2}.input-group-btn:first-child>.btn,.input-group-btn:first-child>.btn-group{margin-right:-1px}.input-group-btn:last-child>.btn,.input-group-btn:last-child>.btn-group{z-index:2;
margin-left:-1px}.nav{margin-bottom:0;
padding-left:0;
list-style:none}.nav:before,.nav:after{content:" ";
display:table}.nav:after{clear:both}.nav>li{position:relative;
display:block}.nav>li>a{position:relative;
display:block;
padding:10px 15px}.nav>li>a:hover,.nav>li>a:focus{text-decoration:none;
background-color:#eeeeee}.nav>li.disabled>a{color:#777777}.nav>li.disabled>a:hover,.nav>li.disabled>a:focus{color:#777777;
text-decoration:none;
background-color:transparent;
cursor:not-allowed}.nav .open>a,.nav .open>a:hover,.nav .open>a:focus{background-color:#eeeeee;
border-color:#00a9e5}.nav .nav-divider{height:1px;
margin:9px 0;
overflow:hidden;
background-color:#e5e5e5}.nav>li>a>img{max-width:none}.nav-tabs{border-bottom:1px solid #ddd}.nav-tabs>li{float:left;
margin-bottom:-1px}.nav-tabs>li>a{margin-right:2px;
line-height:1.42857;
border:1px solid transparent;
border-radius:4px 4px 0 0}.nav-tabs>li>a:hover{border-color:#eeeeee #eeeeee #ddd}.nav-tabs>li.active>a,.nav-tabs>li.active>a:hover,.nav-tabs>li.active>a:focus{color:#555555;
background-color:#fff;
border:1px solid #ddd;
border-bottom-color:transparent;
cursor:default}.nav-pills>li{float:left}.nav-pills>li>a{border-radius:4px}.nav-pills>li+li{margin-left:2px}.nav-pills>li.active>a,.nav-pills>li.active>a:hover,.nav-pills>li.active>a:focus{color:#fff;
background-color:#337ab7}.nav-stacked>li{float:none}.nav-stacked>li+li{margin-top:2px;
margin-left:0}.nav-justified,.nav-tabs.nav-justified{width:100%}.nav-justified>li,.nav-tabs.nav-justified>li{float:none}.nav-justified>li>a,.nav-tabs.nav-justified>li>a{text-align:center;
margin-bottom:5px}.nav-justified>.dropdown .dropdown-menu{top:auto;
left:auto}@media (min-width: 769px){.nav-justified>li,.nav-tabs.nav-justified>li{display:table-cell;
width:1%}.nav-justified>li>a,.nav-tabs.nav-justified>li>a{margin-bottom:0}}.nav-tabs-justified,.nav-tabs.nav-justified{border-bottom:0}.nav-tabs-justified>li>a,.nav-tabs.nav-justified>li>a{margin-right:0;
border-radius:4px}.nav-tabs-justified>.active>a,.nav-tabs.nav-justified>.active>a,.nav-tabs-justified>.active>a:hover,.nav-tabs.nav-justified>.active>a:hover,.nav-tabs-justified>.active>a:focus,.nav-tabs.nav-justified>.active>a:focus{border:1px solid #ddd}@media (min-width: 769px){.nav-tabs-justified>li>a,.nav-tabs.nav-justified>li>a{border-bottom:1px solid #ddd;
border-radius:4px 4px 0 0}.nav-tabs-justified>.active>a,.nav-tabs.nav-justified>.active>a,.nav-tabs-justified>.active>a:hover,.nav-tabs.nav-justified>.active>a:hover,.nav-tabs-justified>.active>a:focus,.nav-tabs.nav-justified>.active>a:focus{border-bottom-color:#fff}}.tab-content>.tab-pane{display:none}.tab-content>.active{display:block}.nav-tabs .dropdown-menu{margin-top:-1px;
border-top-right-radius:0;
border-top-left-radius:0}.navbar{position:relative;
min-height:50px;
margin-bottom:20px;
border:1px solid transparent}.navbar:before,.navbar:after{content:" ";
display:table}.navbar:after{clear:both}@media (min-width: 769px){.navbar{border-radius:4px}}.navbar-header:before,.navbar-header:after{content:" ";
display:table}.navbar-header:after{clear:both}@media (min-width: 769px){.navbar-header{float:left}}.navbar-collapse{overflow-x:visible;
padding-right:15px;
padding-left:15px;
border-top:1px solid transparent;
box-shadow:inset 0 1px 0 rgba(255,255,255,0.1);
-webkit-overflow-scrolling:touch}.navbar-collapse:before,.navbar-collapse:after{content:" ";
display:table}.navbar-collapse:after{clear:both}.navbar-collapse.in{overflow-y:auto}@media (min-width: 769px){.navbar-collapse{width:auto;
border-top:0;
box-shadow:none}.navbar-collapse.collapse{display:block !important;
height:auto !important;
padding-bottom:0;
overflow:visible !important}.navbar-collapse.in{overflow-y:visible}.navbar-fixed-top .navbar-collapse,.navbar-static-top .navbar-collapse,.navbar-fixed-bottom .navbar-collapse{padding-left:0;
padding-right:0}}.navbar-fixed-top .navbar-collapse,.navbar-fixed-bottom .navbar-collapse{max-height:340px}@media (max-device-width: 480px) and (orientation: landscape){.navbar-fixed-top .navbar-collapse,.navbar-fixed-bottom .navbar-collapse{max-height:200px}}.container>.navbar-header,.container>.navbar-collapse,.container-fluid>.navbar-header,.container-fluid>.navbar-collapse{margin-right:-15px;
margin-left:-15px}@media (min-width: 769px){.container>.navbar-header,.container>.navbar-collapse,.container-fluid>.navbar-header,.container-fluid>.navbar-collapse{margin-right:0;
margin-left:0}}.navbar-static-top{z-index:1000;
border-width:0 0 1px}@media (min-width: 769px){.navbar-static-top{border-radius:0}}.navbar-fixed-top,.navbar-fixed-bottom{position:fixed;
right:0;
left:0;
z-index:1030}@media (min-width: 769px){.navbar-fixed-top,.navbar-fixed-bottom{border-radius:0}}.navbar-fixed-top{top:0;
border-width:0 0 1px}.navbar-fixed-bottom{bottom:0;
margin-bottom:0;
border-width:1px 0 0}.navbar-brand{float:left;
padding:15px 15px;
font-size:18px;
line-height:20px;
height:50px}.navbar-brand:hover,.navbar-brand:focus{text-decoration:none}.navbar-brand>img{display:block}@media (min-width: 769px){.navbar>.container .navbar-brand,.navbar>.container-fluid .navbar-brand{margin-left:-15px}}.navbar-toggle{position:relative;
float:right;
margin-right:15px;
padding:9px 10px;
margin-top:8px;
margin-bottom:8px;
background-color:transparent;
background-image:none;
border:1px solid transparent;
border-radius:4px}.navbar-toggle:focus{outline:0}.navbar-toggle .icon-bar{display:block;
width:22px;
height:2px;
border-radius:1px}.navbar-toggle .icon-bar+.icon-bar{margin-top:4px}@media (min-width: 769px){.navbar-toggle{display:none}}.navbar-nav{margin:7.5px -15px}.navbar-nav>li>a{padding-top:10px;
padding-bottom:10px;
line-height:20px}@media (max-width: 768px){.navbar-nav .open .dropdown-menu{position:static;
float:none;
width:auto;
margin-top:0;
background-color:transparent;
border:0;
box-shadow:none}.navbar-nav .open .dropdown-menu>li>a,.navbar-nav .open .dropdown-menu .dropdown-header{padding:5px 15px 5px 25px}.navbar-nav .open .dropdown-menu>li>a{line-height:20px}.navbar-nav .open .dropdown-menu>li>a:hover,.navbar-nav .open .dropdown-menu>li>a:focus{background-image:none}}@media (min-width: 769px){.navbar-nav{float:left;
margin:0}.navbar-nav>li{float:left}.navbar-nav>li>a{padding-top:15px;
padding-bottom:15px}}.navbar-form{margin-left:-15px;
margin-right:-15px;
padding:10px 15px;
border-top:1px solid transparent;
border-bottom:1px solid transparent;
-webkit-box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1);
box-shadow:inset 0 1px 0 rgba(255,255,255,0.1),0 1px 0 rgba(255,255,255,0.1);
margin-top:8px;
margin-bottom:8px}@media (min-width: 769px){.navbar-form .form-group{display:inline-block;
margin-bottom:0;
vertical-align:middle}.navbar-form .form-control{display:inline-block;
width:auto;
vertical-align:middle}.navbar-form .form-control-static{display:inline-block}.navbar-form .input-group{display:inline-table;
vertical-align:middle}.navbar-form .input-group .input-group-addon,.navbar-form .input-group .input-group-btn,.navbar-form .input-group .form-control{width:auto}.navbar-form .input-group>.form-control{width:100%}.navbar-form .control-label{margin-bottom:0;
vertical-align:middle}.navbar-form .radio,.navbar-form .checkbox{display:inline-block;
margin-top:0;
margin-bottom:0;
vertical-align:middle}.navbar-form .radio label,.navbar-form .checkbox label{padding-left:0}.navbar-form .radio input[type="radio"],.navbar-form .checkbox input[type="checkbox"]{position:relative;
margin-left:0}.navbar-form .has-feedback .form-control-feedback{top:0}}@media (max-width: 768px){.navbar-form .form-group{margin-bottom:5px}.navbar-form .form-group:last-child{margin-bottom:0}}@media (min-width: 769px){.navbar-form{width:auto;
border:0;
margin-left:0;
margin-right:0;
padding-top:0;
padding-bottom:0;
-webkit-box-shadow:none;
box-shadow:none}}.navbar-nav>li>.dropdown-menu{margin-top:0;
border-top-right-radius:0;
border-top-left-radius:0}.navbar-fixed-bottom .navbar-nav>li>.dropdown-menu{margin-bottom:0;
border-top-right-radius:4px;
border-top-left-radius:4px;
border-bottom-right-radius:0;
border-bottom-left-radius:0}.navbar-btn{margin-top:8px;
margin-bottom:8px}.navbar-btn.btn-sm,.btn-group-sm>.navbar-btn.btn{margin-top:10px;
margin-bottom:10px}.navbar-btn.btn-xs,.btn-group-xs>.navbar-btn.btn{margin-top:14px;
margin-bottom:14px}.navbar-text{margin-top:15px;
margin-bottom:15px}@media (min-width: 769px){.navbar-text{float:left;
margin-left:15px;
margin-right:15px}}@media (min-width: 769px){.navbar-left{float:left !important}.navbar-right{float:right !important;
margin-right:-15px}.navbar-right ~ .navbar-right{margin-right:0}}.navbar-default{background-color:transparent;
border-color:transparent}.navbar-default .navbar-brand{color:#777}.navbar-default .navbar-brand:hover,.navbar-default .navbar-brand:focus{color:#5e5e5e;
background-color:transparent}.navbar-default .navbar-text{color:#777}.navbar-default .navbar-nav>li>a{color:#777}.navbar-default .navbar-nav>li>a:hover,.navbar-default .navbar-nav>li>a:focus{color:#333;
background-color:transparent}.navbar-default .navbar-nav>.active>a,.navbar-default .navbar-nav>.active>a:hover,.navbar-default .navbar-nav>.active>a:focus{color:#555;
background-color:transparent}.navbar-default .navbar-nav>.disabled>a,.navbar-default .navbar-nav>.disabled>a:hover,.navbar-default .navbar-nav>.disabled>a:focus{color:#ccc;
background-color:transparent}.navbar-default .navbar-toggle{border-color:#ddd}.navbar-default .navbar-toggle:hover,.navbar-default .navbar-toggle:focus{background-color:#ddd}.navbar-default .navbar-toggle .icon-bar{background-color:#888}.navbar-default .navbar-collapse,.navbar-default .navbar-form{border-color:transparent}.navbar-default .navbar-nav>.open>a,.navbar-default .navbar-nav>.open>a:hover,.navbar-default .navbar-nav>.open>a:focus{background-color:transparent;
color:#555}@media (max-width: 768px){.navbar-default .navbar-nav .open .dropdown-menu>li>a{color:#777}.navbar-default .navbar-nav .open .dropdown-menu>li>a:hover,.navbar-default .navbar-nav .open .dropdown-menu>li>a:focus{color:#333;
background-color:transparent}.navbar-default .navbar-nav .open .dropdown-menu>.active>a,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:hover,.navbar-default .navbar-nav .open .dropdown-menu>.active>a:focus{color:#555;
background-color:transparent}.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:hover,.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:focus{color:#ccc;
background-color:transparent}}.navbar-default .navbar-link{color:#777}.navbar-default .navbar-link:hover{color:#333}.navbar-default .btn-link{color:#777}.navbar-default .btn-link:hover,.navbar-default .btn-link:focus{color:#333}.navbar-default .btn-link[disabled]:hover,.navbar-default .btn-link[disabled]:focus,fieldset[disabled] .navbar-default .btn-link:hover,fieldset[disabled] .navbar-default .btn-link:focus{color:#ccc}.navbar-inverse{background-color:#222;
border-color:#090909}.navbar-inverse .navbar-brand{color:#9d9d9d}.navbar-inverse .navbar-brand:hover,.navbar-inverse .navbar-brand:focus{color:#fff;
background-color:transparent}.navbar-inverse .navbar-text{color:#9d9d9d}.navbar-inverse .navbar-nav>li>a{color:#9d9d9d}.navbar-inverse .navbar-nav>li>a:hover,.navbar-inverse .navbar-nav>li>a:focus{color:#fff;
background-color:transparent}.navbar-inverse .navbar-nav>.active>a,.navbar-inverse .navbar-nav>.active>a:hover,.navbar-inverse .navbar-nav>.active>a:focus{color:#fff;
background-color:#090909}.navbar-inverse .navbar-nav>.disabled>a,.navbar-inverse .navbar-nav>.disabled>a:hover,.navbar-inverse .navbar-nav>.disabled>a:focus{color:#444;
background-color:transparent}.navbar-inverse .navbar-toggle{border-color:#333}.navbar-inverse .navbar-toggle:hover,.navbar-inverse .navbar-toggle:focus{background-color:#333}.navbar-inverse .navbar-toggle .icon-bar{background-color:#fff}.navbar-inverse .navbar-collapse,.navbar-inverse .navbar-form{border-color:#101010}.navbar-inverse .navbar-nav>.open>a,.navbar-inverse .navbar-nav>.open>a:hover,.navbar-inverse .navbar-nav>.open>a:focus{background-color:#090909;
color:#fff}@media (max-width: 768px){.navbar-inverse .navbar-nav .open .dropdown-menu>.dropdown-header{border-color:#090909}.navbar-inverse .navbar-nav .open .dropdown-menu .divider{background-color:#090909}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a{color:#9d9d9d}.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:hover,.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:focus{color:#fff;
background-color:transparent}.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:hover,.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:focus{color:#fff;
background-color:#090909}.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:hover,.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:focus{color:#444;
background-color:transparent}}.navbar-inverse .navbar-link{color:#9d9d9d}.navbar-inverse .navbar-link:hover{color:#fff}.navbar-inverse .btn-link{color:#9d9d9d}.navbar-inverse .btn-link:hover,.navbar-inverse .btn-link:focus{color:#fff}.navbar-inverse .btn-link[disabled]:hover,.navbar-inverse .btn-link[disabled]:focus,fieldset[disabled] .navbar-inverse .btn-link:hover,fieldset[disabled] .navbar-inverse .btn-link:focus{color:#444}.breadcrumb{padding:8px 15px;
margin-bottom:20px;
list-style:none;
background-color:#f5f5f5;
border-radius:4px}.breadcrumb>li{display:inline-block}.breadcrumb>li+li:before{content:"/ ";
padding:0 5px;
color:#ccc}.breadcrumb>.active{color:#777777}.pagination{display:inline-block;
padding-left:0;
margin:20px 0;
border-radius:4px}.pagination>li{display:inline}.pagination>li>a,.pagination>li>span{position:relative;
float:left;
padding:6px 12px;
line-height:1.42857;
text-decoration:none;
color:#00a9e5;
background-color:#fff;
border:1px solid #ddd;
margin-left:-1px}.pagination>li:first-child>a,.pagination>li:first-child>span{margin-left:0;
border-bottom-left-radius:4px;
border-top-left-radius:4px}.pagination>li:last-child>a,.pagination>li:last-child>span{border-bottom-right-radius:4px;
border-top-right-radius:4px}.pagination>li>a:hover,.pagination>li>a:focus,.pagination>li>span:hover,.pagination>li>span:focus{z-index:3;
color:#007199;
background-color:#eeeeee;
border-color:#ddd}.pagination>.active>a,.pagination>.active>a:hover,.pagination>.active>a:focus,.pagination>.active>span,.pagination>.active>span:hover,.pagination>.active>span:focus{z-index:2;
color:#fff;
background-color:#337ab7;
border-color:#337ab7;
cursor:default}.pagination>.disabled>span,.pagination>.disabled>span:hover,.pagination>.disabled>span:focus,.pagination>.disabled>a,.pagination>.disabled>a:hover,.pagination>.disabled>a:focus{color:#777777;
background-color:#fff;
border-color:#ddd;
cursor:not-allowed}.pagination-lg>li>a,.pagination-lg>li>span{padding:10px 16px;
font-size:18px;
line-height:1.33333}.pagination-lg>li:first-child>a,.pagination-lg>li:first-child>span{border-bottom-left-radius:6px;
border-top-left-radius:6px}.pagination-lg>li:last-child>a,.pagination-lg>li:last-child>span{border-bottom-right-radius:6px;
border-top-right-radius:6px}.pagination-sm>li>a,.pagination-sm>li>span{padding:5px 10px;
font-size:12px;
line-height:1.5}.pagination-sm>li:first-child>a,.pagination-sm>li:first-child>span{border-bottom-left-radius:3px;
border-top-left-radius:3px}.pagination-sm>li:last-child>a,.pagination-sm>li:last-child>span{border-bottom-right-radius:3px;
border-top-right-radius:3px}.pager{padding-left:0;
margin:20px 0;
list-style:none;
text-align:center}.pager:before,.pager:after{content:" ";
display:table}.pager:after{clear:both}.pager li{display:inline}.pager li>a,.pager li>span{display:inline-block;
padding:5px 14px;
background-color:#fff;
border:1px solid #ddd;
border-radius:15px}.pager li>a:hover,.pager li>a:focus{text-decoration:none;
background-color:#eeeeee}.pager .next>a,.pager .next>span{float:right}.pager .previous>a,.pager .previous>span{float:left}.pager .disabled>a,.pager .disabled>a:hover,.pager .disabled>a:focus,.pager .disabled>span{color:#777777;
background-color:#fff;
cursor:not-allowed}.label{display:inline;
padding:.2em .6em .3em;
font-size:75%;
font-weight:bold;
line-height:1;
color:#fff;
text-align:center;
white-space:nowrap;
vertical-align:baseline;
border-radius:.25em}.label:empty{display:none}.btn .label{position:relative;
top:-1px}a.label:hover,a.label:focus{color:#fff;
text-decoration:none;
cursor:pointer}.label-default{background-color:#777777}.label-default[href]:hover,.label-default[href]:focus{background-color:#5e5e5e}.label-primary{background-color:#337ab7}.label-primary[href]:hover,.label-primary[href]:focus{background-color:#286090}.label-success{background-color:#5cb85c}.label-success[href]:hover,.label-success[href]:focus{background-color:#449d44}.label-info{background-color:#5bc0de}.label-info[href]:hover,.label-info[href]:focus{background-color:#31b0d5}.label-warning{background-color:#f0ad4e}.label-warning[href]:hover,.label-warning[href]:focus{background-color:#ec971f}.label-danger{background-color:#d9534f}.label-danger[href]:hover,.label-danger[href]:focus{background-color:#c9302c}.badge{display:inline-block;
min-width:10px;
padding:3px 7px;
font-size:12px;
font-weight:bold;
color:#fff;
line-height:1;
vertical-align:middle;
white-space:nowrap;
text-align:center;
background-color:#777777;
border-radius:10px}.badge:empty{display:none}.btn .badge{position:relative;
top:-1px}.btn-xs .badge,.btn-group-xs>.btn .badge,.btn-group-xs>.btn .badge{top:0;
padding:1px 5px}.list-group-item.active>.badge,.nav-pills>.active>a>.badge{color:#00a9e5;
background-color:#fff}.list-group-item>.badge{float:right}.list-group-item>.badge+.badge{margin-right:5px}.nav-pills>li>a>.badge{margin-left:3px}a.badge:hover,a.badge:focus{color:#fff;
text-decoration:none;
cursor:pointer}.jumbotron{padding-top:30px;
padding-bottom:30px;
margin-bottom:30px;
color:inherit;
background-color:#eeeeee}.jumbotron h1,.jumbotron .h1{color:inherit}.jumbotron p{margin-bottom:15px;
font-size:21px;
font-weight:200}.jumbotron>hr{border-top-color:#d5d5d5}.container .jumbotron,.container-fluid .jumbotron{border-radius:6px}.jumbotron .container{max-width:100%}@media screen and (min-width: 769px){.jumbotron{padding-top:48px;
padding-bottom:48px}.container .jumbotron,.container-fluid .jumbotron{padding-left:60px;
padding-right:60px}.jumbotron h1,.jumbotron .h1{font-size:63px}}.thumbnail{display:block;
padding:4px;
margin-bottom:20px;
line-height:1.42857;
background-color:#fff;
border:1px solid #ddd;
border-radius:4px;
-webkit-transition:border 0.2s ease-in-out;
-o-transition:border 0.2s ease-in-out;
transition:border 0.2s ease-in-out}.thumbnail>img,.thumbnail a>img{display:block;
max-width:100%;
height:auto;
margin-left:auto;
margin-right:auto}.thumbnail .caption{padding:9px;
color:#444}a.thumbnail:hover,a.thumbnail:focus,a.thumbnail.active{border-color:#00a9e5}.alert{padding:15px;
margin-bottom:20px;
border:1px solid transparent;
border-radius:4px}.alert h4{margin-top:0;
color:inherit}.alert .alert-link{font-weight:bold}.alert>p,.alert>ul{margin-bottom:0}.alert>p+p{margin-top:5px}.alert-dismissable,.alert-dismissible{padding-right:35px}.alert-dismissable .close,.alert-dismissible .close{position:relative;
top:-2px;
right:-21px;
color:inherit}.alert-success{background-color:#dff0d8;
border-color:#d6e9c6;
color:#3c763d}.alert-success hr{border-top-color:#c9e2b3}.alert-success .alert-link{color:#2b542c}.alert-info{background-color:#d9edf7;
border-color:#bce8f1;
color:#31708f}.alert-info hr{border-top-color:#a6e1ec}.alert-info .alert-link{color:#245269}.alert-warning{background-color:#fcf8e3;
border-color:#faebcc;
color:#8a6d3b}.alert-warning hr{border-top-color:#f7e1b5}.alert-warning .alert-link{color:#66512c}.alert-danger{background-color:#f2dede;
border-color:#ebccd1;
color:#a94442}.alert-danger hr{border-top-color:#e4b9c0}.alert-danger .alert-link{color:#843534}@-webkit-keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}@keyframes progress-bar-stripes{from{background-position:40px 0}to{background-position:0 0}}.progress{overflow:hidden;
height:20px;
margin-bottom:20px;
background-color:#f5f5f5;
border-radius:4px;
-webkit-box-shadow:inset 0 1px 2px rgba(0,0,0,0.1);
box-shadow:inset 0 1px 2px rgba(0,0,0,0.1)}.progress-bar{float:left;
width:0%;
height:100%;
font-size:12px;
line-height:20px;
color:#fff;
text-align:center;
background-color:#337ab7;
-webkit-box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);
box-shadow:inset 0 -1px 0 rgba(0,0,0,0.15);
-webkit-transition:width 0.6s ease;
-o-transition:width 0.6s ease;
transition:width 0.6s ease}.progress-striped .progress-bar,.progress-bar-striped{background-image:-webkit-linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
background-image:-o-linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
background-image:linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
background-size:40px 40px}.progress.active .progress-bar,.progress-bar.active{-webkit-animation:progress-bar-stripes 2s linear infinite;
-o-animation:progress-bar-stripes 2s linear infinite;
animation:progress-bar-stripes 2s linear infinite}.progress-bar-success{background-color:#5cb85c}.progress-striped .progress-bar-success{background-image:-webkit-linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
background-image:-o-linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
background-image:linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent)}.progress-bar-info{background-color:#5bc0de}.progress-striped .progress-bar-info{background-image:-webkit-linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
background-image:-o-linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
background-image:linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent)}.progress-bar-warning{background-color:#f0ad4e}.progress-striped .progress-bar-warning{background-image:-webkit-linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
background-image:-o-linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
background-image:linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent)}.progress-bar-danger{background-color:#d9534f}.progress-striped .progress-bar-danger{background-image:-webkit-linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
background-image:-o-linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
background-image:linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent)}.media{margin-top:15px}.media:first-child{margin-top:0}.media,.media-body{zoom:1;
overflow:hidden}.media-body{width:10000px}.media-object{display:block}.media-object.img-thumbnail{max-width:none}.media-right,.media>.pull-right{padding-left:10px}.media-left,.media>.pull-left{padding-right:10px}.media-left,.media-right,.media-body{display:table-cell;
vertical-align:top}.media-middle{vertical-align:middle}.media-bottom{vertical-align:bottom}.media-heading{margin-top:0;
margin-bottom:5px}.media-list{padding-left:0;
list-style:none}.list-group{margin-bottom:20px;
padding-left:0}.list-group-item{position:relative;
display:block;
padding:10px 15px;
margin-bottom:-1px;
background-color:#fff;
border:1px solid #ddd}.list-group-item:first-child{border-top-right-radius:4px;
border-top-left-radius:4px}.list-group-item:last-child{margin-bottom:0;
border-bottom-right-radius:4px;
border-bottom-left-radius:4px}a.list-group-item,button.list-group-item{color:#555}a.list-group-item .list-group-item-heading,button.list-group-item .list-group-item-heading{color:#333}a.list-group-item:hover,a.list-group-item:focus,button.list-group-item:hover,button.list-group-item:focus{text-decoration:none;
color:#555;
background-color:#f5f5f5}button.list-group-item{width:100%;
text-align:left}.list-group-item.disabled,.list-group-item.disabled:hover,.list-group-item.disabled:focus{background-color:#eeeeee;
color:#777777;
cursor:not-allowed}.list-group-item.disabled .list-group-item-heading,.list-group-item.disabled:hover .list-group-item-heading,.list-group-item.disabled:focus .list-group-item-heading{color:inherit}.list-group-item.disabled .list-group-item-text,.list-group-item.disabled:hover .list-group-item-text,.list-group-item.disabled:focus .list-group-item-text{color:#777777}.list-group-item.active,.list-group-item.active:hover,.list-group-item.active:focus{z-index:2;
color:#fff;
background-color:#337ab7;
border-color:#337ab7}.list-group-item.active .list-group-item-heading,.list-group-item.active .list-group-item-heading>small,.list-group-item.active .list-group-item-heading>.small,.list-group-item.active:hover .list-group-item-heading,.list-group-item.active:hover .list-group-item-heading>small,.list-group-item.active:hover .list-group-item-heading>.small,.list-group-item.active:focus .list-group-item-heading,.list-group-item.active:focus .list-group-item-heading>small,.list-group-item.active:focus .list-group-item-heading>.small{color:inherit}.list-group-item.active .list-group-item-text,.list-group-item.active:hover .list-group-item-text,.list-group-item.active:focus .list-group-item-text{color:#c7ddef}.list-group-item-success{color:#3c763d;
background-color:#dff0d8}a.list-group-item-success,button.list-group-item-success{color:#3c763d}a.list-group-item-success .list-group-item-heading,button.list-group-item-success .list-group-item-heading{color:inherit}a.list-group-item-success:hover,a.list-group-item-success:focus,button.list-group-item-success:hover,button.list-group-item-success:focus{color:#3c763d;
background-color:#d0e9c6}a.list-group-item-success.active,a.list-group-item-success.active:hover,a.list-group-item-success.active:focus,button.list-group-item-success.active,button.list-group-item-success.active:hover,button.list-group-item-success.active:focus{color:#fff;
background-color:#3c763d;
border-color:#3c763d}.list-group-item-info{color:#31708f;
background-color:#d9edf7}a.list-group-item-info,button.list-group-item-info{color:#31708f}a.list-group-item-info .list-group-item-heading,button.list-group-item-info .list-group-item-heading{color:inherit}a.list-group-item-info:hover,a.list-group-item-info:focus,button.list-group-item-info:hover,button.list-group-item-info:focus{color:#31708f;
background-color:#c4e3f3}a.list-group-item-info.active,a.list-group-item-info.active:hover,a.list-group-item-info.active:focus,button.list-group-item-info.active,button.list-group-item-info.active:hover,button.list-group-item-info.active:focus{color:#fff;
background-color:#31708f;
border-color:#31708f}.list-group-item-warning{color:#8a6d3b;
background-color:#fcf8e3}a.list-group-item-warning,button.list-group-item-warning{color:#8a6d3b}a.list-group-item-warning .list-group-item-heading,button.list-group-item-warning .list-group-item-heading{color:inherit}a.list-group-item-warning:hover,a.list-group-item-warning:focus,button.list-group-item-warning:hover,button.list-group-item-warning:focus{color:#8a6d3b;
background-color:#faf2cc}a.list-group-item-warning.active,a.list-group-item-warning.active:hover,a.list-group-item-warning.active:focus,button.list-group-item-warning.active,button.list-group-item-warning.active:hover,button.list-group-item-warning.active:focus{color:#fff;
background-color:#8a6d3b;
border-color:#8a6d3b}.list-group-item-danger{color:#a94442;
background-color:#f2dede}a.list-group-item-danger,button.list-group-item-danger{color:#a94442}a.list-group-item-danger .list-group-item-heading,button.list-group-item-danger .list-group-item-heading{color:inherit}a.list-group-item-danger:hover,a.list-group-item-danger:focus,button.list-group-item-danger:hover,button.list-group-item-danger:focus{color:#a94442;
background-color:#ebcccc}a.list-group-item-danger.active,a.list-group-item-danger.active:hover,a.list-group-item-danger.active:focus,button.list-group-item-danger.active,button.list-group-item-danger.active:hover,button.list-group-item-danger.active:focus{color:#fff;
background-color:#a94442;
border-color:#a94442}.list-group-item-heading{margin-top:0;
margin-bottom:5px}.list-group-item-text{margin-bottom:0;
line-height:1.3}.panel{margin-bottom:20px;
background-color:#fff;
border:1px solid transparent;
border-radius:4px;
-webkit-box-shadow:0 1px 1px rgba(0,0,0,0.05);
box-shadow:0 1px 1px rgba(0,0,0,0.05)}.panel-body{padding:15px}.panel-body:before,.panel-body:after{content:" ";
display:table}.panel-body:after{clear:both}.panel-heading{padding:10px 15px;
border-bottom:1px solid transparent;
border-top-right-radius:3px;
border-top-left-radius:3px}.panel-heading>.dropdown .dropdown-toggle{color:inherit}.panel-title{margin-top:0;
margin-bottom:0;
font-size:16px;
color:inherit}.panel-title>a,.panel-title>small,.panel-title>.small,.panel-title>small>a,.panel-title>.small>a{color:inherit}.panel-footer{padding:10px 15px;
background-color:#f5f5f5;
border-top:1px solid #ddd;
border-bottom-right-radius:3px;
border-bottom-left-radius:3px}.panel>.list-group,.panel>.panel-collapse>.list-group{margin-bottom:0}.panel>.list-group .list-group-item,.panel>.panel-collapse>.list-group .list-group-item{border-width:1px 0;
border-radius:0}.panel>.list-group:first-child .list-group-item:first-child,.panel>.panel-collapse>.list-group:first-child .list-group-item:first-child{border-top:0;
border-top-right-radius:3px;
border-top-left-radius:3px}.panel>.list-group:last-child .list-group-item:last-child,.panel>.panel-collapse>.list-group:last-child .list-group-item:last-child{border-bottom:0;
border-bottom-right-radius:3px;
border-bottom-left-radius:3px}.panel>.panel-heading+.panel-collapse>.list-group .list-group-item:first-child{border-top-right-radius:0;
border-top-left-radius:0}.panel-heading+.list-group .list-group-item:first-child{border-top-width:0}.list-group+.panel-footer{border-top-width:0}.panel>.table,.panel>.table-responsive>.table,.panel>.panel-collapse>.table{margin-bottom:0}.panel>.table caption,.panel>.table-responsive>.table caption,.panel>.panel-collapse>.table caption{padding-left:15px;
padding-right:15px}.panel>.table:first-child,.panel>.table-responsive:first-child>.table:first-child{border-top-right-radius:3px;
border-top-left-radius:3px}.panel>.table:first-child>thead:first-child>tr:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child{border-top-left-radius:3px;
border-top-right-radius:3px}.panel>.table:first-child>thead:first-child>tr:first-child td:first-child,.panel>.table:first-child>thead:first-child>tr:first-child th:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child td:first-child,.panel>.table:first-child>tbody:first-child>tr:first-child th:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child td:first-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child th:first-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child td:first-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child th:first-child{border-top-left-radius:3px}.panel>.table:first-child>thead:first-child>tr:first-child td:last-child,.panel>.table:first-child>thead:first-child>tr:first-child th:last-child,.panel>.table:first-child>tbody:first-child>tr:first-child td:last-child,.panel>.table:first-child>tbody:first-child>tr:first-child th:last-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child td:last-child,.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child th:last-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child td:last-child,.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child th:last-child{border-top-right-radius:3px}.panel>.table:last-child,.panel>.table-responsive:last-child>.table:last-child{border-bottom-right-radius:3px;
border-bottom-left-radius:3px}.panel>.table:last-child>tbody:last-child>tr:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child{border-bottom-left-radius:3px;
border-bottom-right-radius:3px}.panel>.table:last-child>tbody:last-child>tr:last-child td:first-child,.panel>.table:last-child>tbody:last-child>tr:last-child th:first-child,.panel>.table:last-child>tfoot:last-child>tr:last-child td:first-child,.panel>.table:last-child>tfoot:last-child>tr:last-child th:first-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child td:first-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child th:first-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child td:first-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child th:first-child{border-bottom-left-radius:3px}.panel>.table:last-child>tbody:last-child>tr:last-child td:last-child,.panel>.table:last-child>tbody:last-child>tr:last-child th:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child td:last-child,.panel>.table:last-child>tfoot:last-child>tr:last-child th:last-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child td:last-child,.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child th:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child td:last-child,.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child th:last-child{border-bottom-right-radius:3px}.panel>.panel-body+.table,.panel>.panel-body+.table-responsive,.panel>.table+.panel-body,.panel>.table-responsive+.panel-body{border-top:1px solid #ddd}.panel>.table>tbody:first-child>tr:first-child th,.panel>.table>tbody:first-child>tr:first-child td{border-top:0}.panel>.table-bordered,.panel>.table-responsive>.table-bordered{border:0}.panel>.table-bordered>thead>tr>th:first-child,.panel>.table-bordered>thead>tr>td:first-child,.panel>.table-bordered>tbody>tr>th:first-child,.panel>.table-bordered>tbody>tr>td:first-child,.panel>.table-bordered>tfoot>tr>th:first-child,.panel>.table-bordered>tfoot>tr>td:first-child,.panel>.table-responsive>.table-bordered>thead>tr>th:first-child,.panel>.table-responsive>.table-bordered>thead>tr>td:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:first-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:first-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:first-child{border-left:0}.panel>.table-bordered>thead>tr>th:last-child,.panel>.table-bordered>thead>tr>td:last-child,.panel>.table-bordered>tbody>tr>th:last-child,.panel>.table-bordered>tbody>tr>td:last-child,.panel>.table-bordered>tfoot>tr>th:last-child,.panel>.table-bordered>tfoot>tr>td:last-child,.panel>.table-responsive>.table-bordered>thead>tr>th:last-child,.panel>.table-responsive>.table-bordered>thead>tr>td:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>th:last-child,.panel>.table-responsive>.table-bordered>tbody>tr>td:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>th:last-child,.panel>.table-responsive>.table-bordered>tfoot>tr>td:last-child{border-right:0}.panel>.table-bordered>thead>tr:first-child>td,.panel>.table-bordered>thead>tr:first-child>th,.panel>.table-bordered>tbody>tr:first-child>td,.panel>.table-bordered>tbody>tr:first-child>th,.panel>.table-responsive>.table-bordered>thead>tr:first-child>td,.panel>.table-responsive>.table-bordered>thead>tr:first-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:first-child>th{border-bottom:0}.panel>.table-bordered>tbody>tr:last-child>td,.panel>.table-bordered>tbody>tr:last-child>th,.panel>.table-bordered>tfoot>tr:last-child>td,.panel>.table-bordered>tfoot>tr:last-child>th,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>td,.panel>.table-responsive>.table-bordered>tbody>tr:last-child>th,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>td,.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>th{border-bottom:0}.panel>.table-responsive{border:0;
margin-bottom:0}.panel-group{margin-bottom:20px}.panel-group .panel{margin-bottom:0;
border-radius:4px}.panel-group .panel+.panel{margin-top:5px}.panel-group .panel-heading{border-bottom:0}.panel-group .panel-heading+.panel-collapse>.panel-body,.panel-group .panel-heading+.panel-collapse>.list-group{border-top:1px solid #ddd}.panel-group .panel-footer{border-top:0}.panel-group .panel-footer+.panel-collapse .panel-body{border-bottom:1px solid #ddd}.panel-default{border-color:#ddd}.panel-default>.panel-heading{color:#333333;
background-color:#f5f5f5;
border-color:#ddd}.panel-default>.panel-heading+.panel-collapse>.panel-body{border-top-color:#ddd}.panel-default>.panel-heading .badge{color:#f5f5f5;
background-color:#333333}.panel-default>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#ddd}.panel-primary{border-color:#337ab7}.panel-primary>.panel-heading{color:#fff;
background-color:#337ab7;
border-color:#337ab7}.panel-primary>.panel-heading+.panel-collapse>.panel-body{border-top-color:#337ab7}.panel-primary>.panel-heading .badge{color:#337ab7;
background-color:#fff}.panel-primary>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#337ab7}.panel-success{border-color:#d6e9c6}.panel-success>.panel-heading{color:#3c763d;
background-color:#dff0d8;
border-color:#d6e9c6}.panel-success>.panel-heading+.panel-collapse>.panel-body{border-top-color:#d6e9c6}.panel-success>.panel-heading .badge{color:#dff0d8;
background-color:#3c763d}.panel-success>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#d6e9c6}.panel-info{border-color:#bce8f1}.panel-info>.panel-heading{color:#31708f;
background-color:#d9edf7;
border-color:#bce8f1}.panel-info>.panel-heading+.panel-collapse>.panel-body{border-top-color:#bce8f1}.panel-info>.panel-heading .badge{color:#d9edf7;
background-color:#31708f}.panel-info>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#bce8f1}.panel-warning{border-color:#faebcc}.panel-warning>.panel-heading{color:#8a6d3b;
background-color:#fcf8e3;
border-color:#faebcc}.panel-warning>.panel-heading+.panel-collapse>.panel-body{border-top-color:#faebcc}.panel-warning>.panel-heading .badge{color:#fcf8e3;
background-color:#8a6d3b}.panel-warning>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#faebcc}.panel-danger{border-color:#ebccd1}.panel-danger>.panel-heading{color:#a94442;
background-color:#f2dede;
border-color:#ebccd1}.panel-danger>.panel-heading+.panel-collapse>.panel-body{border-top-color:#ebccd1}.panel-danger>.panel-heading .badge{color:#f2dede;
background-color:#a94442}.panel-danger>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#ebccd1}.embed-responsive{position:relative;
display:block;
height:0;
padding:0;
overflow:hidden}.embed-responsive .embed-responsive-item,.embed-responsive iframe,.embed-responsive embed,.embed-responsive object,.embed-responsive video{position:absolute;
top:0;
left:0;
bottom:0;
height:100%;
width:100%;
border:0}.embed-responsive-16by9{padding-bottom:56.25%}.embed-responsive-4by3{padding-bottom:75%}.well{min-height:20px;
padding:19px;
margin-bottom:20px;
background-color:#f5f5f5;
border:1px solid #e3e3e3;
border-radius:4px;
-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,0.05);
box-shadow:inset 0 1px 1px rgba(0,0,0,0.05)}.well blockquote{border-color:#ddd;
border-color:rgba(0,0,0,0.15)}.well-lg{padding:24px;
border-radius:6px}.well-sm{padding:9px;
border-radius:3px}.close{float:right;
font-size:21px;
font-weight:bold;
line-height:1;
color:#000;
text-shadow:0 1px 0 #fff;
opacity:0.2;
filter:alpha(opacity=20)}.close:hover,.close:focus{color:#000;
text-decoration:none;
cursor:pointer;
opacity:0.5;
filter:alpha(opacity=50)}button.close{padding:0;
cursor:pointer;
background:transparent;
border:0;
-webkit-appearance:none}.modal-open{overflow:hidden}.modal{display:none;
overflow:hidden;
position:fixed;
top:0;
right:0;
bottom:0;
left:0;
z-index:1050;
-webkit-overflow-scrolling:touch;
outline:0}.modal.fade .modal-dialog{-webkit-transform:translate(0, -25%);
-ms-transform:translate(0, -25%);
-o-transform:translate(0, -25%);
transform:translate(0, -25%);
-webkit-transition:-webkit-transform 0.3s ease-out;
-moz-transition:-moz-transform 0.3s ease-out;
-o-transition:-o-transform 0.3s ease-out;
transition:transform 0.3s ease-out}.modal.in .modal-dialog{-webkit-transform:translate(0, 0);
-ms-transform:translate(0, 0);
-o-transform:translate(0, 0);
transform:translate(0, 0)}.modal-open .modal{overflow-x:hidden;
overflow-y:auto}.modal-dialog{position:relative;
width:auto;
margin:10px}.modal-content{position:relative;
background-color:#fff;
border:1px solid #999;
border:1px solid rgba(0,0,0,0.2);
border-radius:6px;
-webkit-box-shadow:0 3px 9px rgba(0,0,0,0.5);
box-shadow:0 3px 9px rgba(0,0,0,0.5);
background-clip:padding-box;
outline:0}.modal-backdrop{position:fixed;
top:0;
right:0;
bottom:0;
left:0;
z-index:1040;
background-color:#000}.modal-backdrop.fade{opacity:0;
filter:alpha(opacity=0)}.modal-backdrop.in{opacity:0.5;
filter:alpha(opacity=50)}.modal-header{padding:15px;
border-bottom:1px solid #e5e5e5;
min-height:16.42857px}.modal-header .close{margin-top:-2px}.modal-title{margin:0;
line-height:1.42857}.modal-body{position:relative;
padding:15px}.modal-footer{padding:15px;
text-align:right;
border-top:1px solid #e5e5e5}.modal-footer:before,.modal-footer:after{content:" ";
display:table}.modal-footer:after{clear:both}.modal-footer .btn+.btn{margin-left:5px;
margin-bottom:0}.modal-footer .btn-group .btn+.btn{margin-left:-1px}.modal-footer .btn-block+.btn-block{margin-left:0}.modal-scrollbar-measure{position:absolute;
top:-9999px;
width:50px;
height:50px;
overflow:scroll}@media (min-width: 769px){.modal-dialog{width:600px;
margin:30px auto}.modal-content{-webkit-box-shadow:0 5px 15px rgba(0,0,0,0.5);
box-shadow:0 5px 15px rgba(0,0,0,0.5)}.modal-sm{width:300px}}@media (min-width: 992px){.modal-lg{width:900px}}.tooltip{position:absolute;
z-index:1070;
display:block;
font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
font-style:normal;
font-weight:normal;
letter-spacing:normal;
line-break:auto;
line-height:1.42857;
text-align:left;
text-align:start;
text-decoration:none;
text-shadow:none;
text-transform:none;
white-space:normal;
word-break:normal;
word-spacing:normal;
word-wrap:normal;
font-size:12px;
opacity:0;
filter:alpha(opacity=0)}.tooltip.in{opacity:0.9;
filter:alpha(opacity=90)}.tooltip.top{margin-top:-3px;
padding:5px 0}.tooltip.right{margin-left:3px;
padding:0 5px}.tooltip.bottom{margin-top:3px;
padding:5px 0}.tooltip.left{margin-left:-3px;
padding:0 5px}.tooltip-inner{max-width:200px;
padding:3px 8px;
color:#fff;
text-align:center;
background-color:#000;
border-radius:4px}.tooltip-arrow{position:absolute;
width:0;
height:0;
border-color:transparent;
border-style:solid}.tooltip.top .tooltip-arrow{bottom:0;
left:50%;
margin-left:-5px;
border-width:5px 5px 0;
border-top-color:#000}.tooltip.top-left .tooltip-arrow{bottom:0;
right:5px;
margin-bottom:-5px;
border-width:5px 5px 0;
border-top-color:#000}.tooltip.top-right .tooltip-arrow{bottom:0;
left:5px;
margin-bottom:-5px;
border-width:5px 5px 0;
border-top-color:#000}.tooltip.right .tooltip-arrow{top:50%;
left:0;
margin-top:-5px;
border-width:5px 5px 5px 0;
border-right-color:#000}.tooltip.left .tooltip-arrow{top:50%;
right:0;
margin-top:-5px;
border-width:5px 0 5px 5px;
border-left-color:#000}.tooltip.bottom .tooltip-arrow{top:0;
left:50%;
margin-left:-5px;
border-width:0 5px 5px;
border-bottom-color:#000}.tooltip.bottom-left .tooltip-arrow{top:0;
right:5px;
margin-top:-5px;
border-width:0 5px 5px;
border-bottom-color:#000}.tooltip.bottom-right .tooltip-arrow{top:0;
left:5px;
margin-top:-5px;
border-width:0 5px 5px;
border-bottom-color:#000}.popover{position:absolute;
top:0;
left:0;
z-index:1060;
display:none;
max-width:276px;
padding:1px;
font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
font-style:normal;
font-weight:normal;
letter-spacing:normal;
line-break:auto;
line-height:1.42857;
text-align:left;
text-align:start;
text-decoration:none;
text-shadow:none;
text-transform:none;
white-space:normal;
word-break:normal;
word-spacing:normal;
word-wrap:normal;
font-size:14px;
background-color:#fff;
background-clip:padding-box;
border:1px solid #ccc;
border:1px solid rgba(0,0,0,0.2);
border-radius:6px;
-webkit-box-shadow:0 5px 10px rgba(0,0,0,0.2);
box-shadow:0 5px 10px rgba(0,0,0,0.2)}.popover.top{margin-top:-10px}.popover.right{margin-left:10px}.popover.bottom{margin-top:10px}.popover.left{margin-left:-10px}.popover-title{margin:0;
padding:8px 14px;
font-size:14px;
background-color:#f7f7f7;
border-bottom:1px solid #ebebeb;
border-radius:5px 5px 0 0}.popover-content{padding:9px 14px}.popover>.arrow,.popover>.arrow:after{position:absolute;
display:block;
width:0;
height:0;
border-color:transparent;
border-style:solid}.popover>.arrow{border-width:11px}.popover>.arrow:after{border-width:10px;
content:""}.popover.top>.arrow{left:50%;
margin-left:-11px;
border-bottom-width:0;
border-top-color:#999999;
border-top-color:rgba(0,0,0,0.25);
bottom:-11px}.popover.top>.arrow:after{content:" ";
bottom:1px;
margin-left:-10px;
border-bottom-width:0;
border-top-color:#fff}.popover.right>.arrow{top:50%;
left:-11px;
margin-top:-11px;
border-left-width:0;
border-right-color:#999999;
border-right-color:rgba(0,0,0,0.25)}.popover.right>.arrow:after{content:" ";
left:1px;
bottom:-10px;
border-left-width:0;
border-right-color:#fff}.popover.bottom>.arrow{left:50%;
margin-left:-11px;
border-top-width:0;
border-bottom-color:#999999;
border-bottom-color:rgba(0,0,0,0.25);
top:-11px}.popover.bottom>.arrow:after{content:" ";
top:1px;
margin-left:-10px;
border-top-width:0;
border-bottom-color:#fff}.popover.left>.arrow{top:50%;
right:-11px;
margin-top:-11px;
border-right-width:0;
border-left-color:#999999;
border-left-color:rgba(0,0,0,0.25)}.popover.left>.arrow:after{content:" ";
right:1px;
border-right-width:0;
border-left-color:#fff;
bottom:-10px}.carousel{position:relative}.carousel-inner{position:relative;
overflow:hidden;
width:100%}.carousel-inner>.item{display:none;
position:relative;
-webkit-transition:0.6s ease-in-out left;
-o-transition:0.6s ease-in-out left;
transition:0.6s ease-in-out left}.carousel-inner>.item>img,.carousel-inner>.item>a>img{display:block;
max-width:100%;
height:auto;
line-height:1}@media all and (transform-3d), (-webkit-transform-3d){.carousel-inner>.item{-webkit-transition:-webkit-transform 0.6s ease-in-out;
-moz-transition:-moz-transform 0.6s ease-in-out;
-o-transition:-o-transform 0.6s ease-in-out;
transition:transform 0.6s ease-in-out;
-webkit-backface-visibility:hidden;
-moz-backface-visibility:hidden;
backface-visibility:hidden;
-webkit-perspective:1000px;
-moz-perspective:1000px;
perspective:1000px}.carousel-inner>.item.next,.carousel-inner>.item.active.right{-webkit-transform:translate3d(100%, 0, 0);
transform:translate3d(100%, 0, 0);
left:0}.carousel-inner>.item.prev,.carousel-inner>.item.active.left{-webkit-transform:translate3d(-100%, 0, 0);
transform:translate3d(-100%, 0, 0);
left:0}.carousel-inner>.item.next.left,.carousel-inner>.item.prev.right,.carousel-inner>.item.active{-webkit-transform:translate3d(0, 0, 0);
transform:translate3d(0, 0, 0);
left:0}}.carousel-inner>.active,.carousel-inner>.next,.carousel-inner>.prev{display:block}.carousel-inner>.active{left:0}.carousel-inner>.next,.carousel-inner>.prev{position:absolute;
top:0;
width:100%}.carousel-inner>.next{left:100%}.carousel-inner>.prev{left:-100%}.carousel-inner>.next.left,.carousel-inner>.prev.right{left:0}.carousel-inner>.active.left{left:-100%}.carousel-inner>.active.right{left:100%}.carousel-control{position:absolute;
top:0;
left:0;
bottom:0;
width:15%;
opacity:0.5;
filter:alpha(opacity=50);
font-size:20px;
color:#fff;
text-align:center;
text-shadow:0 1px 2px rgba(0,0,0,0.6)}.carousel-control.left{background-image:-webkit-linear-gradient(left, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.0001) 100%);
background-image:-o-linear-gradient(left, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.0001) 100%);
background-image:linear-gradient(to right, rgba(0,0,0,0.5) 0%, rgba(0,0,0,0.0001) 100%);
background-repeat:repeat-x;
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#80000000', endColorstr='#00000000', GradientType=1)}.carousel-control.right{left:auto;
right:0;
background-image:-webkit-linear-gradient(left, rgba(0,0,0,0.0001) 0%, rgba(0,0,0,0.5) 100%);
background-image:-o-linear-gradient(left, rgba(0,0,0,0.0001) 0%, rgba(0,0,0,0.5) 100%);
background-image:linear-gradient(to right, rgba(0,0,0,0.0001) 0%, rgba(0,0,0,0.5) 100%);
background-repeat:repeat-x;
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#00000000', endColorstr='#80000000', GradientType=1)}.carousel-control:hover,.carousel-control:focus{outline:0;
color:#fff;
text-decoration:none;
opacity:0.9;
filter:alpha(opacity=90)}.carousel-control .icon-prev,.carousel-control .icon-next,.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right{position:absolute;
top:50%;
margin-top:-10px;
z-index:5;
display:inline-block}.carousel-control .icon-prev,.carousel-control .glyphicon-chevron-left{left:50%;
margin-left:-10px}.carousel-control .icon-next,.carousel-control .glyphicon-chevron-right{right:50%;
margin-right:-10px}.carousel-control .icon-prev,.carousel-control .icon-next{width:20px;
height:20px;
line-height:1;
font-family:serif}.carousel-control .icon-prev:before{content:'\2039'}.carousel-control .icon-next:before{content:'\203a'}.carousel-indicators{position:absolute;
bottom:10px;
left:50%;
z-index:15;
width:60%;
margin-left:-30%;
padding-left:0;
list-style:none;
text-align:center}.carousel-indicators li{display:inline-block;
width:10px;
height:10px;
margin:1px;
text-indent:-999px;
border:1px solid #fff;
border-radius:10px;
cursor:pointer;
background-color:#000 \9;
background-color:transparent}.carousel-indicators .active{margin:0;
width:12px;
height:12px;
background-color:#fff}.carousel-caption{position:absolute;
left:15%;
right:15%;
bottom:20px;
z-index:10;
padding-top:20px;
padding-bottom:20px;
color:#fff;
text-align:center;
text-shadow:0 1px 2px rgba(0,0,0,0.6)}.carousel-caption .btn{text-shadow:none}@media screen and (min-width: 769px){.carousel-control .glyphicon-chevron-left,.carousel-control .glyphicon-chevron-right,.carousel-control .icon-prev,.carousel-control .icon-next{width:30px;
height:30px;
margin-top:-15px;
font-size:30px}.carousel-control .glyphicon-chevron-left,.carousel-control .icon-prev{margin-left:-15px}.carousel-control .glyphicon-chevron-right,.carousel-control .icon-next{margin-right:-15px}.carousel-caption{left:20%;
right:20%;
padding-bottom:30px}.carousel-indicators{bottom:20px}}.clearfix:before,.clearfix:after{content:" ";
display:table}.clearfix:after{clear:both}.center-block{display:block;
margin-left:auto;
margin-right:auto}.pull-right{float:right !important}.pull-left{float:left !important}.hide{display:none !important}.show{display:block !important}.invisible{visibility:hidden}.text-hide{font:0/0 a;
color:transparent;
text-shadow:none;
background-color:transparent;
border:0}.hidden{display:none !important}.affix{position:fixed}@-ms-viewport{width:device-width}.visible-xs{display:none !important}.visible-sm{display:none !important}.visible-md{display:none !important}.visible-lg{display:none !important}.visible-xs-block,.visible-xs-inline,.visible-xs-inline-block,.visible-sm-block,.visible-sm-inline,.visible-sm-inline-block,.visible-md-block,.visible-md-inline,.visible-md-inline-block,.visible-lg-block,.visible-lg-inline,.visible-lg-inline-block{display:none !important}@media (max-width: 768px){.visible-xs{display:block !important}table.visible-xs{display:table !important}tr.visible-xs{display:table-row !important}th.visible-xs,td.visible-xs{display:table-cell !important}}@media (max-width: 768px){.visible-xs-block{display:block !important}}@media (max-width: 768px){.visible-xs-inline{display:inline !important}}@media (max-width: 768px){.visible-xs-inline-block{display:inline-block !important}}@media (min-width: 769px) and (max-width: 991px){.visible-sm{display:block !important}table.visible-sm{display:table !important}tr.visible-sm{display:table-row !important}th.visible-sm,td.visible-sm{display:table-cell !important}}@media (min-width: 769px) and (max-width: 991px){.visible-sm-block{display:block !important}}@media (min-width: 769px) and (max-width: 991px){.visible-sm-inline{display:inline !important}}@media (min-width: 769px) and (max-width: 991px){.visible-sm-inline-block{display:inline-block !important}}@media (min-width: 992px) and (max-width: 1199px){.visible-md{display:block !important}table.visible-md{display:table !important}tr.visible-md{display:table-row !important}th.visible-md,td.visible-md{display:table-cell !important}}@media (min-width: 992px) and (max-width: 1199px){.visible-md-block{display:block !important}}@media (min-width: 992px) and (max-width: 1199px){.visible-md-inline{display:inline !important}}@media (min-width: 992px) and (max-width: 1199px){.visible-md-inline-block{display:inline-block !important}}@media (min-width: 1200px){.visible-lg{display:block !important}table.visible-lg{display:table !important}tr.visible-lg{display:table-row !important}th.visible-lg,td.visible-lg{display:table-cell !important}}@media (min-width: 1200px){.visible-lg-block{display:block !important}}@media (min-width: 1200px){.visible-lg-inline{display:inline !important}}@media (min-width: 1200px){.visible-lg-inline-block{display:inline-block !important}}@media (max-width: 768px){.hidden-xs{display:none !important}}@media (min-width: 769px) and (max-width: 991px){.hidden-sm{display:none !important}}@media (min-width: 992px) and (max-width: 1199px){.hidden-md{display:none !important}}@media (min-width: 1200px){.hidden-lg{display:none !important}}.visible-print{display:none !important}@media print{.visible-print{display:block !important}table.visible-print{display:table !important}tr.visible-print{display:table-row !important}th.visible-print,td.visible-print{display:table-cell !important}}.visible-print-block{display:none !important}@media print{.visible-print-block{display:block !important}}.visible-print-inline{display:none !important}@media print{.visible-print-inline{display:inline !important}}.visible-print-inline-block{display:none !important}@media print{.visible-print-inline-block{display:inline-block !important}}@media print{.hidden-print{display:none !important}}html,body{-webkit-font-smoothing:antialiased;
overflow-x:hidden;
background:#fff;
color:#444;
line-height:26px;
font-family:arial, helvetica, sans-serif;
font-size:16px;
font-weight:400}input,textarea,select,p,span{font-size:16px;
font-weight:normal;
color:#444}ul,ul li{background:none;
list-style-type:none;
margin:0;
padding:0}a,a:hover,a:focus{color:#00a9e5;
font-weight:600;
text-decoration:none;
outline:none;
outline-offset:0}a:hover,a:focus,a:hover:hover,a:hover:focus,a:focus:hover,a:focus:focus{text-decoration:underline}a.whiteurl{color:#fff;
text-decoration:underline}.error-document{margin-top:-50px}.error-document h1,.error-document h2{display:inline;
vertical-align:middle}.error-document h1:after{content:"|";
display:inline-block;
vertical-align:top;
margin-top:-5px}.content .btn:hover,.content .btn:focus{text-decoration:none}h1,h2,h3,h4,h5,h6,.h1,.h2,.h3,.h4,.h5,.h6{margin:0px;
font-family:arial, helvetica, sans-serif;
font-weight:400;
color:#000}h1 a,h2 a,h3 a,h4 a,h5 a,h6 a,.h1 a,.h2 a,.h3 a,.h4 a,.h5 a,.h6 a{color:inherit;
text-decoration:none}h1,.largeheader{font-size:56px;
font-weight:300;
line-height:67px;
margin:0 0 18px}h2,.smallheader{line-height:49px;
font-size:36px;
font-weight:300}h3,.largetitle{line-height:42px;
font-size:32px}h4,.paragraphtitle{line-height:42px;
font-size:30px;
font-weight:300}h5,.mediumtitle{line-height:34px;
font-size:26px}h6,.smalltitle{line-height:28px;
font-size:20px}.bookmark{color:#39BDB1;
font-weight:600;
text-transform:uppercase}.footer-title{line-height:20px;
color:#000;
font-size:16px;
font-weight:600}.intro-paragraph{line-height:29px;
font-size:18px}.intro-paragraph p{line-height:29px;
font-size:18px}.blog-title{line-height:24px;
font-size:18px;
font-weight:600}.form-text{font-weight:400;
font-size:14px;
line-height:26px;
color:#444}table,dl,dt,dd,tbody,tfoot,thead,tr,th,td{line-height:26px;
color:#444;
font-size:15px;
font-weight:400}.clearfix:before,.clearfix:after{content:" ";
display:table}.clearfix:after{clear:both}.unscroll{position:fixed;
width:100%}strong,b{font-family:arial, helvetica, sans-serif;
font-weight:600}i,em{font-style:italic}sub{position:relative;
top:0.5em;
font-size:0.8em}sup{position:relative;
top:-0.5em;
font-size:0.8em}small{line-height:26px;
color:#444;
font-size:12px;
font-weight:400}blockquote{border-left:5px solid #39BDB1;
padding-left:20px;
line-height:32px;
font-size:20px;
font-weight:400}p{font-size:16px;
font-weight:normal}hr{border-color:#CCCCCC}figure{text-align:center}.form-control:focus{-moz-box-shadow:none;
-webkit-box-shadow:none;
-o-box-shadow:none;
-ms-box-shadow:none;
box-shadow:none}.mkto-form-wrapper{padding:0px 30px}pre{box-sizing:border-box;
-moz-box-sizing:border-box;
webkit-box-sizing:border-box;
display:inline-block;
white-space:pre-wrap;
white-space:-moz-pre-wrap;
white-space:-pre-wrap;
white-space:-o-pre-wrap;
word-wrap:break-word;
width:100%;
overflow-x:auto;
font-family:monospace,serif}.main-container pre,code{box-sizing:border-box;
-moz-box-sizing:border-box;
webkit-box-sizing:border-box;
display:inline-block;
white-space:pre-wrap;
white-space:-moz-pre-wrap;
white-space:-pre-wrap;
white-space:-o-pre-wrap;
word-wrap:break-word;
width:100%;
overflow-x:auto;
font-family:monospace,serif}code{display:inline;
white-space:normal}pre.prettyprint{background-color:#f0f0f0;
border:0;
font-size:15px;
margin-bottom:15px;
padding:10px;
word-break:break-word;
white-space:pre-wrap;
border-left:3px solid #39BDB1}.literal{background:#f0f0f0;
color:#555;
display:inline;
padding:0 5px;
vertical-align:middle;
width:auto;
white-space:normal}.simple-pagination ul li.active .current{color:#00a9e5;
border-bottom:1px solid #00a9e5}#product-update .form-wrapper{float:none}#product-update .form-wrapper>form{background:#fff;
margin:0 auto;
padding:40px;
width:360px !important}.content .mktoRequiredField label.mktoLabel,label.mktoLabel{color:#999;
line-height:26px !important;
font-size:14px;
font-weight:400}.mktoForm .mktoError .mktoErrorMsg{color:#fff !important}.mktoForm .mktoError .mktoErrorMsg .mktoErrorDetail{color:#fff;
font-size:14px;
font-weight:300;
text-shadow:0 -1px 0 #901100}.thank-you-message p{margin:20px 0}.content .mktoForm input[type="text"],#product-update .mktoForm input[type="text"],.mktoForm textarea,.mktoForm input[type="url"],.mktoForm input[type="email"],.mktoForm input[type="tel"],.mktoForm input[type="number"],.mktoForm input[type="date"],.user-form-wrapper input{border-top:1px solid #CCCCCC;
border-right:1px solid #CCCCCC;
border-bottom:1px solid #CCCCCC;
border-left:1px solid #CCCCCC;
-webkit-border-radius:3px;
-moz-border-radius:3px;
-ms-border-radius:3px;
border-radius:3px;
color:#999;
line-height:26px;
height:30px;
padding:5px 10px;
font-size:14px;
font-weight:400}.mktoForm input.mktoEmailField[type="email"]{min-width:190px !important;
-webkit-border-radius:0px;
-moz-border-radius:0px;
-ms-border-radius:0px;
border-radius:0px}.subscribe-form .mktoForm input.mktoEmailField[type="email"]{-webkit-border-radius:6px;
-moz-border-radius:6px;
-ms-border-radius:6px;
border-radius:6px;
height:40px}.uniform>.mktoButtonRow .mktoButtonWrap{display:inline-block;
margin-top:20px}.mktoButtonRow{padding-top:10px !important}.subscribe-form .mktoButton{color:#fff !important;
background:#39BDB1 !important;
font-size:18px !important;
height:40px;
padding:2px 21px !important;
min-width:100px !important}.subscribe-form .mktoButton:hover{background:#009B8F !important}.mktoForm .mktoFieldWrap .mktoRadioList,.mktoForm .mktoFieldWrap .mktoCheckboxList{padding:0.3em 0.3em 0.3em 0}#product-update .form-wrapper>form .mktoButtonRow{margin-top:10px}.form-wrapper>form .mktoButtonRow .mktoNative,.uniform>form .mktoButtonRow .mktoNative{margin-left:0px !important}.mktoForm .mktoOffset{float:none !important;
display:none}.marketo-form-wrapper .mktoForm-bg{background-color:#fff;
margin-top:8px;
padding-bottom:50px}.marketo-form-wrapper .marketoform-description-wrapper{padding-right:25px}.mktoForm-bg h2{margin-bottom:15px}.mktoForm-bg .uniform{padding-right:10px}ul.list-black{margin:0px 0px 15px 0px;
padding:0}ul.list-black li{list-style-type:disc;
padding-left:5px;
margin-bottom:10px;
margin-left:20px}ul.list-blue,ul.list_arrows{margin:0px 0px 15px 0px;
padding:0}ul.list-blue li,ul.list_arrows li{background:url("../images/bullet-blue.png") no-repeat 0px 10px;
padding-left:20px;
margin-bottom:10px}.common-container{width:750px;
margin-right:auto;
margin-left:auto}.intro-section{background:#fff none repeat scroll 0 0;
border-bottom:1px solid #CCCCCC;
padding:30px 0px}.m-t-b-10{margin-top:10px;
margin-bottom:10px}.m-t-b-20{margin-top:20px;
margin-bottom:20px}.m-t-b-30{margin-top:30px;
margin-bottom:30px}.m-t-b-40{margin:40px 0px}.m-t-b-50{margin:50px 0px}.m-t-b-60{margin:60px 0px}.m-t-b-70{margin:70px 0px}.m-t-b-75{margin-top:75px;
margin-bottom:75px}.m-t-b-80{margin-top:80px;
margin-bottom:80px}.m-t-2{margin-top:2px}.m-t-5{margin-top:5px}.m-t-8{margin-top:8px}.m-t-10{margin-top:10px}.m-t-15{margin-top:15px}.m-t-20{margin-top:20px}.m-t-25{margin-top:25px}.m-t-30{margin-top:30px}.m-t-35{margin-top:35px}.m-t-40{margin-top:40px}.m-t-45{margin-top:45px}.m-t-47{margin-top:47px}.m-t-50{margin-top:50px}.m-t-55{margin-top:55px}.m-t-60{margin-top:60px}.m-t-65{margin-top:65px}.m-t-70{margin-top:70px}.m-t-75{margin-top:75px}.m-t-80{margin-top:80px}.m-t-95{margin-top:95px}.m-t-minus10{margin-top:-10px}.m-t-minus20{margin-top:-20px}.m-t-minus48{margin-top:-48px}.m-t-minus50{margin-top:-50px}.m-b-0{margin-bottom:0}.m-b-1{margin-bottom:1px}.m-b-2{margin-bottom:2px}.m-b-3{margin-bottom:3px}.m-b-5{margin-bottom:5px}.m-b-10{margin-bottom:10px}.m-b-15{margin-bottom:15px}.m-b-20{margin-bottom:20px}.m-b-25{margin-bottom:25px}.m-b-30{margin-bottom:30px}.m-b-40{margin-bottom:40px}.m-b-45{margin-bottom:45px}.m-b-50{margin-bottom:50px}.m-b-55{margin-bottom:55px}.m-b-60{margin-bottom:60px}.m-b-65{margin-bottom:65px}.m-b-70{margin-bottom:70px}.m-b-75{margin-bottom:75px}.m-b-80{margin-bottom:80px}.m-b-90{margin-bottom:90px}.m-b-100{margin-bottom:100px}.m-r-20{margin-right:20px}.m-l-8{margin-left:8px}.m-l-10{margin-left:10px}.m-l-15{margin-left:15px}.m-l-r-80{margin-left:80px;
margin-right:80px}.p-t-8{padding-top:8px}.p-t-15{padding-top:15px}.p-t-20{padding-top:20px}.p-t-26{padding-top:26px}.p-t-35{padding-top:35px}.p-t-40{padding-top:40px}.p-t-50{padding-top:50px}.p-t-60{padding-top:60px}.p-t-70{padding-top:70px}.p-b-0{padding-bottom:0}.p-b-20{padding-bottom:20px}.p-b-30{padding-bottom:30px}.p-b-40{padding-bottom:40px}.p-b-50{padding-bottom:50px}.p-b-60{padding-bottom:60px}.p-b-70{padding-bottom:70px}.p-b-80{padding-bottom:80px}.p-b-100{padding-bottom:100px}.p-t-b-5{padding:5px 0}.p-t-b-8{padding:8px 0}.p-t-b-10{padding:10px 0}.p-t-b-15{padding-top:15px;
padding-bottom:15px}.p-t-b-20{padding:20px 0px}.p-t-b-30{padding-top:30px;
padding-bottom:30px}.p-t-b-60{padding-top:60px;
padding-bottom:60px}.p-b-65{padding-bottom:65px}.p-l-40{padding-left:40px}.p-l-60{padding-left:60px}.p-r-25{padding-right:25px}.p-r-50{padding-right:50px}.p-r-40{padding-right:40px}.p-r-60{padding-right:60px}.p-0{padding:0}.main-page-header{margin:0 0 63px 0}.lh-19{line-height:19px !important}.bdr-btm-e0e0e0{border-bottom:1px solid #CCCCCC}.bdr-btm-e7e7e7{border-bottom:1px solid #CCCCCC}.bdr-right-e0e0e0{border-right:1px solid #CCCCCC}.bdr-left-e0e0e0{border-left:1px solid #CCCCCC}.no-border{border:0px none !important}.blue-clr{color:#00a9e5}.gray-bg{background:#f7f7f7}.white-bg{background-color:#fff}img.grayscale{filter:url("data:image/svg+xml;
utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter .2525 0 0 0.2525 0.2525 0.2525 0 0 0 0 0 1 0'/></filter></svg>#grayscale");
filter:url("data:image/svg+xml;
utf8,<svg xmlns='http://www.w3.org/2000/svg'><filter id='grayscale'><feColorMatrix type='matrix' values='0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0'/></filter></svg>#grayscale");
filter:gray;
-webkit-filter:grayscale(100%);
-webkit-backface-visibility:hidden}figure i,.border-circle{background-position:center center;
background-repeat:no-repeat;
background-size:120% auto;
border-top:6px solid #CCCCCC;
border-right:6px solid #CCCCCC;
border-bottom:6px solid #CCCCCC;
border-left:6px solid #CCCCCC;
-webkit-border-radius:340px;
-moz-border-radius:340px;
-ms-border-radius:340px;
border-radius:340px;
height:170px;
overflow:hidden;
width:170px}.embed-container iframe,.video iframe{border:0;
height:287px;
width:100%}.blue-box{border-top:1px solid #00a9e5;
border-right:1px solid #00a9e5;
border-bottom:1px solid #00a9e5;
border-left:1px solid #00a9e5;
-webkit-border-radius:5px;
-moz-border-radius:5px;
-ms-border-radius:5px;
border-radius:5px;
background:#fff;
padding:15px 40px}.blue-box p{margin-bottom:0px}.quotes{height:120px;
opacity:0.5;
filter:alpha(opacity=50)}.check-icon{display:inline-block;
vertical-align:middle}.check-icon:after{content:'';
display:block;
width:7px;
height:12px;
border-top:0px none;
border-left:0px none;
border-right:2px solid #74a300;
border-bottom:2px solid #74a300;
-webkit-transform:rotate(45deg);
-moz-transform:rotate(45deg);
-ms-transform:rotate(45deg);
transform:rotate(45deg);
margin:6px auto}.video-thumb{position:relative;
display:inline-block;
max-width:100%}.video-thumb .play-btn{position:absolute;
top:0;
left:0;
bottom:0;
right:0;
margin:auto;
width:30px;
height:30px}.video-desc{background:rgba(0,0,0,0.5) none repeat scroll 0 0;
height:60px;
position:absolute;
text-align:center;
-webkit-transform:translateY(-100%);
-moz-transform:translateY(-100%);
-ms-transform:translateY(-100%);
transform:translateY(-100%);
width:100%}.video-desc p{color:#fff;
padding-top:10px;
line-height:normal}.video-content-wrapper h3{color:#0078A0}.video-content-wrapper h3 a{color:#0078A0}.position-relative{position:relative}.position-absolute{position:absolute}.btn-wrap{position:absolute;
bottom:0px}.see-more-btn{background:transparent url("../images/see-more.png") no-repeat scroll right center;
display:inline-block;
font-size:18px;
font-weight:600;
padding-right:25px}.see-more-btn:hover{text-decoration:none}.right-arrow{background-image:url("../images/right-blue-arrow.png");
background-repeat:no-repeat;
background-position:right 4px;
padding-right:25px;
color:#00a9e5;
font-size:16px;
display:inline-block}.right-arrow:hover{color:#00a9e5}.upgrade-icon{background-image:url("../images/refresh-icon.png");
background-repeat:no-repeat;
background-position:0px 0px;
display:inline-block;
height:28px;
padding-left:35px;
vertical-align:middle}.circle-bg{background:#fff;
-webkit-border-radius:104px;
-moz-border-radius:104px;
-ms-border-radius:104px;
border-radius:104px;
-moz-box-shadow:0px 2px 5px rgba(0,0,0,0.2);
-webkit-box-shadow:0px 2px 5px rgba(0,0,0,0.2);
-o-box-shadow:0px 2px 5px rgba(0,0,0,0.2);
-ms-box-shadow:0px 2px 5px rgba(0,0,0,0.2);
box-shadow:0px 2px 5px rgba(0,0,0,0.2);
width:104px;
height:104px;
position:relative;
display:inline-block;
z-index:1}.circle-bg img{bottom:0;
height:70%;
left:0;
margin:auto;
position:absolute;
right:0;
top:0;
width:70%}.circle-bg:before{content:' ';
vertical-align:middle;
height:100%}.circle-bg .graph-img-center{left:6px}.checkmark{height:63px;
width:63px}.right-shelf{background-color:#00a9e5;
height:auto;
padding:10px 0;
position:fixed;
right:0;
top:50%;
white-space:nowrap;
width:70px;
z-index:100;
-webkit-border-radius:6px 0 0 6px;
-moz-border-radius:6px 0 0 6px;
-ms-border-radius:6px 0 0 6px;
border-radius:6px 0 0 6px;
-webkit-transform:translate(0, -50%);
-moz-transform:translate(0, -50%);
-ms-transform:translate(0, -50%);
transform:translate(0, -50%);
-moz-transition:width 0.3s;
-webkit-transition:width 0.3s;
-o-transition:width 0.3s;
-ms-transition:width 0.3s;
transition:width 0.3s}.right-shelf ul li{opacity:0.6;
filter:alpha(opacity=60);
padding:10px 20px}.right-shelf ul li a{color:#fff;
font-weight:400}.right-shelf ul li img{width:30px;
height:30px}.right-shelf ul li:hover{opacity:1;
filter:alpha(opacity=100)}.right-shelf span{color:#fff;
margin-left:20px}.right-shelf:hover{width:140px}.right-shelf:hover span{display:inline-block}.simple-pagination{border-top:1px solid #CCCCCC;
padding:20px 25px;
clear:both}.simple-pagination ul{margin:0}.simple-pagination ul li{display:inline-block;
margin:0 20px}.simple-pagination ul li:first-child{margin-left:10px}.simple-pagination ul li a,.simple-pagination ul li span{color:#444;
font-size:28px}.simple-pagination ul li a:hover,.simple-pagination ul li span:hover{color:#00a9e5;
text-decoration:none;
border-bottom:1px solid #00a9e5}.simple-pagination ul li.active .current{color:#00a9e5;
border-bottom:1px solid #00a9e5}.simple-pagination ul li.disabled .ellipse{color:#878787}.security-img{width:31px;
height:47px;
padding:0px !important;
display:inline-block}.gray-white-block{border-top:1px solid #CCCCCC;
border-right:1px solid #CCCCCC;
border-bottom:1px solid #CCCCCC;
border-left:1px solid #CCCCCC;
-webkit-border-radius:6px;
-moz-border-radius:6px;
-ms-border-radius:6px;
border-radius:6px;
display:table;
position:relative;
width:100%}.gray-white-block .white-block{-webkit-border-radius:6px 0 0 6px;
-moz-border-radius:6px 0 0 6px;
-ms-border-radius:6px 0 0 6px;
border-radius:6px 0 0 6px;
border-right:1px solid #CCCCCC;
background-color:#fff;
position:relative}.gray-white-block .gray-block{-webkit-border-radius:0 6px 6px 0;
-moz-border-radius:0 6px 6px 0;
-ms-border-radius:0 6px 6px 0;
border-radius:0 6px 6px 0;
background-color:transparent}.gray-white-block .col{display:table-cell;
vertical-align:middle;
width:50%}.gray-white-block .product-icon{position:absolute;
top:0;
right:0;
bottom:0;
left:0;
margin:auto;
z-index:100}.pageheader{text-align:center}.pageheader p{padding-top:5px}.pageheader h3{font-size:28px;
display:inline;
font-weight:300;
padding-left:4px}.pageheader h3:before{content:"|";
font-weight:400;
margin-right:8px}.featured-section{background-image:-webkit-linear-gradient(left, #00aac4 0%, #009ebd 100%);
background-image:-o-linear-gradient(left, #00aac4 0%, #009ebd 100%);
background-image:linear-gradient(to right, #00aac4 0%, #009ebd 100%);
background-repeat:repeat-x;
filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#FF00AAC4', endColorstr='#FF009EBD', GradientType=1);
background-size:cover;
height:380px;
max-height:392px;
padding-top:70px}.featured-section h1{color:#fff}.featured-list li{list-style-type:none;
margin-top:80px;
margin-bottom:80px}.featured-list li p{margin-bottom:0}.featured-list li:first-child{margin-top:60px}.featured-list li img{margin-right:auto;
margin-left:auto}.cyan-banner{background:#39BDB1;
color:#fff;
text-align:center;
min-height:370px}.cyan-banner h2,.cyan-banner p{color:#fff}.bg-blue{background:#00a9e5}.bg-dark-teal{background:#009B8F}.bg-light-blue{background:#3DC6F3}.bg-darker-green{background:#507034}.bg-1{background:#DF4998}.bg-2{background:#93c90E}.bg-3{background:#fed10a}.bg-4{background:#74a300}.bg-5{background:#39BDB1}.bg-6{background:#0078A0}#footer-subscribe .subscribe-wrapper{background-color:#005571;
padding:30px 0px;
position:relative}#footer-subscribe .subscribe-wrapper h5,#footer-subscribe .subscribe-wrapper p{color:#fff;
margin-bottom:0}#footer-subscribe .subscribe-wrapper .subscribe-form-container{display:table;
width:100%}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-title{display:table-cell;
vertical-align:middle;
width:50%}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-title{padding-left:0px;
text-align:left}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form{padding-right:0px;
text-align:right}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm{width:100% !important;
text-align:right}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow{display:inline-block;
padding-top:0 !important;
vertical-align:middle}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoNative,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoRequiredField,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoNative,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoRequiredField{margin:0 !important}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoNative input.mktoEmailField[type="email"],#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoRequiredField input.mktoEmailField[type="email"],#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoNative input.mktoEmailField[type="email"],#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoRequiredField input.mktoEmailField[type="email"]{border-radius:0;
border-top-left-radius:6px;
border-bottom-left-radius:6px;
padding:0 10px;
height:48px}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoNative input.mktoEmailField[type="email"] ::-webkit-input-placeholder,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoRequiredField input.mktoEmailField[type="email"] ::-webkit-input-placeholder,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoNative input.mktoEmailField[type="email"] ::-webkit-input-placeholder,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoRequiredField input.mktoEmailField[type="email"] ::-webkit-input-placeholder{color:#777777 !important;
opacity:1}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoNative input.mktoEmailField[type="email"] :-moz-placeholder,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoRequiredField input.mktoEmailField[type="email"] :-moz-placeholder,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoNative input.mktoEmailField[type="email"] :-moz-placeholder,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoRequiredField input.mktoEmailField[type="email"] :-moz-placeholder{color:#777777 !important;
opacity:1}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoNative input.mktoEmailField[type="email"] ::-moz-placeholder,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoRequiredField input.mktoEmailField[type="email"] ::-moz-placeholder,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoNative input.mktoEmailField[type="email"] ::-moz-placeholder,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoRequiredField input.mktoEmailField[type="email"] ::-moz-placeholder{opacity:1;
color:#777777}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoNative input.mktoEmailField[type="email"] :-ms-input-placeholder,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoRequiredField input.mktoEmailField[type="email"] :-ms-input-placeholder,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoNative input.mktoEmailField[type="email"] :-ms-input-placeholder,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoRequiredField input.mktoEmailField[type="email"] :-ms-input-placeholder{opacity:1;
color:#777777 !important}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoNative button,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoRequiredField button,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoNative button,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoRequiredField button{border:0;
border-radius:0;
border-top-right-radius:6px;
border-bottom-right-radius:6px;
height:48px}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoLabel,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoLabel{display:none}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoFormCol,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoFormCol{margin-bottom:0 !important}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .sb-form p{color:#fff;
font-size:16px;
margin:5px 0 0}.mkto-form-wrapper{border-top:1px solid #CCCCCC;
border-right:1px solid #CCCCCC;
border-bottom:1px solid #CCCCCC;
border-left:1px solid #CCCCCC;
-webkit-border-radius:6px;
-moz-border-radius:6px;
-ms-border-radius:6px;
border-radius:6px;
padding:20px;
width:100%}.content .mktoForm,.content .user-form-wrapper,#product-update .mktoForm,#product-update .user-form-wrapper{width:100% !important;
padding:0px}.content .mktoForm .mktoFormCol,.content .user-form-wrapper .mktoFormCol,#product-update .mktoForm .mktoFormCol,#product-update .user-form-wrapper .mktoFormCol{margin-bottom:0px !important}.content .mktoForm .mktoButton,.content .user-form-wrapper .mktoButton,#product-update .mktoForm .mktoButton,#product-update .user-form-wrapper .mktoButton{background:transparent;
border-top:1px solid #00a9e5;
border-right:1px solid #00a9e5;
border-bottom:1px solid #00a9e5;
border-left:1px solid #00a9e5;
-webkit-border-radius:3px;
-moz-border-radius:3px;
-ms-border-radius:3px;
border-radius:3px;
color:#00a9e5;
display:inline-block;
font-size:16px;
height:40px;
line-height:39px;
min-width:120px;
padding:0px 15px !important;
margin:0;
text-align:center;
text-transform:none}.content .mktoForm .mktoButton:hover,.content .user-form-wrapper .mktoButton:hover,#product-update .mktoForm .mktoButton:hover,#product-update .user-form-wrapper .mktoButton:hover{background-color:rgba(0,169,229,0.1);
color:rgba(0,169,229,0.1);
color:#00a9e5}.content .mktoForm .mktoButton:active,.content .mktoForm .mktoButton.active,.content .user-form-wrapper .mktoButton:active,.content .user-form-wrapper .mktoButton.active,#product-update .mktoForm .mktoButton:active,#product-update .mktoForm .mktoButton.active,#product-update .user-form-wrapper .mktoButton:active,#product-update .user-form-wrapper .mktoButton.active{background-color:rgba(0,169,229,0.3);
color:rgba(0,169,229,0.3);
color:#00a9e5}.content .mktoForm .mktoButton:focus,.content .mktoForm .mktoButton.focus,.content .mktoForm .mktoButton:active:focus,.content .mktoForm .mktoButton:active.focus,.content .mktoForm .mktoButton.active:focus,.content .mktoForm .mktoButton.active.focus,.content .user-form-wrapper .mktoButton:focus,.content .user-form-wrapper .mktoButton.focus,.content .user-form-wrapper .mktoButton:active:focus,.content .user-form-wrapper .mktoButton:active.focus,.content .user-form-wrapper .mktoButton.active:focus,.content .user-form-wrapper .mktoButton.active.focus,#product-update .mktoForm .mktoButton:focus,#product-update .mktoForm .mktoButton.focus,#product-update .mktoForm .mktoButton:active:focus,#product-update .mktoForm .mktoButton:active.focus,#product-update .mktoForm .mktoButton.active:focus,#product-update .mktoForm .mktoButton.active.focus,#product-update .user-form-wrapper .mktoButton:focus,#product-update .user-form-wrapper .mktoButton.focus,#product-update .user-form-wrapper .mktoButton:active:focus,#product-update .user-form-wrapper .mktoButton:active.focus,#product-update .user-form-wrapper .mktoButton.active:focus,#product-update .user-form-wrapper .mktoButton.active.focus{background-color:transparent;
color:#00a9e5}.content .mktoForm .mktoFieldWrap,.content .user-form-wrapper .mktoFieldWrap,#product-update .mktoForm .mktoFieldWrap,#product-update .user-form-wrapper .mktoFieldWrap{margin-right:20px}.content .mktoForm .mktoFieldWrap .mktoCheckboxList,.content .user-form-wrapper .mktoFieldWrap .mktoCheckboxList,#product-update .mktoForm .mktoFieldWrap .mktoCheckboxList,#product-update .user-form-wrapper .mktoFieldWrap .mktoCheckboxList{padding:1em 0.3em 0.3em 0}.content .mktoForm .mktoFieldWrap .mktoCheckboxList>label,.content .user-form-wrapper .mktoFieldWrap .mktoCheckboxList>label,#product-update .mktoForm .mktoFieldWrap .mktoCheckboxList>label,#product-update .user-form-wrapper .mktoFieldWrap .mktoCheckboxList>label{margin-top:0px;
min-height:20px;
line-height:1em;
color:#999;
font-weight:400}.content .mktoForm input,.content .mktoForm input[type="text"],.content .mktoForm input[type="url"],.content .mktoForm input[type="email"],.content .mktoForm input[type="tel"],.content .mktoForm input[type="number"],.content .mktoForm input[type="date"],.content .mktoForm textarea,.content .user-form-wrapper input,.content .user-form-wrapper input[type="text"],.content .user-form-wrapper input[type="url"],.content .user-form-wrapper input[type="email"],.content .user-form-wrapper input[type="tel"],.content .user-form-wrapper input[type="number"],.content .user-form-wrapper input[type="date"],.content .user-form-wrapper textarea,#product-update .mktoForm input,#product-update .mktoForm input[type="text"],#product-update .mktoForm input[type="url"],#product-update .mktoForm input[type="email"],#product-update .mktoForm input[type="tel"],#product-update .mktoForm input[type="number"],#product-update .mktoForm input[type="date"],#product-update .mktoForm textarea,#product-update .user-form-wrapper input,#product-update .user-form-wrapper input[type="text"],#product-update .user-form-wrapper input[type="url"],#product-update .user-form-wrapper input[type="email"],#product-update .user-form-wrapper input[type="tel"],#product-update .user-form-wrapper input[type="number"],#product-update .user-form-wrapper input[type="date"],#product-update .user-form-wrapper textarea{border-top:1px solid #CCCCCC;
border-right:1px solid #CCCCCC;
border-bottom:1px solid #CCCCCC;
border-left:1px solid #CCCCCC;
-webkit-border-radius:3px;
-moz-border-radius:3px;
-ms-border-radius:3px;
border-radius:3px;
color:#444;
line-height:39px;
height:40px;
padding:5px 10px;
min-width:190px;
font-size:14px;
font-weight:400}.content .mktoForm input[type="checkbox"],.content .user-form-wrapper input[type="checkbox"],#product-update .mktoForm input[type="checkbox"],#product-update .user-form-wrapper input[type="checkbox"]{min-width:auto;
height:auto}.content .mktoForm input[type="checkbox"]:checked+label,.content .user-form-wrapper input[type="checkbox"]:checked+label,#product-update .mktoForm input[type="checkbox"]:checked+label,#product-update .user-form-wrapper input[type="checkbox"]:checked+label{color:#444}.content .mktoForm select.mktoField,.content .user-form-wrapper select.mktoField,#product-update .mktoForm select.mktoField,#product-update .user-form-wrapper select.mktoField{min-width:190px;
height:30px;
font-size:14px;
color:#999;
border-color:#CCCCCC}.content .mktoForm textarea,.content .user-form-wrapper textarea,#product-update .mktoForm textarea,#product-update .user-form-wrapper textarea{height:3.8em}.content .mktoForm .mktoGutter,.content .user-form-wrapper .mktoGutter,#product-update .mktoForm .mktoGutter,#product-update .user-form-wrapper .mktoGutter{display:none}@media screen and (max-width: 1199px){#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-title{display:block;
width:100%}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form{margin:10px auto 0;
text-align:left}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm{text-align:left}}@media screen and (min-width: 0px) and (max-width: 991px){.m-b-sm-40{margin-bottom:40px}.common-container{max-width:95%}}@media screen and (min-width: 768px) and (max-width: 1024px){.right-shelf{bottom:10%;
top:auto;
-webkit-transform:translate(0, 0);
-moz-transform:translate(0, 0);
-ms-transform:translate(0, 0);
transform:translate(0, 0)}}@media screen and (max-width: 768px){.simple-pagination ul li{margin:0 15px}.container,.container-fluid{margin-right:auto;
margin-left:auto;
padding-left:10px;
padding-right:10px}.container:before,.container:after,.container-fluid:before,.container-fluid:after{content:" ";
display:table}.container:after,.container-fluid:after{clear:both}.row{margin-left:-10px;
margin-right:-10px}.row:before,.row:after{content:" ";
display:table}.row:after{clear:both}.row [class*="col-"]{padding-left:10px;
padding-right:10px}.pageheader h1,.pageheader h2{font-size:1.6em}.featured-section h1{font-size:30px}.featured-list img{display:block;
margin:0px auto 20px}.m-t-sm-20{margin-top:20px}.m-t-sm-30{margin-top:30px}.m-t-sm-minus20{margin-top:-20px}.m-b-sm-20{margin-bottom:20px}.p-b-sm-70{padding-bottom:70px !important}.sm-hr{border-right:0px;
border-bottom:1px solid #CCCCCC;
padding-bottom:30px;
margin-bottom:20px}h1,.largeheader{font-size:36px;
line-height:49px}h2,.smallheader{font-size:32px;
line-height:42px}h3,.largetitle{font-size:28px}h4,.paragraphtitle{font-size:26px}h5,.mediumtitle{font-size:22px}h6,.smalltitle{font-size:18px}.btn-wrap{position:relative}.error-document{margin-top:0}.gray-white-block{display:block}.gray-white-block .col{display:block;
float:none;
width:100%}.gray-white-block .white-block{border-bottom:1px solid #CCCCCC;
border-right:0 none;
-webkit-border-radius:6px 6px 0 0;
-moz-border-radius:6px 6px 0 0;
-ms-border-radius:6px 6px 0 0;
border-radius:6px 6px 0 0;
padding-bottom:55px}.gray-white-block .product-icon{position:relative;
top:50%;
margin-bottom:-52px;
right:0;
bottom:0;
left:50%;
z-index:100;
-webkit-transform:translate(-50%, -50%);
-moz-transform:translate(-50%, -50%);
-ms-transform:translate(-50%, -50%);
transform:translate(-50%, -50%)}.right-shelf{background-color:transparent;
bottom:0;
padding:40px 10px;
position:relative;
text-align:center;
top:0;
width:100%;
-webkit-border-radius:0;
-moz-border-radius:0;
-ms-border-radius:0;
border-radius:0;
-webkit-transform:translate(0);
-moz-transform:translate(0);
-ms-transform:translate(0);
transform:translate(0);
-moz-transition:none;
-webkit-transition:none;
-o-transition:none;
-ms-transition:none;
transition:none}.right-shelf ul li{display:inline-block;
opacity:1;
filter:alpha(opacity=100);
padding:0}.right-shelf ul li:before{content:"|";
margin:0 20px}.right-shelf ul li:first-child:before{content:"";
margin:0}.right-shelf span{color:#444;
margin-left:0}.right-shelf:hover{width:100%}.mkto-form-wrapper .form-inside{width:100%}.mkto-form-wrapper .form-inside p,.mkto-form-wrapper .form-inside #rtp2-products{float:none !important}.mkto-form-wrapper .form-inside #rtp2-products{width:100%}}@media screen and (max-width: 600px){.video-thumb{max-width:295px}.mkto-form-wrapper .form-inside{text-align:left}}@media screen and (max-width: 480px){.simple-pagination{padding:0}.simple-pagination ul li{margin:0 10px}.simple-pagination ul li a,.simple-pagination ul li span{font-size:22px}.featured-section h1{font-size:24px}.mr-20{margin-right:0}h4{font-size:22px}.sm-mt-20{margin-top:20px}.center-button{display:block;
margin:0 auto}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form{margin:10px auto 0}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm{padding:0}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow{width:100%}#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoNative input.mktoEmailField[type="email"],#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoNative button,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoRequiredField input.mktoEmailField[type="email"],#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoFormRow .mktoRequiredField button,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoNative input.mktoEmailField[type="email"],#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoNative button,#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoRequiredField input.mktoEmailField[type="email"],#footer-subscribe .subscribe-wrapper .subscribe-form-container .subscribe-form .mktoForm .mktoButtonRow .mktoRequiredField button{border-radius:6px}.content .mktoForm input,.content .mktoForm input[type="text"],.content .mktoForm input[type="url"],.content .mktoForm input[type="email"],.content .mktoForm input[type="tel"],.content .mktoForm input[type="number"],.content .mktoForm input[type="date"],.content .mktoForm textarea,.content .user-form-wrapper input,.content .user-form-wrapper input[type="text"],.content .user-form-wrapper input[type="url"],.content .user-form-wrapper input[type="email"],.content .user-form-wrapper input[type="tel"],.content .user-form-wrapper input[type="number"],.content .user-form-wrapper input[type="date"],.content .user-form-wrapper textarea,#product-update .mktoForm input,#product-update .mktoForm input[type="text"],#product-update .mktoForm input[type="url"],#product-update .mktoForm input[type="email"],#product-update .mktoForm input[type="tel"],#product-update .mktoForm input[type="number"],#product-update .mktoForm input[type="date"],#product-update .mktoForm textarea,#product-update .user-form-wrapper input,#product-update .user-form-wrapper input[type="text"],#product-update .user-form-wrapper input[type="url"],#product-update .user-form-wrapper input[type="email"],#product-update .user-form-wrapper input[type="tel"],#product-update .user-form-wrapper input[type="number"],#product-update .user-form-wrapper input[type="date"],#product-update .user-form-wrapper textarea{border-top:1px solid #CCCCCC;
border-right:1px solid #CCCCCC;
border-bottom:1px solid #CCCCCC;
border-left:1px solid #CCCCCC;
-webkit-border-radius:3px;
-moz-border-radius:3px;
-ms-border-radius:3px;
border-radius:3px;
color:#999;
line-height:39px;
height:40px;
padding:5px 10px;
font-size:14px;
font-weight:400}}.btn{padding:0px 15px;
min-width:120px;
height:40px;
line-height:39px;
color:#fff;
border-color:#00a9e5;
-webkit-border-radius:3px;
-moz-border-radius:3px;
-ms-border-radius:3px;
border-radius:3px;
font-size:16px;
display:inline-block}.btn:focus,.btn.focus,.btn:active:focus,.btn:active.focus,.btn.active:focus,.btn.active.focus,.btn:active,.btn.active{color:#fff;
font-weight:400;
outline:none;
text-decoration:none;
-moz-box-shadow:none;
-webkit-box-shadow:none;
-o-box-shadow:none;
-ms-box-shadow:none;
box-shadow:none}.btn:hover,.btn:active,.btn.active{color:#fff;
text-decoration:none;
font-weight:400}a.btn:focus,a.btn.focus,a.btn:active:focus,a.btn:active.focus,a.btn.active:focus,a.btn.active.focus,a.btn:active,a.btn.active,a.btn:hover{text-decoration:none}.btn-primary{background-color:#00a9e5}.btn-primary:hover,.btn-primary:focus:hover,.btn-primary.focus:hover{background-color:#005571;
border-color:#005571;
text-decoration:none}.btn-primary:active,.btn-primary.active{background-color:#31c8fa;
border-color:#31c8fa;
text-decoration:none}.btn-primary:focus,.btn-primary.focus,.btn-primary:active:focus,.btn-primary:active.focus,.btn-primary.active:focus,.btn-primary.active.focus{background-color:#00a9e5;
border-color:#00a9e5;
text-decoration:none}.btn-secondary{background-color:transparent;
border-color:#00a9e5;
color:#00a9e5}.btn-secondary:hover{background-color:rgba(0,169,224,0.1);
color:#00a9e5;
text-decoration:none}.btn-secondary:active,.btn-secondary.active{background-color:rgba(0,169,229,0.3);
color:rgba(0,169,229,0.3);
color:#00a9e5;
text-decoration:none}.btn-secondary:focus,.btn-secondary.focus,.btn-secondary:active:focus,.btn-secondary:active.focus,.btn-secondary.active:focus,.btn-secondary.active.focus{background-color:transparent;
color:#00a9e5;
text-decoration:none}.featured-btn-green{background:#39BDB1;
border-color:#39BDB1}.featured-btn-green:hover,.featured-btn-green:active,.featured-btn-green.active,.featured-btn-green:focus,.featured-btn-green.focus{background:#39BDB1;
text-decoration:none}.btn-xs,.btn-group-xs>.btn{min-width:auto;
height:30px;
line-height:30px;
padding:0 10px;
font-size:14px}.transparent-btn{background:transparent;
display:inline-block;
border-color:#fff;
max-width:150px;
width:100%;
color:#fff}.transparent-btn:hover{background-color:rgba(255,255,255,0.3);
color:rgba(255,255,255,0.3);
color:#fff;
text-decoration:none}.transparent-btn:active,.transparent-btn.active{background-color:rgba(255,255,255,0.5);
color:rgba(255,255,255,0.5);
color:#fff;
text-decoration:none}.transparent-btn:focus,.transparent-btn.focus,.transparent-btn:active:focus,.transparent-btn:active.focus,.transparent-btn.active:focus,.transparent-btn.active.focus{background:transparent;
color:#fff;
text-decoration:none}.btn-yellow{background-color:#F9B110;
border-top:1px solid #F9B110;
border-right:1px solid #F9B110;
border-bottom:1px solid #F9B110;
border-left:1px solid #F9B110}.btn-yellow:hover{background:#fed10a;
color:#fff;
border-top:1px solid #fed10a;
border-right:1px solid #fed10a;
border-bottom:1px solid #fed10a;
border-left:1px solid #fed10a}.btn-yellow:active,.btn-yellow.active{background:#F9B110;
color:#fff;
border-top:1px solid #F9B110;
border-right:1px solid #F9B110;
border-bottom:1px solid #F9B110;
border-left:1px solid #F9B110}.btn-yellow:focus,.btn-yellow.focus,.btn-yellow:active:focus,.btn-yellow:active.focus,.btn-yellow.active:focus,.btn-yellow.active.focus{background:#F9B110;
color:#fff;
border-top:1px solid #F9B110;
border-right:1px solid #F9B110;
border-bottom:1px solid #F9B110;
border-left:1px solid #F9B110}@media (min-width: 769px) and (max-width: 991px){.btn-responsive{padding:7px 10px;
font-size:90%;
line-height:1.2;
height:auto;
min-width:auto}}@media (max-width: 768px){.btn-responsive{padding:10px;
font-size:80%;
line-height:1;
height:auto;
min-width:auto}}.navbar-toggle{padding:0px;
margin-right:0px}.navbar-toggle .icon-bar{width:24px;
height:3px;
background:#444}.text-danger{color:red}.form-control{height:40px}.input-group-btn>.btn{min-width:100px}.btn-lg,.btn-group-lg>.btn{min-width:210px;
font-size:18px}.btn-sm,.btn-group-sm>.btn,.btn-group-sm>.btn{min-width:auto;
font-size:14px;
padding:0px 18px}.btn-group .btn+.btn,.btn-group .btn+.btn-group,.btn-group .btn-group+.btn,.btn-group .btn-group+.btn-group{border-left:1px solid #83d2ee;
margin-left:0px}.header-wrapper{background:#fff;
border-bottom:1px solid #CCCCCC;
position:relative;
width:100%;
z-index:11111}.shortcut-link-wrapper{padding:10px 0;
text-align:right;
background:#fff}#shortcuts{display:inline-block}#shortcuts ul.links li{display:inline-block;
margin:0 0 0 1em;
padding:0}#shortcuts ul.links li:first-child{border-left:0 none;
margin-left:0;
padding-left:0}#shortcuts ul.links li a{color:#444;
display:inline-block;
font-size:12px;
font-weight:normal;
padding:0;
text-transform:lowercase}#shortcuts ul.links li.shortcut-5{margin:0 0 0 15px;
padding:0 0 2px;
text-align:center;
line-height:135%;
-webkit-border-radius:6px;
-moz-border-radius:6px;
-ms-border-radius:6px;
border-radius:6px}#shortcuts ul.links li.shortcut-5 a{display:block;
margin:0;
padding:0 10px;
color:#fff;
text-align:center}.global-language{cursor:pointer;
display:inline-block;
margin:0 0 0 15px;
position:relative;
text-align:center;
vertical-align:middle}.global-language .language li{-webkit-border-radius:50%;
-moz-border-radius:50%;
-ms-border-radius:50%;
border-radius:50%;
display:inline-block;
margin:0;
height:30px;
min-width:30px;
text-align:center;
vertical-align:middle}.global-language .language li a{color:#444;
display:inline-block;
font-size:12px;
text-decoration:none;
padding:5px}.global-language .language-list{background:#fff;
border-top:1px solid #CCCCCC;
border-right:1px solid #CCCCCC;
border-bottom:1px solid #CCCCCC;
border-left:1px solid #CCCCCC;
-webkit-border-radius:4px;
-moz-border-radius:4px;
-ms-border-radius:4px;
border-radius:4px;
display:none;
list-style:outside none none;
margin:0;
position:absolute;
padding:10px;
right:0;
width:75px;
top:25px;
width:75px;
z-index:10}.global-language .language-list li{margin-bottom:10px}.global-language .language-list li a{color:#000;
display:inline-block;
font-size:12px;
line-height:normal;
text-decoration:none}.global-language .language-list li a.selected,.global-language .language-list li a:hover,.global-language .language-list li a:focus{color:#00a9e5;
text-decoration:none}.global-language .language-list li:last-child{margin-bottom:0}.global-language:hover .language-list{display:block}.navbar{display:table;
margin:0;
width:100%;
border:0px none;
position:static}.navbar a{font-weight:400}.navbar-header{display:block;
padding:1em 0;
vertical-align:middle}.navbar-header .nav-title{color:#444;
display:inline-block;
vertical-align:middle}.navbar-brand{display:inline-block;
margin:0 20px 0 0;
padding:0;
height:auto;
line-height:normal;
vertical-align:middle}.navbar-brand h1{display:inline-block;
margin:0;
vertical-align:middle}.navbar-brand h1 a{display:block;
height:45px;
-moz-transition:all 0.3s ease 0s;
-webkit-transition:all 0.3s ease 0s;
-o-transition:all 0.3s ease 0s;
-ms-transition:all 0.3s ease 0s;
transition:all 0.3s ease 0s;
width:130px}.navbar-brand h1 a img{vertical-align:top}.navbar-brand h1 a.logo-m{height:30px;
width:30px}.navbar-brand h1 a.logo-m img{height:30px;
width:30px;
vertical-align:top}.menu-m li{display:inline-block;
margin:0 0.2em;
vertical-align:middle}.menu-m li .icon-contact,.menu-m li .button.icon{background:url("../images/svg/icon-nav-contact.svg") no-repeat 0 center;
background-size:100% 90%;
display:inline-block;
width:26px;
height:26px;
vertical-align:middle}.menu-m li.global-language{border-top:1px solid #CCCCCC;
border-right:1px solid #CCCCCC;
border-bottom:1px solid #CCCCCC;
border-left:1px solid #CCCCCC;
-webkit-border-radius:50%;
-moz-border-radius:50%;
-ms-border-radius:50%;
border-radius:50%;
line-height:14px;
margin:2px 0 0 2px;
padding:4px 4px 5px;
min-width:28px}.menu-m li.global-language a{color:#000;
font-size:12px;
padding:2px 1px;
vertical-align:middle}.menu-m li.global-language a:hover,.menu-m li.global-language a:focus{text-decoration:none}.menu-m li.global-language .language-list li a{font-size:16px}.menu-m li.global-language .language-list li a.selected,.menu-m li.global-language .language-list li a:hover,.menu-m li.global-language .language-list li a:focus{color:#00a9e5;
text-decoration:none}.menu-m li:first-child{margin-left:0}.navbar-nav{display:table;
margin:1em 0;
height:50px}.navbar-nav>ul{display:table-cell;
vertical-align:middle}.navbar-nav>ul>li{display:inline-block;
margin:0 0.45em;
vertical-align:middle}.navbar-nav>ul>li>a{color:#444;
padding:0;
text-transform:none;
outline:0 none}.navbar-nav>ul>li>a.active,.navbar-nav>ul>li>a:hover,.navbar-nav>ul>li>a:focus{color:#00a9e5;
text-decoration:none}.navbar-nav>ul>li>a.btn-contact{-webkit-border-radius:3px;
-moz-border-radius:3px;
-ms-border-radius:3px;
border-radius:3px;
color:#00a9e5;
font-size:12px;
padding:0 15px;
min-width:90px;
height:25px;
line-height:23px}.navbar-nav>ul>li>a.icon-contact,.navbar-nav>ul>li>a.icon-download,.navbar-nav>ul>li>a.button.icon{background:url("../images/svg/icon-nav-contact.svg") no-repeat 0 center;
background-size:100% 90%;
display:inline-block;
width:33px;
height:26px;
vertical-align:middle;
text-decoration:none}.navbar-nav>ul>li>a.icon-download{background:url("../images/svg/icon-nav-downloads.svg") no-repeat 0 center;
background-size:100% 90%}.navbar-nav>ul>li.global-language{border-top:1px solid #CCCCCC;
border-right:1px solid #CCCCCC;
border-bottom:1px solid #CCCCCC;
border-left:1px solid #CCCCCC;
-webkit-border-radius:50%;
-moz-border-radius:50%;
-ms-border-radius:50%;
border-radius:50%;
line-height:14px;
margin-left:2px;
margin-right:0;
padding:3px 4px;
min-width:28px}.navbar-nav>ul>li.global-language a{color:#000;
font-size:12px;
line-height:18px;
padding:2px 1px;
vertical-align:middle}.navbar-nav>ul>li.global-language a.active{color:#00a9e5}.navbar-nav>ul>li.global-language .language-list li a{font-size:12px;
padding:0;
text-decoration:none}.navbar-nav:first-child li{margin:0 10px}.navbar-right ul li a{color:#000;
font-size:12px;
font-weight:400}.navbar-collapse{padding:0}.navbar-default{background-color:transparent;
border-color:transparent}.dropdown{background:#444;
display:none;
padding:0;
text-align:left;
position:absolute;
width:14.5em;
margin-top:0;
margin-left:12px;
z-index:2}.dropdown li{background:#fff;
margin:1px 0;
list-style:none;
line-height:27px}.dropdown li:hover>a,.dropdown li:hover>span{background:#444;
text-decoration:none}.dropdown a,.dropdown span{padding:0.5em 1em;
color:#fff;
font-size:14px;
-moz-transition:color 0.25s ease-in-out;
-webkit-transition:color 0.25s ease-in-out;
-o-transition:color 0.25s ease-in-out;
-ms-transition:color 0.25s ease-in-out;
transition:color 0.25s ease-in-out;
font-weight:400}.dropdown a{display:block}.dropdown.level-0{margin-top:0em;
margin-left:18px}.dropdown.level-0:before{content:'';
display:block;
position:absolute;
left:0;
top:-9px}#nav>ul>li:hover ul.dropdown{display:block}#searchbar{display:inline-block;
max-width:100%;
position:relative;
text-align:right;
top:0;
margin:0 0.4em;
-moz-transition:height 0.3s ease 0s;
-webkit-transition:height 0.3s ease 0s;
-o-transition:height 0.3s ease 0s;
-ms-transition:height 0.3s ease 0s;
transition:height 0.3s ease 0s;
vertical-align:middle}#searchbar .button.icon{background:transparent url("../images/svg/icon-nav-search.svg") no-repeat 0 0;
background-size:contain;
border:0 none;
color:#fff;
font-size:14px;
display:inline-block;
height:24px;
line-height:90%;
margin:0;
min-width:28px;
padding:0;
text-indent:1px;
width:28px}#searchbar .button.icon:hover{background:transparent url("../images/svg/icon-nav-search-hover.svg") no-repeat 0 0;
background-size:contain}.header-search-wrapper{background:#00a9e5;
bottom:-2px;
display:none;
left:0;
position:absolute;
right:0;
top:0;
z-index:111}.header-search-wrapper .big-search{bottom:0;
height:40px;
left:0;
margin:auto;
max-width:1140px;
position:absolute;
right:0;
top:0;
width:100%}.header-search-wrapper .big-search i.big-search-icon{background:transparent url("../images/svg/icon-nav-search-white.svg") no-repeat scroll left 0/80% auto;
bottom:0;
height:32px;
left:0;
margin:auto;
position:absolute;
top:0;
width:32px}.header-search-wrapper .header-search-cancel{cursor:pointer;
display:block;
font-size:2.5em;
height:15px;
position:absolute;
right:10px;
text-decoration:none;
top:10px;
width:14px}.header-search-wrapper .header-search-cancel:before,.header-search-wrapper .header-search-cancel:after{background:#fff;
content:"";
height:2px;
position:absolute;
-webkit-transform:rotate(45deg);
-moz-transform:rotate(45deg);
-ms-transform:rotate(45deg);
transform:rotate(45deg);
top:50%;
width:15px}.header-search-wrapper .header-search-cancel:after{-webkit-transform:rotate(-45deg);
-moz-transform:rotate(-45deg);
-ms-transform:rotate(-45deg);
transform:rotate(-45deg)}.big-search i.big-search-icon{background:transparent url("../images/svg/icon-nav-search-white.svg") no-repeat scroll left 0/80% auto;
bottom:0;
height:32px;
left:0;
margin:auto;
position:absolute;
top:0;
width:32px}.big-search input,.big-search input[type=text],.big-search input[type=email]{background-color:transparent;
border:medium none;
box-sizing:border-box;
box-shadow:none;
color:#fff;
display:inline-block;
font-size:1.5em;
font-weight:500;
letter-spacing:0.02em;
line-height:normal;
margin:0px;
outline:medium none;
vertical-align:middle;
width:98%}.big-search input[type=text]::-ms-clear{display:none}.open-search-wrapper{background:#00a9e5;
padding-bottom:9999px;
margin-bottom:-9999px}.nav-auto-complete{position:relative;
text-align:left}.autocomplete-suggestions{border-top:1px solid #CCCCCC;
border-right:1px solid #CCCCCC;
border-bottom:1px solid #CCCCCC;
border-left:1px solid #CCCCCC;
border-bottom-left-radius:2px;
border-bottom-right-radius:2px;
background:#fff;
overflow-x:hidden;
padding:2% 1%;
margin-top:-1px;
height:300px;
left:0 !important;
width:100% !important}.autocomplete-suggestions .autocomplete-suggestion{border:0;
padding:5px 2%;
list-style:none;
white-space:pre-wrap;
overflow:hidden}.autocomplete-suggestions .autocomplete-suggestion em{font-weight:normal;
color:#000;
font-style:normal}.autocomplete-suggestions .autocomplete-suggestion .tags{background:#e9f5f4;
border:0 none;
color:#757b7a;
margin:0 5px}.autocomplete-suggestions .autocomplete-suggestion span{color:#a0a0a0;
display:inline-block;
vertical-align:middle;
cursor:pointer}.autocomplete-suggestions .autocomplete-suggestion .auto-breadcrumb{display:block;
font-size:13px}.autocomplete-suggestions .autocomplete-group{color:#444;
font-size:16px;
border:0;
border-top:2px solid #CCCCCC;
margin:20px 0 15px;
padding:20px 2% 5px;
overflow-x:hidden;
list-style:none}.autocomplete-suggestions .autocomplete-group:first-child{border-top:0;
margin-top:0;
padding-top:0}.autocomplete-selected{background:#F0F0F0}.autocomplete-group .section,.autocomplete-suggestion .tags,.tags-wrapper li span,.search-tags-wrapper li span{-webkit-border-radius:5px;
-moz-border-radius:5px;
-ms-border-radius:5px;
border-radius:5px;
border-top:1px solid #999;
border-right:1px solid #999;
border-bottom:1px solid #999;
border-left:1px solid #999;
cursor:pointer;
display:inline-block;
padding:0 10px;
vertical-align:middle}.autocomplete-group .section::after,.autocomplete-suggestion .tags::after,.tags-wrapper li span::after,.search-tags-wrapper li span::after{content:"+";
float:right;
margin:0 0 0 10px}.tags-wrapper,.search-tags-wrapper{border-bottom:1px solid #fff;
cursor:text;
display:inline-block;
margin:0;
padding:0 0 5px 30px;
vertical-align:middle;
width:100%}.tags-wrapper li,.search-tags-wrapper li{display:inline-block;
margin:0;
vertical-align:middle}.tags-wrapper li:only-of-type,.search-tags-wrapper li:only-of-type{width:100%}.tags-wrapper li span,.search-tags-wrapper li span{border-top:1px solid #999;
border-right:1px solid #999;
border-bottom:1px solid #999;
border-left:1px solid #999;
color:#fff;
font-size:14px;
line-height:32px;
margin:0 5px 5px 0}.tags-wrapper li span::after,.search-tags-wrapper li span::after{border-left:1px solid #999;
color:#fff;
content:"x";
font-size:1.4em;
line-height:1.6363;
margin-top:-1px;
padding-left:10px}.bg-1{background:#DF4998}.primary-nav-hover .hover-nav{background:#f7f7f7;
border:0 none;
display:none;
left:0;
position:absolute;
right:0;
top:83px;
height:45px;
width:100%;
z-index:9}.primary-nav-hover .hover-nav li{margin:0;
padding:0 20px}.primary-nav-hover .hover-nav li:first-child{margin-left:0;
padding-left:0}.primary-nav-hover .hover-nav li:last-child{margin-right:0;
padding-right:0}@media screen and (min-width: 992px) and (max-width: 1199px){.header-search-wrapper .big-search{width:940px}}@media screen and (min-width: 769px) and (max-width: 991px){.navbar-nav>li>a{font-size:13px;
padding:10px}.navbar-nav:first-child li{margin:0 5px}.header-search-wrapper .big-search{text-align:center;
width:720px}.header-search-wrapper .big-search input{font-size:1em;
padding-left:6px;
padding-right:6px}.tags-wrapper,.search-tags-wrapper{text-align:left}.tags-wrapper li:last-of-type,.search-tags-wrapper li:last-of-type{width:30%}.tags-wrapper li:only-of-type,.search-tags-wrapper li:only-of-type{width:100%}.tags-wrapper li span,.search-tags-wrapper li span{font-size:12px;
overflow:hidden;
position:relative;
text-overflow:ellipsis;
white-space:nowrap;
width:85px;
line-height:28px;
padding-right:22px;
padding-left:22px}.tags-wrapper li span:after,.search-tags-wrapper li span:after{margin:-6px 5px 0 0;
padding-left:7px;
position:absolute;
right:4px;
width:15px;
line-height:36px}}@media screen and (max-width: 768px){.secondary-nav-wrapper{display:none}.header-search-wrapper .big-search{text-align:center;
max-width:748px;
width:95%}.header-search-wrapper .big-search input{font-size:1em;
padding-left:6px;
padding-right:6px}.tags-wrapper,.search-tags-wrapper{text-align:left}.tags-wrapper li:last-of-type,.search-tags-wrapper li:last-of-type{width:30%}.tags-wrapper li:only-of-type,.search-tags-wrapper li:only-of-type{width:100%}.tags-wrapper li span,.search-tags-wrapper li span{font-size:12px;
overflow:hidden;
position:relative;
text-overflow:ellipsis;
white-space:nowrap;
width:75px;
line-height:28px;
padding-right:12px;
padding-left:12px}.tags-wrapper li span:after,.search-tags-wrapper li span:after{margin:-6px 0px 0 0;
padding-left:3px;
position:absolute;
right:10px;
width:5px;
line-height:36px}.global-language .language-list{width:100px}}@media screen and (max-width: 480px){.header-search-wrapper .big-search{text-align:center;
width:94%}.header-search-wrapper .big-search input{font-size:1em;
padding-left:6px;
padding-right:6px;
width:90%}.navbar-header .nav-title{font-size:14px;
margin-left:5px}}.nav-group-wrapper a{color:#444}.nav-group-wrapper a:hover,.nav-group-wrapper a:focus{color:#444;
text-decoration:none}.position{position:absolute}.content{-moz-transition:0.5s;
-webkit-transition:0.5s;
-o-transition:0.5s;
-ms-transition:0.5s;
transition:0.5s}.navigation-wrapper{-moz-transition:0.3s;
-webkit-transition:0.3s;
-o-transition:0.3s;
-ms-transition:0.3s;
transition:0.3s;
-webkit-transform:translateY(0);
-moz-transform:translateY(0);
-ms-transform:translateY(0);
transform:translateY(0)}@media screen and (max-device-width: 768px){.navigation-wrapper{-moz-transition:0;
-webkit-transition:0;
-o-transition:0;
-ms-transition:0;
transition:0}}body .top{-webkit-transform:translateY(84px);
-moz-transform:translateY(84px);
-ms-transform:translateY(84px);
transform:translateY(84px);
padding-bottom:0}.nav-group-wrapper{position:fixed;
left:0;
right:0;
-webkit-transform:translateY(-54px);
-moz-transform:translateY(-54px);
-ms-transform:translateY(-54px);
transform:translateY(-54px);
-moz-transition:0.5s;
-webkit-transition:0.5s;
-o-transition:0.5s;
-ms-transition:0.5s;
transition:0.5s}.navbar-fixed-top{background-color:rgba(247,247,247,0.9);
color:rgba(247,247,247,0.9);
border-bottom:1px solid #CCCCCC;
z-index:1032;
-webkit-transform:translateY(0);
-moz-transform:translateY(0);
-ms-transform:translateY(0);
transform:translateY(0);
padding-bottom:0}.navbar-fixed-top .bdr-btm-e7e7e7{border-bottom:none 0}.navbar-fixed-top .bdr-btm-e0e0e0{border-bottom:0}.nav-fixed{background:rgba(246,246,246,0.9);
border-bottom:1px solid #CCCCCC;
position:fixed;
left:0;
right:0;
top:0;
bottom:0;
height:84px}.nav-fixed-height{-moz-transition:1s;
-webkit-transition:1s;
-o-transition:1s;
-ms-transition:1s;
transition:1s;
-webkit-transform:translateY(-84px);
-moz-transform:translateY(-84px);
-ms-transform:translateY(-84px);
transform:translateY(-84px)}.nav-group{display:inline-block;
margin-right:0px;
padding:0}.nav-group:last-child{margin-right:0}.nav-group a:hover{color:#00a9e5;
text-decoration:none}.nav-group li{color:#000}.list-inline li{padding:0 30px 0 0;
vertical-align:middle}.list-inline li:first-child{padding-left:0}.list-inline li:last-child{padding-right:0}.list-inline li a{color:#000;
font-size:14px;
font-weight:300;
text-decoration:none}.list-inline li a.active,.list-inline li a:hover,.list-inline li a:focus{color:#00a9e5;
text-decoration:none}.product-btn-group{margin-left:30px}.product-btn-group .btn-primary{font-size:12px;
margin:0 0 0 5px;
height:auto;
min-width:80px;
line-height:normal;
padding:5px 15px;
text-decoration:none}.product-btn-group .btn-primary:first-child{margin-left:0}.product-btn-group .btn-link{color:#444;
font-size:14px}.product-btn-group.position-absolute{bottom:0;
height:30px;
left:auto;
margin:auto;
position:absolute;
right:0;
top:0}.tertiary-nav-wrapper,.quaternary-nav-wrapper{display:none}.breadcrum-wrapper{padding:0}.breadcrum-wrapper *{color:#444;
font-size:14px;
font-weight:300;
margin-right:5px}.breadcrum-wrapper a{position:relative;
margin-right:5px}.breadcrum-wrapper a:hover,.breadcrum-wrapper a:focus{text-decoration:none;
font-weight:300}.breadcrum-wrapper span,.breadcrum-wrapper a{font-size:20px;
margin-right:0;
line-height:normal}.product-level{font-size:20px;
margin:12px 0 0 2px}.product-nav{margin:0}.product-nav .nav-group{border:0}.tertiary-nav-wrapper{background:#fff;
height:54px}.tertiary-nav-wrapper a{color:#444}.tertiary-nav{background:#fff;
text-align:right}.nav-list{display:inline-block}.quaternary-nav{background:#fff}.quaternary-nav .list-inline li{display:inline-block;
position:relative}.product-icon svg{display:block;
margin:0 auto;
height:60px;
width:60px}a.icon-rss{background:url("../images/icon-rss.svg") no-repeat right 0;
font-size:0;
display:inline-block;
margin:0 5px 0 30px;
text-indent:-9999px;
vertical-align:middle;
height:14px;
width:14px}a.icon-rss:active,a.icon-rss:focus,a.icon-rss:hover{background:url("../images/icon-rss-active.svg") no-repeat right 0}@media screen and (min-width: 769px) and (max-width: 991px){.quaternary-nav .nav-group li{padding:0 13px 0 0}.quaternary-nav .nav-group li .product-icon svg{width:45px;
height:45px}}@media screen and (max-width: 768px){.product-nav{margin:0}.product-nav .nav-group{border:0;
display:inline;
margin:0;
padding:0}.product-nav .nav-group li{padding:15px 10px}.product-nav .product-icon svg{height:40px;
width:40px}.tertiary-nav{display:none}.nav-mobile-dropdown{background:#fff;
position:relative;
z-index:2;
padding:9px 0}.nav-mobile-dropdown .dropdown-btn{cursor:pointer;
display:block;
font-size:20px;
line-height:normal;
margin-right:0;
position:relative;
margin-top:0px;
display:inline-block;
vertical-align:middle}.nav-mobile-dropdown .dropdown-btn:before,.nav-mobile-dropdown .dropdown-btn:after{content:"";
position:absolute;
right:-24px;
top:44%;
border-top:7px solid;
border-bottom:7px solid transparent;
border-left:7px solid transparent;
border-right:7px solid transparent}.nav-mobile-dropdown .dropdown-btn:after{border-top:6px solid #fff;
border-bottom:6px solid transparent;
border-left:6px solid transparent;
border-right:6px solid transparent;
right:-23px;
top:41%}.nav-mobile-dropdown .dropdown-content{background-color:#f7f7f7;
display:none;
position:absolute;
top:44px;
left:0;
padding:0;
width:100%;
z-index:1}.nav-mobile-dropdown .dropdown-content li{border-bottom:1px solid #999;
margin-right:0}.nav-mobile-dropdown .dropdown-content li a{color:#000;
padding:12px 16px;
text-decoration:none;
display:block}.nav-mobile-dropdown .dropdown-content li a:hover{background-color:#999}.show{display:block}.menu-overlay,.menu-overlay .navbar-mobile-header,.menu-overlay .container{background-color:#009ace;
-moz-transition:background-color 0.3s;
-webkit-transition:background-color 0.3s;
-o-transition:background-color 0.3s;
-ms-transition:background-color 0.3s;
transition:background-color 0.3s}.menu-overlay{position:fixed;
left:0;
right:0;
top:0;
bottom:0;
height:100%;
width:100%;
overflow:auto}.menu-overlay .menu-m,.menu-overlay .nav-title{display:none}.navbar-mobile-header{display:table;
width:100%;
vertical-align:middle}.navbar-mobile-header .navbar-toggle,.navbar-mobile-header .navbar-brand{float:none;
margin:0}.navbar-mobile-header .menu-m #searchbar .button.icon{height:24px;
min-width:24px;
width:24px}.navbar-mobile-header-icon{-webkit-appearance:none;
appearance:none;
color:#444;
height:15px;
font-size:25px;
text-align:center;
display:inline-block;
width:24px;
position:relative;
-webkit-transition:background 0.5s;
-moz-transition:background 0.5s;
-o-transition:background 0.5s;
transition:background 0.5s}.navbar-mobile-header-icon:hover{cursor:pointer}.navbar-mobile-header-icon span{position:absolute;
left:calc((100% - 24px) / 2);
top:calc((100% - 2px) / 2);
width:24px;
display:block;
height:2px;
background-color:#444}.navbar-mobile-header-icon:nth-child(1){-ms-transform:translateY(4px) rotate(0deg);
-webkit-transform:translateY(4px) rotate(0deg);
transform:translateY(4px) rotate(0deg)}.navbar-mobile-header-icon:nth-child(2){-ms-transform:translateY(-4px) rotate(0deg);
-webkit-transform:translateY(-4px) rotate(0deg);
transform:translateY(-4px) rotate(0deg)}.navbar-mobile-header-icon-click span:nth-child(1){-webkit-animation-duration:0.5s;
-webkit-animation-fill-mode:both;
-webkit-animation-name:clickfirst;
animation-duration:0.5s;
animation-fill-mode:both;
animation-name:clickfirst;
background-color:#fff}.navbar-mobile-header-icon-click span:nth-child(2){-webkit-animation-duration:0.5s;
-webkit-animation-fill-mode:both;
-webkit-animation-name:clicksecond;
animation-duration:0.5s;
animation-fill-mode:both;
animation-name:clicksecond;
background-color:#fff}.navbar-mobile-header-icon-click span:nth-child(3){display:none}@keyframes clickfirst{0%{-ms-transform:translateY(4px) rotate(0deg);
-webkit-transform:translateY(4px) rotate(0deg);
transform:translateY(4px) rotate(0deg)}100%{-ms-transform:translateY(0) rotate(45deg);
-webkit-transform:translateY(0) rotate(45deg);
transform:translateY(0) rotate(45deg)}}@keyframes clicksecond{0%{-ms-transform:translateY(-4px) rotate(0);
-webkit-transform:translateY(-4px) rotate(0);
transform:translateY(-4px) rotate(0deg)}100%{-ms-transform:translateY(0) rotate(-45deg);
-webkit-transform:translateY(0) rotate(-45deg);
transform:translateY(0) rotate(-45deg)}}.navbar-mobile-header-icon-out span:nth-child(1){-webkit-animation-duration:0.5s;
-webkit-animation-fill-mode:both;
-webkit-animation-name:outfirst;
animation-duration:0.5s;
animation-fill-mode:both;
animation-name:outfirst}.navbar-mobile-header-icon-out span:nth-child(2){-webkit-animation-duration:0.5s;
-webkit-animation-fill-mode:both;
-webkit-animation-name:outsecond;
animation-duration:0.5s;
animation-fill-mode:both;
animation-name:outsecond}@keyframes outfirst{0%{-ms-transform:translateY(0) rotate(-45deg);
-webkit-transform:translateY(0) rotate(-45deg);
transform:translateY(0) rotate(-45deg)}100%{-ms-transform:translateY(-4px) rotate(0);
-webkit-transform:translateY(-4px) rotate(0);
transform:translateY(-4px) rotate(0deg)}}@keyframes outsecond{0%{-ms-transform:translateY(0) rotate(45deg);
-webkit-transform:translateY(0) rotate(45deg);
transform:translateY(0) rotate(45deg)}100%{-ms-transform:translateY(4px) rotate(0);
-webkit-transform:translateY(4px) rotate(0);
transform:translateY(4px) rotate(0deg)}}.mobile-inner-nav{background-color:#009ace;
-webkit-transition:background-color 0.3s;
-moz-transition:background-color 0.3s;
-o-transition:background-color 0.3s;
transition:background-color 0.3s;
width:100%;
position:absolute;
left:0;
display:none;
overflow:auto}.mobile-inner-nav .navbar-nav{margin:0;
width:100%}.mobile-inner-nav .navbar-nav ul li{padding:0.4em;
margin:0;
width:100%;
border-bottom:1px solid #4ac0e7;
padding:0}.mobile-inner-nav .navbar-nav ul li>a{color:#fff;
display:block;
padding:0.7em 2em;
position:relative;
-webkit-animation-duration:0.5s;
animation-duration:0.5s;
-webkit-animation-fill-mode:both;
animation-fill-mode:both;
-webkit-animation-name:returnToNormal;
animation-name:returnToNormal;
-webkit-animation-delay:0.3s;
animation-delay:0.3s;
-webkit-backface-visibility:visible;
-moz-backface-visibility:visible;
-ms-backface-visibility:visible;
backface-visibility:visible}.mobile-inner-nav .navbar-nav ul li>a>span{border-right:3px solid transparent;
border-bottom:3px solid transparent;
border-left:3px solid transparent;
border-top:6px solid #fff;
content:"";
position:absolute;
right:2em;
top:50%}.mobile-inner-nav .navbar-nav ul li>a.active>span{border-top:3px solid transparent;
border-right:3px solid transparent;
border-left:3px solid transparent;
border-bottom:6px solid #fff;
content:"";
position:absolute;
right:2em;
top:50%}.mobile-inner-nav .navbar-nav ul li ul li{background:#00a6dd}.mobile-inner-nav .navbar-nav ul li ul li a{padding:0.7em 3em}.mobile-inner-nav .navbar-nav ul li ul li a:after,.mobile-inner-nav .navbar-nav ul li ul li a:before{content:"";
border:0}.mobile-inner-nav .navbar-nav ul li ul li:last-child{border-bottom:0}.mobile-inner-nav .navbar-nav ul li:first-child li{margin:0}@-webkit-keyframes returnToNormal{0%{opacity:0;
-webkit-transform:translate3d(0, -100%, 0);
transform:translate3d(0, -100%, 0);
-webkit-backface-visibility:visible;
-moz-backface-visibility:visible;
-ms-backface-visibility:visible;
backface-visibility:visible}100%{opacity:1;
-webkit-transform:translate3d(0, 0, 0);
transform:translate3d(0, 0, 0);
-webkit-transform:translateZ(0);
-moz-transform:translateZ(0);
-ms-transform:translateZ(0);
transform:translateZ(0);
-webkit-backface-visibility:visible;
-moz-backface-visibility:visible;
-ms-backface-visibility:visible;
backface-visibility:visible}}@keyframes returnToNormal{0%{opacity:0;
-webkit-transform:translate3d(0, -100%, 0);
transform:translate3d(0, -100%, 0);
-webkit-backface-visibility:visible;
-moz-backface-visibility:visible;
-ms-backface-visibility:visible;
backface-visibility:visible}100%{opacity:1;
-webkit-transform:translate3d(0, 0, 0);
transform:translate3d(0, 0, 0);
-webkit-transform:translateZ(0);
-moz-transform:translateZ(0);
-ms-transform:translateZ(0);
transform:translateZ(0);
-webkit-backface-visibility:visible;
-moz-backface-visibility:visible;
-ms-backface-visibility:visible;
backface-visibility:visible}}.scrollable-panel-wrapper{background:#fff;
position:relative;
border-bottom:1px solid #CCCCCC}.scrollable-panel-wrapper .scrollable-panel{margin:0 auto;
height:60px;
line-height:60px;
margin:0 auto}.scrollable-panel-wrapper .scrollable-panel .horizon-outer{margin:auto;
width:95%}.scrollable-panel-wrapper .scrollable-panel .horizon-inner{padding:0}.scrollable-panel-wrapper .scrollable-panel ul li:last-child{margin-right:0}.scrollable-panel-wrapper .scrollable-panel ul li a{color:#444;
font-size:14px;
font-weight:300}.scrollable-panel-wrapper .scrollable-panel ul li .btn{color:#fff}.scrollable-panel-wrapper .horizon-swiper.first-item .horizon-prev,.scrollable-panel-wrapper .horizon-swiper.last-item .horizon-next{display:none}.scrollable-panel-wrapper .horizon-prev{background:transparent;
border:0;
border-right:2px solid #CCCCCC;
color:#CCCCCC;
cursor:pointer;
font-size:10px;
font-weight:300;
position:absolute;
left:-5px;
top:10px;
height:40px;
width:5px}.scrollable-panel-wrapper .horizon-prev:before,.scrollable-panel-wrapper .horizon-prev:after{border-right:8px solid #000;
border-left:8px solid transparent;
border-top:8px solid transparent;
border-bottom:8px solid transparent;
content:"";
position:absolute;
left:-10px;
top:27%}.scrollable-panel-wrapper .horizon-prev:after{border-right:7px solid #fff;
border-left:7px solid transparent;
border-top:7px solid transparent;
border-bottom:7px solid transparent;
left:-8px;
top:29%}.scrollable-panel-wrapper .horizon-prev:hover{text-decoration:none}.scrollable-panel-wrapper .horizon-next{background:transparent;
border:0;
border-left:2px solid #CCCCCC;
color:#CCCCCC;
cursor:pointer;
font-size:10px;
font-weight:300;
position:absolute;
top:10px;
height:40px;
right:-5px;
width:5px}.scrollable-panel-wrapper .horizon-next:before,.scrollable-panel-wrapper .horizon-next:after{border-color:transparent transparent transparent #000;
border-style:solid;
border-width:8px;
content:"";
position:absolute;
right:-10px;
top:27%}.scrollable-panel-wrapper .horizon-next:after{border-color:transparent transparent transparent #fff;
border-style:solid;
border-width:7px;
right:-8px;
top:29%}.scrollable-panel-wrapper .horizon-next:hover{text-decoration:none}.scrollable-panel-disabled-wrapper .horizon-swiper.initialized .horizon-prev,.scrollable-panel-disabled-wrapper .horizon-swiper.initialized .horizon-next,.scrollable-panel-disabled-wrapper .horizon-swiper.initialized .horizon-prev,.scrollable-panel-disabled-wrapper .horizon-swiper.initialized .horizon-next{display:none}.scrollable-panel-disabled-wrapper .scrollable-panel{text-align:center}}@media screen and (max-width: 480px){.breadcrum-wrapper span,.breadcrum-wrapper a{font-size:14px}.product-btn-group{margin-left:5px}}.footer-wrapper{background:#f7f7f7;
padding:30px 0px}.footer-wrapper ul{margin:0}.footer-content h3{font-size:16px;
line-height:20px;
font-weight:600;
text-transform:uppercase;
margin-top:15px}.footer-content h3 a{color:#000}.footer-content ul li a{color:#444;
font-size:12px;
font-weight:400}.social-icon{margin:40px 0px 10px}.social-icon ul{text-align:center}.social-icon ul li{margin:0 0 0 0.5em;
padding:0;
text-indent:-9999px;
display:inline-block}.social-icon ul li .facebook{background:url("/static/images/svg/facebook.svg") no-repeat}.social-icon ul li .twitter{background:url("../images/svg/icon-twitter.svg") no-repeat}.social-icon ul li .linkedin{background:url("../images/svg/icon-linkedin.svg") no-repeat}.social-icon ul li .xing{background:url("/assets/blt75260b9a95287f96/xing.svg") no-repeat}.social-icon ul li .youtube{background:url("/assets/blt18b2f764044a5155/youtube.svg") no-repeat}.social-icon ul li a{display:block;
height:30px;
width:30px}.copyright{background-size:10%;
text-align:center}.copyright p{color:#444;
font-size:10px;
line-height:1.5;
margin:0}.copyright ul li{color:#444;
font-size:10px;
display:inline-block}.copyright ul li:before{content:"/";
margin:0 4px}.copyright ul li:first-child:before{content:" "}.copyright ul li a{color:#444;
font-size:10px;
font-weight:400}.copyright .copyright-content{display:table;
width:100%}.copyright .copyright-content .footer-logo,.copyright .copyright-content .footer-text{display:table-cell;
vertical-align:middle}.copyright .copyright-content .footer-text p:first-child{margin-left:-10%}.copyright .copyright-content .footer-text p a{color:#444;
font-weight:400}.copyright .copyright-content .footer-logo{padding-right:10px;
width:10%}.copyright .copyright-content .footer-logo img{width:100%}@media screen and (max-width: 768px){.footer-wrapper [class*="col-xs-"]:nth-child(3){clear:both}}@media screen and (max-width: 480px){.copyright .copyright-content .footer-logo,.copyright .copyright-content .footer-text{display:block;
margin-bottom:20px;
padding:0}.copyright .copyright-content .footer-text p:first-child{margin-left:0}.copyright .copyright-content .footer-logo{width:100%;
position:absolute;
bottom:-20px;
margin:0}.copyright .copyright-content .footer-logo img{display:inline-block;
margin:0 auto;
width:20%}}
    </style>
    <style>
.guide-section{margin-bottom:30px}.guide-section ul{padding-left:2em}.guide-section ul li{list-style:disc;
padding:0.15em 1em 0.15em 0}.guide-section h1,.guide-section h2,.guide-section .title{font-size:32px;
line-height:normal}.guide-section h1 a,.guide-section h2 a,.guide-section .title a{font-weight:300 !important}.guide-section h3,.guide-section h4,.guide-section h5,.guide-section h6{margin:15px 0 5px;
line-height:normal}.guide-section h3{font-size:26px !important}.guide-section h4{font-size:20px !important;
font-weight:600}.guide-section h5{font-size:18px !important;
font-weight:600}.guide-section h6{font-size:16px !important;
font-weight:700}.guide ul{list-style-type:disc}.guide .titlepage h1{font-size:44px}.guide .navheader .prev,.guide .navheader .next,.guide .navfooter .prev,.guide .navfooter .next{font-size:14px}.guide a{font-weight:normal}.guide a:hover,.guide a:focus{font-weight:normal}.guide a.edit_me{right:0 !important}.guide pre{font-weight:400}#rtpcontainer h3{margin:0 0 20px 0}#rtpcontainer ul{padding-left:2em}#rtpcontainer ul li{list-style:disc;
padding:0.15em 1em 0.15em 0}@media screen and (max-width: 800px){.guide .navheader .next,.guide .navheader .prev{font-size:13px}}@media screen and (max-width: 500px){.guide .navheader .next,.guide .navheader .prev{font-size:12px}}
    </style>
    <style>
#footer-wrapper {
    clear: both;
}
#guide div.chapter,
#guide div.part,
#guide div.section {
    margin-bottom: 2em;
}
#guide .article div.section,
#guide .book div.part,
#guide .book div.chapter,
#guide .chapter div.section {
    margin-top: 2em;
}
#guide hr {
    margin: 1em 0;
}
#guide h1,
#guide h2,
#guide h3,
#guide h4,
#guide h5,
#guide h6 {
  position: relative;
}
/* Format floating role=xpack titles */
#guide h1 > span[class~="xpack"],
#guide h2 > span[class~="xpack"],
#guide h3 > span[class~="xpack"],
#guide h4 > span[class~="xpack"],
#guide h5 > span[class~="xpack"],
#guide h6 > span[class~="xpack"] {
  display: inherit;
  font-size: inherit;
  margin-top: inherit;
  margin-bottom: inherit;
  margin-left: inherit;
  margin-right: inherit;
  font-weight: inherit;
}
/* Add xpack icon to role=xpack dt titles */
#guide dt > span > span.xpack:after {
  content: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAAAXNSR0IArs4c6QAAA/tJREFUSA3VVd1vFFUU/82dO7Mf3a67dNutINRKgBZEEoJoGx+INcQGQ4HE+OCDPvEXKOHLEtOSqjHGkJgoT+CLLyT6aBpjbJVoUSG0W4iUdWNFSJtuu6Ufu7Mzd8Zzd/Zjxm5fSHjwJO3cnHvO73fO75yZVRwyPEZjjxG7BP3/J+D1JJpYNHFzUSCuMRxo1tDAlXphJZ/IjUEsXgfTk+AtrwJq2Ber/HfIX98zcCGTx5LpgBFuV1xDf2cDmgJrSYrTF2H8+SEglgGFgSd6Eez8BIoWq5L4ZjC+aOHTdKEKLqN+ylp479Yy5gp2NUkein99DiM9QOArJXDpM2e+QTHzMZ1qi+kj+HHOxIJpQ6ViZb3yjzMHY/MC/bdXkDXcxOK0BD9POGYZ3I1WmApzbhiORR2VzUeQ0BlxOyXgSoB8SpKr8xbenbQwm/4C9tRJOBIcvnQitME4ycMC1XRfRG+rjudjOvJ+NUrBQWrr+pLA6fu7scDboSmSwGOORcAh6O3v0Dh0unC79RFENQVDz4axJ8pheEk4JQiB4N/j+O2OirNLQ8jpW4mEQKU5AooSQGjnBfDmg66vrMOaLZK3szTQExOruPHQRCigw0n9DAxfhnPvDhTbgtG4CXu7N2PwwA9o0mZgOiHaHgJvPVoGrz3qEsjrOWrhzK1V/H7lMtjwJeqAJFE1d/K2QMFU8dwODeffXEBb9wdAc18N1XPySeTxIxFgSGankL/2LZgElzIp5d1SOIKag1TGxul/3sL9hooshFDb0BLcugQDo5MYHLuL6Zdeh5l8GgqRVHNpWxRNQ7ivB5PxGE79+j1mjYJbn6zBY3UJ3h9JoX9kQr6cWAlGMNV1DGZLG3VCQ7UluA71tZdhb29DJBLBH1YRp8Z/wUxh1QPtHn0zkBUOEPi50RSYykgRtxxbVREprKD96hXoCw+g9R2EvW0LeDAMNfoEyeLQ1gnsisYxtHs/WshfMR/BcPoBer8ahUMfISbLr4kCWkRsFHm8uCGLTDyAcEOEwOml8vxe5WmVDz25Gf279lVfVt/X9LvMDGxBnwpVuquKQ9gOIpzhs2M96GqL4cy1EaTMAlQPuKxYZww3c1ksWyYaOW0cmW8GHYmou4alK/efIM0buYovD7+AIzs2Ikntf9TVg72xJhSoYq+ZFNtK9yGStGI+gjd2bsGh7ZsgDJOqtmn1BRo1jkuH9+No51OVHGygIQ+S1vviCaxaFiyKlWQx8h/f2gFektcN981AunL5Is7RoEenZ9EUDuJkdydeeSZZBfceckUDF9O3MfFwHgk9gLfbO7CHOvPaGoLKpUkVaZ5WK/56TymNRvrXs3UJ6gU/iq8+7aMgrZPzL5VcgDKVaBlmAAAAAElFTkSuQmCC');
}
/* Add xpack icon to floating role=xpack titles */
#guide h1 > span[class~="xpack"]::after,
#guide h2 > span[class~="xpack"]::after,
#guide h3 > span[class~="xpack"]::after,
#guide h4 > span[class~="xpack"]::after,
#guide h5 > span[class~="xpack"]::after,
#guide h6 > span[class~="xpack"]::after {
  content: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAAAXNSR0IArs4c6QAAA/tJREFUSA3VVd1vFFUU/82dO7Mf3a67dNutINRKgBZEEoJoGx+INcQGQ4HE+OCDPvEXKOHLEtOSqjHGkJgoT+CLLyT6aBpjbJVoUSG0W4iUdWNFSJtuu6Ufu7Mzd8Zzd/Zjxm5fSHjwJO3cnHvO73fO75yZVRwyPEZjjxG7BP3/J+D1JJpYNHFzUSCuMRxo1tDAlXphJZ/IjUEsXgfTk+AtrwJq2Ber/HfIX98zcCGTx5LpgBFuV1xDf2cDmgJrSYrTF2H8+SEglgGFgSd6Eez8BIoWq5L4ZjC+aOHTdKEKLqN+ylp479Yy5gp2NUkein99DiM9QOArJXDpM2e+QTHzMZ1qi+kj+HHOxIJpQ6ViZb3yjzMHY/MC/bdXkDXcxOK0BD9POGYZ3I1WmApzbhiORR2VzUeQ0BlxOyXgSoB8SpKr8xbenbQwm/4C9tRJOBIcvnQitME4ycMC1XRfRG+rjudjOvJ+NUrBQWrr+pLA6fu7scDboSmSwGOORcAh6O3v0Dh0unC79RFENQVDz4axJ8pheEk4JQiB4N/j+O2OirNLQ8jpW4mEQKU5AooSQGjnBfDmg66vrMOaLZK3szTQExOruPHQRCigw0n9DAxfhnPvDhTbgtG4CXu7N2PwwA9o0mZgOiHaHgJvPVoGrz3qEsjrOWrhzK1V/H7lMtjwJeqAJFE1d/K2QMFU8dwODeffXEBb9wdAc18N1XPySeTxIxFgSGankL/2LZgElzIp5d1SOIKag1TGxul/3sL9hooshFDb0BLcugQDo5MYHLuL6Zdeh5l8GgqRVHNpWxRNQ7ivB5PxGE79+j1mjYJbn6zBY3UJ3h9JoX9kQr6cWAlGMNV1DGZLG3VCQ7UluA71tZdhb29DJBLBH1YRp8Z/wUxh1QPtHn0zkBUOEPi50RSYykgRtxxbVREprKD96hXoCw+g9R2EvW0LeDAMNfoEyeLQ1gnsisYxtHs/WshfMR/BcPoBer8ahUMfISbLr4kCWkRsFHm8uCGLTDyAcEOEwOml8vxe5WmVDz25Gf279lVfVt/X9LvMDGxBnwpVuquKQ9gOIpzhs2M96GqL4cy1EaTMAlQPuKxYZww3c1ksWyYaOW0cmW8GHYmou4alK/efIM0buYovD7+AIzs2Ikntf9TVg72xJhSoYq+ZFNtK9yGStGI+gjd2bsGh7ZsgDJOqtmn1BRo1jkuH9+No51OVHGygIQ+S1vviCaxaFiyKlWQx8h/f2gFektcN981AunL5Is7RoEenZ9EUDuJkdydeeSZZBfceckUDF9O3MfFwHgk9gLfbO7CHOvPaGoLKpUkVaZ5WK/56TymNRvrXs3UJ6gU/iq8+7aMgrZPzL5VcgDKVaBlmAAAAAElFTkSuQmCC');
}
/*Add xpack icon to non-floating role=xpack h1 titles*/
#guide .xpack h1:after,
#guide .xpack h2:after,
#guide .xpack h3:after,
#guide .xpack h4:after,
#guide .xpack h5:after,
#guide .xpack h6:after {
  content: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAAAXNSR0IArs4c6QAAA/tJREFUSA3VVd1vFFUU/82dO7Mf3a67dNutINRKgBZEEoJoGx+INcQGQ4HE+OCDPvEXKOHLEtOSqjHGkJgoT+CLLyT6aBpjbJVoUSG0W4iUdWNFSJtuu6Ufu7Mzd8Zzd/Zjxm5fSHjwJO3cnHvO73fO75yZVRwyPEZjjxG7BP3/J+D1JJpYNHFzUSCuMRxo1tDAlXphJZ/IjUEsXgfTk+AtrwJq2Ber/HfIX98zcCGTx5LpgBFuV1xDf2cDmgJrSYrTF2H8+SEglgGFgSd6Eez8BIoWq5L4ZjC+aOHTdKEKLqN+ylp479Yy5gp2NUkein99DiM9QOArJXDpM2e+QTHzMZ1qi+kj+HHOxIJpQ6ViZb3yjzMHY/MC/bdXkDXcxOK0BD9POGYZ3I1WmApzbhiORR2VzUeQ0BlxOyXgSoB8SpKr8xbenbQwm/4C9tRJOBIcvnQitME4ycMC1XRfRG+rjudjOvJ+NUrBQWrr+pLA6fu7scDboSmSwGOORcAh6O3v0Dh0unC79RFENQVDz4axJ8pheEk4JQiB4N/j+O2OirNLQ8jpW4mEQKU5AooSQGjnBfDmg66vrMOaLZK3szTQExOruPHQRCigw0n9DAxfhnPvDhTbgtG4CXu7N2PwwA9o0mZgOiHaHgJvPVoGrz3qEsjrOWrhzK1V/H7lMtjwJeqAJFE1d/K2QMFU8dwODeffXEBb9wdAc18N1XPySeTxIxFgSGankL/2LZgElzIp5d1SOIKag1TGxul/3sL9hooshFDb0BLcugQDo5MYHLuL6Zdeh5l8GgqRVHNpWxRNQ7ivB5PxGE79+j1mjYJbn6zBY3UJ3h9JoX9kQr6cWAlGMNV1DGZLG3VCQ7UluA71tZdhb29DJBLBH1YRp8Z/wUxh1QPtHn0zkBUOEPi50RSYykgRtxxbVREprKD96hXoCw+g9R2EvW0LeDAMNfoEyeLQ1gnsisYxtHs/WshfMR/BcPoBer8ahUMfISbLr4kCWkRsFHm8uCGLTDyAcEOEwOml8vxe5WmVDz25Gf279lVfVt/X9LvMDGxBnwpVuquKQ9gOIpzhs2M96GqL4cy1EaTMAlQPuKxYZww3c1ksWyYaOW0cmW8GHYmou4alK/efIM0buYovD7+AIzs2Ikntf9TVg72xJhSoYq+ZFNtK9yGStGI+gjd2bsGh7ZsgDJOqtmn1BRo1jkuH9+No51OVHGygIQ+S1vviCaxaFiyKlWQx8h/f2gFektcN981AunL5Is7RoEenZ9EUDuJkdydeeSZZBfceckUDF9O3MfFwHgk9gLfbO7CHOvPaGoLKpUkVaZ5WK/56TymNRvrXs3UJ6gU/iq8+7aMgrZPzL5VcgDKVaBlmAAAAAElFTkSuQmCC');
}
/* Navheader */
#guide .navheader .prev,
#guide .navfooter .prev {
    float: left;
    width: 50%;
}
#guide .navheader .next,
#guide .navfooter .next {
    text-align: right;
    width: 50%;
    display: inline-block;
}
#guide .navheader {
    border-bottom: 1px solid #ccc;
    padding-bottom: 5px;
    margin: 10px 0 20px;
    display: inline-block;
    width: 100%;
}
#guide .navfooter {
    border-top: 1px solid #ccc;
    padding-top: 5px;
    margin-bottom: 15px;
}
/* On this page */
#this_page {
    margin-bottom: 1em;
    padding-left: 1em;
}
#this_page h2 {
    font-size: 1.5em;
    line-height: 1.5em;
}
#this_page ul {
    margin: 0;
    font-size: 0.85em;
}
#this_page li > a > span {
	color: #00a9e5;
  display: inherit;
  font-size: inherit;
  margin-top: inherit;
  margin-bottom: inherit;
  margin-left: inherit;
  margin-right: inherit;
  font-weight: inherit;
}
/* Add xpack icon to floating role=xpack titles in On This Page */
#this_page li > a > span[class~="xpack"]::after,
#this_page li > a > span[class~="xpack"]::after,
#this_page li > a > span[class~="xpack"]::after {
  content: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAZCAYAAAArK+5dAAAAAXNSR0IArs4c6QAAA/tJREFUSA3VVd1vFFUU/82dO7Mf3a67dNutINRKgBZEEoJoGx+INcQGQ4HE+OCDPvEXKOHLEtOSqjHGkJgoT+CLLyT6aBpjbJVoUSG0W4iUdWNFSJtuu6Ufu7Mzd8Zzd/Zjxm5fSHjwJO3cnHvO73fO75yZVRwyPEZjjxG7BP3/J+D1JJpYNHFzUSCuMRxo1tDAlXphJZ/IjUEsXgfTk+AtrwJq2Ber/HfIX98zcCGTx5LpgBFuV1xDf2cDmgJrSYrTF2H8+SEglgGFgSd6Eez8BIoWq5L4ZjC+aOHTdKEKLqN+ylp479Yy5gp2NUkein99DiM9QOArJXDpM2e+QTHzMZ1qi+kj+HHOxIJpQ6ViZb3yjzMHY/MC/bdXkDXcxOK0BD9POGYZ3I1WmApzbhiORR2VzUeQ0BlxOyXgSoB8SpKr8xbenbQwm/4C9tRJOBIcvnQitME4ycMC1XRfRG+rjudjOvJ+NUrBQWrr+pLA6fu7scDboSmSwGOORcAh6O3v0Dh0unC79RFENQVDz4axJ8pheEk4JQiB4N/j+O2OirNLQ8jpW4mEQKU5AooSQGjnBfDmg66vrMOaLZK3szTQExOruPHQRCigw0n9DAxfhnPvDhTbgtG4CXu7N2PwwA9o0mZgOiHaHgJvPVoGrz3qEsjrOWrhzK1V/H7lMtjwJeqAJFE1d/K2QMFU8dwODeffXEBb9wdAc18N1XPySeTxIxFgSGankL/2LZgElzIp5d1SOIKag1TGxul/3sL9hooshFDb0BLcugQDo5MYHLuL6Zdeh5l8GgqRVHNpWxRNQ7ivB5PxGE79+j1mjYJbn6zBY3UJ3h9JoX9kQr6cWAlGMNV1DGZLG3VCQ7UluA71tZdhb29DJBLBH1YRp8Z/wUxh1QPtHn0zkBUOEPi50RSYykgRtxxbVREprKD96hXoCw+g9R2EvW0LeDAMNfoEyeLQ1gnsisYxtHs/WshfMR/BcPoBer8ahUMfISbLr4kCWkRsFHm8uCGLTDyAcEOEwOml8vxe5WmVDz25Gf279lVfVt/X9LvMDGxBnwpVuquKQ9gOIpzhs2M96GqL4cy1EaTMAlQPuKxYZww3c1ksWyYaOW0cmW8GHYmou4alK/efIM0buYovD7+AIzs2Ikntf9TVg72xJhSoYq+ZFNtK9yGStGI+gjd2bsGh7ZsgDJOqtmn1BRo1jkuH9+No51OVHGygIQ+S1vviCaxaFiyKlWQx8h/f2gFektcN981AunL5Is7RoEenZ9EUDuJkdydeeSZZBfceckUDF9O3MfFwHgk9gLfbO7CHOvPaGoLKpUkVaZ5WK/56TymNRvrXs3UJ6gU/iq8+7aMgrZPzL5VcgDKVaBlmAAAAAElFTkSuQmCC');
}
/* Right hand TOC */
#book_title {
    color: #2b4590;
}
#book_title select {
    background-color: #fcfcfc;
    border: none;
    margin-left: 1px;
    color: #2b4590;
}
#guide ul.toc {
    border: 1px solid #ddd;
}
#guide .toc ul {
    margin: 0 0 1em 0;
    padding: 0;
}
#guide .toc li {
    margin: 0;
    padding: 0;
    list-style: none;
}
#guide .toc span {
    display: block;
    padding: 0.1em 0;
    font-size: 0.85em;
}
#guide .toc > li > span {
    background-color: #efefef;
    border-bottom: 1px solid #ddd;
    padding: 0.3em 0 0.3em 20px;
    font-size: 1em;
}
#guide .toc ul ul {
}
#guide .toc .show > ul {
    display: block;
}
#guide .toc .current_page {
  font-weight: bold;
}
#guide .toc .collapsible > span:hover {
    background-color: #fafafa;
    cursor: pointer;
}
#guide .toc .collapsible > span {
    background-repeat: no-repeat;
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH3wUQChsBZOOibwAAAHlJREFUKM9jYBh5gBGXhNGeDbb/mRgP/f//3/qCc8AxbGqYKLGZBV3AYP96AwYGBgaGfwwqEOMZVQ32r//GwMDAcMEx8AJezYz/mc4zMDAw/GeE8RkWIDmQEb9mRkZLBgYGhv///hswMDJM//+fIY2JifHy4AqwkQgAW7gloZBjerAAAAAASUVORK5CYII=);
}
#guide .toc .show > span {
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH3wUQChsxQjqSwwAAADFJREFUKM9jYBgF9AOM2AQN9q83QBe74Bh4AV2MBauJ/5nOE2MRVs3/Gf8ZjkbKYAMA5XcICwYKcGoAAAAASUVORK5CYII=);
}
#guide .toc > .show > span {
    background-color: white;
    border-bottom: 1px solid white;
}
#guide .toc > .collapsible > span {
    background-position: 0 8px;
}
#guide .toc > li > ul > li > span {
    padding-left: 40px;
    background-position: 20px 5px;
}
#guide .toc > li > ul > li > ul > li > span {
    padding-left: 60px;
    background-position: 40px 5px;
}
#guide .toc > li > ul > li > ul > li > ul > li >span {
    padding-left: 80px;
    background-position: 60px 5px;
}
#guide .toc > li > ul > li > ul > li > ul > li > ul > li >span {
    padding-left: 80px;
    background-image: none;
    background-position: 80px 5px;
}
/* Home page TOC */
#guide .article .toc,
#guide .book .toc {
    float: none;
    clear: none;
    width:  auto;
    margin: 0 0 2em 0;
    padding: 0;
}
/* Lists */
#guide ul {
    list-style: disc;
    padding-left: 2em;
}
#guide ol {
    list-style: decimal;
    padding-left: 2em;
}
#guide li ol {
    list-style: lower-alpha;
}
#guide li li ol {
    list-style: lower-roman;
}
#guide li li li ol {
    list-style: upper-alpha;
}
#guide ol[type=a] {
    list-style: lower-alpha;
}
#guide ol[type="1"] {
    list-style: decimal;
}
#guide li {
    padding: 0.15em 1em 0.15em 0;
}
#guide ol p,
#guide ul p,
#guide table p {
    margin-top: 0
}
#guide ol  ol,
#guide ol  ul,
#guide ul  ol,
#guide ul  ul {
    margin-bottom: 0;
}
#guide p.simpara+div.orderedlist,
#guide p.simpara+div.itemizedlist {
    margin-top: -0.9em;
}
#guide dt span {
    color: #2b4590;
}
#guide dd {
    margin: 0 0 0.5em 2em;
}
/* Tables */
#guide table{
    margin-bottom:1em;
    border: none;
    width: 100%;
}
#guide table thead,#guide table tbody{
    text-align:left;
    vertical-align:top;
}
#guide table td:last-child{
    padding-right:0;
}
#guide table th{
    font-weight:700;
    padding:.5em 0.2em;
    border:none;
    border-bottom:2px solid #e5eae4;
}
#guide table td{
    vertical-align:top;
    padding:.75em 0.2em 0;
    border:none;
    border-bottom:1px solid #e5eae4;
}
#guide table tr:last-child td {
    border:none;
}
/* Code */
#guide code {
    background: #f8f8f8;
    padding: 0 3px;
    font-family: Consolas, Menlo, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console';
    font-size: 0.9em;
}
#guide pre {
    font-family: Consolas, Menlo, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console';
    color #888;
}
#guide pre.prettyprint {
    font-family: Consolas, Menlo, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console';
    font-size: 16px;
    margin: 0 0 15px 0;
    padding: 8px 0 8px 18px;
    border: none;
    line-height: 1.5em;
    overflow: auto;
    white-space: pre;
    background-color:#F0F0F0;
    border-top-right-radius:5px;
    border-bottom-right-radius:5px;
    width: auto;
    max-width: 10000px;
}
#guide .pre_wrapper {
    overflow-x: auto;
    position: relative;
    width: 100%;
    margin: 0 0 15px 0;
    background-color:#F0F0F0;
    border-left: 3px solid #00a9e5;
    display: inline-flex;
}
#guide .pre_wrapper pre {
    margin: 0;
}
#guide a code {
    color: #00a9e5;
}
/* Admonitions */
#guide .admon {
    background: #fbfbfb;
    padding: 10px;
    min-height: 80px;
    margin: 15px 0;
    border-radius: 5px;
    position: relative
}
#guide .admon .icon {
    width:  80px;
    position: absolute;
}
#guide .admon .admon_content {
    margin-left: 80px;
}
#guide .admon_content h3 {
    margin: 3px 0;
}
#guide .example {
    margin: 0;
}
#guide .example .title {
    margin: 0 0 0 10px;
}
#guide .example-contents {
    border: 1px solid #f0f0f0;
    border-width: 1px;
    border-radius: 5px;
    background: #fdfdfd;
    padding: 10px 10px 0;
}
#guide .sidebar {
    border: 1px solid #00a9e5;
    border-radius: 10px;
    background: #fbfbfb;
    padding: 15px 20px 0;
    margin: 10px 15px 20px;
}
#guide .sidebar .title {
    margin: 0;
    border-bottom: 1px solid #ddd;
    margin-bottom: 10px;
}
#guide .experimental,
#guide .beta,
#guide .coming,
#guide .deprecated,
#guide .added {
    position: relative;
    font-size: 16px;
}
#guide .beta .beta_title,
#guide .experimental .experimental_title,
#guide .coming .version,
#guide .deprecated .version,
#guide .added .version {
    font-family:Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace!important;
    font-size: 0.8em;
    border-bottom: 1px dashed #00a9e5;
}
#guide .deprecated .version {
    text-decoration: line-through;
}
#guide .beta .detail,
#guide .experimental .detail,
#guide .coming .detail,
#guide .deprecated .detail,
#guide .added .detail {
    min-width: 250px;
    position: absolute;
    padding: 15px;
    border: 3px solid #e8e8e8;
    background: white;
    opacity: 0;
    color: white;
    left: -20000px;
    bottom: 20px;
    line-height: 1.2em;
}
#guide .beta:hover ,
#guide .experimental:hover ,
#guide .coming:hover ,
#guide .deprecated:hover ,
#guide .added:hover {
    color: black;
    transition: all 0.3s ease;
}
#guide .beta:hover .detail,
#guide .experimental:hover .detail,
#guide .coming:hover .detail,
#guide .deprecated:hover .detail,
#guide .added:hover .detail {
    z-index: 10000;
    left: -5em;
    opacity: 1;
    color: #555;
    transition: color 0.5s ease;
}
#guide .toc .experimental,
#guide .toc .beta,
#guide .toc .coming,
#guide .toc .added,
#guide .toc .deprecated {
}
#guide h1:hover a[id][href],
#guide h2:hover a[id][href],
#guide h3:hover a[id][href],
#guide h4:hover a[id][href],
#guide h5:hover a[id][href],
#guide h6:hover a[id][href] {
    display: block;
    position: absolute;
    bottom: 3px;
    margin: 0;
    padding: 0;
    left: -20px;
    width: 100%;
    height: 1em;
    background-repeat: no-repeat;
    background-position: 0% 50%;
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAFo9M/3AAAEJGlDQ1BJQ0MgUHJvZmlsZQAAOBGFVd9v21QUPolvUqQWPyBYR4eKxa9VU1u5GxqtxgZJk6XtShal6dgqJOQ6N4mpGwfb6baqT3uBNwb8AUDZAw9IPCENBmJ72fbAtElThyqqSUh76MQPISbtBVXhu3ZiJ1PEXPX6yznfOec7517bRD1fabWaGVWIlquunc8klZOnFpSeTYrSs9RLA9Sr6U4tkcvNEi7BFffO6+EdigjL7ZHu/k72I796i9zRiSJPwG4VHX0Z+AxRzNRrtksUvwf7+Gm3BtzzHPDTNgQCqwKXfZwSeNHHJz1OIT8JjtAq6xWtCLwGPLzYZi+3YV8DGMiT4VVuG7oiZpGzrZJhcs/hL49xtzH/Dy6bdfTsXYNY+5yluWO4D4neK/ZUvok/17X0HPBLsF+vuUlhfwX4j/rSfAJ4H1H0qZJ9dN7nR19frRTeBt4Fe9FwpwtN+2p1MXscGLHR9SXrmMgjONd1ZxKzpBeA71b4tNhj6JGoyFNp4GHgwUp9qplfmnFW5oTdy7NamcwCI49kv6fN5IAHgD+0rbyoBc3SOjczohbyS1drbq6pQdqumllRC/0ymTtej8gpbbuVwpQfyw66dqEZyxZKxtHpJn+tZnpnEdrYBbueF9qQn93S7HQGGHnYP7w6L+YGHNtd1FJitqPAR+hERCNOFi1i1alKO6RQnjKUxL1GNjwlMsiEhcPLYTEiT9ISbN15OY/jx4SMshe9LaJRpTvHr3C/ybFYP1PZAfwfYrPsMBtnE6SwN9ib7AhLwTrBDgUKcm06FSrTfSj187xPdVQWOk5Q8vxAfSiIUc7Z7xr6zY/+hpqwSyv0I0/QMTRb7RMgBxNodTfSPqdraz/sDjzKBrv4zu2+a2t0/HHzjd2Lbcc2sG7GtsL42K+xLfxtUgI7YHqKlqHK8HbCCXgjHT1cAdMlDetv4FnQ2lLasaOl6vmB0CMmwT/IPszSueHQqv6i/qluqF+oF9TfO2qEGTumJH0qfSv9KH0nfS/9TIp0Wboi/SRdlb6RLgU5u++9nyXYe69fYRPdil1o1WufNSdTTsp75BfllPy8/LI8G7AUuV8ek6fkvfDsCfbNDP0dvRh0CrNqTbV7LfEEGDQPJQadBtfGVMWEq3QWWdufk6ZSNsjG2PQjp3ZcnOWWing6noonSInvi0/Ex+IzAreevPhe+CawpgP1/pMTMDo64G0sTCXIM+KdOnFWRfQKdJvQzV1+Bt8OokmrdtY2yhVX2a+qrykJfMq4Ml3VR4cVzTQVz+UoNne4vcKLoyS+gyKO6EHe+75Fdt0Mbe5bRIf/wjvrVmhbqBN97RD1vxrahvBOfOYzoosH9bq94uejSOQGkVM6sN/7HelL4t10t9F4gPdVzydEOx83Gv+uNxo7XyL/FtFl8z9ZAHF4bBsrEwAAAAlwSFlzAABcRgAAXEYBFJRDQQAAAvtJREFUOBFlUk1LG1EUvTOZwSQWTZoitlQ3Gj8g3bhR2grJQsQiGr8tCK5cCAWhCzcujAtBF0IXhf6AhIofBFGyUNRYbDcK2kotUiWoIChqDITUxJnk9dypEaUX3sybuffde855R+ro6DCdn59LMj90Xdeoq6vrhxCCpLq6OqFpGhFq+I/wuD3C5/PJxGneuN1ucXBwIKipqam8paXFxQleSllZ2a/e3l6ZiCQskvf3993Hx8e0urqqo9JtlLW2tj4/OjoSGCCkxsZGpyzLv2tqajJLS0uyzWbzqKq6Pj09nTZaIGm5vr4mTJWTyaQYGBgIz8zM9Dc3Nz/zeDyK0ZL5MALEu4WFBb2goEBgtsAoId0mOEmdnZ0m8H2dyWTWMIbA9JVR0N7e/llCoPVbo/LeQ2pra4sChzU3N1dKJBI6wOXeyxPV19djihBMa3R09Kanp+d9Q0NDDo/mpeTl5SUHBwdNZ2dnajqdVr1er21+fr4fXT5wJwNDd3f3ucvlerK3t5cxmUxySUmJtru7ezM1NfXoAYuxsTGxs7NDRUVFdHp6mgKmORb9Lra/b19VVlZq4+PjlEqlCMT0Bx24EqIlLi4urA6HIzY7O2s3CgDspaIoIcy3IUn5+fmE7z8Q7U0wGPzCAmbv5m7c7UaGTgGz2fwNDC1DQ0O0srJCgUCAqqurVThtDQSjyD3l+pGRkQeQ+Z8MnArrhSIJsOjk5ISgCG1sbKg4kIZL7EDh5eLh4eEMvxkRvzkMCmw03G3o8vLSWlVVpbFzANkUiUSouLhY9PX1SZubmxQKhaiwsPACrmqdm5tbZzcZDXgTDod1thj4d/r9fh3LYbfbfZOTk3R4eChKS0slWJ2Wl5c1RodcEkpXG5z4MMPB9FOI+AmUPi4uLsYnJiaoorxCgzYSvEQsMOyi1tbWZqLRqNlisfj/uyZulFU9Sw3FVqfTeQMUytbWlhaPx3MQV6DyDwEfuh/ZK4vFYl/ZvfDjC0wPQoefgB2E8BWw/mMgiPwFVDCnFWaQyf0AAAAASUVORK5CYII=);
}
#guide a.edit_me {
    position: absolute;
    font-size: 14px;
    right: -15px;
    top: 0;
    z-index: 1000;
    padding-top: 26px;
    line-height: 1;
    opacity: 0.3;
    background-repeat: no-repeat;
    background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAArgAAAK4B+ff3XQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAKySURBVEiJrZVLbExRGMd/3713qkJZaBeIhIUIC2FBhOpjxHRaNkhTERZeC5EQ2pmSsBikMaYVj4h0Q4pERNKNMlMVnZZ4lIUuxYqFaLqRNNXHzJzPYm6FPmc6zuqenPP//c53v5tzRVXJZQSiZUcFqsUy58IV3T3j161c4HVt5YWIfFFhjVHrfSBW1vBfBeIxbYgGPR7HCzwBzgZjZc2hkPzhzloQjHq32NiHMSxLJJJdanETOKmwY2Tj1kU5CYLPy3eqmNcpNRfzLOMDWsUQU2VpamB0ZUNld/+sBfUdxUvU6F13WpxQu0KRh4i1Gxi8Wv1m6O/9WQlCIbFMyrkPFAKKUK/odUHjaKqwsTJ+YXwmK8HAptIzgDc9kyaUY8ACYEhsuifLZCyojZZvEiUEIPBOUBvY4MqOXdne9WWynJMJ/MyL7QtF9CHgIPxEpVnROy68JeLvfDBVNiNBMpVsFlgOgGqdwpV0IXzGyjs+XXZGQTBaekhEatKH5TYq+4AiYNiIVdPkax+cLj9tD+pj3lUqcsOd9qLah9tkhdqmipe9Mx1QprrsTkSr5syxfr1DWQcMChxVuA/YQGvEH98zE3zaCvIZCrtwRAmoctmFf3VSqSOZwKesINDu3YGatvQO7qEUALuAJFAS8cffZiqYUMGp9pLFqBm7Cj6L8smFI8j5bOCTChy19gMFwLCB8woNAKJ0RPzxcDZwGPeZ1j8tXW2J1Zmw1ScmmbDEuQXki9I3muccULL//f1TgbHVE67q/Hi1Iv5KxOOo8ghQY3Pg2rYXfdnCJwrEkbHnbwNFbxXpVvRgoy/eMRv4BIGo7g3EStYCrJjXv95Whhv9XS2zhbvM9Gs9/XjzXLsg7xvwXZHjozr3w43KZyO5wOGvJjvz8zcaUo8sM3QpUtXzI1fw2PgNtmkFbbGhF10AAAAASUVORK5CYII=);
}
#guide a.edit_me:hover {
    opacity: 1;
}
/* JS API TOC */
/* prevent the list from rendering at the top of the content */
#js-api-method-index + .itemizedlist,
#js-api-method-index-0-90 + .itemizedlist {
}
.js-api-method-index h2 {
    color: #454746;
    font-family: "Gibson-Regular";
    font-size: 1.17em;
    margin: 1.5em 0 1em;
}
.js-api-method-index ul {
    padding: 0 0 0 0;
}
.js-api-method-index ul li {
    list-style: disc;
    color: #74b73f;
    padding: 0.05em 0;
}
.js-api-method-index a {
    text-transform: none;
}
.js-client-docs a[href="#"] {
    float: right;
}
/* Comments */
p.remark {
    color: red;
    border: 3px red solid;
    border-radius: 5px;
    padding: 10px;
    float: right;
    max-width: 50%;
    margin: -5px 0 10px 10px;
    clear: right;
}
/* Images */
#guide .screenshot img {
  max-width: 100%;
  margin: 20px 0 20px 0;
  box-shadow:  0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
}
#guide .inlinemediaobject img,
#guide .mediaobject img {
    max-width: 100%;
}
/* Sense widget */
#guide div.console_widget,
#guide div.sense_widget {
    display: block;
    margin: -22px 0 15px auto;
    text-align: right;
    border-radius: 0 0 3px 0;
    border-top: 1px solid #e8e8e8;
    background: #f8f8f8;
    background: linear-gradient(#f8f8f8,#f0f0f0);
    text-transform: uppercase;
    font-family: helvetica, arial;
    font-size: 13px;
    font-weight: bold;
    border-left: 3px solid #00a9e5;
    padding: 7px 15px 3px 0;
}
#guide div.console_widget:hover,
#guide div.sense_widget:hover {
    background: linear-gradient(white,#f0f0f0);
    color: #2b4590;
}
#guide a.copy_as_curl {
    margin-right: 20px;
    cursor: pointer;
}
#guide a.console_settings,
#guide a.sense_settings {
  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4AYRCzYftTQHGQAAAnxJREFUOMuVU11Ik2EUfs67z585WaaQ1pqsGlo3FkExkGrkR9BFKGjqlt6YIGlgP7R+oKCLanWj7cL1d1EE5tBuuuimhR9lpUmhXQmGljokF0urqbN93+mmzc/ljefmfTnvc857znmeQ7LslLCK9bl91sWs3GsAa9mz0x5Hj2cmBUIAWAAAE6HoncL9Vd71+4KKFgwq8ZgxpxFELpA4Nr+uoOZFUIlXBhVtoPJ6rm1IYRAxACJZdkr2QYXvd4xXq1J6p1D/NLIwlDOJIyv+Y+4kVgdYSLcN8Vi5+6L9+XTRfpAsO9P6XL6Cxey8CazBsiOT+Y6nFyICAC8cL5kk1h78h2KMAhhPdZOmtr084QgDIJGYBkA7dZhBy0iv+WOtpbi3xmIv+PzGTMBwMi+J7XsTV9Pd9xsXzPnVmpDaE4BtH3pMtqFnS6SpAEAsJP5UdtIUtu2Z1VXRbA6PdotozqZH+mACK95brYuJYABMWpxmzlfMATyYrEIYOuY2FD8WxDCsbBsLYzqedScAzKcoQRJS7PdZsObXeQ8/aTidphmkZLAqpcN+ri0LoAPLLWi+jOhsK5JKDIS+IBBiBEJMXZN3HEfr0qcAYoB2NZzKQCDUmXhH19QwAMiyU5IAUAAQLi3u14Tk/Tflpv6qm03WyhsPGTCARL2+csFqR3MmDCMASJad0mu3zxoz5Y2tRUjGn98spYEzYQEAnoaSCdLUywAgNNUP4Mf/ouJlsbHWUn1190ximejtoTJyXyryZkYjW8ZchS1cY8kDq206zq9w7ebC9lprU2Y0srXeY7s3teMgksuUQhUB4Fd1/uIlo7kbgGr89b2itKv1K1ah9y9j+QhMkP6NewAAAABJRU5ErkJggg==);
  display: inline-block;
  width: 16px;
  height: 16px;
  vertical-align: text-bottom;
  margin-left: 1em;
}
#guide a.console_settings:hover,
#guide a.sense_settings:hover {
  text-decoration: none;
  cursor: pointer;
}
/* Sense URL form */
#console_settings,
#sense_settings {
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  background: rgba(255,255,255,0.8);
  z-index: 99999;
  text-align: center;
}
#console_settings form,
#sense_settings form {
  display: inline-block;
  position: relative;
  margin: 15% auto;
  width: auto;
  background: #f8f8f8;
  border: 1px solid #ddd;
  border-radius: 10px;
  padding: 2em 4em 1em;
  text-align: left;
  box-shadow: 5px 7px 7px #ccc;
}
#console_settings label,
#sense_settings label {
  display: block;
  margin: 0.5em 0;
  color: #2b4590;
}
#console_settings input,
#sense_settings input {
  width: 30em;
  display: block;
  margin-bottom: 0.1em;
  font-family: monospace;
  font-size: 0.8em;
}
#console_settings button,
#sense_settings button {
  margin: 0.5em 0.5em 1em 0;
  background-color: #00a9e5;
  color: white;
  border: none;
}
/* RTP container */
#guide #rtpcontainer {
    margin-bottom: 10px;
    border-bottom: 1px solid #ccc
}
#guide ul.lists li {
    background: none
}
#guide .page_header {
    padding: 1em;
    margin-bottom: 1em;
    border: 1px solid #ccc;
    background: #FFFFD2;
    color: black;
}
#guide .abstract .page_header {
    width: 100%;
}
    </style>
    <style>
.images-cardinality_error-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAj4AAAFrCAYAAADRmYN1AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gMNERoGFYDjWwAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAACAASURBVHja7d1/WJR13vf/FyQMhYKS3FDgz8EUd5Nh2y7Y2kX8ltV3RXPz3jJ2r8L77k7a67hS12izsrDW6tLM3OO4Vmy7F9fdkOrWSvGuzVp/7GXh1wrUEgxRVFAMQh1BGfxxfv8YZhgQFZAfM+c8H8fBkQ3MMHzmnHNe5+d8n593gGEYhgAAAPxAIEMAAAAIPgAAAAQfAAAAgk/XVbyuMQEBCmj7FW3T1Kc+UvUV758jW0CAAlLf14kO/LrG4pV6JafQ+bOdvK9PaizVK7YABQycqvwdV/n3ntisp1KHa+DAgYq2ZSi/wuNbH01X9MB7tNL9glUrf2qIAgJseqW0kXcbAKDP9fOqZxN1t2bNTlW0JJ2o0Ob8FfrgP/5fVUQfUPHs4d30S6r1/uwZmlf9sqZmJmtg9D16/b331BidrIEmfZGr35+t7J1SwtLXNf1mKfoq/t7SnEz9R+k9+rziKRXfM0KZT2Voan6qQk58pMyMjzTm9WJlRLt+OlrTX39Fr3wwR9mz31fGR9MVzXsOANCXDG9wYKkxWjKUsNw46nHzmc8fNsIlQ3d/aJwxDOP4pqXGAwlRhkUyFJ5gPLC0yDhjGIZxYLmRIBka/55x3HlP48Dqmcb4YRZDHj97/EyRMWuYnLdJhpRgLP+n530PGEsTmm8/4HoSRcbvhsmQ5W7jveOXeQ7tuPTzXWokSEb4vUuN340PNzRsllFU2s5tZwzjTFGuMXP8MOdjyGIMGz/TyC064x639u7TZnCdf1Pz879orNyPkWvkzkwyoiRDlgTj4dUH2vmLzhgf3m0xlLTaOGqcMT5/ONzQ6JeNkjPHjU0PRxmW8cuNi+913HjvboshJRhLDxgAAPQp76rxaTyhiooK51dpofJf/0gnJY1OHa6Q6pWaes8cvV2dqpzPi/RehvT2nHuUubmdUygVKzX9wRXaEpKp9z7/UC+P2am350xVdulwPZW/VEmSNGymVn+er6mxnnccrqmZCZJ2auXm5vM1Ffl6/6AUfs9spTZ24jlc9vmGSJJOfvCKNg9/SrmvTNdwSzu3Nb6v6akztKIwWpmrP9SHuZmKLlyhGakZ+uiE2n+ckLbP4yPl75SUnKHUdqd4XI+Rrfzhs7Vy9SwlOHbqLxmzm3/HlZ3Y/JQy8qM1fcz7umdggAIGjtH0laVyjspAJWckS9qp/M3VHGkAAJjxcc/4XPQVbiQ8nGuUnDGMo7lJhiRj9MslzRMJq43xkhH+wCbjTNtZjDMHjJKiIqPk6Jnmh08wJBnj3ztuGGc+NO62yDlT0d5s0YHlRpJkaPxq47hhGCUvjzakcOOBTWcu/xza/Ekder7DfmeUuMfg4tuOrx5vSDKG/a7EPePy+cwoQ7IYd394vN37XDRHs+kBI1wyhv3uErNjrv93jYdx3Fg9XoY02ni5pL2XKsFQ+APGh0eLjJdHywi/92Xj4WEWI2HWLCNBFuPu1QeMA7njW2aYDMM4UzTLGCYZ4Q9/fsnZMQAA/G/GZ9jDWv7ee3pv9cu6O1ySJVmzX8nQmBDpRLVz+mHvvHhn4fOgB7VF0snS0ouLdBsr9H72dKUOv1YBAQEaMWdnx5/D8KnKTJJUuFKF1RX6KH+vFDVVs5NDOvUcOvSzw5MvrnnxuK26wjlDEj1moHt2JnpMtCSHqitOtHufiyfRqnVS0sDhAxVyub87ekzzY4RoYIjl0sOTkaOXbYWaekOiXg95QBnKUf7AV7RyarUqNFz3JA9XtC1Zwxyl2lzhnPMJGThGAyWdrKgWJc4AgL7kXcXNA5M1depURUuynfhIIx77u2bP/khT8+/RwOHOD//Rv9uk9zOHt3yIhwxUdGO+50e9irMzNO+Dg0paWqTS2TZVvzJG8fP2dvBJROuezPHSjELlfJSvip1S1MxM2UKkE5d7Dm3/lA4/38sMx/BoSXtVXVqtRkUrRI2qLq2WZFH08IF99ho9tblCT0lqLH5KtuRSZRdnasyJ4g7cOYR3HACgT3ntOj7DM17X70ZLJ9/O1FObGxWdmqnxFmlv/koVVlSrYnO2pt8zVU+1U4jSeMI5r9DYeEIVm3OUnVPhnEHZXKyKxhDn1UwVH+n99wtV4Wgn+tyTqfE6qQ8y52mnhml6pk0hUqeeQ2d+9pIR7J7ZujdcOvh6pp7K/0gfrXxKmSuOSVHT9VRyx4JPyMBohUs6UXGie2dbGouVPf11hWSv1OwxIQoZniqbKvRRYYUqCjfroMWm1OaCo8YTzlmu8CvNOgEA0NO8+aqu45sedl5lNPp3RtEZwzi+6WXj3tHhzvofyzBj/Exn/c/FdSu5xgOjnVd0hSc8YOR+/qExc7QMKcp4eNNRY9OsBOdVUpYkY+knba8I87wSyfm7S1o9p0s8h3av6urg8zUucZvhvKrr4STPq7pmGatdv/AS92ldbNS6ZumSNT4eV8R9eLflkjU+rlqjkpcTDEvz6+K6rWjpvcYwiwyFjzYeyG25hOtoc61SUu5RTi4DAPpUgGHQpNTcKvS6bYTmlN6t96o/0tReP0N2Qu/fE61f/H2Mlh4oVrctxwQAQBfQssL0hmv6U3fL4vi7sldW9EHuWqnsvztkufspTSf0AAAIPuhp0VNfV3aCtDN7tvJ7dSmdauVnPqWdSlD261NZtRkA0Oc41QUAAPwGMz4AAIDgAwAAQPABAAAg+AAAABB8AAAACD4AAAAEHwAAAIIPAAAAwQcAAIDgAwAAQPABAAAEHwAAAIIPAAAAwQcAAIDgAwAA4FX6Xe6bdTve1OJla/XFsbNSUJTG3TdLCx65Vf0l1Zfka+HCVfrimBQ0aKhu/59PK+vuoQpmTAEAgJe69IxP3d+18PkC6V9ztGHjRr33hzQ1rF2oZTubpPqdWjYvX03Tc7Rh4//VOwtSdXhZtlYdYkABAIAvBh8NVdqsBe5ZnP5xqboruknlh+vVVLJWO4JT9chdzd+LT9O/JlRrc8E+NTGmAADA54JPRLwm3J2gCNf/V3+hTdURum1MhOoOH1ZTRIKi3Oe1+muINUJ15ccIPgAAwGv169BP1W3T4ifelB56VQ/FSdWbm6Sg4Fb1PMH9g6WGpi4Fny+//JJXAgAAXLVbbrnl6oJPfUm+np+3VsGPvKolaXEKlhQcESydbR1y6uuapNDgLhU3X+lJAgAAdIfAy4eeP+qJeR9ryDM5erk59EhShHWIguu+0DF38qnX4fI6RcQPUX/GFAAA+Fzwqd+mxc9vlvWZP2j2rRGtvhUcf59u1za9+fEhNUmq37lKfy2JVtpdQxlRAADgtQIMwzDazz3/rl9kl150e2jqH/TOM/HSvrVa+NIq7TjcoLODrLrrsWxlTYhmRAEAgO8FHwAAALOhZQUAACD4AAAAEHwAAAAIPgAAAAQfAAAAgg8AAADBBwAAgOADAABA8AEAACD4AAAAEHwAAADBBwAAgOADAABA8AEAACD4AAAAEHwAAAAIPgAAAAQfAAAAgg8AAADBBwAAgOADAAAIPgAAAAQfAAAAgg8AAADBBwAAgOADAABA8AEAACD4AAAAEHwAAAAIPgAAAAQfAABA8GEIAAAAwQcAAIDgAwAAQPABAAAg+AAAABB8AAAACD4AAAAEHwAAAIIPAAAAwQcAAIDgAwAACD4AAAAEHwAAAIIPAAAAwQcAAIDgAwAAQPABAAAg+AAAABB8AAAACD4AAAAEHwAA4K/6Xf7b9SpZu1jPL/9M/R/7q/58X7Tz5qYdmjf1aX1x1vNno/TA//6bHhnKoAIAAJ8LPvXasTBTy+pv061RUonnt5rqVa8heuyvf5YrCwEAAHi7y5zqClbUfS/pzy9PV3z/oDaZqEENCtWg/gwgWrz69iEGAQDgu8FnaPxQBbf3raZqNZ09prXzfq2pP/+5fj71f+j5/J2qZzz91rpttcr/R43WbatlMAAAXqtfl+4VbNWPU29TXNpDuishQk0l+Zo3d56ej/qblkyI6PTDffnll7wSPu7PBYakAC1aXaFzpyo0LDKAQQEA9LpbbrmlB4JP9ATNfmZCSw6Kv0+/mZCvuQXlqp8Qof7d/CTh3UoPnVZlnbMKrPFsgN79/0K0Yu5ohYX2Y3AAAF6la5ez1+1TSUmdmjxuamqSFKz2T43B1FZ/ekySNCk5QnExISqratSSdw4zMAAAcwSfpsNva97cp7WqxFnVU1+yVm9ukxLS4gk+fsbecE6bi09Ikh6dfKOyM0YoNCRQGwrrqPcBAHidAMMwjHa/U79Nc3+RrV1tbg5NfVXvPGNV+drFWrzqMx1ukBQ6RLc9lKWs++LFhV7+5a1Pjmnpu5VKjAvVn7LGSHIWOr+w6qBCQwKVN3+sYgZbGCgAgJcHH6AD0ubtUnXdWS3OHKkJiYPct//2P/dp666TGhUTotXP/YCBAgB4BVpWoMt2lNpVXXdWUYOCWoUeScrOGK6oQUEqq2rU4nzW9wEAs6iqdRB84J8KPv9ekjT5tusv+l5YaD8t+U2cJOntTTXaVHScAQMAH2dvOKcn/rhPz+ceIPjA/xL/hsK65uAzuN2fGTP0Os35ZawkKXtlhc8fJQCAv3tiebnKqhq19/Bp2RvOEXzgP9Z/5rxia1JyxGWLl391Z5RSxoWrofGCnvjjPgYOAHzU87kH9FVZvUJDAvWGD6/VRvBBl7hOc6X95Por/iz1PgDg29765Jg2FNYpNCTQ5xeoJfig0zYVHXcXNd86JuyKP0+9DwD49j5/6buVkqS59w/RmKHX+fTfQ/BBp63+9DtJUvqdUR2+D/U+AOB7Sg+dVvbKCknSnF/Gasrtg33+byL4oFOqah3uc7yTO3CayxP1PkDvHqUDV8PecE4zl+xVQ+MFTUqO0K86cbBL8IFp5H3i7MuVahvYpXO81PsAPWv9Z7VKm7dLWTn7ffqSY3hP6ImLCdGCGSNM87cRfNAprqLmB+/oWvKn3gfoGTtK7XrwhW+04C8HVV13VpK0obCO8IMuWfLOYZVVNSouJkRvzB1tqr+N4IMOW7et1p3+r6a4rW29j6+uBQF4S+B59NW9emxpmcqqGhU1KEjPPTRMy+eMcocfGgajMxbnH3JfwZWdMcKnr+BqTz9eYnTU6k+dp7nS77j687y/ujNKm4uOq2hfg55YXq43nhjNAAOdDDx/Kjiqr8rqJUmhIYF6dPKNreownntomF5YdVAvrDooSaYoTEXPH+C+valGkvTqY1afv4KrPTQpRYeUHjqtXy8sUWhIoLYsS+yWx7Q3nNPkp3erofGCHpkUrcwpMQw00IXA8+Ad/03pd0S1e2S+blutO/g899Awwg+uuJ83+7bCjA86xDXbk9bJK7kuJyy0n159zKrHlpbpzQ3VuuWmAR1aFwjwR1W1Dr2x/oi7VcyVAo/LlNsH68j3Dr25oVovrDqom4ZcZ8qjeFx96Jm5ZK8k6YEJkaYOyMz44Io8Z2Y+WPjDy7ao6IqcdVV6c0O1QkMCtf6lm013Phnoi8DT1vO5B1qtvEv4gec+fuaSvSqralTKuHC99m9xpv57KW7GFa3//Hs1NF5QYlxot4ceScqcEqPEuFDn+j7LyxlwoDnwPJ97QPc+87U79ExKjlDe/LHKnBLT6QOEBTNGaFJyhBoaL2jmkr0qPXSaQYaklsajcTEhys4Ybvq/lxkfXFHavF2qrjurxZkjNSFxUI8dcVDvAzjfC28UHFH+P2rct01KjtCjk2/slgOP3/7nPm3ddZIZVkhqPRPoL9sDMz64rB2ldndfrp4KPVJLvY8kvbmhWjtK7Qw+/C7wrFh/RJOf3u0OPZOSI/TBwh9qwYwR3Tbbmp0xXHExIe6ZH5aT8F9majxK8EG3cS1YOPm263v8d906JkyPTIqW5Jx6ZYcMfws8fyo4qobGC0oZF97tgcfzIOONuaMVFxOisqpGwo+fMlvj0c7gVBcuqarWoXuf+VqSeqSo+VL+1+JSFe1r0I9G9Wd9H5g68Kz+x3fK++SYGhovSJIS40L16OQbe+XqRnvDOT26ZK/2VTVqVEyIVj/3A14UP+G6gquh8YLm/DLWND24OooZH1zS+s+cq71OSo7otdAjSUt+E6fQkEB9VVavnHVVvBAw5Xsr/fd73DM8iXGhWj5nlP6UNabXlnQIC+2n7IwRCg0JVFlVI60t/Chwm7HxaGcw44NLchU1L58zqtfX19lRatdjS8skSX97Jp5Lb2GawLNi/RF3L63enOHpyNH/pOQIUzWjRPuhx3UFV76fzvIx44N2bSo67i5q7oud8q1jwvTAhEhJ0hPL91GDAJ8PPGnzdrkbiEYNCtLizJG9OsNzKWOGXqcVc0crNCRQGwrrtDj/EC+YSZm58SjBB1dt9affSZLS+3AaNGv6UMXFhKi67qwW/KWCFwU+eQDRNvA899AwbXhlXI9eJdmV8ONav+XtTTU0NTUhszceJfjgqlTVOvRVWb1CQwI1+SfX9+lzcdX7bNl5Um99cowXBz7B1TE9K2f/RYHHW1sBTEgcpOceGiZJemHVQcKPifhD49HOYOUqXCSvOWCk2gb2+VFBzGCLsjOGKytnv5a+W6lbbhpAvQ+8OvB4NhCNGhSkmZNv9Jm+R67nSUd38yg9dLpVk1r6ITLjg3a41u558A7vqPafkDiIeh94feB59NW9emxpmXu29JFJ0Vo9f6zPBYcptw92r6e15J3DtLbw8dDjL41HCT7osnXbatXQeEFxMSFeNbNCvQ+8UVWtQ3P/uO+iwLP+pZu71E/LW2ROiaGvl4+zN5zTgpUH3AtiZk0fyqAQfNCe1Z86T3Ol3+F9aztQ7wNvCjyuBqJbdp40TeDxRFNT3+ZvjUc7g3V84FZ66LR+vbDEGS6WJXrlc9xUdFxZOfslsb4P+ibwvLH+iLtbuuQ8hTBz8o2mvUrG1dQ0OiJIec+OpampD/DHxqOdwYwP3FyzPWl9fCXX5VDvg74KPK4ZHlfocTUQzZo+1NQfLK6mptV1Z+nr5QP8tfFoZzDjA0nO88GTn96thsYLvdqXq6umv/CN9lU1anxCuJb8Jo4XED32vmjbT2tScoQenXyj179HunscPPt68YHqnTxnxJ97aBjFzJfAjA8kSes//97dM8gXduie9T6sN4Ke+KBv2zHdNcPTEx3TvV3bju5PLC9nI/EypYdOK3tlhSRpzi9jCT0EH1yJu6jZRxrWudb3kbjkFj0beFwNRP0x8LQNP66mpl+V1dPU1Mu2W39vPErwQafsKLW7V5f1pmX0r2RC4iD3VScLVh6g9gBXJe+TY+0GHm/op+Ut2vb1Ivx4V+iJiwmhyWwHcJIW7gULJ992vc8997n3D9Hew6dVVtWoJe8c5k2PTvPGjum+EH5mLtmrDYV16n/tNawR04cW/KWCxqOdxIyPn6uqdbivUpl8m++dE/acft9QWEe9DzoVeDwbiMbFhDDD04nwM/f+IZJoatqXFucfcq8j5e+NRzuDUWLnL8l5pYqv1i+4dsIvrDqoJe8c1k1DrmN9H1x2m/ec4fG1flregr5efYvGowQfdJHrNJc3r93T0Z3wl9+e0obCOi1YeYDLbXGRHaV2vfbOYZVVNRJ4CD8+vy3TeJTggy7YVHTcXdRshjcO9T641IeEL3dM94Xws/fwab29qYYZ115Qeui0ezkBGo92DTU+fmz1p99J8p1L2K+Eeh+0DTztdUzf8Mo4Piy6Wdb0ofT16gU0Hu0erNzsp6pqHbr3ma9N2ctl3bZavbDqoHvJdo4+/e+I+LV3DrtneEJDAvXgHf9N6XdEcfqzh3n2iOK91/0efOGbVldwsT13DTM+fiqvubt5qm2g6d48U24fzPo+fhrmn889oF8vLGk1w2OmjunebsGMEUqMC1VD4wV66fVAqCyralRoSCChh+CDrnAVNT94hzlX+Jx7/xD38vor1h/hBfeDwONqIErg6VtLfhNHU9NuRuNRgg+u0rptte5VPs06Fe2q95Gc64xsKjrOC2/ywCM5l2XImz+WwNPH7z3Pvl6En6vfXy99t9J9QMfpQ4IPusDdl+sOc/dzGTP0Os35ZawkKXtlhapqHbz4JmBvOKdX3z50UeDx1wai3hx+ogYFqayqUQv+UsGgdEHpodNa8s5hSTQe7U4UN/vhG+nXC0ucnc2XJfrF3/zb/9ynrbtOalRMiFY/9wM2Ah8OPKv/8Z3yPjmmhsYL7sDz6OQbCTtevL/xbJ7JEhOd294nP72bsesBzPj4Gddsj68vWNgZ2RnD3Ueei/MPsRH4oPYaiDLD4/1oatr10EPjUYIPuunN5Do1YJa1ezoiLLSflvwmThL1Pr44Y/DgC9/otXcrL+qYTuDxzfCTs66KQbkCGo8SfNBN1jdfyZUYF+p3HxrU+/heSF+x/oh+vbBEZVWNihoUpMWZI2kg6sPvP1dT0zc3VLO46GXQeJTgg27kLmr2o9keT7+6M0op48Kda4z8cR8bhJfaUWpX+u/36E8FRyU5l+VfPX+sJiQOYnB82JTbB+u5h4ZJcvb2IvxcjMajXhF86lWy9nndP3Gi/sfa6tbfKcnXvF//XBMn/lw/vz9TC/9+SE2Mp1d/mLj6cvnzBwj1Pt7L3nBOc/+4T48tLVN13VnFxYTob8/EK2v6UI56TRp+OO3ceh9N49E+Dz712rEwUwt3ROnWthME9Tu1bF6+mqbnaMPG/6t3FqTq8LJsreJzxGu5+nJNvu16vx4H6n280/rPajX56d3uKf5HJkUr/7kfcMRr0vDzwIRI54HIygr6eonGo14UfIIVdd9L+vPL0xXfP6jVd5pK1mpHcKoeuWuogiX1j0/TvyZUa3PBPmZ9vFBVrUNbd52UZP61ezqCeh/v2jYffXWvFvzloLt42bUAIcyLpqYtaDzqZcFnaLwz2LRVd/iwmiISFOX+Zn8NsUaorvwYwcdLj6Yl55onnDJw8qz3WbCyggHpAyvWH9G9z3zt7qvlKl7mai3/sGDGCMKPpJlL9rqv4MrOGM6G0Qu69CnYVNckBQW3CkXB/YOlhqYuBZ8vv/ySV6IHrd1iSArQTdd/ry+/rGNAmk21GdpdLn1VVq/nV3yhKT8OYFB6QWmVoXc/lyrrnOOdPMrQ/T85r9AL+8WuwL9MGSd9W2GorPqCnlq+R79Nk0JD/Od9mLvJUFlVgEKCDP3mjjMqK93JRtENbrnllu4PPsERwdLZ1iGnvq5JCg1ud4boap8kum7dtlrV1R9U1KAg/WrKOAakjZeut+uxpWXa8FWA0saPoqCwB9kbzumNgiPK/4fzqpWoQUHKzhjOmPu5FWPO6dEle7WvqlHLPw3xmyacb31yTIVlle7Go9Sz9Z4uXc4eYR2i4LovdMydfOp1uLxOEfFD1J8x9SquLuwzJ9/IYLTj1jFhemRStCTpieXlNFPsIZuKjmvy07vdoeeRSdHa8Mo4Qg/8sqkpjUd9MPgEx9+n27VNb37svIS9fucq/bUkWml3UZTlTapqHe76iVTbQAbkEjKnxCgxLtS5vk/zlRXovm1w7h/3KStnv7t4+W/PxFO8jHbDT2hIoOmbmtJ4tO9duklp/TbN/UW2drW5OTT1Vb3zTIK0b60WvrRKOw436Owgq+56LFtZE6IZUS+yOP+Q3t5UQ4O7DvBsCPjIpGg+mLtB3ifHtGL9ETU0XlBoSKAenXyjfnUnVxXi8qHAzE1NaTzq7cEHpnmD/e2ZeKZSO2BHqbPeR5KWz6He52o+vBasPKCyqkZJUsq4cGVnDOeKQvh1+HE1Hi2ralRiXKj+lDWGF7uP0LLCpDYXn3CfWiD0dAz1Ple/Y3/17UOt+mstnzNKr/1bHKEHHeZqairJVE1NPRuPuhZRBcEH3cjVl2vybZw/7gzqfbrG1V/LVbzs6q/FrBm6Gn5crS3M0NSUxqMEH/Sw0kOnVVbVqNCQQArnumDJb+IUGhKor8rqTXO02VPor4WeYpampp6NR7lsneCDHuKa7Un7yfUMRheEhfbTq49Z3UebO0rtDEo78j451qq/1pxfxtJfCz0afnytt17bxqO8Nwg+6KEj8A2FztWZ07mCpsuo97k0V3+t196tbNVfiyu20FPhZ1JyhCTfampK41GCD3rJ+uYFC1PGhdPz6Cp51vuYeV2RzqC/FvqCr/X18mw8Oik5gsajBB/0pJaiZk5zdYfsGSMUGhKoLTtP6q1PjvntOOwotStt3i79qeCo+wh2/Us3a0LiIDYS9En4qap1eO1z9Ww8Ovf+Ibx4BB/05IdTdd1ZRQ0K4gOpm8QMtrg7Ji99t9LvOki7LlF3FS+7LlGneBl9FX7iYkKcV13+cZ9XnoJ+PveA++KSN/yk7xjBB31m9affSWK2p7tNSBykByZESpKeWL7Pb+p96K8Fb+TNfb3e+uSYNhTWuRuPEnoIPuhBVbUObd11UpKUfgdFpt0ta/pQxcWEqLrurOnrfVzFy579tT5Y+EPaeMAreGtTU8/Go9kZw7mCi+CDnrb+M+caF5OSIzjK6CGu9X3MXO+T98kxpb+4x128POeXsRQvw2vDj6upqavpZ19p23iUUgOCD3pBQfPVXKzd03PMXO9Teui0HnzhG/cl6injwrX+pZu5RB1eHX5WNIefDYV1ej73QJ88D1cPLtcVXLxnCD7oBeu21boLT6m/6Flmq/ehvxZ8mauvV1+FH8/QkxgXSrd1gg96i2u2Z+bkGxmMXmCWeh/6a8FM4UdyNjXtzdPQNB4l+KAPVNU63PUYqbaBDEgv8eV6H/prwYzhx9XaYum7lb3S14vGowQf9JG85g/dVNtA3ni9yFfrfeivBbPqzaamNB4l+KAPj9xdp7ke5BL2XudZ77Ng5QGvrvehvxb8Mfz0RINhGo8SfNCHNhefcH+I8ebrGzMn3+heT6SvL6m9FPprwd/Cj6up6RPLy7t1NpbGowQf9LGWvly8+fpKWGg/ZWeMcF9V0hu1BZ05MqW/FvxRO8vlcAAAIABJREFUTzQ1pfEowQd9rPTQaXc/GI46+taYode5GxEueedwn9f70F8L6P6mpjQeJfigj7lme1iw0Du4ptcbGi/0ab0P/bWAFnPvH9ItTU1pPErwQR+zN5zThsI6SVI6xalet5Pti3of+msBF+uOvl40HiX4wAusb76SK2VcOAWqXraT7Yt6nxXrj7Tqr/XcQ8MoXga6IfzQeJTgAy/RUtTMaS5v05v1Pq7+Wn8qONqqvxY1X8DF4ce16GhHZ2RpPErwgZfYUWp3F6zyRvROPV3vQ38toPNiBls63NeLxqMEH3iR1Z9+J4nZHm/XU/U+m4qOt+qv9cikaPprAR3UkaamNB4l+MCLVNU6tHXXSUlSOis1e7Xurvdx9dfKytnfqr9W5pQYZnmAToafVx+zSmq/qSmNRwk+8CLrP3N+eE5KjuDDzkd2sJ71Pl1dR4T+WkD3unVMWLtNTWk86h8CDMMwGAbfkDZvl6rrzmr5nFGc2vAhv/3Pfdq666RGxYRo9XM/6PD9Sg+d1mvvHNZXZfWSnFfxzX1gCFdrAd1k3bZad9+tSckR7mVC/vZMPAcWJsaMjw+9QV1FzYQe35KdMVxRg4JUVtWoxfmHOnSfFeuP6NcLS1r113rt3+IIPUA3mnL7YM35ZawkuUMPjUcJPvASri7sMyffyGD4GNeltJL09qYabSo6fsmfpb8W0Lt+dWeUu6kpjUf9A6e6fEBVrUP3PvO1QkMCtf6lmznv7KPe+uSYlr5bqdCQQOXNH9tq9sbecE5L3jnsPup09QNidg/oHeu21RJ6/AQzPj4gr/mqg1TbQEKPjx9ZpowLd/cNcnH113KFnkcmRSv/uR8QeoBeROjxH8z4eDl7wzlNfnq3GhovUHBnktfzwRf36Njxs5qUHKGj3ze5i5cT40KVPWMEdTwA0IOYPvBym4tPuBfSIvT4Ple9z68XlrhneEJDAjX3/iEccQJAL+BUl5dr6cvFh6JZjBl6nftKEvprAUDvYsbHi5UeOq2yqkaFhgTywWgyv7ozSrfcNIBZPADoZcz4eDHXbE/aT+jLZUaEHgAg+KCZveGcuwYknc7AAAAQfMxsffOChSnjwrnKBwAAgo+5tRQ1c5oLAACCj4ntKLW7+3LRqgAAAIKPqa3+9DtJzPYAAEDwMbmqWoe27jopSUq/g6JmAAAIPia2/rNaSdKk5Aj6cgEAQPAxt4Lmq7lYuwcAAIKPqa3bVusuaqYzNwAABB9Tc832zJx8I4MBAADBx7yqah36qqxeoSGBSrUNZEAAACD4mFfeJ84FC1NtAylqBgCA4GNe9oZz7tNcD3IJOwAABB8z21x8Qg2NF5QYF0rHbgAAelDXzqk07dC8qU/ri7OeN0bpgf/9Nz0ylEHtrJa+XIMZDAAAvC/41KteQ/TYX/+s+6IZxKtReui0yqoaFRoSqCm3E3wAAOhJXTvVVd+gBoVqUH8G8Gq5ZntYsBAAgJ7XxRmfajWdPaa1836tZeV1agqO1q3TZylreoLIQh1nbzinDYV1kqT0OylqBgDAO4NPsFU/Tr1NcWkP6a6ECDWV5Gve3Hl6PupvWjIhotMP9+WXX/rl4G/cZUgK0LihhqoPfq3qg2yQAABcjVtuueWy3w8wDMO4+l/TpJLF92tu9TN6Z8mtzPp0UNq8XaquO6vFmSM1IXEQAwIAQA/rWo1P3T6VlNSpyTP6NEkKloIZ0w7ZUWp39+Ui9AAA4MXBp+nw25o392mtKqmXJNWXrNWb26SEtHiCTwet/vQ7SdLk2yhqBgCgt3TxVFe9StYu1uJVn+lwg6TQIbrtoSxl3RfPaa4OqKp16N5nvpYk/eO1BFpUAADQS7r4idtf8fct0J/vYwC7Yv1ntZKkSckRhB4AAHoRLSv6gKsvF2v3AABA8DG1ddtq3UXNt44JY0AAACD4mJdrtmfm5BsZDAAACD7mVVXr0Fdl9QoNCVSqbSADAgAAwce88j5x9uVKtQ2kqBkAAIKPedkbzrlPcz14B325AAAg+JjY5uITami8oMS4UI0Zeh0DAgAAwce8Vn/qPM01+bbBDAYAAAQf8yo9dFplVY0KDQnUlNsJPgAAEHxMzDXbw4KFAAAQfEzN3nBOGwrrJEnpd1LUDAAAwcfE1jdfyZUyLlwxgy0MCAAABB/zailq5jQXAAAEHxPbUWp39+WakDiIAQEAgOBjXqs//U4Ssz0AABB8TK6q1qGtu05KktJZqRkAAIKPma3/rFaSNCk5gr5cAAAQfMzN1ZeLtXsAACD4mNq6bbXuouZbx4QxIAAAEHzMyzXbM3PyjQwGAAAEH/OqqnXoq7J6hYYEKtU2kAEBAIDgY15vrD8iSUq1DaSoGQAAgo952RvOaXPxCUnSg1zCDgAAwcfMNhefUEPjBSXGhWrM0OsYEACAqRi1RTI+my2japPP/g2ci+lGLX25BjMYAABzhB37AaniA2n36wpoOOi8zXFciplA8PFnO0rtKqtqVGhIoKbcTvABAPhw2HEcbwk7dTtbbg8dKg2fKo3O8Nm/jeDTTViwEADg84HnwPvStysVcPCDltuCwpxhZ/hUBYz4hc//jQSfbmBvOKcNhXWSpPQ7KWoGAPhQ2KktknYvkyreV8DZky23D53iDDwjpirAMsg0fy/Bpxusb57tSRkXrpjBFgYEAODdYcd+QPp6mXTgfXfdjiQZg8Y5T2MNn6qAsBGm/NsJPt2gpaiZ01wAAC8NO47j0t6/OE9ltVe3c/Ns04Ydgk832lR03N2Xa0LiIAYEAOBdYafiA+dprPbqdm7KUICPXp1F8Okj6z9znuaitgcA4DWB58D7UsX7l6zbCRgzw2/HhuBzFapqHdq6y7lBTeZqLgBAX4ad2iLp27+0X7dz82zTFSkTfPrA+s9qJUmTkiPoywUA6P2w41pcsL26ndEZzlNZflC3Q/DpJas//U4Sa/cAgK8789V/6dof/dQ3wo6rbmfvSgVUb2m5PShMuilDGp2hgMGJvKgEn+61blutGhovKC4mRLeOCWNAAMALnT1yUOeqDzeHm22SJEfZbl04dVJnjx7S+WOVrX4+IHSALKNuVuCAcOd/+4fJctPN6hc9REE3DuvbwNNctxNQ9pfWt496yDSLCxJ8vJhrpeZ0urCjk0eVZ77apjNf/Zcaiz9TUNwPdE3/cPW7YaiCbhjq3skGhobJMnocAwZchmPvLl1osOvs0UM6d/Sw+z3mCjdGw6kOP1aQdazOlu+R0XBKjcWfSZJO//PDi37umqhYBd0wVME33axr+ocreNQPdc2A8B6bLXLX7exd2bpIOTrFObtD3U6nBRiGYTAMnVNV69C9z3yt0JBArX/pZup70K7z9hNq2vd1q6DTFSG22yTJvaPtd8MQZ0giHMHk7x1Jcny7WxfqXeHmkM7Xn9TZfd90/EPuuv4KHnWzJLnDieWmHyqwf7iu6R9+0XvovP2Ec0ao/qQc336tc0cPOX939SGdP1bVoffr1c4WGfYDLWHHzxYXJPh4qedzD2hDYZ0mJUdowQw2PrTsMM8UbXN+ffVf7e6cg6xjde2Pfqprf3S7rk38qRxluyVJTWW7df6U3b2TvVB/UmfL93Q6HLl27K6jUG+Yngc8uU49nT91Uk1lX7tnZy516ulKszSB/cN1zYBwj3BzuzPcjLpZ14QN7Pbn79i7S+frT7rfs+4Zpp2fX/G+l5st6khTUOp2CD59wt5wTpOf3q2Gxgv6YOEPaVHh5ztwR9nXlw06loSf6Nof/VSWm36oaxN/2qUd8ekv/9kqHDn/e7LDR6BSS92CZzhyfUAEx/2wRz4g4H9cIcB16ul8/Uk1fbvbHW46c+rJkvCT5tmZmxXYP1xBNwxRvxuGSpKuu+VnXnvw09nZouuGNGlAnEP9h51133ZBFp3tZ5OGTZFi05jZJfj0rXXbavXCqoNKjAvVn7LGMCB+FnScIccZdNo7MnUFnWt/dHuv7ZxdO1vnB882j5DUuXDkOhp1TdP3ZTgyHMel73dKRzZL3xdLpyrcR8FGRIIU3PxcBtta/n29TbK4/p1A3UM3b2OuU0+ubayrp56uiYpRv+ihrUK469RT0A1DTT1D6ZotOr9njYJO/1PB53cpsN859/frDwap4VCwGg4HyWgKbPf96aoHdM0WceBC8OlxD77wjcqqGvXcQ8M05fbBDIgfBx1X7UBvB52u/i2uU2iOb79udXTeVLZbxun6Dj3OpYqxPT/EOh1y7AecIef7YudXbXGruoarDlGeQWnAcOdX23/3H+a3NRPtnXrynLnpyqkn1we0Z3juqVNPvuKKTUFHZ+jM11+736PO/+7uVG2R633IRRIEn26zo9Sux5aWKTQkUFuWca7VjEdjnjU6baflA67r36o+x2w7lLbhyLXjlTpWv3CpcORZjB18/XlnyDlV4Z7N8bxSpdUHRXSKcxbneps02OaubzBqiyTHCecPfV8sNTX/u9bj398XK+CsvWsfUKHD2g9HPhiU3PUnzQXCnqeeOlNs71kg3PbUU3sFwvAIO5daXLCTTUFd78+2p7w7U1vU9j3pr7NFBJ9OcBU1PzIpWplTYhgQkweda6JiZBl1s2mDTlfH7Hz9yebahcPucNReMXZI1FkFR5xXUP/zskSc17U3nGv3MS/IogvBI2Rcnyxj0DgFjeveK1Z6OihdCIqWYYl2/q7gG1r+fU1/XbhulM5W7tf5M+d1IeDK+wxXkW+HXotO1sxc+kPReerJs0DYX0499UjYuVJT0Jtn90iR8ukv/9nl2SLXwYpn/Z+ZZ4sIPh1kbzin/+e3zsROUbNvaruGTnsfANcmNs/o/Oin7PA7s6N31eOcqtCFym265sy+9o9aTwXKUXeNmo5fozNHg3S2PlDnG665eMfUTjG2q6bBVWPSmRmPjnBtE9eEnldQ/wuSpH79LyhowPmWf7tuD72goAEXujRe5x0Baqpz/s3nmwLUVNfP49/Nt58N0Nm6q18mw1Ug7Drav2ZAWEu48fNTT93+PrhcU9DRGX26uKBrtsh1wOKaLerIaW7Xe9FMs0UEnw5665NjWvpupVLGheu1f4tjQAg6/rlz70Q9jjFonLP42PN0VXPBsetKtaspxu5LrkAhSYFBp9Uv+LRzmwo+o36WM85wFHxa1wSf0TX9wxWo47om4ETXxjywvy5cF9dqFsm5/Y5SYGzL8wi4MZUNtLffDyZpCur5frzcLK6ngTOydP3/eorgY2Zp83apuu6sFmeO1IRErhbxNp5r6DR9u7vdoNN2DR2OdjuwUz910BlwjmzueD3OgOEKiJlw1a/npa5U60wRtauwtiN6qzjdcBx3nmaTnKfavm/+t6P1vwOO7+r674ge3/I/nrVJLm1Dkh8Xd3cp/LvW2/EMO6FDnWHHZIsLXmq2KGzSgwpL+xXBx6w2FR1XVs5+RQ0K0oZXqPPwtqDT0cUCCTqX2Zkf2ewsOHbN4ng0Pmz1c0FhznBzY2pLyGFRNZ8PShe/zuHO19eT59IBkvPfg1v/jFlnnWgKai70WuiA9Z819+W6k75cfXnU4bq03FG2+7KLBXr7peV9vgP/fqfzg7T5dFVA3U4FtPezoUPdp6hcsznMCvTB0allkOQ5g3aFWpFWQUlyBtr6itY/dGRz6/8/VaGAhkMtv/PsSalt+L1EGL7sc/G8Qs6lbTjyXH9JkoLDvSZE0BTUpO8pZnwuz9WXS5L+8VoCfbn6IOh402KBPhVy7Aek+oMtiwB2pB5nwHDphtRW9Tjw04DsGZ6k1lfESa1nnFwfKNVbe+b5eK7FJPXo6Tujtkjavaz9IuXhU2kKSvAxv5x1VXpzQzV9uXqY56Xljm93t7tYoJnX0OmWkOMqOm4OOlesxxkw3DmLc5X1OMBlt8tTFa1vPLq59f/XXhyouvO0nfu5XOn0XdOJSy8uSFNQgo8k1Zfka+HCVfrimBQ0aKhu/59PK+vuoQo22QCNn1WkhsYLWj5nlG4dE8YW0wNBxx8XC7yqHXhtUUvI6Wg9Tv/hrRYBBHxqm6/a1PqGjpy+6+LaTDQFNb+unbep36ll8/LV9EiONqQNVVNJvp6Ym61V8X/WI0PNMzjrttWqofGC4mJCCD1XyXVpuaNs9yUXC3RdWm4ZdTNBx7UTPrK54/U4A4a3FB1TjwMzHaF3w6xkh07fXW+jbofg076mkrXaEZyql+9yzvAEx6fpXxNWaXnBPj30mzjTzPoUfN5c1HwHRc1dDTqsodOJnbJnU87mepx2Q86gcc6QM9hGPQ7Q0fDUtkhcuvj/QfC5lLrDh9UUkaood8LpryHWCNWVHFOTzBF8qmodGr7/TWWE/5du3h2q098EsLV0wLmjh3Su+rD7/6+VdG2CFBgR6V71s19ElAIHhDf/RJl0pEzGET8dsOagc9l6nOZaHFc9DlsiAPRy8Gmqa5KCglsFnOD+wVJDk5q68Hg//vGPve8IPPh6vf7jct0WV85W0hk3NH9d5JDz63s5v9DKKUegvv3+On37/XXaW3utvq1z/ltqkPRN89dbDBQAXMEXX3zR/cEnOCJYOts65NTXNUmhwV2a7bnSkwTMboCkW5q/AAA9J7Ard4qwDlFw3Rc65k4+9TpcXqeI+CHqz5gCAAAzBZ/g+Pt0u7bpzY8PqUlS/c5V+mtJtNLuGsqIAgAAr9XldXya9q3VwpdWacfhBp0dZNVdj2Ura0I0IwoAAMwXfAAAAHxNIEMAAAAIPgAAAAQfAAAAgg8AAADBBwAAgODjVezak5epFKtVE/MqW3+nKFeZE22yWuNlS0pT1ppyORifDo2Pf41d94+Rucavd8fHN8fOe8bIO8fPN8anb8fO98eox8fPgGEYJ43N//4z42czXzCe+NlI4863Dnt863Pj3/8lwcj4P/uMRsMwTn613Jg05k7jP/YxPlccH78aux4YI1ONXy+Pj0+OnReNkVeOn4+MT5+OnQnGqBfGj+BjGIZhNBr7vtpnNBrfGf9n0phWG0vj5zONhH95xvim0WPDykgwfvbCN0Yj43PZ8TnpV2PX/WNkrvHr3fHxzbHznjHyzvHzjfHp27Hz/THqjfHjVJckySJrolWWdr5TU1IuR2yyIt3fDFNsfJhqSir96HRX18bniF+NXfePkbnGr3fHxzfHznvGyDvHzzfGp2/HzvfHqDfGj+BzBQ6HQ7IEt9qQLJEWydHkh3U+nRufU4zdVY2Rv4xfT4yP2caut8fI18bPm8bHW8fOV8aoN8aP4HOl/Bx28YA7ai5+YRifi8dnAGN3VWPkL+PXE+NjtrHr7THytfHzpvHx1rHzlTHqjfEj+FxB5Mh4WSoLVel+FewqL65RpM2qMIbnsuMzgrG7qjHyl/HrifEx29j19hj52vh50/h469j5yhj1xvgRfK6UkhNnaKIKtLj5cjp74TItLrIqfZqVwbnC+DB2VzdG/jJ+PTE+Zhu73h4jXxs/bxofbx07XxmjXhk/rugyDOPk340HR440Rrb5Svj3z41GwzAav/mzMfPOfzHGjBxpjPyX+4xn1h9mfDo4Pn4zdj00RqYZvz4YH58bOy8bI68bPx8anz4bO5OMUU+PX4BhGAbzFgAAwB9wqgsAABB8AAAACD4AAAAEHwAAAIIPAAAAwQcAAIDgAwAAQPABAAAg+AAAABB8AAAACD4AAIDgAwAAQPABAAAg+ABAd7KrID1eKYvKpZo1SotPU17lVTxcTV7LY7R6PLuK1qzRHgcjDhB8AKCvOMr18R6LxqbESpFpytuep/TYq3m4raoMi1d8pFo/Xnme5i8rFLkHIPgAwJXVbNGiGRNli4+XNT5J0178WDWu79n3KPfxNNni4xUfH6+k9EUqtEuSQ0VZSUrKXKSsaSma+PgW2SsL9Oy0JMXbbEpKSdeLBQUqdsRqolUqykpRyrN75HDfL0cvZk5T2sQkxSelK8c1XXPJ3ydVbt0jh3WirBaH+/HsexYpLW2xSqoKlJmWpa3FLyrJNkNb7B5/3pp0xSc9qyKSEUDwAeDvypU7Y5Y2jnxWG0tKVL7xSVnyntSLRQ5JDu1ZlqlF+9OUV1yikuICZdas0JM55ZLs2l9Sq9pKh6blbtXGP8Qqb0aWttqWaXtxsbYXzJR90UpVhdkUH2ZXSYldseOtssiukpJa1ZZXKuXFNSrYuFE5iXuU84ciOa7w+0qKaxSZYlWYWh4vbGymspKDFTNzjbZvXKyUkUmyOspV4kpujiItW7RHyfNnKdHCqw2YST+GAEBnOYpylFOZrEV54xUpSbHTlLt9ohTmTAlj529VsUOyWCQpViNjBzTfsVxbKoOVsmiWksMkR1GuciuT9eKsZIVJUliy0sZKax0pilW5/lAZJtvIMMlRpMLKAZq47EmNj5QkiyySLAMskiyX/33lFo19PFZyFGmr+/HKtbXcImtG8zm0MKtSYmu0vdyuTGuYKtf8XgWRs7QmLZIXGyD4APB3lRu3y259UolhLbdZwsLcYaNg2TLlbS1Rjd0hhxyqqXIoOSNSqtmqEsdYzWq+Y03xdtVaZ2is+3HsqqqRRqaNVVhlgcodsUqzWqSaEpU4rJrl/sEaFZc7FDsrVpbL/r7tKrHHaobVIlUWtzyeY7+KayKVZnU9XqxsVovyimvkSN6jRcsqlZaTLisvNUDwAeDvHLLX2KXIAXKfBbKXa489VmNjpT0vpmvW9jS9lfcHJUdKshcoPWmZUqxhspdvVU2kTSPDnI9Ts8eu4LAYuedVararoHyA4m2RspdvV2VkkuLDJHvRVlW67+f8fdsrw2Qbabns73MWNtuaH6Pl8RxFW1RpaS54dsY2xabEyl5Qoj15Odo+dr4KOMcFmBI1PgA6yaLYZKtUtFF77JIc5crLnKbMHGcRcuV+uwbET1RipCRV6uNFy7S9OWTUbC+Xw5qkWIvzccKsYWqq3Oq8pNxRrjXzX9T2JqvGW6XK7eWyWJMUKee/ZU1pvp/kqNyqclmVFKvL/r7K7XvkGJuiWIuj1ePZq/bLHjZWkR7ZJjI+XpbyHD2ZI814Nk2c5AIIPgDgDAlpi/T7pO2akWiV1TZNeTHzlTs/URaFKTlrlsZuz1TKxDRNm5GjUxOnyebYqPnPfqgvt9coNskq18SNNf1FZUSu0X8fG6+ktMUqt1k1YHC84sPs2u9RlLx/e41ik2Ld93PsL1ZNbIqsYZf7feucvy9lrPMx3I8nhY1MUmzVYqWlLXKv42OxjldsbYnsE5/VDM5xAaYVYBiGwTAA8HeO8hylpW/XrIJcUdMMmBc1PgBgL9SizFxFPrmG0AOYHKe6APgxhwofT1J80iztn5ajnGmxDAlgcpzqAgAAfoMZHwAAQPABAAAg+AAAABB8AAAACD4AAAAEHwAAAIIPAABAD2DlZpP58cwvO32fL1bcwsD5mPLbru/0fayffc/AmckbAZ2/z6Ms2wYw4wMAAAg+8HcOlResUaG9+X8rczUxPk1ranrwV3b1d5TnaGL8NH1sb/dBlTsxXtMK7N30JO3ak5epFKtVE/MqW3+nKFeZE22yWuNlS0pT1ppyOXid/ep1ZhtgGzDf9kHwgd/knnLlLcpRcQ1D4bkj3PJ4mjK3xigppu23CvVs5jI5MtdoT3mJtuakqeTZTC0r53X2m9eZbYBtwIzbB8EH/qFSeTPStbJqvxZPS1FmQcsesaYgS2lJNsVb45WSmadyR/NRmC1dOS9Ok802TXmVkr1wkWak2GSz2WRLStPjeXucRzaOcq15PE1JtubvpczQosLWR2jt/g5JNR+/qPQUm2xJSbLZUjRj0RbVtHP0uic3Uynx8bKlTNS0rAL3/a+eRbEzcrUxJ1PJYcGtf+ueldqqNGWlWWWRFJaYrqzkGhW4/m5eZ9O/zna2AbYB020fBB/4jVil5yySLThGWWu2Kict0nlzU4nWVE5T3vZilRQulnXLi1pc6JAsFunUdhVEPqutxWuUblmjzBl5sjxZoOLiYm1fM0O1i2boxSKHHIW/14vbbcrZXqzi4mJtfHGk9q/Z2rJTu9TvqMxT5qwCxby4UcXbt6t445Oy5M3Sk23nvMtzNev3e5SWV6zirRuVM7FcG6ua2j+m+zhd8VarrG2/kh5XoaP9naE10bnTaqumpFyO2GRFur8Zptj4MNWUVHrxTo3XuTtf5yNsA2wDpts+CD7weyOVPiNZYZIUaVNKrFRZa3d/L21iosIk2bfnqShsmh6fGOvchcSmaWayQxvXlMsRFiOLfbvy1mxReY1DkePnK2dxmiKv8DvsxWu0JzJNM5KbfzJyojKSpaK1rY+Waoo3an9MmqYlOvcukeNnaOLg9v+asLvyVFJervK2X9v/oGRL50bG4XBIluBWO0pLpEVyNPngTo3XuSuv8ym2AbYBv9k+CD7wF8EWhVku/b3IsOajqxq7mmpXalpS8xS3LUmZW07JUVsjS+J8rcmZJm38vaYlj1X8xEzlFNZc8XfYa+xqssS2+l7YYItO1dhb7TQcdrtkiW3ZuVgsim0zVd0TLGEX78AcNRfv6Hidzfs6D2AbYBvwl+3Dx7GOD7pdWGSYgmNmqmDrk7K28/3Y8ZlaPD5TUo2KcmcpPXO+bNtzlHylx7RXyu6QXHsJe61DA2LCWh9BhVkkh8fUscOu8ppLT38nPbZdF3138CS9tbVzR4KRI+NlqSxUpSOteSrbrvLiGkXarArjdfaL13kE2wDbANsHMz7wbZYmhyrtnZ+EDUtKV2LNGuVsaT66c+xR3uOZytnjUHluutIeL2g+zx8pa3xMh970YUnpGmsvUK6rOLKyQCsKpeRpY1vtDCNtKYqpKlBekfN512xcoa2nLvGY3Tj9bUmcoYkq0OLmy1Pthcu0uMiq9GlWXmc/eZ3ZBtgGzLp9MOMDP5m2GatpKQ49+d9tKs4qUEFaJ+4bOU3Lcsr15PyJstklySJr2nwts1oUG/u40rbO18Rf8hxBAAAA3klEQVT4LGehZNhYTVu07Mo7n8hpysnZo1nzU5yPaYlUcmauFo0PkzwvB7VmallWsTLTxyovLEZjU9KVNnKLirtjTOwfKz3xMW13/f/88bLOlwZMekvb/5Cs3+fO0qxZ6bLNr1XTYJseXJyjTCuvs/+8zolsA2wD5ts+TCjAMAzWMDcRWlb4B1pWgJYVQNdwqgsAAPgNZnwAAIDfYMYHAAAQfAAAAAg+AAAABB8AAACCDwAAAMEHAACA4AMAAEDwAQAAIPgAAAAQfAAAAAg+AACA4AMAAEDwAQAA8HH/P8sB0AKIr0TtAAAAAElFTkSuQmCC
)}
.images-Exponential-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAc8AAAATBAMAAAAE3Zv4AAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAVIl2ZhCZRDLvzavduyKlp1aOAAAGZ0lEQVRYCbVXbYhUVRh+ZnbufOzMzsy6IuRHTrqkaD+mGisq6e6HQivFTRbNHzlDrkgFcQ2NSq35k2Su7PzYcCOo6eNH9MMmP/ogwi0SpR+ykpUF1SUrEoXZH1qCtPW8537MnY+1FfKFPed9z/Oe97nPOeeeOws4Nug6dq/Xhw2RdnUYPlxrmPr/hcbMSoWYpvtSN4vfZrkj61ynZR82EDnQErEHibvW4TpOf1b6Gg+S2YaEGYcTM8vUCoCtJrA4N4g2k9Oi33tzA7rntnDu5NhnLcbdIeJdfVIRUELX3QHcoMLwKDsfDx7T1fgMmkDJTrILAa2EChG0TQU7k+0fwGzAVrMF0TG0K2iHl4ByzW32BHzBaB53R8qITOBdFSmhp+YAG23wpHQ+noRlj/93qzmZTqGWQoUIHZ0Fr9ppKGllDgQyoCrKpg2pVjW5mtvkqQWK6U3j7gDxjjTWqFCEapdcBJraFh/PBg+6VqfFjtpEed8WTPE90QFRE2efxU+KRi238rDP7lq2HRaHwy2InGziqSKeVZEIDYw7AN2KuD6eeR50rU4Lfptofq1StMQXhYmiJnxCxjmA23tKCOSW8lR3WojJaM1yq62BK8lXl7y/bXXaxqLeNr081fPB4DwTD83eDEnKcG7Vwogh0ylUu+UtE1tJ199ryLKSJ7oAGyw6ZRwGtlZAuQRrdH6vq7cYyP2aiyxgpe6+LAt1rej/qPEdZZZNhLVfLaGEfosV1y/7gnzUJmq0n18zVdChxyvYhA0IZ9ozSPm5EM4mS/gWR1DV8aWzCKNuhnYRI3qkhMfxAFQSy45QqCUJFIoOnR+cMR7naDpmMYpXBmPFdlMRvq6gQwqU/CYLZ7XS+qp+kFNwwchv18e05y9iboNQyVJEnH8aiGTCWaEjMzAJW01yzUUkx4EBxPVQGSlzAFEgYTDliU9pB+lULRzHhm0GeP7vxwWOIPCetMNFNn8hb2qTvG6qUEnER/xC+YiR5CSWYa1xzuYxq/zECCHXT6AxBUL7WmrW2wDrmzyNnIJ3kFqfnIzwhK5sECpZ3LiizB0DggVNVUxZjI85aoC7ldBRxCzeMPmi2iolVKYpW9jZuQWR/RCh1aIS2kXxwB6eBkwhb/Ee0Prv41oyiXi16FzLsqN5/gUL+LN/Fe4BhAfLEVJOW4VQhVIFBHgibYv+KJZlMArtMh6lczMil7BTCoUzOGQL3SdZsjoqSxGBS47oP2dURXVP2EKTfNJdchkmp7BHdm4hHZqc6potFDf5gxI6YslNGagk5DGUOULnWlx0SSKeMp0Ppwjdyb9YUdU9bfPgc4QUoZytRDo0YZOqq0KV9BoCgUlw9bhRbeNUy12LmVzbus+LnaWIEBlncuATVXG51CkpNaE0cJME0UmsjPBJ36YDyxbqP7pJtPHVVUdXFmGu0DrmCL2MakQlEacAbh5NhIo3PyJ3vzG1UfHgEl5STuo3CykjntkuYLCvjNwS5O6SiY5xs9uzbBAYN4MVvMlCfEMY1AuVLJsIckhOIaboTmumK7RjAoEC5PPyivZWKGEx7SRCVsPnhRSrcETbj3yam8HPR+SYbI1jtlCesIWDKknwCRzAecMWynOGRW38BRF6cVJXPBSaVU4+xN03zt1oEiyeaSvE04l4mrdmzU5ynUJlHvBMNjARmpJCAzy82TqhfGZZTSFCnIq/wW6hK55o8z4vwbWLuKHoB57qPL8iOZQDfpHX5VaZU7Pe/uK9l6NvPJnvnGMipCNRBD504L1/P3P0u71XivN6zm5RScTRNcvkXWwLPc7E3auwlnUPpxUP5jiE8R4g1N05JGC0FE8PIzXslHW63/t0BHU+75CBxV0lKdSNaLdRL1SywAuTluAmbuvXFd2sB/mDIe1X84ik+K3sD2q++tWhTdQGWnkeTgo5upOtkprHQpWEsRrPrW5GvBGeLM9aPIQiSnkZttPOruyNBYueq5yIXh+7kRKKpW44Te/iaRGq8RjPyAKZ4fVP48wOPDxterteg5qq2kTGrlqK8rbxU+CbVqiH19WHbhQ9+rG4YTeepnfwiCFCY73mNGmNw0PzssHbisGc3gg48TL5neBZk1CbaLTuDecPooL7b5o9c9AroBy+pVcxTb8KSMjBA3Q7EOy7evLM0VldGV9yk1CbqDvry6EbMsCL9Ppb/LpRVK6p8r+UGbubOGvFuQAAAABJRU5ErkJggg==
)}
.images-Gaussian-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAd8AAAAuBAMAAACblw5jAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAVIl2ZhCZRDLvzavduyKlp1aOAAAIVElEQVRoBeVZa2wcVxX+9jH78D4dR5FoUry0VoOSSgzttiBKxSR2IpHyGCKrIT+aXVFHEU9tweWVlqyQqFqayivkqkZIZSkV4he4L/EoUs07QgJt1RQCEjCigKgatFtIaKQIm+/c2Z2ZXW/G8eyaYHGkuXPued4z99x7z8wA/xfwieuGEGbWGIKR/44JzYgVkNUHdPZ389IGNMPhaQ42bMTHv9dVFIgvRevADV7q+vHsT310Yu5gMj1iL0k/YjnU4A++4djwRbQyYIUXgZjuK7cWcyTvI/EWYGyyogRUwLffDLxOdWPzvCV+6+p+0HBxfyxUs/m2IaDRR1wcQbuz7LD+BmxlJ22xOeVQgyC7/ZTqiDfwTSWhAn5+G3DEVviV3I7buLRqKG7XB9Msm9k21DdgcYTMaNmWZHsaGOHtO0J4wJQ2IGQf9lEMGcjkcZuSkIC1846wpqZpxunjsIuuE+szw7ajkiewZa4fA5GqReOpwjo9eMUzfsoZC7kqPqPkJeDQkkKlCS1Kq6ZZEGC7fQvQ9gnYdrTDNZaocQE1MHpEJy3L6APDnOmqfnF5zxPT2yt439ajOHAx++VCEmhasEUYsHb9YxXcxfFN7TVTBnDjnlriahy2iNTxNHDXooRNpmvSi43trYaKfy7Gr6aliUmdhsZummKO0qAHKGU7wsFf7OTCnbJo8dCuHxlALbuyUhDRZ6UJCF5d7RzmjHgNH8K7gV/jGTDgOQZsiW2Z4YwBzVhgmifySYu91OJ0sjpSEQSPKtZTigntBVHphpiu1Q41jSepgrNm6W5jQfvcOVzVE7BIKUdU5rqNF2K6uKNnoNUx6J2lDu0y79oFr+BrKFW0FrelJnB41sTZnoA51Hi2hV04aL4MHEDKqDR5NAmSrSnWgmK2NxevaRHHaxVmKVXwOHKHsq04M/fWnoBFCqAjwgIQLmvKYs5i3zlA07qwA0GEj9OFZZQs7hfa1Dv4bB+BBNys4oQpEjLDJV7hMv41tQ+3APPgNO9GVCGRRbIW+TSEyezjpSDxewGd+Dz4dD9A5DrEz+MeMRQr4Ck74IdEStJCSSlH4KNHYuWMsqj2ESfg8BIlg0GG43ShHfBVFich+zvOMpCrtA9eCfgeXsmq2jNOy9bxAPBDRBUiOZfORxuKGZ6so7gTxbe6pkU81AKfIicussSoOYvJCrj/NFZJKUeIL5ER+p6yuFtkatIIJILvWjlDWWg37YAvoBlHZKQga5iBcDIJErBgO+JyZpjLRxIt3BrHedyvkNxfuKObqcLdwjwTKafy6VSem44DnPwRnQ23+grrpa/REFcOO90Bi5TtCJI0zyOp3J3WKp6AmQcOTDuYQozu7qreCctLsgNm5o1P4xntEfBYYuHxLbxi2gEz/3BNhJVI9AstAw9rj0UZsK6QUpTZYL78+gqZ99dS+ZPInfSaliPsFkTrTPyCHmpEl8XQASa13hWwkoIkOo9bRv4i7hN31VMRdSwJWeAb9k3ao9JELGkFbrdvl2y5WF148N+ffu43D16sbt/z0rG3X0h89WNRg6Xllgr3bjvgn1P2vn04yGX6dB4fH33lJmybgkJSe4DoxOiMMKOLaXM/PrvftSzYXycNhA2Oe8bEtWM1MTSBxITZHbBIAeIIaU7q7JSh3G15D6PKC1XBR6QNXVucRoRC3hKXtZIv/MCXqzXabLqSlG75SjvMUOHkoU/izHG83yH1IkxqBzpOHELbUc5DEHTE7b9X0GNILLSJx11W3UX7Yb/sR3Rpb2yjKmCN6X15MLNdD99QDReNS4qPeFirrNqOzHt7tGfd/okqJ7gA1NUbBTADB4oO1hf5Ul+qQ4zZWNyUGU7urTiMwZBdUm84sCpg29G8d8ujsFZ2NNDMc4kb4P7xB0X0lLgPuVL9sH/2I7o0zVB4iG0G4UmXMRi2ZazgMbAqYNvRhO6RIRo13X7J4GvxKenXeLHERajIbNw6asnJ4oXifkuq5J3fnt2fF/o5L9MXT/lyB2Eurl85p3PG//iVigpYVbZ3smiIFXiUdq/8mM4SUKrkpoGf0A+r500JuQKHnb3tHLJLdokbrbNEOoAE93aTrA8/S3iSSNPiji9VMl813yk6r7LZhJAsq0G/TQUsJW7SQKk6L0QVsOJKMz46ekxVyQy4We0E3Kl3VzYFSBwMOMt8vhdazS5xOZPjqgbtWcPjIi1VMgOes4hu3pSO5oE3yBpWlW0T+DoRtDctb0pnVZXcTulNu4Z1ZBoIlSHHkpS4aSuyyLI0aqH7WGKBs09VyaU833MIaxxLIjIoDOVvQc8gcqxSD17DCUa7ss3OFIE/yZvpm7tF905VVZVcGt3GNQD8o5u9AT31t2DYdjlfbbijg3Tu9Q7SfWdKK/hZN3kDevbfgiEbnlOzJUbD1W7TcaO73+l1Av5+hzD0++RH24OyvC8KQ3IzbjmGyg6mkEu8Hiae+64t1/V62K06WC9qOmd82hrMVB9tz7Cnu9lcxb5wop3avkJBmOkqOq+e/BI7bAiemCVnMQx5TCx93mSbtP8WDNf8Gi95Ps7SBR/mgCzO8LtWVmr234IBbXWrZ/klNyCElwIqrq2mvYrU0TsKnb8FaytcvkS0dfmyPZIDfPDssbSqm9H5AyNeX0UfAiFTDm7kx8FV19C8Ub5AhxprSAVil6qB1JTSjuCq/pohHXz3jhX8pYJxrw+mprS4m24MzCLCfE5uyLEXfM/it7/axsSbOPapbVjCExthnZ83BoDHB9D1UU2urFzE5yerPiKBWYcHsnrWCuz4Sim+MJDjjTk4BhrSGsqD7vw3r2H/f47d/U1j/cOL6OvXuZIa2RevpPcr5vs/3+6s6jSYqqcAAAAASUVORK5CYII=
)}
.images-icons-callouts-1-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFSSURBVCiRnZKxSoJhFIaf8/0aWmYogahNmlDNQdcQZlGBRgQNUSAkXUFX4VBDQ0NYOARai9dQS7SFTWEUCClEiel/GsQSI8Le+Xk4h5dX6E3uOYBpZxCNAzFAgTuUS2zJsh6qdlH5kvKVlChH80GXZ9bnZNrr4LWlbF/Xumgd1U3WwoVvMV9JoZxagrytBrmtt3AIBN0WgcJT7082wjLJcFHIPQewWmXAAzBkhKat7M+Mshsb6RcBXhB70mDama4E0LS1H+yPDyRtEF34i/wZkzBAdGBPNWroVD6wahDK/xDLBpuLgTWRogNbsljsgY4BrEy4GB8yzPqduC1hJzIMQPGxwVPDBqjC+0FnAGeVJYRzwJzM+ZjyOn4c2bqqcVP7aIPESYVKvZNbRDkGfL88WAXZIBUqQe9WAfIPfpA0mASqETqN3wMFpHFIMlofuI/+fAImnmcSSbKjTAAAAABJRU5ErkJggg==
)}
.images-icons-callouts-10-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHtSURBVCiRjZK9a1NRGIefc+6tSUxjiGBjEqFoFK3iJOLs4lDTWjo0IILgVqU4Szf/hQx1KRaEoBEUv5BgN9EOWf2A0lixXtJoUm3S5Ca5N+c4NNEEI/iMP87znt95OYJe0sUwsj2H0BeBY4AGVtE8R4kUl6Ol7lHxW8pYybBHLo7tG/LXXEVuy8EUMH3Ix/GAyde6a7+0mlc3pyMP6ZXyVUd3eVtqaiNj6Wyhoa26q5fWazq/4+pcuakPvyjMABiki2GEWi421J75d1UAoj6DloIbR/2cffWdu59t0l9sbo0FsF0Sr89fX5DI9hww/GDDZrXqojolJqNelotNPtXaAJSaikeWTSLq8YGYlQidYACjew0+VNy+7GPFZdRvAHJCAvFB4gGvZNtRfdlWSzHiMRBax2Vn5X9RdTQ+Q/Rlw6ag4ig0aIlgbZBYaLSJ+Yy+LOI12GwogDWJ4tkgcaXc4sJBD2bnUgGMR7y8KbVAiKcmSqQwuDkV8wRHPJLTQZOw16DqaEJDknvnQiyu15mKeTkVNLmW+/kD7IXdefetS6kzwccnAmbfo/ym4FtDcTJokt9pc/t9Ra2U3XGS0Wzvl5tEswSEBlUHSiCukIxmu9X/kNnYD2IW5ARaH2F343ngCaJxh5n49j+G/j+/AOCTySQ2S2r/AAAAAElFTkSuQmCC
)}
.images-icons-callouts-2-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAG6SURBVCiRjZI/TBNxFMc/73fE0uvRpsRILFGqBQaiCXFxdXKBwqQ1RsS4MXTQmUXiqouJcTEah2qaiEFdyqSR6OLqYmpMwJJiWhqioQdy9xxO9ApH4nf8ft/3/fnmCWGU1vowXhHRMWAIUOAzymt8ucflTGO3VP6ayrVC1rYeXsvaiXNHYhztNtTaHqXlNo++buKpbKA6zaX+BQCza0J5WjgWT0z2d7NYd7n16QcfW7+4fybF3KkkoCmEecq1iWBiaa0Pa6cKOOlDhta237H9ndEk10/Y9L6oowHVQvxBg/GKgAPsMwGstn1iRrD+HZUGmTGIju+r/oOYEaYG4lTqW+xoWDH5LiB3kPHuaJLjtkV+ab1TUM11ARplun26h6tZm/Nvm6xsentlNQjVvezsSA83hh3yS+t8aG5H9a0afF6FmZvDDrMjDhfet3jzfSv6BpGXQmn1MBZV0NTUQJwnZ9M8/+ayWHc7akvLbX4GCTUQdzAI+VltEmG+OJQw01k7csj4uyZ11/dAxihkKuGXm0B5DKSj96MBcoVCpgLhXwUor/SCzIDJo3qSIPEvwALiPuBibuOApv+P31uOk4kvJqUmAAAAAElFTkSuQmCC
)}
.images-icons-callouts-3-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHTSURBVCiRjZI9aBNxGMZ/792lR5NLY/zoSTIouYYWraCLg4OLokOt4tKIKJ0cOlQEB7vpIii4ubgInaJmEFKFUt1cXETHFomDlJQkjYSmUS8f9/87lNhYmuIzvu/zg/fjEXqVLbsYwSyiJ4A0oIGvaN6i5CnXE9WuVf5CuWJm2Dae3z8WjZyKhxi2DSpNxftykycrDTY7bKD1NNeS+W0wV8ygeZF2LHkwHuVjtUW5qfAiJndHHT7X2lz88ANAIVxlKrkgZMsuZqcAOOyi6aNh5k/vw82XqDQVQA1RIwZGMNsPArAEmkrjK90txUFmLERf2mm+cNgmFbFIOSY3j4S586VOva17HMakBXg7wTMHBjjn2qQdi5IfsLLZ+degtSe8KtaB6G5jmgIPTwxxOx1hdLHC6q+g21o3EAr99gs0PFpuMGgKZw8N9LYKBoo3/UAAzzEBWPuttosiC0J27SAmBdCxW6kwyUGTT7U2tZZiPGZxbyxKS2lOvlvHDzRAFfFHtgLwsngF4fV51zbmxhyOx0IMhYTvPwMWSz6PlxvdHwYgE2QSS72Ru4xmHoj3mboKcoNMYgl6swqQW90PMgPGJFqn2Ar5NyCP+M+Y8jb2usd/6Q/WuJ5eUkkqMAAAAABJRU5ErkJggg==
)}
.images-icons-callouts-4-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAGzSURBVCiRjZLPS1RRFMc/584bHc2ZlxK+mMGNYyAU0iz6B6IW4Y9WaQyC66Fcu7Zdqwg3EQWuRniLyHJRqwZaFIguAgkiN8kk6pQ9pXg5vTktnm96jA343d1z7+d8D997hLjKOw4mmEV0FLgAKPAJZYWGLFDM1qKn0oTc6hTKE6AnKt27lGY4bTG/ccjGQeChOsPt3DKAiUFLcehmLsXdoTPcGuiiP5UA1EZ4hludCMHyjnPs1HS3k4aFgs3chwNaZFAWcbf6DCaYjTsBPCxkWNn2ebt31AoC9IKULETH4tVrTifXnU4uvtrjfMr8DwTMuAHy0TGTFJ5eOcuddY8f9UYbCFDNG8LIAbg/kmH1e53nVb89dIwKbnUdpQDwZcyhwwg/g7BXUmCgO8G2H1DZPaL4fj8C31k0eImEYGnNo9v697W5LsODyzaPN39RiQcl8kIofz1Hgs+gdus8w2mLjzf6uVr5xpvd31G5hvhDhmK2huoMcCINv6Gs7dc5/NO8CkCmmcx78ZWbQFkEetsEUgOZZir7GuK7CuBu9YGUwIyjOkiY+CawjPiPmMx7bZqeXn8BcAKPEFpbUxkAAAAASUVORK5CYII=
)}
.images-icons-callouts-5-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHFSURBVCiRjZLBSxRxFMc/7zdbwy4j29aKuCFSWuC1Q2AkXrqEaVDURgjRKTz4BwSd+we8dIgIhE2XkLQiDIQ6dIpuQVBjRTXGxLa17K7O6sz8OkyzTkuKX3iX931fvu99eUISJbcHFUwjegw4BmjgPZonhDLD1UIlHpW2qOwUTSV3Z08esOjAI8ej9MWrofU1rhxeBFCxCM0DA6xLfWkCDR+bQbuqmyGgswgLlJ2JyLHk9mD4NmBlDKF5sZczL3+y4rY6jWP8QsJBhQqmgX/W2yfQlzEw5L/CHMhUCtHnOpmnI4dQApuh5tn3Fjfe/Mb1wsSEGhfmnXrsuF8Jk/1pXvxosR5oTudNZk5k+dz0ObVSQW8rK6m/kQORw71P62324bcNlMD8cI4BK4Xd8GNKKwR7pxQA3ta2gOjmBGxFyOPdhKPdJgAf6v52U2RJKK3lMbBBZ68fydCfMXhd3aLuh4zkTW4OWTx3W1x4VW3fh3iDUeBzznmEhbO9pro11MXxrhRpQ1ht+Cytedx+12Aj0AAByBjFwnLy5SbQ3AdyO2xdAZmkWFiG5K8ClL8eBJkCNY7WR4kSXwUWEe8Olwdqu+WxJ/wBidWjNXmZlKoAAAAASUVORK5CYII=
)}
.images-icons-callouts-6-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHnSURBVCiRjZKxa1NhFMV/35eXNLGviS3B1AQdjFoIKHTUQXCUNlGXRkRw7hCdgoN/gDpKhzqIONWYIVAVpKOgg0uhghRKitUYtJqoSZqmTd971yF96UNa8Gzncn5cuPcovJpbj6HtHEomgFOAACsIr3DUDNfjNTeq+lCxmkV4DJjnowHyYyapsEHbEt7Vu+QWmw1EbnItMQ+gPdAzwEzHg7y5GGXLFu4tbzC72ibi14BEUJQoVjO9jXPrMXxWGTBDPsXaZIxipUNuscEB+o1yTmq0nQNMgEtHBzgyoHmwvMGgoYgF9X7gMKhpjZJJdzJ+2E+963Dr9CC/rozyPTNKNR3jaiL4D6vTGki6dsivGQloLkQDjL3+Qbj0jUKlw/Nzw6TCxh4nktS7Jwegvu2ggPyHJmttm5Yl3Flq8mdHyB4PeVeKRlF2XbVjA/C5bfcTlsDXTZtEyOcFyxqHl657W+siwJmIv58wDUXSNCi3rD1MqRcGjprBx22QyErLovClw8PxMLYIP7cd7qaGsER48mnTxWrQme01p1C9jKIE6EM+xf2zYaaOhfBreF/fIb/U4GPTArBBTZCNL3grl0F42vvTvqqBukE2vgDergIUKyOgpkGnETmxe/FVYB619Yip5IF1+m/9BejRrrwkmWYsAAAAAElFTkSuQmCC
)}
.images-icons-callouts-7-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAF1SURBVCiRlZK9L0NRGMZ/72nRNiSIpJShFKs/wGbzORhUpCJiMvhfJB2YEAPRQVIsZonBaKQ+QkgaRRvqo3Xva2jKdV2DJznL85zfed88OYJTG9kwxlpAdBjoARQ4QdnDliRTkVz1qnxBqZv4YGvd6mw0FMRDi6fF58O7UoLJ9jSAqUIom48lDZ4XLZwnHPAx3hHkqmjVI2yTuhmrTNzIhvF9ZIB6r0kHAy08lZWhg/uq9YjY3QZjLfwF9Tb46W+pZeXixWk3gcwbREe8IIC5zhAPJZvd2zdXYkYNEPOC/ALT0SDrly+82/ozVI0ZKpX/0lBbgLaAj7XLV69YDULGc82uEEcPJY7zZa84Y7DZdbvhgGGwtc5dyrdEdgy2JEEKTn8mGuJDYevKXQoAOXhdMkxFcqjOAHY16WusIXlaJF+23ZAFkmAiVnB+uTGUNaDJez9yIAnikX1w/lWA1HUzyDyYUVS7qDR+BqSRt2UmYoXf7/1Tn0Zph3iLCcBXAAAAAElFTkSuQmCC
)}
.images-icons-callouts-8-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAICSURBVCiRjZI9aJNRFIafc/MlDfLV/NS0kEzaKlJbBEFb0C46KNS/Lq1IQXCRDh0cBUUEJzepoIOIKKS1UDGtFDIoDl0KGRR/QE1R22ZoGk3TJE2an+86pF8TQcF3ey/nee+55x6hUeGVNlR1FNH9wF5AA1/QvMSSMS4GU3apbEOTiSE0DztMw7zeaXLI58TSEEuXuf0py/e8lUHrS1wIRepgDRr3OpV8OBXgR77Knc85HALX9jezq0nRHU2Sq2gLYYDB0LQQXmnDUYkD5umgm5ljfjpmkyzkKgB0eQzen2zlxJufvE5uAqQRq0OhqqOACZAtWwA46w/ApWpmvWLZRz6QEeFZ4i1w0O77aY+PLo/B3a95HAJX95nMpUpcia3V00TmDaDd9hqYWCpwL+Dh5oFmFFCyNFPLhT+Gj9btxlY9AH0BF5Gjfobn04wv1oov797BbF8Lva9Wif0qb6MKIW67gZCbxY3qNgTw6NsGq5sW50PuxjvjCosZ262XNTudglPVp+N2CKYhZEq6jolMKywZA8kATC0XMQ3hyREvh/1OelpchHt9KIEXiaKNpaBwvxY9kTiH8BxQx1ubuNFp0u2tbc67tTK3PmaZS5UAqiD9DAWjjSt3Fs3j2j/9VSmQYYaCUWjcVYDJJT/ICKgzaL1na+ILQAQpPmCwPfOP0P/XbztIswjzCVcnAAAAAElFTkSuQmCC
)}
.images-icons-callouts-9-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAIASURBVCiRjZI9aFNhFIaf77tJW5ObhETblLSiNim04g+FjuLkVtvgYkSFLg4W2kVcRMSliDgVXPwbnKJmKNYUoQgOToqLf4iE1MEa5TbVNG1qcpvc+zmkN14Lgmc7L+c55/DyCtyVNqJIawqhRoB+QAE5FPPY4ianYyvOqGhBmUIKxb3dPk2fPhBgKOylbkP6S5WZXAVLiTJKjXOqZw5AuqAHO9uk/vpYJ70+jSsf1rnzeYNLgzrXDgYBFUIwS6Yw1ryYNqJojTygXx4McHHAz555g7W6AmB8r4+7wyF6swbLpg1QQtgJibSmAB1gIOjh01qjBQG8+rGJVwqOdrY7UhjEhESo445SNC26OrS//Ore0ex7fdKlylEJxJ32caHGPr/GZMIPQMgrubpfB6Cr3bVQqbjcshyAF8VNLrwpc+NwkNKJbpaTUfIVi0pDUWnY7keUB0EexZCjzOQ2uL34i/6Ah5+mjUfCuT4f78sNN5iX2GTZVlVL8W61zteqxWTCT9G0eWaYfwaEeCJIf9uFRh5USAq4fijIc8PEUpDs6eB83M+ZlyUeLVUdbAVRSzST87CQRDArBTJ7JMJwpA3dI3i7Wmf6Y4Wn32sOZIEYIRVbcEduDMV9ILz99dYlxFlSsQVwZxUgsxQBMQFyFKX6thxfBOYQtVucjJf/sfT/6zcMp7SEtbiyTQAAAABJRU5ErkJggg==
)}
.images-icons-caution-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAA6CAYAAAAEJY9EAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1NjYzMTUwNTU5M0YxMUUzODgzN0QxM0VCNjBBRDZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1NjYzMTUwNjU5M0YxMUUzODgzN0QxM0VCNjBBRDZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjg0MDBCRjE0NTkxRTExRTM4ODM3RDEzRUI2MEFENkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU2NjMxNTA0NTkzRjExRTM4ODM3RDEzRUI2MEFENkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+hmiRPgAAB1hJREFUeNrsWk1sU0cQnsQhJDZJHFCB0gNBjdwCpQ0qQeJUO7lwTO6VIAIUVA4kUnuoigrpnzgVTlGjioZKvXFITghBG7uXXlogRRG0UZANUttAmsaNsRNC7HTGmQfrfevntd/zi1VlopHz9r03M/vtzOzsvq1aWVkBO/TnzB/FPL4TuQO5HTmAvAPZx/eSJA55Evln5DHkB4UE7njpFXCCqlwAogH5GPK7yG8XKf4m8nfIl5AT5QSiGspH9chneFQvlAAC8DsXWMYZllkWKhcQ7yDfQf4UudkBec0si2QGy2FwjcPyqpA/RP4E2WO6WVUFdbX1ULuhFmo8NeDxeLJtRBSi6XQaltPLsPRsCRaXFkARtq3I3yOfRf6CXqtEIKjjQ5wPcm9gp311XvDW+aC6Or8TEjgb8c9X74NMpglSi0lILqYQoGVZz2fIu5B7kdOVlCxpWAeRT5oypbcBNiEbI18skX1PUglIpJS58ivk9zBhrlRKjvhIBoHcvrmhGRp8jSWDYIQTySBZJFOik6y7IjyCEuMPYk6gHOBHw8nVnSTKH/HEXDaHCESh0Yle8eOaAYEg1OHPBPKrYj7Y0rgZamo2lGU6Wl5+BrPz/8h54z7yGwjG4lqFxgciCESNmA90QYjFYhAIBKCtrQ0ePXqkl91RNumQiGx4f008Ar2hkfoi1gmUGCmedUEIBoPw4MFqFb17924Ih8Owbds2rfcTyXk5gc5RCY9ekXDbI3pEECgfbDKPlBYIRPfu3YNQKKTtGaTLk5uDyJbjaxEaR8QLL9YJOrNDNBo1gVAKGKSLahOJjroKBIZFC/7sF43ymo1SgkAdVYEggzE9PV1QHhVoEvhvsm2ueURIvKjbWI8Vo6doEHp7e2FiYiLLMhgdHR0FwaAqlXRb2VZuIA6IF7U1tSV7wt69e7Os8gwdMBS6D7gJxGvyGsFOOFiFSSEwFLpfdxOI7TnldJ6FlB0QdMFQ6N7uJhA582SVAgiqTw4fPqwFAk2nhcDo7u5Wzx5m3Q1uAqE1vXm9Xq1nk8lk4e2u+rJtTtkCIqd6W8lklA9du3YN9uzZY9vI9vZ2GBkZUS/TzbpLqixLXR5SwD5P9Wk0RiWIyuWxsbFsjN+9e9d0f2hoCGZnZ2FmZsYShBs3bkBTU5PyftoMxLSbHvG7vDzORwYYKs8YHByEK1euwNWrV6G1tdV0/+DBg5Yg5NH9m5tA3BQvlpaXLB/OB8bDhw+f/z81NWUC4fr165Yg5NF9000gxsSLxacLkMmkiwbj/Pnz2XWHz+crCYQMhgXptrLNjWX4LXG90YjLb53V5+PHj7O1hSpnFAMCEe1lzuNyXKA7uAx/y+3p81vxIrWYAh1Qt27dmt13UOWMYkAgXaRTostrsQwfRo6LSetJSm/mUoFRDAiGN0iJkjZmLrkOBLog+eSXORM4GrdgHiVLMA4dOgSdnZ1FgUA6FNv7F9gmd7fqOE+YNm9pEbS5aYvjO9ii583+O1tZm7esmLbH0qKh8UTcsrawAwLJlkAg3cftgODUWiOCPJAztz97iqP2t3aY6IYDySTZEp1DECJrtdaQib5FDuUMUzoNc4m57G6znfCjd0kGySKZcpWO/LkTHXAqkKmnp1jeMVMCxaLHq/ERWC6W6CMwTZF5woxmiFNOfPd0EggjVk/QfgyHikeM7Xn+DkF7jLS9ZnksAMtmqhjzeBLpqehjAYZnkKv+hPw1SF/BqGMU6wtQcu64z2CHK2U/ohCRofuQP+ZCxy7Nsax95QChrDtUlOhh9bgPnaTrR75Vgoxb/G4Ly1oo246ay8cL6ZQLfXegLXfaCX8ZeZNRNSP/xXsdv/DIRzVqmYrMEYUoyvwNVBjZ9oj/C1WvQ7AOxDoQ60CsA+HQ9BkIBPz408aFTWxycjIi3ANuJ6atu3Hh1aCwVJfbxlmmiox7srwWwQ5qj6Atso0g2UdtdG8c2+MlT58o6CisnpD3C80kcD8KjjEQ9D2uC1YPl+2S1h5ZPYq2kEW5bNyLwIuDH2RDn/Qc6etGO8bRjqAgj9pG2f4wgx8SASoqNFj4MINwkY3qZ6+ICaPUJfwf1PTGcZYXkgBQnXg5yyCQzh5+ZpT1hdkbRBpWtNnKEaf5tx87TkyueFEy1gDhHP8e0dQd5xGPSLtdqlEzPIHOBlzmZ7oZDL9gg+ElfgbPMSCMGB4VG6VYO82dGmAjuqQwskstLC8m5Qsi49jxTgkIsrePPdoRIIwO+/OEjpi4gvwrj5CVXF3PyWdDvv3/Hn5v2CkgxoUYlXOHGDpGouqS2kHqRFCSqwuE4e59ksyj/P+vCo/tEWYZ20AMsCFd2PkoZWDk25yggtzxuJDkQnxteIoRUrc5648oplMd6hdmjjCPdNTwRmOGkMAYZT1+20DwzBBigcaM0MYJy5ifR4UkF4EX3x9P86gY2b1PmH0GigRilJNjjG0wPOEiWJ+r7NENw6KW4TQlyUUJ1xE65C8yNxRKoDEerPX9CCfpPwEGAPCBNEmYWeTnAAAAAElFTkSuQmCC
)}
.images-icons-important-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAA6CAYAAAAEJY9EAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4NDAwQkYxMjU5MUUxMUUzODgzN0QxM0VCNjBBRDZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4NDAwQkYxMzU5MUUxMUUzODgzN0QxM0VCNjBBRDZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjg0MDBCRjEwNTkxRTExRTM4ODM3RDEzRUI2MEFENkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjg0MDBCRjExNTkxRTExRTM4ODM3RDEzRUI2MEFENkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+lYRO/QAAB2FJREFUeNrsWk1sVFUUPu2U0h9aphADKgklirqwEQVZsMBW3RBCOizYaaDBRpSFrcqikgoVU1YCBlCbWilBAgkLpwt2CgNLFFPFBU40DAQFI5Sxw0yHMqWeM5w7nrlz35uZzps3relJvrx58+4759zvnXvuufe9ssnJSShE/vz7DyilPPbI447oqXDR56WIlxEvIp6iPiBq+VqUOEUEEd8jziCuukloWZEjog6xFfEaYmWeqi8ivkYMICLFjohiEVGNeA/xLqKhQB/vIPYhPkGMzSQiXkJ8iXjS4ej9DdGOCEx3IsoQXYiPEJ4MQ2VlUFVZDZVzKqHCUwEejyf5Hwn5MDExAYmJBIzfH4f4+BhY+DWB2IXopdumIxHU8T7OB2niwU7XVtVATVUtlJeX56TzwYMHEItHIRqPIUEJUxPKG28SMdOJCHqsnyG2ZWTKmjqYh1BPPl8h3+7GIhCJGXPlF4i3kYhJJ4god0DHTp0ECvuGugaoq62fMglqOJEO0kU6NdnGtksfERgNlBi/kzmBcoAXHac84KRQ/ghH7iRziJYzXsGoOFcyIpCEKjz8gnhC5oOF9QugomJOUYqeROI+3B4d0fPG74hnkYx4qYbGDkkCST3mg3xIuHbtGuzZswdOnTqVWxmMusmGJuTD+yWJCIyGejyEZLFEiZHGc64Si8Vg3bp1cOPGjeR5V1cXtLW15XRvJDqqJ1AqupZiVETcjog2SQLlg3mZT8pWTp8+nSKBZO/evckIyUXIlic9B5Evb5RiaGyWJzVYJ+QzO9y6dQt27sxM+AcPHsx5NqHaRJMtrg4NHBaNeLginVq0YBEWS57ck8uOHTA0NAStra2wevXq5H8nT56ES5cuwYkTJ2DlyuzrMyq6/hq5qVegy3B4hNyKiBZ5UjW3Oi8SLl++nCSBZMmSJbBp06YklPT29ubmOFapZNvOt2ITsUqeVFZU5ld9iSFx/fr11G+KBnXMdRYx2F7lJhFPp01peRRO1EHVYTs5dOhQMo9knU4zbT/jJhGL08rpHBdSNF1SB6VcuHAhVU9Iodnk+PHjWXUabC92k4i0ebIsRyL6+/vTpkvVYUWSLocPH07mE9tMn2m7zk0i8hZ64tSxfGVgYADckqmsjNKqt0mcxiDLrGFXH7S3t8PIyIjxGs0uGzZsgLVr15qX6WTbxrdiR8TNtOVfpjNpcv78+dR0qUtTU1NyyPT19Vne393dbRw6FrZvuknEr/ry2E6OHTtmW2ESrl613rmnPBIIBCyX5nqZ4ubQuChPxhPjUJt6PZEpwWDQtpNr1qzJajAajRr/J9t2vhU7Is7Ik/i9MSx3Jywb0zKbhsBUhcrw9evXG0tssm3nmxvL8B/x8HxqHwKX3/muPgsV2sscxeW4kJ9xnfGc29Pn0bRiKR6DQjeB8xGyRTY1GSzFMvwIIiyT1t1YxNVo0BIlbcwMuE4EhiDF5L60CRydG4vHik4C2TBs7+9nn8DVHMF5ImPzlhZBC+YvdHwHW0be7X9uF2XzttDt/GY8fAtp2/lzwVvnLdJ2fhjG799Lq6kQryIJgUL1O/Gmqxsevu/8b1Xo8UB9TT1UZ26nTXk4jMZGk+9H9cITSfjYCRtOvfL7HB6+i0xfChb3lR/V5W859crPifglR7azrq0ZCRSLnpopvgSmKTJh/RJ4O9uG6RIRKV2IDxA9YPVZwNzq5Paa7WcBWDZTxThTPwuQQhuo/aC9BXNAaHagD0XOalO5I8qLsTFDjtLi4kMudAqVO6yrSSfBSXHrY7LXES/kqZrWM7SG/woxalPczQgipCzjYUNb7rQT/ihinqqaaVXOex0/8JO/kmOVO+OIKIpMGyL+LzJLxCwRs0TMEmFLxPLlyxvxSAgxViC88HAHali01f9X50rU/VIauV0j3yOXy16+JiWg2dJF2VA+W/kofVF2woxGg94wEUG1+25GD8/hzdyggW/2iioxwPWAbKekE3FA7RohOgwd2cjONxsqRXV9v0E3CB+/Qfi4/TKtqm1m/WpzWdkJMHYb9AayldjN2tEknex8mDvg5YVRBzvaxsT5+Wmc1Z72MF8/wNd3sU76b5DbDPL5UW7jExFn8m0F69HlKOvp1Gx3llsoURuzrdoRDOE8zJ0cFtdVJGzkTgT4t59J8Mmw5OtDIpTVMAqJSFHnPhEdJJsthlCHYRgoPcrXcDAYDCCGTUR4ReeUUR+fhwxjlxw5wk8mLNqEtPFLor6QXaoRe5Z1gJZHTPIO2+kRxOg+fcr/HXFi9TkklHn5PGRot0UQ1SKiyZTs5lvYUgl1kDsIWdoNi1ygR5iK0t3cZvNUiJCh5Bcdled6J1s4qaokKKOiQ7tH6fpJc7rNYN8qGmQC9Gn/S+lh3b5CiQiLMPWLJ23KE6YEqmYOFfZXxNP0a+39bKsZ7L+X9LEfLQJhESkmP7yFDI2QGB5ybIdzHHJ+jpCQ1rkDYP0JYI8gz2sxBL2CNIVBm6gIiOk8a0HlRuHWaJFfSi7qs4XZEpvlXwEGAPpwDQ1H1ENYAAAAAElFTkSuQmCC
)}
.images-icons-note-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAA6CAYAAAAEJY9EAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo4NDAwQkYwRTU5MUUxMUUzODgzN0QxM0VCNjBBRDZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo4NDAwQkYwRjU5MUUxMUUzODgzN0QxM0VCNjBBRDZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjg0MDBCRjBDNTkxRTExRTM4ODM3RDEzRUI2MEFENkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjg0MDBCRjBENTkxRTExRTM4ODM3RDEzRUI2MEFENkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XPiqzAAABfRJREFUeNrsWt1PHFUUP8tuKeyyCBpDxQS3saE8WFOiPrvqA4/0DzCRphgbeRASfTBtFPx6IRFNfGlMA01846V/gFbkEaUljQ9KAqUkYhOtULYMW9gPz285k9y5O8sOzGcbDvllmLkz5977m3POPffsxMrlMh0JUcKtgrV//gp1Ap3PPh8NIg4gLzDeZLzG6MYcGClp2wKnjEXGr4wbjLtBEhpz6xp1LCLNuMB4m/HKAVXPM35gXGXk/LaIBp8IbmZclrc6cQgSSJ6ZEB2XRadv4gcRrzNuMz5ntHugr110QWc2ssFSdTPGx4zPGPGqxliMmhqbqfFYIyXiCYrH45VrELhnsVikQrFAO7s7lN/ZJhuXPcX4kfEp4ys8FkUiMPErEg+sDTzpVFOSkk0pamiobYAg5zj/pZpTVCo9RUZ+i7byBhNU0Pv5gnGS8R6jGCUi8Fq/syMhnUxTC8N88479lQnDc6nmFnpo5ChnVMVK9LXLeN8ry/AiRlxiXLRaQZza0+2UTrUemATdnaADuqBTk4vSd/jLJy+dCIw/qTEBMaCNBw5T91IQPzZy65UYoghc4y1eQn8JjQgmoYkPvzNeVOPBM61PUyJxzJfIXijs0v3N//S4scR4icnIh+UaH6kkQFrZr/0ioRLQWDf60ARj+DAUi2BraOXDiponIDDCn53I6uoqGYZRsz2ZTFJXV1fN9tzWph5A15HCs1Xkgl41zqskIB60VL8pW5mdnaXBwcF97+nv76fx8fGa7ejLeLStugjGMiiZaKBEvGN5g5wnOFkdVBJqTXZ6eprm5ubqribITTbZMhQZcENEwyHcIsOHXnVQIMILSziIIEHTyH9ZxhZYsHxDPWk63swJULzuQ16SYCZd6Hu/sfntGq+qJ42JRscPDg0NUWdnZ+X/jo4O12Sg720y9LFNBkXEaX2P4FT6+vqop6fHu+W0uu+eIF3jhCWdbvCrpOFgp1fd94kgibCsk7EQibDpOx0kEU+kHIYIS/ZWLpVCG7xN37kgibhn2f6FSIRN3/eCJOJPfXscltj0/UeQRMyrJzuFndCIsOl7Pkgibqgned78lErFwEkosVug7/3G5mtCxVvdFc7pb5n7DWzjjbzhaPe5vLxcfy+ztuZoHCjuaiWE2xhb0LvPa+rGC0Sg0FpvBzo8POxIOXam+64WQr4mU2EVZvALVNthCjNupUZhJsMWsRloQiUdfm0ZHA9sO2/4TgL6sCnvT7ghwW1miarKkk6Gn8spdG9Wk7AkY6FQiJCqMYoMRXWgG7kNX8gwdWsVbPQ96LaC7XqvwQOY4cOYZW3ffUT3H/zrqZtAF3RCtyajMgYKlQgR/BZ5xfKaikVaz61XgpqbH5DwLHRAF3Rqgj6/9Ky24cXehzEkui5UBVBOepIOfgTWkyXkCVgia7jZVemzHCUiTF99l3FHXCVuCXCy3KHGiPLavp8FcNqMjLGGJaEfXz4L8OPTIRRQvyftVzAPZEnI/lmLUxSVGKELBnqG8YkkOm5lXXSd0UkIuzDjKNDT3uc++JJuhHHzEDpuyrMZ0bXtZ6Lm91d1qpwUt0HJHZXw5xgt0vaQ8bfUOn6TN3/H4RL+2BHhi0SGiCdFjqrYR0QcEeFfZtnd3Z2RZW5jcXFxQbmexZGvzSjXUMw5S3tf6OIjMNy/Ic9nbNSjbUWe0WWGdUcqxcaHI6MYNE+0lwe3oiRXlaAsJAzQ3sccbdpERyTnGLWbrKTtdslULKqugQlO1rCarNI2KjnFqPLMXbk2IvcsaOfqNRPRcg1FYAlZnvQ5torrWtsHchzjtm/Mt833PhArgatMaZZiulTW5lqkg+V1IWNSYoEqZ5V7dNOnGvFBl6zsOssU0Y/S1bd4Xvx5wqaNtPhgd17P4qYei+VTVgiY/oAyedO/SeoJdi6z4JCIMQWRtQhTxoSINu3aOYDd5pZMPGsuu4xvHejNaEReE3KimVCxVZguol5bkUg/I/FiQCaGmNHrcEIZWWlMZLwac2ibLiRhIIePbkk/2n16Kf8LMAAtkUg4zDNlVAAAAABJRU5ErkJggg==
)}
.images-icons-tip-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAA6CAYAAAAEJY9EAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1NjYzMTUwRDU5M0YxMUUzODgzN0QxM0VCNjBBRDZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1NjYzMTUwRTU5M0YxMUUzODgzN0QxM0VCNjBBRDZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjU2NjMxNTBCNTkzRjExRTM4ODM3RDEzRUI2MEFENkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU2NjMxNTBDNTkzRjExRTM4ODM3RDEzRUI2MEFENkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+0VqpogAABjtJREFUeNrsWl1MI1UUPqVdtpSfQIJhWRNENEgI+BNWeAOqCQm8EJ54kawEjBt5gE30AV1XV8QXQ+AFo4FNNMgzwgsJweXnhQQtaXhZtskikiibiKG2UrosLZ4z3OLMdO6ltDPTQvolJ+3MvXPune+ec+65947l+PgYEsGff/1x3kdeQHkL5U2UcpTrKNmsbJ9UonhQfkF5gPK7SNn1554HPWAxiYhclC6Ud1BqztmEC+VHlPsofqOIyABjkYVyh43qcBwkAHtmmOm4w3TqDiOJaEBZRxlAKdBBXwHTRTob9e6szQACLCj9KF+gWKMKLRawZ2ZB5pVMsFltYLVapXsEctNQKARHoSM4fHYIwcMD0HDdl1HmUT5D+YoeS8UYQS/+HYsHCljxpbPtDnDYsyEjIzZDDIfDEAjuw34wgAQdaVWhuPE+xolQKhFBw/oNyq2oSOnIhRyUyMifF9THfwN+8Af8WsXfonyAZBynSoz4RE0CmX1BbgHkZufFTULEnUgH6SKdKtxibaeERVBg/FkeEygG5GPHKQ7oCYofXv+eFENkINd4G61iKZkWYWe+apXHg/ycfN1JkKI7021V6qa27+Og2JNJxEcoL8lv5GE8sNmuGDYvk25qQwXqw4dJcQ0cgTz82ZLnCRQYyZ/Pwu7uLqyuroLL5QKfzyfdq62thbq6OigpKYmpff++Tx1A9yiFRxfxm51HdMpJILPNiR4pBQKBAIyNjcHo6GhU2fT0tPTb2toKXV1dUFFRIdRFbQWeHsinVupLN8tETbWINfx549Ql0BJERGxvb0NHRwfs7OzEpH9kZARaWlqEdWha9e375LfW0SJeMy1GIAmlchJoinNgwhQPCQ0NDeB2u6UXl6Ovrw+Wl5eF/aAETTU1v8r6ZlqwdCqmjqtZmDFauZUHBga4ltDU1AQOhwPKysqiyrq7u6V4wn0BzFKpbVHfjCbihvwi05bJrUijurTEn+Ln5uZgY2MDhoaGNMsnJyeFHdFo+4aZRLyint95EJFA8Hg8sLKyIv1qgQIrBVlRbqFChZlEXFNkNIKF1MTEBLesv78fZmdnobOzU5o+eXj48CG3TKPta2YSoZgeLBwiRP5NwbG9vV2KDwSv18utu7m5yZ/6otvOTbUdKqFJT01NncYFqneWCxmJRIhQZG/H4bBmJVGWSC9eU1NzpukTioqK+Mv06Lb9ZhLxRLH84xARyRN4qKqqOsmC1teFjVVWVnLLNNp+YiYRj9TLYx7a2tq4ZXKLGR8f16xDKXdhYaFwaa7ChplEuOQXh0eH3IqNjY1QXV2t+YIRUNDkzS607hBBo22XmUQ8kF8EcfETDmtvHdKsMDg4qDkTUJCkhKu5uVkzWPb09AgXX7SvSW2L+pZyiy56YUqZYwWR0Nvbm9qLLoYfFFNlMAAiYuvr62FmZkbTTeQoLi6WLOgsEqgtalOF75O1MUMnUPnn3ZiJrD/m5+dPF2MUM5xOpxRTIklWHBszpWgRPlOJYGR8CieHOaeg3eYsuwOMxAFawp5/T337LpIwYHZCFcHXKI8VI4WjJJpOEwXp9kWfcTxmfYFkERFk22MheUe9fq8hZER0q06+qO1utIZgMokgLKLcU8ztz57C3//sSiaspzuQTtKtwudIwmKy1hpqfAkn557/D1MoJPkxBbVEYhE9SzpIF+lUgdocTLTzep7A0Jv2MJ1d6phxgEmPI85DYJoij/iHwD2JnnvqNWtE6UT5mLmK9mcBV7Ok7TXhZwGYNlPGyOkfmYX0WYAeJBhFRAS0gToGqlMwHUCzw3soC3RxET4doo5SCnmXJTqJYo/pqo6QkCobMzEFejj53Ie+pLuNshaHjjX2bCnTdWBERy1J+LzwReY2tOVOO+HFKDmRNRTKDtvr+JWN/G8iZRft80LDkDJEXBZkpClIE5EmIk1EmghzF11clJeX01be65xiNyvzejweN9al//my8i28v3UpiGAvuiBYkyywPQ36T98/NaqIvI1kjFwG13Czl3SqCBB92UJpNR2R0RH5MLOqi00EjiaZ/SKJ7J7iWos8LP+JkQgC17pQrhEPbqIV3GRu4j2DtEtNxLvMLcgq7l2WYBkPnEZbQTqPSBORXoanLSJW/CfAAIBEnqOl1qg2AAAAAElFTkSuQmCC
)}
.images-icons-warning-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEIAAAA6CAYAAAAEJY9EAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1NjYzMTUwOTU5M0YxMUUzODgzN0QxM0VCNjBBRDZDNyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1NjYzMTUwQTU5M0YxMUUzODgzN0QxM0VCNjBBRDZDNyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjU2NjMxNTA3NTkzRjExRTM4ODM3RDEzRUI2MEFENkM3IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjU2NjMxNTA4NTkzRjExRTM4ODM3RDEzRUI2MEFENkM3Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+Jdm7mgAACBJJREFUeNrsWk9MlFcQH1hcl113WaioFU2pbbCH0i6pTfQktvFgopGrSQ0QbUpqFGlaI8EWKIUYewA8VNC0aNLEk//iwUuR7aWXVkNID4XESBNpjdTuwgqLuCydWeZb3/f2fd/uwv5Lw5DJx/f+zLz3ezPz3ptv8xYXF2El9NfkRDLNX0P+APl95ArkzcgOrpshcchjyL8i30X+M57AzaVlkArKywAQTuQjyB8hv5ek+HvIPyJ/jxxIJxD5kD4qRD7Dq9q9DBCA+3SzjDMsMy2ULiB2I48gdyAXp0BeMcsimdXpGHBBiuXlITcjf41sianMywObtRCsa6xQYCkAi8USKSMiF11YWIDQQgjmX8zD3HwQFG77JvJPyK3IXdQtF4GgifdzPNBX4KQdNjvYbQ7Izzc2QgJnLf45Ch0QDhfB7NwMzMzNIkAhWc83yK8jf4K8kEvBkpb1O+SGmEhpd8I6ZG3lkyUa37PZAARmlbGyD/lTDJiLuRIjWmQQyOyLncXgdLiWDYLmTiSDZJFMiRpYd05YBAXGQTEmUAxw48DJ1FNJFD/8AV8khghErvEhWsXPWQMCQbDh43fkN8R48IqrBAoK1qRlOwqFXsDT6X/luPEA+W0EYy5brvGFCAKRC+NBukCIBFSUTTokojF8npUYgdbgwkeTHBgLcXcwo/Pnz8PGjRsjvm/EVE/tDE9qqMMZC8ZnOCZnNiyiXjwsUTxYZzcfx9WrV6GxsRGePHli2o7qqR21NyLSZdHHIBrL0WwAUSu+2HGVzHaHYDAIp06diil3OBywa9cuZR9qT/2MdhNHrPXVZRQINMFyfFSJg7LHcYmenh549OhRTPnhw4fB6/Uq+1B76mdEdECTwH+Hx5Yxi9gjvtjWFuKJ0WLYeHJyEs6ePasr27p1K4yMjMCWLVvAarXCiRMn4MKFC1BSUgI2my3ajvpRf+Xg8ZRKus3Glm4gdogv1gKraeP29naYnp7WlW3btg0qKyuhrGzpGl1VVQU7d+6E69evQ1dXV7Qd9aP+RqTQvSOTQGyX7whGNDo6Cn19fQkLLioqguJi/YWV+pMco/uJRG9lEohNuuO0yUWqpaUlcqtcCVF/kqO86cXq3pRJIHT7ZJ4JELdv307JQcpIjkK3M5NALIv27dsHd+7c0V2e9u/fH31WVFREOBu0XCB0d+LFcNiw4YEDB6L/T0xMwN69e+H48ePRsvXr10efdrs9wvHkxNEdyCQQj3U+bAJEZ2dn1AJou7x48SK0tbVFjtEJZ3ywP8lRxo9Y3Y8zCcSofD023F62b4eGhgZd8AyFQtDf3296CtUlHbA/yTG6mkv0RyaBuCe+zIfmTRu3traCy+WK/O/z+aC5uRncbrdh+8HBwZe3WexH/Y1IofteJoG4K77MPQ9COGy8RZaWlsLp06ej75cuXYqY+tTUlK4dgdTR0QHXrl2LllE/6q+iMLoF6TYbW9oTM3imvy/eN1wOl+ntk8yddgTVfcOI6Pg9NjYGhYXqzxmUy5ye0Z1YRzaXlr2b6e3zivgyOzcLZqDSZM6dO5eUAmpvBALpIp0SXc7GNXwA2S8GrWez5jvXoUOHoLe3FzZs2GDajuqpHbU3ItIlBUofLH0ahIy6BrvHl7D0MedldsRZHDdLtVIKoiX4Aj65+Ct0i45sWATRt7CUOH15moldqZQSyZ6OtbwHPBbIChCcNab02II4UH/AnxYwNNlSBpt0H11JBjtVdw1KL+kSBvMvnsPTqX8iJpxKdyCZJFuiNgTBm627hkz0LbJfvjqTHwdwe1tJHKK+JINkKa7zpLMzFRNI1acomukxlndEjhlBPPTYE/gILB+W6CMwbZEGbkY7xLFUfPdMJRCar36M/JBdxaILcLiqBArlGCm9ZvqzADw204nRwJJIT07/LECzDDLVX+gkDdJXMJoY+XoQlh07HjDYQ7mSj4hHNNBK2tv5oLNS8rGsynSAkO4MFd2G6IBDv6SjT4P3lyHjPvctZ1nBdA02L8M/L6RfudB3B0q5U4LhVeR12qkZ+W/OdfzGK/8wgbNMTsaIePSQ+QfIMVqxRfxfKH8VglUgVoFYBWIViGVsnxUVFZRn9yD7x8bGhk3KyvmgM85MVM1PaqOl8bS+8tUdTPrIsquFflodtR2m5C6PJ9IG372KuURkiXWJWsSQdJRt5fcBRZk2SI/Qr0ZoJ5YPCQclj6RL/HhRy2W1ivHUCu/lRmNGEOpYjzbuISzzIdckBASi5ufVcWMnj7RqHrYEECZ7k5+N0kRkGuZTZQ9PQP5qcxKS++W9W1oY0aqrhbom1tvEVuROxiK0VH21YF7jQpmHBXoFc67hyd7kCZVLMv3c/pYwEbGOuDsJIMZ5LKoV1halCRe2h1yCnvhehc/LyQCh+dJuYZXaFWXapOp4YleEMtkqPJJ7eaXVbec2rQkCcZPBGODFknVFdZCbIJPuG/xMDAgOiOO8ygcFxV4GYbc0mYPSymrggGKAZCmXQcpzssuQvDaFNamI9NQziN2KOlC4gcfI/cy2T68wIS/Hjls8yGqOwsP8rpknrfYNIfLXSDGiXqhTUT1PoiZBq/AygHXC5DVdUaskd0DeI5QnBcQtBSheAWmvFDR7OChpAVG0FFBYVZ2B3/cYBTQDalcEQa3sJLkCcivygFkwTsQioqCwBfgloLTA1Mt9vILZ1ykmpdV1G0y43WzlDHa5eqlsnBdEA72Nx0ILUZWWa3i2fvMkTDqRMboZsNV8RDz6T4ABAG47IHJdI7QmAAAAAElFTkSuQmCC
)}
.images-lambda-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAANBAMAAABiGeI2AAAALVBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAOrOgAAAADnRSTlMARM0iq7sQ72aZMlR23WfWXUgAAABBSURBVAgdY2BgVGYAAVcwKZcAotgbQCRnAIjkegYiGSpABLcSiNxjZwBkOvAeYGDYxMBzgYHxGgPzYwbeBQwMngAIQAngjcpSMwAAAABJRU5ErkJggg==
)}
.images-lambda_calc-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAK0AAAAVBAMAAADGGHNoAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAIrtmRO+JmTLdds2rEFRGWUnuAAADCElEQVQ4EaWTS2gTURSG/2QmmUwyk4aKhVKhcaMrZbDQSkDNot3UQiOIu2KgIFiqjKgoFTGuiqtWUFGhEi1UCbRWu1Dqg/hY6cKxCEVFOlAU7MKm2pWQ1v9OEjsJSSl64D7O/52cOffcG+B/Tf7HBMFIjR/uLugLNXC9UQECL2238sNxjg67NWevWc7yohz4rxZ9eakcAJvdX/JkHawUFndokUTdGvf9Jf9QaVNaVXdeLeXIZVox8LVYw+5gIUyJSdjpwrI2l+UIFfS5yBov7brExmuV3OL69/hDqQpSlretAL9WxAi3TkwzYnKZnCg5qlnaFVfmbWg5BrTdnT+FnUKcjZ0BPsXSyCxAHxgz9P6UnkAoTtTCESQRaDbTC38W+miGIvzOF5Qnwh4KQTUCz9BohYcDiYt4TMEzIq/A8wDRz/Ehq9HqjvuVpDQMzSDbwXGcM9H7EXkZIQNNES9FSMtidplqsGLN9JpYAXoIQmk9j5AdTm5DANOYszb5DM2EPwnoUfIemCBywuoieI5vFNH5VMwuU42hCKSEEhV5cwTdrB2LmXviScp5fAeaLZ+NIBsYtMlvjEMgJ6wD4d+ZFEU5e5+z21RjkXnzgR5mQ57kHBQTbwFl0hns9R0W7eR1Tly/GhfICeuHxi1tP+ZsLmX9Zb3BXKA1Rv0AxyOotrWd/chymLilsxksWkkDW4h1Nk0gJ2xKZ/9o8gi81NymGj72NytFhHidYxrNH+KsclcSUijtybfjIOhqNjBBvA9S2kvkhC2182wS0JHikQldphr82CUrfOILxVccR/BO4bmk+Sj2+pNazsQVzy++mxQgzryXfw6JSITpuaQ8SYWXB9zkWLPAhWsYzJwHDq/+jKCNQIlpEwj23kZfLIKT6Tc2ulp5TypfoDhzcHQcAjlhAzbGGLWOzaT0hgQ+Vo+QWChfkz9eHa+nikovQ6n2S186ZANbeYvrJajBmiywVc7Dr4zwivYE2IPBSrIB39OX6WNYZ5VQKWPwORCcrQI3KIVrXcIeJsjWSvIHFVjKpIC2KJsAAAAASUVORK5CYII=
)}
.images-Linear-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgIAAAAtBAMAAAAuDh41AAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAVIl2ZhCZRDLvzavduyKlp1aOAAAIKElEQVRoBd1Ze4hc5RX/3Zm5e+8+ZmZjgqBr6sRsTFD/mDRrSq22dzcTKCvVaVgsKegOZIO0hTIViy1tmvEfi5Ww0xLtlkI72ED9c2MqohGcVlJFaBhpah9Qe6n0AVZ2q5tmQYz9ne++55Gdmbtpsj2w533OPffc7/vuPbNAHMhY3UTPBE7FgF1nrsvMVviyb4eF/vh3u7ru4SB5I2CFy+QFf1qQA47Ck3qhTZk7hd4XNiRzYakfPnOmm6hkGdrEJxxPqVM/VIJWVfKXLJJjDh8oFLcWus518Gi7Dty3l04Kuc7/hGa5rCKHwkI//NBoN1FDwBEMVZSr1JneVIJuK3FEiLGo+EARiJfgHnBtHm3XgTeupZNCrvM5oOayioxUwlIf/K1dxWxhFUg5tyl1zhb9sIPCDVi+DKUIxB64Nh3QzzNeIS/PRWDC44WaT4al3vlMd/FvAaswqiq/1HlDcKUxYdVCcHVKEdh74Np0QKszXiE3j8kijkVyPhuRehbSOQnZUrCFuPC9i5MnZ8bK+PyWw5j+IPOjHFBF5iJMeR4A6zzw+k4YW4FUYQd+ASQnrsOjDf0nwJ7JGhXGGLRFZVQBzUib2IXN9+yzviaZCntAuvn2wvMqc8h381QF+m1Plx2kaixMfeGWX1kYDHkBS3ZE7FWYLzLCyA3kQ4H6CuYtPvAv43PAm3iOpipMdoALkMC6wc04M1jhzngUvO9zOK1bC/g50tbwIhU0DeeVUQU0o0M4qH9nZXgHQzJn9AsMpYjrmzowkNerPHAsRguSGtOj5qjwWeoC4CXjwGkJTpT0SI4LmC3ry3gAS8DBh4t849WbOrAAlJeQqOk7MlWk+NyNzDLfiNMYtqigabAiRuD+fCSzCHTPPsKFLSFDFs6TGhTvaurANHABzMMIQVLjLThQzNrccywpAHdpBoqeOH1V3M2P/iD4zwJS8UXM2jx99MJn2PsfUsEOZHgO+LuA7QFuRnauUEwuYtDic08swsJxDNpU4Fb2TozAcJmeCvz0dJ+tDOTkpnC0aNSFUjzldOCYFPFbRhyHFDcrsYKkxv8U9uOb5KMdwCvi0y8kqypSeyGSwO3A9TbXQOZPNMl6vOB9ADTYljqVC2oHclUu2TyeRkZh8ax4XC3ZX3L/LNn0adqyohHDjRhkZ/ho75TbJ6XILcbMPjCXtgx8WxQKaS9QJc1tSXqb+PQL6UWJfKOpULcDq1gykBzK0aMqm12eLqHBo4+cVi/znahn/2bPI9koZ4tmxVzGXQYVOI9nDTFi/A4kp8rJfRUV6SC29Weyv3CDwfsZGhW6JOkksw+yRfLAp0QhiDXKS7F4Ti83VYt5W5z6hKwlgb/DY5F4pwNchDfO4DldtsFb6ovIzsipyDqHWVsil+cn0mdnUxgsfjFnZYtJ4En96RQVOJ/5/j/EmK7sxUnUTybKofwjNhvIXY6bktiKe22h09wH+UgHcFbdOPcGZIOoGp9BqvIaL3NMlAFwW3kw4zEOtaJiO+moLdqHC5YQD5748Bsv//6JDypjk28/eOeq+dOvAgU+8907Ya7Qhx0Y4R2Zc0V9vFAcnoSx7WOnitqcBTy06Z3bqcDU5LWWGB/HSbOO1bqXWdHM3AQwTvax/Ujs/qSi4zDHi9EO/H2fRZ9XJUSQ1HiA58A19wC7RRnAUMnnDwuXtD05MkF4yijlUdcV3O96aaTsQLarIOBunEmVjBOlS7jLvvaAmZthWRQKhSy1EE92oE6kbZ+YAccXPpo/EjmgWR7Xkb7U0RI1JCqO7HSgeCRq7ShdY555pJT+7qLuhrdxPBHStXRAN6hSKOQFw3Ild1hLSYcehLkAji+EbymsUC1gO3C/6aBvUZcczddJGji+s8XeXjEweQrbd2E7N1FbSNS0WsjQ0oHBqTJPfkFh8Ne2O6wZfGtqOaCGLcptTmGFuN/WgB+sYffNMw43StLAeN7Xx2O0bR8PJ2iEBeET+zwUtuz3BHdYy/ybZ7MF5OXAJpxVWKGmMzMw+Nz7Ptc9s9i9a4+evWZ2hzV+xWPgNblWlX97Jqv8LWMXh51NdtN7s83AA8ZuXPCHNT5H/S8/LqsOqNGEkwdfr/ySiR7ZbQYe6d7GBX9Ye4/3kLl7RT7e1WiS4uRRnobpfj9/5TRBzdAtAw9kB/Hd9tGGg2Wp2+/AUyLhDtUBGU34iTRbOS66pgmiZeBxOyCuGxH8Ye0pZLgFjsj4okaTJU4eaohoOge8kS8YeJDZ0LvAH9beQ2oU2CbngBpNZPIgA/ckDHZB68Czsc8Bf1h7H+kGtJIaX2Q0UZPHWaTs5gmideBBP2/Dq2PDvFN0hjWpZgWJAzdxCcj4IqOJmjz+yiGiaYJoM/BATtGNCfOWM6yxel2d53Ib3vgivIKaSzuTX3c2Xe0W7nwXTP6a5oA3vniyP0F4ilb6Yqtqo2iCDmjy25EDJY9xqD9BRNVhqdvpOBxzdfAGzwEXkssehxmfU4w/QUTVYelokCes3gC8FtQ4XAv4nrnZcs8hPQRoBf6gc/lhMBfjGiNxgte87kM4tKbPOjgsxXmMifo6VNAxxc34n2yyezsW0IXB/UdYF579uMx/WOknrNeYN3sNiPi/EpHWWxirrnfGNvmc/3u1MXSnCv0bvLuAHrzSo+pHmx4i+nKNuZND/23o6/KXCkoXzdKl7Otky8Y5CPlpfRnXqVHgpHL5Qf79FAdOxAm+GmL1hZhV/MuOmeBKh6fzMSswajETXOnwrbEL2Bs7wxVNYDZiXz4ZdxXFriBWgneLscL/X4L/CyeU0JG3k3upAAAAAElFTkSuQmCC
)}
.images-percentiles_error-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlIAAAFqCAYAAADRHrQuAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3gMOCi8pHqb/ywAAABl0RVh0Q29tbWVudABDcmVhdGVkIHdpdGggR0lNUFeBDhcAACAASURBVHja7N15WFTn3T7w+8zOwMCwi4i4oyKgAmriFo1rlqY2TdLFpO3bNknTpFu2pksSkzZbk7TJm6X5dcvaLKZJ+mZ1iYkaowZQQFFxQRGRfRlmmH3O8/vjzAACKirLzHB/rosrZDwcznzPMNw83+c8RxJCCBARERHROVOxBEREREQMUkREREQMUkREREQMUkREREQMUkREREQUVkHKXf4wpkgSpG4f2qRsfO23/0Wl68xf7z36FHIkCdL8t9B01msXZVgKXsAfntmKRt+5fm2Icu7FH3MkSKYr8fK2Jy/o+cpNm/CbhWkwR8cgMesGvFzh7qhr/XvfQmL0Evy90qs85KvGa1dEQZKm46EyJ39KiYgoaGnC4lnEr8TtP5+LWBXga6/CtldewPsPfR3HzQfw1Z0Z0PXH95Dr8H933Yrf19yPb944H/HJV+Iv74yEJeFimKRwfGn4UP3WL/BgKTDj8SfxrRlqpL2Tdp7P143y52/BI4euxNbjd6FkyXjc9uvVuOqtZTA1foRf3fQhMh8rwffS/S9HdSqueeI+/OnDu/DAL9fi+x9fj5Fq/rASEVEQEiHMdeAhMRkQmP6MOObpfNz2+Q0iFhCaZe+LVuEV9Z89LL45PUUYAYHoqeKbT+wUrT4hPBV/EdmAwLw3RaMshBAOcfDVW8TcVL0AIGCeJq55Yodoad8l7hgN5TFAANni8U8f7/xaV7l4NBMCmCGervAfiGOXuHM0BAwrxdv1ntMeQ0+nP153+SNiKiBMVzwufrMgRiDt5+LL4p6PFdh9wrLrBXHjvNHKPmAUo+f+SPx1l0X4RO/7KbB3Owz3AfHwVAgYVoi19b4etXKXP6rsY9U/xN9uzhfxgEDkVHH9vw4LZ4/nZBEfrNAKzHlJ1PhsYsv34wQy/iD2O5rEJz9IEZFz/1ccdnf7El+deHOZXgDTxGMH3YKIiCgYhcccKWcDjh+tQEVFBQ7v3YxXX9iAFgAT54+D9viLuG75PXi7djGe2boD//kh8PbtV+AXn1nQvUPlOfw8vrX6OWwz3IS3v/gQ903Yj7W3X4MH96Xjttcex2wJQOqP8OqWV3HdyC6DedpxuPpH0wHsxr831cIHwHXoHbxzHIhaeQvm21/q8zF4z3C80BqgAWD96DGsH3cHnnvkWqQbez42qvldfP+Sm/D/ClNxy7/ex/v/vBFJBX/HzYt/jA8bZUi97Ge0ttt41MlPsXYfoJp1PebH93yZSFq9so//3o93kn6BF1/6ObLs+/DKT2/HxpaevT9JAiBkCACyTwCSQMtnv8aP3ojDqqnvY3m8GuqYybj2+f1wAIAqAQtW50PCXrz5aQ18/JuHiIg4IjVAI1I9PqJFzuq/ilKbV1T/c7YAICb/cb9wCSHkun+L+RKE6doNornbKIuv7agoKSoSe47bhE+4xaE/ZQoAYv5bjUJYPhKX6aCMpLh6jmZ5jj4jcgGhWfRvUetziX1/yBCAWXx7ffMZj6Ht1GGYvh3v2HtEsX/Yx9PjMZ+ofXW+kAAx9p5i/+hQu/jypmQBaMWyd5uEu5f9dGfd9C0RDYjRd+4SDtHL8w38/6Q1okw5UPHaxRDAZPHH/a7uw1ui/NFMIcV9V3xwfLd4cDJEzOX3iutHG8WMW38hpquNYvkrFeLgC3OFRr9UvFmnDNU5im4XaYAwr/5cWPlHDxERcURqgIz6AZ594y289cofscwEwJCPn/3xh8iK9MFS3QIAOPDbKdBLElTJ38FWAVgPHURzt2EO4TyCd+9bjUUToqCWdJh4ZxngH0E52/xqTdqVuHE24N3+KrbXH8OHb5QDCatw80WR53AM3r5tOzIbI7tP/Op4zIvmo/UQABInJkIZaNIiflw8AA/qT7R1ju70tp/A6FzzSbQBiE0zn3kiXVIGkrQAJAPMMVoAPnjl7htpMeHHf8W90zfjm6Pz8Rf9tbhe90/8J/53eP7yBhzzpWPRrFFImzUPo1z7saNKuUpAY05DLADLiWZ4+DcPEREFofCYbJ6Qi8uvvgbpGg/y2j7CpJ9+itvv+ABXvPE1mNPiAQAT79mI976f1vGEVYYkjPS91GUnDux+6Pu4/4OTyH+sCId+NQ21j+Zgym8P9BzF6+0Y1Km4/Ka5UP3PFrz47puo3Auk3HIj8qI0sJzpGNSnno4+Ha+k6nm5ZcdjGsSOSYSEctQdqIcbI2GAGw2HGgDokTI6pvOk97afU3pxfSGhL1uqYufh/k+rcD8EbDvvxszFB/Dr7b9AZstNnV8vBASkXvbYt+9BREQ02MJsHSktxv7gadwxAWhd+1Pct8WKhEU/xCIdcOiN1/Dl8QYc2/QIvnv5NbhnQ0uPeOSyOgHIcLc34uCnz+Pev1cCAGoKd+GYXYUILYBjn+DtD7/Awbbuwy5qpKy4GQs0Nvz3zjUoRhq+88PpMEKFxD4fw7lse/pTmrT057gqGqh86mb8/uWP8P4/7sFtLzYAid/CL+ab+1bJ2JGIAdBS1Qpvf56i9l14+PvPQnfHS7gjOwIR4xdiiuYYNu04hoovNuOEMRvz0vUAAG9rFVoAxIyKhZY/q0REFIzC76o9WTR9vFq5imzSb0RRu1fUbXxAXDUlRpk/pUsVc2/6p9hrk3vM+3Ee+qf47mSjACCip31XPP/FB+Knk1QCSBarN1aKjT/PFgZAwHiRePijx7pd8SeE8NWK15folO8z7nei1Nl5Jd7pjqG3q/b6erxCiF4fE8InWoueFz+8aJTQAwKIFGMX3SZe2WcT8mm/pttRHHtWzASEav6rotZ3hjlSHfuwiA9XagUwUawpc53mjNlF8X3ThHHyb0ShLXC6rGL341eIMREQME0W3/7bQf+8Lp+oeXmekACR98Jx4WUbnoiIgpAkhBCMk9SDpxyPTJ+MeypWYu3xD/DNxEEevJTr8dbK0bhu/UQ8dnAX7pzIMSkiIgo+vEUM9U47AdfffSn0zo/x0MtHBn2yt+fwS3hovQv6pXfhu+MYooiIiEGKQooaqdf+Bb/PBnbf/yusPTmIKzn5qvHWL9egBDm498/XcFVzIiIKWmztEREREZ0njkgRERERMUgRERERMUgRERERMUgRERERMUgREREREYMUEREREYMUEREREYMUEREREYMUEREREYMUERERETFIERERETFIERERETFIERERETFIERERETFIEREREdF50PRtMwHbvrV4/PHXsbPGA0PsWMy74S7cujwNeqn7tj60FP0bTz7zNnaesENEjMSsq3+GO6/PhVnlRcOX/8LjL2xAhVMCVGbkfONn+Pk3M2GSeDKIiIgotPRpREq0F+P5NW/Ac/XTeO+j9/HKvXNQ8fwDeLPS02NbueFTPLTmPaivfQrvrV+Hd/+0Eta1D+GvJXbIjZ/h0Uc+w6hf/ANvvfkmXn/y67C9ch+eL7HzTBAREVF4BinHgQ+wQ30prl+SBr0kIWryVbg+uxEbP62Cu3vo0ozEytt+i1uXjoFRUiFqwkIsSnWi8oQNrqZDOCmNx5wMEyQAmsQc5CU7cLTKBpnngoiIiMIvSPlgqTwBV+JkJOsCj+kxYkI0Wg7U9ghS6thpWLx0JhL8TUNvQxG21iVjdmYsDKlzMCPyEDYU1MMLAdeJnfiyORUXZ8VyshYRERGFnD7MkRJw292ALgK6jnlMErQRWgi3Ax4B4DTzm7wN2/Dsb1+EfN3DuG6sFpI0HT/+xcX45e++iyueNEC2C0xe/ShWpWvP6+CLiop4BomIiOiC5ebmDlSQkqCP1AFuB9wCiJSUcOWyuSEZjNBKvYcvW9kbeGDN+zB89zE8/LVxiJAAT+Wb+M0jB3DJk//B6mnREI1f4fnbf4cHkl7AwyuToB6kJ01ERETUH/rQUVMjZmw6DA37UBfo4wk7TpRbED81BfreQtSef+Gu+7Zg/B3P4L6rlBAFyGgu2YJj8YuxdHI01AA0CTlYmqfHvs0VcPJcEBERUfgFKSBi0pWYJz7Di+uOwSl8sJSuxSv7U7Bi8ShohQ2HtnyCbZUOCADCsgNP/2ETJv76Edw4K67LKJMKpvRxMNZ8ge0nXMq2tsP4cncbkqaNgI7ngoiIiEKMJIQQZ99MwH7wXTz5xJvYWdkCX8wUrLz517h5UQq0nmN4+Uc/wbZVL+K5ryfDse1OfOP+YnTfadyKJ/HSr8bgyNtP4X/fLkKDTw0h9Eib9z3cfstSjNZzISkiIiIKyyBFRERERN1x1QEiIiIiBikiIiIiBikiIiIiBikiIiIiBikiIiIiYpAiIiIiYpAiIiIiYpAiIiIiYpAiIiIiYpAiIiIiIgYpIiIiIgYpIiIiIgYpIiIiIgYpIiIiIgYpIiIiImKQIiIiImKQIiIiImKQIqL+JQvWgIiIQYqIzsvL62pZBCIiBikiOleNFg/++n8n0dTmYTGIiBikiOhcbChsgdcnsL6ghcUgImKQIqJzsa6gGQDwyVfNLAYREYMUEfVVdaMLZcfaAQBlx9pRVe9iUYiIGKSIqC82FLZACECSlP/nqBQREYMUEfVRIDh9a3ESAOBjBikiIgYpIjq7ihonDlc7EB2pwa2rUhEfrcXxOmdHq4+IiBikiOg01vsnmS+eYYZeq8Ky/FgAbO8RETFIEdFZBa7WW54fBwC4bHa8P2C1QOZS50REDFJE1Lt9lXZU1bsQH61FboYJADAl3Yj0ZAOa2jwoKLeySEREDFJE1Jt1/vbdsvxYqKTOx1fMUkan2N4jImKQIqJeyALYWKSsYr40L+6UfwsEqU27WuH2yCwWERGDFBF1VXzYhroWN1IT9MgaG3nKv6Ul6ZE5JhLtTh+27rGwWEREDFJE1FXgar2lebEdC3F2FRiV+nAH23tERAxSRNTBJwt8uktp6y3Lj+t1m2X5sVCrJGwvs6Ct3cuiERExSBERAOzcb0WL1YtxKQZMGhXR6zbx0VrMmmKCxyuwcVcri0ZExCBFRACwoTDQ1os743YrefUeERGDFBF1cnsFNvlHmJbPOnOQumS6GQadCsWHrKhrcbN4REQMUkTD27Y9FrQ7fZiSbsToJP0ZtzUa1FiQHQNZAOsKWlg8IiIGKaLhrfstYc6Gi3MSETFIEREAu9OHL/ZYoJKUZQ/64qLMGERHanCwyo6Kkw4WkYiIQYpoeNpSaoHTLSN7fBSSY3V9+hqtRsKSmWYAwEc7OSpFRMQgRTRMBdpzK2bFndPXBbZfV9AMIVhHIiIGKaJhpq3di53726BWSVg8M/acvnbGRBNS4nWoaXKj5IiNxSQiYpAiGl427W6FxyuQP9mEOJPmnL5Wkjonp3PSORERgxTRsHOuV+t1F2jvbSxqgdfH/h4REYMU0TDR1OZBUbkVOo2ERTPM57WPCakRmJAagVabFzv2tbGoREQMUkTDw/qCFsgCmJsVg6gI9Xnvh2tKERExSBENO329t97ZLM+PgyQBnxe3wu70sbBERAxSROHtZKMLe462w6hXYUF2zAXtKyVeh5zxUXC6ZXxe3MriEhExSBGFt/WFLRACWJCj3ID4Ql02Jx4A23tERAxSRMMhSPmv1luWH9cv+1sy0wytRsLO/VY0W70sMBERgxRReKqoceLgCQeiIzW4aGp0v+wzOlKDizJj4JMFNhZyVIqIaIiDlIBt31u4/39WYeXKK7DqO7fhiU+q4Op1mRofWopewe9/cBWWLV2KpV/7Hn77UhFa5cCubDjw3h+weulS3PReHTgVloa7wCTzRdOVUaT+wqv3iIiCJEiJ9mI8v+YNeK5+Gu999D5euXcOKp5/AG9WenpsKzd8iofWvAf1tU/hvfXr8O6fVsK69iH8tcQOCAt2/ulWPFqchJkjtaw+EYB1/qCzfFZcv+53QXYMjAY19hxtR3Wji4UmIhqqIOU48AF2qC/F9UvSoJckRE2+CtdnN2Ljp1Vwdw9dmpFYedtvcevSMTBKKkRNWIhFqU5UnrBBhhYjr3gQz/5uFTIi2VUk2l9px/F6F+KjtcibFNWv+zboVLhkuhlCcFSKiGgIg5QPlsoTcCVORrIu8JgeIyZEo+VAbY8gpY6dhsVLZyLBf5swb0MRttYlY3ZmLFSSEWlT02BkhiIC0HlLmKV5sVCppH7ff6C999EOBikiooHQh7uiCrjtbkAXAV3H+7wEbYQWwu2ARwA4zfu/t2Ebnv3ti5CvexjXje3/Vl5RURHPIIUsIYAPtyufp5vqUVRU3+/fQysD0RFAZZ0T76wrQnoC605E1Jvc3NyBClIS9JE6wO2AWwCRkhKuXDY3JIMRWqn38GUrewMPrHkfhu8+hoe/Ng4RUvA8aaJgUHzYhhZbOVLidfjmyixI0sB8n8uPVuH1T+tR2ZaMbywfxcITEfWjPjTZ1IgZmw5Dwz7UBfp4wo4T5RbET02BvrcQtedfuOu+LRh/xzO476qBCVFEoS4wbylwS5eBEmjvrS9shixYdyKiQQ5SQMSkKzFPfIYX1x2DU/hgKV2LV/anYMXiUdAKGw5t+QTbKh0QAIRlB57+wyZM/PUjuHFWHNSsMVEPPllg064WAMCyvNgB/V6ZYyKRlqRHQ6sHReVWFp+IqB9p+rSVcRpuXLMaTz5xN655rgW+mClY+cv7cHWaBvA0Yvs/nsK2VTMwJz0Cjr3v4PPmOoh7vomPuuwibsWTeOlGC+69bg12B1ZNOLQaK54FYpY+gVfuykYEzwcNEwUHlBXHx4wwYFKaccC/34pZcfjbBzX45Ktm5E828QQQEfUTSQjBwX6iQbbmpWN4/8sm3HTlSPz4ipQB/36VdU5cfW8ZTEY11v0pBzoN++1ERP2BCxEQDTK3V+Cz3a0AgOX5sYPyPdOTDZiSboTV7sPW0laeBCIiBimi0LRtjwU2hw9T0o0YnWwYtO/LW8YQETFIEYW8wL31lubFDer3XTErDmqVhG17LLDaeZdLIiIGKaIQY3fJ2FJqgSQNXlsvID5ai7wME9xegU27W3gyiIgYpIhCy5aSVjjdMnLGRyE5Vjfo35/tPSIiBimikLXef2+9ZflxQ/L9F880Q6dVoajcioZWD08IERGDFFFoaGv3Yvu+NqhVEpbkxg7JMUQa1JifFQNZKCudExERgxRRSPisuBUer0BehglxJs2QHUegvffRDgYpIiIGKaIQsS5wb71ZcUN6HHOzYmAyqlFeZUdFjZMnhoiIQYoouDW1eVB00AadRsKi6eYhPRadprO1yEnnREQMUkRBb0NhC3yywMXTlNGgobbSPyq27qtm8CZRREQMUkRBbaiv1utu+kQTkmN1qG50Yc/Rdp4gIiIGKaLgVNPkxp6j7YjQqzA/KyY4fvC7LAjK9h4REYMUUdBaV6C0zxZkmxGhD54fucDVexsLm+GT2d8jImKQIgpC6wuV27EM9i1hzmZSmhHjUgxotnqxc7+VJ4qIiEGKKLgcq3XiYJUdJqMaF2XGBN3xda4p1cSTRUTEIEUUXNb5J5kvnhELrUYKuuNbPisOkgRsLmmFwyXzhBERMUgRBVOQUtp6y4KsrReQmqBHzvgoOFwyNpe08oQRETFIEQWH/ZV2HK9zIj5ai/wMU9AeZ6C9x6v3iIgYpIiCxgb/TYEvzY2FSiUF7XEuyY2FRi1hx742tNq8PHFERAxSRENLiOC9Wq87c5QGc6ZGw+sT2FjUwpNHRMQgRTS0So7YUNvsRkq8DtnjooL+eNneIyJikCIKGoFbwizNU66KC3YLc5TFQkuO2HCy0cUTSETEIEU0NGS5s0UW7G29gAi9CgtzzBCCo1JERAxSREOooNyKZqsX6ckGZKQZQ+a4L5vN9h4REYMU0RBb5w8iy/3zjkLF7KnRiDNpUFGjrMZOREQMUkSDyu0V+KxYWdgyVNp6AWqVhCV5HJUiImKQIhoi28sssNp9yEgzIj3ZEHLHH7h6b11BC2TB80lExCBFNIhCta0XkDU2EqkJetS1uFF8yMoTSkTEIEU0OBwuGVv3WCBJwNLc2JB8DpLUGQLZ3iMiYpAiGjRbSlvhcMnIHheFlHhdyD6PQHtvQ1EL3F7294iIGKSIBsG6gtBaO+p0xqUYMCnNCKvdh217LDyxREQMUkQDy2r3YXuZRbnyLTc25J/P5XPY3iMiYpAiGiSbdrfA4xXIyzAhLlob8s9nWV4cVBKwdY8F7U4fTzAREYMU0cBZ72/rLcuPDYvnk2jWIjfDBLdHxqZdrTzBREQMUkQDo6nNg8JyK3QaCYtnxIbN81rBq/eIiBikiAbap0Ut8MkCczJjYDKqw+Z5LZ4RC51GQmG5FU1tHp5oIiIGKaL+Fy5X63VnMqoxNysGPll0LDRKREQMUkT9pqbJjdIKGyL0KizINofd8wu09z5mkCIiYpAi6m8bCpshBDA/24wIffj9OM3PUtqV+yvtqKxz8oQTETFIEfWfcG3rBei0qo4J9Jx0TkTEIEXUbyrrnCivssNkVOOizJiwfZ68eo+IiEGKqN8FJmAHrm4LV7kZJiSataiqd6HsWDtPPBERgxRRPwSpMFuE87RvEpKy0jnAUSkiIgYpon5QXqVMvo4zaZCfYQr75xto760vUNbMIiIiBimi8xZo6y3Ji4NKJYX9852SbkR6sgFNbR7s3G/lC4CIiEGK6PwIAWwo8rf18mKHzfNeOZvtPSIiBimiC1RaYUNNkxsj4nTIGR81rIKUJAGfF7fC6Zb5QiAiYpAiOncdk8zzYiFJw+d5pybokTU2EnanD1tKLXwhEBExSBGdG1kW2Bho6+XHDbvnzzWliIgYpIjOW0G5Fc1tHqQnGzB5tHHYPf8leXFQqyRsL7Ogrd3LFwQRMUj1bTMB2763cP//rMLKlVdg1XduwxOfVMF1uqughQ0H3vsDVi9dipveq4Ovt00s2/Hw1Utx1UPFcPA8UIhYP0zWjjqdOJMGs6eY4PEKbNzVyhcEETFI9SlGtRfj+TVvwHP103jvo/fxyr1zUPH8A3iz0tNbQsLOP92KR4uTMHOk9jQ7bMX2557FLo0OGp4DChFur8Cm3UqQCrS4hqPAc/94ZxNfFETEINWXjRwHPsAO9aW4fkka9JKEqMlX4frsRmz8tAruHltrMfKKB/Hs71YhI7K33cto+fI5PH9iCX5yaRLUPAcUInaUWWC1+zApTVlTabi6ZLoZBp0KxYeVqxeJiBikzsgHS+UJuBInI1kXeEyPEROi0XKgtmeQkoxIm5oG42n2LDdvw3PPn8Rld3wTY/USzwCFjMDVesuHaVsvwGhQY2GOGUIA6wo46ZyIhrc+dNYE3HY3oIuAriP3SNBGaCHcDngEgL7mIbkZXzz7Amov/wPuHKvHyS0XdvBFRUU8gzQoXF7g893KSz3FUI2iouphXY+J8cA6AO9urkZWYjVfIEQU8nJzcwcqSEnQR+oAtwNuAURKSrhy2dyQDEZo+zyoJKN567P4W+OVePDuMdDBM2RPmuhcrS9ohst7FNnjo7BsYcawr0fOdIFXvyhFdbMXMSOmYkJqBF8kRDQs9aG1p0bM2HQYGvahLtDHE3acKLcgfmoK9H39TsKKvR8XofHoG/jldauwatW1+NlrVWj57He44Rev45iHJ4OCF9t63f4CU0tYkqvUgmtKERGD1FlETLoS88RneHHdMTiFD5bStXhlfwpWLB4FrbDh0JZPsK3SgTPeE16KwYJH3sPH//cu3n33Xbz77lt4+rtpiF30B7z8l29jjJYng4KT1e7D9jIL1KrO8ECdV++tK2iGEKwHEQ3TPyz7tJVxGm5csxpPPnE3rnmuBb6YKVj5y/twdZoG8DRi+z+ewrZVMzAnPQJq6xe467o12B0YYTq0GiueBWKWPoFX7soGGwAUaj7b3QK3V2DWlGjERzPxB+SMj0JKvA41TW4UH7ZhxsQoFoWIhh1JCP4tSXQmP/3LIezc34bf35COq+YmsCBdPPNuNV78pBbfmJ+A36xOZ0GIaNjhLWKIzqDZ6kVhuRVajYRFM9jW627lbKW9t3FXKzxe/k1GRAxSRNTFxsJm+GSBizJjEG3k8rHdjR8ZgUlpRrS1e7G9zMKCEBGDFBF1Wl/ov7deHkejTicw6ZxX7xERgxQRdahtdqPkiA0GnQoLc8wsyGksz4+FSgK2lFpgd/pYECJikCIiZTRKCGBBdgwi9PxROZ3kWB2mTzTB6ZbxeXErC0JEDFJEpKxmDgDL8uNYjLNge4+IGKSIqENlnRMHjtthMqpx8bQYFuQslsw0Q6uRsHO/FU1tvE0BETFIEQ1r6/23hLlkuhk6jcSCnEV0pAYXZcbAJ4uO2hERMUgRDVOBFlWgZUVnd9lstveIiEGKaNg7WGVHZZ0TcSYN8jJMLEgfLciOQaRBjbJj7aiqd7EgRMQgRTQcrfO3pi7NjYVaxbZeX+m0KiyeqSwTwVEpImKQIhqGhADWFyohYDmv1jtnvHqPiBikiIaxPRU21DS5kRyrQ874KBbkHOVnmBAfrUVlnRP7K+0sCBExSBENJ4G23rL8WEjs6p37G4pKwrJ85XY6H3NUiogYpIiGD1kW2FgUuLce23rnK9DeW/dVM2RZsCBExCBFNBwUliuLSY5ONmBKupEFOU+ZYyIxOkmPpjYPCsqtLAgRMUgRDQeBtt5yf2uKzt/K2fEAOOmciBikiIYFj1fgs91s6/WXQHtv065WuD0yC0JEDFJE4Wx7mQVtdh8mpRkxNsXAglygtCQ9MsdEot3pw9Y9FhaEiBikiMLZ+sLAaBTbev2Fa0oREYMU0TDgdMvYXNIKSQKWcRHOfrMsX1kZftseC6x2HwtCRAxSROFoS6kFDpeMrLGRGBmvY0H6SXy0FnkZJri9Ahv8y0oQETFIEYWZ9QVK64mjUf2P7T0iYpAiCmNWuw9f7rVArZKwlPOj+t2lM80w6FQoPmRFXYubBSEiBimicPJ5cSvcXoGZk6IQH61lQfqZ0aDGguwYyKJznS4iIgYpojARaDkFWZBuYQAAIABJREFUWlDU/9jeIyIGKaIw1Gz1orDcCq1GwqLpZhZkgFyUGYPoSA0OVtlRUeNkQYiIQYooHHxa1AKfLDBnajSiIzUsyADRaiQsmakEVY5KERGDFFGYWOe/Wm85r9YbcIH23rqvmiEE60FEDFJEIa2uxY2SIzYYdCosyGFbb6BNn2hCcqwO1Y0ulByxsSBExCBFFMrWF7RACGB+dgyMev4YDPgbjQQs56RzImKQIgqTIFXoX4Qzj229wXLZbKXWG4ta4PWxv0dEDFJEIel4nRP7K+2IilBjblYMCzJIJqRGYEJqBFptXuzY18aCEBGDFFEoCiwMuWiGGTqNxIIMIq4pRUQMUkQhjm29obM8Pw6SBGwuaYXDJbMgRMQgRRRKDlbZcbTGiTiTBrOmmFiQQZYSr0PO+Cg4XDI2l7SyIETEIEUUStYXKm29xTNjoVaxrTcUAu29j3Y0sRhExCBFFCqEANZzEc4htyQ3Fhq1hJ37rWi2elkQImKQIgoFe46242STG8mxOuRMiGJBhog5SoOLp8XAJwtsLOSkcyJikCIKCYHRqKV5sWBXb2jx6j0iYpAiCiGyLLDBPz+Kbb2htyA7BkaDGnuOtqO60cWCEBGDFFEwKzpoQ1ObB2lJekxJN7IgQ8ygU+GS6WYIodzImIiIQYooiAVaSIGWEg09tveIiEGKKAR4vAKfFStrFi3lIpxBY/YUE+JMGlTUOFFeZWdBiIhBiigY7djXhrZ2LyaOisC4FAMLEiTUKglL8gJrSnFUiogYpIiC0jquHRW0Vvrbe+sLmyEL1oOIGKSIgorTLWNLSSskCViWF8uCBJmscZFIS9KjodWDonIrC0JEDFJEwWRrqQV2l4xpYyMxMkHPggQhTjonIgYpoiC13r9y9jJOMg/6ILVpdwvcXvb3iIhBiigo2Bw+bNtjgUoCluWzrRes0pMNmJJuhNWunC8iIgYpoiDw2e5WuL0CuRkmxEdrWZAgxvYeETFIEQUZtvVCx7K8OKgkYGtpK6x2HwtCRCFD07fNBGz71uLxx1/HzhoPDLFjMe+Gu3Dr8jTopb5v6915D679fSHc3b7CtPRJ/PuuLHCFH+ovzVYvvtpvhVYj4dKZZhYkyCWatcjNMKHggBWbdrfgqrkJLAoRhU+QEu3FeH7NG/Dc8DTeu2wUPOX/xt13P4A3Jz+HG8Zo+77tnIfx4YYu29r34vmfPg555XjweirqT5t2tcAnC1yUGYPoSA0LEgIumx2PggNWfPJVM4MUEYWMPrX2HAc+wA71pbh+SRr0koSoyVfh+uxGbPy0qsfoUp+3FQ6Uv/oktk25BTdMM0LiuaB+xEU4Q8/imWbotCoUlVvR0OphQYgoXIKUD5bKE3AlTkayLvCYHiMmRKPlQG23INX3bb0nP8QzG5PwvR/kIZopivpRXYsbJYdtMOhUWJgTw4KEiEiDGvOzYiCLzvltRETBrg89DwG33Q3oIqDrCDwStBFaCLcDHgF0Dif1cVvRjtLX3oZl0f1YmHj+892Liop4BqmHDaWALIDMUTL2lxWzICFkYgLwKYB3PjuBybEnWBAiGjS5ubkDFaQk6CN1gNsBtwAiJSUwuWxuSAYjtNK5bysshVi7PQorn5pwQXOjzvdJU3j7y7r9AOz41rLxyJ3BieahJCtH4LUvSlDZ6EPCqEykJ/MSFCIKbn0YDlIjZmw6DA37UBfozQk7TpRbED81pVsQ6su2AtayddgffTHmpHASMPWvqnoX9lfaEWlQY+60aBYkxOg0EhbPUBZP/WgH23tEFBZBCoiYdCXmic/w4rpjcAofLKVr8cr+FKxYPApaYcOhLZ9gW6UD4mzbAgDcqC48Ann0NCRzjUTqZ4EFHQMTlyn0dF2cU/COMUQUDkEKxmm4cc1qRH14N65ZuRLffmgPsn95H65O0wDeRmz/x1N4eXcb5LNtCwDwovVkOyKSosHxKOpvG/yTlJdyEc6QlZthQlKsDtWNLuw52s6CEFFQk4Tg33wUHg6dcODbD+6DOUqDdX/KhlrFy0FD1dP/OYGX19fh2kVJuOtbaSwIEQUt9j4obATWjlqSG8sQFeIC7b2Nhc3wyfxbj4gYpIgGlBDAhsIWAMAyLsIZ8ialGTEuxYBmqxc791tZECJikCIaSHuPtqO60YWkWB2mT4hiQcJA10nnREQMUkQDKLAS9tLcWLCrFx6Wz4qDJAGfF7fC6ZZZECJikCIaCLIA1he0dPzypfCQmqBH1thI2J0+fF7cyoIQEYMU0UAoKreiqc2DtCQ9pqYbWZAwwvYeETFIEQ2wQFtvGdeOCjvL8uOgUUvYsa8NrTYvC0JEDFJE/cnjFfh0l9L2YVsv/JijNJgzNRpen8DGohYWhIgYpIj60879bWhr92JCagTGpfAGt+GI7T0iYpAiGiCBRTiXc+2osLUwx4wIvQolR2yoaXKzIETEIEXUH5xuGZtLLJAkYFl+LAsSpiL0KizMMUOIzuBMRMQgRXSBvthjgd3pQ+aYSKQm6FmQMBZo7320o4nFICIGKaL+wLbe8DFnajTMURpU1DhxsMrOghARgxTRhWh3+rBtbxtUknKTYgpvGrWEZXnKeeakcyJikCK6QJt2tcLtkZGbYUKiWcuCDAMrZscDANYVtEAWrAcRMUgRnbcNgXvrcRHOYSNrrDIXrq7FjeJDVhaEiBikiM5Hq82Lnfut0KglXDrTzIIME5LUuegq23tExCBFdJ42FrXAJwvMmRqNmEgNCzKMBK7e27irFR4v+3tExCBFdM7W+6/WW8ar9YadcSkGTEozoq3diy/LLCwIETFIEZ2L+hY3ig/boNeqcElODAsyDHWuKcX2HhExSBGdkw1FyhVb87JiYDSoWZBhaHl+LFQSsHWPBe1OHwtCRAxSRH21zj/JODDpmIaf5FgdcjNMcHtkbNrVyoIQEYMUUV9U1buwr9KOSIMa86ZFsyDD2ApevUdEDFJE52a9f+2oS6abodPypTucLZ4RC51GQmG5FU1tHhaEiBikiM6GbT0KMBnVmJsVA58ssL6ghQUhIgYpojM5XO1ARY0T5igNZk02sSDE9h4RMUgR9dU6/9pRl86MhUYtsSCE+VkxiDSoUXasHZV1ThaEiBikiHojBDraN8vzY1kQAgDotCos9t8iiKNSRMQgRXQaZcfaUd3oQpJZi+kT2dajTitnxzNIERGDFNGZBNp6S/PioGJXj7rIyzAh0axFVb0LZcfaWZB+0NbuZRGIzgHv+EpBTRbKTYoBYBnbetT9L0EJWJYXh9c21uGTr5qROSaSRTlHtc1uFB20orDcioIDVtQ2uzFmhAELc8xYkBODrHFR/AOG6AwkIQRvoU5Bq+CAFT/580GkJenx7oPTWBDqYX+lHdc/tB/x0Vp8/GgWVPytf0aNFg8Ky5XgVHTQiqp61yn/rlZJ8MmdvxbiTBrMz1ZC1ewp0TDo2Mgg6oojUhTUNhR2tvWIejMl3Yj0ZAMq65woKLdi9hSuet9Vs9WLXf4Rp8JyK47VnnqFo8moxoyJJuRnmJCbYcLYEQaUHLFhS6kFm4tbUd3own+3NeK/2xqh16owe4oJC3LMWJAdg7hoLQtMwx5HpChoeX0Cy+8shaXdizfvm4rxIyNYFOrV3z6owQvvn8Tlc+Kx5gdjhnUt2tq9KDpoQ9FBpVVXUeNA13d5o0GNGROikJdhQl6GCRlpEWccxas46cDnJRZsKWnFvmPtCAxWqSQgc2ykvwVoxrgUA1+IxCBFFEy+2GPBL545jAmpEXjj3qksCJ1WVb0Lq36/F0aDGuv/lD2s2k/tTh92HbShoNyKonIrDp2wo0tnDgadCtMnRCF3khKcpo4xQn2e7c9GiwdbSy3YUtqKnfutcHvkjn8blajHJdPNmJ8dgxkTothipWGDrT0KWuv9V+sty2dbj84sLUmPaWMjsfdoO7aUWrAsL3wvTLC7ZBQftnW06sqP20+Z06TTqpA1LhL5/hGnzDGR0Gr6J9QkxGixan4CVs1PgNMtY3tZG7aWtmLrHgtONLjw6oY6vLqhDjGRGszNisHCnBhclBkDo57zqih8cUSKgpLLI2PpHaWwO3347x+nITVBz6LQGb31WT0ee6MKC3LMePKW8R2Py452qCJC92o+p1tG6REbCg8q4ansaPspwUmrkZA5JhJ5GSbkTzYha2zkoN/UW5YFSiuUEPt5cSuOd1lpXqdVIW9SFC6Zbsa8bDOSzJxXRQxSRAPu010tuPuFCmSOicRL90xmQagH4XLC21ADX1MtvHXVaDtZg3feLUWstxnzUx1Acx28jTUQbhc0KaNhmJYPw7R86KfOhD4jG5ImOH+hu70Ceys6R5z2Hm2H29v5Nq1WScgcY0Ruhgm5k0yYPiEq6FqZx+uc+Ly4FVtKLdhT0Rn8JAmYMtqIhdPNmJ9txqRRnPdIDFJEA+Kuvx7Bpt2t+NW1afjOpUksyHAiy/A218PXUANvYx28DSfha6qDt74avoZaeBtq4G2shWxt7dubnEYL4fWc+pjeAH1GDgyZeTBkzYI+MxeaxJQhebpen0DZsXYUlVtRUG5F6ZF2uLrMPVKrJExKi+i4qm7GhCgYDeqQOZ0tVm9H+297WRuc7s7nNjJep1wBmGPGzIlRvI8mMUgR9Yd2pw9L7yiF1yvjw0eykchWQPhkJFubMorUWAtvY60Sjprq4K2rVsJT/Un4mhsgfGdfXVvS6aGOT4YmMQWahBFQJ6bgsMOMN3YD8ePS8etbcqFJHAlJp4f7WDmce76Cs6wIrr0FcFceArq99WmSR8EwLU8ZtZqWB/2kLEja/m8py7LAvko7ig4qk8N3H7bB4eoMFyoJmJAagdwME/InR2PGhCiYjOqwOP8uj4yv9luxpbQVW0osaGrrDLgmoxoXZyrzqi6eFoOoCDV/YIhBiuh8fLijCff96xhyM0x44VeTWJAQIDxu/6jRSXgba5Wg1FADn39EydtYA2/9SQino0/7U8clQhM/AuqkkdAkjOgISpqEZGiSUqFOSIbanNDj6+xOH5bdWQq3R8b7D2chOVZ32kDn3FsAZ1khXGVFcO4tgGxr6xHU9Bk50E+dCUPWLBgy86BJTj334CSAQyfsKDigLIC566AN7U7fKduMGxmhLEcwKQq5GSbERIb/dUCyAPYda8fmklZsLrGg4mTna0OrkTBjogmX5MRgfrYZKfE6/pARgxRRX/3s6UP4sqwNv1mdjm/MT2BBhpivuQG+5kBIqlNabg0nT2m7+Zob+rQvVYQR6qRUaOKToUkcCXVCMjRJI6FJTFFGl5JGQh2XBEl7/r84f/O3CqwvbMGtq1Lx/RUj+vhbXYb7+GG49hYoAWtvIdzHygFZPmUzTWIK9NPyO0euMnIg6U4dtRICOHLS0THHaddBK9rspwan0cmGjnWc8iZFcWFLACcaXNhS0orNpRYUH7KdMqF+UpoRC3NisCDbjMmjjZDYASQGKaLetdq8WHFXKQDgk8eyYY7iCh0DRTgd/kBUC2/9yS6jSP62m/9z4XGf/Y1ErYE6LrFzBClpJNTxIzrbbv7HVJGmAX9eW0pa8avnjlzw+mOyrQ2u/buVluC+Irj2FsLX1nLq89ZoocvIhmvMDByNmoId8iR8fiISrbZTW5OpCXrk+ec45ftvtEyn19buxRd7LNhSasGXZW2wdxnBS4rVYUF2DBbmmJGbYYJOw1RFDFJEHf6zpQEPv3Ycc6fF4KnbJrAg5xOQfF74mhuUcNRcD29ddeeIUiAoNdT0aGWdjjomrnO0KD5Jaa35/1+TkAJN4gioYxMBVXBcOebxCqy8uxStNi/euHcqJqT205VhQiijVmVFaPxqO9r3FMJQexCSOHXUqlUTh+PmTHjGz0R83mxMXXwRUlJ425rz5fYKFJVbsblEuQqwvqUz2BsNalycGY0FOWbMmxaN6Ej+4UUMUjTM3fjEQew6aMUDPxiDy+bEsyDdR0kcdnhrj3fOP6o7AV9TfefIUkMN5OYGCNl39h9+ncE/96jLyFFSKjTxSaeMKEn60Lv1xyP/Po63Nzfg+ytG4NZVqRe8v5NN7o6r6grLrR2/zCNkB8bbyzFdVj5SmvdB0958ap3VGugmZipXB07NhSErH9qRY/hiPr8siwPH7dhSqsyrOlhl7wz8KgkzJkYpo1XTzVx7jhikaPipb/Xgil+XQqNRYePj2SF1iXe//aJwu+CpOQ6v/8NTUwXvyWP+x6rga23sw0+1pEzWTkyBJiFFmaTdMaKUDE2yMqKkjgnfFeOLD9vwoz+VIyVeh//7Y9Y5z6mpb/Wg8EAbivyLYFY3uk759ziTBjP9t1zJyzBhzIjOsOmpOuK/OrAQzj1fwV2xv8dViOrYBP+6VnnQZ+ZDP2UGVBFGvgmco5omN7aWtuLzEgt2HbTC6+v8dTZuZAQuyYnBghwzpo6JBO9YQwxSFPZe21iHP689gUtnxuLRm8aFZ1DyeuCtPeEPScfhrfWHpZrj8FQfg6+p7sw/sDoDNClpyjykxBSoE7vOSfK33eISg3axycEcufjab/egpsmNv9+ZgekTos64fXObp2NyeOFB2ykrcwNAdKQGuZOU+9XlTzZhXEpEn8OZ7LDDtX83XGXKJHbn3gL4Wk4NxJJaA924Kcqo1bQ8GDJzoU0bzzeFc2Bz+PDlXgs+L7Fge5kF1i4T/BNitJifrUxWnz3FNOgrvxODFNGg+N7DB1B2rB2P3jQOl84M0XulyT5lwcia4/BUV8JTexzek5UdYcnXUHPGtpuk1UGTPAqalDRoU0ZDkzIa2hFp0KSOgTZlNNTxyXyhnImrGbDXAs4GrN+8F3vLKjBnvAcXzxwDGBI6PtrkOOw+YcDOQzIKy62oqDk1OEUa1Jg5KapjEcyJo4z9OqLhOXkMzj0FcO0rUkatDpX1HLUyJ/iXXvCvyD5lBlTGKJ7jPvD6BHYdtGJLqQWbS1pR09Q5r8qgU+GizGjMzzZjflYMYk2cV0UMUhQGqupdWPX7vYg0qLHh8ezg/YtRCHib6uA9WamEpdoqeKqP+VtxVfDWV/dYRfuUHziVGurEFGhTxyhhacRoaEamQ5uSBk3KaGgSRwbNpO2g4bEB7dWAs0EJSfYa/+cnAUc94KgD2k8qj/lc57Rrt6xDq9eMNtkMry4ROlMyzPHJiE1MgRQRDxiSgIjEzhCmjwdU/f+LV7iccB3YDeceZW0r594C+Jrqe7x2tOOnwDA1t2M1dt3oCeBaAGd38IQDW0pasaWkFfuP2zvWYlWrJGSNi8SC7BhcMt2M0ckGFosYpCg0/fOjGjz335O4bE48HvjBmCE9Fl9zQ+c8pa6tt5PH4K09AeE+wy9rSYI6PhnakenKaFLK6I7PNSlp0CSlDvu2mzJk4FACkL1GCUP2GuX/e3vMa+/7fnXRgHEkEJEERIzAx3t1ON4aCZPGCrO6FWaN8hGnbUGsrhV6OM792PVxPcNVRBJg6PKYoctj2vMbRfLWVilLL+wthHNfEdzlpT1Cujo6VmkFBsLVlBlQRfEKwTOpb/Vga2krNhe3orDcesp9DEcnG3DJdDMWZMcge1wkVJxYRQxSFCquW7MPR0468NRtEzB3WsyAfi/Z2qoEpZOVHYFJmdRdCW/tcciOM//iVscldoQkzYjRymiSv/WmGTFqQG4rEhJktz8A1QKOWsDR4B9Jqgfs/oDk9Ackd1vf96sxAsYUwDhCCSaRqf6glKw8bkgEIkcq/68+dUThpXW1+N93qqHTSJg2NhJ5k6ORl2HCtLGRyvpDXgfgbARcTUpoczZ2+TjNY8J3bnVRG3qGq8D/GxJOHfXS+x/rZdRLuJxwHSxVFgzdUwBXWSG8DTWnbqRSQTcmo8utbvKVUSuOcvbK7pKxvcyCzSUWbNtjgaW9s70aa9JgQbYZ87JicFFmdNDdGJpCLkgJ2PatxeOPv46dNR4YYsdi3g134dbladBL57LtueyHhovD1Q5864F9MEdp8Mlj2Rd841LZbuuczO2fxB1ow3lrjp91/SSVyQxtaro/JPnnKaWk+Vtw6ZAMw+iO9cKnBCJnvRKKHA1KSLLXKJ/bT/pHkuqVoNHncKFXQkWX0SMYR3R7LFkJSJrI8z78ZqsXh6sdyBkfCX1/tYtPCVanCVyuJiU8OhsBb/uFjXoFwlUvIczXLsN55DgcZaVwlRXBdbC0x4ipKipaCVWZucpNmqflc9Sqt/cNWWD3YRu2llrweXErTjR01lGvVWHWFBMWZJuxICcG8VyJns41SIn23Xj8fx5E6w1P4d7LRsFT/m/cfffnmP3Uc7hhjLbP216fuLfP+6Hh47n3qvHPj2vxjfkJ+M3q9LP/bnc54fGPHgXabh2tt5oq+CzNZw5KxqjOEaWR6V3acGnQjBg9PH7JOBtP30rrOnrkqAe6LTh5+sJq/KMrSUoAMiQp4cg4Qvk8skto0scOnxf4aUe9mjrPQ/fHzmvUKx7Qx0OWI+Brl+Fpboe7tgneJht8Tgk+p0r5r1sFdfIk6DNndYxc6cZkhP2olfC4etzrUba3Q/hObZfKbRYAQHWjC7sOWbH7QCtqq5sRuGONSgLGJ0jITtNi6hgjkvz3c1RFGCFp/J9HmgCVGpAkqEzK+4mk1nRcLCDpDCG5Phv1rk+zJh0HPsAO9aX44xJl5Eg/+Spcn/02nvu0Ct/64Tjo+rjtVdP7vh8aPtYVKLfdWD4rzv+G54a3rtofjLq03mqOw1NT2WMSbo+/DvSGznA0QpmbpE0dA43/87BdP8nd1mUCdq2/xVZ/6qTsQGiSPX39W0sZGYpIVNpoESP8n3drr0X421Pg0HLPd9kIICpN+TivUa9eApfL/1jXUa/2aqC9GioAKgBaE2A0AZjY2zfYCdn1FXzlKvhKJdi9WsCYBFXsWKgSx0LSaCHUURAuZ7cBSi+EV+3/Dv7g4XYCsg+ADsL/K0W2dx2FU0P4JMjdQoxwuyF3u/uQbLdBCBnCpwsME0G2Wzv/3aeGcLp7HJdst0L4uoRPIfd55f4zmeH/6KECwFeAAFB3oTlbEwGfShlI8OijAEkFSIBHp9xOSVZp4NUaoVJJEFo9fBpl6oBPa4TsbwGroqIBSYKQVPAZlK8TKg1knRF6nQqy1gAR+Dq9EVBpoFIBuhhzx9fJ/q+DRgu10ai0MrUGiG5TFXRa1WlHdw06FXTa3t8DjHo11GoJeq3Uf6PDoROkfLBUnoAr8WIkdyQdPUZMiEbL3lq40TUAnWnbatTH9nU/oe2t13+O7bWf8BdIX/5KFECKScZokxf/+cCH/7jdEF638g7V/ZWa5v+QJEg6HSStHpJOD0mrUz50/v/XBF7WTf6P3UALlI/9YVI4n0u5ms1r7/yv7O3jFxsAjVlpmWmMymRoTSSgjez5mMaovLF3Z3cA9koAlXwRDyYpHoiIB7p3l2Uv4HMor4OOD4f/MYcStLzKv3u9Tth8DkArAC2AjtsftgC+FqB2Vz8cZy8/v1ED+T4i9XzP8L+/QO5yUIHjEoCQJeWKx+7HKrotBCwp2wmh6vhaWUjwCcAnC8iyBCEkSBCQ/AchCQFAQAIg+Q9AAjpuJ9R1W6DrnExLv9RDKwBjoNnk8X/0puYcagxVxxHLkjpQCsiBUC1J/mcc2Fb5XIYKQurcx6SIi/Cz2/493IKUgNvuBnQR0EmdL0hthBbC7YBHdP2hOdO27Whv7+t++iYvLy8oi3rRFU14NdnJN/2+6vpLIUIC0NfJ2i7lwwflY1iXXH8OdQu8uTr9RWvma3BY/9CFS8g8zWP9Nvgh+vB5bwekPmV0Lsz/NO4YVDmda5u3Bu3v7sLCwoEKUhL0kTrA7YBbAJGSUiyXzQ3JYMSpo3hn2jYKUVF93c/APunB8L98pyYiIurpt+H1dPqQ1dWIGZsOQ8M+1AX62cKOE+UWxE9N6fY38Jm2HYWkPu+HiIiIKCyCFBAx6UrME5/hxXXH4BQ+WErX4pX9KVixeBS0woZDWz7BtkoHxFm2jT7TfnguiIiIKMT0eR0p+8F38eQTb2JnZQt8MVOw8uZf4+ZFKdB6juHlH/0E21a9iOe+ngz1mbY9478RERERhWWQIiIiIqLuuOY9EREREYMUEREREYMUEREREYMUEREREYMUERERETFI9TvZgpKXf4aF48fjipdPdFkYX0bb7r/hJ8tmYPLkTMyY+w38eu0ROATrc/b6DLPa9XuNwqx+g1qfEK1d0NQoSOsXEvUZ4tqFfI2GsH6Czp+vWWy6fbG49KaHxT2XTBaXv1QlvP5/ktu2iTtmzxT/8/phYZd9wrL7GXFV9nLxl3IX63OW+gyr2g1AjcKqfoNcn5CsXRDVKCjrFyL1GdLahUGNhrJ+DFIX9OKzisO7Dgurp0a8/rWpp7z4bFt/KmbOvV8UOwIbt4qNP5ouFj62TzhZnzPWp2k41W4AahRW9Rvk+oRk7YKoRkFZvxCpz5DWLgxqNJT1Y2vvghqjURg/Yzyietxw2YfmQ0fhGpGD1I6bCEYgbWosmkqq4WJ9zlCfStQMp9r1e43CrH6DWp8QrV3Q1ChI6xcS9Rni2oV8jYa2fgxSA9NshsvmAvRR0EudpdZFaSE7bXAL1uf09bHCamXtzr9Gw6V+A1GfcKvdYNco1OoXTPUJ1tqFSo2Gtn4MUgNUVn20HnDZ4BKdL0hnmwsqYxR0Eutz+vpEIzqGtTv/Gg2X+g1EfcKtdoNdo1CrXzDVJ1hrFyo1Gtr6MUgNCDXiJ01ERM1unHD6HxI2VJS0IGnGaBhYnzPUZyxGsnYXUKPhUr+BqE+41W6waxRq9Qum+gRr7UKlRkNbPwapAWLM/g6WiQ/wl/8cgl32ofmrv+Pp4tG45mtjoWN5zlgfM2t3QTUaLvUbiPqEW+0Gu0ahVr9gqk+w1i5UajSk9eOldxeg5ROxevI4MW7cqR95t+8Q7UIW1tJ/itsuny1Nn+9lAAANYUlEQVSmTZwgJs+5Wtz7/nHhYn36UJ9hVLsBqVEY1W/Q6xOCtQuqGgVh/UKmPkNYu7Co0dDVTxJCDPupz0RERERs7RERERExSBERERExSBERERExSBERERERgxQRERERgxQRERERgxQRERERgxQRERERgxQRERERMUgRERERMUgRERERMUgRERERMUgRERERMUgREfXCtgU3TxuPSd95G7W+Lo97DuPZ5bm4abO1376VXLcWV2ddiVerfYP3/HyN2HT/lZg5eSrm/nwL+uvZ+Gpex1WZV+LlEz6+hogYpIhouHKf3IUKVQIid7+AN464Ox4X7RX4qn4EZo819tv3ch79ElWxs5Adrz7/nQhxboHn5Af481offvJRCbY9tQCm/nouFV/iRMx0ZF3IcyEiBikiCmUC7YcL0TjxZty70oo3/lYEqz+nuE8UoNIwFdMSHNh6y0xcfO9uOPxfZf/yZ8idez+KnQ4U3XMxLr7lCdz/42/iioW5mHv9sygq/xAP3XQtLps7E/N++BIOuwDAg5pd++COl/Gfm5ZgdnYGps77Af5aYoMAIFt248Xbv465eXnIy52Dy3/2T5S0yQCU7zHv53/Gb667FMtv3wJLt2fhrduMP/94BS6eczEuysvDou8/iS2NPth3P4grL38Q+5zH8bcffA//77D71DBUsgZzp9+IzbaO2IWq165F9qJHUOoAZOue/9/evcdFWSd6HP/MADNcBryAChh3QkC8IuIlb2uauaXbWlt5yt3axEwxy/LUrq1bHu2UlqbrJbd27ZWvTqWd7WJudnG1o6ggILiCoqCIyEWQq8AMzMz5A223s0KvOu05A33fr9f8AT+eefH9Dc/D9/k9Aw/bFt9O8pDBDE4YxLj7XuJAtR1o5WJmPraI0YR7NnYyP53kcjZR8PZS7pw4jgkTxpCUOIHZ/76XSi1wiahIiUhXYeV8Rgl+g4fzo3k/w/LZRj6vtAMO6gqyqemfTJhbGdkFrYQnh+FJeyEqzzmFLSyJUI9aCvIqqLrgzsyX3mXXx+tJylvLwhcvccfad9j955dIOPYHdpyxgvMKhUeKaahqZMSzH3H42BG2jDnBuhUfU9Fyljfm/oI/uKXwzsEMjh7ewZzaDSxcd5wWex2n8yu5dNbK9M2fsuflCfT4WhvKY8PPF/JJxDN8dDCNQ0c+5gnP7Tz23EHsw5ay+t4b6DFlE3v3v0VKtOlr6U39BxPcVsLp6rb2WlmXxisbzjJx2TwSvKyc3JTK6qLp/PFQDrmZf2JO7Wssf7MQm7OBgsMVBI6OwdLWyfwYO87VdGkPz6zM5ebff87+/Wkc/nQFQ8sOkFWlJiWiIiUiXYO9jpM59dyQFIpf9L2kxB5ny46ztNJC8eFSeg4dgF/zGdIr+pAUbcHQvt5CUXo5AYlRWKzFHLnQi9ue+iXD/IyAA6ujL1MW3k2ctwGcdqxtHviYjGA9z6EiC9NXLOO2cC8MRj/iRoVguFxOecYmNp8Zy29/dSs3mA3gEcy4aSHUZOZT21xMxgULExc9zNje/3gZrSF9M9urp7J80Vj83QC3PoycGkHzyb9Saa2nIOsygSPD8brewdESQXyPavLLbYCNM9uf54vQR3lyQi+MmIlf+hkZ76YQ720AcyAxQZ7gBFqKOXTORNzwINyvdDw/xuyOc9WZArjB6yKfvbub7LJmDP7jWfrKb5jWT5cKRVyNu6ZARK6/IHWOI2UBJEb7YHDrybRHJrHmX18n67755OU1E5YaAsX/yVn3G0kJvrqaYy0l86yR6Dn9MVZ8yUlbDKmxPu1rMeW5FBLLnZHttcV64ShFxkh+HuiBvSaPY40DmDvE72rhaKOm+DL07ktD+vtU15Xx2I8SuVYjnK1XMI8OwKM6lzxrDPOGXtvu6ytqJWk5WGOeJt7nq3ZIfVk9Tm9/LG3FHCnxIj4hgOvWE1MwQ4KaefNcA62RR3nxjzbu2TaLEHdwNhWxe8sG3vpLPlUtrdham6kqaWXU7EDcqt8npz6U+yI9sRandzA/fag4eLTDXN49b2LlzrVs2/g6i6f8irahc3jm+SVMCzHp51JERUpEuoK2ylxOtkYyM6j9l7dfcgp3ef4Lm3Yn4Vnel6QoLxpyj1PbdwohV5d07JVHOVDZjxkRXjQVpVMRkEiUxQA4uVKUTmXf0UT4ADioP53F5aBbiPSGluNpFLsHE2C+Wofs1WT9VwVB4+Ix19rw/8kb7Hspmf/51vaGfSmU+ycS43u9xXUH1gYb7r4WPK61LHs1WfvKCBo/FN+aI5xoDGFOmOf1J8DoS0RcD6rzi8g8vZq/jv0NL8Z7AS3krr6fJYdmsm37akYFuOOo3sX9k7cwJtqH5qI0SnslEt/TQH1aR/Njonlfx7kACJ3Mwy9MZt5zF/jk13fx5K+HkPzGdHoZ9LMp4kp0aU9ErqvpbDoV/Uby1R/mmQcwe24UmS+s5ZDzRoYFudPaZMVut2F3grPlHB+8sIE8cxyD+zoozSrEGTWM9sUYKyXpZ/GIHUKge/vH59NL8B44mAC3Vsoy86mrPca+U404sVP5l7WsL4jnF7PiiBgRTWvOfk42OIFWKg+sZd6Sdylps1GaeRpnZCL9zddLYCb0pgQ49gGHquzgtFLy8SpeLhpJ6uxonOfSudhzCAN6dHQYNBM8JJCGjP/gxd1BpD4xgV7G9u+9sqgWn4RxJAS4g62Uvb/bQIYxmjh/OxcyTmGPHkWop7OT+fGhf0e5mkt474m5rEmrwQ4YPHzpZfHAw8tTB2wRrUiJSNdgozSzCFPcQwR8dd3LjeDpC5j4wkP8OXgu4Z5uBE6Zz8w3l3H3lD1EhCcwaVAw3udHEGJuJCurin4TItpXWxx1nMquIWhWGGYA+2XyjjcS8kAYno46ThysJD51KU0rf8yY8w20eMZx97qNzA414R60ipVZj5E6PpEWowFT8Fh++ewD9HdrZHdmFf3GR+LTwXmi/9SVvJy7hOduGckyT088A0fzyLZXmBnooOi9U9jCf0yIuePzTL/IAXicfJvahz/kpyHXJsKPUYsfYWDqAqbeEkpY+HBm3TOTwTs3snzFh9xTWEXQlGh8cMPS4fwY6TOtg1xevtx0ayTvPX0zo1q9MOHEN+4OVq8aTw+tRom4HIPT+S3/8YqIiIiIXD3lEhEREREVKREREREVKREREREVKREREREVKRERERFRkRIRERFRkRIRERFRkRIRERFRkRIRERFRkRIRERGRb6J77Yl8j0bMy/zW2xx9NdGlMxWO8f/W20SlVbv2C7X1O9y0LsW176bVa3PQt96mZn6ZdlqR/yWtSImIiIioSIl0I1e+ZN7AKKKi/v4xlVcKbICD+uzfM3/qMGJjBzJs7E95akchzS5/+/E2Kvau4YFJg7kxOoaBY+9l1WdltEE3zdTZ2A8hU1fNL6IiJdL1tTZQZ4xj+b4CCgsLrz4+5dEYE86Gw6yYvwXbgzvJzj/O/o2TOflvC9h62ubSkewXdpC6aCe9lnxEbsEJvng2kj2PL+LtEnu3zNTZ2A8hU1fNL6IiJdIN2K9c5gre9Lb84y7alPMWe91nsOgnUXgZjPgNvY/UkRX86YNCrC6byElD7kfk9fkZ86aG4WX0IHDSQuZH5fPOvjLqu12mi9R0ktfe7TN1/nqrSomKlIj8k4tUNU3WEt5aMI2kQfEMGnU7i149Qo3dzuXTZ7EGDqG/+dpXexES34vqnFIXLh0GMBrA6cBx7VNu3vT2dVB+opTybpepAluHY+U/gEydPY8r5xdRkRLpHjumVwSTZkzj1kff4EBOLvs23UbV7x7i8V1lNDVawWzBbPjbbmyyeOBoacTmwu8p8h10OwlV77BxVxHN9hYufrmVzcestDZbael2mdqwdDLmyr6vTL5dNL+IipRIN+AeMpNla5Zzf3IgZqM7/sPnsOR2LzLez8fuZwZrI9avCoaDlnorRm8LJoPrZnLrfyfr1s2idv0djBg6gZSdXtw6ujd+Ab74dLtM3pg6GXPlA+/3lcmti+YXUZES6fKc2C7lkXGs7O8ugThpszkwmswExNyIV1k2F1quDTVSlFND32GheLp2PSTw5qfYvi+HE8ePsOvl6TjOtxGZFE5Qt8sUgrnTsR9Cpq6aX0RFSqSLM2Ar3MaC2fPZmlmDHTu12dtZt8fBTXcmEDB4NlOdu1j33mmaHHYup7/G+mOh3DUjApMLp3Jc2s0jE2ewJr0Wu6OJ0ztW8VrdZB4c3ROfbpjJ2cmYoTtmctRxYvcOPj3ThPMbnsegnVxUpETkn8kychlbnwzjk5RkYqIGkDz3Q/oufp3nJ/fG6JPE068uxO/t+0mOjWXs4nSSV23iwSgP1z7YBEzi8Yej+SJlJANih3PPdguLXvst43oYoBtm6jRvd8zUVsnna5axPu0yjm96vUW606mv0+l0ahpEvh+6RUw73SLm/55uESPy/3TyoSkQERER+W60IiUiIiLyHWlFSkRERERFSkRERERFSkRERERFSkRERERFSkRERERUpERERERUpERERERUpERERERUpERERERUpERERETkm/03ldKYa5kW0j0AAAAASUVORK5CYII=
)}
.images-s_calc-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAVBAMAAADx1rxcAAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAEHZmzSJUuzJE3Zmrie8MHXrVAAADEElEQVRIDaWUQWgTURCG/9fN7ibdJD5EENtDY0rbQy2EFPQgQmjFWlRY1F600EXFQ0FIQTwIxdw9GLwJYqsFrQoS0p5UJFqpB60GPQkpVETQW6JW7KnOvE2zaWPpij9MOv/Mtzt9+94u4FdZv+B/cEYMaLL/8QZaBuDYQpFHVSBMA85T3qq8mOlpuDDyoKGE51Ti2EKlat8E9AIQvKd8s22Q2aCnGzzZ4Wo0dtZV+qvuLBDOQCwMKL8H+LoOYzPVUEGYdpJjCy1X+2NAgNNXyh8D+qqN2h+xhtYqQKjgRl3pL2loyS2KNLCfU3fID+Cl2/B+jSUvr2Vlyii29yZqJTdpj9NB6oyhNf4BkQIEe42gS9xWQ8Qv4PH6q8RMd85F42cg8j0JUcqIJQwSRZFSy7QOsgb4wohjSjEYrOi3QysIJHDSNgFTAoe5q4boNOQZO0+n5ISj0B3Za5JMNmIVtUnMETEHIw3bQzmLSgtmEZlATFSwzcYhXAB2UuMTd2tD3rLz1Ic2qdBxBGm/2uSJaCKcwyIRiwj+7PBIlTXfkZigwRPSmMQtGN/jGaCTWmVuqyH8uC6T0YdYtEiEKhhVaIi2XxmMyKiDbupRnFvNUlIn/coKZsnPwsqhhHCKe2mKCidqCGjjL5IZfsOKUWal8EShlLgGXbw2d8gQTL5B3Z5IvMZRKh1BsyP7hZmjXC/QzxeK6pCGIxzI4a5CA0QqQ89sFMjTJXk8hMZ38aSVkcQ4kOjDyK7s8g1ajoYmh4BphtyVdAG/2dUUiOkVhdJuasrgG60N80TM05eFD06dNAdj2AfNWcQ7S5SLoRT2uu8hnxR+PcQUWmyN1+8pUgyXc4xSfa8yuK/TQ+V/bBrHe3d7qMriSYlIewesZLgTeQc9SRunucMvY2l1QYrP0Bs+kDOxFy76nnBlbh6gMzBJ13D40UeGWvyQdYyWglGEirrq5mmKW1Z2c6CxE40FHJg2vccUfhTMMSXSftg1xuTHe5Uchx9ZGUVd98OuMVo8ARTIcfhR2IUMnwuv3VKT9GmV+AO5O7w3iuBbrQAAAABJRU5ErkJggg==
)}
.images-service-manager-win-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAcoAAAG5CAIAAACBSOPkAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAHPhSURBVHhe7b15lFzVneeZ/Dd9Zv6YObOcOtWnz0z3GVMFdtkWWDON6epy2W5sY5ausgtw1RzoWjqrevrUcrqMAWGBQAJkbBAYCgECSVgSWliFpNSSIrWBpEzlviglpTJTue9KZaYyxeIaz/d3f/fed999sbzIjIiMCP0+50dy3313fcsnb7wIZZT9Jsz/JwiCIMwLrVFDoFe9PxP+OQa/FgRBKEi0pFKiZZcJWqlWrzo7Jbo3gx6g4fNEfCYIglDAaFWF0VIzaOUZtBBTwl4lveqMJOgmFbo3R6Y8xE8dPknEFUEQhIJBiymMVpiCzaY15whXq1ChFZmENHrVbUSsyh1jBDwmHu6cYdZwWRAEoeDRwpqd1Qqbm2Onsd881WoVOp7VuoxAetXJCFyTG+J2uQ+2qvUpxsRDnJmZmVZMGS4JgiAUPFpYU1NsMKiMnWaFy6pN6Fn2pJZmhMR65Tpcn8WKpl2xslV5NBgWhjg5OXlRMTExMW4YEwRBKGC0qsbHIS42GFTGzmW/Wc9ayQKWLBuSbanVGSaBXrk0i9W6lcXKVoXdXaViZBjl6OjoiGJ4eHhIMWgYEARBKDC0ngYH2VcQFxsMKmPtuqrlJS0E6K5k2ZApDOvrlcuxW12xQt6uWK1V2acYIobb39/f19fX29vbo7ig6BYEQShI2FHsK4gL+oLE2LxsW+tZV7Le44IUhg3plUtE3WofBVixQvBsVYyGfYqxdnV1dXZ2dijOnTt3VnFGEAShIGFHQVZsLegLEoPK2LaQG3sWurOStY8L4hjW1ysKsV5dt/KiFevkiYkJFisED9NjEBjN+fPnWabt7e2nT59ubW1taWlpVjQ1NTUKgiAUJBAUmwrKgrigL0iMhQutQW5QHEQH3bFkIUBokJexrmFZryCpXpV5g6Wr51ZetGK1DJ2jP6yoeaGK3wAYEwbHJq2vr6+trT116lRNTU214qTDCUEQhEVFy0jBjoKsoCyIC/pi50Jo0Brkxkta6A7Sg/ogQF7GeoZNtoAN6dW6FT723Do2NsaLVqyZr7/2izHi+uThlZSIGXIMJfIW7sWWIrxaxRvBpGBbqLahoQGexZKWJYuVLNTHy1jI0DOs94hAK9XqVTlX65UfC/B7WZ5bMY4vXf+l9evWfzL3aTEHppcwvGJueCWTxGx24ko0LqeIKzFjbiZmzCWO6cQx60SKXbFiKl54tdKFN6pU4U3ZPzIJ4ooXkcOeKLwzqCJyGWQ1vOs5bnyay/j157/+s+98C9opBGgkn/8acvvSdV+C6LDOhWexnoVk29razp49i2VsT0+PZ1h+p8t9RMAuZa8GesUOXrpat05PT09OTmIxzG797d/67Y2vb5wan+o/P9jVciHjaNaJbooeE2qzdcGhm11ANCcNGnnaaNLR2dQdRGMozuvoOt9A0UnRzenz9TqzA4l6+tlR30lRp+Mcova8G2dPITpsnNFx7kwNRTuiGnGW4/RJG2dOnzjTZuN4O6KV42PEaY6Wj8JxrA3RzHHURmsT4kiiONzSeLgFP5sOI23iUBCNh1oSRFWG4VVXobvgHs14mp1oOcrRFgo1wVaK0xQfBdGG+LjdjdPHOc5QnNDRjjh51saZasQ5CnU6zurQJ+ucjvMcHbU26Fyfd0NdD4hOhLlm6Ke6orq8MBdhN0fkSubA5Zrsmu9q7ta3qhNemVDY28cPe4P7ccGJy5OX//Tb35iorel7d8fgezuG3qcYeX/HGMX2i+9vn3x/+9T726ff3z5DsXX2/a1z72+9kiSwy92L9OzOrTMU26d3bp/auX1y5/aLO7ePUewY2bljSMXg+zv63tsxUVeDkVy+dHmwc3hqYhqi++3f+pdHjx49fvw4JIuVbEtLC5axrmEhRuiR3+liw0YXsL5eeenKjwUuXbo0MTExMjKi1q3Xb3htw2jfGJ0AHeYEWIEmj9ARb6W40Np7oa3HRs/pXsSFeURb/Ai6CwUNJmnwaNOEmVowZXtwVHTq6KZw/RuJ8whWcFMX/Wzs6uBo6AyCzVt/nqLu/DkdHedqKc4iHO0iztRwqLudnKtCWUA79wSHMu9xL4x/Sb6BgluiCka4FnbCWOw0wrGziSMLDq9B01fLMRXeIK03P/a9yZNFaHU60Y44cTYUcOjJczrUgT3LAYeaMBrVp6aDo47Omg46ifqEnm+wQee900YTgq6NrlAok3qyQ9i7zFrMv6R7TTiZVF7dpEE7oQs4yE8Y+gaPRjAYL6xe7/rmH4ydPNG3YwtiYMeWwR1bht7aNPLWprG3Nk28teni25sm3940/famGROzmQRVeYdi+p1Nk+9suvjOpom3N429vWnk7U1Db28afGvLwFtb+lSMVZ+465ukV3bF+MAEdIc17KFDh44dO3by5Mm6urrm5mYY9vz582xYiBF6hCT5EYG3gGWvhvRqn7raxwKjo6ODg4O9vb1YMF8am9KCMBF41molEmppqY6pMpGyKpmOfdrT3tvb3kdxpq/nDP3sPdOfm+DGI8G9J4qeaNCY8dME5QQR6D4s/W4dPRSulFuhYw5zuJwLOhz2ULOF1S2n5KuDV74cZuVLC14KJV9e8HJY7bprXrPsDcKsfCmCddkZXv8mCN/L0bD+cjI/zlK4bZpw/UgRHjDWm2dOckCUTtDC019+ctAK1Pm9hXAXoXyQ9TrUvOyg1SjUyYtQvfxUodTZxdGEMN6095SKsMKMmLQWtSh72sLhXJO9NuyFTfm6jE6rWgk8q9LuZRkMJhpcK0Goez9RsF7/5Bs3j310rHvzht7NG/o2bxjYvGHwzQ1Db24YfXPD2Nb1iItb109uXT+1df30tvUzFK/PJgnsuhzeRHnUmtq2fnLb+ovb1o+pGN26YWjrhsGtGwa2bOjbsqF3y4buLRvGPj6GkVi9IrCGhfQqKioqKyuPHDly4sQJa1isYaFEiBF6tI8I7BNYX6/YAPbJAC9d7WOBvr6+G2+8cf269X3nBjy9IvSlYAXhhidWNWh1XpVSz/T1Ic72U5wb4OjvyCRQPmdhhxQEDzUI5OjoPdsfCt/sCOf6NsGHwg0raLrcbahbqJuDD6Y6qlrN5tI3oe9PXu/4Ik5kYRKxG8FyOPCyigTrYgolHbZP6qDnFW4Oyyt56FW2E16BBOG2b8JdTrojD5aWCFpdupPV01drTGVJc6w47Gv2dN5MKU2+OwJj6nON0KKk+6W3NxRRY/Zz9J0Jh7k4+93AtW0vYFWMKnI7uBr5wlOedeVI97I38oQRKNULPc1oQK8/+P1/O3T4UOf6td2IDWt7Nqzt27B2YOPaIRWjG9eObVw7sXHtJMVLUxtfmjHxT/c/9IO7yjmQTpiD8qiFumhh7I21o2+sHVIx8Mbavo1rezau7UZsWNu5Ye3QkUM/+P2bXL0Onh+C9KC+3bt3Hzhw4PDhw2zYlpaWs2fPdnV1QYz2EYFdwPLzATZqoFf7ZMBbumINfOHCheuvvX52atYTK4e+aFyrqnAXrXTF0IWifmHiRCqr9p9DDAzAkucHBxCdQ4hBRFeM4JKZR9DL+VQxkCDUIEOhd2H8oejwIvFvAuNoHQnVHF44R8ORMl0Q+lkH/zLTEVzK+lqns6NvFTp3xsImQs+IzWMKR82hCBsnSdDr33NOBMJKGYHfw+EVSxr+MMJC9CZiQplRHwQvzMPNILoRCfziHnPlTa1Oih68aHO8aYLOpjGmdqWvS3WRwIwmHF3qGOQY6AiHuUqdy1tdvdjFFbWCWbVhyerLhudiL5vwlKNhrrRI6GPixszk5T+66WuDBw+cW7umQ0XX2jXdL6/peXlN38trBl5eM6Ri9OVnx15+duLlZycpnuGAQ39jQPqF/3a/l6OKUS3URQvU1CtrBl5Z0/fKmp5X1nS/sqbr5TUdKs69vGbwwwMYiatXBKQH9b399tu7du2CYbGGPXnyZENDQ1tbW0dHB8QIPUYXsO7zgUCv/GRgbm6On7rapStWwtdf+8VP5j71xIpQf8+wbEXZCqTN72dtW30EcZLUQOkC8sWqTjNMR8YcHuoeHrowMpzlGLYx5MRwd6qgkbiBsSUPjDxlhOTO4QiaIqJjFXSr6DvHrEHopuI032wI38j6zlSHOqRmuo29RxZ+JDGy/X0ZCnOn+WHeWlFBDvL17YTxlFcr/N4gggUXzvSqZBZ2tN6kVGDKFyiMGcN+VKEWmOa4Bbo0EawxzYlQYc+O782QLjmMK6O6HLThGlNfWsM2vKuUY9jEkCpAVWBe1ay+3gLJ0kR4vnQZkDRjr2ER6jAmCvfqooBe77jxyz0Vu1qeXtn685VtP1955ucrz/7i8Y5fPN75i8e6n3ms55nH+p55bEDF8DOPjTzz2OgzK8ZU/PJv/8HzqU6pNPaiJMqjFlfve+bxnmce734GLVP76AV9oUf0i94xBowkpNfW3k/nPoVet2zZwoatrKw8duxYTU1NU1NTe3s7xGgXsPwEFvL0ng+E9MpPBqanp+1TVxj63LlzafX6m7IyN18fSpwevgRDbqUVK7RCZxdnGv5iFfaMjvQixkb7UgYKxI1RG6plEz2jo0kCuzKK4QscrPLR4W4VOhPpkWh44g67WIW+Q6yLOdjFblqFueucG1IZWT/NiIaSstUx30sqAhe7EayUTdiLL2moFbQX1t1JgrXlZaYNbbq04Y+QoqcNczHhzVGFPTLRwKvpPnpN7YnSO9SuLimwWhyALm2Yc4fziBWlCs+Y+mKwfuSwllSrAf8C0xdh9+jIhXCoK5YucrXJhalBe5lhJGTYAWNYda49w9rfTGklGyjVC1+vt331+u4P3mtYtbxp1fKWVcvbVi0//eTD7U8+3PHkw51PPdyNWP1wn4rB1Q8PqRgx8fx//TvXqgxykI+9XBi1uDraQWtos+Oph9ufevj0Uw+3PbG85YnlTU8sb3hiefeu9zASb/Wq9PrF9evXv/nmm++++25FRUVVVdXx48fr6upaW1shRujRPoGFNu3zAV+v/OAVi1uUwEKXPzDQ39/f1dV15syZZHpFwK0c1rBdLUqvfPUncKu6krqGrFjpxEOCVqD9ycOWyU84gvaCL9aMwlhYB+ZOQcJ1oktd8SqMcLVnE4S5FQc6jHZZtV5Etavlq5fA0Qj5l0NpxZdvnAg7K3no18g5DG9gKtxFJc80ZEyOyPFBqCWnWXWqY2vCHnAKPiNuJFl4UsB0KvQF4ARdGI5A1V0TipBD3XBXDxS9Y7SCQWAvVXEkqwxLw44allRI0nQXsBwhpXoRKNWLkF6//3u/2/neW7WPPlD/6AONjz7Q/OgDLSvub33s/jOP3d/x+P2diJX396joX3n/gIohJ577L/8VPsXikUEaObyLC6MWV0c7aA1tomW03/LY/egLPaJf9N753tvf//LvJtTryy+/vHHjxm3btu3cufPAgQNHjx7lBSzECD1CkvwRAmgT8oRCIVJ+/BrSq33wilFiuTs0NNTb23v+/Pm2trYUekVArEAtZMmw/AqL9Krd2uuuW8mtOJc4o7hKelrevE1VZh49MtZ/etvtZXdsahsbGA9Ff5po23RnWdmdW+uRHrPh2zl+eJ4NR+sbd5Z9f2tL1LkUuHxHW1CA+f6bKOZe7sGussc/1Kpt2fJ9nXX7hhbHucNDFY9fo/eA2zdX84MU557c89g1ZY8dNJv8ZJkXtpUPX1P28EFOIyLO9aRAQc7duQI9PrLTXYWRTYJHwzaseecd7z+KU77P/cSIK7s44baWMKiLskfej+SHw5mss+T0Qh2i+nW388ko+96mepWj1qSNm76HrBWVHYOVy8rKlgWHnWPwfOPmW7kacfvrTcEZhE+x1KAIK1VfA1qmNkI+da4rDuNQjrHRfSvR3cp99vWcClzDnOgZo0ZUF+iRBoPR8rWBQ4EjQ4bVTwnojlbSpOc58Q2L0EqNhtbrzf/zf1/7i6fe/w837bzlpl233LTnlpv23/JvP/zuvz383f/72HeXfvy9pdW3Lq27dWnDrUubbl3acuvS1luXtjnxsz/6IygVr9AZpJHDu1AS5VELddEC2kFraBMto330UnHLTbtvuemDW25C7xgDRpJQr7/85S/XrVu3adOmd955BwvYQ4cOYQFbX18PMUKPkCRUyc8H3MevgV6xlGW92gevY2Nj9slAS0tLWr3Crbi82LAI+swATon69BVOEk4VPW9VzwT4YSvcQZdLTyv0escbraP94wgS5QDr9fTYwET6aNh+J5Ta4GaGpWzDEXHasJJ1Tc2h9fqrO8tu29riCDcIXLX7V11Tdsebtdg8DDve8UaLfiiB2L9S7UKaJl62/BBuiapHroGFm3E09lLxLTXmXsJ1D73e+mYTq7Z7eBARrGoRVY9dA+fql5CUo25XlmzlT5VeO3HAQ7c63T9+VMKpj36gDeJFaMHLEcgoWM3NI3p3Kr1GZK3XjPEj1Kw7vExCTc2buxfKrbdvOh4sRTkaXmPnkl4HzjduurVsxW71Es0IdLCzCXpVVh0e3P04Fd1D58v1qXn0r867jahSPauq68r+glfePAynrtwfvixVjJmgTW1YalD1RWOwC1g6IOrYJljA8hPzsGERIaV6EbKqG6TXr/9P/92p1Svf/YMb3/vGjTu/ceOub9y49xs3VH7zhqpvLjnyza8c+9ZXTnz7K6e+/ZW6b3+l4dtfaf72V1qcWH3nHfBpXxjkIJ8LoDxqoS5aQDtoDW2iZbSPXtDXzj+88b0/vPHdb9x46mcrMZKEen3mmWdeeumlDRs2YAH7wQcf8BPY2tpaiNE+H4AwoU37+BU6hVRDev1E/WMtlJicnOTPDHR3d2MBjGVwar0ioFRFYFi1eu250N5LaxNc9+oCpcuR9KqWrrhirF5x1qG2gfFxpdc7N58eH5zQMZA8lF63NdgcVNcRcmtGEVZtwqCV8m1bW73r1cShR68pe+QwpXvtOpfSWNhWqV2Oah+v6jkEpz6+j24V/mVz+8aW4R5jWAj31jebzUKGJUueZb3uwd4tjZxmvXKCYuig1mtoSRsN9VGHg6TXXa5wwx+A4wi7BsFKyjxwMaj4gPS6PyTHaEQ8mCzCvXhDzTDcQ0GhNHpwBa7vXSodOoYq/2H6cVA9P218/fayhz903IrT0az02oz0UFfzFqTXN2ur6qeoYatyWKu6PjXh+NQJugK1Xu3FOdY3TmEv4L5xvjjplRYWsGgNfamnUhgtzQjnGsfzzIB6idBHz23UP70hIZJJzXuSYb0iQkr1ImTVIJRe/0Xtz1a++42l7//h0g++uXT3t5bu/dbXKr/1tapv3XDkW0uO/YclJ25ZcuqWJXXfWdLwnSXN31nSYmL1f7wTJsXLc8ZLYy/KoDxqoS5aQDto7ci3b6j69g2V3/4aekFf6PH9by599xv/V+3T0Ou/SKjX1atXP//886+++uqWLVvee++9ffv2HTlypLq6mp8PQJL8+QH+eBYUCpEm1Su/r2UfvLa3tzc0NMTRq1rAhgx7ASfG6lW9vMKlSRccHAF39IxgEbcVev1VGy0Vld3GBwO9HsELX8PKg0q1jfAps+pIkEafR8YPPnENMpWRT2/+jzofOdBuJXYpbtveRhY+iuWlBhW1pg23bWvFSBq2QdwrV1D2ysrxsXpsalYeYL2uWqkfa6gnEsGl3LbN/MKgoJXsykPqasamNq+6E0Zqt92Bley+rfi55RTcSkEr2eWHOK31yp3Qc4Nmq1eKrmEI1NylQ6RaXRBLJ7qrWa9INK6/Q+/A5F5vUk9pP6RHAMTtm06QWzXf29xwfPPtZbf/6rjSyi57AlQO7WJWHCDhNmCZptGvlGkVbFhxQOWQQZdBPWW3rWvoU5sMbX5ASnoUr6YVWD57ikT0f7zJPD3iBht+RS/DFdwpFbj90WVmaMsqWZG00kSBjzdj768+Vo8UqTuGcw7aweDlvCtTFSTN219rxBXbAF1iZXqCjsztZsp6fXp+6ODDZSTT3Y+V2ac0J7fc7jyxQQx1NjlKNXqtRrE7HltOZ+fximG8UuGWieVV6t3RQ8h6/BF6ga9YWcWv/WtxzWjueKMN1xL9Fr9tpbkgDbdta6ujy1g9MRtvw0suzZ1b69QFqR4dEN/fSr/ClV7V8wH7cKCfnlmrj0Mk0GsiyYaUGo2wWxGk1//lf6hf89R7t978wa0377r15r3fv3n/bTdX3nbzodtuPnrbzR/fdvOJ224+dcfNdXfc3HDn15vv/HrLnTdxwKFYPDLk0x/+sZeDMiiPWqiLFtAOWkObaBntoxf0hR7RL3qvf+4pjCShXletWoUF7Nq1a99444233357z549VVVVJ06cgBihR0iSH7/yu1uJ9ep+bGBiYmJYfSSLH7zW1dWl1SvCGJbuGST0G14q+PEWPenHFWnf1MKvTaVXy8pKyPE0rBNavbJnb9/eNkha1J7lIMPeua1RpY1elVu1Z/0yFO7qOGhQL13JqsqnKkEXKDKVW2FV+/tfPeel3wr8pBjGtHod7WujXxieXnllgTDPDfRK1uj1zVN6SRLolVevNtRzg801wQJ2qLt5y/fLHttDnh2sfhN3Pj0lIM/y01iSb3gNxZ7FriZo0XiWg2yLdRmtZJVEfnVisH83HXTtWdbNNaEV7oGHryl76CBp61wjlHfbukaV5iBzqRxW2Ir95Epyq5KssSf7blkl0vsh2e9tqrO7dCg7f2CbHTygnmyqtOmUBEq/GOqRqXx9wOylilavtMt41q1OaRqk7sXMjmIXtVZ5HBK8fdPxoYFdECiZFEdMCRe/mYYCq7p67fxwRdntW06qN6n0+1TOilVZdUv18FDNFrLk9+nVyXDNm0g/XsGnuwpWvWNjy4hKsFVH8CoHyUcOIUGL031q6UqevXNrrdKruiBxyY0Fq9fxMdZr3fjYgVW4KQ7z1asebbXW0YWHurjq+FMuNDYMXi3V8ftJ6VW9JdjWpz6AoZ4PkCXDel2YYaHXf/e//Y8NL67Z9cPv7Pnhd/b+8Dv7f/idyh/eUvXDW47c9R+O3f2t4/d8q/qeb52651sNf0rR/KffajGx+p674VAOpBPmoDxXRAtoB62hTbSM9tEL+kKP6Be9YwwYSUiv5oNZK1asePrpp1944YX169dv3759165dBw8e/PjjjyFGfvwKVUKY0Kb34YEEeuWPDfD7Wh0dHa2trbW1tbH1SoZlpQJaxOIKVWmAy5f0Ss/yYQdcRrho1OoVv4Fx4klwSn9Wr2RMA+mVhei4MoFeI88WdDEjXHfNq0BhfuBrMXo1v/Zprbqt1bjVy9EXq3ZrGr0aqyq+f8cdZY9XnQr0alavWLkYq5oY6qa3v0ILWNyx39eP8Nz1qeL2zSdZr7R6VYspy2OV5FMy7IpdVq9GnY5eyZ7+mg7FjHDdpR+jrEf6M0Bexo/Klcp9yrMm3ByTJs8y2rZoAVqkBSmvhUOgU3d9GrKq8qzZ63hZBUvZAaOlBa8Gy3OaJk/nttcakVZ6JaXqX0gotJt/qg8ARPS6+SSl9ScBOkmvFv6lqD1bQ49cmzfcoT2ronmj2lR6fXyvfuraQplbW+yS07ByH69et7byZeY+HKjbyno97B849YqK7LyyipbJWq80eMyUDpHVK32CDaKhd6Kak+gVETYsIqRUL8J6/YPf+l+bNryy/6/u3v+ffnDgP/2g6i9+cOgvf3D0L39w7K/++MRf/XH1X/3xqfI/bvjrP0K0/M2diNN/c2d7ksAudy/SXIWrox20hjbRMtpHL+gLPaJf9I4xYCQJ9bp8+fInn3zyueeeW7du3datW/nzA/z4FXqEJPndLWiTPzyQWK/2U1n8sYGenh6ssVtaWk6dOhVHrwg2LHwKsbrBhsU50w8HtF7p2avWKy4FZdhgdak8yEtLWpBqvVo/Kl0m0+um0+ZprAl+PnDb9jb/cS2tWw/DLvxMYOAI6VA/DYih174x1qv7Nlfk2St9eABrDXreqpaobNJmtatZPXt9bK+6xC+0vEkO5Q8PGI3qIJli+aMfsNLnB+jdEn4OQHq9dXODeczKL1rNJwdoZXrb6430TI0WpCsq6XGhemJIR4R16axMzcMBpddK//Hr8U3KQDCX9qayng6lp+AlvH0akJFeg7029PMB7E3QKT8cMP5VY1hWyT/dvUqv/NzA6tVKOUmE9YojgyrmfS37vNVjxUH6uJXSK9a2weeu7FtbOoe0a5exXcNNdAa3NNF9QaFsu6W5W+kVS1p1syjnbm3eS/JU61kK/pxASK/OW1shvT56RD+BVVcm/bJHXZb199+krnFd4TcH/e4MPjmg9MpPBtSHXtU/+vDdyhHWK8K3qhdGr//x2n/dsG3r0Qf//tDf/yXi2D/8BeLEP/xF9X/787of/3nDj/+86cd/3vKT+xDtD9zX/uB9Zx+871ySwC53L9Ioj1pcHe2gNbSJltE+d8SdoneMASO5PHmZP07q6nXZsmWrVq169tlnX3nllc2bN/Pj16NHj0KM0CMkCVXyhwfcz2Yl0Cv/c1iUsx8baG5urq6u1npt8n0aDV66WqVy2kKXJq65QK/0wSy91lPm0m9twY8kRPXklJeW+rEph3pRXzk+zmvMBrXyraS8wwP8yt1kuqELt6nWlEy1Lql99UqfXkPBOfQcwOiVPkKgHg4EC9LwJweCtL64R0eDjweQOulVHr9/RcsQClqQnqIXg4/tpY++fricPjlAHw+gj2GpJwCUeOxgYFJ+Xa8XRAjWaOVPr9HepCWncSi/W8UfzFp2cMB5lkrG1Osy1iU9PL3ttQb9yYFd2la3l91GtvqA9PuI+zyU30E6S457ZOfA/odwPlfs15kUlPNQJb0f9dGvIMTb1tX3nT1A9/VOfpOK0mUPHQjetlKfHNBvbbnpBKHbUZ1yMdPvR0qgH7mbwOTYvTvpcnw0+MCZeob7vU319nNX0aAqKw4E+lZVlKPr6aMCeoWrQz1JQA5d4XTM7a8xDvo4we2vN5JwrXPpVYU5p+oVxu3rm2hV2/UhrZPpSQIl9LWhVHvHhpZhlcBLHPezBHphy8LttU8PeH1KTw9wTaJS8HEC/k3Pb5rRpUiWp2Go8WOC/OCVPjZA/9JPv69F0uR/Uxf+x8GhyNCw0OsTP7pr/ZMrT29aX/Pk8hOP/uOJn/79qZ/+ff0jf9/w6N+3rED83ekVf9e+8u/OrvzbjlWI/9qdSaA8aqEuWkA7aA1tomW0j17QF3pEv+gdY8BItF7ZsEavDz744OOPP/7zn/987dq1/PGsvXv38rtb0CMkyR8eYL3yZ7OS6tX9VNbZs2ebmppOnjwZ6JX/RAhHxK0I9ikrdYVSLG+ybXEhkl7V8wH6GArWa+6LNFoSKtmpD2a1bbLvUJFeW523pOwHY2nhCVYc0XpVxtSZxMrD4XelyKFODlp6sx5mPwwjWh7HVUgPre54s85cjvQaX4O97pqUPsfKH2511qf0Gp/Rr/Sr1BJVW5WhVSrdNnTn2LeQ+MW+ep+K9Eov8A0rdquPWLmfstr12DXf21yvbm91wxvUez4Hll1DssOtokRpwOrSeXeIC5wbqOPXxd/dVEc+uu2Nj0hqOpNAzgH7VEN5UynPaRfu6z1b/4ZtGcVere89c+AR92Onx0i7DO3Vn3tVu9x0EFSdUa2FcsCj7/f3UZu3/eqY/ZxW/a++i4n8qo43nb11rwad/woTVL8DDI6gOZSmWcfBLxLtbkDlAxHj15JafauVu15B0z9NpODVLn0wlt8oC0I9h9l0wnyEix4vGOihOa4Eevhw+63mkvnph/rDW+6bYOrT00qvb7YY4dImgHD50VMtXaiH3AP3yKER2qWhhxXoLrJ0tZ/KopUm6RICvaD/jXJswyJCSg0HVvFd57rv+L3fXfvTBxvef6dv366+3e8gBne/M4SoeGd071tj+ygm9r11cd9bk5kHaqEuN4LW0CZaRvvcEXpEv+gdY+g+1z3UNaL1qoL1+pOf/IQfv7700kv87lZFRcXhw4chRugRknQ/mxVLr+6nsoxePwm5lSORXtmw7FNOW3DycAoHO/UbXGoBO0JWYovRIwL1lCBVcBkK+wHVjMN0Fwq9/KTQrkwYSqAc9B4UhfoUhP00lRv6aRrdFWphEoR+mc+fo6JEsCxV4WhUhfoEFYe6nymw6lQrTV5dIrQdSI76w/8mdKY1F+fbzYVFj/qnAUGofxCVhyAFUKilVkYRmcK8o++MPewc9NsLXg7MmyiCfyDrCtc53eoJj3m2q64Nfano98qC8D/XZa49fqmkF7nORUuhl71UnhqhZoeo33PBP9nqOd2nVnD2E6/ant5fvQms6kYmhu050zvcN/LivXf95xt+545r/xXizt/53//od/+PP77uX//gi//mh1/8N3/ypf/zrt/7wt2/d+09X772R1/+HcSfcXz1d/7sK6H40Vd+50/Dm4h7vnLt3V++Fi2gHbSGNtEy2kcv3N1/vuF30ftI/wjuCNetVq8//vGPH3nkkdWrV7/44osbN25866239uzZc+jQIdar/WzWfPTa2Nh44sSJuHpVf26DleoGq5auRVxw5g8O0L9UgXRwjklPZC44zno2RxESpRvuxZcoSKPmwuWgJ6Q29DoUoR6fBVc/TZNe4Os7xAl1C9E1be4uY08n6CGgUSeF+riocSUF/SMr9cl8fbf3IbIgOHpVmD70n08sjKCnhJER5iq8w6WCxb3vQfUAhNfONtxT5kQiBfNJV8FPePmTtvyvaRH8eME+YTBBD3ODqw4Bb1J42mWlOh8VUJ8WoHXrEK43+vWg3Gr+sRa9o8VyNJ/H0n9uMb1hEbENi2HMTF7ONPBCPouBBRD9Lkmg1y/+4z/+4/Lly1mvGzZs2LFjx+7du/mzWdBj9vVKf0hfRUiyyq0ImJR9CrHaNKDTFv6rLlim8TLWlaynPP3v/Gy4BUyZmGEWm5HgN08p9FXohhGoftsBoReeCcJc7voeCK1HKIxJ9d+CM+GsfXDXmTQu9NACk1Zq3i2tQ9/2xjW4MXSof9nhRega4k0Vwd70Qf8kr1DDG+q8wh6flBEcZx3B34iJ/WdiUv51GPVWnl0IKxGrZa9Z+bqLX73gtdceX4oJVrsU1qrqgQBdjXy90W8IjNO+nUXugxnpvoZGIVPc7FqvIcn6YrUR27AU6s2uREFvrCUM+mNmbvjncd6hT7Gr16eeeuqFF17IuV6tW6OhbYuT0UyStdBFz19PYP7+AK3C+A0WSEdJFnrS/gotBoPgX8KUDpSXQYQ9mDB4GEaRKvRLdUeR/MZREMFK0zUm/SNgXqFwBJYM3V29CLXsUhG6V33ZBQYxfzrPj9CljCs7+IUXCX0e9clC8H0SFEgc7rnWYf8abEGGt85KE5H56j9gOL/gE2HOjusL/w8eBmc5uABwMbiR6I8csg0prJeDPzQTuhppLRyIWF2urFT9Fwj5ssQvAHSNMWh5QXlKkXxk1F/+7TR/LNyJ4ACGxGojuCZ1+FZ1I3ygnNA+jUboSCKCg7nAWAy9+ndXOPi+1Vcn3eHqgPIBar1AvjjNf4WA/ylXXy+92h0IPEuqxU/+aGHyIN9lFiEh2rBmpOA300PXJY3NVaQX1phqXYkwy0n1b9WCV6zBPYPTFlgy+PrFbrqObZh72wSbIvyXrRH055/pe5mcr96yEfrz1RThv0h91g3vT/R7kbAKh/1qmQIOfzpxwjlQHKG/0p0i/LPg/AHv8B/tRkTdxKc7JCbvL3brq0VpJWwBROBiErFycSBihCtiu6mUyr/XqRFqkLrAPcufEEDwONWAg8H7kg1m4Y1fhxGrjWBSCUPP1ItAqV7kzrB51asn02iE9IrQhrV/olCF+gOg9BqWNEQPCklPSljqwaL7qDELEdjQC1eOHM7laF50az8i9OtuG/YbtJQruzhCC0nHmCr0wVFXpL1StR+1JT0b6u+/o1BfWELfxRJ8HYv6dqxI8BeuBBF8k4r6vlg37PcYRkJ9p9Y5jlCVlLUKMNyJZBzBoaPwv3UmWdgvoTFnJMEXz9jQ5zck9+jXz9BXdQUXjPnKGeW4RF854yrMsY8VsdWH2UX3JtdCC6RIdZU2qF/nqiP6RR4eRsSwiJSGRZiBcQQyTRiBVb0IrOqFnY4OO80FRGHplSMk2eauQDEtKlrVd3AFnrWqVSKzaksfqgoS+A0cyg8iJEQbdi1Jfkzw955DokyiS/W4Wc+UZs0rSnU5qm+y0jfGOf5pl0J0CxlL1uLGMzdhzVkd+hv0zrSfNKG+cc/7Dr7ga7R1tCP0l2nbiH6xq43IN6d6ob5ItV1vxq5V4MHfDot5ZRbBYaTwvz8xWdivUzTnyDuDHHxyEf7XKSb6IsXQtyiGpex9eaL+5kSWoFGh/cJE3JXad8GqUytSq5Pqmkbq6WLWbuUwhqWSgVs5bIOOVd0IGxbhW9UNX6w2fLHayLphC1GvOoxx6LjjvGolqWDPQltWtY7d4gRXpLBHPFrG9aMNc16DwYTjPCLBLDp16JXmeQp/sUkXunpNSjeA/gZWu5ahW4UXUxzq+1b1t66SHM1XqJ5GsBApPmpr4VBfcK2itfkoh/nS6SDHRPCd/i2IJhuHY0Xj4eYmCj+/ZKKZojXjCI4qR+TLwBOGPU0q9BeDI0LGp/C/FVxdD6cpwjoOLiF2sf4acO87wNXqWH95rZEvxXn85K/+1hZ2jEwJvYty8JO+GE1tqlWC1ivCNWxyyfpu5XDcyuFb1Y1AqV74YrWRXcMWql6NW4Owu7Doi0gNYRaG/tGPRlAr+FUcLsAL52iYEx+MyrlQEHwZ2Qi+xdqEeuyol59nEM5XWKsX42cp9Itobc82RGh1GbKnFqivTty9US02Q3yNh0LRUNXcgJ82sKmjCVHvxofpo+7DRhv1iIOIpgQRqVhc0UDRPM8IjjBFY1VL+jgUDjqVrRwRZbe2HEW0BaEujNZjpymsiMnFgYVdBevlsPWvWQLzt/nyytc8moB87dMJtWlErJ5Kmc3ww4rAsI5kS/hBwWLqdWLo4uTopezHWNK4ODYZxKiOSQqnjMlPHyNeXEwaw35g7glikGKcQv0ZBBv63/IGf4h2vJ8i9M8l+I9yqvA+q6vD+VcP5h8+0N+IiUT4g2uIyAfUJNTfOV1AhI+5d2rSRHBOQyc9VairJUHo68oJdb1NUOirMYihixdN8KYNm08RXOSTCWJkcjIUl0Lh3sUmLiWLsamcxlTmgRkVil5xVjat3/Q3/+m/SEhISJRAbN6wJWTYFtbr9YugV/xewoBQWBAEoQSA0LCGFb0KgiBkGdGrIAhCThC9CoIg5ATRqyAIQk4QvQqCIOSEwtCr+kC+6FUQhFKiAPRq/r1TMr3+7Bf/VMihRykIghDG16v+ZwV506txa2q9/qZQEb0KgpCMJHrN27/aKn69SkiUWOgbT1gwotcFgbFhposL3xJ6ozBY3CEV2gEptPGkBkPVN56wYP7mPqVX50/A5E2v15eGXqcXFb4f+O7VWYvN4g6p0A5IoY0nNTxafeMJCybQq/k7W/nVa0PB67VjzU03renQGz4Ym74wF4kCvHsXd0iFdkAKbTyp4dHqG09YML5e9ScH8qPXWU+vk5nqFerTX21YVpbcgQsjnV6nFpXPP/+c714kdNZis7hDKrQDUmjjSQ2PVt94woKBXi8til6vC+mV/m5/pnoltwbi61hTnhu/ptOrHuUi4d69OmuxWdwhFdoBiTue+ieXLn2yXm9kyELqhuHR6g1hwbBe3T/InS+9foH1ar4TJXO9lidcsAYLWrVXyXFNuc4qr0hdhvYHO529KfQ66fC1rz1Rp5Pzoe6Jr+mey8pituTevTpLscCREBjNvBpJNqRgfgsfW3KS9u4cXN1//AnO91CAuOOJ2UXCYgsYngePVt94woJx9cqGzate6UvN5qvXRNarKDcK1VpUstRZ2ElVUpZx4YLp9Drh8LWvrTqlkxlzatXXyoLq2+/DXRejMRxkvnuR0FmKhYxkgSQbkgbzzOXYkvV+X3A4t99333b6f/yRLGDMcccTs4uExbJ3SHm0+sYTFoynV0Se9Xqe3drR2HlxnnpVdgRGlA7lFa4cOZ26DHALcHl3bxiMbdzha19bWaOTipqVZoVy7zY/B/p0C2+7N7xNJZGhfq68V9cwrQS4d6/OUsxnJF5OigFE6zokG5KGmw21Ybft/HA0KO2XiUGy3rlBh6BtnqXesIPRs0Ytp+S99wYHVpVRxwe5uoDXB4g7nqBH0w637+ytcUcS2jKHJ8hRjdsWKJ+7Q+rebSo/4UXFo9U3nrBgCkKvcOs89Bp6OGDV6anQzYlZxjabrLwDxoapWXDVVuskgCNw7VKqWl3ebg5luYW9TUIphmqaKsrA4TJj7t2rsxSZjySSY3/6A4jWDZFsSJpoFbSnmjP/d1OGaE4SkvVOg1Yu0dsg0eB1R+6sgS3pVuE0lTRZ1Ic/yrjjcXvEPm7Z68tNuJ3pzCCHGqMUcuh/2LwX0K5t93LLXl8qCXi0+sYTFswi6vW6K0qv7NZ56NU1oVEkXs+HX+a7csygjE7GWb12OixZ8tMqnezsrPppsIl02T2veznJCmtevyd1FcXc3BzfvUjoLEXSxpFO2GyynDglOW1INiSNrYKEMgzBOWrG6v+m0WiZdKTpHV0A1Uto8F5H7i5gN70qfkm07lYj4o4ndcs2HU3YtJejJslH8vV71BnnXhL2xWkzWn3jCQtmsfVa7+h1JDO9AjKgQTvQy3LlaNMpyqgnrnpPeTnlh/d6YGwdDl/96rJKnezoqFwWbCJddvdrr91d5ua4hTvcfQou4DUSLgLcu1dnKUIlvUYSjiSa4/5081PNgkg2JI1t1rYSNILU3a/hUPBm4jJpSNM7gQmgF6fNaEded25Jm5+gZOQkxh9P6pZtOpqwaS9HzRH/p5NN+Tqpc726nDaj1TeesGAKYPXaNM/VayGAsZ1zwJV6QCfBurvLyu5eR6kDdLUjhRxTAlmhwqpMkEN1acstFqkC3LtXZykyH0kkx/2pspOWVElLsiFpuLZTEUm3vbvvhg3UVpIyqUl6QHj+wDZLjarcaEdODuGW1AcyUUnnwFjijsdtx+Z4fekUZwadmb3I0fuCUgeW3f1V3TCSgJLYrauG02a0+sYTFozWa+sFFT2Ionk4UAhgbJiR5at64QvuehXb+x8yOWoTvHqXzgBffWg/ZxqC4rYCsmwxN22YnZ3luxcJnaWYz0i8HO4u4QBSziLZkEwdXcG28dW77gp1YUeYrExKkvXuHNqgIW4f235H7qwVtiQNUBGU5G0iGLkl7njcHk3a70vttCOxRyfYGwzGjgSFnJq2mMkLpc1o9Y0nLJiwXsmw+dOr+dzr/P/V1qKDsbXOj7V/UvYna3V6AeDw8t2LhM7KlOhI4o8tUcksDGkB5Lv3PT/58pd/skdvJGBxj0am8Gj1jScsGOh1cf5iVkSvGX/utRDA2Joz4Z9+qFcXZWU/zKxmEty7V2fFIzqS+GNLXXLeQ8oK+e599/1f/vL9u/VGAhb3aGQKj1bfeMKCWUS9LvRfbRUCGFvTojIzM8N3LxI6a7FZ3CEV2gEptPGkhkerbzxhwSyyXjsa6KlrUeu1YVFx716dtdgs7pAK7YAU2nhSw6PVN56wYBZTr+qtraLXq4SExFUebAMtLAet15bF0qv6zMD5Jopi1KsgCFc5sfTKke+HA+ZTWYhi/GCWIAhXOen16j4cuJLPt7bMp7IQxfhlMIIgXOVkpte8fnJA9CoIQjGTVq89rT028qtXeuraxSF6FQSh6Iih114boldBEIS4pNHr+FRPW6+NPD97Fb0KglDEpNXrhcXR69wnnU1dNkSvgiAUHXH0ag2bd702d3NMjoleBUEoMtLq1S5d863X86JXQRCKmXR6ne453Wcjv6vX5q7Olm4O0asgCEVH+tXr4um1u6vlgqxeBUEoUmLotZeivQ+RX72apausXgVBKEbS6XW693SfDtGrIAhCfDLQKz0c+Cxvev20q+WCjUtjU6JXQRCKizR6nZjGotVGPlevSq+tOkSvgiAUHWn12rdYenW+Q1H0ml861tx005oOvVEwFOaoBCE5qfU6Db2e6beR34cDEGtbD0f29Yp7VX/jXtl87tlMb3XVXVCjwE0Rf3i2ZB5mlNMusth4RXnC64qyc32IhAKjQPX6KVavxq2k1/Es67U8uNIryssrOJVD6O4tL7d3cB5ktBDiDy+fEynwg8aQRBNcT8h2z79wlZBGrxen+87228irXi+09Vw43UM/23qmsq/XyD2Au5dXHWxedTOvoYVIeQXtsuVxp6gcfauYtQrfVV4jFi6vqgabbvGgU9yFtM29qoRpgbaAaZlywr3MG69xGkai4fkFna3AHaED4jUc2Y50gW172L3W1thdatOcD0uavtyWaZdtYF4nlKCSOpeKUbKiPFqMe1ZHK8FOoZRJt3qd6T87YOOz/On1yqcXTvfayPrqVd9DwT2q7jFO8m2g7qvwLeikgjvGaSPaCKeB2dQlvL3ANss3LDZtgv6fqGVbeMH4jacani6p1/zuYCjhlAB++USzsARduIW81oLm/Kmn7SvUsrPb9hsdf7QRTlt0cbsP5QO4ZlAvYQtCSZNu9TrTB7Ge0/HZJ/nR67WkV/3vGUiv2V+9avh24BtE3RIGdzmjMDeaXp7wXq9MtBG9w7m1vIpuFS/fK68LMU7L2SDp3N1+KcceL0N0nLypCZd3WyNUvteF24LXWqJdtrZZ1ybvy2ttvifU5nFB3jSVTKOAdiDtN2GLClcDafVql64D+dar+odiKnqnJnKjV0LdErgLvOvez8E27hbz4o/3emWijVicXdSQep2rpOnkcg5neAm7mRv8xm2n3vBUMiRNm2+rBMUspnx0L3KSHQGbw2mQYldAyr5COdhewAm1qA5NKXUtqVSCynFaE0qL9HrVS9dBRN71eiZXeqU7i9EXPd0lNo9IdHeUl5tHa3ov/ufWijRiCbVm7kgnkxpyc/xEopZ1Hb21EBLP3Y7BGV55kKH20Q5VVWfYbYVfPtVBppqqC5vDeW5rwa5QMUUmfTHImP8J1aAA9uOnbiZIeS2ByACEkie1XmcuzmDRqmIQkU+9ftZ7pt9E39TEdHb1imvfYC55uh8MyIveDO4NY/c6tWif1wgXBl5r5i6k25fL8ltDbrPRhC5rWqYcTi0Yr3HTqT+8ICPomLOCt7acpsorIuUjs0h6BBi3NV7y23y3GJGur2gVKjDfE0pQj7p+kLQV/NJBF8JVQ3q9dgyaGMqTXq9Xeu07299rYupilvUqCIKQa9Lr9fygjbzqtf/sQN+5fg7RqyAIRUcavU5eHjw/ZCOPev3ks75zA30dKs71T4teBUEoNuLqtZMif3pFT/0dAzamL86IXgVBKC7S67VzGDGkIs96HTQhehUEofhIq1cW6yLo1T7xhWFFr4IgFB2p9XqZ9dpFMdyVZ712DlGcp5iZFL0KglBkpNHrpcvs1qHuEcRnn3yeP72qpxL6oS9W0aJXQRCKi3R6nR3uHrHx2ad51OtQN6Q+PNhFMXNJ9CoIQpGRgV4vjOZNr19ET7xgViF6FQSh+Eir15ELIzY+z9/q9dPPhy/A6Frtl0WvgiAUG2n0OjU70jOq48Jo/vSKnkzHJFmMQ/QqCEJxkVqvs6TXMcSoCqXX6/Ok19HeMcRIL0kW4xC95o7uC72VHx59651dEhISCQM3CG4TfcPEJr1eSXEkOkRe9TrWN44YpRibnRa95pDevtGR8Ut6QxCECLhBOroH9UZs0uh1ehZyU4oj1+VJr9dBr599Pt4/PmZidnpO9Jo7oFedEgQhCTnQ6xwtIo3l8qrXiYGLiPGBibGBidmZgtFrKf7VTtGrIKQlJ3rtn7AB6eVFr1+AXn89MXhxYugi/Ry4OJdtvQZ/I9n+ReSY3hS9CsJVSdb1Ojc9N94/gRUkRZ71ehFuZb0OQq9XsqxXq0j11+XN36yPwdWp147nvv715wpu1gU0Kgwl0WUkxy130DdE5HUa2dfrzJx2q4o863VygoIkm0O9Ajam8abyrUJnlpebDLp9osX0135Qhrm/cOY5U6GqeF/Q71enMroj9T18nDDVaQuYNinHaX/B+HpVrnD4+nMVsW9Ie+vm4R5O04X9epio9kB0b8zywO+VDljCSvEPQgEdt4WRxcbNIffao2zOQirXx8qhVPR67fW/hl6HJ21cuZxLvdJZMt8tSubSNwp9Xb4rMjqrib6CVNVOnGCokaBRX4xc2HaETZug/ztt2a7dUWWDBHr1rtr490we7GBJ2Zc9cCgVOh2Ek4dyqpGU5YFzInxME1HiH434JRdOPvuaNzioSU7D18vLzfiTnKvckAO9XuFX5xxYU+ZDr+gDep0cuTQ5PMmRP72qsxqcV2s0ArtuWlPhOs6gy6h27P8sbiM27VV3892EW4zIybUUX690OWucCzzIcLaCe4APKYHRh8v79UMZnIPtrz/3HDXBc3dae87uUpuhQ+OcBNWCatviniJOpy4P3CphsMeW96Zjmgqyo9OkDGdrkY8bkaYvt2XaZRtQh0jtVSMKjT/SqAuV1LlUjJIV5dFi3LM6Wmank8w52dfr5Sv86lzFZB71+vmvL0Gvo5dIsiOXrsx+kreHAwq+Mry1KjKNXsl6ZodTRl1f6ofa1LiNcDpa3ZbxEnYzl6R5OIDrN3oV8yyppJ4sLfbxP1tSJ5wSwC/vHCtb0RJ04RbyWguaC9+27llw04xbmjtOXR4gU+MN0xm4U5FznX0aLkIj1yUL7LjF6CvUsrPb9hsdf7QRTlt0cbsP5QO4ZlDPbcFpONfkRq+TE/wafWgSa8o86nV0imNydCqXeqUTSSfI6Cz0dfl2rQpQ0PrOsR6SVpVqI9jSOIVtL351m+MnzPBcdB29tXAyeDiAhL7mWTN8GzgDdEsi4TcVLu+2Rqh8rwu3Ba+1FLuoIzsqN21we6G96coHYG+op6DnUJvAWcq5uygHjQCnF7ckEnZTEy7vtkaofK8LtwWvtUS7bG2zrk3el9eaOVp6vcl7vTLRRkI9UkHeNJWcU0A7kPabCKq5HeWSrOsVL8pJrCMUkyOTkF6e/mIW6XVsysYnWderPkXAeMrRGUNbJDKLOt9Gf7Zc8BX/hNnt4uYlq27LJEzosmawlMOp7BBXr3SFmx2hMjwbPj4m31YJillM+ehe5HhduGW88il2URfO/RnaFUbvjV0+sjvYjlbkHPwsmuNmSdlXKAfbmIJ5Nc97vTLRRqKoDk0p53REK7sZbsEck329zl6BVVXQa/S86nVqfFrH2HTW9RoX67iY4GRn03t5IgO9mnwk6VboeK48yFD7aIfrC7ut8MvTLRW6O0wznOQubA7nua0Fu0LFCHvfBXXCtRWUxfXSlNev4RM1gpq66yTT4Z8mo8CPG3Li98Ugo7zcPCvVe/E/t1akER8UwH781M0EKa8l4AzASeacHOj1E3r+aSKfev3n6YmZ6fGZKYrpT+aKQ698jUShdUAYvaMwSPPsFde5+WAW3SWcpd+BsRnmZjBlgrdonNbUg2mNLu/2lbAL7wZyW1Nv0ehdXjHCtmTOCdU1abPTqZSyvNuvf4pR0TTjFKM8Myp/UkFGMADOKqTjlqSvaBUq4Bwo3uvUon1eI1xYQz3q+kHSVvBLB12oMpHTkSuyrlesGun5p3mNnj+9/vOvlV5NLJperw58vQoZkte7XLDAxRH35o6c6NV5BJpXvc5MXqa4SPHplU9Fr7lD9Lpg1FJLDJtPaJ2bR7nmQq9zn0xPTKugRSResudXrxdnENMXZz4RveYS0asgpCUXeg3eYRqfXozVqwpZveYU0asgpCUnetWrV1rA5nf1irqTOkSvOQV6lT+nLQgpyMWf0zYPB9Q7TBfzq9fLl2ZtfPrJZ6LX3IFz1DcyKSEhkSJwm+gbJjZp9HrlU1iVY+biDKSXP73OXppFiF4FQShS4uiV32HKu16nZm2IXgVBKDpS6/XTK5+SWM07THnW65wK0utnoldBEIqN9Hp13sBfFL1SiF4FQSg64uv1cp71Ojd9RcUcfopeBUEoOtLo9ZPP7Lv3iLzqFTrnf7Il/2pLEIRiJLVeP5m1/6xgKq//rADL1YGOYYpziCEYVvQqCEJxkVqvl8anLrT2XGjrpTjdi0VknvQKr5+v6z5fi+jqqO26OHxJ9CoIQnGRWq9j/eOtH52m+Li97eP2K5ev5E+vHae6Ok51nkPUdF4cmhS9CoJQXKTT61jzsbYWjo9Oz83kVa/araLXXFNRd+H/eeHg7z/8joSERMLADYLbRN8wsUmv16Nt2rCLoFfl1nM150WvOWVPw9Dxrot6QxCECLhBNlf36Y3YpNbraB/02moNm1e9WreerRa95hboVacEQUhCLvTadAR61YbNv17Pi17zgOhVENKSS72SYfOo18vQq3Yr6XXwoug1d4heBSEtOdKrNWy+9cpuPXsy+3p1vl47G1/hkeIbD+2uTL90No+k12vw5XGFRGGOKlNKYxaWrE/HbTBh4/k6gDnR6+EWa9i5mbn86VW7lfTaMZF1vVrTwXo5/ZKkAraqxdcrrlf9q4cJvik2PfZaz8NFn6YL+42nCU9vdG/M8sDp1R0DHTe7gfLlFXEOQhYPFA1AM58mszKShI24mRn2kr5q/AZtyQzHwGRfr71jjUaviPzp9YrV68mOMznVK3AXmPri1LsjGcE9Vr6Gaq2hbdxFqgX6WV5uaqh71GkAe/xeTBHdjs3iMrrLPJBAr97FN48rOA+k7EvpjRIoZQ6rxclDOdVIyvLA7vcI8mk4X/+6s5HnI2ZmwumEg80DCafjZmY434ryoLSbDsjXoc6JXg+1WMPmXa/KrTnXq75DnPtHKY90aXLU1epsA9qyN5Ytb9pFY7yTdwUJu8M0R/8z7WCnLVyQesX/9e8BcycHOZThbNnv61dTZmi6ofJ+/VAG52D76889x7/GvNbU9/WrXWqTj6EGxUyGakG1bXH26nTq8sCtEsLe83SROBuU4KaCKTjjRKbOiB4KVcQOg/K5ElKUCArqzphEI/SKqjb1wQyaBaqu2qtHz5V4KEn6S0zQBaE6cOvjdZBJ0xWC//SmHgqVdXtxJ2XS3nhUj/x/nW1aCBd0tjK8OKlgTvWqDJtfvRq3njmRF70qzTngaPOhN2dX+9HgbnI6VAB11YbNjJZBmvt1c2w6j6R5OIBLDTn6cjTwpU4l9fHR6yVbUiecEsAvz60obEVL0IVbyGstaM7cU4zTcijNuKW549TlATI13jDNwDueK8f/tF91E7wvwTipNZ2j6wc5VJxSQRvlgHapxs1uta0TDDUBgjzdAsG9UN1gf7CbU1zG9q+JNMLpZLhdoCqXdyvaNJU0uSjJldxM4HRu0pHxuI0zXISa0iUXenEqsq7XEdarMexi6PVE7vUaFV8IHGV1zXoFoloMFUAttWEzo2WQ9pp103kkg4cDdAkaKMccHC4G3JJI+E2Fy7utESrf68JtwWstxa7QveGmDW4vtDdd+QDsDfVETaE4/wxv0P9Rln/awnFy1ABY1XSrIydoFQPgMSfB7qd2XFQ7thdgJqp/J/Ber0y0Eb2DsDuDGm51m06bSUMJNixmgE4atbhLjTMpdxfl2ANh8Lq2m5pweac1zsiFXhsONVvDzk3nUa/WrTnWKx1TdURtwtCxplyXsmp0CkS16OagMU7bSnpv0Ive49ayadpnc3NOXL3SBWd2hMo416XNt1WCYhZTProXOV4XbhmvfIpd1IU5V/6uMHpv7PIJdqu6ZiWpFrHaV7qsWyNmjhoM/m8eN+ikGSJwjnkC1JDcNhk/RzWLwpzJe70y0UZS45a36bSZNOBgw5CoWqiWgnPwM8cXZ070WtVsDZtfvRq3tp84NzGQbb3SEWQci5HUDEaFjC7kFOC3tnRV1qJb3bnuuZXUb22F2uFEYerV5CNJFzO/INYZah/tcC9lu63wy9OxCfYC0wwnuQubw3lua8GuUDECTXPJoE64toKyuF6a8lZtCRrBTnpTS3fvbqAwUvxT7dQ51FtQRCWDQxH0gMNlmkISUDJ6zBls2XEFvYTHGq4BqFK5tqvZi/+5tSKNpMbtwqbdJm3aLWmPB+01uW6BIJ1kUk5h3Ua2L85c6bUKeiXDLoJe4db249nXa05wRVlUpHn2ikvVfDCLrjjO0m8O2Ax7T+is4N0DpzVagOmkKe/2lbALvtSpqMJtTb21pXd5xQjbkrlHqK5Jm51OpZTl3X51VgDtdEdiyyCNfP6pMnQOEnYACQ6U7QGFTM0gacfpDh4E9YM9Xp47EoYKOHPkvU4t2uc1woWT4XbhpHnQvKXTmDj9n3HGYPpI0hKXMSDX7LPHJesXJ6VzotdR1isbNv96JbfmQq/qoPnoffOmZPQqCHkgpMwEwHbu7xmbXixyqldEnvV6jpeuRbN6LVpEr8IikEavhWbXnOi1/sMmq9fZfOrVulX0mmtEr4KQlhzp1Ro2v3o1bm3/WPSaW0SvgpCWHOpVGXYx9PoxxbjoNZdAr/LntAUhBbn4c9ojPVqvbNjF0evpj8+KXnNK38Tc3rMTEhISKQK3ib5hYpNerwe1XhF516tyq+hVEIRiJJZejWHzq1f1WED0KghCkZJar8Ok18bF0OsM6ZXdKnoVBKEYSavXOtKrNmxe9WrdKnoVBKEYyUCvB/Oq1yuBXj8SvQqCUHzE0as17GLo9SPRqyAIRUkavV4YrTtAemXD5l2vyq2iV0EQipFYeq3UhhW9CoIgxKWA9WrcKnoVBKEYiaVXjkXV64ToVRCE4iKdXkfqDjSYaJydWgy9tn10RvQqCELRkVavtQcabMxOzYpeBUEQYlHoeoVbRa+CIBQjBa1XdqvoVRCEYiStXk8dqF8cvVq3kl77Ra+CIBQZcfRqDbtIej0mehUEofhIr9f9pFc2rOhVEAQhLvH1ilgMvR4TvQqCUJTE0qsxbN71qtwqehUEoRiJq1dl2Pzq1bh18fXaseamm9Yk/0L2QiU67CKdiCAUJxnodX8J6fWmMkt5hc6LYGWU2kqL66wUvUd3Le5QBeEq42rVq7VMRXlZWj2lttLiOitF79FdiztUQbjKuOr1Sn6lBSzMo5ezWrdBxk3l5Si/plxvhpe7TjFUC7Yii+JwQdWvETvtUkm/DKBiTPkaR44oSelQhWDDtkZD93JUC6F6psGgU0EQssDVrtcEVtG+9WWkfRld7dpiSoW2aliwtlGvWWTa7WiZcDO2oJt2My3cEtXW+3RSF042mGhDgiDMn6tVr3rt5iwTyS8Gaxwv4aWZZMUcMapNF72Ls3WlaBm3QeBu2rSXqeuqRv1dpkG3GOGMUxCE7HG1r141ZByTZa0UTXhpJlkxT69eLYbWu45ek7XMeO1z2k14U/DKu3q1+YIg5Iw0eu0eObWvXkeJ69XkkIg4zUoK7w2lGVtMyZJTQZ4m2OXAL9Lxk1uMlgk342xRMvkg9V4vB6V0TqLB6Dp6SxCEhZNOr8On9tWZKGG96nUkwW9k8V7OdHNci1l0MWSTpBhfX84uLuo4zib9MqEc1iOnEwxyTQcnKM17E7YWadbpiFOCIGSHq1SvgiAIuUb0Ggu90HPQOwRBEJKQiV7rZPUqCIIQF9GrIAhCThC9CoIg5ATRqyAIQk4QvQqCIOQE0asgCEJOEL0KgiDkhMLU6/W51mtnZ+d7giAIsYE0tD5ik1qvQ93DNYum16M51CsOVl9fn94QBEFICXQBaeiN2MTRqzVsSelVpwRBEGIgeo2L6FUQhIzInV45LoteBUG4OhG9xiWjIzW8/6mn9g/rDY9U+xaPxR5V0H8mI5HjXDq4R2YeRylt9cU48qLXuGR2pJo2/u3GJp32iH+abck8XBnpu8CUmIQTi+6NWR6oju0Ri44kxdhsrSjxD5otGb/KvMlpF1ls3Jwfrz3Kzs343bFTeuPGp3gEhNMl9unM0ED86tExJs5NhC0Zv0oSRK9xyfBIJb/v53Ga80C6vlz7RWbm5KGcaidleRA9PiYns1lH2zHEbyezHhdGPvuaNzioSc4ZWS8342/aGLRL6SbnQAXXEA3B5DZtdMboV48OcTGuh9LSq3FrvvRKlyFDJ5ouAvccmyuU8hm115y8INvUChd0toJrOtSj13BkO9IFtp/av5+asBerZuN+u0ttBtctE8yGG1HNW5y9Op26PHCraHQWlbdLl2DYw8HgCa8/AgX0TqeWmx09LJThbC3+cU7Xl9sy7QofBrVXjSg0/kijLlRS51IxSibUk2476MLBbz9Bm5EyHmr8bjrUkd3rFnOJVMf/vR5Ng0G2O8Ygw9lawPVA/ytBvX6kIh96pYMaOtWUoY8vb6kN58RzltkRwEWc9vTvZVtSJ5wSwC8f6YjTTNCFW8hrLWjOmQfjNB5KM24F7jt1eYBMjVdTjUTn6STvoI0EI9S13F5seVNGw0WoHduMStiSOuGUAH75SEecZoIu3EJea0FzweSZtH2FWnZ2236j4482wmmLLm73oXwA1wzqJWghUfsJ2kw5Bme/TrvFkGPSSAbDskSru1ncVLRfLoJ8UzLr14PoNS7+kYocSh8uQCfDxfm17O6iHJwnEJzHoAvbFG9qwuXd1giV73XhtuC1lmiXra0WTHZgzvVksUUJ7HXLJCofgL2mY+7XGwnqJsz30lTSpXiPM0jel9eaObR6vcl7vTLRRkI9UkHeNJWc80U7kPabsEWJRO3bbF0wSRmL06VJu1Xc7pjwOUlTncj39cA7S1SvHxWAXrmE+wiJ4Yp0VsyOUFPOybP5tkpQzGLKR/cix+vCLeOVT7GL0BctkWCvg94bu3y04+hDNy4SKWjajNRibK1iOs5Myr5COdjGFMyred7rlYk2EkV1aEo55y5aOdpasvbdNtOMwd1t0jYPiWA8LnacKatbOIdaMztCZcwxR9Lm2ypBMYspH92LnL8t7YcD0OvAIj8cAOr802nwi4XPma43vH9jkKH20Q73fNtthV8+SUcmyV3YHM5zWwt2hYpp1FwoEVQLN6CgLK6aprx+GeY3QrXU08lg2NiJ/yGHf6p8ncPpUjrOmfTFIGPjRvOsVO/F/9xakUZ81PGjn7qZIOW1BOwAgl0J2/faTFjGYNt0026mrY1M20rCkkE60iPvcgojmbvrgZOi17gkOFJ02DV0fGnTnDoGRx47nGJ8Ovkk0mnhPP0E3WYErXBW8Ig91GOkvNdRtAvTtcZtzZEa5bvFNLYxcy1RdZM2O516Kcu7XessBSrhMtF7THM8HndUbhqgFlpx2qSKpowdRzEc53R9RatQAeeo8l6nFu3zGuHCGupR1w+StoJfOtyF0y8XB7Q3UZvJx2CbDKXdXF0b2wlaSVydN3RJU1Xts4c4p9cD5Yte4zOPI6WOs7kEhVjM74jJcS5i3JM3jxO5wOo5RfQal3npFefb/kYUYjG/IybHuWgpYbuKXmMzP70KgnDVInqNi+hVEISMEL3GBUdK/py2IAgxyemf0y41vcqXwQiCkBE5+jKYEtSrIAhCrhG9CoIg5ATRqyAIQk4QvQqCIOQE0asgCEJOEL0KgiDkBNGrIAhCTihMvX6R9GrcKnoVBKEYEb0KgiDkhMLUqzwcyDc4lw888MA/CIIQAbcGbhB9q2SC6FX4zc+efvr5558fHh7GqREEwQO3Bm4Q3Cb6holN5nq9Ph96nRO95pH7779/dHQUJ2VaEIQIuDVwg+A20TdMbDLQ617Ra4mClz84KfpSEgQhAm4Q3Cb6holNer3uzbterxO95hdcN59//vmUIAhJwA0ieo1Nx5qbyjQ3renQOTqVjvglPeZdMcewXvUxFQQhQj70eik/ev1CzvVabqT6m99UlJdX0P+ver1O5oH6J5cufbJebwhC0ZAjvVbvra2hqKupKCm9slMtMF+wmA022MJKi2vKsYlaTsny8kCXrE76iVxdINyHU3FNBdJmbwW5HhnRim4N7oZybJdZA9cNzsiEYil6u287p8H2+8rKlj5Rq7cWTO0TS7PYmiDkC9wgOdKrjora0tErlEa4/mM/6g0DyhmjBmVtSbcKp6mkyaI+3A7C5bllm0hQ0ZYI95gzvY4rli69996lS1fVqI2aVUsJvZUFqMHstSYI+aKE9Jq3t7ZIZMaBrvvIYgZkuruAKzu3il8SrbvVwuWNPfX/ohVpgetiVJsDWK84EQD620YOrEZ6271l967SG9WraF2rMNtLV626V2fdu03nUDVg0glr6TKCUEjo6zSM3jc2Vjp6RR950iuh/RaSptUiZ4bcFy5p8xOUTK1X7jjSO2H0Gq6dO3DdzM3NdSpuuGF5VefrPyr70etVyynNP3kfo3Z2Ir+M/q9zvJIpann5glAwaKcadK4CN4joNS432bWg9RoSEdNRHtIh94VLciJhyYhd3fIEbZoiCSrif25phe5Gb2UL1muHYsmShw92dLx2D11e97zW0XHwYc6hhLrmCOTYfN6VMIcTuk6kliAUHvpaLSvT24aS0muu/1EsiU0T2Ip8prY5QWl+88p1n8KWVIZUaVuStwnfjcBWVFtOuwkruplckHJMlezBej2ngP4q8b9KaPHu1ziBHNrkHU6OyUiVk6KWIBQkuNt0yiHnet3LepW/mJUCR5jpgWtt4YwqZhtcN7Ozszj+YMmSZfs5xexfRjn802SUhXOCMmV3v2oyvDLRHEEoInCDiF4Xm0wsCbsG69tEFXnZ6qJ3ZBvW62nFkiUP7eMUs+8hznnlLj2GJXfdRTkm3y2D/4fKpK4lCMVDPvSar7+YJX/vNa/gusG5aBUEIQm4QUSvwnxgvTYLgpAE0aswT3DdzMzMNAmCkATcIKJXYT7cf//9vb294+PjDYIgRMCtgRskF3/vdVH0Kt9WkFeefvrpNWvW9Pf341e0IAgeuDVwg+A20TdMbESvArF69Wr8csbLH0EQPHBr4AbRt0omiF4FQRByQmq9DnYNn6w4hahWkT+95vFvDgiCIOSEmHrlyNs/K5DVqyAIRY/oVRAEISeIXgVBEHJCYepVPvcqCELRI3oVBEHICaJXQRCEnCB6FQRByAmiV0EQhJwgehUEQcgJoldBEIScIHoVBEHICQWs12Nn7L8sEL0KglB0iF4FQRByguhVEAQhJ4heBUEQckKB6lX9vdd2bdhjZ8b7Ra+CIBQZhavX1mPtHPCs6FUQhKKjgPV6tJ1CGVb0KghC0SF6FQRByAmFrNfT2rBH28dEr4IgFBuFq9eWo6cRSrKnRa+CIBQdBazXI6RXjrH+cdGrIAjFRWHr1RhW9CoIQtFRyHpts4YVvQqCUHQUql6nrzQfbmsmw5Jkx/pEr4IgFBkFq9e55sOtZFglWdGrIAhFRzq9Dp2sqDGRX702HWptIsOSZEWvgiAUHYWr18ZDLU0UJNmxvjHRqyAIxUWB6nUWeq1qbqxqoTjUMtorehUEocjIRK81ly9dzp9eGz5sbqiigGFFr4IgFB2Fq9f6D5vIsEqyoldBEIqOAtbrwSYKJdkR0asgCMVGoep1aq7uYGM9BRl2pHdU9CoIQnFRsHqdratsqKtsVJJtGukRvQqCUGSk1+ueRdJrLelVGzbret0oCIIQD22NzEmr1xPQqzFsfvV6oL72QANLdlhWr4IgFBuFq9dT++spSLL1wxdGRK+CIBQXBarXy1OzNfvqavbXsWRFr4IgFB1x9Gojz3qtNYatE70KglB0FK5eq/fWIliyQxeGRa+CIBQXharXS7P0NxD3nqqmqB3qFr0KglBkFKxeL6vHveoPze49JXoVBKHoKFy9UpfqDTUYdrBL9CoIQpFR2HrlqKjBOESvgiAUF4Wr1+N7qk/oEL0KglB8FLBed1dT7KEQvQqCUHQUvF5VDIheBUEoNgpTr9fPXLr88a6TH++mOL77pOhVEISio4D1+sFJMqyKga5B0asgCMWF6FUQBCEnFKJer4NeJ4OHAwjRqyAIRUdB6vULSq8fnAhWr52iV0EQiowM9Lqb9Xq96FVYGB1rbrppTYfeEISSpZD1evzjXTAsRfb1iju8TDOfO30egoj2mLqRfDoo07EtkHxOTRAWj6LQa/ZXr+WBVCvKyys4lUsqEvRYMHrNeGwLRPQqXB1koFf97DUPeuW3tujhQK5Wr+VlEafinncXcEoBa8qxWV5Bu2x5iFLlaEFgU0MlvEYCVC2dZkJFgw1d0dlbXh7IyPTr90PbtlDGpB6bs6WK0RgwJicrmhNpI5wT5AlCCZO5XvPzwawc61VLMbCKoz+ShRae3R/s5hSXUcII2og2wmlFpMcEZQjbht3rFuM0fpqG9GqTcqJtxSXl2GinHRGl3L54ZzSH/mea000F7TiNC0IpU6h6pc+95lCvGrrl1U1PgnBx16cKo4uKcpXLe70y0Ub0DgfbI3Cru3U50+71ilHabSV7JByb1zt2uzlU56Y1FYlyqC1LuFaoBUEoWa5uvRLQQUSmwM/BNsSj7ar3emWijSRG9Yj/2/JI2NWfm+klvDS1o8ylN7NCorG5vfvHysg0VY7Ca8fbKwilyFWqV1Ilo291UlVIVBEFIKO8XNvV7MX/3FqRRixU2etRJTyXcV50r2lV7+1YUx4UV6WDavMh1dicSek8WwYol4Z+zXBOgkOhdwBqx5YXhNLlKtUrbnCDudHppjcgz1UGQwWMMexepxbt8xrhwkTiHSQhtc0JSjtvZNm9trLZa4ubtqiEqZY5qcfmjF1N351Kshwvk1s1o3bnKAglTDq9Duvvu1Jfy1KSDweEDIE3PTlGcwRByECvZFil19x/MEv0WtCIXgUhHhnoVT8cyI9ec/zBLEEQhFyTWq9D3a5eT+VJr3n4ZwWCIAi5Jq1eq/ee4hC9CoIgZEAMvdbqqKjNl16Dv5glehUEoVhJq9eafXU1+6xeZ0WvgiAIsYinV2VY0asgCEJ84uu1Zm/e9KqfvZ4UvQqCULyk1uvwhZFT+1mvdTV76y5P5UWv6MPoVRtW9CoIQtERQ6/1iBpINq96pX9WoL8JRr4MRhCEYiSmXin21c/mVa/GraJXQRCKkbR6rT3QUHtAG1bpNR9/c+CLpFfzLdyiV0EQipE0eu0ZVXrlEL0KgiDEJq1e6yob6yq1YUWvgiAIcUmt15Ge0fqDTcqwFIuk190nB7pEr4IgFBlp9No71vBhEwyrAnqdE70KgiDEIoZem1WQYWenRa+CIAjxSK3XUei1ivVKkT+9Xha9CoJQ5KTVa2NVC4Ilm1e9Hhe9CoJQzKTX6yHSqwrRqyAIQmzS6rXpUCsHDDsnehUEQYhJar2O9Y03H25TQYbNs16rTYheBUEoPmLrlQy7WHqtHugaEr0KglBcZKLXNtGrIAhCXNLqteVIWzNC6/WK6FUQBCEWMfR62kTJ6RUTeOCBB/6h1MEcMVM953R8eOSj93bvfeeDPaUdmCNmquecEjkgUeSYxCQzvc6UkF5/9vTTzz///PDwMMZT2mCOmCnmq2eenIoDHx4+dnxqelrXLF0wR8wU89UzT4IckChyTOKTiV5Pl5Re77///tHRUYxkutTBHDFTzFfPPDnv7qqYnp75/PPPcWpKG8wRM8V89cyTIAckihyT+KTRa/94y9HTFKWnV7xqxki0gUodzBTz1TNPDl4QoaS6tEofzBTz1TNPghyQKHJM4pNOrxOtR9tN5FevJ/ZUI44jcqZX/HaaujrATEWvHnHuHDkgUeSYxCcTvbbnWa81NgZzplfdUKkjeo0S586RAxJFjkl8Uut1vH+i7Vg7R2nqdfLqQPQaJc6dIwckihyT+MTQ6xkV7a3HSk6vGMZEdql9YmmZZukTtTpHp9IRv2TmYKaLqdfeqrUrNWurenWOTi0ace6cbB4Q5yCsXLmjUecWEHEOCFjoMQkdh0wugvjXTPaurpjHJBnx9YooQb2OZ5Nt95YtXVVj0vduo//XrFpq81ITv2TmLKpeG3cEd1HjDhbL1alX5zBkJJb8EOeAgIUeE/c4IB3/N038ayZ7V1fMY5KMjPR6pfT0it6zB/R67zadZqpXmdXs0lXVwQZtqZ1LV626F5uoFSqpa2ePxdardwvRXRWsXoItVYzujR07Qlk5Ic6dk80DErrn9TEJps66dcuYdFCGd/nbWSPOAQELPSbuHN1rIzKvcEZoK9jgwqrNqh3YRGuRhhZAzGOSjNh6JcOWml7n5uY6s8rrP1KC/NHrehtULb/hhuVVesOAciiDXW7ZhCWzBGa6eHqle4hwTanuB3Xt007eQ7eFvjvMfRHszD5x7pxsHpBgyqEpatgzThmdpqL6CKiVf9hHXiMLI84BAQs9Ju6wMRudjszLn3iS+drj5l4oCUvOi5jHJBmZ6PVMCeq1Ixe8dg9J9p7XKH3w4SVLHj6osimt9Esg090FvM2ssrh61eBOsJK1N4B7J9BNsqMxdG8E91/WiXPnZPOA0OwMoSkbkOkdDUq7Ry1cngiUsnDiHBCw0GOS9jgQmFd44sA7OKoc4R034G0ugJjHJBlXu17P5YrX7i67+zX8v5KkWckJOJVSJtPuYrzNrFIQeiV4seHcAP49U9J69aZC8zVZvNct4x8H4B2cLBPngICFHhM7BSSsPZPOy5FsqKIpzZle9aStZUzMY5KMq1qvs7Oz6DRr7F+25O5Xg/SSZfs5UaZybQ7nIe3kELZkDsBMF02vuNbtEsRe90joW4vuH07pPPfeyKFdC0OvJofmjrQ+BKGcHUERbAeHK+vEOSBgocfEmbVz8iPz8ifOR0QVcVqgPHWUgjaBLblgYh6TZFztej2dTfY95Lz4f2ifzn3lLr3NCUrfddcSbKN4UIqwJfV29lhMvaqL3RDcBHQ/8Xaw39w8ehNk5yZJSJw7J5sHxFOAgg8CoDfz1F47e5Nji5hjl/hwZoE4BwQs9JiEj4OaTXjmIOHEnWvGP27hNoEtqbfnS8xjkoyrWq8YQOvVAWa6eHrNkMitkiPi3DkFcUDyRZwDAuSYxOdq12tzVlFr0xB6x2KDmRaUXtXKQ6OzLKWrVz1hB72jMIhzQMDCj4mefBi9r8CIeUyScVXrdWZmpunqADMtmtVrvohz58gBiSLHJD5Xr17vv//+3t7e8fHxhlIHc8RM5e+9umCOcf6UpxyQKHJM4nP16vXpp59es2ZNf38/VnalDeaImWK+eubJqaisOnzs+MwM/dIubTBH+kP0lVV65kmQAxJFjkl8rl69gtWrV2NNh1fNpQ3miJnqOadjz4EP8esaL4hKOzBHzFTPOSVyQKLIMYlJ4er1ZEUNR+70KgiCkDtEr4IgCDlB9CoIgpATClavsycrTlnDil4FQSg6Clyv2rCiV0EQio4Uev1r0asgCMK8Eb0KgiDkhMLXK8Vg17DoVRCE4iKlXv9G9CoIgjBPRK+CIAg5IZVe7w3r9Sjr9XrRqyAIQnoKU6/Xk173iF4FQShiMtLrnOhVEAQhJgWr18uiV0EQippM9Xqd6FUQBCEOmei1fW76ynVfWCy93id6FQShmBC9CoIg5IT4em0VvQqCIMSnYPU6Wy16FQShmMlcr9eJXgVBENKTgV6PQK9zedPrZdGrIAhFTQHrtaK2eq+OIdGrIAjFRpHotTupXiUkJCQKNgpTr7Nx9MpDFwRBKGS0sByKQK+CIAjFiOhVEAQhJxSYXhP9zQFBEIRiRPQqCIKQExZRr/RtBdatoldBEEqMRdZrzd5ahOhVEITSY1H1OjVbs69Ox9460asgCKWE6FUoFDZWtd615sC/e3RnaQTmghnpuSXhueeee+CBB/6hVMBcMCM9tyTsrax6b/fedz7YUxqBuWBGem4RRK9CQbD+YMsfvHj0llNT3z3zeWkE5oIZYV56hhGeWr36+eefHx4exs1SGmAumBHmpWcYYeeefYePHZ+antYVih/MBTPCvPQMwxSMXveJXq9qfvDs/ltqp/7fzk+nSwXMBTPCvPQMI9x///2jo6O4TXSF4gdzwYwwLz3DCO/uqpienvn888+hhdIAc8GMMC89wzCiV6EgwKvp77bjSi0pMCPMS88wAl5N4zbRRUsFzAjz0jOMgFfTKKC8VDpgRpiXnmEY0atQELBep0qLtHrF2kcXLRUwI9GrRfQqFASsV71RKsTRq94oFUSvLqJXoSCAhr5z+rPJ0gIzSqtXXbRAqH9y6dIn6/XGfChcvfZWrV1b1as3sonoVSh0WK8TOaD2iaVlhqVP1OosnZqY2H4f8u/bzhtZJq1ecY/oovNAjVyTrQm4R2ZeYEZ50StkuXJlRroUvYper1qgoVtOfzqebWpWLS1buqpGb227F4bFFnI5M7w762BGafWqi2YIDbzs3m16CxML0gvCHpn5kie9kit37MjIl6JX0etVC+m17VNcJ1kFPl26qlpvENWkj2r709ubbTCjtHrVRTODJ6A3LDQhjdqrSq3CrxTFvdu4FP2OYSgnqBNUWcghyY9eWZWNO8z6Vdt2JbOjMVkOSuN/apMIGlgIoleh0IGGvtk025ldqpbfcMPyKr3BvP6jsh+9Tvk33FDm78s6mFFqvc7NzemiGYHxYxZ6IxFqlqqYKYccmq5Xk8sp+FjxT86ZF5hR7vWqTRnokZxpRIlM+DNhDmdgk/1qEwtD9CoUOtDQHzZe7sguBx9esuThg3qDee2esnteQ37Zkocfvgc/wnuzDGaUVq+6aEYkmJeC5mVAAbcYp72KbnlCHZmELccmH3q1orR+DXJMZmOKHK3VLNlV9CoUPKzXc1nmtbuhmUq9QVSSPir5p9oqu/s1vSsHxNGrLpoZkXkBmozJDE8zcQ7wNkE0J0PyoFdamDqQMzPTK4s1W3YtVL3OTs2e2lfHIXq9yoGGvtE4g8sju+xfBucs26+3Xr0bqzpsIVdnhvdnG8wotV5nZ2d10QyhcZfd/arewsTufjWYlJmVk2OmTHuCauqAOJu22PzBjHKsV7Jr4EVlzl5Xr3FyqA3K460FInoVCh3Sa8PM6Ryw76HgFfBdr5isJQ/tU8nTp1+5C861W1kFM0qrV100c9x58cRoJoold91FE3SnadNONarktuJVmRc516trSUK5EytTvZYFyr1KoAaTE1T0W1kIoleh0IGG/qB+urW0wIxS6xV3hy5aKmBGOV69JiJqy9T+5PWs3lgohazXehVkWNHr1Qzrtbm0iKNXXbRUwIxyrVe9JA2TkV5h1+w8dlUUh16HRa9XMdDQv6+baiotMKPUep2ZmdFFSwXMaBFWr4uK6FUodH7w7P5/f2zkz+pGG0oFzAUzSv33Xnt7e8fHx3WF4gdzwYzk771aRK9CQbD+YMu/e/7w73808vt1l0okPhrBjFJ8W8Hq1avXrFnT39+PFV9pgLlgRpiXnmGEnRX7Dx87PjNDK77SAHOhbyuoSPxL9K/vW1y97q+3MXxhRPR6NbOusvmPfrEPr6ZLIzAXzEjPLQlPPvkk1np4NV0aYC6YkZ5bEt7fsw9rPbyaLo3AXDAjPbcIoldBEISc8Nf3/RfRqyAIQvZZZL3Wil4FQShR/kb0KgiCkAtS63X16tUvvvhilvXa1NR08uRJ0asgCKVNMr3++Mc/fuSRR1ivGzdufOutt/bs2XPo0CGIEXqcj14HBwcvXLhw9uzZsF4bbIheBUEoJZLp9Sc/+cmKFSuefvrpl1566Y033nj77bcrKioOHz7MeoUkoUoIM5Zep6amxsfHWa/nzp1rbm6urq7Wej3QYEP0KghCKQGhJdTrgw8++Pjjj//85z9fu3btpk2b3nnnnb179x45cgRihB4hSdYrtAl5ptLr7Ows63VoaKinpwc1W1paTp06df2114teBUEoYZLpddmyZatWrXr22WdfeeWVzZs3v/fee/v27Tt69CjECD1CklAlhMl6hUIT6/WTTz5hvU5MTKB0b29vR0dHa2trbW1tVK8DHYOvvfg6BiQhISFRArHx5TdGLoxF9bp8+fInn3zyueeeW7du3datW3fu3HngwIFjx45BjNAjJAlVQpjQJusVIk2q1+npaZQbHh7u6+s7f/58W1tbXV0d9Do3fcXV69naDhgWa9gFRbcbw4ihgo0uisHcxlAhxEBmMRgrOgssvOH5EUzQOzgq1MnyLg8VwxcQzuXdwzGKGOHo5RjjGI1GH8UYxXgo+t2Y8AJrrlAMSGQe/RNw64Xm3kCvR9tnp0iv/OD1hRdeWL9+/fbt23ft2nXw4MGPP/4YYoQeIUmoEsKENiHPxHr9/PPPkTs3N4cSFy9eHBkZ6e/v7+rqam9vb2houPHGG9ev29B2/Ixr2AQRvPcVfMYgfTh/yiAa/N0z2Y+9iNrqTKPi1MkcRk2yOLEnz1F9HLE7ozj5caaxKxonchnhvswwMPJIOPPiQ7GnWh8ZnAs6I+p87T1VTaEujH21NRTq0tpfd4qi/tSBer4v6ioRjRQHG+sPNlF82NRA0UxR1dxI0UJxqKWJorXpcGszRVvzkbaWI6dbjlK06mgP4hhFmw7tBT8+kphPnK/rWr9uPdS3atWqZ555Zu3atfy+1p49e/hTWRAj9AhJQpUQJrQJeUKhECl0mlivMzMzk5OTo6Oj7mezqqurv3T97+EXb2DShCF6XVCElOqGI778xFWgVzfMkBIbloMMG0hWnRd11hJKNq5htV5DhtWSjRiWQ3k2gWqVZ1OpNqIPidQxPnDxS9d9CUvX1atXP//886+++uqWLVv4wSu/r+V+KgvChDYhz6R6/fTTT1mvl5zPZvG7W+rx6xc3vL7hQltPINNoBHrNxLBar4kNG3JiFkPpNWPDVpxaFMM64stPkEp8v6QJspL1VKzwHKfDc2Kuw+lajcoxrBdqmnElS9eYY1glWc+w7gI2JFnlWTasliwZVkmWI6FqY3uWI2ITCTcGOoY2vLbhumuvf+KJJ7B0femllzZs2LBt27YPPvigsrKSH7zy+1rup7JYrxBpSK///M//zHrlz2ahHH94oLe3lx+/1tfXHz9+/Ld/61/CsFjDnj6Z/ClByLA26udlWy3cwInZDTJs4Nn5LWZzbFuEuocD8eUzWCVKtZnZNrBSINOE4dotaXhCzG44HakhJRiz2atmpCaYVrL+swJ1YXsrWZJs5s8KQqoNPJvQsGHPJrJtRCsSnQ3dE4MXIbrf/q3fXrly5c9//vNf/vKX69at449kVVRUHDp0CDKEEvnBK7+vBWFCm/ypLNYrpBrS62fOZ7MmJibs41d+PlBTU3P06FGsYb90/e+tX7d+dgrlFi0uL3pcymngV1yBxkx+YnIxwhsDR8oC3sEJhz2P6pw6F493MUdibnbaj7lUcSUUMxILCsgNioPo4Nann376+eeff/nllzdu3IilK39mABqEDPnJgH3waj82wJ/K8vWKpaz74YGLFy+Ojo7a5wOtra11dXVwdlVVFfyNviNxfY7D665wwhvnPCJxU3hhct0XJCQk8h0rVqx44oknrFvXr1//5ptvvvvuu1AfBAgNQoZQon0yAFXy+1ruxwYS6NV9/IrlLn88q7Ozs729nRewx44dq6ys3LVr19tvv71ly5YNGzageyyen3nmmdWrV69atQojW758+bJlyx588MGf/OQnP1b8oyAIQoHBdoKmICsoC+KCviAxqAxCg9YgNygOooPuID1+6spLVygRYuSPZPGTAfvgNbFe3cevWOjyAnZgYACG7ujoaGtra2hoOHny5JEjR7BCZsNC6lg2v/rqqy+99BJMjzH97Gc/e/LJJzHExx57DGN95JFHMGhBEIQCBIKCpiArKAvigr4gMagMQoPWIDcojt0K6UF9ECA0CBlCiRAjf2YAqoQw3Qevvl4BP37l5wMw8eTkpF3AdnV1nT17tqWlBaviEydOHD58GJ3t3r0bC+Zt27Zt2rQJjl+3bt3atWtfeOGF55577tlnn/3FL36B1TWGi18F4ClBEISCgb0EQUFTkBWUBXFBX5AYVAahQWuQGxQH0UF3kB7UBwFCg5AhlGiXrvyRLPtkgB+8Aq1XNqx9PuAtYAcHB3t7e7ESPnPmTHNzMxsWIsdSuaKiYufOnbA7xrF58+Y33nhj/fr1GNwrr7yCUf7TP/3Tiy++iBELgiAUIBAUNAVZQVkQF/QFiUFlEBq0BrlBcRAddMduhQChQcgQSrRPXd2lq/tkAIT0ys8H7AL20qVL/BECrIF7enrOnz9vDYtF8rFjxw4dOgSvYwQffPDBe++9hwFt374dy2mMD+7HQLG6xu8BQRCEAgSCgqYgKygL4oK+IDGoDEKD1iA3KA6ig+6sW6FByBBK5A8M8FNXXrp6TwaAr1d+PjA3NwcfT09P20cEbFhew2J53NDQUFNTc/z48aNHj2IEEPy+ffv27Nmza9cuKB/jw6IaA31LsUMQBKHAYDtBU5AVlAVxQV+QGFQGoUFrkBsUB9FBd5Aer1vZrfaxACQJVUKY9slAYr1aw/IClg3LjwjGxsZcw549e7atra2pqam+vh59Y9n80UcfYf2MAX344YcY2f79+zHEvXv34jcAhsvsFgRBKAC0kvbsgaCgKcgKyoK4oC9IDCqD0KA1yA2Kg+igO0jPdSuUaB8LsFvdpStgr2q9AqtX+wSWHxF4hu3t7e3q6uro6IDLW1tb0TfUXltbi6FgCQ3ZY2RYTmOIhw8fxliZKkEQhIJBi+nQIWgKsoKyIC7oCxKDyiA0aA1yg+IgOugO0oP6PLfyYwH71NVbuoKQXl3DwseeYbEYHhkZGRwc7Ovru3DhAlzOkj19+jRWzhhKY2MjZI+RnTp1CkOsVmC4FvxCEARBWES0jBTsKMgKyoK4oC9IDCqD0KA1FitEB91BelAfBAgNem71HgsArVRXr4D1yoblRwSuYScnJycmJkZHR3kZi/6wVIbUz58/f+7cOSye29vbMSb4HoNrVrBzBUEQChAIik0FZUFc0BckBpVBaNAa5AbFQXS8aIX6IEBo0HOrfSwAXLcCX69sWF7Auobld7ouXbrEy1iWLHTe39+PNTMG0d3djdHwkhawcAF+AwiCIBQg7CjIiq0FfUFiUBmEBq1BblAci5UXrRAgv5flujXZ0hWE9Aq4RNSw/E4XL2OtZMfGxrBaZs9C8BgNTM+2BVhRA4xVEAShAGFHsa8gLugLEoPK2KqQGxRnxcqLVn4vK45bga9XwOXYsJ5keRlrJYt1svUsBI/RsG2HFBgig+EKgiAUFFpPg4PsK/YpgMqsVaE4V6zRRStI5laQQK+AS6MaS5YNayULedvHBcBVLZiYmMDIGIxSEAShYNGqGh+HuNhgVqnsN7aqu2IFdtEK2JZanWES6xVwHa6vHE2SZc9ayVrPAtidR4NhMRiiIAhCgaOFZXzKC1XAVgXuihWwD9mN7EktzQhlv/nNb3QyAtcE3BDgdrkP9iyr1toWYEwMD1EQBKGQ0cIyMgXsNPZbQqsCLcfkboVaU+mV0W0odMPGs4A7xggsPCYPHq4gCEIhoMUURitMwWbTmktkVaAVmQSt17SGZXSTBt2bQY8iDA9REAShMNGqCqOlZtDKM2ghpoS9qvUKdHYm6N5SogcoCIJQYGhJpUTLLhO0Ul29Mnq/IAiCkCFao8xvfvP/A7SdJjzTYYplAAAAAElFTkSuQmCC
)}
.images-sigma-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAIBAMAAADdFhi7AAAAMFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAv3aB7AAAAD3RSTlMAZt3vq5kQu4lEzTJUInb4ShBbAAAANklEQVQIHWNgYNT//5mBgcE1rQJIMhYwzAJSzBsYjgOpywwMEUAKKGIGpJgYWA4AKe7G10ASADaQCgNKwphkAAAAAElFTkSuQmCC
)}
.images-sigma_calc-png {content:url(
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPkAAAAXCAMAAAD+3xlQAAAAM1BMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADxgEwMAAAAEHRSTlMAMrvvRN1UImYQdquZic0wot1SXwAABEBJREFUWAm9V+m6qyoMBScQwev7P+3NyoCo7bd1t/vwwyhNsjJDnWuXT2nx7cY33/9U+YeGzsk5388fankj/qfK32De3vYbsW7Dbf5HjCflf4TyyKSGmSp93kKz8c3Xg/KJygsr/RbtN4JRO9momGDPXOztU1p6lNBh7coX8Xia8LsvubvC+qXjXw8a7EME+esFjnGd6aKdbLT9Peb267P3sp7kG+Ud/xQWEI/8d2dm50IfmevFQwT1hwvOCwHZMjGjDeNARnxtwq2nPDbKJ/FJDhIOtt+ubo7XLbX1cAKdcRp/zq+Ljhej9Xef5vC6CSrLg5fTrGyVdxJeyXPPEdo4/wf17z0/FMgJ56Di9DEoiFH7OWxY9vUpHbZD9bTKZyl2rf6Vk77JXov61vOmbZwbnlhsvEJ9xx73Lejt9znFyEU5Z3ojMV9SSshissSEFJOOclUrEq6dYGE7soCTPQ8lxsIxjDnlKWYq2CoIMGnzCnK2I8jlLEvnrFruTIdxCnHzhwQBN6/7uuYDHFjkHh+EwzrTSPJuoo3APWvjOqLCjoPTir25L5YXNyh47kmvCyM9ppG+eufpVFhVUMAQ5gpysaO4DPBNzolFAuBA5w1qumvEaffnNSEmZAtrCYWcxnElDwkvXwr9YdhpsbvGWc9WnPDguVT8QsZ3uwMqqGCEU0EudgzejeSb19YraggolJLag2knC9rPsC9Uid9WvlMsWtpMBzQO39mIdl1MUWtMFSU9p63paNuqEDFkg8BKXnu5WEXSmBFkSZ0KChg+KsjVDklGooLBSqocVII9vr80iIg+w7IvLpNp3TBbrUuZFthobf7itLLe2UfgssPPY00CeT6p58SKvKLiaamggCHmFeRqhxjCBUOMjeeB4xd2I6CZ150+D6jtrqO4SlaFroiJVtF8PXPqPaKHNBYXQdP0stvkPJGVPpaoPSmCCkaBqiAv7HB83Gubu6waiIrn+7VSQW+SEcVDZ4ze9v1/SBHsiPjnw9NEPB/MSeK3YnejDSpmrKmu2OhxucctNCXjrkIEGbSCkdQQXtjheqona3NnxQW6kkKeUxXwwQtfgDGp+Zyha+hIuS/bTHNlC54d46AO7Jsq1pFAI0Z2/UrnYCqajQYdng8Y655new4zRgstFdzBKsjVDreSk4u2eQ02YjdnmkCi8PmTTtGYYA5piYm0BdLmSiGFCQ+sQse5Jpe/Q51geiHp+Tph9cg8ePi8oeV9Timzx8zXIfMquINVkKsdzi8pyWWJJGsEgPCvV6mDfjY77pgwd0hTKDg3HglCuZ2Zk7aU0TvA3+OpxU4HVQ3Cz+rtxjoi6Q8EMWntnHFcMSRv9GfYL3L4WuyUOzvfbugPuMxR33PgHgjSHOMxAWHDNoq9f7dy2/P443p3Bf5DoAL3BadU5NpPOPZ30Ohd6O/wHVGn/ah6pv43glGPBqb/A3JIIxDOYVFiAAAAAElFTkSuQmCC
)}
    </style>

</head>
  <body>










    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="navheader"><span class="prev">
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="getting-started.html">Getting Started
              &nbsp;
            </a></span></div><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="id-1"></a>Elasticsearch Reference</h1></div></div><hr></div><!--START_TOC--><div class="toc"><ul class="toc"><li id="book_title"><span>Elasticsearch Reference: <select><option value="master">6.0.0-alpha2</option><option value="5.x">5.x</option><option value="5.5">5.5</option><option value="5.4">5.4 (current)</option><option value="5.3">5.3</option><option value="5.2">5.2</option><option value="5.1">5.1</option><option value="5.0">5.0</option><option value="2.4">2.4</option><option value="2.3">2.3</option><option value="2.2">2.2</option><option value="2.1">2.1</option><option value="2.0">2.0</option><option value="1.7" selected="">1.7</option><option value="1.6">1.6</option><option value="1.5">1.5</option><option value="1.4">1.4</option><option value="1.3">1.3</option><option value="0.90">0.90</option></select></span></li><li><span class="part"><a href="getting-started.html">Getting Started</a></span><ul><li><span class="chapter"><a href="_basic_concepts.html">Basic Concepts</a></span></li><li><span class="chapter"><a href="_installation.html">Installation</a></span></li><li><span class="chapter"><a href="_exploring_your_cluster.html">Exploring Your Cluster</a></span><ul><li><span class="section"><a href="_cluster_health.html">Cluster Health</a></span></li><li><span class="section"><a href="_list_all_indices.html">List All Indices</a></span></li><li><span class="section"><a href="_create_an_index.html">Create an Index</a></span></li><li><span class="section"><a href="_index_and_query_a_document.html">Index and Query a Document</a></span></li><li><span class="section"><a href="_delete_an_index.html">Delete an Index</a></span></li></ul></li><li><span class="chapter"><a href="_modifying_your_data.html">Modifying Your Data</a></span><ul><li><span class="section"><a href="_updating_documents.html">Updating Documents</a></span></li><li><span class="section"><a href="_deleting_documents.html">Deleting Documents</a></span></li><li><span class="section"><a href="_batch_processing.html">Batch Processing</a></span></li></ul></li><li><span class="chapter"><a href="_exploring_your_data.html">Exploring Your Data</a></span><ul><li><span class="section"><a href="_the_search_api.html">The Search API</a></span></li><li><span class="section"><a href="_introducing_the_query_language.html">Introducing the Query Language</a></span></li><li><span class="section"><a href="_executing_searches.html">Executing Searches</a></span></li><li><span class="section"><a href="_executing_filters.html">Executing Filters</a></span></li><li><span class="section"><a href="_executing_aggregations.html">Executing Aggregations</a></span></li></ul></li><li><span class="chapter"><a href="_conclusion.html">Conclusion</a></span></li></ul></li><li><span class="part"><a href="setup.html">Setup</a></span><ul><li><span class="chapter"><a href="setup-configuration.html">Configuration</a></span></li><li><span class="chapter"><a href="setup-service.html">Running as a Service on Linux</a></span></li><li><span class="chapter"><a href="setup-service-win.html">Running as a Service on Windows</a></span></li><li><span class="chapter"><a href="setup-dir-layout.html">Directory Layout</a></span></li><li><span class="chapter"><a href="setup-repositories.html">Repositories</a></span></li><li><span class="chapter"><a href="setup-upgrade.html">Upgrading</a></span></li></ul></li><li><span class="part"><a href="breaking-changes.html">Breaking changes</a></span><ul><li><span class="chapter"><a href="breaking-changes-1.6.html">Breaking changes in 1.6</a></span></li><li><span class="chapter"><a href="breaking-changes-1.5.html">Breaking changes in 1.5</a></span></li><li><span class="chapter"><a href="breaking-changes-1.4.html">Breaking changes in 1.4</a></span></li><li><span class="chapter"><a href="breaking-changes-1.0.html">Breaking changes in 1.0</a></span><ul><li><span class="section"><a href="_system_and_settings.html">System and settings</a></span></li><li><span class="section"><a href="_stats_and_info_apis.html">Stats and Info APIs</a></span></li><li><span class="section"><a href="_indices_apis_2.html">Indices APIs</a></span></li><li><span class="section"><a href="_index_request.html">Index request</a></span></li><li><span class="section"><a href="_search_requests.html">Search requests</a></span></li><li><span class="section"><a href="_multi_fields.html">Multi-fields</a></span></li><li><span class="section"><a href="_stopwords.html">Stopwords</a></span></li><li><span class="section"><a href="_dates_without_years.html">Dates without years</a></span></li><li><span class="section"><a href="_parameters.html">Parameters</a></span></li><li><span class="section"><a href="_return_values.html">Return values</a></span></li><li><span class="section"><a href="_deprecations.html">Deprecations</a></span></li><li><span class="section"><a href="_percolator_2.html">Percolator</a></span></li></ul></li></ul></li><li><span class="part"><a href="api-conventions.html">API Conventions</a></span><ul><li><span class="chapter"><a href="multi-index.html">Multiple Indices</a></span></li><li><span class="chapter"><a href="common-options.html">Common options</a></span></li><li><span class="chapter"><a href="url-access-control.html">URL-based access control</a></span></li></ul></li><li><span class="part"><a href="docs.html">Document APIs</a></span><ul><li><span class="chapter"><a href="docs-index_.html">Index API</a></span></li><li><span class="chapter"><a href="docs-get.html">Get API</a></span></li><li><span class="chapter"><a href="docs-delete.html">Delete API</a></span></li><li><span class="chapter"><a href="docs-update.html">Update API</a></span></li><li><span class="chapter"><a href="docs-multi-get.html">Multi Get API</a></span></li><li><span class="chapter"><a href="docs-bulk.html">Bulk API</a></span></li><li><span class="chapter"><a href="docs-delete-by-query.html">Delete By Query API</a></span></li><li><span class="chapter"><a href="docs-bulk-udp.html">Bulk UDP API</a></span></li><li><span class="chapter"><a href="docs-termvectors.html">Term Vectors</a></span></li><li><span class="chapter"><a href="docs-multi-termvectors.html">Multi termvectors API</a></span></li></ul></li><li><span class="part"><a href="search.html">Search APIs</a></span><ul><li><span class="chapter"><a href="search-search.html">Search</a></span></li><li><span class="chapter"><a href="search-uri-request.html">URI Search</a></span></li><li><span class="chapter"><a href="search-request-body.html">Request Body Search</a></span><ul><li><span class="section"><a href="search-request-query.html">Query</a></span></li><li><span class="section"><a href="search-request-from-size.html">From / Size</a></span></li><li><span class="section"><a href="search-request-sort.html">Sort</a></span></li><li><span class="section"><a href="search-request-source-filtering.html">Source filtering</a></span></li><li><span class="section"><a href="search-request-fields.html">Fields</a></span></li><li><span class="section"><a href="search-request-script-fields.html">Script Fields</a></span></li><li><span class="section"><a href="search-request-fielddata-fields.html">Field Data Fields</a></span></li><li><span class="section"><a href="search-request-post-filter.html">Post filter</a></span></li><li><span class="section"><a href="search-request-highlighting.html">Highlighting</a></span></li><li><span class="section"><a href="search-request-rescore.html">Rescoring</a></span></li><li><span class="section"><a href="search-request-search-type.html">Search Type</a></span></li><li><span class="section"><a href="search-request-scroll.html">Scroll</a></span></li><li><span class="section"><a href="search-request-preference.html">Preference</a></span></li><li><span class="section"><a href="search-request-explain.html">Explain</a></span></li><li><span class="section"><a href="search-request-version.html">Version</a></span></li><li><span class="section"><a href="search-request-index-boost.html">Index Boost</a></span></li><li><span class="section"><a href="search-request-min-score.html">min_score</a></span></li><li><span class="section"><a href="search-request-named-queries-and-filters.html">Named Queries and Filters</a></span></li><li><span class="section"><a href="search-request-inner-hits.html">Inner hits</a></span></li></ul></li><li><span class="chapter"><a href="search-template.html">Search Template</a></span></li><li><span class="chapter"><a href="search-shards.html">Search Shards API</a></span></li><li><span class="chapter"><a href="search-aggregations.html">Aggregations</a></span><ul><li><span class="section"><a href="search-aggregations-metrics-min-aggregation.html">Min Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-metrics-max-aggregation.html">Max Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-metrics-sum-aggregation.html">Sum Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-metrics-avg-aggregation.html">Avg Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-metrics-stats-aggregation.html">Stats Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-metrics-extendedstats-aggregation.html">Extended Stats Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-metrics-valuecount-aggregation.html">Value Count Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-metrics-percentile-aggregation.html">Percentiles Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-metrics-percentile-rank-aggregation.html">Percentile Ranks Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-metrics-cardinality-aggregation.html">Cardinality Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-metrics-geobounds-aggregation.html">Geo Bounds Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-metrics-top-hits-aggregation.html">Top hits Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-metrics-scripted-metric-aggregation.html">Scripted Metric Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-global-aggregation.html">Global Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-filter-aggregation.html">Filter Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-filters-aggregation.html">Filters Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-missing-aggregation.html">Missing Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-nested-aggregation.html">Nested Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-reverse-nested-aggregation.html">Reverse nested Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-children-aggregation.html">Children Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-terms-aggregation.html">Terms Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-significantterms-aggregation.html">Significant Terms Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-range-aggregation.html">Range Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-daterange-aggregation.html">Date Range Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-iprange-aggregation.html">IPv4 Range Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-histogram-aggregation.html">Histogram Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-datehistogram-aggregation.html">Date Histogram Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-geodistance-aggregation.html">Geo Distance Aggregation</a></span></li><li><span class="section"><a href="search-aggregations-bucket-geohashgrid-aggregation.html">GeoHash grid Aggregation</a></span></li></ul></li><li><span class="chapter"><a href="search-facets.html">Facets</a></span><ul><li><span class="section"><a href="search-facets-terms-facet.html">Terms Facet</a></span></li><li><span class="section"><a href="search-facets-range-facet.html">Range Facets</a></span></li><li><span class="section"><a href="search-facets-histogram-facet.html">Histogram Facets</a></span></li><li><span class="section"><a href="search-facets-date-histogram-facet.html">Date Histogram Facet</a></span></li><li><span class="section"><a href="search-facets-filter-facet.html">Filter Facets</a></span></li><li><span class="section"><a href="search-facets-query-facet.html">Query Facets</a></span></li><li><span class="section"><a href="search-facets-statistical-facet.html">Statistical Facet</a></span></li><li><span class="section"><a href="search-facets-terms-stats-facet.html">Terms Stats Facet</a></span></li><li><span class="section"><a href="search-facets-geo-distance-facet.html">Geo Distance Facets</a></span></li><li><span class="section"><a href="search-facets-migrating-to-aggs.html">Migrating to aggregations</a></span></li></ul></li><li><span class="chapter"><a href="search-suggesters.html">Suggesters</a></span><ul><li><span class="section"><a href="search-suggesters-term.html">Term suggester</a></span></li><li><span class="section"><a href="search-suggesters-phrase.html">Phrase Suggester</a></span></li><li><span class="section"><a href="search-suggesters-completion.html">Completion Suggester</a></span></li><li><span class="section"><a href="suggester-context.html">Context Suggester</a></span></li></ul></li><li><span class="chapter"><a href="search-multi-search.html">Multi Search API</a></span></li><li><span class="chapter"><a href="search-count.html">Count API</a></span></li><li><span class="chapter"><a href="search-exists.html">Search Exists API</a></span></li><li><span class="chapter"><a href="search-validate.html">Validate API</a></span></li><li><span class="chapter"><a href="search-explain.html">Explain API</a></span></li><li><span class="chapter"><a href="search-percolate.html">Percolator</a></span></li><li><span class="chapter"><a href="search-more-like-this.html">More Like This API</a></span></li><li><span class="chapter"><a href="search-field-stats.html">Field stats API</a></span></li></ul></li><li><span class="part"><a href="indices.html">Indices APIs</a></span><ul><li><span class="chapter"><a href="indices-create-index.html">Create Index</a></span></li><li><span class="chapter"><a href="indices-delete-index.html">Delete Index</a></span></li><li><span class="chapter"><a href="indices-get-index.html">Get Index</a></span></li><li><span class="chapter"><a href="indices-exists.html">Indices Exists</a></span></li><li><span class="chapter"><a href="indices-open-close.html">Open / Close Index API</a></span></li><li><span class="chapter"><a href="indices-put-mapping.html">Put Mapping</a></span></li><li><span class="chapter"><a href="indices-get-mapping.html">Get Mapping</a></span></li><li><span class="chapter"><a href="indices-get-field-mapping.html">Get Field Mapping</a></span></li><li><span class="chapter"><a href="indices-types-exists.html">Types Exists</a></span></li><li><span class="chapter"><a href="indices-delete-mapping.html">Delete Mapping</a></span></li><li><span class="chapter"><a href="indices-aliases.html">Index Aliases</a></span></li><li><span class="chapter"><a href="indices-update-settings.html">Update Indices Settings</a></span></li><li><span class="chapter"><a href="indices-get-settings.html">Get Settings</a></span></li><li><span class="chapter"><a href="indices-analyze.html">Analyze</a></span></li><li><span class="chapter"><a href="indices-templates.html">Index Templates</a></span></li><li><span class="chapter"><a href="indices-warmers.html">Warmers</a></span></li><li><span class="chapter"><a href="indices-status.html">Status</a></span></li><li><span class="chapter"><a href="indices-stats.html">Indices Stats</a></span></li><li><span class="chapter"><a href="indices-segments.html">Indices Segments</a></span></li><li><span class="chapter"><a href="indices-recovery.html">Indices Recovery</a></span></li><li><span class="chapter"><a href="indices-clearcache.html">Clear Cache</a></span></li><li><span class="chapter"><a href="indices-flush.html">Flush</a></span><ul><li><span class="section"><a href="indices-synced-flush.html">Synced Flush</a></span></li></ul></li><li><span class="chapter"><a href="indices-refresh.html">Refresh</a></span></li><li><span class="chapter"><a href="indices-optimize.html">Optimize</a></span></li><li><span class="chapter"><a href="indices-shadow-replicas.html">Shadow replica indices</a></span><ul><li><span class="section"><a href="_node_level_settings_related_to_shadow_replicas.html">Node level settings related to shadow replicas</a></span></li></ul></li><li><span class="chapter"><a href="indices-upgrade.html">Upgrade</a></span></li></ul></li><li><span class="part"><a href="cat.html">cat APIs</a></span><ul><li><span class="chapter"><a href="cat-alias.html">cat aliases</a></span></li><li><span class="chapter"><a href="cat-allocation.html">cat allocation</a></span></li><li><span class="chapter"><a href="cat-count.html">cat count</a></span></li><li><span class="chapter"><a href="cat-fielddata.html">cat fielddata</a></span></li><li><span class="chapter"><a href="cat-health.html">cat health</a></span></li><li><span class="chapter"><a href="cat-indices.html">cat indices</a></span></li><li><span class="chapter"><a href="cat-master.html">cat master</a></span></li><li><span class="chapter"><a href="cat-nodes.html">cat nodes</a></span></li><li><span class="chapter"><a href="cat-pending-tasks.html">cat pending tasks</a></span></li><li><span class="chapter"><a href="cat-plugins.html">cat plugins</a></span></li><li><span class="chapter"><a href="cat-recovery.html">cat recovery</a></span></li><li><span class="chapter"><a href="cat-thread-pool.html">cat thread pool</a></span></li><li><span class="chapter"><a href="cat-shards.html">cat shards</a></span><ul><li><span class="section"><a href="index-pattern.html">Index pattern</a></span></li><li><span class="section"><a href="relocation.html">Relocation</a></span></li><li><span class="section"><a href="states.html">Shard states</a></span></li></ul></li><li><span class="chapter"><a href="cat-segments.html">cat segments</a></span></li></ul></li><li><span class="part"><a href="cluster.html">Cluster APIs</a></span><ul><li><span class="chapter"><a href="cluster-health.html">Cluster Health</a></span></li><li><span class="chapter"><a href="cluster-state.html">Cluster State</a></span></li><li><span class="chapter"><a href="cluster-stats.html">Cluster Stats</a></span></li><li><span class="chapter"><a href="cluster-pending.html">Pending cluster tasks</a></span></li><li><span class="chapter"><a href="cluster-reroute.html">Cluster Reroute</a></span></li><li><span class="chapter"><a href="cluster-update-settings.html">Cluster Update Settings</a></span></li><li><span class="chapter"><a href="cluster-nodes-stats.html">Nodes Stats</a></span></li><li><span class="chapter"><a href="cluster-nodes-info.html">Nodes Info</a></span></li><li><span class="chapter"><a href="cluster-nodes-hot-threads.html">Nodes hot_threads</a></span></li><li><span class="chapter"><a href="cluster-nodes-shutdown.html">Nodes Shutdown</a></span></li></ul></li><li><span class="part"><a href="query-dsl.html">Query DSL</a></span><ul><li><span class="chapter"><a href="query-dsl-queries.html">Queries</a></span><ul><li><span class="section"><a href="query-dsl-match-query.html">Match Query</a></span></li><li><span class="section"><a href="query-dsl-multi-match-query.html">Multi Match Query</a></span></li><li><span class="section"><a href="query-dsl-bool-query.html">Bool Query</a></span></li><li><span class="section"><a href="query-dsl-boosting-query.html">Boosting Query</a></span></li><li><span class="section"><a href="query-dsl-common-terms-query.html">Common Terms Query</a></span></li><li><span class="section"><a href="query-dsl-constant-score-query.html">Constant Score Query</a></span></li><li><span class="section"><a href="query-dsl-dis-max-query.html">Dis Max Query</a></span></li><li><span class="section"><a href="query-dsl-filtered-query.html">Filtered Query</a></span></li><li><span class="section"><a href="query-dsl-flt-query.html">Fuzzy Like This Query</a></span></li><li><span class="section"><a href="query-dsl-flt-field-query.html">Fuzzy Like This Field Query</a></span></li><li><span class="section"><a href="query-dsl-function-score-query.html">Function Score Query</a></span></li><li><span class="section"><a href="query-dsl-fuzzy-query.html">Fuzzy Query</a></span></li><li><span class="section"><a href="query-dsl-geo-shape-query.html">GeoShape Query</a></span></li><li><span class="section"><a href="query-dsl-has-child-query.html">Has Child Query</a></span></li><li><span class="section"><a href="query-dsl-has-parent-query.html">Has Parent Query</a></span></li><li><span class="section"><a href="query-dsl-ids-query.html">Ids Query</a></span></li><li><span class="section"><a href="query-dsl-indices-query.html">Indices Query</a></span></li><li><span class="section"><a href="query-dsl-match-all-query.html">Match All Query</a></span></li><li><span class="section"><a href="query-dsl-mlt-query.html">More Like This Query</a></span></li><li><span class="section"><a href="query-dsl-nested-query.html">Nested Query</a></span></li><li><span class="section"><a href="query-dsl-prefix-query.html">Prefix Query</a></span></li><li><span class="section"><a href="query-dsl-query-string-query.html">Query String Query</a></span></li><li><span class="section"><a href="query-dsl-simple-query-string-query.html">Simple Query String Query</a></span></li><li><span class="section"><a href="query-dsl-range-query.html">Range Query</a></span></li><li><span class="section"><a href="query-dsl-regexp-query.html">Regexp Query</a></span></li><li><span class="section"><a href="query-dsl-span-first-query.html">Span First Query</a></span></li><li><span class="section"><a href="query-dsl-span-multi-term-query.html">Span Multi Term Query</a></span></li><li><span class="section"><a href="query-dsl-span-near-query.html">Span Near Query</a></span></li><li><span class="section"><a href="query-dsl-span-not-query.html">Span Not Query</a></span></li><li><span class="section"><a href="query-dsl-span-or-query.html">Span Or Query</a></span></li><li><span class="section"><a href="query-dsl-span-term-query.html">Span Term Query</a></span></li><li><span class="section"><a href="query-dsl-term-query.html">Term Query</a></span></li><li><span class="section"><a href="query-dsl-terms-query.html">Terms Query</a></span></li><li><span class="section"><a href="query-dsl-top-children-query.html">Top Children Query</a></span></li><li><span class="section"><a href="query-dsl-wildcard-query.html">Wildcard Query</a></span></li><li><span class="section"><a href="query-dsl-minimum-should-match.html">Minimum Should Match</a></span></li><li><span class="section"><a href="query-dsl-multi-term-rewrite.html">Multi Term Query Rewrite</a></span></li><li><span class="section"><a href="query-dsl-template-query.html">Template Query</a></span></li></ul></li><li><span class="chapter"><a href="query-dsl-filters.html">Filters</a></span><ul><li><span class="section"><a href="query-dsl-and-filter.html">And Filter</a></span></li><li><span class="section"><a href="query-dsl-bool-filter.html">Bool Filter</a></span></li><li><span class="section"><a href="query-dsl-exists-filter.html">Exists Filter</a></span></li><li><span class="section"><a href="query-dsl-geo-bounding-box-filter.html">Geo Bounding Box Filter</a></span></li><li><span class="section"><a href="query-dsl-geo-distance-filter.html">Geo Distance Filter</a></span></li><li><span class="section"><a href="query-dsl-geo-distance-range-filter.html">Geo Distance Range Filter</a></span></li><li><span class="section"><a href="query-dsl-geo-polygon-filter.html">Geo Polygon Filter</a></span></li><li><span class="section"><a href="query-dsl-geo-shape-filter.html">GeoShape Filter</a></span></li><li><span class="section"><a href="query-dsl-geohash-cell-filter.html">Geohash Cell Filter</a></span></li><li><span class="section"><a href="query-dsl-has-child-filter.html">Has Child Filter</a></span></li><li><span class="section"><a href="query-dsl-has-parent-filter.html">Has Parent Filter</a></span></li><li><span class="section"><a href="query-dsl-ids-filter.html">Ids Filter</a></span></li><li><span class="section"><a href="query-dsl-indices-filter.html">Indices Filter</a></span></li><li><span class="section"><a href="query-dsl-limit-filter.html">Limit Filter</a></span></li><li><span class="section"><a href="query-dsl-match-all-filter.html">Match All Filter</a></span></li><li><span class="section"><a href="query-dsl-missing-filter.html">Missing Filter</a></span></li><li><span class="section"><a href="query-dsl-nested-filter.html">Nested Filter</a></span></li><li><span class="section"><a href="query-dsl-not-filter.html">Not Filter</a></span></li><li><span class="section"><a href="query-dsl-or-filter.html">Or Filter</a></span></li><li><span class="section"><a href="query-dsl-prefix-filter.html">Prefix Filter</a></span></li><li><span class="section"><a href="query-dsl-query-filter.html">Query Filter</a></span></li><li><span class="section"><a href="query-dsl-range-filter.html">Range Filter</a></span></li><li><span class="section"><a href="query-dsl-regexp-filter.html">Regexp Filter</a></span></li><li><span class="section"><a href="query-dsl-script-filter.html">Script Filter</a></span></li><li><span class="section"><a href="query-dsl-term-filter.html">Term Filter</a></span></li><li><span class="section"><a href="query-dsl-terms-filter.html">Terms Filter</a></span></li><li><span class="section"><a href="query-dsl-type-filter.html">Type Filter</a></span></li></ul></li></ul></li><li><span class="part"><a href="mapping.html">Mapping</a></span><ul><li><span class="chapter"><a href="mapping-fields.html">Fields</a></span><ul><li><span class="section"><a href="mapping-uid-field.html"><code class="literal">_uid</code></a></span></li><li><span class="section"><a href="mapping-id-field.html"><code class="literal">_id</code></a></span></li><li><span class="section"><a href="mapping-type-field.html"><code class="literal">_type</code></a></span></li><li><span class="section"><a href="mapping-source-field.html"><code class="literal">_source</code></a></span></li><li><span class="section"><a href="mapping-all-field.html"><code class="literal">_all</code></a></span></li><li><span class="section"><a href="mapping-analyzer-field.html"><code class="literal">_analyzer</code></a></span></li><li><span class="section"><a href="mapping-boost-field.html"><code class="literal">_boost</code></a></span></li><li><span class="section"><a href="mapping-parent-field.html"><code class="literal">_parent</code></a></span></li><li><span class="section"><a href="mapping-field-names-field.html"><code class="literal">_field_names</code></a></span></li><li><span class="section"><a href="mapping-routing-field.html"><code class="literal">_routing</code></a></span></li><li><span class="section"><a href="mapping-index-field.html"><code class="literal">_index</code></a></span></li><li><span class="section"><a href="mapping-size-field.html"><code class="literal">_size</code></a></span></li><li><span class="section"><a href="mapping-timestamp-field.html"><code class="literal">_timestamp</code></a></span></li><li><span class="section"><a href="mapping-ttl-field.html"><code class="literal">_ttl</code></a></span></li></ul></li><li><span class="chapter"><a href="mapping-types.html">Types</a></span><ul><li><span class="section"><a href="mapping-core-types.html">Core Types</a></span></li><li><span class="section"><a href="mapping-array-type.html">Array Type</a></span></li><li><span class="section"><a href="mapping-object-type.html">Object Type</a></span></li><li><span class="section"><a href="mapping-root-object-type.html">Root Object Type</a></span></li><li><span class="section"><a href="mapping-nested-type.html">Nested Type</a></span></li><li><span class="section"><a href="mapping-ip-type.html">IP Type</a></span></li><li><span class="section"><a href="mapping-geo-point-type.html">Geo Point Type</a></span></li><li><span class="section"><a href="mapping-geo-shape-type.html">Geo Shape Type</a></span></li><li><span class="section"><a href="mapping-attachment-type.html">Attachment Type</a></span></li></ul></li><li><span class="chapter"><a href="mapping-date-format.html">Date Format</a></span></li><li><span class="chapter"><a href="mapping-dynamic-mapping.html">Dynamic Mapping</a></span></li><li><span class="chapter"><a href="mapping-conf-mappings.html">Config Mappings</a></span></li><li><span class="chapter"><a href="mapping-meta.html">Meta</a></span></li><li><span class="chapter"><a href="mapping-transform.html">Transform</a></span><ul><li><span class="section"><a href="_get_transformed.html">Get Transformed</a></span></li><li><span class="section"><a href="_immutable_transformation.html">Immutable Transformation</a></span></li></ul></li></ul></li><li><span class="part"><a href="analysis.html">Analysis</a></span><ul><li><span class="chapter"><a href="analysis-analyzers.html">Analyzers</a></span><ul><li><span class="section"><a href="analysis-standard-analyzer.html">Standard Analyzer</a></span></li><li><span class="section"><a href="analysis-simple-analyzer.html">Simple Analyzer</a></span></li><li><span class="section"><a href="analysis-whitespace-analyzer.html">Whitespace Analyzer</a></span></li><li><span class="section"><a href="analysis-stop-analyzer.html">Stop Analyzer</a></span></li><li><span class="section"><a href="analysis-keyword-analyzer.html">Keyword Analyzer</a></span></li><li><span class="section"><a href="analysis-pattern-analyzer.html">Pattern Analyzer</a></span></li><li><span class="section"><a href="analysis-lang-analyzer.html">Language Analyzers</a></span></li><li><span class="section"><a href="analysis-snowball-analyzer.html">Snowball Analyzer</a></span></li><li><span class="section"><a href="analysis-custom-analyzer.html">Custom Analyzer</a></span></li></ul></li><li><span class="chapter"><a href="analysis-tokenizers.html">Tokenizers</a></span><ul><li><span class="section"><a href="analysis-standard-tokenizer.html">Standard Tokenizer</a></span></li><li><span class="section"><a href="analysis-edgengram-tokenizer.html">Edge NGram Tokenizer</a></span></li><li><span class="section"><a href="analysis-keyword-tokenizer.html">Keyword Tokenizer</a></span></li><li><span class="section"><a href="analysis-letter-tokenizer.html">Letter Tokenizer</a></span></li><li><span class="section"><a href="analysis-lowercase-tokenizer.html">Lowercase Tokenizer</a></span></li><li><span class="section"><a href="analysis-ngram-tokenizer.html">NGram Tokenizer</a></span></li><li><span class="section"><a href="analysis-whitespace-tokenizer.html">Whitespace Tokenizer</a></span></li><li><span class="section"><a href="analysis-pattern-tokenizer.html">Pattern Tokenizer</a></span></li><li><span class="section"><a href="analysis-uaxurlemail-tokenizer.html">UAX Email URL Tokenizer</a></span></li><li><span class="section"><a href="analysis-pathhierarchy-tokenizer.html">Path Hierarchy Tokenizer</a></span></li><li><span class="section"><a href="analysis-classic-tokenizer.html">Classic Tokenizer</a></span></li><li><span class="section"><a href="analysis-thai-tokenizer.html">Thai Tokenizer</a></span></li></ul></li><li><span class="chapter"><a href="analysis-tokenfilters.html">Token Filters</a></span><ul><li><span class="section"><a href="analysis-standard-tokenfilter.html">Standard Token Filter</a></span></li><li><span class="section"><a href="analysis-asciifolding-tokenfilter.html">ASCII Folding Token Filter</a></span></li><li><span class="section"><a href="analysis-length-tokenfilter.html">Length Token Filter</a></span></li><li><span class="section"><a href="analysis-lowercase-tokenfilter.html">Lowercase Token Filter</a></span></li><li><span class="section"><a href="analysis-uppercase-tokenfilter.html">Uppercase Token Filter</a></span></li><li><span class="section"><a href="analysis-ngram-tokenfilter.html">NGram Token Filter</a></span></li><li><span class="section"><a href="analysis-edgengram-tokenfilter.html">Edge NGram Token Filter</a></span></li><li><span class="section"><a href="analysis-porterstem-tokenfilter.html">Porter Stem Token Filter</a></span></li><li><span class="section"><a href="analysis-shingle-tokenfilter.html">Shingle Token Filter</a></span></li><li><span class="section"><a href="analysis-stop-tokenfilter.html">Stop Token Filter</a></span></li><li><span class="section"><a href="analysis-word-delimiter-tokenfilter.html">Word Delimiter Token Filter</a></span></li><li><span class="section"><a href="analysis-stemmer-tokenfilter.html">Stemmer Token Filter</a></span></li><li><span class="section"><a href="analysis-stemmer-override-tokenfilter.html">Stemmer Override Token Filter</a></span></li><li><span class="section"><a href="analysis-keyword-marker-tokenfilter.html">Keyword Marker Token Filter</a></span></li><li><span class="section"><a href="analysis-keyword-repeat-tokenfilter.html">Keyword Repeat Token Filter</a></span></li><li><span class="section"><a href="analysis-kstem-tokenfilter.html">KStem Token Filter</a></span></li><li><span class="section"><a href="analysis-snowball-tokenfilter.html">Snowball Token Filter</a></span></li><li><span class="section"><a href="analysis-phonetic-tokenfilter.html">Phonetic Token Filter</a></span></li><li><span class="section"><a href="analysis-synonym-tokenfilter.html">Synonym Token Filter</a></span></li><li><span class="section"><a href="analysis-compound-word-tokenfilter.html">Compound Word Token Filter</a></span></li><li><span class="section"><a href="analysis-reverse-tokenfilter.html">Reverse Token Filter</a></span></li><li><span class="section"><a href="analysis-elision-tokenfilter.html">Elision Token Filter</a></span></li><li><span class="section"><a href="analysis-truncate-tokenfilter.html">Truncate Token Filter</a></span></li><li><span class="section"><a href="analysis-unique-tokenfilter.html">Unique Token Filter</a></span></li><li><span class="section"><a href="analysis-pattern-capture-tokenfilter.html">Pattern Capture Token Filter</a></span></li><li><span class="section"><a href="analysis-pattern_replace-tokenfilter.html">Pattern Replace Token Filter</a></span></li><li><span class="section"><a href="analysis-trim-tokenfilter.html">Trim Token Filter</a></span></li><li><span class="section"><a href="analysis-limit-token-count-tokenfilter.html">Limit Token Count Token Filter</a></span></li><li><span class="section"><a href="analysis-hunspell-tokenfilter.html">Hunspell Token Filter</a></span></li><li><span class="section"><a href="analysis-common-grams-tokenfilter.html">Common Grams Token Filter</a></span></li><li><span class="section"><a href="analysis-normalization-tokenfilter.html">Normalization Token Filter</a></span></li><li><span class="section"><a href="analysis-cjk-width-tokenfilter.html">CJK Width Token Filter</a></span></li><li><span class="section"><a href="analysis-cjk-bigram-tokenfilter.html">CJK Bigram Token Filter</a></span></li><li><span class="section"><a href="analysis-delimited-payload-tokenfilter.html">Delimited Payload Token Filter</a></span></li><li><span class="section"><a href="analysis-keep-words-tokenfilter.html">Keep Words Token Filter</a></span></li><li><span class="section"><a href="analysis-keep-types-tokenfilter.html">Keep Types Token Filter</a></span></li><li><span class="section"><a href="analysis-classic-tokenfilter.html">Classic Token Filter</a></span></li><li><span class="section"><a href="analysis-apostrophe-tokenfilter.html">Apostrophe Token Filter</a></span></li></ul></li><li><span class="chapter"><a href="analysis-charfilters.html">Character Filters</a></span><ul><li><span class="section"><a href="analysis-mapping-charfilter.html">Mapping Char Filter</a></span></li><li><span class="section"><a href="analysis-htmlstrip-charfilter.html">HTML Strip Char Filter</a></span></li><li><span class="section"><a href="analysis-pattern-replace-charfilter.html">Pattern Replace Char Filter</a></span></li></ul></li><li><span class="chapter"><a href="analysis-icu-plugin.html">ICU Analysis Plugin</a></span></li></ul></li><li><span class="part"><a href="modules.html">Modules</a></span><ul><li><span class="chapter"><a href="modules-cluster.html">Cluster</a></span></li><li><span class="chapter"><a href="modules-discovery.html">Discovery</a></span><ul><li><span class="section"><a href="modules-discovery-azure.html">Azure Discovery</a></span></li><li><span class="section"><a href="modules-discovery-ec2.html">EC2 Discovery</a></span></li><li><span class="section"><a href="modules-discovery-gce.html">Google Compute Engine Discovery</a></span></li><li><span class="section"><a href="modules-discovery-zen.html">Zen Discovery</a></span></li></ul></li><li><span class="chapter"><a href="modules-gateway.html">Gateway</a></span><ul><li><span class="section"><a href="modules-gateway-local.html">Local Gateway</a></span></li></ul></li><li><span class="chapter"><a href="modules-http.html">HTTP</a></span></li><li><span class="chapter"><a href="modules-indices.html">Indices</a></span></li><li><span class="chapter"><a href="modules-memcached.html">memcached</a></span></li><li><span class="chapter"><a href="modules-network.html">Network Settings</a></span></li><li><span class="chapter"><a href="modules-node.html">Node</a></span></li><li><span class="chapter"><a href="modules-tribe.html">Tribe node</a></span></li><li><span class="chapter"><a href="modules-plugins.html">Plugins</a></span></li><li><span class="chapter"><a href="modules-scripting.html">Scripting</a></span></li><li><span class="chapter"><a href="modules-advanced-scripting.html">Text scoring in scripts</a></span></li><li><span class="chapter"><a href="modules-threadpool.html">Thread Pool</a></span></li><li><span class="chapter"><a href="modules-thrift.html">Thrift</a></span></li><li><span class="chapter"><a href="modules-transport.html">Transport</a></span></li><li><span class="chapter"><a href="modules-snapshots.html">Snapshot And Restore</a></span></li></ul></li><li><span class="part"><a href="index-modules.html">Index Modules</a></span><ul><li><span class="chapter"><a href="index-modules-analysis.html">Analysis</a></span></li><li><span class="chapter"><a href="index-modules-allocation.html">Index Shard Allocation</a></span><ul><li><span class="section"><a href="delayed-allocation.html">Delaying allocation when a node leaves</a></span></li><li><span class="section"><a href="recovery-prioritization.html">Index recovery prioritization</a></span></li><li><span class="section"><a href="_total_shards_per_node.html">Total Shards Per Node</a></span></li><li><span class="section"><a href="disk.html">Disk-based Shard Allocation</a></span></li></ul></li><li><span class="chapter"><a href="index-modules-slowlog.html">Index Slow Log</a></span></li><li><span class="chapter"><a href="index-modules-merge.html">Merge</a></span></li><li><span class="chapter"><a href="index-modules-store.html">Store</a></span></li><li><span class="chapter"><a href="index-modules-mapper.html">Mapper</a></span></li><li><span class="chapter"><a href="index-modules-translog.html">Translog</a></span></li><li><span class="chapter"><a href="index-modules-cache.html">Cache</a></span></li><li><span class="chapter"><a href="index-modules-shard-query-cache.html">Shard query cache</a></span></li><li><span class="chapter"><a href="index-modules-fielddata.html">Field data</a></span></li><li><span class="chapter"><a href="fielddata-formats.html">Field data formats</a></span></li><li><span class="chapter"><a href="index-modules-similarity.html">Similarity module</a></span></li></ul></li><li><span class="part"><a href="testing.html">Testing</a></span><ul><li><span class="chapter"><a href="testing-framework.html">Java Testing Framework</a></span><ul><li><span class="section"><a href="why-randomized-testing.html">why randomized testing?</a></span></li><li><span class="section"><a href="using-elasticsearch-test-classes.html">Using the elasticsearch test classes</a></span></li><li><span class="section"><a href="unit-tests.html">unit tests</a></span></li><li><span class="section"><a href="integration-tests.html">integration tests</a></span></li><li><span class="section"><a href="parametrized-tests.html">parameterized tests</a></span></li><li><span class="section"><a href="randomized-testing.html">Randomized testing</a></span></li><li><span class="section"><a href="assertions.html">Assertions</a></span></li></ul></li></ul></li><li><span class="glossary"><a href="glossary.html">Glossary of terms</a></span></li></ul></div><!--END_TOC--></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="navheader"><span class="prev">
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="kibana-guide.html">Introduction
              &nbsp;
            </a></span></div><div class="book" lang="en"><div class="titlepage"><div><div><h1 class="title"><a id="id-2"></a>Kibana User Guide</h1></div></div><hr></div><!--START_TOC--><div class="toc"><ul class="toc"><li id="book_title"><span>Kibana Reference: <select><option value="master">6.0.0-alpha2</option><option value="5.x">5.x</option><option value="5.5">5.5</option><option value="5.4">5.4 (current)</option><option value="5.3">5.3</option><option value="5.2">5.2</option><option value="5.1">5.1</option><option value="5.0">5.0</option><option value="4.6">4.6</option><option value="4.5">4.5</option><option value="4.4">4.4</option><option value="4.3">4.3</option><option value="4.2">4.2</option><option value="4.1">4.1</option><option value="4.0">4.0</option><option value="3.0" selected="">3.0</option></select></span></li><li><span class="chapter"><a href="kibana-guide.html">Introduction</a></span></li><li><span class="chapter"><a href="using-kibana-for-the-first-time.html">10 Minute Walk Through</a></span><ul><li><span class="section"><a href="import-some-data.html">Import some data</a></span></li><li><span class="section"><a href="accessing-the-kibana-interface.html">Accessing the Kibana interface</a></span></li><li><span class="section"><a href="the-first-search.html">The first search</a></span></li><li><span class="section"><a href="configuring-another-index.html">Configuring another index</a></span></li><li><span class="section"><a href="_next_steps.html">Next steps</a></span></li></ul></li><li><span class="chapter"><a href="working-with-queries-and-filters.html">Queries and Filters</a></span><ul><li><span class="section"><a href="our-dashboard.html">Our Dashboard</a></span></li><li><span class="section"><a href="queries.html">Queries</a></span></li><li><span class="section"><a href="multiple-queries.html">Multiple queries</a></span></li><li><span class="section"><a href="colors-and-legends.html">Colors and Legends</a></span></li><li><span class="section"><a href="filters.html">Filters</a></span></li><li><span class="section"><a href="_more_reading.html">More reading</a></span></li></ul></li><li><span class="chapter"><a href="rows-and-panels.html">Rows and Panels</a></span><ul><li><span class="section"><a href="loading-a-blank-dashboard.html">Loading a blank dashboard</a></span></li><li><span class="section"><a href="adding-a-row.html">Adding a row</a></span></li><li><span class="section"><a href="the-row-controls.html">The row controls</a></span></li><li><span class="section"><a href="adding-panels.html">Adding panels</a></span></li><li><span class="section"><a href="collapsing-and-expanding-rows.html">Collapsing and expanding rows</a></span></li><li><span class="section"><a href="editing-rows.html">Editing rows</a></span></li><li><span class="section"><a href="moving-and-removing-panels.html">Moving and Removing panels</a></span></li><li><span class="section"><a href="moving-and-removing-rows.html">Moving and Removing Rows</a></span></li><li><span class="section"><a href="_next_steps_2.html">Next steps</a></span></li></ul></li><li><span class="chapter"><a href="saving-and-loading-dashboards.html">Saving and Loading</a></span><ul><li><span class="section"><a href="saving-your-awesome-dashboard.html">Saving your awesome dashboard</a></span></li><li><span class="section"><a href="recalling-your-dashboard.html">Recalling your dashboard</a></span></li><li><span class="section"><a href="sharing-dashboards.html">Sharing dashboards</a></span></li><li><span class="section"><a href="saving-a-static-dashboard.html">Saving a static dashboard</a></span></li><li><span class="section"><a href="_next_steps_3.html">Next steps</a></span></li></ul></li><li><span class="chapter"><a href="_dashboard_schema.html">Dashboard Schema</a></span><ul><li><span class="section"><a href="services.html">Services</a></span></li><li><span class="section"><a href="pulldown.html">Pulldown</a></span></li><li><span class="section"><a href="nav.html">Nav</a></span></li><li><span class="section"><a href="loader.html">Loader</a></span></li><li><span class="section"><a href="rows-array.html">Rows Array</a></span></li><li><span class="section"><a href="index-settings.html">Index Settings</a></span></li><li><span class="section"><a href="the-rest.html">The Rest</a></span></li><li><span class="section"><a href="importing-schemas.html">Importing Schemas</a></span></li></ul></li><li><span class="chapter"><a href="templated-and-scripted-dashboards.html">Templates and Scripts</a></span><ul><li><span class="section"><a href="the-dashboard-directory.html">The dashboard directory</a></span></li><li><span class="section"><a href="templated-dashboards-.json.html">Templated Dashboards <code class="literal">(.json)</code></a></span></li><li><span class="section"><a href="scripted-dashboards-.js.html">Scripted Dashboards <code class="literal">(.js)</code></a></span></li><li><span class="section"><a href="_parameters.html">Parameters</a></span></li></ul></li><li><span class="part"><a href="panels.html">Panels</a></span><ul><li><span class="chapter"><a href="_bettermap.html">Bettermap</a></span><ul><li><span class="section"><a href="_parameters_2.html">Parameters</a></span></li></ul></li><li><span class="chapter"><a href="_column.html">Column</a></span><ul><li><span class="section"><a href="_parameters_3.html">Parameters</a></span></li></ul></li><li><span class="chapter"><a href="_goal.html">Goal</a></span><ul><li><span class="section"><a href="_parameters_4.html">Parameters</a></span></li></ul></li><li><span class="chapter"><a href="_histogram.html">Histogram</a></span><ul><li><span class="section"><a href="_parameters_5.html">Parameters</a></span></li></ul></li><li><span class="chapter"><a href="_hits.html">Hits</a></span><ul><li><span class="section"><a href="_parameters_6.html">Parameters</a></span></li></ul></li><li><span class="chapter"><a href="_map.html">Map</a></span><ul><li><span class="section"><a href="_parameters_7.html">Parameters</a></span></li></ul></li><li><span class="chapter"><a href="_sparklines.html">Sparklines</a></span><ul><li><span class="section"><a href="_parameters_8.html">Parameters</a></span></li></ul></li><li><span class="chapter"><a href="_table.html">table</a></span><ul><li><span class="section"><a href="_parameters_9.html">Parameters</a></span></li></ul></li><li><span class="chapter"><a href="_terms.html">terms</a></span><ul><li><span class="section"><a href="_parameters_10.html">Parameters</a></span></li></ul></li><li><span class="chapter"><a href="_text.html">text</a></span><ul><li><span class="section"><a href="_parameters_11.html">Parameters</a></span></li></ul></li><li><span class="chapter"><a href="_trends.html">trends</a></span><ul><li><span class="section"><a href="_parameters_12.html">Parameters</a></span></li></ul></li></ul></li></ul></div><!--END_TOC--></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">Getting Started</span></div><div class="navheader"><span class="prev">
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_basic_concepts.html">Basic Concepts
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="getting-started"></a>Getting Started</h1></div></div></div><div class="partintro"><div></div><p>Elasticsearch is a highly scalable open-source full-text search and analytics engine. It allows you to store, search, and analyze big volumes of data quickly and in near real time. It is generally used as the underlying engine/technology that powers applications that have complex search features and requirements.</p><p>Here are a few sample use-cases that Elasticsearch could be used for:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
You run an online web store where you allow your customers to search for products that you sell. In this case, you can use Elasticsearch to store your entire product catalog and inventory and provide search and autocomplete suggestions for them.
</li><li class="listitem">
You want to collect log or transaction data and you want to analyze and mine this data to look for trends, statistics, summarizations, or anomalies. In this case, you can use Logstash (part of the Elasticsearch/Logstash/Kibana stack) to collect, aggregate, and parse your data, and then have Logstash feed this data into Elasticsearch. Once the data is in Elasticsearch, you can run searches and aggregations to mine any information that is of interest to you.
</li><li class="listitem">
You run a price alerting platform which allows price-savvy customers to specify a rule like "I am interested in buying a specific electronic gadget and I want to be notified if the price of gadget falls below $X from any vendor within the next month". In this case you can scrape vendor prices, push them into Elasticsearch and use its reverse-search (Percolator) capability to match price movements against customer queries and eventually push the alerts out to the customer once matches are found.
</li><li class="listitem">
You have analytics/business-intelligence needs and want to quickly investigate, analyze, visualize, and ask ad-hoc questions on a lot of data (think millions or billions of records). In this case, you can use Elasticsearch to store your data and then use Kibana (part of the Elasticsearch/Logstash/Kibana stack) to build custom dashboards that can visualize aspects of your data that are important to you. Additionally, you can use the Elasticsearch aggregations functionality to perform complex business intelligence queries against your data.
</li></ul></div><p>For the rest of this tutorial, I will guide you through the process of getting Elasticsearch up and running, taking a peek inside it, and performing basic operations like indexing, searching, and modifying your data. At the end of this tutorial, you should have a good idea of what Elasticsearch is, how it works, and hopefully be inspired to see how you can use it to either build sophisticated search applications or to mine intelligence from your data.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-node">Basic Concepts</span></div><div class="navheader"><span class="prev"><a href="getting-started.html">
              &nbsp;
              Getting Started</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_installation.html">Installation
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_basic_concepts"></a>Basic Concepts</h2></div></div></div><p>There are a few concepts that are core to Elasticsearch. Understanding these concepts from the outset will tremendously help ease the learning process.</p><h3><a id="_near_realtime_nrt"></a>Near Realtime (NRT)</h3><p>Elasticsearch is a near real time search platform. What this means is there is a slight latency (normally one second) from the time you index a document until the time it becomes searchable.</p><h3><a id="_cluster"></a>Cluster</h3><p>A cluster is a collection of one or more nodes (servers) that together holds your entire data and provides federated indexing and search capabilities across all nodes. A cluster is identified by a unique name which by default is "elasticsearch". This name is important because a node can only be part of a cluster if the node is set up to join the cluster by its name.</p><p>Make sure that you dont reuse the same cluster names in different
environments, otherwise you might end up with nodes joining the wrong cluster.
For instance you could use <code class="literal">logging-dev</code>, <code class="literal">logging-stage</code>, and <code class="literal">logging-prod</code>
for the development, staging, and production clusters.</p><p>Note that it is valid and perfectly fine to have a cluster with only a single node in it. Furthermore, you may also have multiple independent clusters each with its own unique cluster name.</p><h3><a id="_node"></a>Node</h3><p>A node is a single server that is part of your cluster, stores your data, and participates in the clusters indexing and search capabilities. Just like a cluster, a node is identified by a name which by default is a random Marvel character name that is assigned to the node at startup. You can define any node name you want if you do not want the default.  This name is important for administration purposes where you want to identify which servers in your network correspond to which nodes in your Elasticsearch cluster.</p><p>A node can be configured to join a specific cluster by the cluster name. By default, each node is set up to join a cluster named <code class="literal">elasticsearch</code> which means that if you start up a number of nodes on your network andassuming they can discover each otherthey will all automatically form and join a single cluster named <code class="literal">elasticsearch</code>.</p><p>In a single cluster, you can have as many nodes as you want. Furthermore, if there are no other Elasticsearch nodes currently running on your network, starting a single node will by default form a new single-node cluster named <code class="literal">elasticsearch</code>.</p><h3><a id="_index"></a>Index</h3><p>An index is a collection of documents that have somewhat similar characteristics. For example, you can have an index for customer data, another index for a product catalog, and yet another index for order data. An index is identified by a name (that must be all lowercase) and this name is used to refer to the index when performing indexing, search, update, and delete operations against the documents in it.</p><p>In a single cluster, you can define as many indexes as you want.</p><h3><a id="_type"></a>Type</h3><p>Within an index, you can define one or more types. A type is a logical category/partition of your index whose semantics is completely up to you. In general, a type is defined for documents that have a set of common fields. For example, lets assume you run a blogging platform and store all your data in a single index. In this index, you may define a type for user data, another type for blog data, and yet another type for comments data.</p><h3><a id="_document"></a>Document</h3><p>A document is a basic unit of information that can be indexed. For example, you can have a document for a single customer, another document for a single product, and yet another for a single order. This document is expressed in <a class="ulink" href="http://json.org/" target="_top">JSON</a> (JavaScript Object Notation) which is an ubiquitous internet data interchange format.</p><p>Within an index/type, you can store as many documents as you want. Note that although a document physically resides in an index, a document actually must be indexed/assigned to a type inside an index.</p><h3><a id="_shards_amp_replicas"></a>Shards &amp; Replicas</h3><p>An index can potentially store a large amount of data that can exceed the hardware limits of a single node. For example, a single index of a billion documents taking up 1TB of disk space may not fit on the disk of a single node or may be too slow to serve search requests from a single node alone.</p><p>To solve this problem, Elasticsearch provides the ability to subdivide your index into multiple pieces called shards. When you create an index, you can simply define the number of shards that you want. Each shard is in itself a fully-functional and independent "index" that can be hosted on any node in the cluster.</p><p>Sharding is important for two primary reasons:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
It allows you to horizontally split/scale your content volume
</li><li class="listitem">
It allows you to distribute and parallelize operations across shards (potentially on multiple nodes) thus increasing performance/throughput
</li></ul></div><p>The mechanics of how a shard is distributed and also how its documents are aggregated back into search requests are completely managed by Elasticsearch and is transparent to you as the user.</p><p>In a network/cloud environment where failures can be expected anytime, it is very useful and highly recommended to have a failover mechanism in case a shard/node somehow goes offline or disappears for whatever reason. To this end, Elasticsearch allows you to make one or more copies of your indexs shards into what are called replica shards, or replicas for short.</p><p>Replication is important for two primary reasons:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
It provides high availability in case a shard/node fails. For this reason, it is important to note that a replica shard is never allocated on the same node as the original/primary shard that it was copied from.
</li><li class="listitem">
It allows you to scale out your search volume/throughput since searches can be executed on all replicas in parallel.
</li></ul></div><p>To summarize, each index can be split into multiple shards. An index can also be replicated zero (meaning no replicas) or more times. Once replicated, each index will have primary shards (the original shards that were replicated from) and replica shards (the copies of the primary shards).
The number of shards and replicas can be defined per index at the time the index is created. After the index is created, you may change the number of replicas dynamically anytime but you cannot change the number shards after-the-fact.</p><p>By default, each index in Elasticsearch is allocated 5 primary shards and 1 replica which means that if you have at least two nodes in your cluster, your index will have 5 primary shards and another 5 replica shards (1 complete replica) for a total of 10 shards per index.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Each Elasticsearch shard is a Lucene index.  There is a maximum number of documents you can have in a single Lucene index.  As of <a class="ulink" href="https://issues.apache.org/jira/browse/LUCENE-5843" target="_top"><code class="literal">LUCENE-5843</code></a>, the limit is <code class="literal">2,147,483,519</code> (= Integer.MAX_VALUE - 128) documents.
You can monitor shard sizes using the <a class="link" href="cat-shards.html" title="cat shards"><code class="literal">_cat/shards</code></a> api.</p></div></div><p>With that out of the way, lets get started with the fun part</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-node">Installation</span></div><div class="navheader"><span class="prev"><a href="_basic_concepts.html">
              &nbsp;
              Basic Concepts</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_exploring_your_cluster.html">Exploring Your Cluster
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_installation"></a>Installation</h2></div></div></div><p>Elasticsearch requires at least Java 7. Specifically as of this writing, it is recommended that you use the Oracle JDK version 1.8.0_25. Java installation varies from platform to platform so we wont go into those details here. Oracles recommended installation documentation can be found on <a class="ulink" href="http://docs.oracle.com/javase/8/docs/technotes/guides/install/install_overview.html" target="_top">Oracles website</a>. Suffice to say, before you install Elasticsearch, please check your Java version first by running (and then install/upgrade accordingly if needed):</p><div class="pre_wrapper"><pre class="programlisting">java -version
echo $JAVA_HOME</pre></div><p>Once we have Java set up, we can then download and run Elasticsearch. The binaries are available from <a class="ulink" href="http://www.elastic.co/downloads" target="_top"><code class="literal">www.elastic.co/downloads</code></a> along with all the releases that have been made in the past. For each release, you have a choice among a <code class="literal">zip</code> or <code class="literal">tar</code> archive, or a <code class="literal">DEB</code> or <code class="literal">RPM</code> package. For simplicity, lets use the tar file.</p><p>Lets download the Elasticsearch 1.7.6 tar as follows (Windows users should download the zip package):</p><div class="pre_wrapper"><pre class="programlisting">curl -L -O https://download.elastic.co/elasticsearch/elasticsearch/elasticsearch-1.7.6.tar.gz</pre></div><p>Then extract it as follows (Windows users should unzip the zip package):</p><div class="pre_wrapper"><pre class="programlisting">tar -xvf elasticsearch-1.7.6.tar.gz</pre></div><p>It will then create a bunch of files and folders in your current directory. We then go into the bin directory as follows:</p><div class="pre_wrapper"><pre class="programlisting">cd elasticsearch-1.7.6/bin</pre></div><p>And now we are ready to start our node and single cluster (Windows users should run the elasticsearch.bat file):</p><div class="pre_wrapper"><pre class="programlisting">./elasticsearch</pre></div><p>If everything goes well, you should see a bunch of messages that look like below:</p><div class="pre_wrapper"><pre class="programlisting">./elasticsearch
[2014-03-13 13:42:17,218][INFO ][node           ] [New Goblin] version[1.7.6], pid[2085], build[5c03844/2014-02-25T15:52:53Z]
[2014-03-13 13:42:17,219][INFO ][node           ] [New Goblin] initializing ...
[2014-03-13 13:42:17,223][INFO ][plugins        ] [New Goblin] loaded [], sites []
[2014-03-13 13:42:19,831][INFO ][node           ] [New Goblin] initialized
[2014-03-13 13:42:19,832][INFO ][node           ] [New Goblin] starting ...
[2014-03-13 13:42:19,958][INFO ][transport      ] [New Goblin] bound_address {inet[/0:0:0:0:0:0:0:0:9300]}, publish_address {inet[/192.168.8.112:9300]}
[2014-03-13 13:42:23,030][INFO ][cluster.service] [New Goblin] new_master [New Goblin][rWMtGj3dQouz2r6ZFL9v4g][mwubuntu1][inet[/192.168.8.112:9300]], reason: zen-disco-join (elected_as_master)
[2014-03-13 13:42:23,100][INFO ][discovery      ] [New Goblin] elasticsearch/rWMtGj3dQouz2r6ZFL9v4g
[2014-03-13 13:42:23,125][INFO ][http           ] [New Goblin] bound_address {inet[/0:0:0:0:0:0:0:0:9200]}, publish_address {inet[/192.168.8.112:9200]}
[2014-03-13 13:42:23,629][INFO ][gateway        ] [New Goblin] recovered [1] indices into cluster_state
[2014-03-13 13:42:23,630][INFO ][node           ] [New Goblin] started</pre></div><p>Without going too much into detail, we can see that our node named "New Goblin" (which will be a different Marvel character in your case) has started and elected itself as a master in a single cluster. Dont worry yet at the moment what master means. The main thing that is important here is that we have started one node within one cluster.</p><p>As mentioned previously, we can override either the cluster or node name. This can be done from the command line when starting Elasticsearch as follows:</p><div class="pre_wrapper"><pre class="programlisting">./elasticsearch --cluster.name my_cluster_name --node.name my_node_name</pre></div><p>Also note the line marked http with information about the HTTP address (<code class="literal">192.168.8.112</code>) and port (<code class="literal">9200</code>) that our node is reachable from. By default, Elasticsearch uses port <code class="literal">9200</code> to provide access to its REST API. This port is configurable if necessary.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-node">Exploring Your Cluster</span></div><div class="navheader"><span class="prev"><a href="_installation.html">
              &nbsp;
              Installation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_cluster_health.html">Cluster Health
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_exploring_your_cluster"></a>Exploring Your Cluster</h2></div></div></div><h3><a id="_the_rest_api"></a>The REST API</h3><p>Now that we have our node (and cluster) up and running, the next step is to understand how to communicate with it. Fortunately, Elasticsearch provides a very comprehensive and powerful REST API that you can use to interact with your cluster. Among the few things that can be done with the API are as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Check your cluster, node, and index health, status, and statistics
</li><li class="listitem">
Administer your cluster, node, and index data and metadata
</li><li class="listitem">
Perform CRUD (Create, Read, Update, and Delete) and search operations against your indexes
</li><li class="listitem">
Execute advanced search operations such as paging, sorting, filtering, scripting, faceting, aggregations, and many others
</li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-link"><a href="_exploring_your_cluster.html">Exploring Your Cluster</a></span>  <span class="breadcrumb-node">Cluster Health</span></div><div class="navheader"><span class="prev"><a href="_exploring_your_cluster.html">
              &nbsp;
              Exploring Your Cluster</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_list_all_indices.html">List All Indices
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_cluster_health"></a>Cluster Health</h2></div></div></div><p>Lets start with a basic health check, which we can use to see how our cluster is doing. Well be using curl to do this but you can use any tool that allows you to make HTTP/REST calls. Lets assume that we are still on the same node where we started Elasticsearch on and open another command shell window.</p><p>To check the cluster health, we will be using the <a class="link" href="cat.html" title="cat APIs"><code class="literal">_cat</code> API</a>. Remember previously that our node HTTP endpoint is available at port <code class="literal">9200</code>:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_cat/health?v'</pre></div><p>And the response:</p><div class="pre_wrapper"><pre class="programlisting">epoch      timestamp cluster       status node.total node.data shards pri relo init unassign
1394735289 14:28:09  elasticsearch green           1         1      0   0    0    0        0</pre></div><p>We can see that our cluster named "elasticsearch" is up with a green status.</p><p>Whenever we ask for the cluster health, we either get green, yellow, or red. Green means everything is good (cluster is fully functional), yellow means all data is available but some replicas are not yet allocated (cluster is fully functional), and red means some data is not available for whatever reason. Note that even if a cluster is red, it still is partially functional (i.e. it will continue to serve search requests from the available shards) but you will likely need to fix it ASAP since you have missing data.</p><p>Also from the above response, we can see a total of 1 node and that we have 0 shards since we have no data in it yet. Note that since we are using the default cluster name (elasticsearch) and since Elasticsearch uses multicast network discovery by default to find other nodes, it is possible that you could accidentally start up more than one node in your network and have them all join a single cluster. In this scenario, you may see more than 1 node in the above response.</p><p>We can also get a list of nodes in our cluster as follows:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_cat/nodes?v'</pre></div><p>And the response:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_cat/nodes?v'
host         ip        heap.percent ram.percent load node.role master name
mwubuntu1    127.0.1.1            8           4 0.00 d         *      New Goblin</pre></div><p>Here, we can see our one node named "New Goblin", which is the single node that is currently in our cluster.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-link"><a href="_exploring_your_cluster.html">Exploring Your Cluster</a></span>  <span class="breadcrumb-node">List All Indices</span></div><div class="navheader"><span class="prev"><a href="_cluster_health.html">
              &nbsp;
              Cluster Health</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_create_an_index.html">Create an Index
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_list_all_indices"></a>List All Indices</h2></div></div></div><p>Now lets take a peek at our indices:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_cat/indices?v'</pre></div><p>And the response:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_cat/indices?v'
health index pri rep docs.count docs.deleted store.size pri.store.size</pre></div><p>Which simply means we have no indices yet in the cluster.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-link"><a href="_exploring_your_cluster.html">Exploring Your Cluster</a></span>  <span class="breadcrumb-node">Create an Index</span></div><div class="navheader"><span class="prev"><a href="_list_all_indices.html">
              &nbsp;
              List All Indices</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_index_and_query_a_document.html">Index and Query a Document
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_create_an_index"></a>Create an Index</h2></div></div></div><p>Now lets create an index named "customer" and then list all the indexes again:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/customer?pretty'
curl 'localhost:9200/_cat/indices?v'</pre></div><p>The first command creates the index named "customer" using the PUT verb. We simply append <code class="literal">pretty</code> to the end of the call to tell it to pretty-print the JSON response (if any).</p><p>And the response:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/customer?pretty'
{
  "acknowledged" : true
}

curl 'localhost:9200/_cat/indices?v'
health index    pri rep docs.count docs.deleted store.size pri.store.size
yellow customer   5   1          0            0       495b           495b</pre></div><p>The results of the second command tells us that we now have 1 index named customer and it has 5 primary shards and 1 replica (the defaults) and it contains 0 documents in it.</p><p>You might also notice that the customer index has a yellow health tagged to it. Recall from our previous discussion that yellow means that some replicas are not (yet) allocated. The reason this happens for this index is because Elasticsearch by default created one replica for this index. Since we only have one node running at the moment, that one replica cannot yet be allocated (for high availability) until a later point in time when another node joins the cluster. Once that replica gets allocated onto a second node, the health status for this index will turn to green.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-link"><a href="_exploring_your_cluster.html">Exploring Your Cluster</a></span>  <span class="breadcrumb-node">Index and Query a Document</span></div><div class="navheader"><span class="prev"><a href="_create_an_index.html">
              &nbsp;
              Create an Index</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_delete_an_index.html">Delete an Index
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_index_and_query_a_document"></a>Index and Query a Document</h2></div></div></div><p>Lets now put something into our customer index. Remember previously that in order to index a document, we must tell Elasticsearch which type in the index it should go to.</p><p>Lets index a simple customer document into the customer index, "external" type, with an ID of 1 as follows:</p><p>Our JSON document: { "name": "John Doe" }</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/customer/external/1?pretty' -d '
{
  "name": "John Doe"
}'</pre></div><p>And the response:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/customer/external/1?pretty' -d '
{
  "name": "John Doe"
}'
{
  "_index" : "customer",
  "_type" : "external",
  "_id" : "1",
  "_version" : 1,
  "created" : true
}</pre></div><p>From the above, we can see that a new customer document was successfully created inside the customer index and the external type. The document also has an internal id of 1 which we specified at index time.</p><p>It is important to note that Elasticsearch does not require you to explicitly create an index first before you can index documents into it. In the previous example, Elasticsearch will automatically create the customer index if it didnt already exist beforehand.</p><p>Lets now retrieve that document that we just indexed:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/customer/external/1?pretty'</pre></div><p>And the response:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/customer/external/1?pretty'
{
  "_index" : "customer",
  "_type" : "external",
  "_id" : "1",
  "_version" : 1,
  "found" : true,
  "_source" : { "name": "John Doe" }
}</pre></div><p>Nothing out of the ordinary here other than a field, <code class="literal">found</code>, stating that we found a document with the requested ID 1 and another field, <code class="literal">_source</code>, which returns the full JSON document that we indexed from the previous step.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-link"><a href="_exploring_your_cluster.html">Exploring Your Cluster</a></span>  <span class="breadcrumb-node">Delete an Index</span></div><div class="navheader"><span class="prev"><a href="_index_and_query_a_document.html">
              &nbsp;
              Index and Query a Document</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_modifying_your_data.html">Modifying Your Data
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_delete_an_index"></a>Delete an Index</h2></div></div></div><p>Now lets delete the index that we just created and then list all the indexes again:</p><div class="pre_wrapper"><pre class="programlisting">curl -XDELETE 'localhost:9200/customer?pretty'
curl 'localhost:9200/_cat/indices?v'</pre></div><p>And the response:</p><div class="pre_wrapper"><pre class="programlisting">curl -XDELETE 'localhost:9200/customer?pretty'
{
  "acknowledged" : true
}
curl 'localhost:9200/_cat/indices?v'
health index pri rep docs.count docs.deleted store.size pri.store.size</pre></div><p>Which means that the index was deleted successfully and we are now back to where we started with nothing in our cluster.</p><p>Before we move on, lets take a closer look again at some of the API commands that we have learned so far:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/customer'
curl -XPUT 'localhost:9200/customer/external/1' -d '
{
  "name": "John Doe"
}'
curl 'localhost:9200/customer/external/1'
curl -XDELETE 'localhost:9200/customer'</pre></div><p>If we study the above commands carefully, we can actually see a pattern of how we access data in Elasticsearch. That pattern can be summarized as follows:</p><div class="pre_wrapper"><pre class="programlisting">curl -X&lt;REST Verb&gt; &lt;Node&gt;:&lt;Port&gt;/&lt;Index&gt;/&lt;Type&gt;/&lt;ID&gt;</pre></div><p>This REST access pattern is pervasive throughout all the API commands that if you can simply remember it, you will have a good head start at mastering Elasticsearch.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-node">Modifying Your Data</span></div><div class="navheader"><span class="prev"><a href="_delete_an_index.html">
              &nbsp;
              Delete an Index</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_updating_documents.html">Updating Documents
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_modifying_your_data"></a>Modifying Your Data</h2></div></div></div><p>Elasticsearch provides data manipulation and search capabilities in near real time. By default, you can expect a one second delay (refresh interval) from the time you index/update/delete your data until the time that it appears in your search results. This is an important distinction from other platforms like SQL wherein data is immediately available after a transaction is completed.</p><h3><a id="_indexing_replacing_documents"></a>Indexing/Replacing Documents</h3><p>Weve previously seen how we can index a single document. Lets recall that command again:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/customer/external/1?pretty' -d '
{
  "name": "John Doe"
}'</pre></div><p>Again, the above will index the specified document into the customer index, external type, with the ID of 1. If we then executed the above command again with a different (or same) document, Elasticsearch will replace (i.e. reindex) a new document on top of the existing one with the ID of 1:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/customer/external/1?pretty' -d '
{
  "name": "Jane Doe"
}'</pre></div><p>The above changes the name of the document with the ID of 1 from "John Doe" to "Jane Doe". If, on the other hand, we use a different ID, a new document will be indexed and the existing document(s) already in the index remains untouched.</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/customer/external/2?pretty' -d '
{
  "name": "Jane Doe"
}'</pre></div><p>The above indexes a new document with an ID of 2.</p><p>When indexing, the ID part is optional. If not specified, Elasticsearch will generate a random ID and then use it to index the document. The actual ID Elasticsearch generates (or whatever we specified explicitly in the previous examples) is returned as part of the index API call.</p><p>This example shows how to index a document without an explicit ID:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/customer/external?pretty' -d '
{
  "name": "Jane Doe"
}'</pre></div><p>Note that in the above case, we are using the POST verb instead of PUT since we didnt specify an ID.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-link"><a href="_modifying_your_data.html">Modifying Your Data</a></span>  <span class="breadcrumb-node">Updating Documents</span></div><div class="navheader"><span class="prev"><a href="_modifying_your_data.html">
              &nbsp;
              Modifying Your Data</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_deleting_documents.html">Deleting Documents
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_updating_documents"></a>Updating Documents</h2></div></div></div><p>In addition to being able to index and replace documents, we can also update documents. Note though that Elasticsearch does not actually do in-place updates under the hood. Whenever we do an update, Elasticsearch deletes the old document and then indexes a new document with the update applied to it in one shot.</p><p>This example shows how to update our previous document (ID of 1) by changing the name field to "Jane Doe":</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/customer/external/1/_update?pretty' -d '
{
  "doc": { "name": "Jane Doe" }
}'</pre></div><p>This example shows how to update our previous document (ID of 1) by changing the name field to "Jane Doe" and at the same time add an age field to it:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/customer/external/1/_update?pretty' -d '
{
  "doc": { "name": "Jane Doe", "age": 20 }
}'</pre></div><p>Updates can also be performed by using simple scripts. Note that dynamic scripts like the following are disabled by default as of <code class="literal">1.4.3</code>, have a look at the <a class="link" href="modules-scripting.html" title="Scripting">scripting docs</a> for more details. This example uses a script to increment the age by 5:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/customer/external/1/_update?pretty' -d '
{
  "script" : "ctx._source.age += 5"
}'</pre></div><p>In the above example, <code class="literal">ctx._source</code> refers to the current source document that is about to be updated.</p><p>Note that as of this writing, updates can only be performed on a single document at a time. In the future, Elasticsearch might provide the ability to update multiple documents given a query condition (like an <code class="literal">SQL UPDATE-WHERE</code> statement).</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-link"><a href="_modifying_your_data.html">Modifying Your Data</a></span>  <span class="breadcrumb-node">Deleting Documents</span></div><div class="navheader"><span class="prev"><a href="_updating_documents.html">
              &nbsp;
              Updating Documents</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_batch_processing.html">Batch Processing
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_deleting_documents"></a>Deleting Documents</h2></div></div></div><p>Deleting a document is fairly straightforward. This example shows how to delete our previous customer with the ID of 2:</p><div class="pre_wrapper"><pre class="programlisting">curl -XDELETE 'localhost:9200/customer/external/2?pretty'</pre></div><p>We also have the ability to delete multiple documents that match a query condition. This example shows how to delete all customers whose names contain "John":</p><div class="pre_wrapper"><pre class="programlisting">curl -XDELETE 'localhost:9200/customer/external/_query?pretty' -d '
{
  "query": { "match": { "name": "John" } }
}'</pre></div><p>Note above that the URI has changed to <code class="literal">/_query</code> to signify a delete-by-query API with the delete query criteria in the body, but we are still using the DELETE verb. Dont worry yet about the query syntax as we will cover that later in this tutorial.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-link"><a href="_modifying_your_data.html">Modifying Your Data</a></span>  <span class="breadcrumb-node">Batch Processing</span></div><div class="navheader"><span class="prev"><a href="_deleting_documents.html">
              &nbsp;
              Deleting Documents</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_exploring_your_data.html">Exploring Your Data
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_batch_processing"></a>Batch Processing</h2></div></div></div><p>In addition to being able to index, update, and delete individual documents, Elasticsearch also provides the ability to perform any of the above operations in batches using the <a class="link" href="docs-bulk.html" title="Bulk API"><code class="literal">_bulk</code> API</a>. This functionality is important in that it provides a very efficient mechanism to do multiple operations as fast as possible with as little network roundtrips as possible.</p><p>As a quick example, the following call indexes two documents (ID 1 - John Doe and ID 2 - Jane Doe) in one bulk operation:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/customer/external/_bulk?pretty' -d '
{"index":{"_id":"1"}}
{"name": "John Doe" }
{"index":{"_id":"2"}}
{"name": "Jane Doe" }
'</pre></div><p>This example updates the first document (ID of 1) and then deletes the second document (ID of 2) in one bulk operation:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/customer/external/_bulk?pretty' -d '
{"update":{"_id":"1"}}
{"doc": { "name": "John Doe becomes Jane Doe" } }
{"delete":{"_id":"2"}}
'</pre></div><p>Note above that for the delete action, there is no corresponding source document after it since deletes only require the ID of the document to be deleted.</p><p>The bulk API executes all the actions sequentially and in order. If a single action fails for whatever reason, it will continue to process the remainder of the actions after it. When the bulk API returns, it will provide a status for each action (in the same order it was sent in) so that you can check if a specific action failed or not.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-node">Exploring Your Data</span></div><div class="navheader"><span class="prev"><a href="_batch_processing.html">
              &nbsp;
              Batch Processing</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_the_search_api.html">The Search API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_exploring_your_data"></a>Exploring Your Data</h2></div></div></div><h3><a id="_sample_dataset"></a>Sample Dataset</h3><p>Now that weve gotten a glimpse of the basics, lets try to work on a more realistic dataset. Ive prepared a sample of fictitious JSON documents of customer bank account information. Each document has the following schema:</p><div class="pre_wrapper"><pre class="programlisting">{
    "account_number": 0,
    "balance": 16623,
    "firstname": "Bradshaw",
    "lastname": "Mckenzie",
    "age": 29,
    "gender": "F",
    "address": "244 Columbus Place",
    "employer": "Euron",
    "email": "bradshawmckenzie@euron.com",
    "city": "Hobucken",
    "state": "CO"
}</pre></div><p>For the curious, I generated this data from <a class="ulink" href="http://www.json-generator.com/" target="_top"><code class="literal">www.json-generator.com/</code></a> so please ignore the actual values and semantics of the data as these are all randomly generated.</p><h3><a id="_loading_the_sample_dataset"></a>Loading the Sample Dataset</h3><p>You can download the sample dataset (accounts.json) from <a class="ulink" href="https://github.com/bly2k/files/blob/master/accounts.zip?raw=true" target="_top">here</a>. Extract it to our current directory and lets load it into our cluster as follows:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/account/_bulk?pretty' --data-binary "@accounts.json"
curl 'localhost:9200/_cat/indices?v'</pre></div><p>And the response:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_cat/indices?v'
health index pri rep docs.count docs.deleted store.size pri.store.size
yellow bank    5   1       1000            0    424.4kb        424.4kb</pre></div><p>Which means that we just successfully bulk indexed 1000 documents into the bank index (under the account type).</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-link"><a href="_exploring_your_data.html">Exploring Your Data</a></span>  <span class="breadcrumb-node">The Search API</span></div><div class="navheader"><span class="prev"><a href="_exploring_your_data.html">
              &nbsp;
              Exploring Your Data</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_introducing_the_query_language.html">Introducing the Query Language
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_the_search_api"></a>The Search API</h2></div></div></div><p>Now lets start with some simple searches. There are two basic ways to run searches: one is by sending search parameters through the <a class="link" href="search-uri-request.html" title="URI Search">REST request URI</a> and the other by sending them through the <a class="link" href="search-request-body.html" title="Request Body Search">REST request body</a>. The request body method allows you to be more expressive and also to define your searches in a more readable JSON format. Well try one example of the request URI method but for the remainder of this tutorial, we will exclusively be using the request body method.</p><p>The REST API for search is accessible from the <code class="literal">_search</code> endpoint. This example returns all documents in the bank index:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/bank/_search?q=*&amp;pretty'</pre></div><p>Lets first dissect the search call. We are searching (<code class="literal">_search</code> endpoint) in the bank index, and the <code class="literal">q=*</code> parameter instructs Elasticsearch to match all documents in the index. The <code class="literal">pretty</code> parameter, again, just tells Elasticsearch to return pretty-printed JSON results.</p><p>And the response (partially shown):</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/bank/_search?q=*&amp;pretty'
{
  "took" : 63,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 1000,
    "max_score" : 1.0,
    "hits" : [ {
      "_index" : "bank",
      "_type" : "account",
      "_id" : "1",
      "_score" : 1.0, "_source" : {"account_number":1,"balance":39225,"firstname":"Amber","lastname":"Duke","age":32,"gender":"M","address":"880 Holmes Lane","employer":"Pyrami","email":"amberduke@pyrami.com","city":"Brogan","state":"IL"}
    }, {
      "_index" : "bank",
      "_type" : "account",
      "_id" : "6",
      "_score" : 1.0, "_source" : {"account_number":6,"balance":5686,"firstname":"Hattie","lastname":"Bond","age":36,"gender":"M","address":"671 Bristol Street","employer":"Netagy","email":"hattiebond@netagy.com","city":"Dante","state":"TN"}
    }, {
      "_index" : "bank",
      "_type" : "account",</pre></div><p>As for the response, we see the following parts:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">took</code>  time in milliseconds for Elasticsearch to execute the search
</li><li class="listitem">
<code class="literal">timed_out</code>  tells us if the search timed out or not
</li><li class="listitem">
<code class="literal">_shards</code>  tells us how many shards were searched, as well as a count of the successful/failed searched shards
</li><li class="listitem">
<code class="literal">hits</code>  search results
</li><li class="listitem">
<code class="literal">hits.total</code>  total number of documents matching our search criteria
</li><li class="listitem">
<code class="literal">hits.hits</code>  actual array of search results (defaults to first 10 documents)
</li><li class="listitem">
<code class="literal">_score</code> and <code class="literal">max_score</code> - ignore these fields for now
</li></ul></div><p>Here is the same exact search above using the alternative request body method:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": { "match_all": {} }
}'</pre></div><p>The difference here is that instead of passing <code class="literal">q=*</code> in the URI, we POST a JSON-style query request body to the <code class="literal">_search</code> API. Well discuss this JSON query in the next section.</p><p>And the response (partially shown):</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": { "match_all": {} }
}'
{
  "took" : 26,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 1000,
    "max_score" : 1.0,
    "hits" : [ {
      "_index" : "bank",
      "_type" : "account",
      "_id" : "1",
      "_score" : 1.0, "_source" : {"account_number":1,"balance":39225,"firstname":"Amber","lastname":"Duke","age":32,"gender":"M","address":"880 Holmes Lane","employer":"Pyrami","email":"amberduke@pyrami.com","city":"Brogan","state":"IL"}
    }, {
      "_index" : "bank",
      "_type" : "account",
      "_id" : "6",
      "_score" : 1.0, "_source" : {"account_number":6,"balance":5686,"firstname":"Hattie","lastname":"Bond","age":36,"gender":"M","address":"671 Bristol Street","employer":"Netagy","email":"hattiebond@netagy.com","city":"Dante","state":"TN"}
    }, {
      "_index" : "bank",
      "_type" : "account",
      "_id" : "13",</pre></div><p>It is important to understand that once you get your search results back, Elasticsearch is completely done with the request and does not maintain any kind of server-side resources or open cursors into your results. This is in stark contrast to many other platforms such as SQL wherein you may initially get a partial subset of your query results up-front and then you have to continuously go back to the server if you want to fetch (or page through) the rest of the results using some kind of stateful server-side cursor.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-link"><a href="_exploring_your_data.html">Exploring Your Data</a></span>  <span class="breadcrumb-node">Introducing the Query Language</span></div><div class="navheader"><span class="prev"><a href="_the_search_api.html">
              &nbsp;
              The Search API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_executing_searches.html">Executing Searches
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_introducing_the_query_language"></a>Introducing the Query Language</h2></div></div></div><p>Elasticsearch provides a JSON-style domain-specific language that you can use to execute queries. This is referred to as the <a class="link" href="query-dsl.html" title="Query DSL">Query DSL</a>. The query language is quite comprehensive and can be intimidating at first glance but the best way to actually learn it is to start with a few basic examples.</p><p>Going back to our last example, we executed this query:</p><div class="pre_wrapper"><pre class="programlisting">{
  "query": { "match_all": {} }
}</pre></div><p>Dissecting the above, the <code class="literal">query</code> part tells us what our query definition is and the <code class="literal">match_all</code> part is simply the type of query that we want to run. The <code class="literal">match_all</code> query is simply a search for all documents in the specified index.</p><p>In addition to the <code class="literal">query</code> parameter, we also can pass other parameters to influence the search results. For example, the following does a <code class="literal">match_all</code> and returns only the first document:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": { "match_all": {} },
  "size": 1
}'</pre></div><p>Note that if <code class="literal">size</code> is not specified, it defaults to 10.</p><p>This example does a <code class="literal">match_all</code> and returns documents 11 through 20:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": { "match_all": {} },
  "from": 10,
  "size": 10
}'</pre></div><p>The <code class="literal">from</code> parameter (0-based) specifies which document index to start from and the <code class="literal">size</code> parameter specifies how many documents to return starting at the from parameter. This feature is useful when implementing paging of search results. Note that if <code class="literal">from</code> is not specified, it defaults to 0.</p><p>This example does a <code class="literal">match_all</code> and sorts the results by account balance in descending order and returns the top 10 (default size) documents.</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": { "match_all": {} },
  "sort": { "balance": { "order": "desc" } }
}'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-link"><a href="_exploring_your_data.html">Exploring Your Data</a></span>  <span class="breadcrumb-node">Executing Searches</span></div><div class="navheader"><span class="prev"><a href="_introducing_the_query_language.html">
              &nbsp;
              Introducing the Query Language</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_executing_filters.html">Executing Filters
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_executing_searches"></a>Executing Searches</h2></div></div></div><p>Now that we have seen a few of the basic search parameters, lets dig in some more into the Query DSL. Lets first take a look at the returned document fields. By default, the full JSON document is returned as part of all searches. This is referred to as the source (<code class="literal">_source</code> field in the search hits). If we dont want the entire source document returned, we have the ability to request only a few fields from within source to be returned.</p><p>This example shows how to return two fields, <code class="literal">account_number</code> and <code class="literal">balance</code> (inside of <code class="literal">_source</code>), from the search:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": { "match_all": {} },
  "_source": ["account_number", "balance"]
}'</pre></div><p>Note that the above example simply reduces the <code class="literal">_source</code> field. It will still only return one field named <code class="literal">_source</code> but within it, only the fields <code class="literal">account_number</code> and <code class="literal">balance</code> are included.</p><p>If you come from a SQL background, the above is somewhat similar in concept to the <code class="literal">SQL SELECT FROM</code> field list.</p><p>Now lets move on to the query part. Previously, weve seen how the <code class="literal">match_all</code> query is used to match all documents. Lets now introduce a new query called the <a class="link" href="query-dsl-match-query.html" title="Match Query"><code class="literal">match</code> query</a>, which can be thought of as a basic fielded search query (i.e. a search done against a specific field or set of fields).</p><p>This example returns the account numbered 20:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": { "match": { "account_number": 20 } }
}'</pre></div><p>This example returns all accounts containing the term "mill" in the address:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": { "match": { "address": "mill" } }
}'</pre></div><p>This example returns all accounts containing the term "mill" or "lane" in the address:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": { "match": { "address": "mill lane" } }
}'</pre></div><p>This example is a variant of <code class="literal">match</code> (<code class="literal">match_phrase</code>) that returns all accounts containing the phrase "mill lane" in the address:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": { "match_phrase": { "address": "mill lane" } }
}'</pre></div><p>Lets now introduce the <a class="link" href="query-dsl-bool-query.html" title="Bool Query"><code class="literal">bool</code>(ean) query</a>. The <code class="literal">bool</code> query allows us to compose smaller queries into bigger queries using boolean logic.</p><p>This example composes two <code class="literal">match</code> queries and returns all accounts containing "mill" and "lane" in the address:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": {
    "bool": {
      "must": [
        { "match": { "address": "mill" } },
        { "match": { "address": "lane" } }
      ]
    }
  }
}'</pre></div><p>In the above example, the <code class="literal">bool must</code> clause specifies all the queries that must be true for a document to be considered a match.</p><p>In contrast, this example composes two <code class="literal">match</code> queries and returns all accounts containing "mill" or "lane" in the address:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": {
    "bool": {
      "should": [
        { "match": { "address": "mill" } },
        { "match": { "address": "lane" } }
      ]
    }
  }
}'</pre></div><p>In the above example, the <code class="literal">bool should</code> clause specifies a list of queries either of which must be true for a document to be considered a match.</p><p>This example composes two <code class="literal">match</code> queries and returns all accounts that contain neither "mill" nor "lane" in the address:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": {
    "bool": {
      "must_not": [
        { "match": { "address": "mill" } },
        { "match": { "address": "lane" } }
      ]
    }
  }
}'</pre></div><p>In the above example, the <code class="literal">bool must_not</code> clause specifies a list of queries none of which must be true for a document to be considered a match.</p><p>We can combine <code class="literal">must</code>, <code class="literal">should</code>, and <code class="literal">must_not</code> clauses simultaneously inside a <code class="literal">bool</code> query. Furthermore, we can compose <code class="literal">bool</code> queries inside any of these <code class="literal">bool</code> clauses to mimic any complex multi-level boolean logic.</p><p>This example returns all accounts of anybody who is 40 years old but dont live in ID(aho):</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": {
    "bool": {
      "must": [
        { "match": { "age": "40" } }
      ],
      "must_not": [
        { "match": { "state": "ID" } }
      ]
    }
  }
}'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-link"><a href="_exploring_your_data.html">Exploring Your Data</a></span>  <span class="breadcrumb-node">Executing Filters</span></div><div class="navheader"><span class="prev"><a href="_executing_searches.html">
              &nbsp;
              Executing Searches</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_executing_aggregations.html">Executing Aggregations
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_executing_filters"></a>Executing Filters</h2></div></div></div><p>In the previous section, we skipped over a little detail called the document score (<code class="literal">_score</code> field in the search results). The score is a numeric value that is a relative measure of how well the document matches the search query that we specified. The higher the score, the more relevant the document is, the lower the score, the less relevant the document is.</p><p>All queries in Elasticsearch trigger computation of the relevance scores. In cases where we do not need the relevance scores, Elasticsearch provides another query capability in the form of <a class="link" href="query-dsl-filters.html" title="Filters">filters</a>. Filters are similar in concept to queries except that they are optimized for much faster execution speeds for two primary reasons:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Filters do not score so they are faster to execute than queries
</li><li class="listitem">
Filters can be <a class="ulink" href="http://www.elastic.co/blog/all-about-elasticsearch-filter-bitsets/" target="_top">cached in memory</a> allowing repeated search executions to be significantly faster than queries
</li></ul></div><p>To understand filters, lets first introduce the <a class="link" href="query-dsl-filtered-query.html" title="Filtered Query"><code class="literal">filtered</code> query</a>, which allows you to combine a query (like <code class="literal">match_all</code>, <code class="literal">match</code>, <code class="literal">bool</code>, etc.) together with a filter. As an example, lets introduce the <a class="link" href="query-dsl-range-filter.html" title="Range Filter"><code class="literal">range</code> filter</a>, which allows us to filter documents by a range of values. This is generally used for numeric or date filtering.</p><p>This example uses a filtered query to return all accounts with balances between 20000 and 30000, inclusive. In other words, we want to find accounts with a balance that is greater than or equal to 20000 and less than or equal to 30000.</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "query": {
    "filtered": {
      "query": { "match_all": {} },
      "filter": {
        "range": {
          "balance": {
            "gte": 20000,
            "lte": 30000
          }
        }
      }
    }
  }
}'</pre></div><p>Dissecting the above, the filtered query contains a <code class="literal">match_all</code> query (the query part) and a <code class="literal">range</code> filter (the filter part). We can substitute any other query into the query part as well as any other filter into the filter part. In the above case, the range filter makes perfect sense since documents falling into the range all match "equally", i.e., no document is more relevant than another.</p><p>In general, the easiest way to decide whether you want a filter or a query is to ask yourself if you care about the relevance score or not. If relevance is not important, use filters, otherwise, use queries. If you come from a SQL background, queries and filters are similar in concept to the <code class="literal">SELECT WHERE</code> clause, although more so for filters than queries.</p><p>In addition to the <code class="literal">match_all</code>, <code class="literal">match</code>, <code class="literal">bool</code>, <code class="literal">filtered</code>, and <code class="literal">range</code> queries, there are a lot of other query/filter types that are available and we wont go into them here. Since we already have a basic understanding of how they work, it shouldnt be too difficult to apply this knowledge in learning and experimenting with the other query/filter types.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-link"><a href="_exploring_your_data.html">Exploring Your Data</a></span>  <span class="breadcrumb-node">Executing Aggregations</span></div><div class="navheader"><span class="prev"><a href="_executing_filters.html">
              &nbsp;
              Executing Filters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_conclusion.html">Conclusion
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_executing_aggregations"></a>Executing Aggregations</h2></div></div></div><p>Aggregations provide the ability to group and extract statistics from your data. The easiest way to think about aggregations is by roughly equating it to the SQL GROUP BY and the SQL aggregate functions. In Elasticsearch, you have the ability to execute searches returning hits and at the same time return aggregated results separate from the hits all in one response. This is very powerful and efficient in the sense that you can run queries and multiple aggregations and get the results back of both (or either) operations in one shot avoiding network roundtrips using a concise and simplified API.</p><p>To start with, this example groups all the accounts by state, and then returns the top 10 (default) states sorted by count descending (also default):</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "size": 0,
  "aggs": {
    "group_by_state": {
      "terms": {
        "field": "state"
      }
    }
  }
}'</pre></div><p>In SQL, the above aggregation is similar in concept to:</p><div class="pre_wrapper"><pre class="programlisting">SELECT state, COUNT(*) FROM bank GROUP BY state ORDER BY COUNT(*) DESC</pre></div><p>And the response (partially shown):</p><div class="pre_wrapper"><pre class="programlisting">  "hits" : {
    "total" : 1000,
    "max_score" : 0.0,
    "hits" : [ ]
  },
  "aggregations" : {
    "group_by_state" : {
      "buckets" : [ {
        "key" : "al",
        "doc_count" : 21
      }, {
        "key" : "tx",
        "doc_count" : 17
      }, {
        "key" : "id",
        "doc_count" : 15
      }, {
        "key" : "ma",
        "doc_count" : 15
      }, {
        "key" : "md",
        "doc_count" : 15
      }, {
        "key" : "pa",
        "doc_count" : 15
      }, {
        "key" : "dc",
        "doc_count" : 14
      }, {
        "key" : "me",
        "doc_count" : 14
      }, {
        "key" : "mo",
        "doc_count" : 14
      }, {
        "key" : "nd",
        "doc_count" : 14
      } ]
    }
  }
}</pre></div><p>We can see that there are 21 accounts in AL(abama), followed by 17 accounts in TX, followed by 15 accounts in ID(aho), and so forth.</p><p>Note that we set <code class="literal">size=0</code> to not show search hits because we only want to see the aggregation results in the response.</p><p>Building on the previous aggregation, this example calculates the average account balance by state (again only for the top 10 states sorted by count in descending order):</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "size": 0,
  "aggs": {
    "group_by_state": {
      "terms": {
        "field": "state"
      },
      "aggs": {
        "average_balance": {
          "avg": {
            "field": "balance"
          }
        }
      }
    }
  }
}'</pre></div><p>Notice how we nested the <code class="literal">average_balance</code> aggregation inside the <code class="literal">group_by_state</code> aggregation. This is a common pattern for all the aggregations. You can nest aggregations inside aggregations arbitrarily to extract pivoted summarizations that you require from your data.</p><p>Building on the previous aggregation, lets now sort on the average balance in descending order:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "size": 0,
  "aggs": {
    "group_by_state": {
      "terms": {
        "field": "state",
        "order": {
          "average_balance": "desc"
        }
      },
      "aggs": {
        "average_balance": {
          "avg": {
            "field": "balance"
          }
        }
      }
    }
  }
}'</pre></div><p>This example demonstrates how we can group by age brackets (ages 20-29, 30-39, and 40-49), then by gender, and then finally get the average account balance, per age bracket, per gender:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/bank/_search?pretty' -d '
{
  "size": 0,
  "aggs": {
    "group_by_age": {
      "range": {
        "field": "age",
        "ranges": [
          {
            "from": 20,
            "to": 30
          },
          {
            "from": 30,
            "to": 40
          },
          {
            "from": 40,
            "to": 50
          }
        ]
      },
      "aggs": {
        "group_by_gender": {
          "terms": {
            "field": "gender"
          },
          "aggs": {
            "average_balance": {
              "avg": {
                "field": "balance"
              }
            }
          }
        }
      }
    }
  }
}'</pre></div><p>There are a many other aggregations capabilities that we wont go into detail here. The <a class="link" href="search-aggregations.html" title="Aggregations">aggregations reference guide</a> is a great starting point if you want to do further experimentation.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="getting-started.html">Getting Started</a></span>  <span class="breadcrumb-node">Conclusion</span></div><div class="navheader"><span class="prev"><a href="_executing_aggregations.html">
              &nbsp;
              Executing Aggregations</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="setup.html">Setup
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_conclusion"></a>Conclusion</h2></div></div></div><p>Elasticsearch is both a simple and complex product. Weve so far learned the basics of what it is, how to look inside of it, and how to work with it using some of the REST APIs. I hope that this tutorial has given you a better understanding of what Elasticsearch is and more importantly, inspired you to further experiment with the rest of its great features!</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">Setup</span></div><div class="navheader"><span class="prev"><a href="_conclusion.html">
              &nbsp;
              Conclusion</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="setup-configuration.html">Configuration
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="setup"></a>Setup</h1></div></div></div><div class="partintro"><div></div><p>This section includes information on how to setup <span class="strong emphasis"><strong>elasticsearch</strong></span> and
get it running. If you havent already, <a class="ulink" href="http://www.elastic.co/downloads" target="_top">download</a> it, and
then check the <a class="link" href="setup.html#setup-installation" title="Installationedit">installation</a> docs.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Elasticsearch can also be installed from our repositories using <code class="literal">apt</code> or <code class="literal">yum</code>.
See <a class="xref" href="setup-repositories.html" title="Repositories"><em>Repositories</em></a>.</p></div></div><h2><a id="setup-installation"></a>Installation</h2><p>After <a class="ulink" href="https://www.elastic.co/downloads" target="_top">downloading</a> the latest release and extracting it,
<span class="strong emphasis"><strong>elasticsearch</strong></span> can be started using:</p><div class="pre_wrapper"><pre class="programlisting">$ bin/elasticsearch</pre></div><p>Under *nix system, the command will start the process in the foreground.
To run it in the background, add the <code class="literal">-d</code> switch to it:</p><div class="pre_wrapper"><pre class="programlisting">$ bin/elasticsearch -d</pre></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>*NIX</strong></p></div></div></div><p>There are added features when using the <code class="literal">elasticsearch</code> shell script.
The first, which was explained earlier, is the ability to easily run the
process either in the foreground or the background.</p><p>Another feature is the ability to pass <code class="literal">-X</code> and <code class="literal">-D</code> or getopt long style
configuration parameters directly to the script. When set, all override
anything set using either <code class="literal">JAVA_OPTS</code> or <code class="literal">ES_JAVA_OPTS</code>. For example:</p><div class="pre_wrapper"><pre class="programlisting">$ bin/elasticsearch -Xmx2g -Xms2g -Des.index.store.type=memory --node.name=my-node</pre></div></div><h2><a id="jvm-version"></a>Java (JVM) version</h2><p>Elasticsearch is built using Java, and requires at least
<a class="ulink" href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_top">Java 7</a> in
order to run. Only Oracles Java and the OpenJDK are supported. The same JVM
version should be used on all Elasticsearch nodes and clients.</p><p>We recommend installing the <span class="strong emphasis"><strong>Java 8 update 20 or later</strong></span>, or <span class="strong emphasis"><strong>Java 7 update 55
or later</strong></span>.  Previous versions of Java 7 are known to have bugs that can cause
index corruption and data loss.  Elasticsearch will refuse to start if a
known-bad version of Java is used.</p><p>The version of Java to use can be configured by setting the <code class="literal">JAVA_HOME</code>
environment variable.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="setup.html">Setup</a></span>  <span class="breadcrumb-node">Configuration</span></div><div class="navheader"><span class="prev"><a href="setup.html">
              &nbsp;
              Setup</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="setup-service.html">Running as a Service on Linux
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="setup-configuration"></a>Configuration</h2></div></div></div><h3><a id="_environment_variables"></a>Environment Variables</h3><p>Within the scripts, Elasticsearch comes with built in <code class="literal">JAVA_OPTS</code> passed
to the JVM started. The most important setting for that is the <code class="literal">-Xmx</code> to
control the maximum allowed memory for the process, and <code class="literal">-Xms</code> to
control the minimum allocated memory for the process (<span class="emphasis"><em>in general, the
more memory allocated to the process, the better</em></span>).</p><p>Most times it is better to leave the default <code class="literal">JAVA_OPTS</code> as they are,
and use the <code class="literal">ES_JAVA_OPTS</code> environment variable in order to set / change
JVM settings or arguments.</p><p>The <code class="literal">ES_HEAP_SIZE</code> environment variable allows to set the heap memory
that will be allocated to elasticsearch java process. It will allocate
the same value to both min and max values, though those can be set
explicitly (not recommended) by setting <code class="literal">ES_MIN_MEM</code> (defaults to
<code class="literal">256m</code>), and <code class="literal">ES_MAX_MEM</code> (defaults to <code class="literal">1g</code>).</p><p>It is recommended to set the min and max memory to the same value, and
enable <a class="link" href="setup-configuration.html#setup-configuration-memory" title="Memory Settingsedit"><code class="literal">mlockall</code></a>.</p><h3><a id="system"></a>System Configuration</h3><h4><a id="file-descriptors"></a>File Descriptors</h4><p>Make sure to increase the number of open files descriptors on the
machine (or for the user running elasticsearch). Setting it to 32k or
even 64k is recommended.</p><p>In order to test how many open files the process can open, start it with
<code class="literal">-Des.max-open-files</code> set to <code class="literal">true</code>. This will print the number of open
files the process can open on startup.</p><p>Alternatively, you can retrieve the <code class="literal">max_file_descriptors</code> for each node
using the <a class="xref" href="cluster-nodes-info.html" title="Nodes Info"><em>Nodes Info</em></a> API, with:</p><div class="pre_wrapper"><pre class="programlisting">curl localhost:9200/_nodes/process?pretty</pre></div><h4><a id="vm-max-map-count"></a>Virtual memory</h4><p>Elasticsearch uses a <a class="link" href="index-modules-store.html#default_fs" title="Hybrid MMap / NIO FSedit"><code class="literal">hybrid mmapfs / niofs</code></a> directory by default to store its indices.  The default
operating system limits on mmap counts is likely to be too low, which may
result in out of memory exceptions.  On Linux, you can increase the limits by
running the following command as <code class="literal">root</code>:</p><div class="pre_wrapper"><pre class="programlisting">sysctl -w vm.max_map_count=262144</pre></div><p>To set this value permanently, update the <code class="literal">vm.max_map_count</code> setting in
<code class="literal">/etc/sysctl.conf</code>.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>If you installed Elasticsearch using a package (.deb, .rpm) this setting will be changed automatically.  To verify, run <code class="literal">sysctl vm.max_map_count</code>.</p></div></div><h4><a id="setup-configuration-memory"></a>Memory Settings</h4><p>Most operating systems try to use as much memory as possible for file system
caches and eagerly swap out unused application memory, possibly resulting
in the elasticsearch process being swapped. Swapping is very bad for
performance and for node stability, so it should be avoided at all costs.</p><p>There are three options:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
<span class="strong emphasis"><strong>Disable swap</strong></span>
</p><p class="simpara">The simplest option is to completely disable swap. Usually Elasticsearch
is the only service running on a box, and its memory usage is controlled
by the <code class="literal">ES_HEAP_SIZE</code> environment variable.  There should be no need
to have swap enabled.</p><p class="simpara">On Linux systems, you can disable swap temporarily
by running: <code class="literal">sudo swapoff -a</code>. To disable it permanently, you will need
to edit the <code class="literal">/etc/fstab</code> file and comment out any lines that contain the
word <code class="literal">swap</code>.</p><p class="simpara">On Windows, the equivalent can be achieved by disabling the paging file entirely
via <code class="literal">System Properties  Advanced  Performance  Advanced  Virtual memory</code>.</p></li><li class="listitem"><p class="simpara">
<span class="strong emphasis"><strong>Configure <code class="literal">swappiness</code></strong></span>
</p><p class="simpara">The second option is to ensure that the sysctl value <code class="literal">vm.swappiness</code> is set
to <code class="literal">0</code>. This reduces the kernels tendency to swap and should not lead to
swapping under normal circumstances, while still allowing the whole system
to swap in emergency conditions.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>From kernel version 3.5-rc1 and above, a <code class="literal">swappiness</code> of <code class="literal">0</code> will
cause the OOM killer to kill the process instead of allowing swapping.
You will need to set <code class="literal">swappiness</code> to <code class="literal">1</code> to still allow swapping in
emergencies.</p></div></div></li><li class="listitem"><p class="simpara">
<span class="strong emphasis"><strong><code class="literal">mlockall</code></strong></span>
</p><p class="simpara">The third option is to use
<a class="ulink" href="http://opengroup.org/onlinepubs/007908799/xsh/mlockall.html" target="_top">mlockall</a> on Linux/Unix systems, or <a class="ulink" href="https://msdn.microsoft.com/en-us/library/windows/desktop/aa366895%28v=vs.85%29.aspx" target="_top">VirtualLock</a> on Windows, to
try to lock the process address space into RAM, preventing any Elasticsearch
memory from being swapped out.  This can be done, by adding this line
to the <code class="literal">config/elasticsearch.yml</code> file:</p><div class="pre_wrapper"><pre class="programlisting">bootstrap.mlockall: true</pre></div><p class="simpara">After starting Elasticsearch, you can see whether this setting was applied
successfully by checking the value of <code class="literal">mlockall</code> in the output from this
request:</p><div class="pre_wrapper"><pre class="programlisting">curl http://localhost:9200/_nodes/process?pretty</pre></div><p class="simpara">If you see that <code class="literal">mlockall</code> is <code class="literal">false</code>, then it means that the the <code class="literal">mlockall</code>
request has failed.  The most probable reason, on Linux/Unix systems, is that
the user running Elasticsearch doesnt have permission to lock memory.  This can
be granted by running <code class="literal">ulimit -l unlimited</code> as <code class="literal">root</code> before starting Elasticsearch.</p><p class="simpara">Another possible reason why <code class="literal">mlockall</code> can fail is that the temporary directory
(usually <code class="literal">/tmp</code>) is mounted with the <code class="literal">noexec</code> option. This can be solved by
specifying a new temp directory, by starting Elasticsearch with:</p><div class="pre_wrapper"><pre class="programlisting">./bin/elasticsearch -Djna.tmpdir=/path/to/new/dir</pre></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p><code class="literal">mlockall</code> might cause the JVM or shell session to exit if it tries
to allocate more memory than is available!</p></div></div></li></ul></div><h3><a id="settings"></a>Elasticsearch Settings</h3><p><span class="strong emphasis"><strong>elasticsearch</strong></span> configuration files can be found under <code class="literal">ES_HOME/config</code>
folder. The folder comes with two files, the <code class="literal">elasticsearch.yml</code> for
configuring Elasticsearch different
<a class="link" href="modules.html" title="Modules">modules</a>, and <code class="literal">logging.yml</code> for
configuring the Elasticsearch logging.</p><p>The configuration format is <a class="ulink" href="http://www.yaml.org/" target="_top">YAML</a>. Here is an
example of changing the address all network based modules will use to
bind and publish to:</p><div class="pre_wrapper"><pre class="programlisting">network :
    host : 10.0.0.4</pre></div><h4><a id="paths"></a>Paths</h4><p>In production use, you will almost certainly want to change paths for
data and log files:</p><div class="pre_wrapper"><pre class="programlisting">path:
  logs: /var/log/elasticsearch
  data: /var/data/elasticsearch</pre></div><h4><a id="cluster-name"></a>Cluster name</h4><p>Also, dont forget to give your production cluster a name, which is used
to discover and auto-join other nodes:</p><div class="pre_wrapper"><pre class="programlisting">cluster:
  name: &lt;NAME OF YOUR CLUSTER&gt;</pre></div><p>Make sure that you dont reuse the same cluster names in different
environments, otherwise you might end up with nodes joining the wrong cluster.
For instance you could use <code class="literal">logging-dev</code>, <code class="literal">logging-stage</code>, and <code class="literal">logging-prod</code>
for the development, staging, and production clusters.</p><h4><a id="node-name"></a>Node name</h4><p>You may also want to change the default node name for each node to
something like the display hostname. By default Elasticsearch will
randomly pick a Marvel character name from a list of around 3000 names
when your node starts up.</p><div class="pre_wrapper"><pre class="programlisting">node:
  name: &lt;NAME OF YOUR NODE&gt;</pre></div><p>The hostname of the machine is provided in the environment
variable <code class="literal">HOSTNAME</code>. If on your machine you only run a
single elasticsearch node for that cluster, you can set
the node name to the hostname using the <code class="literal">${...}</code> notation:</p><div class="pre_wrapper"><pre class="programlisting">node:
  name: ${HOSTNAME}</pre></div><p>Internally, all settings are collapsed into "namespaced" settings. For
example, the above gets collapsed into <code class="literal">node.name</code>. This means that
its easy to support other configuration formats, for example,
<a class="ulink" href="http://www.json.org" target="_top">JSON</a>. If JSON is a preferred configuration format,
simply rename the <code class="literal">elasticsearch.yml</code> file to <code class="literal">elasticsearch.json</code> and
add:</p><h4><a id="styles"></a>Configuration styles</h4><div class="pre_wrapper"><pre class="programlisting">{
    "network" : {
        "host" : "10.0.0.4"
    }
}</pre></div><p>It also means that its easy to provide the settings externally either
using the <code class="literal">ES_JAVA_OPTS</code> or as parameters to the <code class="literal">elasticsearch</code>
command, for example:</p><div class="pre_wrapper"><pre class="programlisting">$ elasticsearch -Des.network.host=10.0.0.4</pre></div><p>Another option is to set <code class="literal">es.default.</code> prefix instead of <code class="literal">es.</code> prefix,
which means the default setting will be used only if not explicitly set
in the configuration file.</p><p>Another option is to use the <code class="literal">${...}</code> notation within the configuration
file which will resolve to an environment setting, for example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "network" : {
        "host" : "${ES_NET_HOST}"
    }
}</pre></div><p>Additionally, for settings that you do not wish to store in the configuration
file, you can use the value <code class="literal">${prompt.text}</code> or <code class="literal">${prompt.secret}</code> and start
Elasticsearch in the foreground. <code class="literal">${prompt.secret}</code> has echoing disabled so
that the value entered will not be shown in your terminal; <code class="literal">${prompt.text}</code>
will allow you to see the value as you type it in. For example:</p><div class="pre_wrapper"><pre class="programlisting">node:
  name: ${prompt.text}</pre></div><p>On execution of the <code class="literal">elasticsearch</code> command, you will be prompted to enter
the actual value like so:</p><div class="pre_wrapper"><pre class="programlisting">Enter value for [node.name]:</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Elasticsearch will not start if <code class="literal">${prompt.text}</code> or <code class="literal">${prompt.secret}</code>
is used in the settings and the process is run as a service or in the background.</p></div></div><p>The location of the configuration file can be set externally using a
system property:</p><div class="pre_wrapper"><pre class="programlisting">$ elasticsearch -Des.config=/path/to/config/file</pre></div><h3><a id="configuration-index-settings"></a>Index Settings</h3><p>Indices created within the cluster can provide their own settings. For
example, the following creates an index with memory based storage
instead of the default file system based one (the format can be either
YAML or JSON):</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT http://localhost:9200/kimchy/ -d \
'
index :
    store:
        type: memory
'</pre></div><p>Index level settings can be set on the node level as well, for example,
within the <code class="literal">elasticsearch.yml</code> file, the following can be set:</p><div class="pre_wrapper"><pre class="programlisting">index :
    store:
        type: memory</pre></div><p>This means that every index that gets created on the specific node
started with the mentioned configuration will store the index in memory
<span class="strong emphasis"><strong>unless the index explicitly sets it</strong></span>. In other words, any index level
settings override what is set in the node configuration. Of course, the
above can also be set as a "collapsed" setting, for example:</p><div class="pre_wrapper"><pre class="programlisting">$ elasticsearch -Des.index.store.type=memory</pre></div><p>All of the index level configuration can be found within each
<a class="link" href="index-modules.html" title="Index Modules">index module</a>.</p><h3><a id="logging"></a>Logging</h3><p>Elasticsearch uses an internal logging abstraction and comes, out of the
box, with <a class="ulink" href="http://logging.apache.org/log4j/1.2/" target="_top">log4j</a>. It tries to simplify
log4j configuration by using <a class="ulink" href="http://www.yaml.org/" target="_top">YAML</a> to configure it,
and the logging configuration file is <code class="literal">config/logging.yml</code>. The
<a class="ulink" href="http://en.wikipedia.org/wiki/JSON" target="_top">JSON</a> and
<a class="ulink" href="http://en.wikipedia.org/wiki/.properties" target="_top">properties</a> formats are also
supported. Multiple configuration files can be loaded, in which case they will
get merged, as long as they start with the <code class="literal">logging.</code> prefix and end with one
of the supported suffixes (either <code class="literal">.yml</code>, <code class="literal">.yaml</code>, <code class="literal">.json</code> or <code class="literal">.properties</code>)
The logger section contains the java packages and their corresponding log
level, where it is possible to omit the <code class="literal">org.elasticsearch</code> prefix. The
appender section contains the destinations for the logs. Extensive information
on how to customize logging and all the supported appenders can be found on
the <a class="ulink" href="http://logging.apache.org/log4j/1.2/manual.html" target="_top">log4j documentation</a>.</p><p>Additional Appenders and other logging classes provided by
<a class="ulink" href="http://logging.apache.org/log4j/extras/" target="_top">log4j-extras</a> are also available,
out of the box.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="setup.html">Setup</a></span>  <span class="breadcrumb-node">Running as a Service on Linux</span></div><div class="navheader"><span class="prev"><a href="setup-configuration.html">
              &nbsp;
              Configuration</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="setup-service-win.html">Running as a Service on Windows
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="setup-service"></a>Running as a Service on Linux</h2></div></div></div><p>In order to run elasticsearch as a service on your operating system, the provided packages try to make it as easy as possible for you to start and stop elasticsearch during reboot and upgrades.</p><h3><a id="_linux"></a>Linux</h3><p>Currently our build automatically creates a debian package and an RPM package, which is available on the download page. The package itself does not have any dependencies, but you have to make sure that you installed a JDK.</p><p>Each package features a configuration file, which allows you to set the following parameters</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">ES_USER</code>
</p>
</td><td class="entry" valign="top">
<p>
The user to run as, defaults to <code class="literal">elasticsearch</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">ES_GROUP</code>
</p>
</td><td class="entry" valign="top">
<p>
The group to run as, defaults to <code class="literal">elasticsearch</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">ES_HEAP_SIZE</code>
</p>
</td><td class="entry" valign="top">
<p>
The heap size to start with
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">ES_HEAP_NEWSIZE</code>
</p>
</td><td class="entry" valign="top">
<p>
The size of the new generation heap
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">ES_DIRECT_SIZE</code>
</p>
</td><td class="entry" valign="top">
<p>
The maximum size of the direct memory
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">MAX_OPEN_FILES</code>
</p>
</td><td class="entry" valign="top">
<p>
Maximum number of open files, defaults to <code class="literal">65535</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">MAX_LOCKED_MEMORY</code>
</p>
</td><td class="entry" valign="top">
<p>
Maximum locked memory size. Set to "unlimited" if you use the bootstrap.mlockall option in elasticsearch.yml. You must also set ES_HEAP_SIZE.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">MAX_MAP_COUNT</code>
</p>
</td><td class="entry" valign="top">
<p>
Maximum number of memory map areas a process may have. If you use <code class="literal">mmapfs</code> as index store type, make sure this is set to a high value. For more information, check the <a class="ulink" href="https://github.com/torvalds/linux/blob/master/Documentation/sysctl/vm.txt" target="_top">linux kernel documentation</a> about <code class="literal">max_map_count</code>. This is set via <code class="literal">sysctl</code> before starting elasticsearch. Defaults to <code class="literal">65535</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">LOG_DIR</code>
</p>
</td><td class="entry" valign="top">
<p>
Log directory, defaults to <code class="literal">/var/log/elasticsearch</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">DATA_DIR</code>
</p>
</td><td class="entry" valign="top">
<p>
Data directory, defaults to <code class="literal">/var/lib/elasticsearch</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">WORK_DIR</code>
</p>
</td><td class="entry" valign="top">
<p>
Work directory, defaults to <code class="literal">/tmp/elasticsearch</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">CONF_DIR</code>
</p>
</td><td class="entry" valign="top">
<p>
Configuration file directory (which needs to include <code class="literal">elasticsearch.yml</code> and <code class="literal">logging.yml</code> files), defaults to <code class="literal">/etc/elasticsearch</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">CONF_FILE</code>
</p>
</td><td class="entry" valign="top">
<p>
Path to configuration file, defaults to <code class="literal">/etc/elasticsearch/elasticsearch.yml</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">ES_JAVA_OPTS</code>
</p>
</td><td class="entry" valign="top">
<p>
Any additional java options you may want to apply. This may be useful, if you need to set the <code class="literal">node.name</code> property, but do not want to change the <code class="literal">elasticsearch.yml</code> configuration file, because it is distributed via a provisioning system like puppet or chef. Example: <code class="literal">ES_JAVA_OPTS="-Des.node.name=search-01"</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">RESTART_ON_UPGRADE</code>
</p>
</td><td class="entry" valign="top">
<p>
Configure restart on package upgrade, defaults to <code class="literal">false</code>. This means you will have to restart your elasticsearch instance after installing a package manually. The reason for this is to ensure, that upgrades in a cluster do not result in a continuous shard reallocation resulting in high network traffic and reducing the response times of your cluster.
</p>
</td></tr></tbody></table></div><h4><a id="_debian_ubuntu"></a>Debian/Ubuntu</h4><p>The debian package ships with everything you need as it uses standard debian tools like update <code class="literal">update-rc.d</code> to define the runlevels it runs on. The init script is placed at <code class="literal">/etc/init.d/elasticsearch</code> as you would expect it. The configuration file is placed at <code class="literal">/etc/default/elasticsearch</code>.</p><p>The debian package does not start up the service by default. The reason for this is to prevent the instance to accidentally join a cluster, without being configured appropriately. After installing using <code class="literal">dpkg -i</code> you can use the following commands to ensure, that elasticsearch starts when the system is booted and then start up elasticsearch:</p><div class="pre_wrapper"><pre class="programlisting">sudo update-rc.d elasticsearch defaults 95 10
sudo /etc/init.d/elasticsearch start</pre></div><h5><a id="_installing_the_oracle_jdk"></a>Installing the oracle JDK</h5><p>The usual recommendation is to run the Oracle JDK with elasticsearch. However Ubuntu and Debian only ship the OpenJDK due to license issues. You can easily install the oracle installer package though. In case you are missing the <code class="literal">add-apt-repository</code> command under Debian GNU/Linux, make sure have at least Debian Wheezy and the package <code class="literal">python-software-properties</code> installed</p><div class="pre_wrapper"><pre class="programlisting">sudo add-apt-repository ppa:webupd8team/java
sudo apt-get update
sudo apt-get install oracle-java7-installer
java -version</pre></div><p>The last command should verify a successful installation of the Oracle JDK. If you want to install java8, you can call <code class="literal">apt-get install oracle-java8-installer</code></p><h4><a id="_rpm_based_distributions"></a>RPM based distributions</h4><h5><a id="_using_chkconfig"></a>Using chkconfig</h5><p>Some RPM based distributions are using <code class="literal">chkconfig</code> to enable and disable services. The init script is located at <code class="literal">/etc/init.d/elasticsearch</code>, where as the configuration file is placed at <code class="literal">/etc/sysconfig/elasticsearch</code>. Like the debian package the RPM package is not started by default after installation, you have to do this manually by entering the following commands</p><div class="pre_wrapper"><pre class="programlisting">sudo /sbin/chkconfig --add elasticsearch
sudo service elasticsearch start</pre></div><h5><a id="_using_systemd"></a>Using systemd</h5><p>Distributions like SUSE do not use the <code class="literal">chkconfig</code> tool to register services, but rather <code class="literal">systemd</code> and its command <code class="literal">/bin/systemctl</code> to start and stop services (at least in newer versions, otherwise use the <code class="literal">chkconfig</code> commands above). The configuration file is also placed at <code class="literal">/etc/sysconfig/elasticsearch</code>. After installing the RPM, you have to change the systemd configuration and then start up elasticsearch</p><div class="pre_wrapper"><pre class="programlisting">sudo /bin/systemctl daemon-reload
sudo /bin/systemctl enable elasticsearch.service
sudo /bin/systemctl start elasticsearch.service</pre></div><p>Also note that changing the <code class="literal">MAX_MAP_COUNT</code> setting in <code class="literal">/etc/sysconfig/elasticsearch</code> does not have any effect, you will have to change it in <code class="literal">/usr/lib/sysctl.d/elasticsearch.conf</code> in order to have it applied at startup.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="setup.html">Setup</a></span>  <span class="breadcrumb-node">Running as a Service on Windows</span></div><div class="navheader"><span class="prev"><a href="setup-service.html">
              &nbsp;
              Running as a Service on Linux</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="setup-dir-layout.html">Directory Layout
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="setup-service-win"></a>Running as a Service on Windows</h2></div></div></div><p>Windows users can configure Elasticsearch to run as a service to run in the background or start automatically
at startup without any user interaction.
This can be achieved through <code class="literal">service.bat</code> script under <code class="literal">bin/</code> folder which allows one to install,
remove, manage or configure the service and potentially start and stop the service, all from the command-line.</p><div class="pre_wrapper"><pre class="programlisting">c:\elasticsearch-1.7.6\bin&gt;service

Usage: service.bat install|remove|start|stop|manager [SERVICE_ID]</pre></div><p>The script requires one parameter (the command to execute) followed by an optional one indicating the service
id (useful when installing multiple Elasticsearch services).</p><p>The commands available are:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">install</code>
</p>
</td><td class="entry" valign="top">
<p>
Install Elasticsearch as a service
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">remove</code>
</p>
</td><td class="entry" valign="top">
<p>
Remove the installed Elasticsearch service (and stop the service if started)
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">start</code>
</p>
</td><td class="entry" valign="top">
<p>
Start the Elasticsearch service (if installed)
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">stop</code>
</p>
</td><td class="entry" valign="top">
<p>
Stop the Elasticsearch service (if started)
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">manager</code>
</p>
</td><td class="entry" valign="top">
<p>
Start a GUI for managing the installed service
</p>
</td></tr></tbody></table></div><p>Note that the environment configuration options available during the installation are copied and will be used during
the service lifecycle. This means any changes made to them after the installation will not be picked up unless
the service is reinstalled.</p><p>Based on the architecture of the available JDK/JRE (set through <code class="literal">JAVA_HOME</code>), the appropriate 64-bit(x64) or 32-bit(x86)
service will be installed. This information is made available during install:</p><div class="pre_wrapper"><pre class="programlisting">c:\elasticsearch-{version}bin&gt;service install
Installing service      :  "elasticsearch-service-x64"
Using JAVA_HOME (64-bit):  "c:\jvm\jdk1.7"
The service 'elasticsearch-service-x64' has been installed.</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>While a JRE can be used for the Elasticsearch service, due to its use of a client VM (as oppose to a server JVM which
offers better performance for long-running applications) its usage is discouraged and a warning will be issued.</p></div></div><h3><a id="_customizing_service_settings"></a>Customizing service settings</h3><p>There are two ways to customize the service settings:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Manager GUI
</span></dt><dd>
accessible through <code class="literal">manager</code> command, the GUI offers insight into the installed service including its status, startup type,
JVM, start and stop settings among other things. Simply invoking <code class="literal">service.bat</code> from the command-line with the aforementioned option
will open up the manager window:
</dd></dl></div><div class="informalfigure"><div class="mediaobject" align="center"><img class="images-service-manager-win-png" align="middle" alt="Windows Service Manager GUI"></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Customizing <code class="literal">service.bat</code>
</span></dt><dd>
at its core, <code class="literal">service.bat</code> relies on <a class="ulink" href="http://commons.apache.org/proper/commons-daemon/" target="_top">Apache Commons Daemon</a> project
to install the services. For full flexibility such as customizing the user under which the service runs, one can modify the installation
parameters to tweak all the parameters accordingly. Do note that this requires reinstalling the service for the new settings to be applied.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>There is also a community supported customizable MSI installer available: <a class="ulink" href="https://github.com/salyh/elasticsearch-msi-installer" target="_top">https://github.com/salyh/elasticsearch-msi-installer</a> (by Hendrik Saly).</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="setup.html">Setup</a></span>  <span class="breadcrumb-node">Directory Layout</span></div><div class="navheader"><span class="prev"><a href="setup-service-win.html">
              &nbsp;
              Running as a Service on Windows</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="setup-repositories.html">Repositories
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="setup-dir-layout"></a>Directory Layout</h2></div></div></div><p>The directory layout of an installation is as follows:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"></colgroup><thead><tr><th class="entry" align="left" valign="top"> Type </th><th class="entry" align="left" valign="top"> Description </th><th class="entry" align="left" valign="top"> Default Location </th><th class="entry" align="left" valign="top"> Setting</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>home</strong></span></p></td><td class="entry" align="left" valign="top"><p>Home of elasticsearch installation.</p></td><td class="entry" align="left" valign="top"><p><code class="literal"></code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">path.home</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>bin</strong></span></p></td><td class="entry" align="left" valign="top"><p>Binary scripts including <code class="literal">elasticsearch</code> to start a node.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">{path.home}/bin</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal"></code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>conf</strong></span></p></td><td class="entry" align="left" valign="top"><p>Configuration files including <code class="literal">elasticsearch.yml</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">{path.home}/config</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">path.conf</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>data</strong></span></p></td><td class="entry" align="left" valign="top"><p>The location of the data files of each index / shard allocated
on the node. Can hold multiple locations.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">{path.home}/data</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">path.data</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>logs</strong></span></p></td><td class="entry" align="left" valign="top"><p>Log files location.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">{path.home}/logs</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">path.logs</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>plugins</strong></span></p></td><td class="entry" align="left" valign="top"><p>Plugin files location. Each plugin will be contained in a subdirectory.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">{path.home}/plugins</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">path.plugins</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>repo</strong></span></p></td><td class="entry" align="left" valign="top"><p>Shared file system repository locations. Can hold multiple locations. A file system repository can be placed in to any subdirectory of any directory specified here.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">empty</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">path.repo</code></p></td></tr></tbody></table></div><p>The multiple data locations allows to stripe it. The striping is simple,
placing whole files in one of the locations, and deciding where to place
the file based on the value of the <code class="literal">index.store.distributor</code> setting:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">least_used</code> (default) always selects the directory with the most
available space
</li><li class="listitem">
<code class="literal">random</code> selects directories at random. The probability of selecting
a particular directory is proportional to amount of available space in
this directory.
</li></ul></div><p>Note, there are no multiple copies of the same data, in that, its
similar to RAID 0. Though simple, it should provide a good solution for
people that dont want to mess with RAID. Here is how it is configured:</p><pre class="screen">path.data: /mnt/first,/mnt/second</pre><p>Or the in an array format:</p><pre class="screen">path.data: ["/mnt/first", "/mnt/second"]</pre><h3><a id="default-paths"></a>Default Paths</h3><p>Below are the default paths that elasticsearch will use, if not explictly changed.</p><h4><a id="_deb_and_rpm"></a>deb and rpm</h4><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"></colgroup><thead><tr><th class="entry" align="left" valign="top"> Type </th><th class="entry" align="left" valign="top"> Description </th><th class="entry" align="left" valign="top"> Location Debian/Ubuntu </th><th class="entry" align="left" valign="top"> Location RHEL/CentOS</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>home</strong></span></p></td><td class="entry" align="left" valign="top"><p>Home of elasticsearch installation.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">/usr/share/elasticsearch</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">/usr/share/elasticsearch</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>bin</strong></span></p></td><td class="entry" align="left" valign="top"><p>Binary scripts including <code class="literal">elasticsearch</code> to start a node.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">/usr/share/elasticsearch/bin</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">/usr/share/elasticsearch/bin</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>conf</strong></span></p></td><td class="entry" align="left" valign="top"><p>Configuration files <code class="literal">elasticsearch.yml</code> and <code class="literal">logging.yml</code>.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">/etc/elasticsearch</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">/etc/elasticsearch</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>conf</strong></span></p></td><td class="entry" align="left" valign="top"><p>Environment variables including heap size, file descriptors.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">/etc/default/elasticseach</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">/etc/sysconfig/elasticsearch</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>data</strong></span></p></td><td class="entry" align="left" valign="top"><p>The location of the data files of each index / shard allocated
on the node.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">/var/lib/elasticsearch/data</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">/var/lib/elasticsearch</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>logs</strong></span></p></td><td class="entry" align="left" valign="top"><p>Log files location</p></td><td class="entry" align="left" valign="top"><p><code class="literal">/var/log/elasticsearch</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">/var/log/elasticsearch</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>plugins</strong></span></p></td><td class="entry" align="left" valign="top"><p>Plugin files location. Each plugin will be contained in a subdirectory.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">/usr/share/elasticsearch/plugins</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">/usr/share/elasticsearch/plugins</code></p></td></tr></tbody></table></div><h4><a id="_zip_and_tar_gz"></a>zip and tar.gz</h4><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th class="entry" align="left" valign="top"> Type </th><th class="entry" align="left" valign="top"> Description </th><th class="entry" align="left" valign="top"> Location</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>home</strong></span></p></td><td class="entry" align="left" valign="top"><p>Home of elasticsearch installation</p></td><td class="entry" align="left" valign="top"><p><code class="literal">{extract.path}</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>bin</strong></span></p></td><td class="entry" align="left" valign="top"><p>Binary scripts including <code class="literal">elasticsearch</code> to start a node</p></td><td class="entry" align="left" valign="top"><p><code class="literal">{extract.path}/bin</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>conf</strong></span></p></td><td class="entry" align="left" valign="top"><p>Configuration files <code class="literal">elasticsearch.yml</code> and <code class="literal">logging.yml</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">{extract.path}/config</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>conf</strong></span></p></td><td class="entry" align="left" valign="top"><p>Environment variables including heap size, file descriptors</p></td><td class="entry" align="left" valign="top"><p><code class="literal">{extract.path}/config</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>data</strong></span></p></td><td class="entry" align="left" valign="top"><p>The location of the data files of each index / shard allocated
on the node</p></td><td class="entry" align="left" valign="top"><p><code class="literal">{extract.path}/data</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>logs</strong></span></p></td><td class="entry" align="left" valign="top"><p>Log files location</p></td><td class="entry" align="left" valign="top"><p><code class="literal">{extract.path}/logs</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><span class="strong emphasis"><strong>plugins</strong></span></p></td><td class="entry" align="left" valign="top"><p>Plugin files location. Each plugin will be contained in a subdirectory</p></td><td class="entry" align="left" valign="top"><p><code class="literal">{extract.path}/plugins</code></p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="setup.html">Setup</a></span>  <span class="breadcrumb-node">Repositories</span></div><div class="navheader"><span class="prev"><a href="setup-dir-layout.html">
              &nbsp;
              Directory Layout</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="setup-upgrade.html">Upgrading
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="setup-repositories"></a>Repositories</h2></div></div></div><p>We also have repositories available for APT and YUM based distributions. Note that we only provide
binary packages, but no source packages, as the packages are created as part of the Elasticsearch
build.</p><p>We have split the major versions in separate urls to avoid accidental upgrades across major version.
For all 0.90.x releases use 0.90 as version number, for 1.0.x use 1.0, for 1.1.x use 1.1 etc.</p><p>We use the PGP key <a class="ulink" href="http://pgp.mit.edu/pks/lookup?op=vindex&amp;search=0xD27D666CD88E42B4" target="_top">D88E42B4</a>,
Elasticsearch Signing Key, with fingerprint</p><pre class="literallayout">4609 5ACC 8548 582C 1A26 99A9 D27D 666C D88E 42B4</pre><p>to sign all our packages. It is available from <a class="ulink" href="http://pgp.mit.edu" target="_top">http://pgp.mit.edu</a>.</p><h3><a id="_apt"></a>APT</h3><p>Download and install the Public Signing Key:</p><div class="pre_wrapper"><pre class="programlisting">wget -qO - https://packages.elastic.co/GPG-KEY-elasticsearch | sudo apt-key add -</pre></div><p>Save the repository definition to  <code class="literal">/etc/apt/sources.list.d/elasticsearch-{branch}.list</code>:</p><div class="pre_wrapper"><pre class="programlisting">echo "deb http://packages.elastic.co/elasticsearch/1.7/debian stable main" | sudo tee -a /etc/apt/sources.list.d/elasticsearch-1.7.list</pre></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Use the <code class="literal">echo</code> method described above to add the Elasticsearch repository.  Do not use <code class="literal">add-apt-repository</code>
as it will add a <code class="literal">deb-src</code> entry as well, but we do not provide a source package.
If you have added the <code class="literal">deb-src</code> entry, you will see an error like
the following:</p><pre class="literallayout">Unable to find expected entry 'main/source/Sources' in Release file (Wrong sources.list entry or malformed file)</pre><p>Just delete the <code class="literal">deb-src</code> entry from the <code class="literal">/etc/apt/sources.list</code> file and the installation should work as expected.</p></div></div><p>Run apt-get update and the repository is ready for use. You can install it with:</p><div class="pre_wrapper"><pre class="programlisting">sudo apt-get update &amp;&amp; sudo apt-get install elasticsearch</pre></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>If two entries exist for the same Elasticsearch repository, you will see an error like this during <code class="literal">apt-get update</code>:</p><pre class="literallayout">Duplicate sources.list entry http://packages.elastic.co/elasticsearch/1.7/debian/ ...`</pre><p>Examine <code class="literal">/etc/apt/sources.list.d/elasticsearch-1.7.list</code> for the duplicate entry or locate the duplicate entry amongst the files in <code class="literal">/etc/apt/sources.list.d/</code> and the <code class="literal">/etc/apt/sources.list</code> file.</p></div></div><p>Configure Elasticsearch to automatically start during bootup. If your
distribution is using SysV init, then you will need to run:</p><div class="pre_wrapper"><pre class="programlisting">sudo update-rc.d elasticsearch defaults 95 10</pre></div><p>Otherwise if your distribution is using systemd:</p><div class="pre_wrapper"><pre class="programlisting">sudo /bin/systemctl daemon-reload
sudo /bin/systemctl enable elasticsearch.service</pre></div><h3><a id="_yum"></a>YUM</h3><p>Download and install the public signing key:</p><div class="pre_wrapper"><pre class="programlisting">rpm --import https://packages.elastic.co/GPG-KEY-elasticsearch</pre></div><p>Add the following in your <code class="literal">/etc/yum.repos.d/</code> directory
in a file with a <code class="literal">.repo</code> suffix, for example <code class="literal">elasticsearch.repo</code></p><div class="pre_wrapper"><pre class="programlisting">[elasticsearch-1.7]
name=Elasticsearch repository for 1.7.x packages
baseurl=http://packages.elastic.co/elasticsearch/1.7/centos
gpgcheck=1
gpgkey=http://packages.elastic.co/GPG-KEY-elasticsearch
enabled=1</pre></div><p>And your repository is ready for use. You can install it with:</p><div class="pre_wrapper"><pre class="programlisting">yum install elasticsearch</pre></div><p>Configure Elasticsearch to automatically start during bootup. If your
distribution is using SysV <code class="literal">init</code> (check with <code class="literal">ps -p 1</code>), then you will need to run:</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>The repositories do not work with older rpm based distributions
         that still use RPM v3, like CentOS5.</p></div></div><div class="pre_wrapper"><pre class="programlisting">chkconfig --add elasticsearch</pre></div><p>Otherwise if your distribution is using <code class="literal">systemd</code>:</p><div class="pre_wrapper"><pre class="programlisting">sudo /bin/systemctl daemon-reload
sudo /bin/systemctl enable elasticsearch.service</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="setup.html">Setup</a></span>  <span class="breadcrumb-node">Upgrading</span></div><div class="navheader"><span class="prev"><a href="setup-repositories.html">
              &nbsp;
              Repositories</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="breaking-changes.html">Breaking changes
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="setup-upgrade"></a>Upgrading</h2></div></div></div><p>Elasticsearch can usually be upgraded using a rolling upgrade process, resulting in no interruption of service.  This section details how to perform both rolling and restart upgrades.</p><p>To determine whether a rolling upgrade is supported for your release, please
consult this table:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th class="entry" align="left" valign="top">Upgrade From   </th><th class="entry" align="left" valign="top">Upgrade To     </th><th class="entry" align="left" valign="top">Supported Upgrade Type</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">0.90.x</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">1.x</code></p></td><td class="entry" align="left" valign="top"><p><a class="link" href="setup-upgrade.html#restart-upgrade" title="Cluster restart upgrade processedit">Full cluster restart</a></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">&lt; 0.90.7</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">0.90.x</code></p></td><td class="entry" align="left" valign="top"><p><a class="link" href="setup-upgrade.html#restart-upgrade" title="Cluster restart upgrade processedit">Full cluster restart</a></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">&gt;= 0.90.7</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">0.90.x</code></p></td><td class="entry" align="left" valign="top"><p><a class="link" href="setup-upgrade.html#rolling-upgrades" title="Rolling upgrade processedit">Rolling upgrade</a></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">1.0.0 - 1.3.1</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">1.x</code></p></td><td class="entry" align="left" valign="top"><p><a class="link" href="setup-upgrade.html#rolling-upgrades" title="Rolling upgrade processedit">Rolling upgrade</a> (if <a class="link" href="modules-indices.html#recovery" title="Recoveryedit"><code class="literal">indices.recovery.compress</code></a> set to <code class="literal">false</code>)</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">&gt;= 1.3.2</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">1.x</code></p></td><td class="entry" align="left" valign="top"><p><a class="link" href="setup-upgrade.html#rolling-upgrades" title="Rolling upgrade processedit">Rolling upgrade</a></p></td></tr></tbody></table></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>Before upgrading Elasticsearch, it is a good idea to consult the
<a class="link" href="breaking-changes.html" title="Breaking changes">breaking changes</a> docs.</p></div></div><h3><a id="backup"></a>Back Up Your Data!</h3><p>Before performing an upgrade, its a good idea to back up the data on your system.  This will allow you to roll back in the event of a problem with the upgrade.  The upgrades sometimes include upgrades to the Lucene libraries used by Elasticsearch to access the index files, and after an index file has been updated to work with a new version of Lucene, it may not be accessible to the versions of Lucene present in earlier Elasticsearch releases.</p><h4><a id="_0_90_x_and_earlier"></a>0.90.x and earlier</h4><p>To back up a running 0.90.x system, first disable index flushing.  This will prevent indices from being flushed to disk while the backup is in process:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/_all/_settings' -d '{
    "index": {
        "translog.disable_flush": "true"
    }
}'</pre></div><p>Then disable reallocation.  This will prevent the cluster from moving data files from one node to another while the backup is in process:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/_cluster/settings' -d '{
    "transient" : {
        "cluster.routing.allocation.disable_allocation": "true"
    }
}'</pre></div><p>After reallocation and index flushing are disabled, initiate a backup of Elasticsearchs data path using your favorite backup method (tar, storage array snapshots, backup software).  When the backup is complete and data no longer needs to be read from the Elasticsearch data path, reallocation and index flushing must be re-enabled:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/_all/_settings' -d '{
    "index": {
        "translog.disable_flush": "false"
    }
}'

$ curl -XPUT 'http://localhost:9200/_cluster/settings' -d '{
    "transient" : {
        "cluster.routing.allocation.disable_allocation": "false"
    }
}'</pre></div><h4><a id="_1_0_and_later"></a>1.0 and later</h4><p>To back up a running 1.0 or later system, it is simplest to use the snapshot feature.  See the complete instructions for <a class="link" href="modules-snapshots.html" title="Snapshot And Restore">backup and restore with snapshots</a>.</p><h3><a id="rolling-upgrades"></a>Rolling upgrade process</h3><p>A rolling upgrade allows the ES cluster to be upgraded one node at a time, with no observable downtime for end users.  Running multiple versions of Elasticsearch in the same cluster for any length of time beyond that required for an upgrade is not supported, as shard replication from the more recent version to the previous versions will not work.</p><p>Within minor or maintenance releases after release 1.0, rolling upgrades are supported.  To perform a rolling upgrade:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Disable shard reallocation (optional).  This is done to allow for a faster startup after cluster shutdown.  If this step is not performed, the nodes will immediately start trying to replicate shards to each other on startup and will spend a lot of time on wasted I/O.  With shard reallocation disabled, the nodes will join the cluster with their indices intact, without attempting to rebalance.  After startup is complete, reallocation will be turned back on.
</li></ul></div><p>This syntax applies to Elasticsearch 1.0 and later:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_cluster/settings -d '{
        "transient" : {
            "cluster.routing.allocation.enable" : "none"
        }
}'</pre></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
(Only applicable to upgrades from ES 1.6.0 to a higher version) There is no problem continuing to index while doing the upgrade. However, you can speed the process considerably
by <span class="strong emphasis"><strong>temporarily</strong></span> stopping non-essential indexing and issuing a manual <a class="link" href="indices-synced-flush.html" title="Synced Flush">synced flush</a>.
A synced flush is special kind of flush which can seriously speed up recovery of shards. Elasticsearch automatically
uses it when an index has been inactive for a while (default is <code class="literal">5m</code>) but you can manually trigger it using the following command:
</li></ul></div><div class="pre_wrapper"><pre class="programlisting">curl -XPOST localhost:9200/_all/_flush/synced</pre></div><p>Note that a synced flush call is a best effort operation. It will fail there are any pending indexing operations. It is safe to issue
it multiple times if needed.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Shut down a single node within the cluster.
</li></ul></div><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'http://localhost:9200/_cluster/nodes/_local/_shutdown'</pre></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Confirm that all shards are correctly reallocated to the remaining running nodes.
</li><li class="listitem"><p class="simpara">
Upgrade the stopped node.  To upgrade using a zip or compressed tarball from elastic.co:
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
Extract the zip or tarball to a new directory, usually in the same volume as the current Elasticsearch installation.  Do not overwrite the existing installation, as the downloaded archive will contain a default elasticsearch.yml file and will overwrite your existing configuration.
</li><li class="listitem">
Copy the configuration files from the old Elasticsearch installations config directory to the new Elasticsearch installations config directory.  Move data files from the old Elasticsesarch installations data directory if necessary.  If data files are not located within the tarballs extraction directory, they will not have to be moved.
</li><li class="listitem">
The simplest solution for moving from one version to another is to have a symbolic link for <span class="emphasis"><em>elasticsearch</em></span> that points to the currently running version.  This link can be easily updated and will provide a stable access point to the most recent version.  Update this symbolic link if it is being used.
</li></ul></div></li><li class="listitem"><p class="simpara">
To upgrade using a <code class="literal">.deb</code> or <code class="literal">.rpm</code> package:
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
Use <code class="literal">rpm</code> or <code class="literal">dpkg</code> to install the new package.  All files should be placed in their proper locations, and config files should not be overwritten.
</li></ul></div></li><li class="listitem">
Start the now upgraded node.  Confirm that it joins the cluster.
</li><li class="listitem">
Re-enable shard reallocation:
</li></ul></div><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_cluster/settings -d '{
        "transient" : {
            "cluster.routing.allocation.enable" : "all"
        }
}'</pre></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Observe that all shards are properly allocated on all nodes.  Balancing may take some time.
</li><li class="listitem">
Repeat this process for all remaining nodes.
</li></ul></div><div class="important admon"><div class="icon"><img alt="Important" class="images-icons-important-png"></div><div class="admon_content"><p>During a rolling upgrade, primary shards assigned to a node with the higher
version will never have their replicas assigned to a node with the lower
version, because the newer version may have a different data format which is
not understood by the older version.</p><p>If it is not possible to assign the replica shards to another node with the
higher versione.g. if there is only one node with the higher version in
the clusterthen the replica shards will remain unassigned, i.e. the
cluster health will be status <code class="literal">yellow</code>.  As soon as another node with the
higher version joins the cluster, the replicas should be assigned and the
cluster health will reach status <code class="literal">green</code>.</p></div></div><p>It may be possible to perform the upgrade by installing the new software while the service is running.  This would reduce downtime by ensuring the service was ready to run on the new version as soon as it is stopped on the node being upgraded.  This can be done by installing the new version in its own directory and using the symbolic link method outlined above.  It is important to test this procedure first to be sure that site-specific configuration data and production indices will not be overwritten during the upgrade process.</p><h3><a id="restart-upgrade"></a>Cluster restart upgrade process</h3><p>Elasticsearch releases prior to 1.0 and releases after 1.0 are not compatible with each other, so a rolling upgrade is not possible.  In order to upgrade a pre-1.0 system to 1.0 or later, a full cluster stop and start is required.  In order to perform this upgrade:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Disable shard reallocation (optional).  This is done to allow for a faster startup after cluster shutdown.  If this step is not performed, the nodes will immediately start trying to replicate shards to each other on startup and will spend a lot of time on wasted I/O.  With shard reallocation disabled, the nodes will join the cluster with their indices intact, without attempting to rebalance.  After startup is complete, reallocation will be turned back on.
</li></ul></div><p>This syntax is from versions prior to 1.0:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_cluster/settings -d '{
    "persistent" : {
    "cluster.routing.allocation.disable_allocation" : true
    }
}'</pre></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Stop all Elasticsearch services on all nodes in the cluster.
</li></ul></div><div class="pre_wrapper"><pre class="programlisting">        curl -XPOST 'http://localhost:9200/_shutdown'</pre></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
On the first node to be upgraded, extract the archive or install the new package as described above in the Rolling Upgrades section.  Repeat for all nodes.
</li><li class="listitem"><p class="simpara">
After upgrading Elasticsearch on all nodes is complete, the cluster can be started by starting each node individually.
</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
Start master-eligible nodes first, one at a time.  Verify that a quorum has been reached and a master has been elected before proceeding.
</li><li class="listitem">
Start data nodes and then client nodes one at a time, verifying that they successfully join the cluster.
</li></ul></div></li><li class="listitem">
When the cluster is running and reaches a yellow state, shard reallocation can be enabled.
</li></ul></div><p>This syntax is from release 1.0 and later:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_cluster/settings -d '{
        "persistent" : {
    "cluster.routing.allocation.disable_allocation": false,
        "cluster.routing.allocation.enable" : "all"
        }
}'</pre></div><p>The cluster upgrade can be streamlined by installing the software before stopping cluster services.  If this is done, testing must be performed to ensure that no production data or configuration files are overwritten prior to restart.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">Breaking changes</span></div><div class="navheader"><span class="prev"><a href="setup-upgrade.html">
              &nbsp;
              Upgrading</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="breaking-changes-1.6.html">Breaking changes in 1.6
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="breaking-changes"></a>Breaking changes</h1></div></div></div><div class="partintro"><div></div><p>This section discusses the changes that you need to be aware of when migrating
your application from one version of Elasticsearch to another.</p><p>As a general rule:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Migration between major versionse.g. <code class="literal">1.x</code> to <code class="literal">2.x</code>  requires a <a class="link" href="setup-upgrade.html#restart-upgrade" title="Cluster restart upgrade processedit">full cluster restart</a>.
</li><li class="listitem">
Migration between minor versionse.g. <code class="literal">1.x</code> to <code class="literal">1.y</code>can be
  performed by <a class="link" href="setup-upgrade.html#rolling-upgrades" title="Rolling upgrade processedit">upgrading one node at a time</a>.
</li></ul></div><p>See <a class="xref" href="setup-upgrade.html" title="Upgrading"><em>Upgrading</em></a> for more info.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-node">Breaking changes in 1.6</span></div><div class="navheader"><span class="prev"><a href="breaking-changes.html">
              &nbsp;
              Breaking changes</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="breaking-changes-1.5.html">Breaking changes in 1.5
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="breaking-changes-1.6"></a>Breaking changes in 1.6</h2></div></div></div><p>This section discusses the changes that you need to be aware of when migrating
your application from Elasticsearch 1.x to Elasticsearch 1.6.</p><h3><a id="_more_like_this_api"></a>More Like This API</h3><p>The More Like This API query has been deprecated and will be removed in 2.0. Instead use the <a class="link" href="query-dsl-mlt-query.html" title="More Like This Query">More Like This Query</a>.</p><h3><a id="_literal_top_children_literal_query"></a><code class="literal">top_children</code> query</h3><p>The <code class="literal">top_children</code> query has been deprecated and will be removed in 2.0. Instead the <code class="literal">has_child</code> query should be used.
The <code class="literal">top_children</code> query isnt always faster than the <code class="literal">has_child</code> query and the <code class="literal">top_children</code> query is often inaccurate.
The total hits and any aggregations in the same search request will likely be off.</p><h3><a id="_snapshot_and_restore"></a>Snapshot and Restore</h3><p>Locations of file system repositories has to be now registered using <code class="literal">path.repo</code> setting. The <code class="literal">path.repo</code>
setting can contain one or more repository locations:</p><div class="pre_wrapper"><pre class="programlisting">path.repo: ["/mnt/daily", "/mnt/weekly"]</pre></div><p>If the file system repository location is specified as an absolute path it has to start with one of the locations
specified in <code class="literal">path.repo</code>. If the location is specified as a relative path, it will be resolved against the first
location specified in the <code class="literal">path.repo</code> setting.</p><p>Starting with version 1.6.1 URL repositories with <code class="literal">http:</code>, <code class="literal">https:</code>, and <code class="literal">ftp:</code> URLs has to be whitelisted by specifying allowed URLs in the
<code class="literal">repositories.url.allowed_urls</code> setting. This setting supports wildcards in the place of host, path, query, and
fragment. For example:</p><div class="pre_wrapper"><pre class="programlisting">repositories.url.allowed_urls: ["http://www.example.org/root/*", "https://*.mydomain.com/*?*#*"]</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-node">Breaking changes in 1.5</span></div><div class="navheader"><span class="prev"><a href="breaking-changes-1.6.html">
              &nbsp;
              Breaking changes in 1.6</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="breaking-changes-1.4.html">Breaking changes in 1.4
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="breaking-changes-1.5"></a>Breaking changes in 1.5</h2></div></div></div><p>This section discusses the changes that you need to be aware of when migrating
your application from Elasticsearch 1.x to Elasticsearch 1.5.</p><h4><a id="_aggregations"></a>Aggregations</h4><p>The <code class="literal">date_histogram</code> aggregation now support a simplified <code class="literal">offset</code> option that replaces the previous <code class="literal">pre_offset</code> and
<code class="literal">post_offset</code> which are deprecated in 1.5. Instead of having to specify two separate offset shifts of the underlying buckets, the <code class="literal">offset</code> option
moves the bucket boundaries in positive or negative direction depending on its argument.</p><p>Also for <code class="literal">date_histogram</code>, options for <code class="literal">pre_zone</code> and <code class="literal">post_zone</code> options and the <code class="literal">pre_zone_adjust_large_interval</code> parameter
are deprecated in 1.5 and replaced by the already existing <code class="literal">time_zone</code> option. The behavior of <code class="literal">time_zone</code> is equivalent to the former
<code class="literal">pre_zone</code> option.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-node">Breaking changes in 1.4</span></div><div class="navheader"><span class="prev"><a href="breaking-changes-1.5.html">
              &nbsp;
              Breaking changes in 1.5</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="breaking-changes-1.0.html">Breaking changes in 1.0
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="breaking-changes-1.4"></a>Breaking changes in 1.4</h2></div></div></div><p>This section discusses the changes that you need to be aware of when migrating
your application from Elasticsearch 1.x to Elasticsearch 1.4.</p><h3><a id="_percolator"></a>Percolator</h3><p>In indices created with version <code class="literal">1.4.0</code> or later, percolation queries can only
refer to fields that already exist in the mappings in that index. There are
two ways to make sure that a field mapping exist:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Add or update a mapping via the <a class="link" href="indices-create-index.html" title="Create Index">create index</a> or
  <a class="link" href="indices-put-mapping.html" title="Put Mapping">put mapping</a> apis.
</li><li class="listitem">
Percolate a document before registering a query. Percolating a document can
  add field mappings dynamically, in the same way as happens when indexing a
  document.
</li></ul></div><h3><a id="_aliases"></a>Aliases</h3><p><a class="link" href="indices-aliases.html" title="Index Aliases">Aliases</a> can include <a class="link" href="query-dsl-filters.html" title="Filters">filters</a> which
are automatically applied to any search performed via the alias.
<a class="link" href="indices-aliases.html#filtered" title="Filtered Aliasesedit">Filtered aliases</a> created with version <code class="literal">1.4.0</code> or later can only
refer to field names which exist in the mappings of the index (or indices)
pointed to by the alias.</p><p>Add or update a mapping via the <a class="link" href="indices-create-index.html" title="Create Index">create index</a> or
<a class="link" href="indices-put-mapping.html" title="Put Mapping">put mapping</a> apis.</p><h3><a id="_indices_apis"></a>Indices APIs</h3><p>The <a class="link" href="indices-warmers.html#warmer-retrieving" title="GETting Warmeredit">get warmer api</a> will return a section for <code class="literal">warmers</code> even if there are
no warmers.  This ensures that the following two examples are equivalent:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/_all/_warmers'

curl -XGET 'http://localhost:9200/_warmers'</pre></div><p>The <a class="link" href="indices-aliases.html#alias-retrieving" title="Retrieving existing aliasesedit">get alias api</a> will return a section for <code class="literal">aliases</code> even if there are
no aliases.  This ensures that the following two examples are equivalent:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/_all/_aliases'

curl -XGET 'http://localhost:9200/_aliases'</pre></div><p>The <a class="link" href="indices-get-mapping.html" title="Get Mapping">get mapping api</a> will return a section for <code class="literal">mappings</code> even if there are
no mappings.  This ensures that the following two examples are equivalent:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/_all/_mappings'

curl -XGET 'http://localhost:9200/_mappings'</pre></div><h3><a id="_bulk_udp"></a>Bulk UDP</h3><p><a class="link" href="docs-bulk-udp.html" title="Bulk UDP API">Bulk UDP</a> has been deprecated and will be removed in 2.0.
You should use <a class="link" href="docs-bulk.html" title="Bulk API">the standard bulk API</a> instead.
Each cluster must have an elected master node in order to be fully operational. Once a node loses its elected master
node it will reject some or all operations.</p><h3><a id="_zen_discovery"></a>Zen discovery</h3><p>On versions before <code class="literal">1.4.0.Beta1</code> all operations are rejected when a node loses its elected master. From <code class="literal">1.4.0.Beta1</code>
only write operations will be rejected by default. Read operations will still be served based on the information available
to the node, which may result in being partial and possibly also stale. If the default is undesired then the
pre <code class="literal">1.4.0.Beta1</code> behaviour can be enabled, see: <a class="link" href="modules-discovery-zen.html" title="Zen Discovery">no-master-block</a></p><h3><a id="_more_like_this_field"></a>More Like This Field</h3><p>The More Like This Field query has been deprecated in favor of the <a class="link" href="query-dsl-mlt-query.html" title="More Like This Query">More Like This Query</a>
restrained set to a specific <code class="literal">field</code>. It will be removed in 2.0.</p><h3><a id="_mvel_is_deprecated"></a>MVEL is deprecated</h3><p>Groovy is the new default scripting language in Elasticsearch, and is enabled in <code class="literal">sandbox</code> mode
by default.  MVEL has been removed from core, but is available as a plugin:
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-lang-mvel" target="_top">https://github.com/elasticsearch/elasticsearch-lang-mvel</a></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-node">Breaking changes in 1.0</span></div><div class="navheader"><span class="prev"><a href="breaking-changes-1.4.html">
              &nbsp;
              Breaking changes in 1.4</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_system_and_settings.html">System and settings
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="breaking-changes-1.0"></a>Breaking changes in 1.0</h2></div></div></div><p>This section discusses the changes that you need to be aware of when migrating
your application to Elasticsearch 1.0.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-link"><a href="breaking-changes-1.0.html">Breaking changes in 1.0</a></span>  <span class="breadcrumb-node">System and settings</span></div><div class="navheader"><span class="prev"><a href="breaking-changes-1.0.html">
              &nbsp;
              Breaking changes in 1.0</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_stats_and_info_apis.html">Stats and Info APIs
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_system_and_settings"></a>System and settings</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Elasticsearch now runs in the foreground by default.  There is no more <code class="literal">-f</code>
  flag on the command line.  Instead, to run elasticsearch as a daemon, use
  the <code class="literal">-d</code> flag:
</li></ul></div><div class="pre_wrapper"><pre class="programlisting">./bin/elasticsearch -d</pre></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Command line settings can now be passed without the <code class="literal">-Des.</code> prefix, for
  instance:
</li></ul></div><div class="pre_wrapper"><pre class="programlisting">./bin/elasticsearch --node.name=search_1 --cluster.name=production</pre></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Elasticsearch on 64 bit Linux now uses <a class="link" href="index-modules-store.html#mmapfs" title="MMap FSedit"><code class="literal">mmapfs</code></a> by default.  Make
  sure that you set <a class="link" href="setup-service.html" title="Running as a Service on Linux"><code class="literal">MAX_MAP_COUNT</code></a> to a sufficiently high
  number.  The RPM and Debian packages default this value to <code class="literal">262144</code>.
</li><li class="listitem">
The RPM and Debian packages no longer start Elasticsearch by default.
</li><li class="listitem"><p class="simpara">
The <code class="literal">cluster.routing.allocation</code> settings (<code class="literal">disable_allocation</code>,
  <code class="literal">disable_new_allocation</code> and <code class="literal">disable_replica_location</code>) have been
  <a class="link" href="modules-cluster.html" title="Cluster">replaced by the single setting</a>:
</p><div class="pre_wrapper"><pre class="programlisting">cluster.routing.allocation.enable: all|primaries|new_primaries|none</pre></div></li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-link"><a href="breaking-changes-1.0.html">Breaking changes in 1.0</a></span>  <span class="breadcrumb-node">Stats and Info APIs</span></div><div class="navheader"><span class="prev"><a href="_system_and_settings.html">
              &nbsp;
              System and settings</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_indices_apis_2.html">Indices APIs
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_stats_and_info_apis"></a>Stats and Info APIs</h2></div></div></div><p>The <a class="link" href="cluster-state.html" title="Cluster State"><code class="literal">cluster_state</code></a>, <a class="link" href="cluster-nodes-info.html" title="Nodes Info"><code class="literal">nodes_info</code></a>,
<a class="link" href="cluster-nodes-stats.html" title="Nodes Stats"><code class="literal">nodes_stats</code></a> and <a class="link" href="indices-stats.html" title="Indices Stats"><code class="literal">indices_stats</code></a>
APIs have all been changed to make their format more RESTful and less clumsy.</p><p>For instance, if you just want the <code class="literal">nodes</code> section of the the <code class="literal">cluster_state</code>,
instead of:</p><div class="pre_wrapper"><pre class="programlisting">GET /_cluster/state?filter_metadata&amp;filter_routing_table&amp;filter_blocks</pre></div><p>you now use:</p><div class="pre_wrapper"><pre class="programlisting">GET /_cluster/state/nodes</pre></div><p>Similarly for the <code class="literal">nodes_stats</code> API, if you want the <code class="literal">transport</code> and <code class="literal">http</code>
metrics only, instead of:</p><div class="pre_wrapper"><pre class="programlisting">GET /_nodes/stats?clear&amp;transport&amp;http</pre></div><p>you now use:</p><div class="pre_wrapper"><pre class="programlisting">GET /_nodes/stats/transport,http</pre></div><p>See the links above for full details.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-link"><a href="breaking-changes-1.0.html">Breaking changes in 1.0</a></span>  <span class="breadcrumb-node">Indices APIs</span></div><div class="navheader"><span class="prev"><a href="_stats_and_info_apis.html">
              &nbsp;
              Stats and Info APIs</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_index_request.html">Index request
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_indices_apis_2"></a>Indices APIs</h2></div></div></div><p>The <code class="literal">mapping</code>, <code class="literal">alias</code>, <code class="literal">settings</code>, and <code class="literal">warmer</code> index APIs are all similar
but there are subtle differences in the order of the URL and the response
body.  For instance, adding a mapping and a warmer look slightly different:</p><div class="pre_wrapper"><pre class="programlisting">PUT /{index}/{type}/_mapping
PUT /{index}/_warmer/{name}</pre></div><p>These URLs have been unified as:</p><div class="pre_wrapper"><pre class="programlisting">PUT /{indices}/_mapping/{type}
PUT /{indices}/_alias/{name}
PUT /{indices}/_warmer/{name}

GET /{indices}/_mapping/{types}
GET /{indices}/_alias/{names}
GET /{indices}/_settings/{names}
GET /{indices}/_warmer/{names}

DELETE /{indices}/_mapping/{types}
DELETE /{indices}/_alias/{names}
DELETE /{indices}/_warmer/{names}</pre></div><p>All of the <code class="literal">{indices}</code>, <code class="literal">{types}</code> and <code class="literal">{names}</code> parameters can be replaced by:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">_all</code>, <code class="literal">*</code> or blank (ie left out altogether), all of which mean all
</li><li class="listitem">
wildcards like <code class="literal">test*</code>
</li><li class="listitem">
comma-separated lists: <code class="literal">index_1,test_*</code>
</li></ul></div><p>The only exception is <code class="literal">DELETE</code> which doesnt accept blank (missing)
parameters. If you want to delete something, you should be specific.</p><p>Similarly, the return values for <code class="literal">GET</code> have been unified with the following
rules:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Only return values that exist.  If you try to <code class="literal">GET</code> a mapping which doesnt
  exist, then the result will be an empty object: <code class="literal">{}</code>. We no longer throw a
  <code class="literal">404</code> if the requested mapping/warmer/alias/setting doesnt exist.
</li><li class="listitem"><p class="simpara">
The response format always has the index name, then the section, then the
  element name, for instance:
</p><div class="pre_wrapper"><pre class="programlisting">{
    "my_index": {
        "mappings": {
            "my_type": {...}
        }
    }
}</pre></div><p class="simpara">This is a breaking change for the <code class="literal">get_mapping</code> API.</p></li></ul></div><p>In the future we will also provide plural versions to allow putting multiple mappings etc in a single request.</p><p>See <a class="link" href="indices-put-mapping.html" title="Put Mapping"><code class="literal">put-mapping</code></a>, <a class="link" href="indices-get-mapping.html" title="Get Mapping"><code class="literal">get-mapping</code></a>, <a class="link" href="indices-get-field-mapping.html" title="Get Field Mapping"><code class="literal">get-field-mapping</code></a>,
<a class="link" href="indices-delete-mapping.html" title="Delete Mapping"><code class="literal">delete-mapping</code></a>,
<a class="link" href="indices-update-settings.html" title="Update Indices Settings"><code class="literal">update-settings</code></a>, <a class="link" href="indices-get-settings.html" title="Get Settings"><code class="literal">get-settings</code></a>,
<a class="link" href="indices-warmers.html" title="Warmers"><code class="literal">warmers</code></a>, and <a class="link" href="indices-aliases.html" title="Index Aliases"><code class="literal">aliases</code></a> for more details.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-link"><a href="breaking-changes-1.0.html">Breaking changes in 1.0</a></span>  <span class="breadcrumb-node">Index request</span></div><div class="navheader"><span class="prev"><a href="_indices_apis_2.html">
              &nbsp;
              Indices APIs</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_search_requests.html">Search requests
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_index_request"></a>Index request</h2></div></div></div><p>Previously a document could be indexed as itself, or wrapped in an outer
object which specified the <code class="literal">type</code> name:</p><div class="pre_wrapper"><pre class="programlisting">PUT /my_index/my_type/1
{
  "my_type": {
     ... doc fields ...
  }
}</pre></div><p>This led to some ambiguity when a document also included a field with the same
name as the <code class="literal">type</code>.  We no longer accept the outer <code class="literal">type</code> wrapper, but this
behaviour can be reenabled on an index-by-index basis with the setting:
<code class="literal">index.mapping.allow_type_wrapper</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-link"><a href="breaking-changes-1.0.html">Breaking changes in 1.0</a></span>  <span class="breadcrumb-node">Search requests</span></div><div class="navheader"><span class="prev"><a href="_index_request.html">
              &nbsp;
              Index request</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_multi_fields.html">Multi-fields
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_search_requests"></a>Search requests</h2></div></div></div><p>While the <code class="literal">search</code> API takes a top-level <code class="literal">query</code> parameter, the
<a class="link" href="search-count.html" title="Count API"><code class="literal">count</code></a>, <a class="link" href="docs-delete-by-query.html" title="Delete By Query API"><code class="literal">delete-by-query</code></a> and
<a class="link" href="search-validate.html" title="Validate API"><code class="literal">validate-query</code></a> requests expected the whole body to be a
query. These now <span class="emphasis"><em>require</em></span> a top-level <code class="literal">query</code> parameter:</p><div class="pre_wrapper"><pre class="programlisting">GET /_count
{
    "query": {
        "match": {
            "title": "Interesting stuff"
        }
    }
}</pre></div><p>Also, the top-level <code class="literal">filter</code> parameter in search has been renamed to
<a class="link" href="search-request-post-filter.html" title="Post filter"><code class="literal">post_filter</code></a>, to indicate that it should not
be used as the primary way to filter search results (use a
<a class="link" href="query-dsl-filtered-query.html" title="Filtered Query"><code class="literal">filtered</code> query</a> instead), but only to filter
results AFTER facets/aggregations have been calculated.</p><p>This example counts the top colors in all matching docs, but only returns docs
with color <code class="literal">red</code>:</p><div class="pre_wrapper"><pre class="programlisting">GET /_search
{
    "query": {
        "match_all": {}
    },
    "aggs": {
        "colors": {
            "terms": { "field": "color" }
        }
    },
    "post_filter": {
        "term": {
            "color": "red"
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-link"><a href="breaking-changes-1.0.html">Breaking changes in 1.0</a></span>  <span class="breadcrumb-node">Multi-fields</span></div><div class="navheader"><span class="prev"><a href="_search_requests.html">
              &nbsp;
              Search requests</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_stopwords.html">Stopwords
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_multi_fields"></a>Multi-fields</h2></div></div></div><p>Multi-fields are dead! Long live multi-fields!  Well, the field type
<code class="literal">multi_field</code> has been removed.  Instead, any of the core field types
(excluding <code class="literal">object</code> and <code class="literal">nested</code>) now accept a <code class="literal">fields</code> parameter.  Its the
same thing, but nicer. Instead of:</p><div class="pre_wrapper"><pre class="programlisting">"title": {
    "type": "multi_field",
    "fields": {
        "title": { "type": "string" },
        "raw":   { "type": "string", "index": "not_analyzed" }
    }
}</pre></div><p>you can now write:</p><div class="pre_wrapper"><pre class="programlisting">"title": {
    "type": "string",
    "fields": {
        "raw":   { "type": "string", "index": "not_analyzed" }
    }
}</pre></div><p>Existing multi-fields will be upgraded to the new format automatically.</p><p>Also, instead of having to use the arcane <code class="literal">path</code> and <code class="literal">index_name</code> parameters
in order to index multiple fields into a single custom <code class="literal">_all</code> field, you
can now use the <a class="link" href="mapping-core-types.html#copy-to" title="Copy to fieldedit"><code class="literal">copy_to</code> parameter</a>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-link"><a href="breaking-changes-1.0.html">Breaking changes in 1.0</a></span>  <span class="breadcrumb-node">Stopwords</span></div><div class="navheader"><span class="prev"><a href="_multi_fields.html">
              &nbsp;
              Multi-fields</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_dates_without_years.html">Dates without years
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_stopwords"></a>Stopwords</h2></div></div></div><p>Previously, the <a class="link" href="analysis-standard-analyzer.html" title="Standard Analyzer"><code class="literal">standard</code></a> and
<a class="link" href="analysis-pattern-analyzer.html" title="Pattern Analyzer"><code class="literal">pattern</code></a> analyzers used the list of English stopwords
by default, which caused some hard to debug indexing issues.  Now they are set to
use the empty stopwords list (ie <code class="literal">_none_</code>) instead.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-link"><a href="breaking-changes-1.0.html">Breaking changes in 1.0</a></span>  <span class="breadcrumb-node">Dates without years</span></div><div class="navheader"><span class="prev"><a href="_stopwords.html">
              &nbsp;
              Stopwords</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_parameters.html">Parameters
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_dates_without_years"></a>Dates without years</h2></div></div></div><p>When dates are specified without a year, for example: <code class="literal">Dec 15 10:00:00</code> they
are treated as dates in 2000 during indexing and range searches except for
the upper included bound <code class="literal">lte</code> where they were treated as dates in 1970!  Now,
all <a class="ulink" href="https://github.com/elasticsearch/elasticsearch/issues/4451" target="_top">dates without years</a>
use <code class="literal">1970</code> as the default.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-link"><a href="breaking-changes-1.0.html">Breaking changes in 1.0</a></span>  <span class="breadcrumb-node">Parameters</span></div><div class="navheader"><span class="prev"><a href="_dates_without_years.html">
              &nbsp;
              Dates without years</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_return_values.html">Return values
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_parameters"></a>Parameters</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Geo queries used to use <code class="literal">miles</code> as the default unit.  And we
  <a class="ulink" href="http://en.wikipedia.org/wiki/Mars_Climate_Orbiter" target="_top">all know what
  happened at NASA</a> because of that decision.  The new default unit is
  <a class="ulink" href="https://github.com/elasticsearch/elasticsearch/issues/4515" target="_top"><code class="literal">meters</code></a>.
</li><li class="listitem">
For all queries that support <span class="emphasis"><em>fuzziness</em></span>, the <code class="literal">min_similarity</code>, <code class="literal">fuzziness</code>
  and <code class="literal">edit_distance</code> parameters have been unified as the single parameter
  <code class="literal">fuzziness</code>.  See <a class="xref" href="common-options.html#fuzziness" title="Fuzzinessedit">the section called Fuzziness</a> for details of accepted values.
</li><li class="listitem">
The <code class="literal">ignore_missing</code> parameter has been replaced by the <code class="literal">expand_wildcards</code>,
  <code class="literal">ignore_unavailable</code> and <code class="literal">allow_no_indices</code> parameters, all of which have
  sensible defaults.  See <a class="link" href="multi-index.html" title="Multiple Indices">the multi-index docs</a> for more.
</li><li class="listitem"><p class="simpara">
An index name (or pattern) is now required for destructive operations like
  deleting indices:
</p><div class="pre_wrapper"><pre class="programlisting"># v0.90 - delete all indices:
DELETE /

# v1.0 - delete all indices:
DELETE /_all
DELETE /*</pre></div><p class="simpara">Setting <code class="literal">action.destructive_requires_name</code> to <code class="literal">true</code> provides further safety
by disabling wildcard expansion on destructive actions.</p></li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-link"><a href="breaking-changes-1.0.html">Breaking changes in 1.0</a></span>  <span class="breadcrumb-node">Return values</span></div><div class="navheader"><span class="prev"><a href="_parameters.html">
              &nbsp;
              Parameters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_deprecations.html">Deprecations
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_return_values"></a>Return values</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The <code class="literal">ok</code> return value has been removed from all response bodies as it added
  no useful information.
</li><li class="listitem">
The <code class="literal">found</code>, <code class="literal">not_found</code> and <code class="literal">exists</code> return values have been unified as
  <code class="literal">found</code> on all relevant APIs.
</li><li class="listitem"><p class="simpara">
Field values, in response to the <a class="link" href="search-request-fields.html" title="Fields"><code class="literal">fields</code></a>
  parameter, are now always returned as arrays.  A field could have single or
  multiple values, which meant that sometimes they were returned as scalars
  and sometimes as arrays.  By always returning arrays, this simplifies user
  code.  The only exception to this rule is when <code class="literal">fields</code> is used to retrieve
  metadata like the <code class="literal">routing</code> value, which are always singular.  Metadata
  fields are always returned as scalars.
</p><p class="simpara">The <code class="literal">fields</code> parameter is intended to be used for retrieving stored fields,
rather than for fields extracted from the <code class="literal">_source</code>. That means that it can no
longer be used to return whole objects and it no longer accepts the
<code class="literal">_source.fieldname</code> format. For these you should use the
<a class="link" href="search-request-source-filtering.html" title="Source filtering"><code class="literal">_source</code>  <code class="literal">_source_include</code> and <code class="literal">_source_exclude</code></a>
parameters instead.</p></li><li class="listitem"><p class="simpara">
Settings, like <code class="literal">index.analysis.analyzer.default</code> are now returned as proper
  nested JSON objects, which makes them easier to work with programatically:
</p><div class="pre_wrapper"><pre class="programlisting">{
    "index": {
        "analysis": {
            "analyzer": {
                "default": xxx
            }
        }
    }
}</pre></div><p class="simpara">You can choose to return them in flattened format by passing <code class="literal">?flat_settings</code>
in the query string.</p></li><li class="listitem">
The <a class="link" href="indices-analyze.html" title="Analyze"><code class="literal">analyze</code></a> API no longer supports the text response
  format, but does support JSON and YAML.
</li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-link"><a href="breaking-changes-1.0.html">Breaking changes in 1.0</a></span>  <span class="breadcrumb-node">Deprecations</span></div><div class="navheader"><span class="prev"><a href="_return_values.html">
              &nbsp;
              Return values</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_percolator_2.html">Percolator
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_deprecations"></a>Deprecations</h2></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The <code class="literal">text</code> query has been removed.  Use the
  <a class="link" href="query-dsl-match-query.html" title="Match Query"><code class="literal">match</code></a> query instead.
</li><li class="listitem">
The <code class="literal">field</code> query has been removed.  Use the
  <a class="link" href="query-dsl-query-string-query.html" title="Query String Query"><code class="literal">query_string</code></a> query instead.
</li><li class="listitem">
Per-document boosting with the <a class="link" href="mapping-boost-field.html" title="_boost"><code class="literal">_boost</code></a> field has
  been removed.  You can use the
  <a class="link" href="mapping-boost-field.html#function-score-instead-of-boost" title="Function score instead of boost"><code class="literal">function_score</code></a> instead.
</li><li class="listitem">
The <code class="literal">path</code> parameter in mappings has been deprecated. Use the
  <a class="link" href="mapping-core-types.html#copy-to" title="Copy to fieldedit"><code class="literal">copy_to</code></a> parameter instead.
</li><li class="listitem">
The <code class="literal">custom_score</code> and <code class="literal">custom_boost_score</code> is no longer supported. You can
  use <a class="link" href="query-dsl-function-score-query.html" title="Function Score Query"><code class="literal">function_score</code></a> instead.
</li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="breaking-changes.html">Breaking changes</a></span>  <span class="breadcrumb-link"><a href="breaking-changes-1.0.html">Breaking changes in 1.0</a></span>  <span class="breadcrumb-node">Percolator</span></div><div class="navheader"><span class="prev"><a href="_deprecations.html">
              &nbsp;
              Deprecations</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="api-conventions.html">API Conventions
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_percolator_2"></a>Percolator</h2></div></div></div><p>The percolator has been redesigned and because of this the dedicated <code class="literal">_percolator</code> index is no longer used by the percolator,
but instead the percolator works with a dedicated <code class="literal">.percolator</code> type. Read the <a class="ulink" href="http://www.elastic.co/blog/percolator-redesign-blog-post" target="_top">redesigned percolator</a>
blog post for the reasons why the percolator has been redesigned.</p><p>Elasticsearch will <span class="strong emphasis"><strong>not</strong></span> delete the <code class="literal">_percolator</code> index when upgrading, only the percolate api will not use the queries
stored in the <code class="literal">_percolator</code> index. In order to use the already stored queries, you can just re-index the queries from the
<code class="literal">_percolator</code> index into any index under the reserved <code class="literal">.percolator</code> type. The format in which the percolate queries
were stored has <span class="strong emphasis"><strong>not</strong></span> been changed. So a simple script that does a scan search to retrieve all the percolator queries
and then does a bulk request into another index should be sufficient.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">API Conventions</span></div><div class="navheader"><span class="prev"><a href="_percolator_2.html">
              &nbsp;
              Percolator</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="multi-index.html">Multiple Indices
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="api-conventions"></a>API Conventions</h1></div></div></div><div class="partintro"><div></div><p>The <span class="strong emphasis"><strong>elasticsearch</strong></span> REST APIs are exposed using <a class="link" href="modules-http.html" title="HTTP">JSON over HTTP</a>.</p><p>The conventions listed in this chapter can be applied throughout the REST
API, unless otherwise specified.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="xref" href="multi-index.html" title="Multiple Indices"><em>Multiple Indices</em></a>
</li><li class="listitem">
<a class="xref" href="common-options.html" title="Common options"><em>Common options</em></a>
</li></ul></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="api-conventions.html">API Conventions</a></span>  <span class="breadcrumb-node">Multiple Indices</span></div><div class="navheader"><span class="prev"><a href="api-conventions.html">
              &nbsp;
              API Conventions</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="common-options.html">Common options
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="multi-index"></a>Multiple Indices</h2></div></div></div><p>Most APIs that refer to an <code class="literal">index</code> parameter support execution across multiple indices,
using simple <code class="literal">test1,test2,test3</code> notation (or <code class="literal">_all</code> for all indices). It also
support wildcards, for example: <code class="literal">test*</code>, and the ability to "add" (<code class="literal">+</code>)
and "remove" (<code class="literal">-</code>), for example: <code class="literal">+test*,-test3</code>.</p><p>All multi indices API support the following url query string parameters:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">ignore_unavailable</code>
</span></dt><dd>
Controls whether to ignore if any specified indices are unavailable, this
includes indices that dont exist or closed indices. Either <code class="literal">true</code> or <code class="literal">false</code>
can be specified.
</dd><dt><span class="term">
<code class="literal">allow_no_indices</code>
</span></dt><dd>
Controls whether to fail if a wildcard indices expressions results into no
concrete indices. Either <code class="literal">true</code> or <code class="literal">false</code> can be specified. For example if
the wildcard expression <code class="literal">foo*</code> is specified and no indices are available that
start with <code class="literal">foo</code> then depending on this setting the request will fail. This
setting is also applicable when <code class="literal">_all</code>, <code class="literal">*</code> or no index has been specified. This
settings also applies for aliases, in case an alias points to a closed index.
</dd><dt><span class="term">
<code class="literal">expand_wildcards</code>
</span></dt><dd>
Controls to what kind of concrete indices wildcard indices expression expand
to. If <code class="literal">open</code> is specified then the wildcard expression is expanded to only
open indices and if <code class="literal">closed</code> is specified then the wildcard expression is
expanded only to closed indices. Also both values (<code class="literal">open,closed</code>) can be
specified to expand to all indices.
</dd></dl></div><p>If <code class="literal">none</code> is specified then wildcard expansion will be disabled and if <code class="literal">all</code>
is specified, wildcard expressions will expand to all indices (this is equivalent
to specifying <code class="literal">open,closed</code>).</p><p>The defaults settings for the above parameters depend on the api being used.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Single index APIs such as the <a class="xref" href="docs.html" title="Document APIs">Document APIs</a> and the
<a class="link" href="indices-aliases.html" title="Index Aliases">single-index <code class="literal">alias</code> APIs</a> do not support multiple indices.</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="api-conventions.html">API Conventions</a></span>  <span class="breadcrumb-node">Common options</span></div><div class="navheader"><span class="prev"><a href="multi-index.html">
              &nbsp;
              Multiple Indices</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="url-access-control.html">URL-based access control
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="common-options"></a>Common options</h2></div></div></div><p>The following options can be applied to all of the REST APIs.</p><h3><a id="_pretty_results"></a>Pretty Results</h3><p>When appending <code class="literal">?pretty=true</code> to any request made, the JSON returned
will be pretty formatted (use it for debugging only!). Another option is
to set <code class="literal">?format=yaml</code> which will cause the result to be returned in the
(sometimes) more readable yaml format.</p><h3><a id="_human_readable_output"></a>Human readable output</h3><p>Statistics are returned in a format suitable for humans
(eg <code class="literal">"exists_time": "1h"</code> or <code class="literal">"size": "1kb"</code>) and for computers
(eg <code class="literal">"exists_time_in_millis": 3600000</code> or <code class="literal">"size_in_bytes": 1024</code>).
The human readable values can be turned off by adding <code class="literal">?human=false</code>
to the query string. This makes sense when the stats results are
being consumed by a monitoring tool, rather than intended for human
consumption.  The default for the <code class="literal">human</code> flag is
<code class="literal">false</code>.</p><h3><a id="_response_filtering"></a>Response Filtering</h3><p>All REST APIs accept a <code class="literal">filter_path</code> parameter that can be used to reduce
the response returned by elasticsearch. This parameter takes a comma
separated list of filters expressed with the dot notation:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/_search?pretty&amp;filter_path=took,hits.hits._id,hits.hits._score'
{
  "took" : 3,
  "hits" : {
    "hits" : [
      {
        "_id" : "3640",
        "_score" : 1.0
      },
      {
        "_id" : "3642",
        "_score" : 1.0
      }
    ]
  }
}</pre></div><p>It also supports the <code class="literal">*</code> wildcard character to match any field or part
of a fields name:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/_nodes/stats?filter_path=nodes.*.ho*'
{
  "nodes" : {
    "lvJHed8uQQu4brS-SXKsNA" : {
      "host" : "portable"
    }
  }
}</pre></div><p>And the <code class="literal">**</code> wildcard can be used to include fields without knowing the
exact path of the field. For example, we can return the Lucene version
of every segment with this request:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_segments?pretty&amp;filter_path=indices.**.version'
{
  "indices" : {
    "movies" : {
      "shards" : {
        "0" : [ {
          "segments" : {
            "_0" : {
              "version" : "5.2.0"
            }
          }
        } ],
        "2" : [ {
          "segments" : {
            "_0" : {
              "version" : "5.2.0"
            }
          }
        } ]
      }
    },
    "books" : {
      "shards" : {
        "0" : [ {
          "segments" : {
            "_0" : {
              "version" : "5.2.0"
            }
          }
        } ]
      }
    }
  }
}</pre></div><p>Note that elasticsearch sometimes returns directly the raw value of a field,
like the <code class="literal">_source</code> field. If you want to filter _source fields, you should
consider combining the already existing <code class="literal">_source</code> parameter (see
<a class="link" href="docs-get.html#get-source-filtering" title="Source filteringedit">Get API</a> for more details) with the <code class="literal">filter_path</code>
 parameter like this:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/_search?pretty&amp;filter_path=hits.hits._source&amp;_source=title'
{
  "hits" : {
    "hits" : [ {
      "_source":{"title":"Book #2"}
    }, {
      "_source":{"title":"Book #1"}
    }, {
      "_source":{"title":"Book #3"}
    } ]
  }
}</pre></div><h3><a id="_flat_settings"></a>Flat Settings</h3><p>The <code class="literal">flat_settings</code> flag affects rendering of the lists of settings. When
<code class="literal">flat_settings</code> flag is <code class="literal">true</code> settings are returned in a flat format:</p><div class="pre_wrapper"><pre class="programlisting">{
  "persistent" : { },
  "transient" : {
    "discovery.zen.minimum_master_nodes" : "1"
  }
}</pre></div><p>When the <code class="literal">flat_settings</code> flag is <code class="literal">false</code> settings are returned in a more
human readable structured format:</p><div class="pre_wrapper"><pre class="programlisting">{
  "persistent" : { },
  "transient" : {
    "discovery" : {
      "zen" : {
        "minimum_master_nodes" : "1"
      }
    }
  }
}</pre></div><p>By default the <code class="literal">flat_settings</code> is set to <code class="literal">false</code>.</p><h3><a id="_parameters_2"></a>Parameters</h3><p>Rest parameters (when using HTTP, map to HTTP URL parameters) follow the
convention of using underscore casing.</p><h3><a id="_boolean_values"></a>Boolean Values</h3><p>All REST APIs parameters (both request parameters and JSON body) support
providing boolean "false" as the values: <code class="literal">false</code>, <code class="literal">0</code>, <code class="literal">no</code> and <code class="literal">off</code>.
All other values are considered "true". Note, this is not related to
fields within a document indexed treated as boolean fields.</p><h3><a id="_number_values"></a>Number Values</h3><p>All REST APIs support providing numbered parameters as <code class="literal">string</code> on top
of supporting the native JSON number types.</p><h3><a id="time-units"></a>Time units</h3><p>Whenever durations need to be specified, eg for a <code class="literal">timeout</code> parameter, the duration
can be specified as a whole number representing time in milliseconds, or as a time value like <code class="literal">2d</code> for 2 days.  The supported units are:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">y</code>
</p>
</td><td class="entry" valign="top">
<p>
Year
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">M</code>
</p>
</td><td class="entry" valign="top">
<p>
Month
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">w</code>
</p>
</td><td class="entry" valign="top">
<p>
Week
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">d</code>
</p>
</td><td class="entry" valign="top">
<p>
Day
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">h</code>
</p>
</td><td class="entry" valign="top">
<p>
Hour
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">m</code>
</p>
</td><td class="entry" valign="top">
<p>
Minute
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">s</code>
</p>
</td><td class="entry" valign="top">
<p>
Second
</p>
</td></tr></tbody></table></div><h3><a id="distance-units"></a>Distance Units</h3><p>Wherever distances need to be specified, such as the <code class="literal">distance</code> parameter in
the <a class="xref" href="query-dsl-geo-distance-filter.html" title="Geo Distance Filter">Geo Distance Filter</a>), the default unit if none is specified is
the meter. Distances can be specified in other units, such as <code class="literal">"1km"</code> or
<code class="literal">"2mi"</code> (2 miles).</p><p>The full list of units is listed below:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
Mile
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">mi</code> or <code class="literal">miles</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Yard
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">yd</code> or <code class="literal">yards</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Feet
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">ft</code> or <code class="literal">feet</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Inch
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">in</code> or <code class="literal">inch</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Kilometer
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">km</code> or <code class="literal">kilometers</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Meter
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">m</code> or <code class="literal">meters</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Centimeter
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">cm</code> or <code class="literal">centimeters</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Millimeter
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">mm</code> or <code class="literal">millimeters</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Nautical mile
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">NM</code>, <code class="literal">nmi</code> or <code class="literal">nauticalmiles</code>
</p>
</td></tr></tbody></table></div><p>The <code class="literal">precision</code> parameter in the <a class="xref" href="query-dsl-geohash-cell-filter.html" title="Geohash Cell Filter">Geohash Cell Filter</a> accepts
distances with the above units, but if no unit is specified, then the
precision is interpreted as the length of the geohash.</p><h3><a id="fuzziness"></a>Fuzziness</h3><p>Some queries and APIs support parameters to allow inexact <span class="emphasis"><em>fuzzy</em></span> matching,
using the <code class="literal">fuzziness</code> parameter. The <code class="literal">fuzziness</code> parameter is context
sensitive which means that it depends on the type of the field being queried:</p><h4><a id="_numeric_date_and_ipv4_fields"></a>Numeric, date and IPv4 fields</h4><p>When querying numeric, date and IPv4 fields, <code class="literal">fuzziness</code> is interpreted as a
<code class="literal">+/-</code> margin. It behaves like a <a class="xref" href="query-dsl-range-query.html" title="Range Query">Range Query</a> where:</p><pre class="literallayout">-fuzziness &lt;= field value &lt;= +fuzziness</pre><p>The <code class="literal">fuzziness</code> parameter should be set to a numeric value, eg <code class="literal">2</code> or <code class="literal">2.0</code>. A
<code class="literal">date</code> field interprets a long as milliseconds, but also accepts a string
containing a time value<code class="literal">"1h"</code>as explained in <a class="xref" href="common-options.html#time-units" title="Time unitsedit">the section called Time units</a>. An <code class="literal">ip</code>
field accepts a long or another IPv4 address (which will be converted into a
long).</p><h4><a id="_string_fields"></a>String fields</h4><p>When querying <code class="literal">string</code> fields, <code class="literal">fuzziness</code> is interpreted as a
<a class="ulink" href="http://en.wikipedia.org/wiki/Levenshtein_distance" target="_top">Levenshtein Edit Distance</a>the number of one character changes that need to be made to one string to
make it the same as another string.</p><p>The <code class="literal">fuzziness</code> parameter can be specified as:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">0</code>, <code class="literal">1</code>, <code class="literal">2</code>
</span></dt><dd>
the maximum allowed Levenshtein Edit Distance (or number of edits)
</dd><dt><span class="term">
<code class="literal">AUTO</code>
</span></dt><dd><p class="simpara">generates an edit distance based on the length of the term. For lengths:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">0..2</code>
</span></dt><dd>
must match exactly
</dd><dt><span class="term">
<code class="literal">3..5</code>
</span></dt><dd>
one edit allowed
</dd><dt><span class="term">
<code class="literal">&gt;5</code>
</span></dt><dd>
two edits allowed
</dd></dl></div><p class="simpara"><code class="literal">AUTO</code> should generally be the preferred value for <code class="literal">fuzziness</code>.</p></dd><dt><span class="term">
<code class="literal">0.0..1.0</code>
</span></dt><dd>
<span class="deprecated">
      [<span class="version">1.7.0</span>]
      <span class="detail">Deprecated in 1.7.0.
Support for similarity will be removed in Elasticsearch 2.0
</span></span>
converted into an edit distance using the formula: <code class="literal">length(term) * (1.0 -
fuzziness)</code>, eg a <code class="literal">fuzziness</code> of <code class="literal">0.6</code> with a term of length 10 would result
in an edit distance of <code class="literal">4</code>. Note: in all APIs except for the
<a class="xref" href="query-dsl-flt-query.html" title="Fuzzy Like This Query">Fuzzy Like This Query</a>, the maximum allowed edit distance is <code class="literal">2</code>.
</dd></dl></div><h3><a id="_result_casing"></a>Result Casing</h3><p>All REST APIs accept the <code class="literal">case</code> parameter. When set to <code class="literal">camelCase</code>, all
field names in the result will be returned in camel casing, otherwise,
underscore casing will be used. Note, this does not apply to the source
document indexed.</p><h3><a id="_jsonp"></a>JSONP</h3><p>When enabled, all REST APIs accept a <code class="literal">callback</code> parameter
resulting in a <a class="ulink" href="http://en.wikipedia.org/wiki/JSONP" target="_top">JSONP</a> result. You can enable
this behavior by adding the following to <code class="literal">config.yaml</code>:</p><pre class="literallayout">http.jsonp.enable: true</pre><p>Please note, when enabled, due to the architecture of Elasticsearch, this may pose
a security risk. Under some circumstances, an attacker may be able to exfiltrate
data in your Elasticsearch server if theyre able to force your browser to make a
JSONP request on your behalf (e.g. by including a &lt;script&gt; tag on an untrusted site
with a legitimate query against a local Elasticsearch server).</p><h3><a id="_request_body_in_query_string"></a>Request body in query string</h3><p>For libraries that dont accept a request body for non-POST requests,
you can pass the request body as the <code class="literal">source</code> query string parameter
instead.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="api-conventions.html">API Conventions</a></span>  <span class="breadcrumb-node">URL-based access control</span></div><div class="navheader"><span class="prev"><a href="common-options.html">
              &nbsp;
              Common options</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="docs.html">Document APIs
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="url-access-control"></a>URL-based access control</h2></div></div></div><p>Many users use a proxy with URL-based access control to secure access to
Elasticsearch indices. For <a class="link" href="search-multi-search.html" title="Multi Search API">multi-search</a>,
<a class="link" href="docs-multi-get.html" title="Multi Get API">multi-get</a> and <a class="link" href="docs-bulk.html" title="Bulk API">bulk</a> requests, the user has
the choice of specifying an index in the URL and on each individual request
within the request body. This can make URL-based access control challenging.</p><p>To prevent the user from overriding the index which has been specified in the
URL, add this setting to the <code class="literal">config.yml</code> file:</p><pre class="literallayout">rest.action.multi.allow_explicit_index: false</pre><p>The default value is <code class="literal">true</code>, but when set to <code class="literal">false</code>, Elasticsearch will
reject requests that have an explicit index specified in the request body.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">Document APIs</span></div><div class="navheader"><span class="prev"><a href="url-access-control.html">
              &nbsp;
              URL-based access control</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="docs-index_.html">Index API
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="docs"></a>Document APIs</h1></div></div></div><div class="partintro"><div></div><p>This section describes the following CRUD APIs:</p><div class="itemizedlist"><p class="title"><strong>Single document APIs</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="xref" href="docs-index_.html" title="Index API"><em>Index API</em></a>
</li><li class="listitem">
<a class="xref" href="docs-get.html" title="Get API"><em>Get API</em></a>
</li><li class="listitem">
<a class="xref" href="docs-delete.html" title="Delete API"><em>Delete API</em></a>
</li><li class="listitem">
<a class="xref" href="docs-update.html" title="Update API"><em>Update API</em></a>
</li></ul></div><div class="itemizedlist"><p class="title"><strong>Multi-document APIs</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="xref" href="docs-multi-get.html" title="Multi Get API"><em>Multi Get API</em></a>
</li><li class="listitem">
<a class="xref" href="docs-bulk.html" title="Bulk API"><em>Bulk API</em></a>
</li><li class="listitem">
<a class="xref" href="docs-bulk-udp.html" title="Bulk UDP API"><em>Bulk UDP API</em></a>
</li><li class="listitem">
<a class="xref" href="docs-delete-by-query.html" title="Delete By Query API"><em>Delete By Query API</em></a>
</li></ul></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>All CRUD APIs are single-index APIs. The <code class="literal">index</code> parameter accepts a single
index name, or an <code class="literal">alias</code> which points to a single index.</p></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="docs.html">Document APIs</a></span>  <span class="breadcrumb-node">Index API</span></div><div class="navheader"><span class="prev"><a href="docs.html">
              &nbsp;
              Document APIs</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="docs-get.html">Get API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="docs-index_"></a>Index API</h2></div></div></div><p>The index API adds or updates a typed JSON document in a specific index,
making it searchable. The following example inserts the JSON document
into the "twitter" index, under a type called "tweet" with an id of 1:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/twitter/tweet/1' -d '{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}'</pre></div><p>The result of the above index operation is:</p><div class="pre_wrapper"><pre class="programlisting">{
    "_index" : "twitter",
    "_type" : "tweet",
    "_id" : "1",
    "_version" : 1,
    "created" : true
}</pre></div><h3><a id="index-creation"></a>Automatic Index Creation</h3><p>The index operation automatically creates an index if it has not been
created before (check out the
<a class="link" href="indices-create-index.html" title="Create Index">create index API</a> for manually
creating an index), and also automatically creates a
dynamic type mapping for the specific type if one has not yet been
created (check out the <a class="link" href="indices-put-mapping.html" title="Put Mapping">put mapping</a>
API for manually creating a type mapping).</p><p>The mapping itself is very flexible and is schema-free. New fields and
objects will automatically be added to the mapping definition of the
type specified. Check out the <a class="link" href="mapping.html" title="Mapping">mapping</a>
section for more information on mapping definitions.</p><p>Note that the format of the JSON document can also include the type (very handy
when using JSON mappers) if the <code class="literal">index.mapping.allow_type_wrapper</code> setting is
set to true, for example:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/twitter' -d '{
  "settings": {
    "index": {
      "mapping.allow_type_wrapper": true
    }
  }
}'
{"acknowledged":true}

$ curl -XPUT 'http://localhost:9200/twitter/tweet/1' -d '{
    "tweet" : {
        "user" : "kimchy",
        "post_date" : "2009-11-15T14:12:12",
        "message" : "trying out Elasticsearch"
    }
}'</pre></div><p>Automatic index creation can be disabled by setting
<code class="literal">action.auto_create_index</code> to <code class="literal">false</code> in the config file of all nodes.
Automatic mapping creation can be disabled by setting
<code class="literal">index.mapper.dynamic</code> to <code class="literal">false</code> in the config files of all nodes (or
on the specific index settings).</p><p>Automatic index creation can include a pattern based white/black list,
for example, set <code class="literal">action.auto_create_index</code> to <code class="literal">+aaa*,-bbb*,+ccc*,-*</code> (+
meaning allowed, and - meaning disallowed).</p><h3><a id="index-versioning"></a>Versioning</h3><p>Each indexed document is given a version number. The associated
<code class="literal">version</code> number is returned as part of the response to the index API
request. The index API optionally allows for
<a class="ulink" href="http://en.wikipedia.org/wiki/Optimistic_concurrency_control" target="_top">optimistic
concurrency control</a> when the <code class="literal">version</code> parameter is specified. This
will control the version of the document the operation is intended to be
executed against. A good example of a use case for versioning is
performing a transactional read-then-update. Specifying a <code class="literal">version</code> from
the document initially read ensures no changes have happened in the
meantime (when reading in order to update, it is recommended to set
<code class="literal">preference</code> to <code class="literal">_primary</code>). For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/twitter/tweet/1?version=2' -d '{
    "message" : "elasticsearch now has versioning support, double cool!"
}'</pre></div><p><span class="strong emphasis"><strong>NOTE:</strong></span> versioning is completely real time, and is not affected by the
near real time aspects of search operations. If no version is provided,
then the operation is executed without any version checks.</p><p>By default, internal versioning is used that starts at 1 and increments
with each update, deletes included. Optionally, the version number can be
supplemented with an external value (for example, if maintained in a
database). To enable this functionality, <code class="literal">version_type</code> should be set to
<code class="literal">external</code>. The value provided must be a numeric, long value greater or equal to 0,
and less than around 9.2e+18. When using the external version type, instead
of checking for a matching version number, the system checks to see if
the version number passed to the index request is greater than the
version of the currently stored document. If true, the document will be
indexed and the new version number used. If the value provided is less
than or equal to the stored documents version number, a version
conflict will occur and the index operation will fail.</p><p>A nice side effect is that there is no need to maintain strict ordering
of async indexing operations executed as a result of changes to a source
database, as long as version numbers from the source database are used.
Even the simple case of updating the elasticsearch index using data from
a database is simplified if external versioning is used, as only the
latest version will be used if the index operations are out of order for
whatever reason.</p><h4><a id="_version_types"></a>Version types</h4><p>Next to the <code class="literal">internal</code> &amp; <code class="literal">external</code> version types explained above, Elasticsearch
also supports other types for specific use cases. Here is an overview of
the different version types and their semantics.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">internal</code>
</span></dt><dd>
only index the document if the given version is identical to the version
of the stored document.
</dd><dt><span class="term">
<code class="literal">external</code> or <code class="literal">external_gt</code>
</span></dt><dd>
only index the document if the given version is strictly higher
than the version of the stored document <span class="strong emphasis"><strong>or</strong></span> if there is no existing document. The given
version will be used as the new version and will be stored with the new document. The supplied
version must be a non-negative long number.
</dd><dt><span class="term">
<code class="literal">external_gte</code>
</span></dt><dd>
only index the document if the given version is <span class="strong emphasis"><strong>equal</strong></span> or higher
than the version of the stored document. If there is no existing document
the operation will succeed as well. The given version will be used as the new version
and will be stored with the new document. The supplied version must be a non-negative long number.
</dd><dt><span class="term">
<code class="literal">force</code>
</span></dt><dd>
the document will be indexed regardless of the version of the stored document or if there
is no existing document. The given version will be used as the new version and will be stored
with the new document. This version type is typically used for correcting errors.
</dd></dl></div><p><span class="strong emphasis"><strong>NOTE</strong></span>: The <code class="literal">external_gte</code> &amp; <code class="literal">force</code> version types are meant for special use cases and should be used
with care. If used incorrectly, they can result in loss of data.</p><h3><a id="operation-type"></a>Operation Type</h3><p>The index operation also accepts an <code class="literal">op_type</code> that can be used to force
a <code class="literal">create</code> operation, allowing for "put-if-absent" behavior. When
<code class="literal">create</code> is used, the index operation will fail if a document by that id
already exists in the index.</p><p>Here is an example of using the <code class="literal">op_type</code> parameter:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/twitter/tweet/1?op_type=create' -d '{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}'</pre></div><p>Another option to specify <code class="literal">create</code> is to use the following uri:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/twitter/tweet/1/_create' -d '{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}'</pre></div><h3><a id="_automatic_id_generation"></a>Automatic ID Generation</h3><p>The index operation can be executed without specifying the id. In such a
case, an id will be generated automatically. In addition, the <code class="literal">op_type</code>
will automatically be set to <code class="literal">create</code>. Here is an example (note the
<span class="strong emphasis"><strong>POST</strong></span> used instead of <span class="strong emphasis"><strong>PUT</strong></span>):</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/twitter/tweet/' -d '{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}'</pre></div><p>The result of the above index operation is:</p><div class="pre_wrapper"><pre class="programlisting">{
    "_index" : "twitter",
    "_type" : "tweet",
    "_id" : "6a8ca01c-7896-48e9-81cc-9f70661fcb32",
    "_version" : 1,
    "created" : true
}</pre></div><h3><a id="index-routing"></a>Routing</h3><p>By default, shard placement  or <code class="literal">routing</code>  is controlled by using a
hash of the documents id value. For more explicit control, the value
fed into the hash function used by the router can be directly specified
on a per-operation basis using the <code class="literal">routing</code> parameter. For example:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/twitter/tweet?routing=kimchy' -d '{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}'</pre></div><p>In the example above, the "tweet" document is routed to a shard based on
the <code class="literal">routing</code> parameter provided: "kimchy".</p><p>When setting up explicit mapping, the <code class="literal">_routing</code> field can be optionally
used to direct the index operation to extract the routing value from the
document itself. This does come at the (very minimal) cost of an
additional document parsing pass. If the <code class="literal">_routing</code> mapping is defined,
and set to be <code class="literal">required</code>, the index operation will fail if no routing
value is provided or extracted.</p><h3><a id="parent-children"></a>Parents &amp; Children</h3><p>A child document can be indexed by specifying its parent when indexing.
For example:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT localhost:9200/blogs/blog_tag/1122?parent=1111 -d '{
    "tag" : "something"
}'</pre></div><p>When indexing a child document, the routing value is automatically set
to be the same as its parent, unless the routing value is explicitly
specified using the <code class="literal">routing</code> parameter.</p><h3><a id="index-timestamp"></a>Timestamp</h3><p>A document can be indexed with a <code class="literal">timestamp</code> associated with it. The
<code class="literal">timestamp</code> value of a document can be set using the <code class="literal">timestamp</code>
parameter. For example:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT localhost:9200/twitter/tweet/1?timestamp=2009-11-15T14%3A12%3A12 -d '{
    "user" : "kimchy",
    "message" : "trying out Elasticsearch"
}'</pre></div><p>If the <code class="literal">timestamp</code> value is not provided externally or in the <code class="literal">_source</code>,
the <code class="literal">timestamp</code> will be automatically set to the date the document was
processed by the indexing chain. More information can be found on the
<a class="link" href="mapping-timestamp-field.html" title="_timestamp">_timestamp mapping page</a>.</p><h3><a id="index-ttl"></a>TTL</h3><p>A document can be indexed with a <code class="literal">ttl</code> (time to live) associated with
it. Expired documents will be expunged automatically. The expiration
date that will be set for a document with a provided <code class="literal">ttl</code> is relative
to the <code class="literal">timestamp</code> of the document, meaning it can be based on the time
of indexing or on any time provided. The provided <code class="literal">ttl</code> must be strictly
positive and can be a number (in milliseconds) or any valid time value
as shown in the following examples:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'http://localhost:9200/twitter/tweet/1?ttl=86400000' -d '{
    "user": "kimchy",
    "message": "Trying out elasticsearch, so far so good?"
}'</pre></div><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'http://localhost:9200/twitter/tweet/1?ttl=1d' -d '{
    "user": "kimchy",
    "message": "Trying out elasticsearch, so far so good?"
}'</pre></div><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'http://localhost:9200/twitter/tweet/1' -d '{
    "_ttl": "1d",
    "user": "kimchy",
    "message": "Trying out elasticsearch, so far so good?"
}'</pre></div><p>More information can be found on the
<a class="link" href="mapping-ttl-field.html" title="_ttl">_ttl mapping page</a>.</p><h3><a id="index-distributed"></a>Distributed</h3><p>The index operation is directed to the primary shard based on its route
(see the Routing section above) and performed on the actual node
containing this shard. After the primary shard completes the operation,
if needed, the update is distributed to applicable replicas. The index
operation only returns after all shards within the
replication group have indexed the document (sync replication).</p><h3><a id="index-consistency"></a>Write Consistency</h3><p>To prevent writes from taking place on the "wrong" side of a network
partition, by default, index operations only succeed if a quorum
(&gt;replicas/2+1) of active shards are available. This default can be
overridden on a node-by-node basis using the <code class="literal">action.write_consistency</code>
setting. To alter this behavior per-operation, the <code class="literal">consistency</code> request
parameter can be used.</p><p>Valid write consistency values are <code class="literal">one</code>, <code class="literal">quorum</code>, and <code class="literal">all</code>.</p><p>Note, for the case where the number of replicas is 1 (total of 2 copies
of the data), then the default behavior is to succeed if 1 copy (the primary)
can perform the write.</p><h3><a id="index-refresh"></a>Refresh</h3><p>To refresh the shard (not the whole index) immediately after the operation
occurs, so that the document appears in search results immediately, the
<code class="literal">refresh</code> parameter can be set to <code class="literal">true</code>. Setting this option to <code class="literal">true</code> should
<span class="strong emphasis"><strong>ONLY</strong></span> be done after careful thought and verification that it does not lead to
poor performance, both from an indexing and a search standpoint. Note, getting
a document using the get API is completely realtime.</p><h3><a id="timeout"></a>Timeout</h3><p>The primary shard assigned to perform the index operation might not be
available when the index operation is executed. Some reasons for this
might be that the primary shard is currently recovering from a gateway
or undergoing relocation. By default, the index operation will wait on
the primary shard to become available for up to 1 minute before failing
and responding with an error. The <code class="literal">timeout</code> parameter can be used to
explicitly specify how long it waits. Here is an example of setting it
to 5 minutes:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/twitter/tweet/1?timeout=5m' -d '{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="docs.html">Document APIs</a></span>  <span class="breadcrumb-node">Get API</span></div><div class="navheader"><span class="prev"><a href="docs-index_.html">
              &nbsp;
              Index API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="docs-delete.html">Delete API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="docs-get"></a>Get API</h2></div></div></div><p>The get API allows to get a typed JSON document from the index based on
its id. The following example gets a JSON document from an index called
twitter, under a type called tweet, with id valued 1:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/1'</pre></div><p>The result of the above get operation is:</p><div class="pre_wrapper"><pre class="programlisting">{
    "_index" : "twitter",
    "_type" : "tweet",
    "_id" : "1",
    "_version" : 1,
    "found": true,
    "_source" : {
        "user" : "kimchy",
        "postDate" : "2009-11-15T14:12:12",
        "message" : "trying out Elasticsearch"
    }
}</pre></div><p>The above result includes the <code class="literal">_index</code>, <code class="literal">_type</code>, <code class="literal">_id</code> and <code class="literal">_version</code>
of the document we wish to retrieve, including the actual <code class="literal">_source</code>
of the document if it could be found (as indicated by the <code class="literal">found</code>
field in the response).</p><p>The API also allows to check for the existence of a document using
<code class="literal">HEAD</code>, for example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XHEAD -i 'http://localhost:9200/twitter/tweet/1'</pre></div><h3><a id="realtime"></a>Realtime</h3><p>By default, the get API is realtime, and is not affected by the refresh
rate of the index (when data will become visible for search).</p><p>In order to disable realtime GET, one can either set <code class="literal">realtime</code>
parameter to <code class="literal">false</code>, or globally default it to by setting the
<code class="literal">action.get.realtime</code> to <code class="literal">false</code> in the node configuration.</p><p>When getting a document, one can specify <code class="literal">fields</code> to fetch from it. They
will, when possible, be fetched as stored fields (fields mapped as
stored in the mapping). When using realtime GET, there is no notion of
stored fields (at least for a period of time, basically, until the next
flush), so they will be extracted from the source itself (note, even if
source is not enabled). It is a good practice to assume that the fields
will be loaded from source when using realtime GET, even if the fields
are stored.</p><h3><a id="type"></a>Optional Type</h3><p>The get API allows for <code class="literal">_type</code> to be optional. Set it to <code class="literal">_all</code> in order
to fetch the first document matching the id across all types.</p><h3><a id="get-source-filtering"></a>Source filtering</h3><p>By default, the get operation returns the contents of the <code class="literal">_source</code> field unless
you have used the <code class="literal">fields</code> parameter or if the <code class="literal">_source</code> field is disabled.
You can turn off <code class="literal">_source</code> retrieval by using the <code class="literal">_source</code> parameter:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/1?_source=false'</pre></div><p>If you only need one or two fields from the complete <code class="literal">_source</code>, you can use the <code class="literal">_source_include</code>
&amp; <code class="literal">_source_exclude</code> parameters to include or filter out that parts you need. This can be especially helpful
with large documents where partial retrieval can save on network overhead. Both parameters take a comma separated list
of fields or wildcard expressions. Example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/1?_source_include=*.id&amp;_source_exclude=entities'</pre></div><p>If you only want to specify includes, you can use a shorter notation:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/1?_source=*.id,retweeted'</pre></div><h3><a id="get-fields"></a>Fields</h3><p>The get operation allows specifying a set of stored fields that will be
returned by passing the <code class="literal">fields</code> parameter. For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/1?fields=title,content'</pre></div><p>For backward compatibility, if the requested fields are not stored, they will be fetched
from the <code class="literal">_source</code> (parsed and extracted). This functionality has been replaced by the
<a class="link" href="docs-get.html#get-source-filtering" title="Source filteringedit">source filtering</a> parameter.</p><p>Field values fetched from the document it self are always returned as an array. Metadata fields like <code class="literal">_routing</code> and
<code class="literal">_parent</code> fields are never returned as an array.</p><p>Also only leaf fields can be returned via the <code class="literal">field</code> option. So object fields cant be returned and such requests
will fail.</p><h3><a id="generated-fields"></a>Generated fields</h3><p>If no refresh occurred between indexing and refresh, GET will access the transaction log to fetch the document. However, some fields are generated only when indexing.
If you try to access a field that is only generated when indexing, you will get an exception (default). You can choose to ignore field that are generated if the transaction log is accessed by setting <code class="literal">ignore_errors_on_generated_fields=true</code>.</p><h3><a id="_source"></a>Getting the _source directly</h3><p>Use the <code class="literal">/{index}/{type}/{id}/_source</code> endpoint to get
just the <code class="literal">_source</code> field of the document,
without any additional content around it. For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/1/_source'</pre></div><p>You can also use the same source filtering parameters to control which parts of the <code class="literal">_source</code> will be returned:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/1/_source?_source_include=*.id&amp;_source_exclude=entities'</pre></div><p>Note, there is also a HEAD variant for the _source endpoint to efficiently test for document existence.
Curl example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XHEAD -i 'http://localhost:9200/twitter/tweet/1/_source'</pre></div><h3><a id="get-routing"></a>Routing</h3><p>When indexing using the ability to control the routing, in order to get
a document, the routing value should also be provided. For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/1?routing=kimchy'</pre></div><p>The above will get a tweet with id 1, but will be routed based on the
user. Note, issuing a get without the correct routing, will cause the
document not to be fetched.</p><h3><a id="preference"></a>Preference</h3><p>Controls a <code class="literal">preference</code> of which shard replicas to execute the get
request on. By default, the operation is randomized between the shard
replicas.</p><p>The <code class="literal">preference</code> can be set to:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">_primary</code>
</span></dt><dd>
        The operation will go and be executed only on the primary
        shards.
</dd><dt><span class="term">
<code class="literal">_local</code>
</span></dt><dd>
        The operation will prefer to be executed on a local
        allocated shard if possible.
</dd><dt><span class="term">
Custom (string) value
</span></dt><dd>
        A custom value will be used to guarantee that
        the same shards will be used for the same custom value. This can help
        with "jumping values" when hitting different shards in different refresh
        states. A sample value can be something like the web session id, or the
        user name.
</dd></dl></div><h3><a id="get-refresh"></a>Refresh</h3><p>The <code class="literal">refresh</code> parameter can be set to <code class="literal">true</code> in order to refresh the
relevant shard before the get operation and make it searchable. Setting
it to <code class="literal">true</code> should be done after careful thought and verification that
this does not cause a heavy load on the system (and slows down
indexing).</p><h3><a id="get-distributed"></a>Distributed</h3><p>The get operation gets hashed into a specific shard id. It then gets
redirected to one of the replicas within that shard id and returns the
result. The replicas are the primary shard and its replicas within that
shard id group. This means that the more replicas we will have, the
better GET scaling we will have.</p><h3><a id="get-versioning"></a>Versioning support</h3><p>You can use the <code class="literal">version</code> parameter to retrieve the document only if
its current version is equal to the specified one. This behavior is the same
for all version types with the exception of version type <code class="literal">FORCE</code> which always
retrieves the document.</p><p>Internally, Elasticsearch has marked the old document as deleted and added an
entirely new document. The old version of the document doesnt disappear
immediately, although you wont be able to access it. Elasticsearch cleans up
deleted documents in the background as you continue to index more data.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="docs.html">Document APIs</a></span>  <span class="breadcrumb-node">Delete API</span></div><div class="navheader"><span class="prev"><a href="docs-get.html">
              &nbsp;
              Get API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="docs-update.html">Update API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="docs-delete"></a>Delete API</h2></div></div></div><p>The delete API allows to delete a typed JSON document from a specific
index based on its id. The following example deletes the JSON document
from an index called twitter, under a type called tweet, with id valued
1:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XDELETE 'http://localhost:9200/twitter/tweet/1'</pre></div><p>The result of the above delete operation is:</p><div class="pre_wrapper"><pre class="programlisting">{
    "found" : true,
    "_index" : "twitter",
    "_type" : "tweet",
    "_id" : "1",
    "_version" : 2
}</pre></div><h3><a id="delete-versioning"></a>Versioning</h3><p>Each document indexed is versioned. When deleting a document, the
<code class="literal">version</code> can be specified to make sure the relevant document we are
trying to delete is actually being deleted and it has not changed in the
meantime. Every write operation executed on a document, deletes included,
causes its version to be incremented.</p><h3><a id="delete-routing"></a>Routing</h3><p>When indexing using the ability to control the routing, in order to
delete a document, the routing value should also be provided. For
example:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XDELETE 'http://localhost:9200/twitter/tweet/1?routing=kimchy'</pre></div><p>The above will delete a tweet with id 1, but will be routed based on the
user. Note, issuing a delete without the correct routing, will cause the
document to not be deleted.</p><p>Many times, the routing value is not known when deleting a document. For
those cases, when specifying the <code class="literal">_routing</code> mapping as <code class="literal">required</code>, and
no routing value is specified, the delete will be broadcast
automatically to all shards.</p><h3><a id="delete-parent"></a>Parent</h3><p>The <code class="literal">parent</code> parameter can be set, which will basically be the same as
setting the routing parameter.</p><p>Note that deleting a parent document does not automatically delete its
children. One way of deleting all child documents given a parents id is
to perform a <a class="link" href="docs-delete-by-query.html" title="Delete By Query API">delete by query</a> on the child
index with the automatically generated (and indexed)
field _parent, which is in the format parent_type#parent_id.</p><h3><a id="delete-index-creation"></a>Automatic index creation</h3><p>The delete operation automatically creates an index if it has not been
created before (check out the <a class="link" href="indices-create-index.html" title="Create Index">create index API</a>
for manually creating an index), and also automatically creates a
dynamic type mapping for the specific type if it has not been created
before (check out the <a class="link" href="indices-put-mapping.html" title="Put Mapping">put mapping</a>
API for manually creating type mapping).</p><h3><a id="delete-distributed"></a>Distributed</h3><p>The delete operation gets hashed into a specific shard id. It then gets
redirected into the primary shard within that id group, and replicated
(if needed) to shard replicas within that id group.</p><h3><a id="delete-consistency"></a>Write Consistency</h3><p>Control if the operation will be allowed to execute based on the number
of active shards within that partition (replication group). The values
allowed are <code class="literal">one</code>, <code class="literal">quorum</code>, and <code class="literal">all</code>. The parameter to set it is
<code class="literal">consistency</code>, and it defaults to the node level setting of
<code class="literal">action.write_consistency</code> which in turn defaults to <code class="literal">quorum</code>.</p><p>For example, in a N shards with 2 replicas index, there will have to be
at least 2 active shards within the relevant partition (<code class="literal">quorum</code>) for
the operation to succeed. In a N shards with 1 replica scenario, there
will need to be a single shard active (in this case, <code class="literal">one</code> and <code class="literal">quorum</code>
is the same).</p><h3><a id="delete-refresh"></a>Refresh</h3><p>The <code class="literal">refresh</code> parameter can be set to <code class="literal">true</code> in order to refresh the relevant
primary and replica shards after the delete operation has occurred and make it
searchable. Setting it to <code class="literal">true</code> should be done after careful thought and
verification that this does not cause a heavy load on the system (and slows
down indexing).</p><h3><a id="delete-timeout"></a>Timeout</h3><p>The primary shard assigned to perform the delete operation might not be
available when the delete operation is executed. Some reasons for this
might be that the primary shard is currently recovering from a gateway
or undergoing relocation. By default, the delete operation will wait on
the primary shard to become available for up to 1 minute before failing
and responding with an error. The <code class="literal">timeout</code> parameter can be used to
explicitly specify how long it waits. Here is an example of setting it
to 5 minutes:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XDELETE 'http://localhost:9200/twitter/tweet/1?timeout=5m'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="docs.html">Document APIs</a></span>  <span class="breadcrumb-node">Update API</span></div><div class="navheader"><span class="prev"><a href="docs-delete.html">
              &nbsp;
              Delete API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="docs-multi-get.html">Multi Get API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="docs-update"></a>Update API</h2></div></div></div><p>The update API allows to update a document based on a script provided.
The operation gets the document (collocated with the shard) from the
index, runs the script (with optional script language and parameters),
and index back the result (also allows to delete, or ignore the
operation). It uses versioning to make sure no updates have happened
during the "get" and "reindex".</p><p>Note, this operation still means full reindex of the document, it just
removes some network roundtrips and reduces chances of version conflicts
between the get and the index. The <code class="literal">_source</code> field need to be enabled
for this feature to work.</p><p>For example, lets index a simple doc:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test/type1/1 -d '{
    "counter" : 1,
    "tags" : ["red"]
}'</pre></div><h3><a id="_scripted_updates"></a>Scripted updates</h3><p>Now, we can execute a script that would increment the counter:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/test/type1/1/_update' -d '{
    "script" : "ctx._source.counter += count",
    "params" : {
        "count" : 4
    }
}'</pre></div><p>We can add a tag to the list of tags (note, if the tag exists, it
will still add it, since its a list):</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/test/type1/1/_update' -d '{
    "script" : "ctx._source.tags += tag",
    "params" : {
        "tag" : "blue"
    }
}'</pre></div><p>In addition to <code class="literal">_source</code>, the following variables are available through
the <code class="literal">ctx</code> map: <code class="literal">_index</code>, <code class="literal">_type</code>, <code class="literal">_id</code>, <code class="literal">_version</code>, <code class="literal">_routing</code>,
<code class="literal">_parent</code>, <code class="literal">_timestamp</code>, <code class="literal">_ttl</code>.</p><p>We can also add a new field to the document:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/test/type1/1/_update' -d '{
    "script" : "ctx._source.name_of_new_field = \"value_of_new_field\""
}'</pre></div><p>Or remove a field from the document:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/test/type1/1/_update' -d '{
    "script" : "ctx._source.remove(\"name_of_field\")"
}'</pre></div><p>And, we can even change the operation that is executed.  This example deletes
the doc if the <code class="literal">tags</code> field contain <code class="literal">blue</code>, otherwise it does nothing
(<code class="literal">noop</code>):</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/test/type1/1/_update' -d '{
    "script" : "ctx._source.tags.contains(tag) ? ctx.op = \"delete\" : ctx.op = \"none\"",
    "params" : {
        "tag" : "blue"
    }
}'</pre></div><h3><a id="_updates_with_a_partial_document"></a>Updates with a partial document</h3><p>The update API also support passing a partial document,
which will be merged into the existing document (simple recursive merge,
inner merging of objects, replacing core "keys/values" and arrays). For
example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/test/type1/1/_update' -d '{
    "doc" : {
        "name" : "new_name"
    }
}'</pre></div><p>If both <code class="literal">doc</code> and <code class="literal">script</code> is specified, then <code class="literal">doc</code> is ignored. Best is
to put your field pairs of the partial document in the script itself.</p><h3><a id="_literal_detect_noop_literal"></a><code class="literal">detect_noop</code></h3><p>By default if <code class="literal">doc</code> is specified then the document is always updated even
if the merging process doesnt cause any changes.  Specifying <code class="literal">detect_noop</code>
as <code class="literal">true</code> will cause Elasticsearch to check if there are changes and, if
there arent, turn the update request into a noop. For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/test/type1/1/_update' -d '{
    "doc" : {
        "name" : "new_name"
    },
    "detect_noop": true
}'</pre></div><p>If <code class="literal">name</code> was <code class="literal">new_name</code> before the request was sent then the entire update
request is ignored.</p><h3><a id="upserts"></a>Upserts</h3><p>If the document does not already exist, the contents of the <code class="literal">upsert</code> element
will be inserted as a new document.  If the document does exist, then the
<code class="literal">script</code> will be executed instead:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/test/type1/1/_update' -d '{
    "script" : "ctx._source.counter += count",
    "params" : {
        "count" : 4
    },
    "upsert" : {
        "counter" : 1
    }
}'</pre></div><h4><a id="_literal_scripted_upsert_literal"></a><code class="literal">scripted_upsert</code></h4><p>If you would like your script to run regardless of whether the document exists
or noti.e. the script handles initializing the document instead of the
<code class="literal">upsert</code> elementthen set <code class="literal">scripted_upsert</code> to <code class="literal">true</code>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/sessions/session/dh3sgudg8gsrgl/_update' -d '{
    "script_id" : "my_web_session_summariser",
    "scripted_upsert":true,
    "params" : {
        "pageViewEvent" : {
                "url":"foo.com/bar",
                "response":404,
                "time":"2014-01-01 12:32"
        }
    },
    "upsert" : {}
}'</pre></div><h4><a id="_literal_doc_as_upsert_literal"></a><code class="literal">doc_as_upsert</code></h4><p>Instead of sending a partial <code class="literal">doc</code> plus an <code class="literal">upsert</code> doc, setting
<code class="literal">doc_as_upsert</code> to <code class="literal">true</code> will use the contents of <code class="literal">doc</code> as the <code class="literal">upsert</code>
value:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/test/type1/1/_update' -d '{
    "doc" : {
        "name" : "new_name"
    },
    "doc_as_upsert" : true
}'</pre></div><h3><a id="_parameters_3"></a>Parameters</h3><p>The update operation supports the following query-string parameters:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">retry_on_conflict</code>
</p>
</td><td class="entry" valign="top">
<p>
In between the get and indexing phases of the update, it is possible that
another process might have already updated the same document.  By default, the
update will fail with a version conflict exception.  The <code class="literal">retry_on_conflict</code>
parameter controls how many times to retry the update before finally throwing
an exception.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">routing</code>
</p>
</td><td class="entry" valign="top">
<p>
Routing is used to route the update request to the right shard and sets the
routing for the upsert request if the document being updated doesnt exist.
Cant be used to update the routing of an existing document.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">parent</code>
</p>
</td><td class="entry" valign="top">
<p>
Parent is used to route the update request to the right shard and sets the
parent for the upsert request if the document being updated doesnt exist.
Cant be used to update the <code class="literal">parent</code> of an existing document.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">timeout</code>
</p>
</td><td class="entry" valign="top">
<p>
Timeout waiting for a shard to become available.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">consistency</code>
</p>
</td><td class="entry" valign="top">
<p>
The write consistency of the index/delete operation.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">refresh</code>
</p>
</td><td class="entry" valign="top">
<p>
Refresh the relevant primary and replica shards (not the whole index)
immediately after the operation occurs, so that the updated document appears
in search results  immediately.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">fields</code>
</p>
</td><td class="entry" valign="top">
<p>
Return the relevant fields from the updated document. Specify <code class="literal">_source</code> to
return the full updated source.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">version</code> &amp; <code class="literal">version_type</code>
</p>
</td><td class="entry" valign="top">
<p>
The Update API uses the Elasticsearchs versioning support internally to make
sure the document doesnt change during the update. You can use the <code class="literal">version</code>
parameter to specify that the document should only be updated if its version
matches the one specified. By setting version type to <code class="literal">force</code> you can force
the new version of the document after update (use with care! with <code class="literal">force</code>
there is no guarantee the document didnt change).Version types <code class="literal">external</code> &amp;
<code class="literal">external_gte</code> are not supported.
</p>
</td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="docs.html">Document APIs</a></span>  <span class="breadcrumb-node">Multi Get API</span></div><div class="navheader"><span class="prev"><a href="docs-update.html">
              &nbsp;
              Update API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="docs-bulk.html">Bulk API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="docs-multi-get"></a>Multi Get API</h2></div></div></div><p>Multi GET API allows to get multiple documents based on an index, type
(optional) and id (and possibly routing). The response includes a <code class="literal">docs</code>
array with all the fetched documents, each element similar in structure
to a document provided by the <a class="link" href="docs-get.html" title="Get API">get</a>
API. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_mget' -d '{
    "docs" : [
        {
            "_index" : "test",
            "_type" : "type",
            "_id" : "1"
        },
        {
            "_index" : "test",
            "_type" : "type",
            "_id" : "2"
        }
    ]
}'</pre></div><p>The <code class="literal">mget</code> endpoint can also be used against an index (in which case it
is not required in the body):</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/test/_mget' -d '{
    "docs" : [
        {
            "_type" : "type",
            "_id" : "1"
        },
        {
            "_type" : "type",
            "_id" : "2"
        }
    ]
}'</pre></div><p>And type:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/test/type/_mget' -d '{
    "docs" : [
        {
            "_id" : "1"
        },
        {
            "_id" : "2"
        }
    ]
}'</pre></div><p>In which case, the <code class="literal">ids</code> element can directly be used to simplify the
request:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/test/type/_mget' -d '{
    "ids" : ["1", "2"]
}'</pre></div><h3><a id="mget-type"></a>Optional Type</h3><p>The mget API allows for <code class="literal">_type</code> to be optional. Set it to <code class="literal">_all</code> or leave it empty in order
to fetch the first document matching the id across all types.</p><p>If you dont set the type and have many documents sharing the same <code class="literal">_id</code>, you will end up
getting only the first matching document.</p><p>For example, if you have a document 1 within typeA and typeB then following request
will give you back only the same document twice:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/test/_mget' -d '{
    "ids" : ["1", "1"]
}'</pre></div><p>You need in that case to explicitly set the <code class="literal">_type</code>:</p><div class="pre_wrapper"><pre class="programlisting">GET /test/_mget/
{
  "docs" : [
        {
            "_type":"typeA",
            "_id" : "1"
        },
        {
            "_type":"typeB",
            "_id" : "1"
        }
    ]
}</pre></div><h3><a id="mget-source-filtering"></a>Source filtering</h3><p>By default, the <code class="literal">_source</code> field will be returned for every document (if stored).
Similar to the <a class="link" href="docs-get.html#get-source-filtering" title="Source filteringedit">get</a> API, you can retrieve only parts of
the <code class="literal">_source</code> (or not at all) by using the <code class="literal">_source</code> parameter. You can also use
the url parameters <code class="literal">_source</code>,<code class="literal">_source_include</code> &amp; <code class="literal">_source_exclude</code> to specify defaults,
which will be used when there are no per-document instructions.</p><p>For example:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_mget' -d '{
    "docs" : [
        {
            "_index" : "test",
            "_type" : "type",
            "_id" : "1",
            "_source" : false
        },
        {
            "_index" : "test",
            "_type" : "type",
            "_id" : "2",
            "_source" : ["field3", "field4"]
        },
        {
            "_index" : "test",
            "_type" : "type",
            "_id" : "3",
            "_source" : {
                "include": ["user"],
                "exclude": ["user.location"]
            }
        }
    ]
}'</pre></div><h3><a id="mget-fields"></a>Fields</h3><p>Specific stored fields can be specified to be retrieved per document to get, similar to the <a class="link" href="docs-get.html#get-fields" title="Fieldsedit">fields</a> parameter of the Get API.
For example:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_mget' -d '{
    "docs" : [
        {
            "_index" : "test",
            "_type" : "type",
            "_id" : "1",
            "fields" : ["field1", "field2"]
        },
        {
            "_index" : "test",
            "_type" : "type",
            "_id" : "2",
            "fields" : ["field3", "field4"]
        }
    ]
}'</pre></div><p>Alternatively, you can specify the <code class="literal">fields</code> parameter in the query string
as a default to be applied to all documents.</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/test/type/_mget?fields=field1,field2' -d '{
    "docs" : [
        {
            "_id" : "1" <a id="CO1-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        {
            "_id" : "2",
            "fields" : ["field3", "field4"] <a id="CO1-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        }
    ]
}'</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Returns <code class="literal">field1</code> and <code class="literal">field2</code>
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO1-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Returns <code class="literal">field3</code> and <code class="literal">field4</code>
</p></td></tr></tbody></table></div><h3><a id="_generated_fields"></a>Generated fields</h3><p>See <a class="xref" href="docs-get.html#generated-fields" title="Generated fieldsedit">the section called Generated fields</a> for fields are generated only when indexing.</p><h3><a id="mget-routing"></a>Routing</h3><p>You can also specify routing value as a parameter:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_mget?routing=key1' -d '{
    "docs" : [
        {
            "_index" : "test",
            "_type" : "type",
            "_id" : "1",
            "_routing" : "key2"
        },
        {
            "_index" : "test",
            "_type" : "type",
            "_id" : "2"
        }
    ]
}'</pre></div><p>In this example, document <code class="literal">test/type/2</code> will be fetch from shard corresponding to routing key <code class="literal">key1</code> but
document <code class="literal">test/type/1</code> will be fetch from shard corresponding to routing key <code class="literal">key2</code>.</p><h3><a id="mget-security"></a>Security</h3><p>See <a class="xref" href="url-access-control.html" title="URL-based access control"><em>URL-based access control</em></a></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="docs.html">Document APIs</a></span>  <span class="breadcrumb-node">Bulk API</span></div><div class="navheader"><span class="prev"><a href="docs-multi-get.html">
              &nbsp;
              Multi Get API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="docs-delete-by-query.html">Delete By Query API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="docs-bulk"></a>Bulk API</h2></div></div></div><p>The bulk API makes it possible to perform many index/delete operations
in a single API call. This can greatly increase the indexing speed.</p><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Client support for bulk requests</strong></p></div></div></div><p>Some of the officially supported clients provide helpers to assist with
bulk requests and reindexing of documents from one index to another:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Perl
</span></dt><dd>
    See <a class="ulink" href="https://metacpan.org/pod/Search::Elasticsearch::Bulk" target="_top">Search::Elasticsearch::Bulk</a>
    and <a class="ulink" href="https://metacpan.org/pod/Search::Elasticsearch::Scroll" target="_top">Search::Elasticsearch::Scroll</a>
</dd><dt><span class="term">
Python
</span></dt><dd>
    See <a class="ulink" href="http://elasticsearch-py.readthedocs.org/en/master/helpers.html" target="_top">elasticsearch.helpers.*</a>
</dd></dl></div></div><p>The REST API endpoint is <code class="literal">/_bulk</code>, and it expects the following JSON
structure:</p><div class="pre_wrapper"><pre class="programlisting">action_and_meta_data\n
optional_source\n
action_and_meta_data\n
optional_source\n
....
action_and_meta_data\n
optional_source\n</pre></div><p><span class="strong emphasis"><strong>NOTE</strong></span>: the final line of data must end with a newline character <code class="literal">\n</code>.</p><p>The possible actions are <code class="literal">index</code>, <code class="literal">create</code>, <code class="literal">delete</code> and <code class="literal">update</code>.
<code class="literal">index</code> and <code class="literal">create</code> expect a source on the next
line, and have the same semantics as the <code class="literal">op_type</code> parameter to the
standard index API (i.e. create will fail if a document with the same
index and type exists already, whereas index will add or replace a
document as necessary). <code class="literal">delete</code> does not expect a source on the
following line, and has the same semantics as the standard delete API.
<code class="literal">update</code> expects that the partial doc, upsert and script and its options
are specified on the next line.</p><p>If youre providing text file input to <code class="literal">curl</code>, you <span class="strong emphasis"><strong>must</strong></span> use the
<code class="literal">--data-binary</code> flag instead of plain <code class="literal">-d</code>. The latter doesnt preserve
newlines. Example:</p><div class="pre_wrapper"><pre class="programlisting">$ cat requests
{ "index" : { "_index" : "test", "_type" : "type1", "_id" : "1" } }
{ "field1" : "value1" }
$ curl -s -XPOST localhost:9200/_bulk --data-binary "@requests"; echo
{"took":7,"items":[{"create":{"_index":"test","_type":"type1","_id":"1","_version":1}}]}</pre></div><p>Because this format uses literal <code class="literal">\n</code>'s as delimiters, please be sure
that the JSON actions and sources are not pretty printed. Here is an
example of a correct sequence of bulk commands:</p><div class="pre_wrapper"><pre class="programlisting">{ "index" : { "_index" : "test", "_type" : "type1", "_id" : "1" } }
{ "field1" : "value1" }
{ "delete" : { "_index" : "test", "_type" : "type1", "_id" : "2" } }
{ "create" : { "_index" : "test", "_type" : "type1", "_id" : "3" } }
{ "field1" : "value3" }
{ "update" : {"_id" : "1", "_type" : "type1", "_index" : "index1"} }
{ "doc" : {"field2" : "value2"} }</pre></div><p>In the above example <code class="literal">doc</code> for the <code class="literal">update</code> action is a partial
document, that will be merged with the already stored document.</p><p>The endpoints are <code class="literal">/_bulk</code>, <code class="literal">/{index}/_bulk</code>, and <code class="literal">{index}/{type}/_bulk</code>.
When the index or the index/type are provided, they will be used by
default on bulk items that dont provide them explicitly.</p><p>A note on the format. The idea here is to make processing of this as
fast as possible. As some of the actions will be redirected to other
shards on other nodes, only <code class="literal">action_meta_data</code> is parsed on the
receiving node side.</p><p>Client libraries using this protocol should try and strive to do
something similar on the client side, and reduce buffering as much as
possible.</p><p>The response to a bulk action is a large JSON structure with the
individual results of each action that was performed. The failure of a
single action does not affect the remaining actions.</p><p>There is no "correct" number of actions to perform in a single bulk
call. You should experiment with different settings to find the optimum
size for your particular workload.</p><p>If using the HTTP API, make sure that the client does not send HTTP
chunks, as this will slow things down.</p><h3><a id="bulk-versioning"></a>Versioning</h3><p>Each bulk item can include the version value using the
<code class="literal">_version</code>/<code class="literal">version</code> field. It automatically follows the behavior of the
index / delete operation based on the <code class="literal">_version</code> mapping. It also
support the <code class="literal">version_type</code>/<code class="literal">_version_type</code> (see <a class="link" href="docs-index_.html#index-versioning" title="Versioningedit">versioning</a>)</p><h3><a id="bulk-routing"></a>Routing</h3><p>Each bulk item can include the routing value using the
<code class="literal">_routing</code>/<code class="literal">routing</code> field. It automatically follows the behavior of the
index / delete operation based on the <code class="literal">_routing</code> mapping.</p><h3><a id="bulk-parent"></a>Parent</h3><p>Each bulk item can include the parent value using the <code class="literal">_parent</code>/<code class="literal">parent</code>
field. It automatically follows the behavior of the index / delete
operation based on the <code class="literal">_parent</code> / <code class="literal">_routing</code> mapping.</p><h3><a id="bulk-timestamp"></a>Timestamp</h3><p>Each bulk item can include the timestamp value using the
<code class="literal">_timestamp</code>/<code class="literal">timestamp</code> field. It automatically follows the behavior of
the index operation based on the <code class="literal">_timestamp</code> mapping.</p><h3><a id="bulk-ttl"></a>TTL</h3><p>Each bulk item can include the ttl value using the <code class="literal">_ttl</code>/<code class="literal">ttl</code> field.
It automatically follows the behavior of the index operation based on
the <code class="literal">_ttl</code> mapping.</p><h3><a id="bulk-consistency"></a>Write Consistency</h3><p>When making bulk calls, you can require a minimum number of active
shards in the partition through the <code class="literal">consistency</code> parameter. The values
allowed are <code class="literal">one</code>, <code class="literal">quorum</code>, and <code class="literal">all</code>. It defaults to the node level
setting of <code class="literal">action.write_consistency</code>, which in turn defaults to
<code class="literal">quorum</code>.</p><p>For example, in a N shards with 2 replicas index, there will have to be
at least 2 active shards within the relevant partition (<code class="literal">quorum</code>) for
the operation to succeed. In a N shards with 1 replica scenario, there
will need to be a single shard active (in this case, <code class="literal">one</code> and <code class="literal">quorum</code>
is the same).</p><h3><a id="bulk-refresh"></a>Refresh</h3><p>The <code class="literal">refresh</code> parameter can be set to <code class="literal">true</code> in order to refresh the relevant
primary and replica shards immediately after the bulk operation has occurred
and make it searchable, instead of waiting for the normal refresh interval to
expire. Setting it to <code class="literal">true</code> can trigger additional load, and may slow down
indexing. Due to its costly nature, the <code class="literal">refresh</code> parameter is set on the bulk request level
and is not supported on each individual bulk item.</p><h3><a id="bulk-update"></a>Update</h3><p>When using <code class="literal">update</code> action <code class="literal">_retry_on_conflict</code> can be used as field in
the action itself (not in the extra payload line), to specify how many
times an update should be retried in the case of a version conflict.</p><p>The <code class="literal">update</code> action payload, supports the following options: <code class="literal">doc</code>
(partial document), <code class="literal">upsert</code>, <code class="literal">doc_as_upsert</code>, <code class="literal">script</code>, <code class="literal">params</code> (for
script), <code class="literal">lang</code> (for script). See update documentation for details on
the options. Curl example with update actions:</p><div class="pre_wrapper"><pre class="programlisting">{ "update" : {"_id" : "1", "_type" : "type1", "_index" : "index1", "_retry_on_conflict" : 3} }
{ "doc" : {"field" : "value"} }
{ "update" : { "_id" : "0", "_type" : "type1", "_index" : "index1", "_retry_on_conflict" : 3} }
{ "script" : "ctx._source.counter += param1", "lang" : "js", "params" : {"param1" : 1}, "upsert" : {"counter" : 1}}
{ "update" : {"_id" : "2", "_type" : "type1", "_index" : "index1", "_retry_on_conflict" : 3} }
{ "doc" : {"field" : "value"}, "doc_as_upsert" : true }</pre></div><h3><a id="bulk-security"></a>Security</h3><p>See <a class="xref" href="url-access-control.html" title="URL-based access control"><em>URL-based access control</em></a></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="docs.html">Document APIs</a></span>  <span class="breadcrumb-node">Delete By Query API</span></div><div class="navheader"><span class="prev"><a href="docs-bulk.html">
              &nbsp;
              Bulk API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="docs-bulk-udp.html">Bulk UDP API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="docs-delete-by-query"></a>Delete By Query API</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.5.3. </h3>
 "Delete by Query will be removed in 2.0: it is problematic since it silently forces a refresh which can quickly cause OutOfMemoryError during concurrent indexing, and can also cause primary and replica to become inconsistent.  Instead, use the scroll/scan API to find all matching ids and then issue a bulk request to delete them.
</div></div><p>The delete by query API allows to delete documents from one or more
indices and one or more types based on a query. The query can either be
provided using a simple query string as a parameter, or using the
<a class="link" href="query-dsl.html" title="Query DSL">Query DSL</a> defined within the request
body. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XDELETE 'http://localhost:9200/twitter/tweet/_query?q=user:kimchy'

$ curl -XDELETE 'http://localhost:9200/twitter/tweet/_query' -d '{
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
'</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The query being sent in the body must be nested in a <code class="literal">query</code> key, same as
the <a class="link" href="search-search.html" title="Search">search api</a> works</p></div></div><p>Both above examples end up doing the same thing, which is delete all
tweets from the twitter index for a certain user. The result of the
commands is:</p><div class="pre_wrapper"><pre class="programlisting">{
    "_indices" : {
        "twitter" : {
            "_shards" : {
                "total" : 5,
                "successful" : 5,
                "failed" : 0
            }
        }
    }
}</pre></div><p>Note, delete by query bypasses versioning support. Also, it is not
recommended to delete "large chunks of the data in an index", many
times, its better to simply reindex into a new index.</p><h3><a id="multiple-indices"></a>Multiple Indices and Types</h3><p>The delete by query API can be applied to multiple types within an
index, and across multiple indices. For example, we can delete all
documents across all types within the twitter index:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XDELETE 'http://localhost:9200/twitter/_query?q=user:kimchy'</pre></div><p>We can also delete within specific types:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XDELETE 'http://localhost:9200/twitter/tweet,user/_query?q=user:kimchy'</pre></div><p>We can also delete all tweets with a certain tag across several indices
(for example, when each user has his own index):</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XDELETE 'http://localhost:9200/kimchy,elasticsearch/_query?q=tag:wow'</pre></div><p>Or even delete across all indices:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XDELETE 'http://localhost:9200/_all/_query?q=tag:wow'</pre></div><h3><a id="delete-by-query-parameters"></a>Request Parameters</h3><p>When executing a delete by query using the query parameter <code class="literal">q</code>, the
query passed is a query string using Lucene query parser. There are
additional parameters that can be passed:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Name </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p>df</p></td><td class="entry" align="left" valign="top"><p>The default field to use when no field prefix is defined within the
query.</p></td></tr><tr><td class="entry" align="left" valign="top"><p>analyzer</p></td><td class="entry" align="left" valign="top"><p>The analyzer name to be used when analyzing the query string.</p></td></tr><tr><td class="entry" align="left" valign="top"><p>default_operator</p></td><td class="entry" align="left" valign="top"><p>The default operator to be used, can be <code class="literal">AND</code> or
<code class="literal">OR</code>. Defaults to <code class="literal">OR</code>.</p></td></tr></tbody></table></div><h3><a id="request-body"></a>Request Body</h3><p>The delete by query can use the <a class="link" href="query-dsl.html" title="Query DSL">Query DSL</a> within its body in order to express the query that should be
executed and delete all documents. The body content can also be passed
as a REST parameter named <code class="literal">source</code>.</p><h3><a id="delete-by-query-distributed"></a>Distributed</h3><p>The delete by query API is broadcast across all primary shards, and from
there, replicated across all shards replicas.</p><h3><a id="delete-by-query-routing"></a>Routing</h3><p>The routing value (a comma separated list of the routing values) can be
specified to control which shards the delete by query request will be
executed on.</p><h3><a id="delete-by-query-consistency"></a>Write Consistency</h3><p>Control if the operation will be allowed to execute based on the number
of active shards within that partition (replication group). The values
allowed are <code class="literal">one</code>, <code class="literal">quorum</code>, and <code class="literal">all</code>. The parameter to set it is
<code class="literal">consistency</code>, and it defaults to the node level setting of
<code class="literal">action.write_consistency</code> which in turn defaults to <code class="literal">quorum</code>.</p><p>For example, in a N shards with 2 replicas index, there will have to be
at least 2 active shards within the relevant partition (<code class="literal">quorum</code>) for
the operation to succeed. In a N shards with 1 replica scenario, there
will need to be a single shard active (in this case, <code class="literal">one</code> and <code class="literal">quorum</code>
is the same).</p><h3><a id="limitations"></a>Limitations</h3><p>The delete by query does not support the following queries and filters: <code class="literal">has_child</code>, <code class="literal">has_parent</code> and <code class="literal">top_children</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="docs.html">Document APIs</a></span>  <span class="breadcrumb-node">Bulk UDP API</span></div><div class="navheader"><span class="prev"><a href="docs-delete-by-query.html">
              &nbsp;
              Delete By Query API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="docs-termvectors.html">Term Vectors
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="docs-bulk-udp"></a>Bulk UDP API</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Bulk UDP has been deprecated and will be removed in Elasticsearch 2.0.
You should use <a class="link" href="docs-bulk.html" title="Bulk API">the standard bulk API</a> instead.</p></div></div><p>A Bulk UDP service is a service listening over UDP for bulk format
requests. The idea is to provide a low latency UDP service that allows
to easily index data that is not of critical nature.</p><p>The Bulk UDP service is disabled by default, but can be enabled by
setting <code class="literal">bulk.udp.enabled</code> to <code class="literal">true</code>.</p><p>The bulk UDP service performs internal bulk aggregation of the data and
then flushes it based on several parameters:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">bulk.udp.bulk_actions</code>
</span></dt><dd>
         The number of actions to flush a bulk after,
        defaults to <code class="literal">1000</code>.
</dd><dt><span class="term">
<code class="literal">bulk.udp.bulk_size</code>
</span></dt><dd>
         The size of the current bulk request to flush
        the request once exceeded, defaults to <code class="literal">5mb</code>.
</dd><dt><span class="term">
<code class="literal">bulk.udp.flush_interval</code>
</span></dt><dd>
         An interval after which the current
        request is flushed, regardless of the above limits. Defaults to <code class="literal">5s</code>.
</dd><dt><span class="term">
<code class="literal">bulk.udp.concurrent_requests</code>
</span></dt><dd>
         The number on max in flight bulk
        requests allowed. Defaults to <code class="literal">4</code>.
</dd></dl></div><p>The allowed network settings are:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">bulk.udp.host</code>
</span></dt><dd>
        The host to bind to, defaults to <code class="literal">network.host</code>
        which defaults to any.
</dd><dt><span class="term">
<code class="literal">bulk.udp.port</code>
</span></dt><dd>
        The port to use, defaults to <code class="literal">9700-9800</code>.
</dd><dt><span class="term">
<code class="literal">bulk.udp.receive_buffer_size</code>
</span></dt><dd>
        The receive buffer size, defaults to <code class="literal">10mb</code>.
</dd></dl></div><p>Here is an example of how it can be used:</p><div class="pre_wrapper"><pre class="programlisting">&gt; cat bulk.txt
{ "index" : { "_index" : "test", "_type" : "type1" } }
{ "field1" : "value1" }
{ "index" : { "_index" : "test", "_type" : "type1" } }
{ "field1" : "value1" }</pre></div><div class="pre_wrapper"><pre class="programlisting">&gt; cat bulk.txt | nc -w 0 -u localhost 9700</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="docs.html">Document APIs</a></span>  <span class="breadcrumb-node">Term Vectors</span></div><div class="navheader"><span class="prev"><a href="docs-bulk-udp.html">
              &nbsp;
              Bulk UDP API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="docs-multi-termvectors.html">Multi termvectors API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="docs-termvectors"></a>Term Vectors</h2></div></div></div><p>Returns information and statistics on terms in the fields of a particular
document. The document could be stored in the index or artificially provided
by the user. Term vectors are <a class="link" href="docs-get.html#realtime" title="Realtimeedit">realtime</a> by default, not near
realtime. This can be changed by setting <code class="literal">realtime</code> parameter to <code class="literal">false</code>.</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/1/_termvector?pretty=true'</pre></div><p>Optionally, you can specify the fields for which the information is
retrieved either with a parameter in the url</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/1/_termvector?fields=text,...'</pre></div><p>or by adding the requested fields in the request body (see
example below). Fields can also be specified with wildcards
in similar way to the <a class="link" href="query-dsl-multi-match-query.html" title="Multi Match Query">multi match query</a>.</p><h3><a id="_return_values_2"></a>Return values</h3><p>Three types of values can be requested: <span class="emphasis"><em>term information</em></span>, <span class="emphasis"><em>term statistics</em></span>
and <span class="emphasis"><em>field statistics</em></span>. By default, all term information and field
statistics are returned for all fields but no term statistics.</p><h4><a id="_term_information"></a>Term information</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
term frequency in the field (always returned)
</li><li class="listitem">
term positions (<code class="literal">positions</code> : true)
</li><li class="listitem">
start and end offsets (<code class="literal">offsets</code> : true)
</li><li class="listitem">
term payloads (<code class="literal">payloads</code> : true), as base64 encoded bytes
</li></ul></div><p>If the requested information wasnt stored in the index, it will be
computed on the fly if possible. Additionally, term vectors could be computed
for documents not even existing in the index, but instead provided by the user.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Start and end offsets assume UTF-16 encoding is being used. If you want to use
these offsets in order to get the original text that produced this token, you
should make sure that the string you are taking a sub-string of is also encoded
using UTF-16.</p></div></div><h4><a id="_term_statistics"></a>Term statistics</h4><p>Setting <code class="literal">term_statistics</code> to <code class="literal">true</code> (default is <code class="literal">false</code>) will
return</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
total term frequency (how often a term occurs in all documents)
</li><li class="listitem">
document frequency (the number of documents containing the current
   term)
</li></ul></div><p>By default these values are not returned since term statistics can
have a serious performance impact.</p><h4><a id="_field_statistics"></a>Field statistics</h4><p>Setting <code class="literal">field_statistics</code> to <code class="literal">false</code> (default is <code class="literal">true</code>) will
omit :</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
document count (how many documents contain this field)
</li><li class="listitem">
sum of document frequencies (the sum of document frequencies for all
   terms in this field)
</li><li class="listitem">
sum of total term frequencies (the sum of total term frequencies of
   each term in this field)
</li></ul></div><h3><a id="_behaviour"></a>Behaviour</h3><p>The term and field statistics are not accurate. Deleted documents
are not taken into account. The information is only retrieved for the
shard the requested document resides in. The term and field statistics
are therefore only useful as relative measures whereas the absolute
numbers have no meaning in this context. By default, when requesting
term vectors of artificial documents, a shard to get the statistics from
is randomly selected. Use <code class="literal">routing</code> only to hit a particular shard.</p><h3><a id="_example_1"></a>Example 1</h3><p>First, we create an index that stores term vectors, payloads etc. :</p><div class="pre_wrapper"><pre class="programlisting">curl -s -XPUT 'http://localhost:9200/twitter/' -d '{
  "mappings": {
    "tweet": {
      "properties": {
        "text": {
          "type": "string",
          "term_vector": "with_positions_offsets_payloads",
          "store" : true,
          "index_analyzer" : "fulltext_analyzer"
         },
         "fullname": {
          "type": "string",
          "term_vector": "with_positions_offsets_payloads",
          "index_analyzer" : "fulltext_analyzer"
        }
      }
    }
  },
  "settings" : {
    "index" : {
      "number_of_shards" : 1,
      "number_of_replicas" : 0
    },
    "analysis": {
      "analyzer": {
        "fulltext_analyzer": {
          "type": "custom",
          "tokenizer": "whitespace",
          "filter": [
            "lowercase",
            "type_as_payload"
          ]
        }
      }
    }
  }
}'</pre></div><p>Second, we add some documents:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'http://localhost:9200/twitter/tweet/1?pretty=true' -d '{
  "fullname" : "John Doe",
  "text" : "twitter test test test "
}'

curl -XPUT 'http://localhost:9200/twitter/tweet/2?pretty=true' -d '{
  "fullname" : "Jane Doe",
  "text" : "Another twitter test ..."
}'</pre></div><p>The following request returns all information and statistics for field
<code class="literal">text</code> in document <code class="literal">1</code> (John Doe):</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/1/_termvector?pretty=true' -d '{
  "fields" : ["text"],
  "offsets" : true,
  "payloads" : true,
  "positions" : true,
  "term_statistics" : true,
  "field_statistics" : true
}'</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    "_id": "1",
    "_index": "twitter",
    "_type": "tweet",
    "_version": 1,
    "found": true,
    "term_vectors": {
        "text": {
            "field_statistics": {
                "doc_count": 2,
                "sum_doc_freq": 6,
                "sum_ttf": 8
            },
            "terms": {
                "test": {
                    "doc_freq": 2,
                    "term_freq": 3,
                    "tokens": [
                        {
                            "end_offset": 12,
                            "payload": "d29yZA==",
                            "position": 1,
                            "start_offset": 8
                        },
                        {
                            "end_offset": 17,
                            "payload": "d29yZA==",
                            "position": 2,
                            "start_offset": 13
                        },
                        {
                            "end_offset": 22,
                            "payload": "d29yZA==",
                            "position": 3,
                            "start_offset": 18
                        }
                    ],
                    "ttf": 4
                },
                "twitter": {
                    "doc_freq": 2,
                    "term_freq": 1,
                    "tokens": [
                        {
                            "end_offset": 7,
                            "payload": "d29yZA==",
                            "position": 0,
                            "start_offset": 0
                        }
                    ],
                    "ttf": 2
                }
            }
        }
    }
}</pre></div><h3><a id="_example_2"></a>Example 2</h3><p>Term vectors which are not explicitly stored in the index are automatically
computed on the fly. The following request returns all information and statistics for the
fields in document <code class="literal">1</code>, even though the terms havent been explicitly stored in the index.
Note that for the field <code class="literal">text</code>, the terms are not re-generated.</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/1/_termvector?pretty=true' -d '{
  "fields" : ["text", "some_field_without_term_vectors"],
  "offsets" : true,
  "positions" : true,
  "term_statistics" : true,
  "field_statistics" : true
}'</pre></div><h3><a id="docs-termvectors-artificial-doc"></a>Example 3</h3><p>Term vectors can also be generated for artificial documents,
that is for documents not present in the index. The syntax is similar to the
<a class="link" href="search-percolate.html" title="Percolator">percolator</a> API. For example, the following request would
return the same results as in example 1. The mapping used is determined by the
<code class="literal">index</code> and <code class="literal">type</code>.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>If dynamic mapping is turned on (default), the document fields not in the original
mapping will be dynamically created.</p></div></div><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/_termvector' -d '{
  "doc" : {
    "fullname" : "John Doe",
    "text" : "twitter test test test"
  }
}'</pre></div><h3><a id="docs-termvectors-per-field-analyzer"></a>Example 4</h3><p>Additionally, a different analyzer than the one at the field may be provided
by using the <code class="literal">per_field_analyzer</code> parameter. This is useful in order to
generate term vectors in any fashion, especially when using artificial
documents. When providing an analyzer for a field that already stores term
vectors, the term vectors will be re-generated.</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/_termvector' -d '{
  "doc" : {
    "fullname" : "John Doe",
    "text" : "twitter test test test"
  },
  "fields": ["fullname"],
  "per_field_analyzer" : {
    "fullname": "keyword"
  }
}'</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
  "_index": "twitter",
  "_type": "tweet",
  "_version": 0,
  "found": true,
  "term_vectors": {
    "fullname": {
       "field_statistics": {
          "sum_doc_freq": 1,
          "doc_count": 1,
          "sum_ttf": 1
       },
       "terms": {
          "John Doe": {
             "term_freq": 1,
             "tokens": [
                {
                   "position": 0,
                   "start_offset": 0,
                   "end_offset": 8
                }
             ]
          }
       }
    }
  }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="docs.html">Document APIs</a></span>  <span class="breadcrumb-node">Multi termvectors API</span></div><div class="navheader"><span class="prev"><a href="docs-termvectors.html">
              &nbsp;
              Term Vectors</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search.html">Search APIs
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="docs-multi-termvectors"></a>Multi termvectors API</h2></div></div></div><p>Multi termvectors API allows to get multiple termvectors at once. The
documents from which to retrieve the term vectors are specified by an index,
type and id. But the documents could also be artificially provided.
The response includes a <code class="literal">docs</code>
array with all the fetched termvectors, each element having the structure
provided by the <a class="link" href="docs-termvectors.html" title="Term Vectors">termvectors</a>
API. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_mtermvectors' -d '{
   "docs": [
      {
         "_index": "testidx",
         "_type": "test",
         "_id": "2",
         "term_statistics": true
      },
      {
         "_index": "testidx",
         "_type": "test",
         "_id": "1",
         "fields": [
            "text"
         ]
      }
   ]
}'</pre></div><p>See the <a class="link" href="docs-termvectors.html" title="Term Vectors">termvectors</a> API for a description of possible parameters.</p><p>The <code class="literal">_mtermvectors</code> endpoint can also be used against an index (in which case it
is not required in the body):</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/testidx/_mtermvectors' -d '{
   "docs": [
      {
         "_type": "test",
         "_id": "2",
         "fields": [
            "text"
         ],
         "term_statistics": true
      },
      {
         "_type": "test",
         "_id": "1"
      }
   ]
}'</pre></div><p>And type:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/testidx/test/_mtermvectors' -d '{
   "docs": [
      {
         "_id": "2",
         "fields": [
            "text"
         ],
         "term_statistics": true
      },
      {
         "_id": "1"
      }
   ]
}'</pre></div><p>If all requested documents are on same index and have same type and also the parameters are the same, the request can be simplified:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/testidx/test/_mtermvectors' -d '{
    "ids" : ["1", "2"],
    "parameters": {
        "fields": [
                "text"
        ],
        "term_statistics": true,
        
    }
}'</pre></div><p>Additionally, just like for the <a class="link" href="docs-termvectors.html" title="Term Vectors">termvectors</a>
API, term vectors could be generated for user provided documents. The syntax
is similar to the <a class="link" href="search-percolate.html" title="Percolator">percolator</a> API. The mapping used is
determined by <code class="literal">_index</code> and <code class="literal">_type</code>.</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_mtermvectors' -d '{
   "docs": [
      {
         "_index": "testidx",
         "_type": "test",
         "doc" : {
            "fullname" : "John Doe",
            "text" : "twitter test test test"
         }
      },
      {
         "_index": "testidx",
         "_type": "test",
         "doc" : {
           "fullname" : "Jane Doe",
           "text" : "Another twitter test ..."
         }
      }
   ]
}'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">Search APIs</span></div><div class="navheader"><span class="prev"><a href="docs-multi-termvectors.html">
              &nbsp;
              Multi termvectors API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-search.html">Search
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="search"></a>Search APIs</h1></div></div></div><div class="partintro"><div></div><p>Most search APIs are <a class="link" href="search-search.html#search-multi-index-type" title="Multi-Index, Multi-Typeedit">multi-index, multi-type</a>, with the
exception of the <a class="xref" href="search-explain.html" title="Explain API"><em>Explain API</em></a> endpoints.</p><h2><a id="search-routing"></a>Routing</h2><p>When executing a search, it will be broadcast to all the index/indices
shards (round robin between replicas). Which shards will be searched on
can be controlled by providing the <code class="literal">routing</code> parameter. For example,
when indexing tweets, the routing value can be the user name:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/twitter/tweet?routing=kimchy' -d '{
    "user" : "kimchy",
    "postDate" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}
'</pre></div><p>In such a case, if we want to search only on the tweets for a specific
user, we can specify it as the routing, resulting in the search hitting
only the relevant shard:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/twitter/tweet/_search?routing=kimchy' -d '{
    "query": {
        "filtered" : {
            "query" : {
                "query_string" : {
                    "query" : "some query string here"
                }
            },
            "filter" : {
                "term" : { "user" : "kimchy" }
            }
        }
    }
}
'</pre></div><p>The routing parameter can be multi valued represented as a comma
separated string. This will result in hitting the relevant shards where
the routing values match to.</p><h2><a id="stats-groups"></a>Stats Groups</h2><p>A search can be associated with stats groups, which maintains a
statistics aggregation per group. It can later be retrieved using the
<a class="link" href="indices-stats.html" title="Indices Stats">indices stats</a> API
specifically. For example, here is a search body request that associate
the request with two different groups:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "stats" : ["group1", "group2"]
}</pre></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">Search</span></div><div class="navheader"><span class="prev"><a href="search.html">
              &nbsp;
              Search APIs</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-uri-request.html">URI Search
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-search"></a>Search</h2></div></div></div><p>The search API allows to execute a search query and get back search hits
that match the query. The query can either be provided using a simple
<a class="link" href="search-uri-request.html" title="URI Search">query string as a parameter</a>, or using a
<a class="link" href="search-request-body.html" title="Request Body Search">request body</a>.</p><h3><a id="search-multi-index-type"></a>Multi-Index, Multi-Type</h3><p>All search APIs can be applied across multiple types within an index, and
across multiple indices with support for the
<a class="link" href="multi-index.html" title="Multiple Indices">multi index syntax</a>. For
example, we can search on all documents across all types within the
twitter index:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/twitter/_search?q=user:kimchy'</pre></div><p>We can also search within specific types:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/twitter/tweet,user/_search?q=user:kimchy'</pre></div><p>We can also search all tweets with a certain tag across several indices
(for example, when each user has his own index):</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/kimchy,elasticsearch/tweet/_search?q=tag:wow'</pre></div><p>Or we can search all tweets across all available indices using <code class="literal">_all</code>
placeholder:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/_all/tweet/_search?q=tag:wow'</pre></div><p>Or even search across all indices and all types:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/_search?q=tag:wow'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">URI Search</span></div><div class="navheader"><span class="prev"><a href="search-search.html">
              &nbsp;
              Search</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-body.html">Request Body Search
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-uri-request"></a>URI Search</h2></div></div></div><p>A search request can be executed purely using a URI by providing request
parameters. Not all search options are exposed when executing a search
using this mode, but it can be handy for quick "curl tests". Here is an
example:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/twitter/tweet/_search?q=user:kimchy'</pre></div><p>And here is a sample response:</p><div class="pre_wrapper"><pre class="programlisting">{
    "_shards":{
        "total" : 5,
        "successful" : 5,
        "failed" : 0
    },
    "hits":{
        "total" : 1,
        "hits" : [
            {
                "_index" : "twitter",
                "_type" : "tweet",
                "_id" : "1",
                "_source" : {
                    "user" : "kimchy",
                    "postDate" : "2009-11-15T14:12:12",
                    "message" : "trying out Elasticsearch"
                }
            }
        ]
    }
}</pre></div><h3><a id="_parameters_4"></a>Parameters</h3><p>The parameters allowed in the URI are:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Name </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">q</code></p></td><td class="entry" align="left" valign="top"><p>The query string (maps to the <code class="literal">query_string</code> query, see
<a class="link" href="query-dsl-query-string-query.html" title="Query String Query"><span class="emphasis"><em>Query String Query</em></span></a> for more details).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">df</code></p></td><td class="entry" align="left" valign="top"><p>The default field to use when no field prefix is defined within the
query.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyzer</code></p></td><td class="entry" align="left" valign="top"><p>The analyzer name to be used when analyzing the query string.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">lowercase_expanded_terms</code></p></td><td class="entry" align="left" valign="top"><p>Should terms be automatically lowercased or
not. Defaults to <code class="literal">true</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyze_wildcard</code></p></td><td class="entry" align="left" valign="top"><p>Should wildcard and prefix queries be analyzed or
not. Defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">default_operator</code></p></td><td class="entry" align="left" valign="top"><p>The default operator to be used, can be <code class="literal">AND</code> or
<code class="literal">OR</code>. Defaults to <code class="literal">OR</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">lenient</code></p></td><td class="entry" align="left" valign="top"><p>If set to true will cause format based failures (like
providing text to a numeric field) to be ignored. Defaults to false.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">explain</code></p></td><td class="entry" align="left" valign="top"><p>For each hit, contain an explanation of how scoring of the
hits was computed.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">_source</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">false</code> to disable retrieval of the <code class="literal">_source</code> field. You can also retrieve
part of the document by using <code class="literal">_source_include</code> &amp; <code class="literal">_source_exclude</code> (see the <a class="link" href="search-request-source-filtering.html" title="Source filtering">request body</a>
documentation for more details)</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">fields</code></p></td><td class="entry" align="left" valign="top"><p>The selective stored fields of the document to return for each hit,
comma delimited. Not specifying any value will cause no fields to return.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">sort</code></p></td><td class="entry" align="left" valign="top"><p>Sorting to perform. Can either be in the form of <code class="literal">fieldName</code>, or
<code class="literal">fieldName:asc</code>/<code class="literal">fieldName:desc</code>. The fieldName can either be an actual
field within the document, or the special <code class="literal">_score</code> name to indicate
sorting based on scores. There can be several <code class="literal">sort</code> parameters (order
is important).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">track_scores</code></p></td><td class="entry" align="left" valign="top"><p>When sorting, set to <code class="literal">true</code> in order to still track
scores and return them as part of each hit.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">timeout</code></p></td><td class="entry" align="left" valign="top"><p>A search timeout, bounding the search request to be executed
within the specified time value and bail with the hits accumulated up to
that point when expired. Defaults to no timeout.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">terminate_after</code></p></td><td class="entry" align="left" valign="top"><p><span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span> The maximum number of documents to collect for
each shard, upon reaching which the query execution will terminate early.
If set, the response will have a boolean field <code class="literal">terminated_early</code> to
indicate whether the query execution has actually terminated_early.
Defaults to no terminate_after.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">from</code></p></td><td class="entry" align="left" valign="top"><p>The starting from index of the hits to return. Defaults to <code class="literal">0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">size</code></p></td><td class="entry" align="left" valign="top"><p>The number of hits to return. Defaults to <code class="literal">10</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">search_type</code></p></td><td class="entry" align="left" valign="top"><p>The type of the search operation to perform. Can be
<code class="literal">dfs_query_then_fetch</code>, <code class="literal">dfs_query_and_fetch</code>, <code class="literal">query_then_fetch</code>,
<code class="literal">query_and_fetch</code>, <code class="literal">count</code>, <code class="literal">scan</code>. Defaults to <code class="literal">query_then_fetch</code>. See
<a class="link" href="search-request-search-type.html" title="Search Type"><span class="emphasis"><em>Search Type</em></span></a> for
more details on the different types of search that can be performed.</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">Request Body Search</span></div><div class="navheader"><span class="prev"><a href="search-uri-request.html">
              &nbsp;
              URI Search</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-query.html">Query
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-body"></a>Request Body Search</h2></div></div></div><p>The search request can be executed with a search DSL, which includes the
<a class="link" href="query-dsl.html" title="Query DSL">Query DSL</a>, within its body. Here is an
example:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/twitter/tweet/_search' -d '{
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}
'</pre></div><p>And here is a sample response:</p><div class="pre_wrapper"><pre class="programlisting">{
    "_shards":{
        "total" : 5,
        "successful" : 5,
        "failed" : 0
    },
    "hits":{
        "total" : 1,
        "hits" : [
            {
                "_index" : "twitter",
                "_type" : "tweet",
                "_id" : "1",
                "_source" : {
                    "user" : "kimchy",
                    "postDate" : "2009-11-15T14:12:12",
                    "message" : "trying out Elasticsearch"
                }
            }
        ]
    }
}</pre></div><h3><a id="_parameters_5"></a>Parameters</h3><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">timeout</code>
</p>
</td><td class="entry" valign="top">
<p>
    A search timeout, bounding the search request to be executed within the
    specified time value and bail with the hits accumulated up to that point
    when expired. Defaults to no timeout. See <a class="xref" href="common-options.html#time-units" title="Time unitsedit">the section called Time units</a>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">from</code>
</p>
</td><td class="entry" valign="top">
<p>
    The starting from index of the hits to return. Defaults to <code class="literal">0</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">size</code>
</p>
</td><td class="entry" valign="top">
<p>
    The number of hits to return. Defaults to <code class="literal">10</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">search_type</code>
</p>
</td><td class="entry" valign="top">
<p>
    The type of the search operation to perform. Can be
    <code class="literal">dfs_query_then_fetch</code>, <code class="literal">dfs_query_and_fetch</code>, <code class="literal">query_then_fetch</code>,
    <code class="literal">query_and_fetch</code>. Defaults to <code class="literal">query_then_fetch</code>. See
    <a class="link" href="search-request-search-type.html" title="Search Type"><span class="emphasis"><em>Search Type</em></span></a> for more.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">query_cache</code>
</p>
</td><td class="entry" valign="top">
<p>
    Set to <code class="literal">true</code> or <code class="literal">false</code> to enable or disable the caching
    of search results for requests where <code class="literal">?search_type=count</code>, ie
    aggregations and suggestions.  See <a class="xref" href="index-modules-shard-query-cache.html" title="Shard query cache"><em>Shard query cache</em></a>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">terminate_after</code>
</p>
</td><td class="entry" valign="top">
<p>
    <span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span> The maximum number of documents to collect for each shard,
    upon reaching which the query execution will terminate early. If set, the
    response will have a boolean field <code class="literal">terminated_early</code> to indicate whether
    the query execution has actually terminated_early. Defaults to no
    terminate_after.
</p>
</td></tr></tbody></table></div><p>Out of the above, the <code class="literal">search_type</code> and the <code class="literal">query_cache</code> must be passed as
query-string parameters. The rest of the search request should be passed
within the body itself. The body content can also be passed as a REST
parameter named <code class="literal">source</code>.</p><p>Both HTTP GET and HTTP POST can be used to execute search with body. Since not
all clients support GET with body, POST is allowed as well.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Query</span></div><div class="navheader"><span class="prev"><a href="search-request-body.html">
              &nbsp;
              Request Body Search</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-from-size.html">From / Size
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-query"></a>Query</h2></div></div></div><p>The query element within the search request body allows to define a
query using the <a class="link" href="query-dsl.html" title="Query DSL">Query DSL</a>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">From / Size</span></div><div class="navheader"><span class="prev"><a href="search-request-query.html">
              &nbsp;
              Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-sort.html">Sort
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-from-size"></a>From / Size</h2></div></div></div><p>Pagination of results can be done by using the <code class="literal">from</code> and <code class="literal">size</code>
parameters. The <code class="literal">from</code> parameter defines the offset from the first
result you want to fetch. The <code class="literal">size</code> parameter allows you to configure
the maximum amount of hits to be returned.</p><p>Though <code class="literal">from</code> and <code class="literal">size</code> can be set as request parameters, they can also
be set within the search body. <code class="literal">from</code> defaults to <code class="literal">0</code>, and <code class="literal">size</code>
defaults to <code class="literal">10</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "from" : 0, "size" : 10,
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Sort</span></div><div class="navheader"><span class="prev"><a href="search-request-from-size.html">
              &nbsp;
              From / Size</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-source-filtering.html">Source filtering
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-sort"></a>Sort</h2></div></div></div><p>Allows to add one or more sort on specific fields. Each sort can be
reversed as well. The sort is defined on a per field level, with special
field name for <code class="literal">_score</code> to sort by score.</p><div class="pre_wrapper"><pre class="programlisting">{
    "sort" : [
        { "post_date" : {"order" : "asc"}},
        "user",
        { "name" : "desc" },
        { "age" : "desc" },
        "_score"
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_sort_values"></a>Sort Values</h3></div></div></div><p>The sort values for each document returned are also returned as part of
the response.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_sort_order"></a>Sort Order</h3></div></div></div><p>The <code class="literal">order</code> option can have the following values:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">asc</code>
</p>
</td><td class="entry" valign="top">
<p>
Sort in ascending order
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">desc</code>
</p>
</td><td class="entry" valign="top">
<p>
Sort in descending order
</p>
</td></tr></tbody></table></div><p>The order defaults to <code class="literal">desc</code> when sorting on the <code class="literal">_score</code>, and defaults
to <code class="literal">asc</code> when sorting on anything else.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_sort_mode_option"></a>Sort mode option</h3></div></div></div><p>Elasticsearch supports sorting by array or multi-valued fields. The <code class="literal">mode</code> option
controls what array value is picked for sorting the document it belongs
to. The <code class="literal">mode</code> option can have the following values:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">min</code>
</p>
</td><td class="entry" valign="top">
<p>
Pick the lowest value.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max</code>
</p>
</td><td class="entry" valign="top">
<p>
Pick the highest value.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">sum</code>
</p>
</td><td class="entry" valign="top">
<p>
Use the sum of all values as sort value. Only applicable for
        number based array fields.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">avg</code>
</p>
</td><td class="entry" valign="top">
<p>
Use the average of all values as sort value. Only applicable
        for number based array fields.
</p>
</td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_sort_mode_example_usage"></a>Sort mode example usage</h4></div></div></div><p>In the example below the field price has multiple prices per document.
In this case the result hits will be sort by price ascending based on
the average price per document.</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/_search' -d '{
   "query" : {
    ...
   },
   "sort" : [
      {"price" : {"order" : "asc", "mode" : "avg"}}
   ]
}'</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_sorting_within_nested_objects"></a>Sorting within nested objects.</h3></div></div></div><p>Elasticsearch also supports sorting by
fields that are inside one or more nested objects. The sorting by nested
field support has the following parameters on top of the already
existing sort options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">nested_path</code>
</span></dt><dd>
    Defines the on what nested object to sort. The actual
    sort field must be a direct field inside this nested object. The default
    is to use the most immediate inherited nested object from the sort
    field.
</dd><dt><span class="term">
<code class="literal">nested_filter</code>
</span></dt><dd>
    A filter the inner objects inside the nested path
    should match with in order for its field values to be taken into account
    by sorting. Common case is to repeat the query / filter inside the
    nested filter or query. By default no <code class="literal">nested_filter</code> is active.
</dd></dl></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_nested_sorting_example"></a>Nested sorting example</h4></div></div></div><p>In the below example <code class="literal">offer</code> is a field of type <code class="literal">nested</code>. Because
<code class="literal">offer</code> is the closest inherited nested field, it is picked as
<code class="literal">nested_path</code>. Only the inner objects that have color blue will
participate in sorting.</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/_search' -d '{
   "query" : {
    ...
   },
   "sort" : [
       {
          "offer.price" : {
             "mode" :  "avg",
             "order" : "asc",
             "nested_filter" : {
                "term" : { "offer.color" : "blue" }
             }
          }
       }
    ]
}'</pre></div><p>Nested sorting is also supported when sorting by
scripts and sorting by geo distance.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_missing_values"></a>Missing Values</h3></div></div></div><p>The <code class="literal">missing</code> parameter specifies how docs which are missing
the field should be treated: The <code class="literal">missing</code> value can be
set to <code class="literal">_last</code>, <code class="literal">_first</code>, or a custom value (that
will be used for missing docs as the sort value). For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "sort" : [
        { "price" : {"missing" : "_last"} },
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>If a nested inner object doesnt match with
the <code class="literal">nested_filter</code> then a missing value is used.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_ignoring_unmapped_fields"></a>Ignoring Unmapped Fields</h3></div></div></div><p>Before 1.4.0 there was the <code class="literal">ignore_unmapped</code> boolean
parameter, which was not enough information to decide on the sort
values to emit, and didnt work for cross-index search. It is still
supported but users are encouraged to migrate to the new
<code class="literal">unmapped_type</code> instead.</p><p>By default, the search request will fail if there is no mapping
associated with a field. The <code class="literal">unmapped_type</code> option allows to ignore
fields that have no mapping and not sort by them. The value of this
parameter is used to determine what sort values to emit. Here is an
example of how it can be used:</p><div class="pre_wrapper"><pre class="programlisting">{
    "sort" : [
        { "price" : {"unmapped_type" : "long"} },
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div><p>If any of the indices that are queried doesnt have a mapping for <code class="literal">price</code>
then Elasticsearch will handle it as if there was a mapping of type
<code class="literal">long</code>, with all documents in this index having no value for this field.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_geo_distance_sorting"></a>Geo Distance Sorting</h3></div></div></div><p>Allow to sort by <code class="literal">_geo_distance</code>. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "sort" : [
        {
            "_geo_distance" : {
                "pin.location" : [-70, 40],
                "order" : "asc",
                "unit" : "km",
                "mode" : "min",
                "distance_type" : "sloppy_arc"
            }
        }
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">distance_type</code>
</span></dt><dd>
    How to compute the distance. Can either be <code class="literal">sloppy_arc</code> (default), <code class="literal">arc</code> (slightly more precise but significantly slower) or <code class="literal">plane</code> (faster, but inaccurate on long distances and close to the poles).
</dd></dl></div><p>Note: the geo distance sorting supports <code class="literal">sort_mode</code> options: <code class="literal">min</code>,
<code class="literal">max</code> and <code class="literal">avg</code>.</p><p>The following formats are supported in providing the coordinates:</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_lat_lon_as_properties"></a>Lat Lon as Properties</h4></div></div></div><div class="pre_wrapper"><pre class="programlisting">{
    "sort" : [
        {
            "_geo_distance" : {
                "pin.location" : {
                    "lat" : 40,
                    "lon" : -70
                },
                "order" : "asc",
                "unit" : "km"
            }
        }
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_lat_lon_as_string"></a>Lat Lon as String</h4></div></div></div><p>Format in <code class="literal">lat,lon</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "sort" : [
        {
            "_geo_distance" : {
                "pin.location" : "-70,40",
                "order" : "asc",
                "unit" : "km"
            }
        }
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_geohash"></a>Geohash</h4></div></div></div><div class="pre_wrapper"><pre class="programlisting">{
    "sort" : [
        {
            "_geo_distance" : {
                "pin.location" : "drm3btev3e86",
                "order" : "asc",
                "unit" : "km"
            }
        }
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_lat_lon_as_array"></a>Lat Lon as Array</h4></div></div></div><p>Format in <code class="literal">[lon, lat]</code>, note, the order of lon/lat here in order to
conform with <a class="ulink" href="http://geojson.org/" target="_top">GeoJSON</a>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "sort" : [
        {
            "_geo_distance" : {
                "pin.location" : [-70, 40],
                "order" : "asc",
                "unit" : "km"
            }
        }
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_multiple_reference_points"></a>Multiple reference points</h3></div></div></div><p>Multiple geo points can be passed as an array containing any <code class="literal">geo_point</code> format, for example</p><div class="pre_wrapper"><pre class="programlisting">"pin.location" : [[-70, 40], [-71, 42]]
"pin.location" : [{"lat": -70, "lon": 40}, {"lat": -71, "lon": 42}]</pre></div><p>and so forth.</p><p>The final distance for a document will then be <code class="literal">min</code>/<code class="literal">max</code>/<code class="literal">avg</code> (defined via <code class="literal">mode</code>) distance of all points contained in the document to all points given in the sort request.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_based_sorting"></a>Script Based Sorting</h3></div></div></div><p>Allow to sort based on custom scripts, here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        ....
    },
    "sort" : {
        "_script" : {
            "script" : "doc['field_name'].value * factor",
            "type" : "number",
            "params" : {
                "factor" : 1.1
            },
            "order" : "asc"
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_track_scores"></a>Track Scores</h3></div></div></div><p>When sorting on a field, scores are not computed. By setting
<code class="literal">track_scores</code> to true, scores will still be computed and tracked.</p><div class="pre_wrapper"><pre class="programlisting">{
    "track_scores": true,
    "sort" : [
        { "post_date" : {"reverse" : true} },
        { "name" : "desc" },
        { "age" : "desc" }
    ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_memory_considerations"></a>Memory Considerations</h3></div></div></div><p>When sorting, the relevant sorted field values are loaded into memory.
This means that per shard, there should be enough memory to contain
them. For string based types, the field sorted on should not be analyzed
/ tokenized. For numeric types, if possible, it is recommended to
explicitly set the type to narrower types (like <code class="literal">short</code>, <code class="literal">integer</code> and
<code class="literal">float</code>).</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Source filtering</span></div><div class="navheader"><span class="prev"><a href="search-request-sort.html">
              &nbsp;
              Sort</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-fields.html">Fields
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-source-filtering"></a>Source filtering</h2></div></div></div><p>Allows to control how the <code class="literal">_source</code> field is returned with every hit.</p><p>By default operations return the contents of the <code class="literal">_source</code> field unless
you have used the <code class="literal">fields</code> parameter or if the <code class="literal">_source</code> field is disabled.</p><p>You can turn off <code class="literal">_source</code> retrieval by using the <code class="literal">_source</code> parameter:</p><p>To disable <code class="literal">_source</code> retrieval set to <code class="literal">false</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "_source": false,
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div><p>The <code class="literal">_source</code> also accepts one or more wildcard patterns to control what parts of the <code class="literal">_source</code> should be returned:</p><p>For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "_source": "obj.*",
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div><p>Or</p><div class="pre_wrapper"><pre class="programlisting">{
    "_source": [ "obj1.*", "obj2.*" ],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div><p>Finally, for complete control, you can specify both include and exclude patterns:</p><div class="pre_wrapper"><pre class="programlisting">{
    "_source": {
        "include": [ "obj1.*", "obj2.*" ],
        "exclude": [ "*.description" ]
    },
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Fields</span></div><div class="navheader"><span class="prev"><a href="search-request-source-filtering.html">
              &nbsp;
              Source filtering</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-script-fields.html">Script Fields
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-fields"></a>Fields</h2></div></div></div><p>Allows to selectively load specific stored fields for each document represented
by a search hit.</p><div class="pre_wrapper"><pre class="programlisting">{
    "fields" : ["user", "postDate"],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div><p><code class="literal">*</code> can be used to load all stored fields from the document.</p><p>An empty array will cause only the <code class="literal">_id</code> and <code class="literal">_type</code> for each hit to be
returned, for example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "fields" : [],
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div><p>For backwards compatibility, if the fields parameter specifies fields which are not stored (<code class="literal">store</code> mapping set to
<code class="literal">false</code>), it will load the <code class="literal">_source</code> and extract it from it. This functionality has been replaced by the
<a class="link" href="search-request-source-filtering.html" title="Source filtering">source filtering</a> parameter.</p><p>Field values fetched from the document it self are always returned as an array. Metadata fields like <code class="literal">_routing</code> and
<code class="literal">_parent</code> fields are never returned as an array.</p><p>Also only leaf fields can be returned via the <code class="literal">field</code> option. So object fields cant be returned and such requests
will fail.</p><p>Script fields can also be automatically detected and used as fields, so
things like <code class="literal">_source.obj1.field1</code> can be used, though not recommended, as
<code class="literal">obj1.field1</code> will work as well.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="partial"></a>Partial</h3></div></div></div><p>When loading data from <code class="literal">_source</code>, partial fields can be used to use
wildcards to control what part of the <code class="literal">_source</code> will be loaded based on
<code class="literal">include</code> and <code class="literal">exclude</code> patterns. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "partial_fields" : {
        "partial1" : {
            "include" : "obj1.obj2.*"
        }
    }
}</pre></div><p>And one that will also exclude <code class="literal">obj1.obj3</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "partial_fields" : {
        "partial1" : {
            "include" : "obj1.obj2.*",
            "exclude" : "obj1.obj3.*"
        }
    }
}</pre></div><p>Both <code class="literal">include</code> and <code class="literal">exclude</code> support multiple patterns:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "partial_fields" : {
        "partial1" : {
            "include" : ["obj1.obj2.*", "obj1.obj4.*"],
            "exclude" : "obj1.obj3.*"
        }
    }
}</pre></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Script Fields</span></div><div class="navheader"><span class="prev"><a href="search-request-fields.html">
              &nbsp;
              Fields</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-fielddata-fields.html">Field Data Fields
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-script-fields"></a>Script Fields</h2></div></div></div><p>Allows to return a <a class="link" href="modules-scripting.html" title="Scripting">script evaluation</a> (based on different fields) for each hit, for example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        ...
    },
    "script_fields" : {
        "test1" : {
            "script" : "doc['my_field_name'].value * 2"
        },
        "test2" : {
            "script" : "doc['my_field_name'].value * factor",
            "params" : {
                "factor"  : 2.0
            }
        }
    }
}</pre></div><p>Script fields can work on fields that are not stored (<code class="literal">my_field_name</code> in
the above case), and allow to return custom values to be returned (the
evaluated value of the script).</p><p>Script fields can also access the actual <code class="literal">_source</code> document indexed and
extract specific elements to be returned from it (can be an "object"
type). Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">    {
        "query" : {
            ...
        },
        "script_fields" : {
            "test1" : {
                "script" : "_source.obj1.obj2"
            }
        }
    }</pre></div><p>Note the <code class="literal">_source</code> keyword here to navigate the json-like model.</p><p>Its important to understand the difference between
<code class="literal">doc['my_field'].value</code> and <code class="literal">_source.my_field</code>. The first, using the doc
keyword, will cause the terms for that field to be loaded to memory
(cached), which will result in faster execution, but more memory
consumption. Also, the <code class="literal">doc[...]</code> notation only allows for simple valued
fields (cant return a json object from it) and make sense only on
non-analyzed or single term based fields.</p><p>The <code class="literal">_source</code> on the other hand causes the source to be loaded, parsed,
and then only the relevant part of the json is returned.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Field Data Fields</span></div><div class="navheader"><span class="prev"><a href="search-request-script-fields.html">
              &nbsp;
              Script Fields</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-post-filter.html">Post filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-fielddata-fields"></a>Field Data Fields</h2></div></div></div><p>Allows to return the field data representation of a field for each hit, for
example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        ...
    },
    "fielddata_fields" : ["test1", "test2"]
}</pre></div><p>Field data fields can work on fields that are not stored.</p><p>Its important to understand that using the <code class="literal">fielddata_fields</code> parameter will
cause the terms for that field to be loaded to memory (cached), which will
result in more memory consumption.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Post filter</span></div><div class="navheader"><span class="prev"><a href="search-request-fielddata-fields.html">
              &nbsp;
              Field Data Fields</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-highlighting.html">Highlighting
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-post-filter"></a>Post filter</h2></div></div></div><p>The <code class="literal">post_filter</code> is applied to the search <code class="literal">hits</code> at the very end of a search
request,  after aggregations have already been calculated. Its purpose is
best explained by example:</p><p>Imagine that you are selling shirts, and the user has specified two filters:
<code class="literal">color:red</code> and <code class="literal">brand:gucci</code>.  You only want to show them red shirts made by
Gucci in the search results.  Normally you would do this with a
<a class="link" href="query-dsl-filtered-query.html" title="Filtered Query"><code class="literal">filtered</code> query</a>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET localhost:9200/shirts/_search -d '
{
  "query": {
    "filtered": {
      "filter": {
        "bool": {
          "must": [
            { "term": { "color": "red"   }},
            { "term": { "brand": "gucci" }}
          ]
        }
      }
    }
  }
}
'</pre></div><p>However, you would also like to use <span class="emphasis"><em>faceted navigation</em></span> to display a list of
other options that the user could click on.  Perhaps you have a <code class="literal">model</code> field
that would allow the user to limit their search results to red Gucci
<code class="literal">t-shirts</code> or <code class="literal">dress-shirts</code>.</p><p>This can be done with a
<a class="link" href="search-aggregations-bucket-terms-aggregation.html" title="Terms Aggregation"><code class="literal">terms</code> aggregation</a>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET localhost:9200/shirts/_search -d '
{
  "query": {
    "filtered": {
      "filter": {
        "bool": {
          "must": [
            { "term": { "color": "red"   }},
            { "term": { "brand": "gucci" }}
          ]
        }
      }
    }
  },
  "aggs": {
    "models": {
      "terms": { "field": "model" } <a id="CO2-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
    }
  }
}
'</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO2-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Returns the most popular models of red shirts by Gucci.
</p></td></tr></tbody></table></div><p>But perhaps you would also like to tell the user how many Gucci shirts are
available in <span class="strong emphasis"><strong>other colors</strong></span>. If you just add a <code class="literal">terms</code> aggregation on the
<code class="literal">color</code> field, you will only get back the color <code class="literal">red</code>, because your query
returns only red shirts by Gucci.</p><p>Instead, you want to include shirts of all colors during aggregation, then
apply the <code class="literal">colors</code> filter only to the search results.  This is the purpose of
the <code class="literal">post_filter</code>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET localhost:9200/shirts/_search -d '
{
  "query": {
    "filtered": {
      "filter": {
        { "term": { "brand": "gucci" }} <a id="CO3-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
      }
    }
  },
  "aggs": {
    "colors": {
      "terms": { "field": "color" }, <a id="CO3-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
    },
    "color_red": {
      "filter": {
        "term": { "color": "red" } <a id="CO3-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span>
      },
      "aggs": {
        "models": {
          "terms": { "field": "model" } <a id="CO3-4"></a><span><img class="images-icons-callouts-4-png" alt=""></span>
        }
      }
    }
  },
  "post_filter": { <a id="CO3-5"></a><span><img class="images-icons-callouts-5-png" alt=""></span>
    "term": { "color": "red" }
  }
}
'</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO3-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The main query now finds all shirts by Gucci, regardless of color.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO3-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">colors</code> agg returns popular colors for shirts by Gucci.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO3-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> <a href="#CO3-4"><span><img class="images-icons-callouts-4-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">color_red</code> agg limits the <code class="literal">models</code> sub-aggregation
    to <span class="strong emphasis"><strong>red</strong></span> Gucci shirts.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO3-5"><span><img class="images-icons-callouts-5-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Finally, the <code class="literal">post_filter</code> removes colors other than red
    from the search <code class="literal">hits</code>.
</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Highlighting</span></div><div class="navheader"><span class="prev"><a href="search-request-post-filter.html">
              &nbsp;
              Post filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-rescore.html">Rescoring
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-highlighting"></a>Highlighting</h2></div></div></div><p>Allows to highlight search results on one or more fields. The
implementation uses either the lucene <code class="literal">highlighter</code>, <code class="literal">fast-vector-highlighter</code>
or <code class="literal">postings-highlighter</code>. The following is an example of the  search request
body:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {...},
    "highlight" : {
        "fields" : {
            "content" : {}
        }
    }
}</pre></div><p>In the above case, the <code class="literal">content</code> field will be highlighted for each
search hit (there will be another element in each search hit, called
<code class="literal">highlight</code>, which includes the highlighted fields and the highlighted
fragments).</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>In order to perform highlighting, the actual content of the field is
required. If the field in question is stored (has <code class="literal">store</code> set to <code class="literal">true</code>
in the mapping) it will be used, otherwise, the actual <code class="literal">_source</code> will
be loaded and the relevant field will be extracted from it.</p><p>The <code class="literal">_all</code> field cannot be extracted from <code class="literal">_source</code>, so it can only
be used for highlighting if it mapped to have <code class="literal">store</code> set to <code class="literal">true</code>.</p></div></div><p>The field name supports wildcard notation. For example, using <code class="literal">comment_*</code>
will cause all fields that match the expression to be highlighted.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="postings-highlighter"></a>Postings highlighter</h3></div></div></div><p>If <code class="literal">index_options</code> is set to <code class="literal">offsets</code> in the mapping the postings highlighter
will be used instead of the plain highlighter. The postings highlighter:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Is faster since it doesnt require to reanalyze the text to be highlighted:
the larger the documents the better the performance gain should be
</li><li class="listitem">
Requires less disk space than term_vectors, needed for the fast vector
highlighter
</li><li class="listitem">
Breaks the text into sentences and highlights them. Plays really well with
natural languages, not as well with fields containing for instance html markup
</li><li class="listitem">
Treats the document as the whole corpus, and scores individual sentences as
if they were documents in this corpus, using the  BM25 algorithm
</li></ul></div><p>Here is an example of setting the <code class="literal">content</code> field to allow for
highlighting using the postings highlighter on it:</p><div class="pre_wrapper"><pre class="programlisting">{
    "type_name" : {
        "content" : {"index_options" : "offsets"}
    }
}</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Note that the postings highlighter is meant to perform simple query terms
highlighting, regardless of their positions. That means that when used for
instance in combination with a phrase query, it will highlight all the terms
that the query is composed of, regardless of whether they are actually part of
a query match, effectively ignoring their positions.</p></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>The postings highlighter does support highlighting of multi term queries, like
prefix queries, wildcard queries and so on. On the other hand, this requires
the queries to be rewritten using a proper
<a class="link" href="query-dsl-multi-term-rewrite.html" title="Multi Term Query Rewrite">rewrite method</a> that supports multi term
extraction, which is a potentially expensive operation.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="fast-vector-highlighter"></a>Fast vector highlighter</h3></div></div></div><p>If <code class="literal">term_vector</code> information is provided by setting <code class="literal">term_vector</code> to
<code class="literal">with_positions_offsets</code> in the mapping then the fast vector highlighter
will be used instead of the plain highlighter.  The fast vector highlighter:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Is faster especially for large fields (&gt; <code class="literal">1MB</code>)
</li><li class="listitem">
Can be customized with <code class="literal">boundary_chars</code>, <code class="literal">boundary_max_scan</code>, and
 <code class="literal">fragment_offset</code> (see <a class="link" href="search-request-highlighting.html#boundary-characters" title="Boundary Characters">below</a>)
</li><li class="listitem">
Requires setting <code class="literal">term_vector</code> to <code class="literal">with_positions_offsets</code> which
  increases the size of the index
</li><li class="listitem">
Can combine matches from multiple fields into one result.  See
  <code class="literal">matched_fields</code>
</li><li class="listitem">
Can assign different weights to matches at different positions allowing
  for things like phrase matches being sorted above term matches when
  highlighting a Boosting Query that boosts phrase matches over term matches
</li></ul></div><p>Here is an example of setting the <code class="literal">content</code> field to allow for
highlighting using the fast vector highlighter on it (this will cause
the index to be bigger):</p><div class="pre_wrapper"><pre class="programlisting">{
    "type_name" : {
        "content" : {"term_vector" : "with_positions_offsets"}
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_force_highlighter_type"></a>Force highlighter type</h3></div></div></div><p>The <code class="literal">type</code> field allows to force a specific highlighter type. This is useful
for instance when needing to use the plain highlighter on a field that has
<code class="literal">term_vectors</code> enabled. The allowed values are: <code class="literal">plain</code>, <code class="literal">postings</code> and <code class="literal">fvh</code>.
The following is an example that forces the use of the plain highlighter:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {...},
    "highlight" : {
        "fields" : {
            "content" : {"type" : "plain"}
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_force_highlighting_on_source"></a>Force highlighting on source</h3></div></div></div><p>Forces the highlighting to highlight fields based on the source even if fields are
stored separately. Defaults to <code class="literal">false</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {...},
    "highlight" : {
        "fields" : {
            "content" : {"force_source" : true}
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="tags"></a>Highlighting Tags</h3></div></div></div><p>By default, the highlighting will wrap highlighted text in <code class="literal">&lt;em&gt;</code> and
<code class="literal">&lt;/em&gt;</code>. This can be controlled by setting <code class="literal">pre_tags</code> and <code class="literal">post_tags</code>,
for example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {...},
    "highlight" : {
        "pre_tags" : ["&lt;tag1&gt;"],
        "post_tags" : ["&lt;/tag1&gt;"],
        "fields" : {
            "_all" : {}
        }
    }
}</pre></div><p>Using the fast vector highlighter there can be more tags, and the "importance"
is ordered.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {...},
    "highlight" : {
        "pre_tags" : ["&lt;tag1&gt;", "&lt;tag2&gt;"],
        "post_tags" : ["&lt;/tag1&gt;", "&lt;/tag2&gt;"],
        "fields" : {
            "_all" : {}
        }
    }
}</pre></div><p>There are also built in "tag" schemas, with currently a single schema
called <code class="literal">styled</code> with the following <code class="literal">pre_tags</code>:</p><div class="pre_wrapper"><pre class="programlisting">&lt;em class="hlt1"&gt;, &lt;em class="hlt2"&gt;, &lt;em class="hlt3"&gt;,
&lt;em class="hlt4"&gt;, &lt;em class="hlt5"&gt;, &lt;em class="hlt6"&gt;,
&lt;em class="hlt7"&gt;, &lt;em class="hlt8"&gt;, &lt;em class="hlt9"&gt;,
&lt;em class="hlt10"&gt;</pre></div><p>and <code class="literal">&lt;/em&gt;</code> as <code class="literal">post_tags</code>. If you think of more nice to have built in tag
schemas, just send an email to the mailing list or open an issue. Here
is an example of switching tag schemas:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {...},
    "highlight" : {
        "tags_schema" : "styled",
        "fields" : {
            "content" : {}
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_encoder"></a>Encoder</h3></div></div></div><p>An <code class="literal">encoder</code> parameter can be used to define how highlighted text will
be encoded. It can be either <code class="literal">default</code> (no encoding) or <code class="literal">html</code> (will
escape html, if you use html highlighting tags).</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_highlighted_fragments"></a>Highlighted Fragments</h3></div></div></div><p>Each field highlighted can control the size of the highlighted fragment
in characters (defaults to <code class="literal">100</code>), and the maximum number of fragments
to return (defaults to <code class="literal">5</code>).
For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {...},
    "highlight" : {
        "fields" : {
            "content" : {"fragment_size" : 150, "number_of_fragments" : 3}
        }
    }
}</pre></div><p>The <code class="literal">fragment_size</code> is ignored when using the postings highlighter, as it
outputs sentences regardless of their length.</p><p>On top of this it is possible to specify that highlighted fragments need
to be sorted by score:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {...},
    "highlight" : {
        "order" : "score",
        "fields" : {
            "content" : {"fragment_size" : 150, "number_of_fragments" : 3}
        }
    }
}</pre></div><p>If the <code class="literal">number_of_fragments</code> value is set to <code class="literal">0</code> then no fragments are
produced, instead the whole content of the field is returned, and of
course it is highlighted. This can be very handy if short texts (like
document title or address) need to be highlighted but no fragmentation
is required. Note that <code class="literal">fragment_size</code> is ignored in this case.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {...},
    "highlight" : {
        "fields" : {
            "_all" : {},
            "bio.title" : {"number_of_fragments" : 0}
        }
    }
}</pre></div><p>When using <code class="literal">fast-vector-highlighter</code> one can use <code class="literal">fragment_offset</code>
parameter to control the margin to start highlighting from.</p><p>In the case where there is no matching fragment to highlight, the default is
to not return anything. Instead, we can return a snippet of text from the
beginning of the field by setting <code class="literal">no_match_size</code> (default <code class="literal">0</code>) to the length
of the text that you want returned. The actual length may be shorter than
specified as it tries to break on a word boundary. When using the postings
highlighter it is not possible to control the actual size of the snippet,
therefore the first sentence gets returned whenever <code class="literal">no_match_size</code> is
greater than <code class="literal">0</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {...},
    "highlight" : {
        "fields" : {
            "content" : {
                "fragment_size" : 150,
                "number_of_fragments" : 3,
                "no_match_size": 150
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_highlight_query"></a>Highlight query</h3></div></div></div><p>It is also possible to highlight against a query other than the search
query by setting <code class="literal">highlight_query</code>.  This is especially useful if you
use a rescore query because those are not taken into account by
highlighting by default.  Elasticsearch does not validate that
<code class="literal">highlight_query</code> contains the search query in any way so it is possible
to define it so legitimate query results arent highlighted at all.
Generally it is better to include the search query in the
<code class="literal">highlight_query</code>.  Here is an example of including both the search
query and the rescore query in <code class="literal">highlight_query</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "fields": [ "_id" ],
    "query" : {
        "match": {
            "content": {
                "query": "foo bar"
            }
        }
    },
    "rescore": {
        "window_size": 50,
        "query": {
            "rescore_query" : {
                "match_phrase": {
                    "content": {
                        "query": "foo bar",
                        "phrase_slop": 1
                    }
                }
            },
            "rescore_query_weight" : 10
        }
    },
    "highlight" : {
        "order" : "score",
        "fields" : {
            "content" : {
                "fragment_size" : 150,
                "number_of_fragments" : 3,
                "highlight_query": {
                    "bool": {
                        "must": {
                            "match": {
                                "content": {
                                    "query": "foo bar"
                                }
                            }
                        },
                        "should": {
                            "match_phrase": {
                                "content": {
                                    "query": "foo bar",
                                    "phrase_slop": 1,
                                    "boost": 10.0
                                }
                            }
                        },
                        "minimum_should_match": 0
                    }
                }
            }
        }
    }
}</pre></div><p>Note that the score of text fragment in this case is calculated by the Lucene
highlighting framework. For implementation details you can check the
<code class="literal">ScoreOrderFragmentsBuilder.java</code> class. On the other hand when using the
postings highlighter the fragments are scored using, as mentioned above,
the BM25 algorithm.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="highlighting-settings"></a>Global Settings</h3></div></div></div><p>Highlighting settings can be set on a global level and then overridden
at the field level.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {...},
    "highlight" : {
        "number_of_fragments" : 3,
        "fragment_size" : 150,
        "tag_schema" : "styled",
        "fields" : {
            "_all" : { "pre_tags" : ["&lt;em&gt;"], "post_tags" : ["&lt;/em&gt;"] },
            "bio.title" : { "number_of_fragments" : 0 },
            "bio.author" : { "number_of_fragments" : 0 },
            "bio.content" : { "number_of_fragments" : 5, "order" : "score" }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="field-match"></a>Require Field Match</h3></div></div></div><p><code class="literal">require_field_match</code> can be set to <code class="literal">true</code> which will cause a field to
be highlighted only if a query matched that field. <code class="literal">false</code> means that
terms are highlighted on all requested fields regardless if the query
matches specifically on them.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="boundary-characters"></a>Boundary Characters</h3></div></div></div><p>When highlighting a field using the fast vector highlighter,
<code class="literal">boundary_chars</code> can be configured to define what constitutes a boundary
for highlighting. Its a single string with each boundary character
defined in it. It defaults to <code class="literal">.,!? \t\n</code>.</p><p>The <code class="literal">boundary_max_scan</code> allows to control how far to look for boundary
characters, and defaults to <code class="literal">20</code>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="matched-fields"></a>Matched Fields</h3></div></div></div><p>The Fast Vector Highlighter can combine matches on multiple fields to
highlight a single field using <code class="literal">matched_fields</code>.  This is most
intuitive for multifields that analyze the same string in different
ways.  All <code class="literal">matched_fields</code> must have <code class="literal">term_vector</code> set to
<code class="literal">with_positions_offsets</code> but only the field to which the matches are
combined is loaded so only that field would benefit from having
<code class="literal">store</code> set to <code class="literal">yes</code>.</p><p>In the following examples <code class="literal">content</code> is analyzed by the <code class="literal">english</code>
analyzer and <code class="literal">content.plain</code> is analyzed by the <code class="literal">standard</code> analyzer.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query": {
        "query_string": {
            "query": "content.plain:running scissors",
            "fields": ["content"]
        }
    },
    "highlight": {
        "order": "score",
        "fields": {
            "content": {
                "matched_fields": ["content", "content.plain"],
                "type" : "fvh"
            }
        }
    }
}</pre></div><p>The above matches both "run with scissors" and "running with scissors"
and would highlight "running" and "scissors" but not "run". If both
phrases appear in a large document then "running with scissors" is
sorted above "run with scissors" in the fragments list because there
are more matches in that fragment.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query": {
        "query_string": {
            "query": "running scissors",
            "fields": ["content", "content.plain^10"]
        }
    },
    "highlight": {
        "order": "score",
        "fields": {
            "content": {
                "matched_fields": ["content", "content.plain"],
                "type" : "fvh"
            }
        }
    }
}</pre></div><p>The above highlights "run" as well as "running" and "scissors" but
still sorts "running with scissors" above "run with scissors" because
the plain match ("running") is boosted.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query": {
        "query_string": {
            "query": "running scissors",
            "fields": ["content", "content.plain^10"]
        }
    },
    "highlight": {
        "order": "score",
        "fields": {
            "content": {
                "matched_fields": ["content.plain"],
                "type" : "fvh"
            }
        }
    }
}</pre></div><p>The above query wouldnt highlight "run" or "scissor" but shows that
it is just fine not to list the field to which the matches are combined
(<code class="literal">content</code>) in the matched fields.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Technically it is also fine to add fields to <code class="literal">matched_fields</code> that
dont share the same underlying string as the field to which the matches
are combined.  The results might not make much sense and if one of the
matches is off the end of the text then the whole query will fail.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>There is a small amount of overhead involved with setting
<code class="literal">matched_fields</code> to a non-empty array so always prefer</p><div class="pre_wrapper"><pre class="programlisting">    "highlight": {
        "fields": {
            "content": {}
        }
    }</pre></div><p>to</p><div class="pre_wrapper"><pre class="programlisting">    "highlight": {
        "fields": {
            "content": {
                "matched_fields": ["content"],
                "type" : "fvh"
            }
        }
    }</pre></div></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="phrase-limit"></a>Phrase Limit</h3></div></div></div><p>The <code class="literal">fast-vector-highlighter</code> has a <code class="literal">phrase_limit</code> parameter that prevents
it from analyzing too many phrases and eating tons of memory.  It defaults
to 256 so only the first 256 matching phrases in the document scored
considered.  You can raise the limit with the <code class="literal">phrase_limit</code> parameter but
keep in mind that scoring more phrases consumes more time and memory.</p><p>If using <code class="literal">matched_fields</code> keep in mind that <code class="literal">phrase_limit</code> phrases per
matched field are considered.</p><h3><a id="explicit-field-order"></a>Field Highlight Order</h3><p>Elasticsearch highlights the fields in the order that they are sent.  Per the
json spec objects are unordered but if you need to be explicit about the order
that fields are highlighted then you can use an array for <code class="literal">fields</code> like this:</p><div class="pre_wrapper"><pre class="programlisting">    "highlight": {
        "fields": [
            {"title":{ /*params*/ }},
            {"text":{ /*params*/ }}
        ]
    }</pre></div><p>None of the highlighters built into Elasticsearch care about the order that the
fields are highlighted but a plugin may.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Rescoring</span></div><div class="navheader"><span class="prev"><a href="search-request-highlighting.html">
              &nbsp;
              Highlighting</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-search-type.html">Search Type
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-rescore"></a>Rescoring</h2></div></div></div><p>Rescoring can help to improve precision by reordering just the top (eg
100 - 500) documents returned by the
<a class="link" href="search-request-query.html" title="Query"><code class="literal">query</code></a> and
<a class="link" href="search-request-post-filter.html" title="Post filter"><code class="literal">post_filter</code></a> phases, using a
secondary (usually more costly) algorithm, instead of applying the
costly algorithm to all documents in the index.</p><p>A <code class="literal">rescore</code> request is executed on each shard before it returns its
results to be sorted by the node handling the overall search request.</p><p>Currently the rescore API has only one implementation: the query
rescorer, which uses a query to tweak the scoring. In the future,
alternative rescorers may be made available, for example, a pair-wise rescorer.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>the <code class="literal">rescore</code> phase is not executed when
<a class="link" href="search-request-search-type.html" title="Search Type"><code class="literal">search_type</code></a> is set
to <code class="literal">scan</code> or <code class="literal">count</code>.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>when exposing pagination to your users, you should not change
<code class="literal">window_size</code> as you step through each page (by passing different
<code class="literal">from</code> values) since that can alter the top hits causing results to
confusingly shift as the user steps through pages.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_query_rescorer"></a>Query rescorer</h3></div></div></div><p>The query rescorer executes a second query only on the Top-K results
returned by the <a class="link" href="search-request-query.html" title="Query"><code class="literal">query</code></a> and
<a class="link" href="search-request-post-filter.html" title="Post filter"><code class="literal">post_filter</code></a> phases. The
number of docs which will be examined on each shard can be controlled by
the <code class="literal">window_size</code> parameter, which defaults to
<a class="link" href="search-request-from-size.html" title="From / Size"><code class="literal">from</code> and <code class="literal">size</code></a>.</p><p>By default the scores from the original query and the rescore query are
combined linearly to produce the final <code class="literal">_score</code> for each document. The
relative importance of the original query and of the rescore query can
be controlled with the <code class="literal">query_weight</code> and <code class="literal">rescore_query_weight</code>
respectively. Both default to <code class="literal">1</code>.</p><p>For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -s -XPOST 'localhost:9200/_search' -d '{
   "query" : {
      "match" : {
         "field1" : {
            "operator" : "or",
            "query" : "the quick brown",
            "type" : "boolean"
         }
      }
   },
   "rescore" : {
      "window_size" : 50,
      "query" : {
         "rescore_query" : {
            "match" : {
               "field1" : {
                  "query" : "the quick brown",
                  "type" : "phrase",
                  "slop" : 2
               }
            }
         },
         "query_weight" : 0.7,
         "rescore_query_weight" : 1.2
      }
   }
}
'</pre></div><p>The way the scores are combined can be controlled with the <code class="literal">score_mode</code>:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Score Mode </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">total</code></p></td><td class="entry" align="left" valign="top"><p>Add the original score and the rescore query score.  The default.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">multiply</code></p></td><td class="entry" align="left" valign="top"><p>Multiply the original score by the rescore query score.  Useful
for <a class="link" href="query-dsl-function-score-query.html" title="Function Score Query"><code class="literal">function query</code></a> rescores.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">avg</code></p></td><td class="entry" align="left" valign="top"><p>Average the original score and the rescore query score.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">max</code></p></td><td class="entry" align="left" valign="top"><p>Take the max of original score and the rescore query score.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">min</code></p></td><td class="entry" align="left" valign="top"><p>Take the min of the original score and the rescore query score.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_multiple_rescores"></a>Multiple Rescores</h3></div></div></div><p>It is also possible to execute multiple rescores in sequence:</p><div class="pre_wrapper"><pre class="programlisting">curl -s -XPOST 'localhost:9200/_search' -d '{
   "query" : {
      "match" : {
         "field1" : {
            "operator" : "or",
            "query" : "the quick brown",
            "type" : "boolean"
         }
      }
   },
   "rescore" : [ {
      "window_size" : 100,
      "query" : {
         "rescore_query" : {
            "match" : {
               "field1" : {
                  "query" : "the quick brown",
                  "type" : "phrase",
                  "slop" : 2
               }
            }
         },
         "query_weight" : 0.7,
         "rescore_query_weight" : 1.2
      }
   }, {
      "window_size" : 10,
      "query" : {
         "score_mode": "multiply",
         "rescore_query" : {
            "function_score" : {
               "script_score": {
                  "script": "log10(doc['numeric'].value + 2)"
               }
            }
         }
      }
   } ]
}
'</pre></div><p>The first one gets the results of the query then the second one gets the
results of the first, etc.  The second rescore will "see" the sorting done
by the first rescore so it is possible to use a large window on the first
rescore to pull documents into a smaller window for the second rescore.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Search Type</span></div><div class="navheader"><span class="prev"><a href="search-request-rescore.html">
              &nbsp;
              Rescoring</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-scroll.html">Scroll
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-search-type"></a>Search Type</h2></div></div></div><p>There are different execution paths that can be done when executing a
distributed search. The distributed search operation needs to be
scattered to all the relevant shards and then all the results are
gathered back. When doing scatter/gather type execution, there are
several ways to do that, specifically with search engines.</p><p>One of the questions when executing a distributed search is how much
results to retrieve from each shard. For example, if we have 10 shards,
the 1st shard might hold the most relevant results from 0 till 10, with
other shards results ranking below it. For this reason, when executing a
request, we will need to get results from 0 till 10 from all shards,
sort them, and then return the results if we want to ensure correct
results.</p><p>Another question, which relates to the search engine, is the fact that each
shard stands on its own. When a query is executed on a specific shard,
it does not take into account term frequencies and other search engine
information from the other shards. If we want to support accurate
ranking, we would need to first gather the term frequencies from all
shards to calculate global term frequencies, then execute the query on
each shard using these global frequencies.</p><p>Also, because of the need to sort the results, getting back a large
document set, or even scrolling it, while maintaining the correct sorting
behavior can be a very expensive operation. For large result set
scrolling without sorting, the <code class="literal">scan</code> search type (explained below) is
also available.</p><p>Elasticsearch is very flexible and allows to control the type of search
to execute on a <span class="strong emphasis"><strong>per search request</strong></span> basis. The type can be configured
by setting the <span class="strong emphasis"><strong>search_type</strong></span> parameter in the query string. The types
are:</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="query-then-fetch"></a>Query Then Fetch</h3></div></div></div><p>Parameter value: <span class="strong emphasis"><strong>query_then_fetch</strong></span>.</p><p>The request is processed in two phases. In the first phase, the query
is forwarded to <span class="strong emphasis"><strong>all involved shards</strong></span>. Each shard executes the search
and generates a sorted list of results, local to that shard. Each
shard returns <span class="strong emphasis"><strong>just enough information</strong></span> to the coordinating node
to allow it merge and re-sort the shard level results into a globally
sorted set of results, of maximum length <code class="literal">size</code>.</p><p>During the second phase, the coordinating node requests the document
content (and highlighted snippets, if any) from <span class="strong emphasis"><strong>only the relevant
shards</strong></span>.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>This is the default setting, if you do not specify a <code class="literal">search_type</code>
      in your request.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="dfs-query-then-fetch"></a>Dfs, Query Then Fetch</h3></div></div></div><p>Parameter value: <span class="strong emphasis"><strong>dfs_query_then_fetch</strong></span>.</p><p>Same as "Query Then Fetch", except for an initial scatter phase which
goes and computes the distributed term frequencies for more accurate
scoring.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="count"></a>Count</h3></div></div></div><p>Parameter value: <span class="strong emphasis"><strong>count</strong></span>.</p><p>A special search type that returns the count that matched the search
request without any docs (represented in <code class="literal">total_hits</code>), and possibly,
including facets as well. In general, this is preferable to the <code class="literal">count</code>
API as it provides more options.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="scan"></a>Scan</h3></div></div></div><p>Parameter value: <span class="strong emphasis"><strong>scan</strong></span>.</p><p>The <code class="literal">scan</code> search type disables sorting in order to allow very efficient
scrolling through large result sets.  See <a class="xref" href="search-request-scroll.html#scroll-scan" title="Efficient scrolling with Scroll-Scan">Efficient scrolling with Scroll-Scan</a> for more.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="query-and-fetch"></a>Query And Fetch</h3></div></div></div><p>Parameter value: <span class="strong emphasis"><strong>query_and_fetch</strong></span>.</p><p>The <code class="literal">query_and_fetch</code> mode is an <span class="strong emphasis"><strong>internal</strong></span> optimization which
is chosen automatically when a <code class="literal">query_then_fetch</code> request
targets a single shard only.  Both phases of <code class="literal">query_then_fetch</code>
are executed in a single pass.  This mode should not be
explicitly specified by the user.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="dfs-query-and-fetch"></a>Dfs, Query And Fetch</h3></div></div></div><p>Parameter value: <span class="strong emphasis"><strong>dfs_query_and_fetch</strong></span>.</p><p>Same as <code class="literal">query_and_fetch</code>, except for an initial scatter phase which
goes and computes the distributed term frequencies for more accurate
scoring. This mode should not be explicitly specified by the user.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Scroll</span></div><div class="navheader"><span class="prev"><a href="search-request-search-type.html">
              &nbsp;
              Search Type</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-preference.html">Preference
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-scroll"></a>Scroll</h2></div></div></div><p>While a <code class="literal">search</code> request returns a single page of results, the <code class="literal">scroll</code>
API can be used to retrieve large numbers of results (or even all results)
from a single search request, in much the same way as you would use a cursor
on a traditional database.</p><p>Scrolling is not intended for real time user requests, but rather for
processing large amounts of data, e.g. in order to reindex the contents of one
index into a new index with a different configuration.</p><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Client support for scrolling and reindexing</strong></p></div></div></div><p>Some of the officially supported clients provide helpers to assist with
scrolled searches and reindexing of documents from one index to another:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Perl
</span></dt><dd>
    See <a class="ulink" href="https://metacpan.org/pod/Search::Elasticsearch::Bulk" target="_top">Search::Elasticsearch::Bulk</a>
    and <a class="ulink" href="https://metacpan.org/pod/Search::Elasticsearch::Scroll" target="_top">Search::Elasticsearch::Scroll</a>
</dd><dt><span class="term">
Python
</span></dt><dd>
    See <a class="ulink" href="http://elasticsearch-py.readthedocs.org/en/master/helpers.html" target="_top">elasticsearch.helpers.*</a>
</dd></dl></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The results that are returned from a scroll request reflect the state of
the index at the time that the initial <code class="literal">search</code> request was  made, like a
snapshot in time. Subsequent changes to documents (index, update or delete)
will only affect later search requests.</p></div></div><p>In order to use scrolling, the initial search request should specify the
<code class="literal">scroll</code> parameter in the query string, which tells Elasticsearch how long it
should keep the search context alive (see <a class="xref" href="search-request-scroll.html#scroll-search-context" title="Keeping the search context alive">Keeping the search context alive</a>), eg <code class="literal">?scroll=1m</code>.</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/twitter/tweet/_search?scroll=1m' -d '
{
    "query": {
        "match" : {
            "title" : "elasticsearch"
        }
    }
}
'</pre></div><p>The result from the above request includes a <code class="literal">_scroll_id</code>, which should
be passed to the <code class="literal">scroll</code> API in order to retrieve the next batch of
results.</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET <a id="CO4-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span> 'localhost:9200/_search/scroll?scroll=1m' <a id="CO4-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span> <a id="CO4-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span> \
     -d       'c2Nhbjs2OzM0NDg1ODpzRlBLc0FXNlNyNm5JWUc1' <a id="CO4-4"></a><span><img class="images-icons-callouts-4-png" alt=""></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO4-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
<code class="literal">GET</code> or <code class="literal">POST</code> can be used.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO4-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The URL should not include the <code class="literal">index</code> or <code class="literal">type</code> namethese
    are specified in the original <code class="literal">search</code> request instead.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO4-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">scroll</code> parameter tells Elasticsearch to keep the search context open
    for another <code class="literal">1m</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO4-4"><span><img class="images-icons-callouts-4-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The returned <code class="literal">_scroll_id</code> attribute can be passed in the request body or in the
    query string as <code class="literal">?scroll_id=....</code>
</p></td></tr></tbody></table></div><p>Each call to the <code class="literal">scroll</code> API returns the next batch of results until there
are no more results left to return, ie the <code class="literal">hits</code> array is empty.</p><div class="important admon"><div class="icon"><img alt="Important" class="images-icons-important-png"></div><div class="admon_content"><p>The initial search request and each subsequent scroll request
returns a new <code class="literal">_scroll_id</code>only the most recent <code class="literal">_scroll_id</code> should be
used.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>If the request specifies aggregations, only the initial search response
will contain the aggregations results.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="scroll-scan"></a>Efficient scrolling with Scroll-Scan</h3></div></div></div><p>Deep pagination with <a class="link" href="search-request-from-size.html" title="From / Size"><code class="literal">from</code> and <code class="literal">size</code></a>e.g.
<code class="literal">?size=10&amp;from=10000</code>is very inefficient as (in this example) 100,000
sorted results have to be retrieved from each shard and resorted in order to
return just 10 results.  This process has to be repeated for every page
requested.</p><p>The <code class="literal">scroll</code> API keeps track of which results have already been returned and
so is able to return sorted results more efficiently than with deep
pagination.  However, sorting results (which happens by default) still has a
cost.</p><p>Normally, you just want to retrieve all results and the order doesnt matter.
Scrolling can be combined with the <a class="link" href="search-request-search-type.html#scan" title="Scan"><code class="literal">scan</code></a> search type to disable
any scoring or sorting and to return results in the most efficient way
possible.  All that is needed is to add <code class="literal">search_type=scan</code> to the query string
of the initial search request:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/twitter/tweet/_search?scroll=1m&amp;search_type=scan' <a id="CO5-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span> -d '
{
    "query": {
        "match" : {
            "title" : "elasticsearch"
        }
    }
}
'</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO5-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Setting <code class="literal">search_type</code> to <code class="literal">scan</code> disables sorting and makes scrolling
    very efficient.
</p></td></tr></tbody></table></div><p>A scanning scroll request differs from a standard scroll request in four
ways:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
No score is calculated and sorting is disabled. Results are returned in
  the order they appear in the index.
</li><li class="listitem">
Aggregations are not supported.
</li><li class="listitem">
The response of the initial <code class="literal">search</code> request will not contain any results in
  the <code class="literal">hits</code> array. The first results will be returned by the first <code class="literal">scroll</code>
  request.
</li><li class="listitem">
The <a class="link" href="search-request-from-size.html" title="From / Size"><code class="literal">size</code> parameter</a> controls the number of
  results <span class="strong emphasis"><strong>per shard</strong></span>, not per request, so a <code class="literal">size</code> of <code class="literal">10</code> which hits 5
  shards will return a maximum of 50 results per <code class="literal">scroll</code> request.
</li></ul></div><p>If you want the scoring to happen, even without sorting on it, set the
<code class="literal">track_scores</code> parameter to <code class="literal">true</code>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="scroll-search-context"></a>Keeping the search context alive</h3></div></div></div><p>The <code class="literal">scroll</code> parameter (passed to the <code class="literal">search</code> request and to every <code class="literal">scroll</code>
request) tells Elasticsearch how long it should keep the search context alive.
Its value (e.g. <code class="literal">1m</code>, see <a class="xref" href="common-options.html#time-units" title="Time unitsedit">the section called Time units</a>) does not need to be long enough to
process all datait just needs to be long enough to process the previous
batch of results. Each <code class="literal">scroll</code> request (with the <code class="literal">scroll</code> parameter) sets a
new  expiry time.</p><p>Normally, the <a class="link" href="index-modules-merge.html" title="Merge">background merge process</a> optimizes the
index by merging together smaller segments to create new bigger segments, at
which time the smaller segments are deleted. This process continues during
scrolling, but an open search context prevents the old segments from being
deleted while they are still in use.  This is how Elasticsearch is able to
return the results of the initial search request, regardless of subsequent
changes to documents.</p><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>Keeping older segments alive means that more file handles are needed.
Ensure that you have configured your nodes to have ample free file handles.
See <a class="xref" href="setup-configuration.html#file-descriptors" title="File Descriptorsedit">the section called File Descriptors</a>.</p></div></div><p>You can check how many search contexts are open with the
<a class="link" href="cluster-nodes-stats.html" title="Nodes Stats">nodes stats API</a>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET localhost:9200/_nodes/stats/indices/search?pretty</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_clear_scroll_api"></a>Clear scroll API</h3></div></div></div><p>Search contexts are removed automatically either when all results have been
retrieved or when the <code class="literal">scroll</code> timeout has been exceeded.  However, you can
clear a search context manually with the <code class="literal">clear-scroll</code> API:</p><div class="pre_wrapper"><pre class="programlisting">curl -XDELETE localhost:9200/_search/scroll \
     -d 'c2Nhbjs2OzM0NDg1ODpzRlBLc0FXNlNyNm5JWUc1' <a id="CO6-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO6-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">scroll_id</code> can be passed in the request body or in the query string.
</p></td></tr></tbody></table></div><p>Multiple scroll IDs can be passed as comma separated values:</p><div class="pre_wrapper"><pre class="programlisting">curl -XDELETE localhost:9200/_search/scroll \
     -d 'c2Nhbjs2OzM0NDg1ODpzRlBLc0FXNlNyNm5JWUc1,aGVuRmV0Y2g7NTsxOnkxaDZ' <a id="CO7-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span></pre></div><p>All search contexts can be cleared with the <code class="literal">_all</code> parameter:</p><div class="pre_wrapper"><pre class="programlisting">curl -XDELETE localhost:9200/_search/scroll/_all</pre></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Preference</span></div><div class="navheader"><span class="prev"><a href="search-request-scroll.html">
              &nbsp;
              Scroll</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-explain.html">Explain
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-preference"></a>Preference</h2></div></div></div><p>Controls a <code class="literal">preference</code> of which shard replicas to execute the search
request on. By default, the operation is randomized between the shard
replicas.</p><p>The <code class="literal">preference</code> is a query string parameter which can be set to:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">_primary</code>
</p>
</td><td class="entry" valign="top">
<p>
        The operation will go and be executed only on the primary
        shards.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">_primary_first</code>
</p>
</td><td class="entry" valign="top">
<p>
        The operation will go and be executed on the primary
        shard, and if not available (failover), will execute on other shards.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">_local</code>
</p>
</td><td class="entry" valign="top">
<p>
        The operation will prefer to be executed on a local
        allocated shard if possible.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">_only_node:xyz</code>
</p>
</td><td class="entry" valign="top">
<p>
        Restricts the search to execute only on a node with
        the provided node id (<code class="literal">xyz</code> in this case).
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">_prefer_node:xyz</code>
</p>
</td><td class="entry" valign="top">
<p>
        Prefers execution on the node with the provided
        node id (<code class="literal">xyz</code> in this case) if applicable.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">_shards:2,3</code>
</p>
</td><td class="entry" valign="top">
<p>
        Restricts the operation to the specified shards. (<code class="literal">2</code>
        and <code class="literal">3</code> in this case). This preference can be combined with other
        preferences but it has to appear first: <code class="literal">_shards:2,3;_primary</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">_only_nodes</code>
</p>
</td><td class="entry" valign="top">
<p>
    Restricts the operation to nodes specified in node specification
    <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster.html" target="_top">https://www.elastic.co/guide/en/elasticsearch/reference/current/cluster.html</a> <span class="added">
      [<span class="version">1.7.0</span>]
      <span class="detail">Added in 1.7.0.
</span></span>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Custom (string) value
</p>
</td><td class="entry" valign="top">
<p>
        A custom value will be used to guarantee that
        the same shards will be used for the same custom value. This can help
        with "jumping values" when hitting different shards in different refresh
        states. A sample value can be something like the web session id, or the
        user name.
</p>
</td></tr></tbody></table></div><p>For instance, use the users session ID to ensure consistent ordering of results
for the user:</p><div class="pre_wrapper"><pre class="programlisting">curl localhost:9200/_search?preference=xyzabc123 -d '
{
    "query": {
        "match": {
            "title": "elasticsearch"
        }
    }
}
'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Explain</span></div><div class="navheader"><span class="prev"><a href="search-request-preference.html">
              &nbsp;
              Preference</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-version.html">Version
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-explain"></a>Explain</h2></div></div></div><p>Enables explanation for each hit on how its score was computed.</p><div class="pre_wrapper"><pre class="programlisting">{
    "explain": true,
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Version</span></div><div class="navheader"><span class="prev"><a href="search-request-explain.html">
              &nbsp;
              Explain</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-index-boost.html">Index Boost
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-version"></a>Version</h2></div></div></div><p>Returns a version for each search hit.</p><div class="pre_wrapper"><pre class="programlisting">{
    "version": true,
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Index Boost</span></div><div class="navheader"><span class="prev"><a href="search-request-version.html">
              &nbsp;
              Version</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-min-score.html">min_score
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-index-boost"></a>Index Boost</h2></div></div></div><p>Allows to configure different boost level per index when searching
across more than one indices. This is very handy when hits coming from
one index matter more than hits coming from another index (think social
graph where each user has an index).</p><div class="pre_wrapper"><pre class="programlisting">{
    "indices_boost" : {
        "index1" : 1.4,
        "index2" : 1.3
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">min_score</span></div><div class="navheader"><span class="prev"><a href="search-request-index-boost.html">
              &nbsp;
              Index Boost</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-named-queries-and-filters.html">Named Queries and Filters
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-min-score"></a>min_score</h2></div></div></div><p>Exclude documents which have a <code class="literal">_score</code> less than the minimum specified
in <code class="literal">min_score</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "min_score": 0.5,
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}</pre></div><p>Note, most times, this does not make much sense, but is provided for
advanced use cases.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Named Queries and Filters</span></div><div class="navheader"><span class="prev"><a href="search-request-min-score.html">
              &nbsp;
              min_score</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-request-inner-hits.html">Inner hits
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-named-queries-and-filters"></a>Named Queries and Filters</h2></div></div></div><p>Each filter and query can accept a <code class="literal">_name</code> in its top level definition.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "bool" : {
                "should" : [
                    {"match" : { "name.first" : {"query" : "shay", "_name" : "first"} }},
                    {"match" : { "name.last" : {"query" : "banon", "_name" : "last"} }}
                ]
            }
        },
        "filter" : {
            "terms" : {
                "name.last" : ["banon", "kimchy"],
                "_name" : "test"
            }
        }
    }
}</pre></div><p>The search response will include for each hit the <code class="literal">matched_queries</code> it matched on. The tagging of queries and filters
only make sense for compound queries and filters (such as <code class="literal">bool</code> query and filter, <code class="literal">or</code> and <code class="literal">and</code> filter, <code class="literal">filtered</code> query etc.).</p><p>Note, the query filter had to be enhanced in order to support this. In
order to set a name, the <code class="literal">fquery</code> filter should be used, which wraps a
query (just so there will be a place to set a name for it), for example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "term" : { "name.first" : "shay" }
        },
        "filter" : {
            "fquery" : {
                "query" : {
                    "term" : { "name.last" : "banon" }
                },
                "_name" : "test"
            }
        }
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_named_queries"></a>Named queries</h3></div></div></div><p>The support for the <code class="literal">_name</code> option on queries is available from version <code class="literal">0.90.4</code> and the support on filters is available
also in versions before <code class="literal">0.90.4</code>.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-request-body.html">Request Body Search</a></span>  <span class="breadcrumb-node">Inner hits</span></div><div class="navheader"><span class="prev"><a href="search-request-named-queries-and-filters.html">
              &nbsp;
              Named Queries and Filters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-template.html">Search Template
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-request-inner-hits"></a>Inner hits</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p></div></div><p>The <a class="link" href="mapping-parent-field.html" title="_parent">parent/child</a> and <a class="link" href="mapping-nested-type.html" title="Nested Type">nested</a> features allow the return of documents that
have matches in a different scope. In the parent/child case, parent document are returned based on matches in child
documents or child document are returned based on matches in parent documents. In the nested case, documents are returned
based on matches in nested inner objects.</p><p>In both cases, the actual matches in the different scopes that caused a document to be returned is hidden. In many cases,
its very useful to know which inner nested objects (in the case of nested or children or parent documents), or (in the case
of parent/child) caused certain information to be returned. The inner hits feature can be used for this. This feature
returns per search hit in the search response additional nested hits that caused a search hit to match in a different scope.</p><p>Inner hits can be used by defining a <code class="literal">inner_hits</code> definition on a <code class="literal">nested</code>, <code class="literal">has_child</code> or <code class="literal">has_parent</code> query and filter.
The structure looks like this:</p><div class="pre_wrapper"><pre class="programlisting">"&lt;query&gt;" : {
    "inner_hits" : {
        &lt;inner_hits_options&gt;
    }
}</pre></div><p>If <code class="literal">_inner_hits</code> is defined on a query that supports it then each search hit will contain a <code class="literal">inner_hits</code> json object with the following structure:</p><div class="pre_wrapper"><pre class="programlisting">"hits": [
     {
        "_index": ...,
        "_type": ...,
        "_id": ...,
        "inner_hits": {
           "&lt;inner_hits_name&gt;": {
              "hits": {
                 "total": ...,
                 "hits": [
                    {
                       "_type": ...,
                       "_id": ...,
                       ...
                    },
                    ...
                 ]
              }
           }
        },
        ...
     },
     ...
]</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_options"></a>Options</h3></div></div></div><p>Inner hits support the following options:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">from</code>
</p>
</td><td class="entry" valign="top">
<p>
The offset from where the first hit to fetch for each <code class="literal">inner_hits</code> in the returned regular search hits.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">size</code>
</p>
</td><td class="entry" valign="top">
<p>
The maximum number of hits to return per <code class="literal">inner_hits</code>. By default the top three matching hits are returned.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">sort</code>
</p>
</td><td class="entry" valign="top">
<p>
How the inner hits should be sorted per <code class="literal">inner_hits</code>. By default the hits are sorted by the score.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">name</code>
</p>
</td><td class="entry" valign="top">
<p>
The name to be used for the particular inner hit definition in the response. Useful when multiple inner hits
         have been defined in a single search request. The default depends in which query the inner hit is defined.
         For <code class="literal">has_child</code> query and filter this is the child type, <code class="literal">has_parent</code> query and filter this is the parent type
         and the nested query and filter this is the nested path.
</p>
</td></tr></tbody></table></div><p>Inner hits also supports the following per document features:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="link" href="search-request-highlighting.html" title="Highlighting">Highlighting</a>
</li><li class="listitem">
<a class="link" href="search-request-explain.html" title="Explain">Explain</a>
</li><li class="listitem">
<a class="link" href="search-request-source-filtering.html" title="Source filtering">Source filtering</a>
</li><li class="listitem">
<a class="link" href="search-request-script-fields.html" title="Script Fields">Script fields</a>
</li><li class="listitem">
<a class="link" href="search-request-fielddata-fields.html" title="Field Data Fields">Fielddata fields</a>
</li><li class="listitem">
<a class="link" href="search-request-version.html" title="Version">Include versions</a>
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="nested-inner-hits"></a>Nested inner hits</h3></div></div></div><p>The nested <code class="literal">inner_hits</code> can be used to include nested inner objects as inner hits to a search hit.</p><p>The example below assumes that there is a nested object field defined with the name <code class="literal">comments</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "nested" : {
            "path" : "comments",
            "query" : {
                "match" : {"comments.message" : "[actual query]"}
            },
            "inner_hits" : {} <a id="CO7-2"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO7-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> <a href="#CO7-2"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The inner hit definition in the nested query. No other options need to be defined.
</p></td></tr></tbody></table></div><p>An example of a response snippet that could be generated from the above search request:</p><div class="pre_wrapper"><pre class="programlisting">...
"hits": {
  ...
  "hits": [
     {
        "_index": "my-index",
        "_type": "question",
        "_id": "1",
        "_source": ...,
        "inner_hits": {
           "comments": { <a id="CO8-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
              "hits": {
                 "total": ...,
                 "hits": [
                    {
                       "_type": "question",
                       "_id": "1",
                       "_nested": {
                          "field": "comments",
                          "offset": 2
                       },
                       "_source": ...
                    },
                    ...
                 ]
              }
           }
        }
     },
     ...</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO8-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The name used in the inner hit definition in the search request. A custom key can be used via the <code class="literal">name</code> option.
</p></td></tr></tbody></table></div><p>The <code class="literal">_nested</code> metadata is crucial in the above example, because it defines from what inner nested object this inner hit
came from. The <code class="literal">field</code> defines the object array field the nested hit is from and the <code class="literal">offset</code> relative to its location
in the <code class="literal">_source</code>. Due to sorting and scoring the actual location of the hit objects in the <code class="literal">inner_hits</code> is usually
different than the location a nested inner object was defined.</p><p>By default the <code class="literal">_source</code> is returned also for the hit objects in <code class="literal">inner_hits</code>, but this can be changed. Either via
<code class="literal">_source</code> filtering feature part of the source can be returned or be disabled. If stored fields are defined on the
nested level these can also be returned via the <code class="literal">fields</code> feature.</p><p>An important default is that the <code class="literal">_source</code> returned in hits inside <code class="literal">inner_hits</code> is relative to the <code class="literal">_nested</code> metadata.
So in the above example only the comment part is returned per nested hit and not the entire source of the top level
document that contained the the comment.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="hierarchical-nested-inner-hits"></a>Hierarchical levels of nested object fields and inner hits.</h3></div></div></div><p>If a mapping has multiple levels of hierarchical nested object fields each level can be accessed via dot notated path.
For example if there is a <code class="literal">comments</code> nested field that contains a <code class="literal">votes</code> nested field and votes should directly be returned
with the the root hits then the following path can be defined:</p><div class="pre_wrapper"><pre class="programlisting">{
   "query" : {
      "nested" : {
         "path" : "comments.votes",
         "query" : { ... },
         "inner_hits" : {}
      }
    }
}</pre></div><p>This indirect referencing is only supported for nested inner hits.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="parent-child-inner-hits"></a>Parent/child inner hits</h3></div></div></div><p>The parent/child <code class="literal">inner_hits</code> can be used to include parent or child</p><p>The examples below assumes that there is a <code class="literal">_parent</code> field mapping in the <code class="literal">comment</code> type:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "has_child" : {
            "type" : "comment",
            "query" : {
                "match" : {"message" : "[actual query]"}
            },
            "inner_hits" : {} <a id="CO9-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO9-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The inner hit definition like in the nested example.
</p></td></tr></tbody></table></div><p>An example of a response snippet that could be generated from the above search request:</p><div class="pre_wrapper"><pre class="programlisting">...
"hits": {
  ...
  "hits": [
     {
        "_index": "my-index",
        "_type": "question",
        "_id": "1",
        "_source": ...,
        "inner_hits": {
           "comment": {
              "hits": {
                 "total": ...,
                 "hits": [
                    {
                       "_type": "comment",
                       "_id": "5",
                       "_source": ...
                    },
                    ...
                 ]
              }
           }
        }
     },
     ...</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="top-level-inner-hits"></a>top level inner hits</h3></div></div></div><p>Besides defining inner hits on query and filters, inner hits can also be defined as a top level construct alongside the
<code class="literal">query</code> and <code class="literal">aggregations</code> definition. The main reason for using the top level inner hits definition is to let the
inner hits return documents that dont match with the main query. Also inner hits definitions can be nested via the
top level notation. Other then that the inner hit definition inside the query should be used, because that is the most
compact way for defining inner hits.</p><p>The following snippet explains the basic structure of inner hits defined at the top level of the search request body:</p><div class="pre_wrapper"><pre class="programlisting">"inner_hits" : {
    "&lt;inner_hits_name&gt;" : {
        "&lt;path|type&gt;" : {
            "&lt;path-to-nested-object-field|child-or-parent-type&gt;" : {
                &lt;inner_hits_body&gt;
                [,"inner_hits" : { [&lt;sub_inner_hits&gt;]+ } ]?
            }
        }
    }
    [,"&lt;inner_hits_name_2&gt;" : { ... } ]*
}</pre></div><p>Inside the <code class="literal">inner_hits</code> definition, first the name if the inner hit is defined then whether the inner_hit
is a nested by defining <code class="literal">path</code> or a parent/child based definition by defining <code class="literal">type</code>. The next object layer contains
the name of the nested object field if the inner_hits is nested or the parent or child type if the inner_hit definition
is parent/child based.</p><p>Multiple inner hit definitions can be defined in a single request. In the <code class="literal">&lt;inner_hits_body&gt;</code> any option for features
that <code class="literal">inner_hits</code> support can be defined. Optionally another <code class="literal">inner_hits</code> definition can be defined in the <code class="literal">&lt;inner_hits_body&gt;</code>.</p><p>An example that shows the use of nested inner hits via the top level notation:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "nested" : {
            "path" : "comments",
            "query" : {
                "match" : {"comments.message" : "[actual query]"}
            }
        }
    },
    "inner_hits" : {
        "comment" : {
            "path" : { <a id="CO10-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                "comments" : { <a id="CO10-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
                    "query" : {
                        "match" : {"comments.message" : "[different query]"} <a id="CO10-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span>
                    }
                }
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO10-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The inner hit definition is nested and requires the <code class="literal">path</code> option.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO10-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The path option refers to the nested object field <code class="literal">comments</code>
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO10-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
A query that runs to collect the nested inner documents for each search hit returned. If no query is defined all nested
    inner documents will be included belonging to a search hit. This shows that it only make sense to the top level
    inner hit definition if no query or a different query is specified.
</p></td></tr></tbody></table></div><p>Additional options that are only available when using the top level inner hits notation:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">path</code>
</p>
</td><td class="entry" valign="top">
<p>
Defines the nested scope where hits will be collected from.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">type</code>
</p>
</td><td class="entry" valign="top">
<p>
Defines the parent or child type score where hits will be collected from.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">query</code>
</p>
</td><td class="entry" valign="top">
<p>
Defines the query that will run in the defined nested, parent or child scope to collect and score hits. By default all document in the scope will be matched.
</p>
</td></tr></tbody></table></div><p>Either <code class="literal">path</code> or <code class="literal">type</code> must be defined. The <code class="literal">path</code> or <code class="literal">type</code> defines the scope from where hits are fetched and
used as inner hits.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">Search Template</span></div><div class="navheader"><span class="prev"><a href="search-request-inner-hits.html">
              &nbsp;
              Inner hits</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-shards.html">Search Shards API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-template"></a>Search Template</h2></div></div></div><p>The <code class="literal">/_search/template</code> endpoint allows to use the mustache language to pre render search requests,
before they are executed and fill existing templates with template parameters.</p><div class="pre_wrapper"><pre class="programlisting">GET /_search/template
{
    "template" : {
      "query": { "match" : { "{{my_field}}" : "{{my_value}}" } },
      "size" : "{{my_size}}"
    },
    "params" : {
        "my_field" : "foo",
        "my_value" : "bar",
        "my_size" : 5
    }
}</pre></div><p>For more information on how Mustache templating and what kind of templating you
can do with it check out the <a class="ulink" href="http://mustache.github.io/mustache.5.html" target="_top">online
documentation of the mustache project</a>.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The mustache language is implemented in elasticsearch as a sandboxed
scripting language, hence it obeys settings that may be used to enable or
disable scripts per language, source and operation as described in
<a class="link" href="modules-scripting.html#enable-dynamic-scripting" title="Enabling dynamic scriptingedit">scripting docs</a> <span class="added">
      [<span class="version">1.6.0</span>]
      <span class="detail">Added in 1.6.0.
<code class="literal">mustache</code> scripts were always on before and it wasnt possible to disable them
</span></span>.</p></div></div><h4><a id="_more_template_examples"></a>More template examples</h4><h5><a id="_filling_in_a_query_string_with_a_single_value"></a>Filling in a query string with a single value</h5><div class="pre_wrapper"><pre class="programlisting">GET /_search/template
{
    "template": {
        "query": {
            "match": {
                "title": "{{query_string}}"
            }
        }
    },
    "params": {
        "query_string": "search for these words"
    }
}</pre></div><h5><a id="_passing_an_array_of_strings"></a>Passing an array of strings</h5><div class="pre_wrapper"><pre class="programlisting">GET /_search/template
{
  "template": {
    "query": {
      "terms": {
        "status": [
          "{{#status}}",
          "{{.}}",
          "{{/status}}"
        ]
      }
    }
  },
  "params": {
    "status": [ "pending", "published" ]
  }
}</pre></div><p>which is rendered as:</p><div class="pre_wrapper"><pre class="programlisting">{
"query": {
  "terms": {
    "status": [ "pending", "published" ]
  }
}</pre></div><h5><a id="_default_values"></a>Default values</h5><p>A default value is written as <code class="literal">{{var}}{{^var}}default{{/var}}</code> for instance:</p><div class="pre_wrapper"><pre class="programlisting">{
  "template": {
    "query": {
      "range": {
        "line_no": {
          "gte": "{{start}}",
          "lte": "{{end}}{{^end}}20{{/end}}"
        }
      }
    }
  },
  "params": { ... }
}</pre></div><p>When <code class="literal">params</code> is <code class="literal">{ "start": 10, "end": 15 }</code> this query would be rendered as:</p><div class="pre_wrapper"><pre class="programlisting">{
    "range": {
        "line_no": {
            "gte": "10",
            "lte": "15"
        }
  }
}</pre></div><p>But when <code class="literal">params</code> is <code class="literal">{ "start": 10 }</code> this query would use the default value
for <code class="literal">end</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "range": {
        "line_no": {
            "gte": "10",
            "lte": "20"
        }
    }
}</pre></div><h5><a id="_conditional_clauses"></a>Conditional clauses</h5><p>Conditional clauses cannot be expressed using the JSON form of the template.
Instead, the template <span class="strong emphasis"><strong>must</strong></span> be passed as a string.  For instance, lets say
we wanted to run a <code class="literal">match</code> query on the <code class="literal">line</code> field, and optionally wanted
to filter by line numbers, where <code class="literal">start</code> and <code class="literal">end</code> are optional.</p><p>The <code class="literal">params</code> would look like:</p><div class="pre_wrapper"><pre class="programlisting">{
    "params": {
        "text":      "words to search for",
        "line_no": { <a id="CO11-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            "start": 10, <a id="CO11-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
            "end":   20  <a id="CO11-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span>
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO11-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> <a href="#CO11-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> <a href="#CO11-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
All three of these elements are optional.
</p></td></tr></tbody></table></div><p>We could write the query as:</p><div class="pre_wrapper"><pre class="programlisting">{
  "query": {
    "filtered": {
      "query": {
        "match": {
          "line": "{{text}}" <a id="CO12-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        }
      },
      "filter": {
        {{#line_no}} <a id="CO12-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
          "range": {
            "line_no": {
              {{#start}} <a id="CO12-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span>
                "gte": "{{start}}" <a id="CO12-4"></a><span><img class="images-icons-callouts-4-png" alt=""></span>
                {{#end}},{{/end}} <a id="CO12-5"></a><span><img class="images-icons-callouts-5-png" alt=""></span>
              {{/start}} <a id="CO12-6"></a><span><img class="images-icons-callouts-6-png" alt=""></span>
              {{#end}} <a id="CO12-7"></a><span><img class="images-icons-callouts-7-png" alt=""></span>
                "lte": "{{end}}" <a id="CO12-8"></a><span><img class="images-icons-callouts-8-png" alt=""></span>
              {{/end}} <a id="CO12-9"></a><span><img class="images-icons-callouts-9-png" alt=""></span>
            }
          }
        {{/line_no}} <a id="CO12-10"></a><span><img class="images-icons-callouts-10-png" alt=""></span>
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO12-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Fill in the value of param <code class="literal">text</code>
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO12-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> <a href="#CO12-10"><span><img class="images-icons-callouts-10-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Include the <code class="literal">range</code> filter only if <code class="literal">line_no</code> is specified
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO12-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> <a href="#CO12-6"><span><img class="images-icons-callouts-6-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Include the <code class="literal">gte</code> clause only if <code class="literal">line_no.start</code> is specified
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO12-4"><span><img class="images-icons-callouts-4-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Fill in the value of param <code class="literal">line_no.start</code>
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO12-5"><span><img class="images-icons-callouts-5-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Add a comma after the <code class="literal">gte</code> clause only if <code class="literal">line_no.start</code>
    AND <code class="literal">line_no.end</code> are specified
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO12-7"><span><img class="images-icons-callouts-7-png" alt=""></span></a> <a href="#CO12-9"><span><img class="images-icons-callouts-9-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Include the <code class="literal">lte</code> clause only if <code class="literal">line_no.end</code> is specified
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO12-8"><span><img class="images-icons-callouts-8-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Fill in the value of param <code class="literal">line_no.end</code>
</p></td></tr></tbody></table></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>As written above, this template is not valid JSON because it includes the
<span class="emphasis"><em>section</em></span> markers like <code class="literal">{{#line_no}}</code>.  For this reason, the template should
either be stored in a file (see <a class="xref" href="search-template.html#pre-registered-templates" title="Pre-registered templateedit">the section called Pre-registered template</a>) or, when used
via the REST API, should be written as a string:</p><div class="pre_wrapper"><pre class="programlisting">"template": "{\"query\":{\"filtered\":{\"query\":{\"match\":{\"line\":\"{{text}}\"}},\"filter\":{{{#line_no}}\"range\":{\"line_no\":{{{#start}}\"gte\":\"{{start}}\"{{#end}},{{/end}}{{/start}}{{#end}}\"lte\":\"{{end}}\"{{/end}}}}{{/line_no}}}}}}"</pre></div></div></div><h5><a id="pre-registered-templates"></a>Pre-registered template</h5><p>You can register search templates by storing it in the <code class="literal">config/scripts</code> directory, in a file using the <code class="literal">.mustache</code> extension.
In order to execute the stored template, reference it by its name under the <code class="literal">template</code> key:</p><div class="pre_wrapper"><pre class="programlisting">GET /_search/template
{
    "template": {
        "file": "storedTemplate" <a id="CO13-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
    },
    "params": {
        "query_string": "search for these words"
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO13-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Name of the the query template in <code class="literal">config/scripts/</code>, i.e., <code class="literal">storedTemplate.mustache</code>.
</p></td></tr></tbody></table></div><p>You can also register search templates by storing it in the elasticsearch cluster in a special index named <code class="literal">.scripts</code>.
There are REST APIs to manage these indexed templates.</p><div class="pre_wrapper"><pre class="programlisting">POST /_search/template/&lt;templatename&gt;
{
    "template": {
        "query": {
            "match": {
                "title": "{{query_string}}"
            }
        }
    }
}</pre></div><p>This template can be retrieved by</p><div class="pre_wrapper"><pre class="programlisting">GET /_search/template/&lt;templatename&gt;</pre></div><p>which is rendered as:</p><div class="pre_wrapper"><pre class="programlisting">{
    "template": {
        "query": {
            "match": {
                "title": "{{query_string}}"
            }
        }
    }
}</pre></div><p>This template can be deleted by</p><div class="pre_wrapper"><pre class="programlisting">DELETE /_search/template/&lt;templatename&gt;</pre></div><p>To use an indexed template at search time use:</p><div class="pre_wrapper"><pre class="programlisting">GET /_search/template
{
    "template": {
        "id": "templateName" <a id="CO14-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
    },
    "params": {
        "query_string": "search for these words"
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO14-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Name of the the query template stored in the <code class="literal">.scripts</code> index.
</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">Search Shards API</span></div><div class="navheader"><span class="prev"><a href="search-template.html">
              &nbsp;
              Search Template</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations.html">Aggregations
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-shards"></a>Search Shards API</h2></div></div></div><p>The search shards api returns the indices and shards that a search request would
be executed against. This can give useful feedback for working out issues or
planning optimizations with routing and shard preferences.</p><p>The <code class="literal">index</code> and <code class="literal">type</code> parameters may be single values, or comma-separated.</p><h3><a id="_usage"></a>Usage</h3><p>Full example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/twitter/_search_shards'</pre></div><p>This will yield the following result:</p><div class="pre_wrapper"><pre class="programlisting">{
  "nodes": {
    "JklnKbD7Tyqi9TP3_Q_tBg": {
      "name": "Rl'nnd",
      "transport_address": "inet[/192.168.1.113:9300]"
    }
  },
  "shards": [
    [
      {
        "index": "twitter",
        "node": "JklnKbD7Tyqi9TP3_Q_tBg",
        "primary": true,
        "relocating_node": null,
        "shard": 3,
        "state": "STARTED"
      }
    ],
    [
      {
        "index": "twitter",
        "node": "JklnKbD7Tyqi9TP3_Q_tBg",
        "primary": true,
        "relocating_node": null,
        "shard": 4,
        "state": "STARTED"
      }
    ],
    [
      {
        "index": "twitter",
        "node": "JklnKbD7Tyqi9TP3_Q_tBg",
        "primary": true,
        "relocating_node": null,
        "shard": 0,
        "state": "STARTED"
      }
    ],
    [
      {
        "index": "twitter",
        "node": "JklnKbD7Tyqi9TP3_Q_tBg",
        "primary": true,
        "relocating_node": null,
        "shard": 2,
        "state": "STARTED"
      }
    ],
    [
      {
        "index": "twitter",
        "node": "JklnKbD7Tyqi9TP3_Q_tBg",
        "primary": true,
        "relocating_node": null,
        "shard": 1,
        "state": "STARTED"
      }
    ]
  ]
}</pre></div><p>And specifying the same request, this time with a routing value:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/twitter/_search_shards?routing=foo,baz'</pre></div><p>This will yield the following result:</p><div class="pre_wrapper"><pre class="programlisting">{
  "nodes": {
    "JklnKbD7Tyqi9TP3_Q_tBg": {
      "name": "Rl'nnd",
      "transport_address": "inet[/192.168.1.113:9300]"
    }
  },
  "shards": [
    [
      {
        "index": "twitter",
        "node": "JklnKbD7Tyqi9TP3_Q_tBg",
        "primary": true,
        "relocating_node": null,
        "shard": 2,
        "state": "STARTED"
      }
    ],
    [
      {
        "index": "twitter",
        "node": "JklnKbD7Tyqi9TP3_Q_tBg",
        "primary": true,
        "relocating_node": null,
        "shard": 4,
        "state": "STARTED"
      }
    ]
  ]
}</pre></div><p>This time the search will only be executed against two of the shards, because
routing values have been specified.</p><h3><a id="_all_parameters"></a>All parameters:</h3><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">routing</code>
</p>
</td><td class="entry" valign="top">
<p>
    A comma-separated list of routing values to take into account when
    determining which shards a request would be executed against.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">preference</code>
</p>
</td><td class="entry" valign="top">
<p>
    Controls a <code class="literal">preference</code> of which shard replicas to execute the search
    request on. By default, the operation is randomized between the shard
    replicas. See the <a class="ulink" href="search-request-preference.html" target="_top">preference</a>
    documentation for a list of all acceptable values.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">local</code>
</p>
</td><td class="entry" valign="top">
<p>
    A boolean value whether to read the cluster state locally in order to
    determine where shards are allocated instead of using the Master nodes
    cluster state.
</p>
</td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">Aggregations</span></div><div class="navheader"><span class="prev"><a href="search-shards.html">
              &nbsp;
              Search Shards API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-metrics-min-aggregation.html">Min Aggregation
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations"></a>Aggregations</h2></div></div></div><p>Aggregations grew out of the <a class="link" href="search-facets.html" title="Facets">facets</a> module and the long experience of how users use it
(and would like to use it) for real-time data analytics purposes. As such, it serves as the next generation
replacement for the functionality we currently refer to as "faceting".</p><p><a class="link" href="search-facets.html" title="Facets">Facets</a> provide a great way to aggregate data within a document set context.
This context is defined by the executed query in combination with the different levels of filters that can be defined
(filtered queries, top-level filters, and facet level filters). While powerful, their implementation is not designed
from the ground up to support complex aggregations and is thus limited.</p><p>The aggregations module breaks the barriers the current facet implementation put in place. The new name ("Aggregations")
also indicates the intention here - a generic yet extremely powerful framework for building aggregations - any types of
aggregations.</p><p>An aggregation can be seen as a <span class="emphasis"><em>unit-of-work</em></span> that builds analytic information over a set of documents. The context of
the execution defines what this document set is (e.g. a top-level aggregation executes within the context of the executed
query/filters of the search request).</p><p>There are many different types of aggregations, each with its own purpose and output. To better understand these types,
it is often easier to break them into two main families:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<span class="emphasis"><em>Bucketing</em></span>
</span></dt><dd>
                                A family of aggregations that build buckets, where each bucket is associated with a <span class="emphasis"><em>key</em></span> and a document
                                criterion. When the aggregation is executed, all the buckets criteria are evaluated on every document in
                                the context and when a criterion matches, the document is considered to "fall in" the relevant bucket.
                                By the end of the aggregation process, well end up with a list of buckets - each one with a set of
                                documents that "belong" to it.
</dd><dt><span class="term">
<span class="emphasis"><em>Metric</em></span>
</span></dt><dd>
                                Aggregations that keep track and compute metrics over a set of documents.
</dd></dl></div><p>The interesting part comes next. Since each bucket effectively defines a document set (all documents belonging to
the bucket), one can potentially associate aggregations on the bucket level, and those will execute within the context
of that bucket. This is where the real power of aggregations kicks in: <span class="strong emphasis"><strong>aggregations can be nested!</strong></span></p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Bucketing aggregations can have sub-aggregations (bucketing or metric). The sub-aggregations will be computed for
                the buckets which their parent aggregation generates. There is no hard limit on the level/depth of nested
                aggregations (one can nest an aggregation under a "parent" aggregation, which is itself a sub-aggregation of
                another higher-level aggregation).</p></div></div><h3><a id="_structuring_aggregations"></a>Structuring Aggregations</h3><p>The following snippet captures the basic structure of aggregations:</p><div class="pre_wrapper"><pre class="programlisting">"aggregations" : {
    "&lt;aggregation_name&gt;" : {
        "&lt;aggregation_type&gt;" : {
            &lt;aggregation_body&gt;
        }
        [,"aggregations" : { [&lt;sub_aggregation&gt;]+ } ]?
    }
    [,"&lt;aggregation_name_2&gt;" : { ... } ]*
}</pre></div><p>The <code class="literal">aggregations</code> object (the key <code class="literal">aggs</code> can also be used) in the JSON holds the aggregations to be computed. Each aggregation
is associated with a logical name that the user defines (e.g. if the aggregation computes the average price, then it would
make sense to name it <code class="literal">avg_price</code>). These logical names will also be used to uniquely identify the aggregations in the
response. Each aggregation has a specific type (<code class="literal">&lt;aggregation_type&gt;</code> in the above snippet) and is typically the first
key within the named aggregation body. Each type of aggregation defines its own body, depending on the nature of the
aggregation (e.g. an <code class="literal">avg</code> aggregation on a specific field will define the field on which the average will be calculated).
At the same level of the aggregation type definition, one can optionally define a set of additional aggregations,
though this only makes sense if the aggregation you defined is of a bucketing nature. In this scenario, the
sub-aggregations you define on the bucketing aggregation level will be computed for all the buckets built by the
bucketing aggregation. For example, if you define a set of aggregations under the <code class="literal">range</code> aggregation, the
sub-aggregations will be computed for the range buckets that are defined.</p><h4><a id="_values_source"></a>Values Source</h4><p>Some aggregations work on values extracted from the aggregated documents. Typically, the values will be extracted from
a specific document field which is set using the <code class="literal">field</code> key for the aggregations. It is also possible to define a
<a class="link" href="modules-scripting.html" title="Scripting"><code class="literal">script</code></a> which will generate the values (per document).</p><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The <code class="literal">script</code> parameter expects an inline script. Use <code class="literal">script_id</code> for indexed scripts and <code class="literal">script_file</code> for scripts in the <code class="literal">config/scripts/</code> directory.</p></div></div><p>When both <code class="literal">field</code> and <code class="literal">script</code> settings are configured for the aggregation, the script will be treated as a
<code class="literal">value script</code>.  While normal scripts are evaluated on a document level (i.e. the script has access to all the data
associated with the document), value scripts are evaluated on the <span class="strong emphasis"><strong>value</strong></span> level. In this mode, the values are extracted
from the configured <code class="literal">field</code> and the <code class="literal">script</code> is used to apply a "transformation" over these value/s.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><a id="aggs-script-note"></a><p>When working with scripts, the <code class="literal">lang</code> and <code class="literal">params</code> settings can also be defined. The former defines the scripting
language which is used (assuming the proper language is available in Elasticsearch, either by default or as a plugin). The latter
enables defining all the "dynamic" expressions in the script as parameters, which enables the script to keep itself static
between calls (this will ensure the use of the cached compiled scripts in Elasticsearch).</p></div></div><p>Scripts can generate a single value or multiple values per document. When generating multiple values, one can use the
<code class="literal">script_values_sorted</code> settings to indicate whether these values are sorted or not. Internally, Elasticsearch can
perform optimizations when dealing with sorted values (for example, with the <code class="literal">min</code> aggregations, knowing the values are
sorted, Elasticsearch will skip the iterations over all the values and rely on the first value in the list to be the
minimum value among all other values associated with the same document).</p><h3><a id="_metrics_aggregations"></a>Metrics Aggregations</h3><p>The aggregations in this family compute metrics based on values extracted in one way or another from the documents that
are being aggregated. The values are typically extracted from the fields of the document (using the field data), but
can also be generated using scripts.</p><p>Numeric metrics aggregations are a special type of metrics aggregation which output numeric values. Some aggregations output
a single numeric metric (e.g. <code class="literal">avg</code>) and are called <code class="literal">single-value numeric metrics aggregation</code>, others generate multiple
metrics (e.g. <code class="literal">stats</code>) and are called <code class="literal">multi-value numeric metrics aggregation</code>. The distinction between single-value and
multi-value numeric metrics aggregations plays a role when these aggregations serve as direct sub-aggregations of some
bucket aggregations (some bucket aggregations enable you to sort the returned buckets based on the numeric metrics in each bucket).</p><h3><a id="_bucket_aggregations"></a>Bucket Aggregations</h3><p>Bucket aggregations dont calculate metrics over fields like the metrics aggregations do, but instead, they create
buckets of documents. Each bucket is associated with a criterion (depending on the aggregation type) which determines
whether or not a document in the current context "falls" into it. In other words, the buckets effectively define document
sets. In addition to the buckets themselves, the <code class="literal">bucket</code> aggregations also compute and return the number of documents
that "fell in" to each bucket.</p><p>Bucket aggregations, as opposed to <code class="literal">metrics</code> aggregations, can hold sub-aggregations. These sub-aggregations will be
aggregated for the buckets created by their "parent" bucket aggregation.</p><p>There are different bucket aggregators, each with a different "bucketing" strategy. Some define a single bucket, some
define fixed number of multiple buckets, and others dynamically create the buckets during the aggregation process.</p><h3><a id="_caching_heavy_aggregations"></a>Caching heavy aggregations</h3><p>Frequently used aggregations (e.g. for display on the home page of a website)
can be cached for faster responses. These cached results are the same results
that would be returned by an uncached aggregationyou will never get stale
results.</p><p>See <a class="xref" href="index-modules-shard-query-cache.html" title="Shard query cache"><em>Shard query cache</em></a> for more details.</p><h3><a id="_returning_only_aggregation_results"></a>Returning only aggregation results</h3><p>There are many occasions when aggregations are required but search hits are not.  For these cases the hits can be ignored by
adding <code class="literal">search_type=count</code> to the request URL parameters. For example:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/twitter/tweet/_search?search_type=count' -d '{
  "aggregations": {
    "my_agg": {
      "terms": {
        "field": "text"
      }
    }
  }
}
'</pre></div><p>Setting <code class="literal">search_type</code> to <code class="literal">count</code> avoids executing the fetch phase of the search making the request more efficient.  See
<a class="xref" href="search-request-search-type.html" title="Search Type">Search Type</a> for more information on the <code class="literal">search_type</code> parameter.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Min Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations.html">
              &nbsp;
              Aggregations</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-metrics-max-aggregation.html">Max Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-metrics-min-aggregation"></a>Min Aggregation</h2></div></div></div><p>A <code class="literal">single-value</code> metrics aggregation that keeps track and returns the minimum value among numeric values extracted from the aggregated documents. These values can be extracted either from specific numeric fields in the documents, or be generated by a provided script.</p><p>Computing the min price value across all documents:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "min_price" : { "min" : { "field" : "price" } }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations": {
        "min_price": {
            "value": 10
        }
    }
}</pre></div><p>As can be seen, the name of the aggregation (<code class="literal">min_price</code> above) also serves as the key by which the aggregation result can be retrieved from the returned response.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script"></a>Script</h3></div></div></div><p>Computing the min price value across all document, this time using a script:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "min_price" : { "min" : { "script" : "doc['price'].value" } }
    }
}</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The <code class="literal">script</code> parameter expects an inline script. Use <code class="literal">script_id</code> for indexed scripts and <code class="literal">script_file</code> for scripts in the <code class="literal">config/scripts/</code> directory.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_value_script"></a>Value Script</h3></div></div></div><p>Lets say that the prices of the documents in our index are in USD, but we would like to compute the min in EURO (and for the sake of this example, lets say the conversion rate is 1.2). We can use a value script to apply the conversion rate to every value before it is aggregated:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "min_price_in_euros" : {
            "min" : {
                "field" : "price",
                "script" : "_value * conversion_rate",
                "params" : {
                    "conversion_rate" : 1.2
                }
            }
        }
    }
}</pre></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Max Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-metrics-min-aggregation.html">
              &nbsp;
              Min Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-metrics-sum-aggregation.html">Sum Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-metrics-max-aggregation"></a>Max Aggregation</h2></div></div></div><p>A <code class="literal">single-value</code> metrics aggregation that keeps track and returns the maximum value among the numeric values extracted from the aggregated documents. These values can be extracted either from specific numeric fields in the documents, or be generated by a provided script.</p><p>Computing the max price value across all documents</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "max_price" : { "max" : { "field" : "price" } }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations": {
        "max_price": {
            "value": 35
        }
    }
}</pre></div><p>As can be seen, the name of the aggregation (<code class="literal">max_price</code> above) also serves as the key by which the aggregation result can be retrieved from the returned response.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_2"></a>Script</h3></div></div></div><p>Computing the max price value across all document, this time using a script:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "max_price" : { "max" : { "script" : "doc['price'].value" } }
    }
}</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The <code class="literal">script</code> parameter expects an inline script. Use <code class="literal">script_id</code> for indexed scripts and <code class="literal">script_file</code> for scripts in the <code class="literal">config/scripts/</code> directory.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_value_script_2"></a>Value Script</h3></div></div></div><p>Lets say that the prices of the documents in our index are in USD, but we would like to compute the max in EURO (and for the sake of this example, lets say the conversion rate is 1.2). We can use a value script to apply the conversion rate to every value before it is aggregated:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "max_price_in_euros" : {
            "max" : {
                "field" : "price",
                "script" : "_value * conversion_rate",
                "params" : {
                    "conversion_rate" : 1.2
                }
            }
        }
    }
}</pre></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Sum Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-metrics-max-aggregation.html">
              &nbsp;
              Max Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-metrics-avg-aggregation.html">Avg Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-metrics-sum-aggregation"></a>Sum Aggregation</h2></div></div></div><p>A <code class="literal">single-value</code> metrics aggregation that sums up numeric values that are extracted from the aggregated documents. These values can be extracted either from specific numeric fields in the documents, or be generated by a provided script.</p><p>Assuming the data consists of documents representing stock ticks, where each tick holds the change in the stock price from the previous tick.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "filtered" : {
            "query" : { "match_all" : {}},
            "filter" : {
                "range" : { "timestamp" : { "from" : "now/1d+9.5h", "to" : "now/1d+16h" }}
            }
        }
    },
    "aggs" : {
        "intraday_return" : { "sum" : { "field" : "change" } }
    }
}</pre></div><p>The above aggregation sums up all changes in the todays trading stock ticks which accounts for the intraday return. The aggregation type is <code class="literal">sum</code> and the <code class="literal">field</code> setting defines the numeric field of the documents of which values will be summed up. The above will return the following:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations": {
        "intraday_return": {
           "value": 2.18
        }
    }
}</pre></div><p>The name of the aggregation (<code class="literal">intraday_return</code> above) also serves as the key by which the aggregation result can be retrieved from the returned response.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_3"></a>Script</h3></div></div></div><p>Computing the intraday return based on a script:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...,

    "aggs" : {
        "intraday_return" : { "sum" : { "script" : "doc['change'].value" } }
    }
}</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The <code class="literal">script</code> parameter expects an inline script. Use <code class="literal">script_id</code> for indexed scripts and <code class="literal">script_file</code> for scripts in the <code class="literal">config/scripts/</code> directory.</p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_value_script_3"></a>Value Script</h4></div></div></div><p>Computing the sum of squares over all stock tick changes:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        ...

        "aggs" : {
            "daytime_return" : {
                "sum" : {
                    "field" : "change",
                    "script" : "_value * _value" }
            }
        }
    }
}</pre></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Avg Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-metrics-sum-aggregation.html">
              &nbsp;
              Sum Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-metrics-stats-aggregation.html">Stats Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-metrics-avg-aggregation"></a>Avg Aggregation</h2></div></div></div><p>A <code class="literal">single-value</code> metrics aggregation that computes the average of numeric values that are extracted from the aggregated documents. These values can be extracted either from specific numeric fields in the documents, or be generated by a provided script.</p><p>Assuming the data consists of documents representing exams grades (between 0 and 100) of students</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "avg_grade" : { "avg" : { "field" : "grade" } }
    }
}</pre></div><p>The above aggregation computes the average grade over all documents. The aggregation type is <code class="literal">avg</code> and the <code class="literal">field</code> setting defines the numeric field of the documents the average will be computed on. The above will return the following:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations": {
        "avg_grade": {
            "value": 75
        }
    }
}</pre></div><p>The name of the aggregation (<code class="literal">avg_grade</code> above) also serves as the key by which the aggregation result can be retrieved from the returned response.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_4"></a>Script</h3></div></div></div><p>Computing the average grade based on a script:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...,

    "aggs" : {
        "avg_grade" : { "avg" : { "script" : "doc['grade'].value" } }
    }
}</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The <code class="literal">script</code> parameter expects an inline script. Use <code class="literal">script_id</code> for indexed scripts and <code class="literal">script_file</code> for scripts in the <code class="literal">config/scripts/</code> directory.</p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_value_script_4"></a>Value Script</h4></div></div></div><p>It turned out that the exam was way above the level of the students and a grade correction needs to be applied. We can use value script to get the new average:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        ...

        "aggs" : {
            "avg_corrected_grade" : {
                "avg" : {
                    "field" : "grade",
                    "script" : "_value * correction",
                    "params" : {
                        "correction" : 1.2
                    }
                }
            }
        }
    }
}</pre></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Stats Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-metrics-avg-aggregation.html">
              &nbsp;
              Avg Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-metrics-extendedstats-aggregation.html">Extended Stats Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-metrics-stats-aggregation"></a>Stats Aggregation</h2></div></div></div><p>A <code class="literal">multi-value</code> metrics aggregation that computes stats over numeric values extracted from the aggregated documents. These values can be extracted either from specific numeric fields in the documents, or be generated by a provided script.</p><p>The stats that are returned consist of: <code class="literal">min</code>, <code class="literal">max</code>, <code class="literal">sum</code>, <code class="literal">count</code> and <code class="literal">avg</code>.</p><p>Assuming the data consists of documents representing exams grades (between 0 and 100) of students</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "grades_stats" : { "stats" : { "field" : "grade" } }
    }
}</pre></div><p>The above aggregation computes the grades statistics over all documents. The aggregation type is <code class="literal">stats</code> and the <code class="literal">field</code> setting defines the numeric field of the documents the stats will be computed on. The above will return the following:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations": {
        "grades_stats": {
            "count": 6,
            "min": 60,
            "max": 98,
            "avg": 78.5,
            "sum": 471
        }
    }
}</pre></div><p>The name of the aggregation (<code class="literal">grades_stats</code> above) also serves as the key by which the aggregation result can be retrieved from the returned response.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_5"></a>Script</h3></div></div></div><p>Computing the grades stats based on a script:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...,

    "aggs" : {
        "grades_stats" : { "stats" : { "script" : "doc['grade'].value" } }
    }
}</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The <code class="literal">script</code> parameter expects an inline script. Use <code class="literal">script_id</code> for indexed scripts and <code class="literal">script_file</code> for scripts in the <code class="literal">config/scripts/</code> directory.</p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_value_script_5"></a>Value Script</h4></div></div></div><p>It turned out that the exam was way above the level of the students and a grade correction needs to be applied. We can use a value script to get the new stats:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        ...

        "aggs" : {
            "grades_stats" : {
                "stats" : {
                    "field" : "grade",
                    "script" : "_value * correction",
                    "params" : {
                        "correction" : 1.2
                    }
                }
            }
        }
    }
}</pre></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Extended Stats Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-metrics-stats-aggregation.html">
              &nbsp;
              Stats Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-metrics-valuecount-aggregation.html">Value Count Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-metrics-extendedstats-aggregation"></a>Extended Stats Aggregation</h2></div></div></div><p>A <code class="literal">multi-value</code> metrics aggregation that computes stats over numeric values extracted from the aggregated documents. These values can be extracted either from specific numeric fields in the documents, or be generated by a provided script.</p><p>The <code class="literal">extended_stats</code> aggregations is an extended version of the <a class="link" href="search-aggregations-metrics-stats-aggregation.html" title="Stats Aggregation"><code class="literal">stats</code></a> aggregation, where additional metrics are added such as <code class="literal">sum_of_squares</code>, <code class="literal">variance</code>, <code class="literal">std_deviation</code> and <code class="literal">std_deviation_bounds</code>.</p><p>Assuming the data consists of documents representing exams grades (between 0 and 100) of students</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "grades_stats" : { "extended_stats" : { "field" : "grade" } }
    }
}</pre></div><p>The above aggregation computes the grades statistics over all documents. The aggregation type is <code class="literal">extended_stats</code> and the <code class="literal">field</code> setting defines the numeric field of the documents the stats will be computed on. The above will return the following:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations": {
        "grade_stats": {
           "count": 9,
           "min": 72,
           "max": 99,
           "avg": 86,
           "sum": 774,
           "sum_of_squares": 67028,
           "variance": 51.55555555555556,
           "std_deviation": 7.180219742846005,
           "std_deviation_bounds": {
            "upper": 100.36043948569201,
            "lower": 71.63956051430799
           }
        }
    }
}</pre></div><p>The name of the aggregation (<code class="literal">grades_stats</code> above) also serves as the key by which the aggregation result can be retrieved from the returned response.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_standard_deviation_bounds"></a>Standard Deviation Bounds</h3></div></div></div><p>By default, the <code class="literal">extended_stats</code> metric will return an object called <code class="literal">std_deviation_bounds</code>, which provides an interval of plus/minus two standard
deviations from the mean.  This can be a useful way to visualize variance of your data.  If you want a different boundary, for example
three standard deviations, you can set <code class="literal">sigma</code> in the request:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "grades_stats" : {
            "extended_stats" : {
                "field" : "grade",
                "sigma" : 3 <a id="CO15-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO15-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
<code class="literal">sigma</code> controls how many standard deviations +/- from the mean should be displayed
</p></td></tr></tbody></table></div><p><code class="literal">sigma</code> can be any non-negative double, meaning you can request non-integer values such as <code class="literal">1.5</code>.  A value of <code class="literal">0</code> is valid, but will simply
return the average for both <code class="literal">upper</code> and <code class="literal">lower</code> bounds.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><h3>Standard Deviation and Bounds require normality</h3><p>The standard deviation and its bounds are displayed by default, but they are not always applicable to all data-sets.  Your data must
be normally distributed for the metrics to make sense.  The statistics behind standard deviations assumes normally distributed data, so
if your data is skewed heavily left or right, the value returned will be misleading.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_6"></a>Script</h3></div></div></div><p>Computing the grades stats based on a script:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...,

    "aggs" : {
        "grades_stats" : { "extended_stats" : { "script" : "doc['grade'].value" } }
    }
}</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The <code class="literal">script</code> parameter expects an inline script. Use <code class="literal">script_id</code> for indexed scripts and <code class="literal">script_file</code> for scripts in the <code class="literal">config/scripts/</code> directory.</p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_value_script_6"></a>Value Script</h4></div></div></div><p>It turned out that the exam was way above the level of the students and a grade correction needs to be applied. We can use value script to get the new stats:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        ...

        "aggs" : {
            "grades_stats" : {
                "extended_stats" : {
                    "field" : "grade",
                    "script" : "_value * correction",
                    "params" : {
                        "correction" : 1.2
                    }
                }
            }
        }
    }
}</pre></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Value Count Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-metrics-extendedstats-aggregation.html">
              &nbsp;
              Extended Stats Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-metrics-percentile-aggregation.html">Percentiles Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-metrics-valuecount-aggregation"></a>Value Count Aggregation</h2></div></div></div><p>A <code class="literal">single-value</code> metrics aggregation that counts the number of values that are extracted from the aggregated documents.
These values can be extracted either from specific fields in the documents, or be generated by a provided script. Typically,
this aggregator will be used in conjunction with other single-value aggregations. For example, when computing the <code class="literal">avg</code>
one might be interested in the number of values the average is computed over.</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "grades_count" : { "value_count" : { "field" : "grade" } }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations": {
        "grades_count": {
            "value": 10
        }
    }
}</pre></div><p>The name of the aggregation (<code class="literal">grades_count</code> above) also serves as the key by which the aggregation result can be
retrieved from the returned response.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_7"></a>Script</h3></div></div></div><p>Counting the values generated by a script:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...,

    "aggs" : {
        "grades_count" : { "value_count" : { "script" : "doc['grade'].value" } }
    }
}</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The <code class="literal">script</code> parameter expects an inline script. Use <code class="literal">script_id</code> for indexed scripts and <code class="literal">script_file</code> for scripts in the <code class="literal">config/scripts/</code> directory.</p></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Percentiles Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-metrics-valuecount-aggregation.html">
              &nbsp;
              Value Count Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-metrics-percentile-rank-aggregation.html">Percentile Ranks Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-metrics-percentile-aggregation"></a>Percentiles Aggregation</h2></div></div></div><p>A <code class="literal">multi-value</code> metrics aggregation that calculates one or more percentiles
over numeric values extracted from the aggregated documents.  These values
can be extracted either from specific numeric fields in the documents, or
be generated by a provided script.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p></div></div><p>Percentiles show the point at which a certain percentage of observed values
occur.  For example, the 95th percentile is the value which is greater than 95%
of the observed values.</p><p>Percentiles are often used to find outliers.  In normal distributions, the
0.13th and 99.87th percentiles represents three standard deviations from the
mean.  Any data which falls outside three standard deviations is often considered
an anomaly.</p><p>When a range of percentiles are retrieved, they can be used to estimate the
data distribution and determine if the data is skewed, bimodal, etc.</p><p>Assume your data consists of website load times.  The average and median
load times are not overly useful to an administrator.  The max may be interesting,
but it can be easily skewed by a single slow response.</p><p>Lets look at a range of percentiles representing load time:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "load_time_outlier" : {
            "percentiles" : {
                "field" : "load_time" <a id="CO16-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO16-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The field <code class="literal">load_time</code> must be a numeric field
</p></td></tr></tbody></table></div><p>By default, the <code class="literal">percentile</code> metric will generate a range of
percentiles: <code class="literal">[ 1, 5, 25, 50, 75, 95, 99 ]</code>.  The response will look like this:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

   "aggregations": {
      "load_time_outlier": {
         "values" : {
            "1.0": 15,
            "5.0": 20,
            "25.0": 23,
            "50.0": 25,
            "75.0": 29,
            "95.0": 60,
            "99.0": 150
         }
      }
   }
}</pre></div><p>As you can see, the aggregation will return a calculated value for each percentile
in the default range.  If we assume response times are in milliseconds, it is
immediately obvious that the webpage normally loads in 15-30ms, but occasionally
spikes to 60-150ms.</p><p>Often, administrators are only interested in outliersthe extreme percentiles.
We can specify just the percents we are interested in (requested percentiles
must be a value between 0-100 inclusive):</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "load_time_outlier" : {
            "percentiles" : {
                "field" : "load_time",
                "percents" : [95, 99, 99.9] <a id="CO17-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO17-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Use the <code class="literal">percents</code> parameter to specify particular percentiles to calculate
</p></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_8"></a>Script</h3></div></div></div><p>The percentile metric supports scripting.  For example, if our load times
are in milliseconds but we want percentiles calculated in seconds, we could use
a script to convert them on-the-fly:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "load_time_outlier" : {
            "percentiles" : {
                "script" : "doc['load_time'].value / timeUnit", <a id="CO18-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                "params" : {
                    "timeUnit" : 1000   <a id="CO18-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
                }
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO18-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">field</code> parameter is replaced with a <code class="literal">script</code> parameter, which uses the
script to generate values which percentiles are calculated on
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO18-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Scripting supports parameterized input just like any other script
</p></td></tr></tbody></table></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The <code class="literal">script</code> parameter expects an inline script. Use <code class="literal">script_id</code> for indexed scripts and <code class="literal">script_file</code> for scripts in the <code class="literal">config/scripts/</code> directory.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="search-aggregations-metrics-percentile-aggregation-approximation"></a>Percentiles are (usually) approximate</h3></div></div></div><p>There are many different algorithms to calculate percentiles.  The naive
implementation simply stores all the values in a sorted array.  To find the 50th
percentile, you simply find the value that is at <code class="literal">my_array[count(my_array) * 0.5]</code>.</p><p>Clearly, the naive implementation does not scalethe sorted array grows
linearly with the number of values in your dataset.  To calculate percentiles
across potentially billions of values in an Elasticsearch cluster, <span class="emphasis"><em>approximate</em></span>
percentiles are calculated.</p><p>The algorithm used by the <code class="literal">percentile</code> metric is called TDigest (introduced by
Ted Dunning in
<a class="ulink" href="https://github.com/tdunning/t-digest/blob/master/docs/t-digest-paper/histo.pdf" target="_top">Computing Accurate Quantiles using T-Digests</a>).</p><p>When using this metric, there are a few guidelines to keep in mind:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Accuracy is proportional to <code class="literal">q(1-q)</code>.  This means that extreme percentiles (e.g. 99%)
are more accurate than less extreme percentiles, such as the median
</li><li class="listitem">
For small sets of values, percentiles are highly accurate (and potentially
100% accurate if the data is small enough).
</li><li class="listitem">
As the quantity of values in a bucket grows, the algorithm begins to approximate
the percentiles.  It is effectively trading accuracy for memory savings.  The
exact level of inaccuracy is difficult to generalize, since it depends on your
data distribution and volume of data being aggregated
</li></ul></div><p>The following chart shows the relative error on a uniform distribution depending
on the number of collected values and the requested percentile:</p><p><span class="inlinemediaobject"><img class="images-percentiles_error-png" alt="images/percentiles_error.png"></span></p><p>It shows how precision is better for extreme percentiles. The reason why error diminishes
for large number of values is that the law of large numbers makes the distribution of
values more and more uniform and the t-digest tree can do a better job at summarizing
it. It would not be the case on more skewed distributions.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="search-aggregations-metrics-percentile-aggregation-compression"></a>Compression</h3></div></div></div><p>Approximate algorithms must balance memory utilization with estimation accuracy.
This balance can be controlled using a <code class="literal">compression</code> parameter:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "load_time_outlier" : {
            "percentiles" : {
                "field" : "load_time",
                "compression" : 200 <a id="CO19-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO19-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Compression controls memory usage and approximation error
</p></td></tr></tbody></table></div><p>The TDigest algorithm uses a number of "nodes" to approximate percentilesthe
more nodes available, the higher the accuracy (and large memory footprint) proportional
to the volume of data.  The <code class="literal">compression</code> parameter limits the maximum number of
nodes to <code class="literal">20 * compression</code>.</p><p>Therefore, by increasing the compression value, you can increase the accuracy of
your percentiles at the cost of more memory.  Larger compression values also
make the algorithm slower since the underlying tree data structure grows in size,
resulting in more expensive operations.  The default compression value is
<code class="literal">100</code>.</p><p>A "node" uses roughly 32 bytes of memory, so under worst-case scenarios (large amount
of data which arrives sorted and in-order) the default settings will produce a
TDigest roughly 64KB in size.  In practice data tends to be more random and
the TDigest will use less memory.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Percentile Ranks Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-metrics-percentile-aggregation.html">
              &nbsp;
              Percentiles Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-metrics-cardinality-aggregation.html">Cardinality Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-metrics-percentile-rank-aggregation"></a>Percentile Ranks Aggregation</h2></div></div></div><p>A <code class="literal">multi-value</code> metrics aggregation that calculates one or more percentile ranks
over numeric values extracted from the aggregated documents.  These values
can be extracted either from specific numeric fields in the documents, or
be generated by a provided script.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Please see <a class="xref" href="search-aggregations-metrics-percentile-aggregation.html#search-aggregations-metrics-percentile-aggregation-approximation" title="Percentiles are (usually) approximate">Percentiles are (usually) approximate</a>
and <a class="xref" href="search-aggregations-metrics-percentile-aggregation.html#search-aggregations-metrics-percentile-aggregation-compression" title="Compression">Compression</a> for advice
regarding approximation and memory use of the percentile ranks aggregation</p></div></div><p>Percentile rank show the percentage of observed values which are below certain
value.  For example, if a value is greater than or equal to 95% of the observed values
it is said to be at the 95th percentile rank.</p><p>Assume your data consists of website load times.  You may have a service agreement that
95% of page loads completely within 15ms and 99% of page loads complete within 30ms.</p><p>Lets look at a range of percentiles representing load time:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "load_time_outlier" : {
            "percentile_ranks" : {
                "field" : "load_time", <a id="CO20-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                "values" : [15, 30]
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO20-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The field <code class="literal">load_time</code> must be a numeric field
</p></td></tr></tbody></table></div><p>The response will look like this:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

   "aggregations": {
      "load_time_outlier": {
         "values" : {
            "15": 92,
            "30": 100
         }
      }
   }
}</pre></div><p>From this information you can determine you are hitting the 99% load time target but not quite
hitting the 95% load time target</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_9"></a>Script</h3></div></div></div><p>The percentile rank metric supports scripting.  For example, if our load times
are in milliseconds but we want to specify values in seconds, we could use
a script to convert them on-the-fly:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "load_time_outlier" : {
            "percentile_ranks" : {
                "values" : [3, 5],
                "script" : "doc['load_time'].value / timeUnit", <a id="CO21-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                "params" : {
                    "timeUnit" : 1000   <a id="CO21-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
                }
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO21-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">field</code> parameter is replaced with a <code class="literal">script</code> parameter, which uses the
script to generate values which percentile ranks are calculated on
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO21-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Scripting supports parameterized input just like any other script
</p></td></tr></tbody></table></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The <code class="literal">script</code> parameter expects an inline script. Use <code class="literal">script_id</code> for indexed scripts and <code class="literal">script_file</code> for scripts in the <code class="literal">config/scripts/</code> directory.</p></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Cardinality Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-metrics-percentile-rank-aggregation.html">
              &nbsp;
              Percentile Ranks Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-metrics-geobounds-aggregation.html">Geo Bounds Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-metrics-cardinality-aggregation"></a>Cardinality Aggregation</h2></div></div></div><p>A <code class="literal">single-value</code> metrics aggregation that calculates an approximate count of
distinct values. Values can be extracted either from specific fields in the
document or generated by a script.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p></div></div><p>Assume you are indexing books and would like to count the unique authors that
match a query:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "author_count" : {
            "cardinality" : {
                "field" : "author"
            }
        }
    }
}</pre></div><p>This aggregation also supports the <code class="literal">precision_threshold</code> and <code class="literal">rehash</code> options:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "author_count" : {
            "cardinality" : {
                "field" : "author_hash",
                "precision_threshold": 100, <a id="CO22-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                "rehash": false <a id="CO22-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO22-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">precision_threshold</code> options allows to trade memory for accuracy, and
defines a unique count below which counts are expected to be close to
accurate. Above this value, counts might become a bit more fuzzy. The maximum
supported value is 40000, thresholds above this number will have the same
effect as a threshold of 40000.
Default value depends on the number of parent aggregations that multiple
create buckets (such as terms or histograms).
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO22-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
If you computed a hash on client-side, stored it into your documents and want
Elasticsearch to use them to compute counts using this hash function without
rehashing values, it is possible to specify <code class="literal">rehash: false</code>. Default value is
<code class="literal">true</code>. Please note that the hash must be indexed as a long when <code class="literal">rehash</code> is
false.
</p></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_counts_are_approximate"></a>Counts are approximate</h3></div></div></div><p>Computing exact counts requires loading values into a hash set and returning its
size. This doesnt scale when working on high-cardinality sets and/or large
values as the required memory usage and the need to communicate those
per-shard sets between nodes would utilize too many resources of the cluster.</p><p>This <code class="literal">cardinality</code> aggregation is based on the
<a class="ulink" href="http://static.googleusercontent.com/media/research.google.com/fr//pubs/archive/40671.pdf" target="_top">HyperLogLog++</a>
algorithm, which counts based on the hashes of the values with some interesting
properties:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
configurable precision, which decides on how to trade memory for accuracy,
</li><li class="listitem">
excellent accuracy on low-cardinality sets,
</li><li class="listitem">
fixed memory usage: no matter if there are tens or billions of unique values,
   memory usage only depends on the configured precision.
</li></ul></div><p>For a precision threshold of <code class="literal">c</code>, the implementation that we are using requires
about <code class="literal">c * 8</code> bytes.</p><p>The following chart shows how the error varies before and after the threshold:</p><p><span class="inlinemediaobject"><img class="images-cardinality_error-png" alt="images/cardinality_error.png"></span></p><p>For all 3 thresholds, counts have been accurate up to the configured threshold
(although not guaranteed, this is likely to be the case). Please also note that
even with a threshold as low as 100, the error remains under 5%, even when
counting millions of items.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_pre_computed_hashes"></a>Pre-computed hashes</h3></div></div></div><p>If you dont want Elasticsearch to re-compute hashes on every run of this
aggregation, it is possible to use pre-computed hashes, either by computing a
hash on client-side, indexing it and specifying <code class="literal">rehash: false</code>, or by using
the special <code class="literal">murmur3</code> field mapper, typically in the context of a <code class="literal">multi-field</code>
in the mapping:</p><div class="pre_wrapper"><pre class="programlisting">{
    "author": {
        "type": "string",
        "fields": {
            "hash": {
                "type": "murmur3"
            }
        }
    }
}</pre></div><p>With such a mapping, Elasticsearch is going to compute hashes of the <code class="literal">author</code>
field at indexing time and store them in the <code class="literal">author.hash</code> field. This
way, unique counts can be computed using the cardinality aggregation by only
loading the hashes into memory, not the values of the <code class="literal">author</code> field, and
without computing hashes on the fly:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "author_count" : {
            "cardinality" : {
                "field" : "author.hash"
            }
        }
    }
}</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p><code class="literal">rehash</code> is automatically set to <code class="literal">false</code> when computing unique counts on
a <code class="literal">murmur3</code> field.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Pre-computing hashes is usually only useful on very large and/or
high-cardinality fields as it saves CPU and memory. However, on numeric
fields, hashing is very fast and storing the original values requires as much
or less memory than storing the hashes. This is also true on low-cardinality
string fields, especially given that those have an optimization in order to
make sure that hashes are computed at most once per unique value per segment.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_10"></a>Script</h3></div></div></div><p>The <code class="literal">cardinality</code> metric supports scripting, with a noticeable performance hit
however since hashes need to be computed on the fly.</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "author_count" : {
            "cardinality" : {
                "script": "doc['author.first_name'].value + ' ' + doc['author.last_name'].value"
            }
        }
    }
}</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The <code class="literal">script</code> parameter expects an inline script. Use <code class="literal">script_id</code> for indexed scripts and <code class="literal">script_file</code> for scripts in the <code class="literal">config/scripts/</code> directory.</p></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Geo Bounds Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-metrics-cardinality-aggregation.html">
              &nbsp;
              Cardinality Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-metrics-top-hits-aggregation.html">Top hits Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-metrics-geobounds-aggregation"></a>Geo Bounds Aggregation</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p></div></div><p>A metric aggregation that computes the bounding box containing all geo_point values for a field.</p><p>Example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match" : { "business_type" : "shop" }
    },
    "aggs" : {
        "viewport" : {
            "geo_bounds" : {
                "field" : "location", <a id="CO23-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                "wrap_longitude" : true <a id="CO23-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO23-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">geo_bounds</code> aggregation specifies the field to use to obtain the bounds
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO23-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
<code class="literal">wrap_longitude</code> is an optional parameter which specifies whether the bounding box should be allowed to overlap the international date line. The default value is <code class="literal">true</code>
</p></td></tr></tbody></table></div><p>The above aggregation demonstrates how one would compute the bounding box of the location field for all documents with a business type of shop</p><p>The response for the above aggregation:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations": {
        "viewport": {
            "bounds": {
                "top_left": {
                    "lat": 80.45,
                    "lon": -160.22
                },
                "bottom_right": {
                    "lat": 40.65,
                    "lon": 42.57
                }
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Top hits Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-metrics-geobounds-aggregation.html">
              &nbsp;
              Geo Bounds Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-metrics-scripted-metric-aggregation.html">Scripted Metric Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-metrics-top-hits-aggregation"></a>Top hits Aggregation</h2></div></div></div><p>A <code class="literal">top_hits</code> metric aggregator keeps track of the most relevant document being aggregated. This aggregator is intended
to be used as a sub aggregator, so that the top matching documents can be aggregated per bucket.</p><p>The <code class="literal">top_hits</code> aggregator can effectively be used to group result sets by certain fields via a bucket aggregator.
One or more bucket aggregators determines by which properties a result set get sliced into.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_options_2"></a>Options</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">from</code> - The offset from the first result you want to fetch.
</li><li class="listitem">
<code class="literal">size</code> - The maximum number of top matching hits to return per bucket. By default the top three matching hits are returned.
</li><li class="listitem">
<code class="literal">sort</code> - How the top matching hits should be sorted. By default the hits are sorted by the score of the main query.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_supported_per_hit_features"></a>Supported per hit features</h3></div></div></div><p>The top_hits aggregation returns regular search hits, because of this many per hit features can be supported:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="link" href="search-request-highlighting.html" title="Highlighting">Highlighting</a>
</li><li class="listitem">
<a class="link" href="search-request-explain.html" title="Explain">Explain</a>
</li><li class="listitem">
<a class="link" href="search-request-named-queries-and-filters.html" title="Named Queries and Filters">Named filters and queries</a>
</li><li class="listitem">
<a class="link" href="search-request-source-filtering.html" title="Source filtering">Source filtering</a>
</li><li class="listitem">
<a class="link" href="search-request-script-fields.html" title="Script Fields">Script fields</a>
</li><li class="listitem">
<a class="link" href="search-request-fielddata-fields.html" title="Field Data Fields">Fielddata fields</a>
</li><li class="listitem">
<a class="link" href="search-request-version.html" title="Version">Include versions</a>
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_example"></a>Example</h3></div></div></div><p>In the following example we group the questions by tag and per tag we show the last active question. For each question
only the title field is being included in the source.</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs": {
        "top-tags": {
            "terms": {
                "field": "tags",
                "size": 3
            },
            "aggs": {
                "top_tag_hits": {
                    "top_hits": {
                        "sort": [
                            {
                                "last_activity_date": {
                                    "order": "desc"
                                }
                            }
                        ],
                        "_source": {
                            "include": [
                                "title"
                            ]
                        },
                        "size" : 1
                    }
                }
            }
        }
    }
}</pre></div><p>Possible response snippet:</p><div class="pre_wrapper"><pre class="programlisting">"aggregations": {
  "top-tags": {
     "buckets": [
        {
           "key": "windows-7",
           "doc_count": 25365,
           "top_tags_hits": {
              "hits": {
                 "total": 25365,
                 "max_score": 1,
                 "hits": [
                    {
                       "_index": "stack",
                       "_type": "question",
                       "_id": "602679",
                       "_score": 1,
                       "_source": {
                          "title": "Windows port opening"
                       },
                       "sort": [
                          1370143231177
                       ]
                    }
                 ]
              }
           }
        },
        {
           "key": "linux",
           "doc_count": 18342,
           "top_tags_hits": {
              "hits": {
                 "total": 18342,
                 "max_score": 1,
                 "hits": [
                    {
                       "_index": "stack",
                       "_type": "question",
                       "_id": "602672",
                       "_score": 1,
                       "_source": {
                          "title": "Ubuntu RFID Screensaver lock-unlock"
                       },
                       "sort": [
                          1370143379747
                       ]
                    }
                 ]
              }
           }
        },
        {
           "key": "windows",
           "doc_count": 18119,
           "top_tags_hits": {
              "hits": {
                 "total": 18119,
                 "max_score": 1,
                 "hits": [
                    {
                       "_index": "stack",
                       "_type": "question",
                       "_id": "602678",
                       "_score": 1,
                       "_source": {
                          "title": "If I change my computers date / time, what could be affected?"
                       },
                       "sort": [
                          1370142868283
                       ]
                    }
                 ]
              }
           }
        }
     ]
  }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_field_collapse_example"></a>Field collapse example</h3></div></div></div><p>Field collapsing or result grouping is a feature that logically groups a result set into groups and per group returns
top documents. The ordering of the groups is determined by the relevancy of the first document in a group. In
Elasticsearch this can be implemented via a bucket aggregator that wraps a <code class="literal">top_hits</code> aggregator as sub-aggregator.</p><p>In the example below we search across crawled webpages. For each webpage we store the body and the domain the webpage
belong to. By defining a <code class="literal">terms</code> aggregator on the <code class="literal">domain</code> field we group the result set of webpages by domain. The
<code class="literal">top_docs</code> aggregator is then defined as sub-aggregator, so that the top matching hits are collected per bucket.</p><p>Also a <code class="literal">max</code> aggregator is defined which is used by the <code class="literal">terms</code> aggregators order feature the return the buckets by
relevancy order of the most relevant document in a bucket.</p><div class="pre_wrapper"><pre class="programlisting">{
  "query": {
    "match": {
      "body": "elections"
    }
  },
  "aggs": {
    "top-sites": {
      "terms": {
        "field": "domain",
        "order": {
          "top_hit": "desc"
        }
      },
      "aggs": {
        "top_tags_hits": {
          "top_hits": {}
        },
        "top_hit" : {
          "max": {
            "script": "_score"
          }
        }
      }
    }
  }
}</pre></div><p>At the moment the <code class="literal">max</code> (or <code class="literal">min</code>) aggregator is needed to make sure the buckets from the <code class="literal">terms</code> aggregator are
ordered according to the score of the most relevant webpage per domain. The <code class="literal">top_hits</code> aggregator isnt a metric aggregator
and therefore cant be used in the <code class="literal">order</code> option of the <code class="literal">terms</code> aggregator.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_top_hits_support_in_a_nested_or_reverse_nested_aggregator"></a>top_hits support in a nested or reverse_nested aggregator</h3></div></div></div><p>If the <code class="literal">top_hits</code> aggregator is wrapped in a <code class="literal">nested</code> or <code class="literal">reverse_nested</code> aggregator then nested hits are being returned.
Nested hits are in a sense hidden mini documents that are part of regular document where in the mapping a nested field type
has been configured. The <code class="literal">top_hits</code> aggregator has the ability to un-hide these documents if it is wrapped in a <code class="literal">nested</code>
or <code class="literal">reverse_nested</code> aggregator. Read more about nested in the <a class="link" href="mapping-nested-type.html" title="Nested Type">nested type mapping</a>.</p><p>If nested type has been configured a single document is actually indexed as multiple Lucene documents and they share
the same id. In order to determine the identity of a nested hit there is more needed than just the id, so that is why
nested hits also include their nested identity. The nested identity is kept under the <code class="literal">_nested</code> field in the search hit
and includes the array field and the offset in the array field the nested hit belongs to. The offset is zero based.</p><p>Top hits response snippet with a nested hit, which resides in the third slot of array field <code class="literal">nested_field1</code> in document with id <code class="literal">1</code>:</p><div class="pre_wrapper"><pre class="programlisting">...
"hits": {
 "total": 25365,
 "max_score": 1,
 "hits": [
   {
     "_index": "a",
     "_type": "b",
     "_id": "1",
     "_score": 1,
     "_nested" : {
       "field" : "nested_field1",
       "offset" : 2
     }
     "_source": ...
   },
   ...
 ]
}
...</pre></div><p>If <code class="literal">_source</code> is requested then just the part of the source of the nested object is returned, not the entire source of the document.
Also stored fields on the <span class="strong emphasis"><strong>nested</strong></span> inner object level are accessible via <code class="literal">top_hits</code> aggregator residing in a <code class="literal">nested</code> or <code class="literal">reverse_nested</code> aggregator.</p><p>Only nested hits will have a <code class="literal">_nested</code> field in the hit, non nested (regular) hits will not have a <code class="literal">_nested</code> field.</p><p>The information in <code class="literal">_nested</code> can also be used to parse the original source somewhere else if <code class="literal">_source</code> isnt enabled.</p><p>If there are multiple levels of nested object types defined in mappings then the <code class="literal">_nested</code> information can also be hierarchical
in order to express the identity of nested hits that are two layers deep or more.</p><p>In the example below a nested hit resides in the first slot of the field <code class="literal">nested_grand_child_field</code> which then resides in
the second slow of the <code class="literal">nested_child_field</code> field:</p><div class="pre_wrapper"><pre class="programlisting">...
"hits": {
 "total": 2565,
 "max_score": 1,
 "hits": [
   {
     "_index": "a",
     "_type": "b",
     "_id": "1",
     "_score": 1,
     "_nested" : {
       "field" : "nested_child_field",
       "offset" : 1,
       "_nested" : {
         "field" : "nested_grand_child_field",
         "offset" : 0
       }
     }
     "_source": ...
   },
   ...
 ]
}
...</pre></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Scripted Metric Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-metrics-top-hits-aggregation.html">
              &nbsp;
              Top hits Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-global-aggregation.html">Global Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-metrics-scripted-metric-aggregation"></a>Scripted Metric Aggregation</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p></div></div><p>A metric aggregation that executes using scripts to provide a metric output.</p><p>Example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "aggs": {
        "profit": {
            "scripted_metric": {
                "init_script" : "_agg['transactions'] = []",
                "map_script" : "if (doc['type'].value == \"sale\") { _agg.transactions.add(doc['amount'].value) } else { _agg.transactions.add(-1 * doc['amount'].value) }", <a id="CO24-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                "combine_script" : "profit = 0; for (t in _agg.transactions) { profit += t }; return profit",
                "reduce_script" : "profit = 0; for (a in _aggs) { profit += a }; return profit"
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO24-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
<code class="literal">map_script</code> is the only required  parameter
</p></td></tr></tbody></table></div><p>The above aggregation demonstrates how one would use the script aggregation compute the total profit from sale and cost transactions.</p><p>The response for the above aggregation:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations": {
        "profit": {
            "value": 170
        }
   }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_scope_of_scripts"></a>Scope of scripts</h3></div></div></div><p>The scripted metric aggregation uses scripts at 4 stages of its execution:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
init_script
</span></dt><dd><p class="simpara">
Executed prior to any collection of documents. Allows the aggregation to set up any initial state.
</p><p class="simpara">In the above example, the <code class="literal">init_script</code> creates an array <code class="literal">transactions</code> in the <code class="literal">_agg</code> object.</p></dd><dt><span class="term">
map_script
</span></dt><dd><p class="simpara">
Executed once per document collected. This is the only required script. If no combine_script is specified, the resulting state
                    needs to be stored in an object named <code class="literal">_agg</code>.
</p><p class="simpara">In the above example, the <code class="literal">map_script</code> checks the value of the type field. If the value is <span class="emphasis"><em>sale</em></span> the value of the amount field
is added to the transactions array. If the value of the type field is not <span class="emphasis"><em>sale</em></span> the negated value of the amount field is added
to transactions.</p></dd><dt><span class="term">
combine_script
</span></dt><dd><p class="simpara">
Executed once on each shard after document collection is complete. Allows the aggregation to consolidate the state returned from
                    each shard. If a combine_script is not provided the combine phase will return the aggregation variable.
</p><p class="simpara">In the above example, the <code class="literal">combine_script</code> iterates through all the stored transactions, summing the values in the <code class="literal">profit</code> variable
and finally returns <code class="literal">profit</code>.</p></dd><dt><span class="term">
reduce_script
</span></dt><dd><p class="simpara">
Executed once on the coordinating node after all shards have returned their results. The script is provided with access to a
                    variable <code class="literal">_aggs</code> which is an array of the result of the combine_script on each shard. If a reduce_script is not provided
                    the reduce phase will return the <code class="literal">_aggs</code> variable.
</p><p class="simpara">In the above example, the <code class="literal">reduce_script</code> iterates through the <code class="literal">profit</code> returned by each shard summing the values before returning the
final combined profit which will be returned in the response of the aggregation.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_worked_example"></a>Worked Example</h3></div></div></div><p>Imagine a situation where you index the following documents into and index with 2 shards:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/transactions/stock/1' -d '
{
    "type": "sale",
    "amount": 80
}
'

$ curl -XPUT 'http://localhost:9200/transactions/stock/2' -d '
{
    "type": "cost",
    "amount": 10
}
'

$ curl -XPUT 'http://localhost:9200/transactions/stock/3' -d '
{
    "type": "cost",
    "amount": 30
}
'

$ curl -XPUT 'http://localhost:9200/transactions/stock/4' -d '
{
    "type": "sale",
    "amount": 130
}
'</pre></div><p>Lets say that documents 1 and 3 end up on shard A and documents 2 and 4 end up on shard B. The following is a breakdown of what the aggregation result is
at each stage of the example above.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_before_init_script"></a>Before init_script</h4></div></div></div><p>No params object was specified so the default params object is used:</p><div class="pre_wrapper"><pre class="programlisting">"params" : {
    "_agg" : {}
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_after_init_script"></a>After init_script</h4></div></div></div><p>This is run once on each shard before any document collection is performed, and so we will have a copy on each shard:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Shard A
</span></dt><dd><div class="pre_wrapper"><pre class="programlisting">"params" : {
    "_agg" : {
        "transactions" : []
    }
}</pre></div></dd><dt><span class="term">
Shard B
</span></dt><dd><div class="pre_wrapper"><pre class="programlisting">"params" : {
    "_agg" : {
        "transactions" : []
    }
}</pre></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_after_map_script"></a>After map_script</h4></div></div></div><p>Each shard collects its documents and runs the map_script on each document that is collected:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Shard A
</span></dt><dd><div class="pre_wrapper"><pre class="programlisting">"params" : {
    "_agg" : {
        "transactions" : [ 80, -30 ]
    }
}</pre></div></dd><dt><span class="term">
Shard B
</span></dt><dd><div class="pre_wrapper"><pre class="programlisting">"params" : {
    "_agg" : {
        "transactions" : [ -10, 130 ]
    }
}</pre></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_after_combine_script"></a>After combine_script</h4></div></div></div><p>The combine_script is executed on each shard after document collection is complete and reduces all the transactions down to a single profit figure for each
shard (by summing the values in the transactions array) which is passed back to the coordinating node:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Shard A
</span></dt><dd>
50
</dd><dt><span class="term">
Shard B
</span></dt><dd>
120
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_after_reduce_script"></a>After reduce_script</h4></div></div></div><p>The reduce_script receives an <code class="literal">_aggs</code> array containing the result of the combine script for each shard:</p><div class="pre_wrapper"><pre class="programlisting">"_aggs" : [
    50,
    120
]</pre></div><p>It reduces the responses for the shards down to a final overall profit figure (by summing the values) and returns this as the result of the aggregation to
produce the response:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations": {
        "profit": {
            "value": 170
        }
   }
}</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_other_parameters"></a>Other Parameters</h3></div></div></div><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
params
</p>
</td><td class="entry" valign="top">
<p>
Optional. An object whose contents will be passed as variables to the  <code class="literal">init_script</code>, <code class="literal">map_script</code> and <code class="literal">combine_script</code>. This can be
                   useful to allow the user to control the behavior of the aggregation and for storing state between the scripts. If this is not specified,
                   the default is the equivalent of providing:
</p>
<div class="pre_wrapper"><pre class="programlisting">"params" : {
    "_agg" : {}
}</pre></div>
</td></tr><tr><td class="entry" valign="top">
<p>
reduce_params
</p>
</td><td class="entry" valign="top">
<p>
Optional. An object whose contents will be passed as variables to the <code class="literal">reduce_script</code>. This can be useful to allow the user to control
                   the behavior of the reduce phase. If this is not specified the variable will be undefined in the reduce_script execution.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
lang
</p>
</td><td class="entry" valign="top">
<p>
Optional. The script language used for the scripts. If this is not specified the default scripting language is used.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
init_script_file
</p>
</td><td class="entry" valign="top">
<p>
Optional. Can be used in place of the <code class="literal">init_script</code> parameter to provide the script using in a file.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
init_script_id
</p>
</td><td class="entry" valign="top">
<p>
Optional. Can be used in place of the <code class="literal">init_script</code> parameter to provide the script using an indexed script.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
map_script_file
</p>
</td><td class="entry" valign="top">
<p>
Optional. Can be used in place of the <code class="literal">map_script</code> parameter to provide the script using in a file.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
map_script_id
</p>
</td><td class="entry" valign="top">
<p>
Optional. Can be used in place of the <code class="literal">map_script</code> parameter to provide the script using an indexed script.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
combine_script_file
</p>
</td><td class="entry" valign="top">
<p>
Optional. Can be used in place of the <code class="literal">combine_script</code> parameter to provide the script using in a file.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
combine_script_id
</p>
</td><td class="entry" valign="top">
<p>
Optional. Can be used in place of the <code class="literal">combine_script</code> parameter to provide the script using an indexed script.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
reduce_script_file
</p>
</td><td class="entry" valign="top">
<p>
Optional. Can be used in place of the <code class="literal">reduce_script</code> parameter to provide the script using in a file.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
reduce_script_id
</p>
</td><td class="entry" valign="top">
<p>
Optional. Can be used in place of the <code class="literal">reduce_script</code> parameter to provide the script using an indexed script.
</p>
</td></tr></tbody></table></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Global Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-metrics-scripted-metric-aggregation.html">
              &nbsp;
              Scripted Metric Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-filter-aggregation.html">Filter Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-global-aggregation"></a>Global Aggregation</h2></div></div></div><p>Defines a single bucket of all the documents within the search execution context. This context is defined by the indices and the document types youre searching on, but is <span class="strong emphasis"><strong>not</strong></span> influenced by the search query itself.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Global aggregators can only be placed as top level aggregators (it makes no sense to embed a global aggregator
        within another bucket aggregator)</p></div></div><p>Example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match" : { "title" : "shirt" }
    },
    "aggs" : {
        "all_products" : {
            "global" : {}, <a id="CO25-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            "aggs" : { <a id="CO25-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
                "avg_price" : { "avg" : { "field" : "price" } }
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO25-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">global</code> aggregation has an empty body
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO25-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The sub-aggregations that are registered for this <code class="literal">global</code> aggregation
</p></td></tr></tbody></table></div><p>The above aggregation demonstrates how one would compute aggregations (<code class="literal">avg_price</code> in this example) on all the documents in the search context, regardless of the query (in our example, it will compute the average price over all products in our catalog, not just on the "shirts").</p><p>The response for the above aggregation:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations" : {
        "all_products" : {
            "doc_count" : 100, <a id="CO26-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            "avg_price" : {
                "value" : 56.3
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO26-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The number of documents that were aggregated (in our case, all documents within the search context)
</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Filter Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-global-aggregation.html">
              &nbsp;
              Global Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-filters-aggregation.html">Filters Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-filter-aggregation"></a>Filter Aggregation</h2></div></div></div><p>Defines a single bucket of all the documents in the current document set context that match a specified filter. Often this will be used to narrow down the current aggregation context to a specific set of documents.</p><p>Example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "red_products" : {
            "filter" : { "term": { "color": "red" } },
            "aggs" : {
                "avg_price" : { "avg" : { "field" : "price" } }
            }
        }
    }
}</pre></div><p>In the above example, we calculate the average price of all the products that are red.</p><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggs" : {
        "red_products" : {
            "doc_count" : 100,
            "avg_price" : { "value" : 56.3 }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Filters Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-filter-aggregation.html">
              &nbsp;
              Filter Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-missing-aggregation.html">Missing Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-filters-aggregation"></a>Filters Aggregation</h2></div></div></div><p>Defines a multi bucket aggregations where each bucket is associated with a
filter. Each bucket will collect all documents that match its associated
filter.</p><p>Example:</p><div class="pre_wrapper"><pre class="programlisting">{
  "aggs" : {
    "messages" : {
      "filters" : {
        "filters" : {
          "errors" :   { "term" : { "body" : "error"   }},
          "warnings" : { "term" : { "body" : "warning" }}
        }
      },
      "aggs" : {
        "monthly" : {
          "histogram" : {
            "field" : "timestamp",
            "interval" : "1M"
          }
        }
      }
    }
  }
}</pre></div><p>In the above example, we analyze log messages. The aggregation will build two
collection (buckets) of log messages - one for all those containing an error,
and another for all those containing a warning. And for each of these buckets
it will break them down by month.</p><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">...
  "aggs" : {
    "messages" : {
      "buckets" : {
        "errors" : {
          "doc_count" : 34,
            "monthly" : {
              "buckets" : [
                ... // the histogram monthly breakdown
              ]
            }
          },
          "warnings" : {
            "doc_count" : 439,
            "monthly" : {
              "buckets" : [
                 ... // the histogram monthly breakdown
              ]
            }
          }
        }
      }
    }
  }
...</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_anonymous_filters"></a>Anonymous filters</h3></div></div></div><p>The filters field can also be provided as an array of filters, as in the
following request:</p><div class="pre_wrapper"><pre class="programlisting">{
  "aggs" : {
    "messages" : {
      "filters" : {
        "filters" : [
          { "term" : { "body" : "error"   }},
          { "term" : { "body" : "warning" }}
        ]
      },
      "aggs" : {
        "monthly" : {
          "histogram" : {
            "field" : "timestamp",
            "interval" : "1M"
          }
        }
      }
    }
  }
}</pre></div><p>The filtered buckets are returned in the same order as provided in the
request.  The response for this example would be:</p><div class="pre_wrapper"><pre class="programlisting">...
  "aggs" : {
    "messages" : {
      "buckets" : [
        {
          "doc_count" : 34,
          "monthly" : {
            "buckets : [
              ... // the histogram monthly breakdown
            ]
          }
        },
        {
          "doc_count" : 439,
          "monthly" : {
            "buckets" : [
              ... // the histogram monthly breakdown
            ]
          }
        }
      ]
    }
  }
...</pre></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Missing Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-filters-aggregation.html">
              &nbsp;
              Filters Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-nested-aggregation.html">Nested Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-missing-aggregation"></a>Missing Aggregation</h2></div></div></div><p>A field data based single bucket aggregation, that creates a bucket of all documents in the current document set context that are missing a field value (effectively, missing a field or having the configured NULL value set). This aggregator will often be used in conjunction with other field data bucket aggregators (such as ranges) to return information for all the documents that could not be placed in any of the other buckets due to missing field data values.</p><p>Example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "products_without_a_price" : {
            "missing" : { "field" : "price" }
        }
    }
}</pre></div><p>In the above example, we get the total number of products that do not have a price.</p><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggs" : {
        "products_without_a_price" : {
            "doc_count" : 10
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Nested Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-missing-aggregation.html">
              &nbsp;
              Missing Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-reverse-nested-aggregation.html">Reverse nested Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-nested-aggregation"></a>Nested Aggregation</h2></div></div></div><p>A special single bucket aggregation that enables aggregating nested documents.</p><p>For example, lets say we have a index of products, and each product holds the list of resellers - each having its own
price for the product. The mapping could look like:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "product" : {
        "properties" : {
            "resellers" : { <a id="CO27-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                "type" : "nested",
                "properties" : {
                    "name" : { "type" : "string" },
                    "price" : { "type" : "double" }
                }
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO27-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">resellers</code> is an array that holds nested documents under the <code class="literal">product</code> object.
</p></td></tr></tbody></table></div><p>The following aggregations will return the minimum price products can be purchased in:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match" : { "name" : "led tv" }
    },
    "aggs" : {
        "resellers" : {
            "nested" : {
                "path" : "resellers"
            },
            "aggs" : {
                "min_price" : { "min" : { "field" : "resellers.price" } }
            }
        }
    }
}</pre></div><p>As you can see above, the nested aggregation requires the <code class="literal">path</code> of the nested documents within the top level documents.
Then one can define any type of aggregation over these nested documents.</p><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggregations": {
        "resellers": {
            "min_price": {
                "value" : 350
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Reverse nested Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-nested-aggregation.html">
              &nbsp;
              Nested Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-children-aggregation.html">Children Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-reverse-nested-aggregation"></a>Reverse nested Aggregation</h2></div></div></div><p>A special single bucket aggregation that enables aggregating on parent docs from nested documents. Effectively this
aggregation can break out of the nested block structure and link to other nested structures or the root document,
which allows nesting other aggregations that arent part of the nested object in a nested aggregation.</p><p>The <code class="literal">reverse_nested</code> aggregation must be defined inside a <code class="literal">nested</code> aggregation.</p><div class="itemizedlist"><p class="title"><strong>Options:</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">path</code> - Which defines to what nested object field should be joined back. The default is empty,
which means that it joins back to the root / main document level. The path cannot contain a reference to
a nested object field that falls outside the <code class="literal">nested</code> aggregations nested structure a <code class="literal">reverse_nested</code> is in.
</li></ul></div><p>For example, lets say we have an index for a ticket system with issues and comments. The comments are inlined into
the issue documents as nested documents. The mapping could look like:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "issue" : {
        "properties" : {
            "tags" : { "type" : "string" }
            "comments" : { <a id="CO28-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                "type" : "nested"
                "properties" : {
                    "username" : { "type" : "string", "index" : "not_analyzed" },
                    "comment" : { "type" : "string" }
                }
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO28-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">comments</code> is an array that holds nested documents under the <code class="literal">issue</code> object.
</p></td></tr></tbody></table></div><p>The following aggregations will return the top commenters' username that have commented and per top commenter the top
tags of the issues the user has commented on:</p><div class="pre_wrapper"><pre class="programlisting">{
  "query": {
    "match": {
      "name": "led tv"
    }
  },
  "aggs": {
    "comments": {
      "nested": {
        "path": "comments"
      },
      "aggs": {
        "top_usernames": {
          "terms": {
            "field": "comments.username"
          },
          "aggs": {
            "comment_to_issue": {
              "reverse_nested": {}, <a id="CO29-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
              "aggs": {
                "top_tags_per_comment": {
                  "terms": {
                    "field": "tags"
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}</pre></div><p>As you can see above, the the <code class="literal">reverse_nested</code> aggregation is put in to a <code class="literal">nested</code> aggregation as this is the only place
in the dsl where the <code class="literal">reversed_nested</code> aggregation can be used. Its sole purpose is to join back to a parent doc higher
up in the nested structure.</p><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO29-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
A <code class="literal">reverse_nested</code> aggregation that joins back to the root / main document level, because no <code class="literal">path</code> has been defined.
Via the <code class="literal">path</code> option the <code class="literal">reverse_nested</code> aggregation can join back to a different level, if multiple layered nested
object types have been defined in the mapping
</p></td></tr></tbody></table></div><p>Possible response snippet:</p><div class="pre_wrapper"><pre class="programlisting">{
  "aggregations": {
    "comments": {
      "top_usernames": {
        "buckets": [
          {
            "key": "username_1",
            "doc_count": 12,
            "comment_to_issue": {
              "top_tags_per_comment": {
                "buckets": [
                  {
                    "key": "tag1",
                    "doc_count": 9
                  },
                  ...
                ]
              }
            }
          },
          ...
        ]
      }
    }
  }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Children Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-reverse-nested-aggregation.html">
              &nbsp;
              Reverse nested Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-terms-aggregation.html">Terms Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-children-aggregation"></a>Children Aggregation</h2></div></div></div><p>A special single bucket aggregation that enables aggregating from buckets on parent document types to buckets on child documents.</p><p>This aggregation relies on the <a class="link" href="mapping-parent-field.html" title="_parent">_parent field</a> in the mapping. This aggregation has a single option:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">type</code> - The what child type the buckets in the parent space should be mapped to.
</li></ul></div><p>For example, lets say we have an index of questions and answers. The answer type has the following <code class="literal">_parent</code> field in the mapping:</p><div class="pre_wrapper"><pre class="programlisting">{
    "answer" : {
        "_parent" : {
            "type" : "question"
        }
    }
}</pre></div><p>The question typed document contain a tag field and the answer typed documents contain an owner field. With the <code class="literal">children</code>
aggregation the tag buckets can be mapped to the owner buckets in a single request even though the two fields exist in
two different kinds of documents.</p><p>An example of a question typed document:</p><div class="pre_wrapper"><pre class="programlisting">{
    "body": "&lt;p&gt;I have Windows 2003 server and i bought a new Windows 2008 server...",
    "title": "Whats the best way to file transfer my site from server to a newer one?",
    "tags": [
        "windows-server-2003",
        "windows-server-2008",
        "file-transfer"
    ],
}</pre></div><p>An example of an answer typed document:</p><div class="pre_wrapper"><pre class="programlisting">{
    "owner": {
        "location": "Norfolk, United Kingdom",
        "display_name": "Sam",
        "id": 48
    },
    "body": "&lt;p&gt;Unfortunately your pretty much limited to FTP...",
    "creation_date": "2009-05-04T13:45:37.030"
}</pre></div><p>The following request can be built that connects the two together:</p><div class="pre_wrapper"><pre class="programlisting">{
  "aggs": {
    "top-tags": {
      "terms": {
        "field": "tags",
        "size": 10
      },
      "aggs": {
        "to-answers": {
          "children": {
            "type" : "answer" <a id="CO30-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
          },
          "aggs": {
            "top-names": {
              "terms": {
                "field": "owner.display_name",
                "size": 10
              }
            }
          }
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO30-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">type</code> points to type / mapping with the name <code class="literal">answer</code>.
</p></td></tr></tbody></table></div><p>The above example returns the top question tags and per tag the top answer owners.</p><p>Possible response:</p><div class="pre_wrapper"><pre class="programlisting">{
  "aggregations": {
    "top-tags": {
      "buckets": [
        {
          "key": "windows-server-2003",
          "doc_count": 25365, <a id="CO31-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
          "to-answers": {
            "doc_count": 36004, <a id="CO31-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
            "top-names": {
              "buckets": [
                {
                  "key": "Sam",
                  "doc_count": 274
                },
                {
                  "key": "chris",
                  "doc_count": 19
                },
                {
                  "key": "david",
                  "doc_count": 14
                },
                ...
              ]
            }
          }
        },
        {
          "key": "linux",
          "doc_count": 18342,
          "to-answers": {
            "doc_count": 6655,
            "top-names": {
              "buckets": [
                {
                  "key": "abrams",
                  "doc_count": 25
                },
                {
                  "key": "ignacio",
                  "doc_count": 25
                },
                {
                  "key": "vazquez",
                  "doc_count": 25
                },
                ...
              ]
            }
          }
        },
        {
          "key": "windows",
          "doc_count": 18119,
          "to-answers": {
            "doc_count": 24051,
            "top-names": {
              "buckets": [
                {
                  "key": "molly7244",
                  "doc_count": 265
                },
                {
                  "key": "david",
                  "doc_count": 27
                },
                {
                  "key": "chris",
                  "doc_count": 26
                },
                ...
              ]
            }
          }
        },
        {
          "key": "osx",
          "doc_count": 10971,
          "to-answers": {
            "doc_count": 5902,
            "top-names": {
              "buckets": [
                {
                  "key": "diago",
                  "doc_count": 4
                },
                {
                  "key": "albert",
                  "doc_count": 3
                },
                {
                  "key": "asmus",
                  "doc_count": 3
                },
                ...
              ]
            }
          }
        },
        {
          "key": "ubuntu",
          "doc_count": 8743,
          "to-answers": {
            "doc_count": 8784,
            "top-names": {
              "buckets": [
                {
                  "key": "ignacio",
                  "doc_count": 9
                },
                {
                  "key": "abrams",
                  "doc_count": 8
                },
                {
                  "key": "molly7244",
                  "doc_count": 8
                },
                ...
              ]
            }
          }
        },
        {
          "key": "windows-xp",
          "doc_count": 7517,
          "to-answers": {
            "doc_count": 13610,
            "top-names": {
              "buckets": [
                {
                  "key": "molly7244",
                  "doc_count": 232
                },
                {
                  "key": "chris",
                  "doc_count": 9
                },
                {
                  "key": "john",
                  "doc_count": 9
                },
                ...
              ]
            }
          }
        },
        {
          "key": "networking",
          "doc_count": 6739,
          "to-answers": {
            "doc_count": 2076,
            "top-names": {
              "buckets": [
                {
                  "key": "molly7244",
                  "doc_count": 6
                },
                {
                  "key": "alnitak",
                  "doc_count": 5
                },
                {
                  "key": "chris",
                  "doc_count": 3
                },
                ...
              ]
            }
          }
        },
        {
          "key": "mac",
          "doc_count": 5590,
          "to-answers": {
            "doc_count": 999,
            "top-names": {
              "buckets": [
                {
                  "key": "abrams",
                  "doc_count": 2
                },
                {
                  "key": "ignacio",
                  "doc_count": 2
                },
                {
                  "key": "vazquez",
                  "doc_count": 2
                },
                ...
              ]
            }
          }
        },
        {
          "key": "wireless-networking",
          "doc_count": 4409,
          "to-answers": {
            "doc_count": 6497,
            "top-names": {
              "buckets": [
                {
                  "key": "molly7244",
                  "doc_count": 61
                },
                {
                  "key": "chris",
                  "doc_count": 5
                },
                {
                  "key": "mike",
                  "doc_count": 5
                },
                ...
              ]
            }
          }
        },
        {
          "key": "windows-8",
          "doc_count": 3601,
          "to-answers": {
            "doc_count": 4263,
            "top-names": {
              "buckets": [
                {
                  "key": "molly7244",
                  "doc_count": 3
                },
                {
                  "key": "msft",
                  "doc_count": 2
                },
                {
                  "key": "user172132",
                  "doc_count": 2
                },
                ...
              ]
            }
          }
        }
      ]
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO31-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The number of question documents with the tag <code class="literal">windows-server-2003</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO31-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The number of answer documents that are related to question documents with the tag <code class="literal">windows-server-2003</code>.
</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Terms Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-children-aggregation.html">
              &nbsp;
              Children Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-significantterms-aggregation.html">Significant Terms Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-terms-aggregation"></a>Terms Aggregation</h2></div></div></div><p>A multi-bucket value source based aggregation where buckets are dynamically built - one per unique value.</p><p>Example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "genders" : {
            "terms" : { "field" : "gender" }
        }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations" : {
        "genders" : {
            "doc_count_error_upper_bound": 0, <a id="CO32-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            "sum_other_doc_count": 0, <a id="CO32-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
            "buckets" : [ <a id="CO32-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span>
                {
                    "key" : "male",
                    "doc_count" : 10
                },
                {
                    "key" : "female",
                    "doc_count" : 10
                },
            ]
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO32-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
an upper bound of the error on the document counts for each term, see <a class="link" href="search-aggregations-bucket-terms-aggregation.html#search-aggregations-bucket-terms-aggregation-approximate-counts" title="Document counts are approximate">below</a>
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO32-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
when there are lots of unique terms, elasticsearch only returns the top terms; this number is the sum of the document counts for all buckets that are not part of the response
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO32-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
the list of the top buckets, the meaning of <code class="literal">top</code> being defined by the <a class="link" href="search-aggregations-bucket-terms-aggregation.html#search-aggregations-bucket-terms-aggregation-order" title="Order">order</a>
</p></td></tr></tbody></table></div><p>By default, the <code class="literal">terms</code> aggregation will return the buckets for the top ten terms ordered by the <code class="literal">doc_count</code>. One can
change this default behaviour by setting the <code class="literal">size</code> parameter.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_size"></a>Size</h3></div></div></div><p>The <code class="literal">size</code> parameter can be set to define how many term buckets should be returned out of the overall terms list. By
default, the node coordinating the search process will request each shard to provide its own top <code class="literal">size</code> term buckets
and once all shards respond, it will reduce the results to the final list that will then be returned to the client.
This means that if the number of unique terms is greater than <code class="literal">size</code>, the returned list is slightly off and not accurate
(it could be that the term counts are slightly off and it could even be that a term that should have been in the top
size buckets was not returned). If set to <code class="literal">0</code>, the <code class="literal">size</code> will be set to <code class="literal">Integer.MAX_VALUE</code>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="search-aggregations-bucket-terms-aggregation-approximate-counts"></a>Document counts are approximate</h3></div></div></div><p>As described above, the document counts (and the results of any sub aggregations) in the terms aggregation are not always
accurate.  This is because each shard provides its own view of what the ordered list of terms should be and these are
combined to give a final view. Consider the following scenario:</p><p>A request is made to obtain the top 5 terms in the field product, ordered by descending document count from an index with
3 shards. In this case each shard is asked to give its top 5 terms.</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "products" : {
            "terms" : {
                "field" : "product",
                "size" : 5
            }
        }
    }
}</pre></div><p>The terms for each of the three shards are shown below with their
respective document counts in brackets:</p><div class="informaltable"><table cellpadding="4px" border="1" width="100%"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"></colgroup><thead><tr><th class="entry" align="center" valign="top">    </th><th class="entry" align="center" valign="top"> Shard A        </th><th class="entry" align="center" valign="top"> Shard B        </th><th class="entry" align="center" valign="top"> Shard C</th></tr></thead><tbody><tr><td class="entry" align="center" valign="top"><p>1</p></td><td class="entry" align="center" valign="top"><p>Product A (25)</p></td><td class="entry" align="center" valign="top"><p>Product A (30)</p></td><td class="entry" align="center" valign="top"><p>Product A (45)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>2</p></td><td class="entry" align="center" valign="top"><p>Product B (18)</p></td><td class="entry" align="center" valign="top"><p>Product B (25)</p></td><td class="entry" align="center" valign="top"><p>Product C (44)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>3</p></td><td class="entry" align="center" valign="top"><p>Product C (6)</p></td><td class="entry" align="center" valign="top"><p>Product F (17)</p></td><td class="entry" align="center" valign="top"><p>Product Z (36)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>4</p></td><td class="entry" align="center" valign="top"><p>Product D (3)</p></td><td class="entry" align="center" valign="top"><p>Product Z (16)</p></td><td class="entry" align="center" valign="top"><p>Product G (30)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>5</p></td><td class="entry" align="center" valign="top"><p>Product E (2)</p></td><td class="entry" align="center" valign="top"><p>Product G (15)</p></td><td class="entry" align="center" valign="top"><p>Product E (29)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>6</p></td><td class="entry" align="center" valign="top"><p>Product F (2)</p></td><td class="entry" align="center" valign="top"><p>Product H (14)</p></td><td class="entry" align="center" valign="top"><p>Product H (28)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>7</p></td><td class="entry" align="center" valign="top"><p>Product G (2)</p></td><td class="entry" align="center" valign="top"><p>Product I (10)</p></td><td class="entry" align="center" valign="top"><p>Product Q (2)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>8</p></td><td class="entry" align="center" valign="top"><p>Product H (2)</p></td><td class="entry" align="center" valign="top"><p>Product Q (6)</p></td><td class="entry" align="center" valign="top"><p>Product D (1)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>9</p></td><td class="entry" align="center" valign="top"><p>Product I (1)</p></td><td class="entry" align="center" valign="top"><p>Product J (8)</p></td><td class="entry" align="center" valign="top"><p></p></td></tr><tr><td class="entry" align="center" valign="top"><p>10</p></td><td class="entry" align="center" valign="top"><p>Product J (1)</p></td><td class="entry" align="center" valign="top"><p>Product C (4)</p></td><td class="entry" align="center" valign="top"><p></p></td></tr></tbody></table></div><p>The shards will return their top 5 terms so the results from the shards will be:</p><div class="informaltable"><table cellpadding="4px" border="1" width="100%"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"></colgroup><thead><tr><th class="entry" align="center" valign="top">    </th><th class="entry" align="center" valign="top"> Shard A        </th><th class="entry" align="center" valign="top"> Shard B        </th><th class="entry" align="center" valign="top"> Shard C</th></tr></thead><tbody><tr><td class="entry" align="center" valign="top"><p>1</p></td><td class="entry" align="center" valign="top"><p>Product A (25)</p></td><td class="entry" align="center" valign="top"><p>Product A (30)</p></td><td class="entry" align="center" valign="top"><p>Product A (45)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>2</p></td><td class="entry" align="center" valign="top"><p>Product B (18)</p></td><td class="entry" align="center" valign="top"><p>Product B (25)</p></td><td class="entry" align="center" valign="top"><p>Product C (44)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>3</p></td><td class="entry" align="center" valign="top"><p>Product C (6)</p></td><td class="entry" align="center" valign="top"><p>Product F (17)</p></td><td class="entry" align="center" valign="top"><p>Product Z (36)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>4</p></td><td class="entry" align="center" valign="top"><p>Product D (3)</p></td><td class="entry" align="center" valign="top"><p>Product Z (16)</p></td><td class="entry" align="center" valign="top"><p>Product G (30)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>5</p></td><td class="entry" align="center" valign="top"><p>Product E (2)</p></td><td class="entry" align="center" valign="top"><p>Product G (15)</p></td><td class="entry" align="center" valign="top"><p>Product E (29)</p></td></tr></tbody></table></div><p>Taking the top 5 results from each of the shards (as requested) and combining them to make a final top 5 list produces
the following:</p><div class="informaltable"><table cellpadding="4px" border="1" width="40%"><colgroup><col class="col_1"><col class="col_2"></colgroup><tbody><tr><td class="entry" align="center" valign="top"><p>1</p></td><td class="entry" align="center" valign="top"><p>Product A (100)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>2</p></td><td class="entry" align="center" valign="top"><p>Product Z (52)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>3</p></td><td class="entry" align="center" valign="top"><p>Product C (50)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>4</p></td><td class="entry" align="center" valign="top"><p>Product G (45)</p></td></tr><tr><td class="entry" align="center" valign="top"><p>5</p></td><td class="entry" align="center" valign="top"><p>Product B (43)</p></td></tr></tbody></table></div><p>Because Product A was returned from all shards we know that its document count value is accurate. Product C was only
returned by shards A and C so its document count is shown as 50 but this is not an accurate count. Product C exists on
shard B, but its count of 4 was not high enough to put Product C into the top 5 list for that shard. Product Z was also
returned only by 2 shards but the third shard does not contain the term. There is no way of knowing, at the point of
combining the results to produce the final list of terms, that there is an error in the document count for Product C and
not for Product Z. Product H has a document count of 44 across all 3 shards but was not included in the final list of
terms because it did not make it into the top five terms on any of the shards.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_shard_size"></a>Shard Size</h3></div></div></div><p>The higher the requested <code class="literal">size</code> is, the more accurate the results will be, but also, the more expensive it will be to
compute the final results (both due to bigger priority queues that are managed on a shard level and due to bigger data
transfers between the nodes and the client).</p><p>The <code class="literal">shard_size</code> parameter can be  used to minimize the extra work that comes with bigger requested <code class="literal">size</code>. When defined,
it will determine how many terms the coordinating node will request from each shard. Once all the shards responded, the
coordinating node will then reduce them to a final result which will be based on the <code class="literal">size</code> parameter - this way,
one can increase the accuracy of the returned terms and avoid the overhead of streaming a big list of buckets back to
the client. If set to <code class="literal">0</code>, the <code class="literal">shard_size</code> will be set to <code class="literal">Integer.MAX_VALUE</code>.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p><code class="literal">shard_size</code> cannot be smaller than <code class="literal">size</code> (as it doesnt make much sense). When it is, elasticsearch will
        override it and reset it to be equal to <code class="literal">size</code>.</p></div></div><p>It is possible to not limit the number of terms that are returned by setting <code class="literal">size</code> to <code class="literal">0</code>. Dont use this
on high-cardinality fields as this will kill both your CPU since terms need to be return sorted, and your network.</p><p>The default <code class="literal">shard_size</code> is a multiple of the <code class="literal">size</code> parameter which is dependant on the number of shards.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_calculating_document_count_error"></a>Calculating Document Count Error</h3></div></div></div><p>There are two error values which can be shown on the terms aggregation.  The first gives a value for the aggregation as
a whole which represents the maximum potential document count for a term which did not make it into the final list of
terms. This is calculated as the sum of the document count from the last term returned from each shard .For the example
given above the value would be 46 (2 + 15 + 29). This means that in the worst case scenario a term which was not returned
could have the 4th highest document count.</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations" : {
        "products" : {
            "doc_count_error_upper_bound" : 46,
            "buckets" : [
                {
                    "key" : "Product A",
                    "doc_count" : 100
                },
                {
                    "key" : "Product Z",
                    "doc_count" : 52
                },
                ...
            ]
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_per_bucket_document_count_error"></a>Per bucket document count error</h3></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p></div></div><p>The second error value can be enabled by setting the <code class="literal">show_term_doc_count_error</code> parameter to true. This shows an error value
for each term returned by the aggregation which represents the <span class="emphasis"><em>worst case</em></span> error in the document count and can be useful when
deciding on a value for the <code class="literal">shard_size</code> parameter. This is calculated by summing the document counts for the last term returned
by all shards which did not return the term. In the example above the error in the document count for Product C would be 15 as
Shard B was the only shard not to return the term and the document count of the last termit did return was 15. The actual document
count of Product C was 54 so the document count was only actually off by 4 even though the worst case was that it would be off by
15.  Product A, however has an error of 0 for its document count, since every shard returned it we can be confident that the count
returned is accurate.</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations" : {
        "products" : {
            "doc_count_error_upper_bound" : 46,
            "buckets" : [
                {
                    "key" : "Product A",
                    "doc_count" : 100,
                    "doc_count_error_upper_bound" : 0
                },
                {
                    "key" : "Product Z",
                    "doc_count" : 52,
                    "doc_count_error_upper_bound" : 2
                },
                ...
            ]
        }
    }
}</pre></div><p>These errors can only be calculated in this way when the terms are ordered by descending document count. When the aggregation is
ordered by the terms values themselves (either ascending or descending) there is no error in the document count since if a shard
does not return a particular term which appears in the results from another shard, it must not have that term in its index. When the
aggregation is either sorted by a sub aggregation or in order of ascending document count, the error in the document counts cannot be
determined and is given a value of -1 to indicate this.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="search-aggregations-bucket-terms-aggregation-order"></a>Order</h3></div></div></div><p>The order of the buckets can be customized by setting the <code class="literal">order</code> parameter. By default, the buckets are ordered by
their <code class="literal">doc_count</code> descending. It is also possible to change this behaviour as follows:</p><p>Ordering the buckets by their <code class="literal">doc_count</code> in an ascending manner:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "genders" : {
            "terms" : {
                "field" : "gender",
                "order" : { "_count" : "asc" }
            }
        }
    }
}</pre></div><p>Ordering the buckets alphabetically by their terms in an ascending manner:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "genders" : {
            "terms" : {
                "field" : "gender",
                "order" : { "_term" : "asc" }
            }
        }
    }
}</pre></div><p>Ordering the buckets by single value metrics sub-aggregation (identified by the aggregation name):</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "genders" : {
            "terms" : {
                "field" : "gender",
                "order" : { "avg_height" : "desc" }
            },
            "aggs" : {
                "avg_height" : { "avg" : { "field" : "height" } }
            }
        }
    }
}</pre></div><p>Ordering the buckets by multi value metrics sub-aggregation (identified by the aggregation name):</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "genders" : {
            "terms" : {
                "field" : "gender",
                "order" : { "height_stats.avg" : "desc" }
            },
            "aggs" : {
                "height_stats" : { "stats" : { "field" : "height" } }
            }
        }
    }
}</pre></div><p>It is also possible to order the buckets based on a "deeper" aggregation in the hierarchy. This is supported as long
as the aggregations path are of a single-bucket type, where the last aggregation in the path may either be a single-bucket
one or a metrics one. If its a single-bucket type, the order will be defined by the number of docs in the bucket (i.e. <code class="literal">doc_count</code>),
in case its a metrics one, the same rules as above apply (where the path must indicate the metric name to sort by in case of
a multi-value metrics aggregation, and in case of a single-value metrics aggregation the sort will be applied on that value).</p><p>The path must be defined in the following form:</p><pre class="screen">AGG_SEPARATOR       :=  '&gt;'
METRIC_SEPARATOR    :=  '.'
AGG_NAME            :=  &lt;the name of the aggregation&gt;
METRIC              :=  &lt;the name of the metric (in case of multi-value metrics aggregation)&gt;
PATH                :=  &lt;AGG_NAME&gt;[&lt;AGG_SEPARATOR&gt;&lt;AGG_NAME&gt;]*[&lt;METRIC_SEPARATOR&gt;&lt;METRIC&gt;]</pre><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "countries" : {
            "terms" : {
                "field" : "address.country",
                "order" : { "females&gt;height_stats.avg" : "desc" }
            },
            "aggs" : {
                "females" : {
                    "filter" : { "term" : { "gender" :  "female" }},
                    "aggs" : {
                        "height_stats" : { "stats" : { "field" : "height" }}
                    }
                }
            }
        }
    }
}</pre></div><p>The above will sort the countries buckets based on the average height among the female population.</p><p>Multiple criteria can be used to order the buckets by providing an array of order criteria such as the following:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "countries" : {
            "terms" : {
                "field" : "address.country",
                "order" : [ { "females&gt;height_stats.avg" : "desc" }, { "_count" : "desc" } ]
            },
            "aggs" : {
                "females" : {
                    "filter" : { "term" : { "gender" : { "female" }}},
                    "aggs" : {
                        "height_stats" : { "stats" : { "field" : "height" }}
                    }
                }
            }
        }
    }
}</pre></div><p>The above will sort the countries buckets based on the average height among the female population and then by
their <code class="literal">doc_count</code> in descending order.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>In the event that two buckets share the same values for all order criteria the buckets term value is used as a
tie-breaker in ascending alphabetical order to prevent non-deterministic ordering of buckets.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_minimum_document_count"></a>Minimum document count</h3></div></div></div><p>It is possible to only return terms that match more than a configured number of hits using the <code class="literal">min_doc_count</code> option:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "tags" : {
            "terms" : {
                "field" : "tags",
                "min_doc_count": 10
            }
        }
    }
}</pre></div><p>The above aggregation would only return tags which have been found in 10 hits or more. Default value is <code class="literal">1</code>.</p><p>Terms are collected and ordered on a shard level and merged with the terms collected from other shards in a second step. However, the shard does not have the information about the global document count available. The decision if a term is added to a candidate list depends only on the order computed on the shard using local shard frequencies. The <code class="literal">min_doc_count</code> criterion is only applied after merging local terms statistics of all shards. In a way the decision to add the term as a candidate is made without being very <span class="emphasis"><em>certain</em></span> about if the term will actually reach the required <code class="literal">min_doc_count</code>. This might cause many (globally) high frequent terms to be missing in the final result if low frequent terms populated the candidate lists. To avoid this, the <code class="literal">shard_size</code> parameter can be increased to allow more candidate terms on the shards. However, this increases memory consumption and network traffic.</p><p><code class="literal">shard_min_doc_count</code> parameter</p><p>The parameter <code class="literal">shard_min_doc_count</code> regulates the <span class="emphasis"><em>certainty</em></span> a shard has if the term should actually be added to the candidate list or not with respect to the <code class="literal">min_doc_count</code>. Terms will only be considered if their local shard frequency within the set is higher than the <code class="literal">shard_min_doc_count</code>. If your dictionary contains many low frequent terms and you are not interested in those (for example misspellings), then you can set the <code class="literal">shard_min_doc_count</code> parameter to filter out candidate terms on a shard level that will with a reasonable certainty not reach the required <code class="literal">min_doc_count</code> even after merging the local counts. <code class="literal">shard_min_doc_count</code> is set to <code class="literal">0</code> per default and has no effect unless you explicitly set it.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Setting <code class="literal">min_doc_count</code>=<code class="literal">0</code> will also return buckets for terms that didnt match any hit. However, some of
         the returned terms which have a document count of zero might only belong to deleted documents or documents
         from other types, so there is no warranty that a <code class="literal">match_all</code> query would find a positive document count for
         those terms.</p></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>When NOT sorting on <code class="literal">doc_count</code> descending, high values of <code class="literal">min_doc_count</code> may return a number of buckets
         which is less than <code class="literal">size</code> because not enough data was gathered from the shards. Missing buckets can be
         back by increasing <code class="literal">shard_size</code>.
         Setting <code class="literal">shard_min_doc_count</code> too high will cause terms to be filtered out on a shard level. This value should be set much lower than <code class="literal">min_doc_count/#shards</code>.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="search-aggregations-bucket-terms-aggregation-script"></a>Script</h3></div></div></div><p>Generating the terms using a script:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "genders" : {
            "terms" : {
                "script" : "doc['gender'].value"
            }
        }
    }
}</pre></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The <code class="literal">script</code> parameter expects an inline script. Use <code class="literal">script_id</code> for indexed scripts and <code class="literal">script_file</code> for scripts in the <code class="literal">config/scripts/</code> directory.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_value_script_7"></a>Value Script</h3></div></div></div><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "genders" : {
            "terms" : {
                "field" : "gender",
                "script" : "'Gender: ' +_value"
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_filtering_values"></a>Filtering Values</h3></div></div></div><p>It is possible to filter the values for which buckets will be created. This can be done using the <code class="literal">include</code> and
<code class="literal">exclude</code> parameters which are based on regular expression strings or arrays of exact values.</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "tags" : {
            "terms" : {
                "field" : "tags",
                "include" : ".*sport.*",
                "exclude" : "water_.*"
            }
        }
    }
}</pre></div><p>In the above example, buckets will be created for all the tags that has the word <code class="literal">sport</code> in them, except those starting
with <code class="literal">water_</code> (so the tag <code class="literal">water_sports</code> will no be aggregated). The <code class="literal">include</code> regular expression will determine what
values are "allowed" to be aggregated, while the <code class="literal">exclude</code> determines the values that should not be aggregated. When
both are defined, the <code class="literal">exclude</code> has precedence, meaning, the <code class="literal">include</code> is evaluated first and only then the <code class="literal">exclude</code>.</p><p>The regular expression are based on the Java <a class="ulink" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html" target="_top">Pattern</a>,
and as such, they it is also possible to pass in flags that will determine how the compiled regular expression will work:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "tags" : {
             "terms" : {
                 "field" : "tags",
                 "include" : {
                     "pattern" : ".*sport.*",
                     "flags" : "CANON_EQ|CASE_INSENSITIVE" <a id="CO33-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                 },
                 "exclude" : {
                     "pattern" : "water_.*",
                     "flags" : "CANON_EQ|CASE_INSENSITIVE"
                 }
             }
         }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO33-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
the flags are concatenated using the <code class="literal">|</code> character as a separator
</p></td></tr></tbody></table></div><p>The possible flags that can be used are:
<a class="ulink" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#CANON_EQ" target="_top"><code class="literal">CANON_EQ</code></a>,
<a class="ulink" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#CASE_INSENSITIVE" target="_top"><code class="literal">CASE_INSENSITIVE</code></a>,
<a class="ulink" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#COMMENTS" target="_top"><code class="literal">COMMENTS</code></a>,
<a class="ulink" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#DOTALL" target="_top"><code class="literal">DOTALL</code></a>,
<a class="ulink" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#LITERAL" target="_top"><code class="literal">LITERAL</code></a>,
<a class="ulink" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#MULTILINE" target="_top"><code class="literal">MULTILINE</code></a>,
<a class="ulink" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#UNICODE_CASE" target="_top"><code class="literal">UNICODE_CASE</code></a>,
<a class="ulink" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#UNICODE_CHARACTER_CLASS" target="_top"><code class="literal">UNICODE_CHARACTER_CLASS</code></a> and
<a class="ulink" href="http://docs.oracle.com/javase/7/docs/api/java/util/regex/Pattern.html#UNIX_LINES" target="_top"><code class="literal">UNIX_LINES</code></a></p><p>For matching based on exact values the <code class="literal">include</code> and <code class="literal">exclude</code> parameters can simply take an array of
strings that represent the terms as they are found in the index:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "JapaneseCars" : {
             "terms" : {
                 "field" : "make",
                 "include" : ["mazda", "honda"]
             }
         },
        "ActiveCarManufacturers" : {
             "terms" : {
                 "field" : "make",
                 "exclude" : ["rover", "jensen"]
             }
         }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_multi_field_terms_aggregation"></a>Multi-field terms aggregation</h3></div></div></div><p>The <code class="literal">terms</code> aggregation does not support collecting terms from multiple fields
in the same document.  The reason is that the <code class="literal">terms</code> agg doesnt collect the
string term values themselves, but rather uses
<a class="link" href="search-aggregations-bucket-terms-aggregation.html#search-aggregations-bucket-terms-aggregation-execution-hint" title="Execution hint">global ordinals</a>
to produce a list of all of the unique values in the field.  Global ordinals
results in an important performance boost which would not be possible across
multiple fields.</p><p>There are two approaches that you can use to perform a <code class="literal">terms</code> agg across
multiple fields:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a class="link" href="search-aggregations-bucket-terms-aggregation.html#search-aggregations-bucket-terms-aggregation-script" title="Script">Script</a>
</span></dt><dd>
Use a script to retrieve terms from multiple fields.  This disables the global
ordinals optimization and will be slower than collecting terms from a single
field, but it gives you the flexibility to implement this option at search
time.
</dd><dt><span class="term">
<a class="link" href="mapping-core-types.html#copy-to" title="Copy to fieldedit"><code class="literal">copy_to</code> field</a>
</span></dt><dd>
If you know ahead of time that you want to collect the terms from two or more
fields, then use <code class="literal">copy_to</code> in your mapping to create a new dedicated field at
index time which contains the values from both fields.  You can aggregate on
this single field, which will benefit from the global ordinals optimization.
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_collect_mode"></a>Collect mode</h3></div></div></div><p>Deferring calculation of child aggregations</p><p>For fields with many unique terms and a small number of required results it can be more efficient to delay the calculation
of child aggregations until the top parent-level aggs have been pruned. Ordinarily, all branches of the aggregation tree
are expanded in one depth-first pass and only then any pruning occurs. In some rare scenarios this can be very wasteful and can hit memory constraints.
An example problem scenario is querying a movie database for the 10 most popular actors and their 5 most common co-stars:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "actors" : {
             "terms" : {
                 "field" : "actors",
                 "size" : 10
             },
            "aggs" : {
                "costars" : {
                     "terms" : {
                         "field" : "actors",
                         "size" : 5
                     }
                 }
            }
         }
    }
}</pre></div><p>Even though the number of movies may be comparatively small and we want only 50 result buckets there is a combinatorial explosion of buckets
during calculation - a single movie will produce n buckets where n is the number of actors. The sane option would be to first determine
the 10 most popular actors and only then examine the top co-stars for these 10 actors. This alternative strategy is what we call the <code class="literal">breadth_first</code> collection
mode as opposed to the default <code class="literal">depth_first</code> mode:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "actors" : {
             "terms" : {
                 "field" : "actors",
                 "size" : 10,
                 "collect_mode" : "breadth_first"
             },
            "aggs" : {
                "costars" : {
                     "terms" : {
                         "field" : "actors",
                         "size" : 5
                     }
                 }
            }
         }
    }
}</pre></div><p>When using <code class="literal">breadth_first</code> mode the set of documents that fall into the uppermost buckets are
cached for subsequent replay so there is a memory overhead in doing this which is linear with the number of matching documents.
In most requests the volume of buckets generated is smaller than the number of documents that fall into them so the default <code class="literal">depth_first</code>
collection mode is normally the best bet but occasionally the <code class="literal">breadth_first</code> strategy can be significantly more efficient. Currently
elasticsearch will always use the <code class="literal">depth_first</code> collect_mode unless explicitly instructed to use <code class="literal">breadth_first</code> as in the above example.
Note that the <code class="literal">order</code> parameter can still be used to refer to data from a child aggregation when using the <code class="literal">breadth_first</code> setting - the parent
aggregation understands that this child aggregation will need to be called first before any of the other child aggregations.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>It is not possible to nest aggregations such as <code class="literal">top_hits</code> which require access to match score information under an aggregation that uses
the <code class="literal">breadth_first</code> collection mode. This is because this would require a RAM buffer to hold the float score value for every document and
this would typically be too costly in terms of RAM.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="search-aggregations-bucket-terms-aggregation-execution-hint"></a>Execution hint</h3></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p></div></div><p>There are different mechanisms by which terms aggregations can be executed:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
by using field values directly in order to aggregate data per-bucket (<code class="literal">map</code>)
</li><li class="listitem">
by using ordinals of the field and preemptively allocating one bucket per ordinal value (<code class="literal">global_ordinals</code>)
</li><li class="listitem">
by using ordinals of the field and dynamically allocating one bucket per ordinal value (<code class="literal">global_ordinals_hash</code>)
</li><li class="listitem">
by using per-segment ordinals to compute counts and remap these counts to global counts using global ordinals (<code class="literal">global_ordinals_low_cardinality</code>)
</li></ul></div><p>Elasticsearch tries to have sensible defaults so this is something that generally doesnt need to be configured.</p><p><code class="literal">map</code> should only be considered when very few documents match a query. Otherwise the ordinals-based execution modes
are significantly faster. By default, <code class="literal">map</code> is only used when running an aggregation on scripts, since they dont have
ordinals.</p><p><code class="literal">global_ordinals_low_cardinality</code> only works for leaf terms aggregations but is usually the fastest execution mode. Memory
usage is linear with the number of unique values in the field, so it is only enabled by default on low-cardinality fields.</p><p><code class="literal">global_ordinals</code> is the second fastest option, but the fact that it preemptively allocates buckets can be memory-intensive,
especially if you have one or more sub aggregations. It is used by default on top-level terms aggregations.</p><p><code class="literal">global_ordinals_hash</code> on the contrary to <code class="literal">global_ordinals</code> and <code class="literal">global_ordinals_low_cardinality</code> allocates buckets dynamically
so memory usage is linear to the number of values of the documents that are part of the aggregation scope. It is used by default
in inner aggregations.</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "tags" : {
             "terms" : {
                 "field" : "tags",
                 "execution_hint": "map" <a id="CO34-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
             }
         }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO34-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
<span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span> the possible values are <code class="literal">map</code>, <code class="literal">global_ordinals</code>, <code class="literal">global_ordinals_hash</code> and <code class="literal">global_ordinals_low_cardinality</code>
</p></td></tr></tbody></table></div><p>Please note that Elasticsearch will ignore this execution hint if it is not applicable and that there is no backward compatibility guarantee on these hints.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Significant Terms Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-terms-aggregation.html">
              &nbsp;
              Terms Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-range-aggregation.html">Range Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-significantterms-aggregation"></a>Significant Terms Aggregation</h2></div></div></div><p>An aggregation that returns interesting or unusual occurrences of terms in a set.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p></div></div><div class="itemizedlist"><p class="title"><strong>Example use cases:</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
Suggesting "H5N1" when users search for "bird flu" in text
</li><li class="listitem">
Identifying the merchant that is the "common point of compromise" from the transaction history of credit card owners reporting loss
</li><li class="listitem">
Suggesting keywords relating to stock symbol $ATI for an automated news classifier
</li><li class="listitem">
Spotting the fraudulent doctor who is diagnosing more than his fair share of whiplash injuries
</li><li class="listitem">
Spotting the tire manufacturer who has a disproportionate number of blow-outs
</li></ul></div><p>In all these cases the terms being selected are not simply the most popular terms in a set.
They are the terms that have undergone a significant change in popularity measured between a <span class="emphasis"><em>foreground</em></span> and <span class="emphasis"><em>background</em></span> set.
If the term "H5N1" only exists in 5 documents in a 10 million document index and yet is found in 4 of the 100 documents that make up a users search results
that is significant and probably very relevant to their search. 5/10,000,000 vs 4/100 is a big swing in frequency.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_single_set_analysis"></a>Single-set analysis</h3></div></div></div><p>In the simplest case, the <span class="emphasis"><em>foreground</em></span> set of interest is the search results matched by a query and the <span class="emphasis"><em>background</em></span>
set used for statistical comparisons is the index or indices from which the results were gathered.</p><p>Example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "terms" : {"force" : [ "British Transport Police" ]}
    },
    "aggregations" : {
        "significantCrimeTypes" : {
            "significant_terms" : { "field" : "crime_type" }
        }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations" : {
        "significantCrimeTypes" : {
            "doc_count": 47347,
            "buckets" : [
                {
                    "key": "Bicycle theft",
                    "doc_count": 3640,
                    "score": 0.371235374214817,
                    "bg_count": 66799
                }
                ...
            ]
        }
    }
}</pre></div><p>When querying an index of all crimes from all police forces, what these results show is that the British Transport Police force
stand out as a force dealing with a disproportionately large number of bicycle thefts. Ordinarily, bicycle thefts represent only 1% of crimes (66799/5064554)
but for the British Transport Police, who handle crime on railways and stations, 7% of crimes (3640/47347) is
a bike theft. This is a significant seven-fold increase in frequency and so this anomaly was highlighted as the top crime type.</p><p>The problem with using a query to spot anomalies is it only gives us one subset to use for comparisons.
To discover all the other police forces' anomalies we would have to repeat the query for each of the different forces.</p><p>This can be a tedious way to look for unusual patterns in an index</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_multi_set_analysis"></a>Multi-set analysis</h3></div></div></div><p>A simpler way to perform analysis across multiple categories is to use a parent-level aggregation to segment the data ready for analysis.</p><p>Example using a parent aggregation for segmentation:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggregations": {
        "forces": {
            "terms": {"field": "force"},
            "aggregations": {
                "significantCrimeTypes": {
                    "significant_terms": {"field": "crime_type"}
                }
            }
        }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
 ...

 "aggregations": {
    "forces": {
        "buckets": [
            {
                "key": "Metropolitan Police Service",
                "doc_count": 894038,
                "significantCrimeTypes": {
                    "doc_count": 894038,
                    "buckets": [
                        {
                            "key": "Robbery",
                            "doc_count": 27617,
                            "score": 0.0599,
                            "bg_count": 53182
                        },
                        ...
                    ]
                }
            },
            {
                "key": "British Transport Police",
                "doc_count": 47347,
                "significantCrimeTypes": {
                    "doc_count": 47347,
                    "buckets": [
                        {
                            "key": "Bicycle theft",
                            "doc_count": 3640,
                            "score": 0.371,
                            "bg_count": 66799
                        },
                        ...
                    ]
                }
            }
        ]
    }
}</pre></div><p>Now we have anomaly detection for each of the police forces using a single request.</p><p>We can use other forms of top-level aggregations to segment our data, for example segmenting by geographic
area to identify unusual hot-spots of a particular crime type:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs": {
        "hotspots": {
            "geohash_grid" : {
                "field":"location",
                "precision":5,
            },
            "aggs": {
                "significantCrimeTypes": {
                    "significant_terms": {"field": "crime_type"}
                }
            }
        }
    }
}</pre></div><p>This example uses the <code class="literal">geohash_grid</code> aggregation to create result buckets that represent geographic areas, and inside each
bucket we can identify anomalous levels of a crime type in these tightly-focused areas e.g.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Airports exhibit unusual numbers of weapon confiscations
</li><li class="listitem">
Universities show uplifts of bicycle thefts
</li></ul></div><p>At a higher geohash_grid zoom-level with larger coverage areas we would start to see where an entire police-force may be
tackling an unusual volume of a particular crime type.</p><p>Obviously a time-based top-level segmentation would help identify current trends for each point in time
where a simple <code class="literal">terms</code> aggregation would typically show the very popular "constants" that persist across all time slots.</p><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>How are the scores calculated?</strong></p></div></div></div><p>The numbers returned for scores are primarily intended for ranking different suggestions sensibly rather than something easily understood by end users. The scores are derived from the doc frequencies in <span class="emphasis"><em>foreground</em></span> and <span class="emphasis"><em>background</em></span> sets. In brief, a term is considered significant if there is a noticeable difference in the frequency in which a term appears in the subset and in the background. The way the terms are ranked can be configured, see "Parameters" section.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_use_on_free_text_fields"></a>Use on free-text fields</h3></div></div></div><p>The significant_terms aggregation can be used effectively on tokenized free-text fields to suggest:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
keywords for refining end-user searches
</li><li class="listitem">
keywords for use in percolator queries
</li></ul></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Picking a free-text field as the subject of a significant terms analysis can be expensive! It will attempt
to load every unique word into RAM. It is recommended to only use this on smaller indices.</p></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Use the <span class="emphasis"><em>"like this but not this"</em></span> pattern</strong></p></div></div></div><p>You can spot mis-categorized content by first searching a structured field e.g. <code class="literal">category:adultMovie</code> and use significant_terms on the
free-text "movie_description" field. Take the suggested words (Ill leave them to your imagination) and then search for all movies NOT marked as category:adultMovie but containing these keywords.
You now have a ranked list of badly-categorized movies that you should reclassify or at least remove from the "familyFriendly" category.</p><p>The significance score from each term can also provide a useful <code class="literal">boost</code> setting to sort matches.
Using the <code class="literal">minimum_should_match</code> setting of the <code class="literal">terms</code> query with the keywords will help control the balance of precision/recall in the result set i.e
a high setting would have a small number of relevant results packed full of keywords and a setting of "1" would produce a more exhaustive results set with all documents containing <span class="emphasis"><em>any</em></span> keyword.</p></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p class="formalpara"><strong>Show significant_terms in context.&nbsp;</strong>Free-text significant_terms are much more easily understood when viewed in context. Take the results of <code class="literal">significant_terms</code> suggestions from a
free-text field and use them in a <code class="literal">terms</code> query on the same field with a <code class="literal">highlight</code> clause to present users with example snippets of documents. When the terms
are presented unstemmed, highlighted, with the right case, in the right order and with some context, their significance/meaning is more readily apparent.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_custom_background_sets"></a>Custom background sets</h3></div></div></div><p>Ordinarily, the foreground set of documents is "diffed" against a background set of all the documents in your index.
However, sometimes it may prove useful to use a narrower background set as the basis for comparisons.
For example, a query on documents relating to "Madrid" in an index with content from all over the world might reveal that "Spanish"
was a significant term. This may be true but if you want some more focused terms you could use a <code class="literal">background_filter</code>
on the term <span class="emphasis"><em>spain</em></span> to establish a narrower set of documents as context. With this as a background "Spanish" would now
be seen as commonplace and therefore not as significant as words like "capital" that relate more strongly with Madrid.
Note that using a background filter will slow things down - each terms background frequency must now be derived on-the-fly from filtering posting lists rather than reading the indexs pre-computed count for a term.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_limitations"></a>Limitations</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_significant_terms_must_be_indexed_values"></a>Significant terms must be indexed values</h4></div></div></div><p>Unlike the terms aggregation it is currently not possible to use script-generated terms for counting purposes.
Because of the way the significant_terms aggregation must consider both <span class="emphasis"><em>foreground</em></span> and <span class="emphasis"><em>background</em></span> frequencies
it would be prohibitively expensive to use a script on the entire index to obtain background frequencies for comparisons.
Also DocValues are not supported as sources of term data for similar reasons.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_no_analysis_of_floating_point_fields"></a>No analysis of floating point fields</h4></div></div></div><p>Floating point fields are currently not supported as the subject of significant_terms analysis.
While integer or long fields can be used to represent concepts like bank account numbers or category numbers which
can be interesting to track, floating point fields are usually used to represent quantities of something.
As such, individual floating point terms are not useful for this form of frequency analysis.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_use_as_a_parent_aggregation"></a>Use as a parent aggregation</h4></div></div></div><p>If there is the equivalent of a <code class="literal">match_all</code> query or no query criteria providing a subset of the index the significant_terms aggregation should not be used as the
top-most aggregation - in this scenario the <span class="emphasis"><em>foreground</em></span> set is exactly the same as the <span class="emphasis"><em>background</em></span> set and
so there is no difference in document frequencies to observe and from which to make sensible suggestions.</p><p>Another consideration is that  the significant_terms aggregation produces many candidate results at shard level
that are only later pruned on the reducing node once all statistics from all shards are merged. As a result,
it can be inefficient and costly in terms of RAM to embed large child aggregations under a significant_terms
aggregation that later discards many candidate terms. It is advisable in these cases to perform two searches - the first to provide a rationalized list of
significant_terms and then add this shortlist of terms to a second query to go back and fetch the required child aggregations.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_approximate_counts"></a>Approximate counts</h4></div></div></div><p>The counts of how many documents contain a term provided in results are based on summing the samples returned from each shard and
as such may be:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
low if certain shards did not provide figures for a given term in their top sample
</li><li class="listitem">
high when considering the background frequency as it may count occurrences found in deleted documents
</li></ul></div><p>Like most design decisions, this is the basis of a trade-off in which we have chosen to provide fast performance at the cost of some (typically small) inaccuracies.
However, the <code class="literal">size</code> and <code class="literal">shard size</code> settings covered in the next section provide tools to help control the accuracy levels.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_parameters_6"></a>Parameters</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_jlh_score"></a>JLH score</h4></div></div></div><p>The scores are derived from the doc frequencies in <span class="emphasis"><em>foreground</em></span> and <span class="emphasis"><em>background</em></span> sets. The <span class="emphasis"><em>absolute</em></span> change in popularity (foregroundPercent - backgroundPercent) would favor common terms whereas the <span class="emphasis"><em>relative</em></span> change in popularity (foregroundPercent/ backgroundPercent) would favor rare terms. Rare vs common is essentially a precision vs recall balance and so the absolute and relative changes are multiplied to provide a sweet spot between precision and recall.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_mutual_information"></a>mutual information</h4></div></div></div><p>Mutual information as described in "Information Retrieval", Manning et al., Chapter 13.5.1 can be used as significance score by adding the parameter</p><div class="pre_wrapper"><pre class="programlisting">         "mutual_information": {
              "include_negatives": true
         }</pre></div><p>Mutual information does not differentiate between terms that are descriptive for the subset or for documents outside the subset. The significant terms therefore can contain terms that appear more or less frequent in the subset than outside the subset. To filter out the terms that appear less often in the subset than in documents outside the subset, <code class="literal">include_negatives</code> can be set to <code class="literal">false</code>.</p><p>Per default, the assumption is that the documents in the bucket are also contained in the background. If instead you defined a custom background filter that represents a different set of documents that you want to compare to, set</p><div class="pre_wrapper"><pre class="programlisting">"background_is_superset": false</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_chi_square"></a>Chi square</h4></div></div></div><p>Chi square as described in "Information Retrieval", Manning et al., Chapter 13.5.2 can be used as significance score by adding the parameter</p><div class="pre_wrapper"><pre class="programlisting">         "chi_square": {
         }</pre></div><p>Chi square behaves like mutual information and can be configured with the same parameters <code class="literal">include_negatives</code> and <code class="literal">background_is_superset</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_google_normalized_distance"></a>google normalized distance</h4></div></div></div><p>Google normalized distance  as described in "The Google Similarity Distance", Cilibrasi and Vitanyi, 2007 (<a class="ulink" href="http://arxiv.org/pdf/cs/0412098v3.pdf" target="_top">http://arxiv.org/pdf/cs/0412098v3.pdf</a>) can be used as significance score by adding the parameter</p><div class="pre_wrapper"><pre class="programlisting">         "gnd": {
         }</pre></div><p><code class="literal">gnd</code> also accepts the <code class="literal">background_is_superset</code> parameter.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_percentage"></a>Percentage</h4></div></div></div><p>A simple calculation of the number of documents in the foreground sample with a term divided by the number of documents in the background with the term.
By default this produces a score greater than zero and less than one.</p><p>The benefit of this heuristic is that the scoring logic is simple to explain to anyone familiar with a "per capita" statistic. However, for fields with high cardinality there is a tendency for this heuristic to select the rarest terms such as typos that occur only once because they score 1/1 = 100%.</p><p>It would be hard for a seasoned boxer to win a championship if the prize was awarded purely on the basis of percentage of fights won - by these rules a newcomer with only one fight under his belt would be impossible to beat.
Multiple observations are typically required to reinforce a view so it is recommended in these cases to set both <code class="literal">min_doc_count</code> and <code class="literal">shard_min_doc_count</code> to a higher value such as 10 in order to filter out the low-frequency terms that otherwise take precedence.</p><div class="pre_wrapper"><pre class="programlisting">         "percentage": {
         }</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_which_one_is_best"></a>Which one is best?</h4></div></div></div><p>Roughly, <code class="literal">mutual_information</code> prefers high frequent terms even if they occur also frequently in the background. For example, in an analysis of natural language text this might lead to selection of stop words. <code class="literal">mutual_information</code> is unlikely to select very rare terms like misspellings. <code class="literal">gnd</code> prefers terms with a high co-occurence and avoids selection of stopwords. It might be better suited for synonym detection. However, <code class="literal">gnd</code> has a tendency to select very rare terms that are, for example, a result of misspelling. <code class="literal">chi_square</code> and <code class="literal">jlh</code> are somewhat in-between.</p><p>It is hard to say which one of the different heuristics will be the best choice as it depends on what the significant terms are used for (see for example [Yang and Pedersen, "A Comparative Study on Feature Selection in Text Categorization", 1997](<a class="ulink" href="http://courses.ischool.berkeley.edu/i256/f06/papers/yang97comparative.pdf" target="_top">http://courses.ischool.berkeley.edu/i256/f06/papers/yang97comparative.pdf</a>) for a study on using significant terms for feature selection for text classification).</p><p>If none of the above measures suits your usecase than another option is to implement a custom significance measure:</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_scripted"></a>scripted</h4></div></div></div><p>Customized scores can be implemented via a script:</p><div class="pre_wrapper"><pre class="programlisting">            "script_heuristic": {
              "script": "_subset_freq/(_superset_freq - _subset_freq + 1)"
            }</pre></div><p>Scripts can be inline (as in above example), indexed or stored on disk. For details on the options, see <a class="link" href="modules-scripting.html" title="Scripting">script documentation</a>.
Parameters need to be set as follows:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">script</code>
</p>
</td><td class="entry" valign="top">
<p>
Inline script, name of script file or name of indexed script. Mandatory.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">script_type</code>
</p>
</td><td class="entry" valign="top">
<p>
One of "inline" (default), "indexed" or "file".
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">lang</code>
</p>
</td><td class="entry" valign="top">
<p>
Script language (default "groovy")
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">params</code>
</p>
</td><td class="entry" valign="top">
<p>
Script parameters (default empty).
</p>
</td></tr></tbody></table></div><p>Available parameters in the script are</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">_subset_freq</code>
</p>
</td><td class="entry" valign="top">
<p>
Number of documents the term appears in in the subset.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">_superset_freq</code>
</p>
</td><td class="entry" valign="top">
<p>
Number of documents the term appears in in the superset.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">_subset_size</code>
</p>
</td><td class="entry" valign="top">
<p>
Number of documents in the subset.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">_superset_size</code>
</p>
</td><td class="entry" valign="top">
<p>
Number of documents in the superset.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_size_amp_shard_size"></a>Size &amp; Shard Size</h4></div></div></div><p>The <code class="literal">size</code> parameter can be set to define how many term buckets should be returned out of the overall terms list. By
default, the node coordinating the search process will request each shard to provide its own top term buckets
and once all shards respond, it will reduce the results to the final list that will then be returned to the client.
If the number of unique terms is greater than <code class="literal">size</code>, the returned list can be slightly off and not accurate
(it could be that the term counts are slightly off and it could even be that a term that should have been in the top
size buckets was not returned).</p><p>If set to <code class="literal">0</code>, the <code class="literal">size</code> will be set to <code class="literal">Integer.MAX_VALUE</code>.</p><p>To ensure better accuracy a multiple of the final <code class="literal">size</code> is used as the number of terms to request from each shard
using a heuristic based on the number of shards. To take manual control of this setting the <code class="literal">shard_size</code> parameter
can be  used to control the volumes of candidate terms produced by each shard.</p><p>Low-frequency terms can turn out to be the most interesting ones once all results are combined so the
significant_terms aggregation can produce higher-quality results when the <code class="literal">shard_size</code> parameter is set to
values significantly higher than the <code class="literal">size</code> setting. This ensures that a bigger volume of promising candidate terms are given
a consolidated review by the reducing node before the final selection. Obviously large candidate term lists
will cause extra network traffic and RAM usage so this is  quality/cost trade off that needs to be balanced.  If <code class="literal">shard_size</code> is set to -1 (the default) then <code class="literal">shard_size</code> will be automatically estimated based on the number of shards and the <code class="literal">size</code> parameter.</p><p>If set to <code class="literal">0</code>, the <code class="literal">shard_size</code> will be set to <code class="literal">Integer.MAX_VALUE</code>.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p><code class="literal">shard_size</code> cannot be smaller than <code class="literal">size</code> (as it doesnt make much sense). When it is, elasticsearch will
        override it and reset it to be equal to <code class="literal">size</code>.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_minimum_document_count_2"></a>Minimum document count</h4></div></div></div><p>It is possible to only return terms that match more than a configured number of hits using the <code class="literal">min_doc_count</code> option:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "tags" : {
            "significant_terms" : {
                "field" : "tag",
                "min_doc_count": 10
            }
        }
    }
}</pre></div><p>The above aggregation would only return tags which have been found in 10 hits or more. Default value is <code class="literal">3</code>.</p><p>Terms that score highly will be collected on a shard level and merged with the terms collected from other shards in a second step. However, the shard does not have the information about the global term frequencies available. The decision if a term is added to a candidate list depends only on the score computed on the shard using local shard frequencies, not the global frequencies of the word. The <code class="literal">min_doc_count</code> criterion is only applied after merging local terms statistics of all shards. In a way the decision to add the term as a candidate is made without being very <span class="emphasis"><em>certain</em></span> about if the term will actually reach the required <code class="literal">min_doc_count</code>. This might cause many (globally) high frequent terms to be missing in the final result if low frequent but high scoring terms populated the candidate lists. To avoid this, the <code class="literal">shard_size</code> parameter can be increased to allow more candidate terms on the shards. However, this increases memory consumption and network traffic.</p><p><code class="literal">shard_min_doc_count</code> parameter</p><p>The parameter <code class="literal">shard_min_doc_count</code> regulates the <span class="emphasis"><em>certainty</em></span> a shard has if the term should actually be added to the candidate list or not with respect to the <code class="literal">min_doc_count</code>. Terms will only be considered if their local shard frequency within the set is higher than the <code class="literal">shard_min_doc_count</code>. If your dictionary contains many low frequent words and you are not interested in these (for example misspellings), then you can set the <code class="literal">shard_min_doc_count</code> parameter to filter out candidate terms on a shard level that will with a reasonable certainty not reach the required <code class="literal">min_doc_count</code> even after merging the local frequencies. <code class="literal">shard_min_doc_count</code> is set to <code class="literal">1</code> per default and has no effect unless you explicitly set it.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Setting <code class="literal">min_doc_count</code> to <code class="literal">1</code> is generally not advised as it tends to return terms that
         are typos or other bizarre curiosities. Finding more than one instance of a term helps
         reinforce that, while still rare, the term was not the result of a one-off accident. The
         default value of 3 is used to provide a minimum weight-of-evidence.
         Setting <code class="literal">shard_min_doc_count</code> too high will cause significant candidate terms to be filtered out on a shard level. This value should be set much lower than <code class="literal">min_doc_count/#shards</code>.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_custom_background_context"></a>Custom background context</h4></div></div></div><p>The default source of statistical information for background term frequencies is the entire index and this
scope can be narrowed through the use of a <code class="literal">background_filter</code> to focus in on significant terms within a narrower
context:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match" : "madrid"
    },
    "aggs" : {
        "tags" : {
            "significant_terms" : {
                "field" : "tag",
                "background_filter": {
                        "term" : { "text" : "spain"}
                }
            }
        }
    }
}</pre></div><p>The above filter would help focus in on terms that were peculiar to the city of Madrid rather than revealing
terms like "Spanish" that are unusual in the full indexs worldwide context but commonplace in the subset of documents containing the
word "Spain".</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Use of background filters will slow the query as each terms postings must be filtered to determine a frequency</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_filtering_values_2"></a>Filtering Values</h4></div></div></div><p>It is possible (although rarely required) to filter the values for which buckets will be created. This can be done using the <code class="literal">include</code> and
<code class="literal">exclude</code> parameters which are based on a regular expression string or arrays of exact terms. This functionality mirrors the features
described in the <a class="link" href="search-aggregations-bucket-terms-aggregation.html" title="Terms Aggregation">terms aggregation</a> documentation.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_execution_hint"></a>Execution hint</h4></div></div></div><p>There are different mechanisms by which terms aggregations can be executed:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
by using field values directly in order to aggregate data per-bucket (<code class="literal">map</code>)
</li><li class="listitem">
by using ordinals of the field and preemptively allocating one bucket per ordinal value (<code class="literal">global_ordinals</code>)
</li><li class="listitem">
by using ordinals of the field and dynamically allocating one bucket per ordinal value (<code class="literal">global_ordinals_hash</code>)
</li></ul></div><p>Elasticsearch tries to have sensible defaults so this is something that generally doesnt need to be configured.</p><p><code class="literal">map</code> should only be considered when very few documents match a query. Otherwise the ordinals-based execution modes
are significantly faster. By default, <code class="literal">map</code> is only used when running an aggregation on scripts, since they dont have
ordinals.</p><p><code class="literal">global_ordinals</code> is the second fastest option, but the fact that it preemptively allocates buckets can be memory-intensive,
especially if you have one or more sub aggregations. It is used by default on top-level terms aggregations.</p><p><code class="literal">global_ordinals_hash</code> on the contrary to <code class="literal">global_ordinals</code> and <code class="literal">global_ordinals_low_cardinality</code> allocates buckets dynamically
so memory usage is linear to the number of values of the documents that are part of the aggregation scope. It is used by default
in inner aggregations.</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "tags" : {
             "significant_terms" : {
                 "field" : "tags",
                 "execution_hint": "map" <a id="CO35-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
             }
         }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO35-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
the possible values are <code class="literal">map</code>, <code class="literal">global_ordinals</code> and <code class="literal">global_ordinals_hash</code>
</p></td></tr></tbody></table></div><p>Please note that Elasticsearch will ignore this execution hint if it is not applicable.</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Range Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-significantterms-aggregation.html">
              &nbsp;
              Significant Terms Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-daterange-aggregation.html">Date Range Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-range-aggregation"></a>Range Aggregation</h2></div></div></div><p>A multi-bucket value source based aggregation that enables the user to define a set of ranges - each representing a bucket. During the aggregation process, the values extracted from each document will be checked against each bucket range and "bucket" the relevant/matching document.
Note that this aggregration includes the <code class="literal">from</code> value and excludes the <code class="literal">to</code> value for each range.</p><p>Example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "field" : "price",
                "ranges" : [
                    { "to" : 50 },
                    { "from" : 50, "to" : 100 },
                    { "from" : 100 }
                ]
            }
        }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations": {
        "price_ranges" : {
            "buckets": [
                {
                    "to": 50,
                    "doc_count": 2
                },
                {
                    "from": 50,
                    "to": 100,
                    "doc_count": 4
                },
                {
                    "from": 100,
                    "doc_count": 4
                }
            ]
        }
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_keyed_response"></a>Keyed Response</h3></div></div></div><p>Setting the <code class="literal">keyed</code> flag to <code class="literal">true</code> will associate a unique string key with each bucket and return the ranges as a hash rather than an array:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "field" : "price",
                "keyed" : true,
                "ranges" : [
                    { "to" : 50 },
                    { "from" : 50, "to" : 100 },
                    { "from" : 100 }
                ]
            }
        }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations": {
        "price_ranges" : {
            "buckets": {
                "*-50.0": {
                    "to": 50,
                    "doc_count": 2
                },
                "50.0-100.0": {
                    "from": 50,
                    "to": 100,
                    "doc_count": 4
                },
                "100.0-*": {
                    "from": 100,
                    "doc_count": 4
                }
            }
        }
    }
}</pre></div><p>It is also possible to customize the key for each range:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "field" : "price",
                "keyed" : true,
                "ranges" : [
                    { "key" : "cheap", "to" : 50 },
                    { "key" : "average", "from" : 50, "to" : 100 },
                    { "key" : "expensive", "from" : 100 }
                ]
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_11"></a>Script</h3></div></div></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The <code class="literal">script</code> parameter expects an inline script. Use <code class="literal">script_id</code> for indexed scripts and <code class="literal">script_file</code> for scripts in the <code class="literal">config/scripts/</code> directory.</p></div></div><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "script" : "doc['price'].value",
                "ranges" : [
                    { "to" : 50 },
                    { "from" : 50, "to" : 100 },
                    { "from" : 100 }
                ]
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_value_script_8"></a>Value Script</h3></div></div></div><p>Lets say the product prices are in USD but we would like to get the price ranges in EURO. We can use value script to convert the prices prior the aggregation (assuming conversion rate of 0.8)</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "field" : "price",
                "script" : "_value * conversion_rate",
                "params" : {
                    "conversion_rate" : 0.8
                },
                "ranges" : [
                    { "to" : 35 },
                    { "from" : 35, "to" : 70 },
                    { "from" : 70 }
                ]
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_sub_aggregations"></a>Sub Aggregations</h3></div></div></div><p>The following example, not only "bucket" the documents to the different buckets but also computes statistics over the prices in each price range</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "field" : "price",
                "ranges" : [
                    { "to" : 50 },
                    { "from" : 50, "to" : 100 },
                    { "from" : 100 }
                ]
            },
            "aggs" : {
                "price_stats" : {
                    "stats" : { "field" : "price" }
                }
            }
        }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggregations": {
        "price_ranges" : {
            "buckets": [
                {
                    "to": 50,
                    "doc_count": 2,
                    "price_stats": {
                        "count": 2,
                        "min": 20,
                        "max": 47,
                        "avg": 33.5,
                        "sum": 67
                    }
                },
                {
                    "from": 50,
                    "to": 100,
                    "doc_count": 4,
                    "price_stats": {
                        "count": 4,
                        "min": 60,
                        "max": 98,
                        "avg": 82.5,
                        "sum": 330
                    }
                },
                {
                    "from": 100,
                    "doc_count": 4,
                    "price_stats": {
                        "count": 4,
                        "min": 134,
                        "max": 367,
                        "avg": 216,
                        "sum": 864
                    }
                }
            ]
        }
    }
}</pre></div><p>If a sub aggregation is also based on the same value source as the range aggregation (like the <code class="literal">stats</code> aggregation in the example above) it is possible to leave out the value source definition for it. The following will return the same response as above:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "price_ranges" : {
            "range" : {
                "field" : "price",
                "ranges" : [
                    { "to" : 50 },
                    { "from" : 50, "to" : 100 },
                    { "from" : 100 }
                ]
            },
            "aggs" : {
                "price_stats" : {
                    "stats" : {} <a id="CO36-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                }
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO36-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
We dont need to specify the <code class="literal">price</code> as we "inherit" it by default from the parent <code class="literal">range</code> aggregation
</p></td></tr></tbody></table></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Date Range Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-range-aggregation.html">
              &nbsp;
              Range Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-iprange-aggregation.html">IPv4 Range Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-daterange-aggregation"></a>Date Range Aggregation</h2></div></div></div><p>A range aggregation that is dedicated for date values. The main difference between this aggregation and the normal <a class="link" href="search-aggregations-bucket-range-aggregation.html" title="Range Aggregation">range</a> aggregation is that the <code class="literal">from</code> and <code class="literal">to</code> values can be expressed in <a class="link" href="mapping-date-format.html#date-math" title="Date Mathedit">Date Math</a> expressions, and it is also possible to specify a date format by which the <code class="literal">from</code> and <code class="literal">to</code> response fields will be returned.
Note that this aggregation includes the <code class="literal">from</code> value and excludes the <code class="literal">to</code> value for each range.</p><p>Example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs": {
        "range": {
            "date_range": {
                "field": "date",
                "format": "MM-yyy",
                "ranges": [
                    { "to": "now-10M/M" }, <a id="CO37-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                    { "from": "now-10M/M" } <a id="CO37-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
                ]
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO37-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
&lt; now minus 10 months, rounded down to the start of the month.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO37-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
&gt;= now minus 10 months, rounded down to the start of the month.
</p></td></tr></tbody></table></div><p>In the example above, we created two range buckets, the first will "bucket" all documents dated prior to 10 months ago and
the second will "bucket" all documents dated since 10 months ago</p><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations": {
        "range": {
            "buckets": [
                {
                    "to": 1.3437792E+12,
                    "to_as_string": "08-2012",
                    "doc_count": 7
                },
                {
                    "from": 1.3437792E+12,
                    "from_as_string": "08-2012",
                    "doc_count": 2
                }
            ]
        }
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="date-format-pattern"></a>Date Format/Pattern</h3></div></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>this information was copied from <a class="ulink" href="http://www.joda.org/joda-time/apidocs/org/joda/time/format/DateTimeFormat.html" target="_top">JodaDate</a></p></div></div><p>All ASCII letters are reserved as format pattern letters, which are defined as follows:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"></colgroup><thead><tr><th class="entry" align="left" valign="top">Symbol </th><th class="entry" align="left" valign="top">Meaning                </th><th class="entry" align="left" valign="top">Presentation       </th><th class="entry" align="left" valign="top">Examples</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p>G</p></td><td class="entry" align="left" valign="top"><p>era</p></td><td class="entry" align="left" valign="top"><p>text</p></td><td class="entry" align="left" valign="top"><p>AD</p></td></tr><tr><td class="entry" align="left" valign="top"><p>C</p></td><td class="entry" align="left" valign="top"><p>century of era (&gt;=0)</p></td><td class="entry" align="left" valign="top"><p>number</p></td><td class="entry" align="left" valign="top"><p>20</p></td></tr><tr><td class="entry" align="left" valign="top"><p>Y</p></td><td class="entry" align="left" valign="top"><p>year of era (&gt;=0)</p></td><td class="entry" align="left" valign="top"><p>year</p></td><td class="entry" align="left" valign="top"><p>1996</p></td></tr><tr><td class="entry" align="left" valign="top"><p>x</p></td><td class="entry" align="left" valign="top"><p>weekyear</p></td><td class="entry" align="left" valign="top"><p>year</p></td><td class="entry" align="left" valign="top"><p>1996</p></td></tr><tr><td class="entry" align="left" valign="top"><p>w</p></td><td class="entry" align="left" valign="top"><p>week of weekyear</p></td><td class="entry" align="left" valign="top"><p>number</p></td><td class="entry" align="left" valign="top"><p>27</p></td></tr><tr><td class="entry" align="left" valign="top"><p>e</p></td><td class="entry" align="left" valign="top"><p>day of week</p></td><td class="entry" align="left" valign="top"><p>number</p></td><td class="entry" align="left" valign="top"><p>2</p></td></tr><tr><td class="entry" align="left" valign="top"><p>E</p></td><td class="entry" align="left" valign="top"><p>day of week</p></td><td class="entry" align="left" valign="top"><p>text</p></td><td class="entry" align="left" valign="top"><p>Tuesday; Tue</p></td></tr><tr><td class="entry" align="left" valign="top"><p>y</p></td><td class="entry" align="left" valign="top"><p>year</p></td><td class="entry" align="left" valign="top"><p>year</p></td><td class="entry" align="left" valign="top"><p>1996</p></td></tr><tr><td class="entry" align="left" valign="top"><p>D</p></td><td class="entry" align="left" valign="top"><p>day of year</p></td><td class="entry" align="left" valign="top"><p>number</p></td><td class="entry" align="left" valign="top"><p>189</p></td></tr><tr><td class="entry" align="left" valign="top"><p>M</p></td><td class="entry" align="left" valign="top"><p>month of year</p></td><td class="entry" align="left" valign="top"><p>month</p></td><td class="entry" align="left" valign="top"><p>July; Jul; 07</p></td></tr><tr><td class="entry" align="left" valign="top"><p>d</p></td><td class="entry" align="left" valign="top"><p>day of month</p></td><td class="entry" align="left" valign="top"><p>number</p></td><td class="entry" align="left" valign="top"><p>10</p></td></tr><tr><td class="entry" align="left" valign="top"><p>a</p></td><td class="entry" align="left" valign="top"><p>halfday of day</p></td><td class="entry" align="left" valign="top"><p>text</p></td><td class="entry" align="left" valign="top"><p>PM</p></td></tr><tr><td class="entry" align="left" valign="top"><p>K</p></td><td class="entry" align="left" valign="top"><p>hour of halfday (0~11)</p></td><td class="entry" align="left" valign="top"><p>number</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p>h</p></td><td class="entry" align="left" valign="top"><p>clockhour of halfday (1~12)</p></td><td class="entry" align="left" valign="top"><p>number</p></td><td class="entry" align="left" valign="top"><p>12</p></td></tr><tr><td class="entry" align="left" valign="top"><p>H</p></td><td class="entry" align="left" valign="top"><p>hour of day (0~23)</p></td><td class="entry" align="left" valign="top"><p>number</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p>k</p></td><td class="entry" align="left" valign="top"><p>clockhour of day (1~24)</p></td><td class="entry" align="left" valign="top"><p>number</p></td><td class="entry" align="left" valign="top"><p>24</p></td></tr><tr><td class="entry" align="left" valign="top"><p>m</p></td><td class="entry" align="left" valign="top"><p>minute of hour</p></td><td class="entry" align="left" valign="top"><p>number</p></td><td class="entry" align="left" valign="top"><p>30</p></td></tr><tr><td class="entry" align="left" valign="top"><p>s</p></td><td class="entry" align="left" valign="top"><p>second of minute</p></td><td class="entry" align="left" valign="top"><p>number</p></td><td class="entry" align="left" valign="top"><p>55</p></td></tr><tr><td class="entry" align="left" valign="top"><p>S</p></td><td class="entry" align="left" valign="top"><p>fraction of second</p></td><td class="entry" align="left" valign="top"><p>number</p></td><td class="entry" align="left" valign="top"><p>978</p></td></tr><tr><td class="entry" align="left" valign="top"><p>z</p></td><td class="entry" align="left" valign="top"><p>time zone</p></td><td class="entry" align="left" valign="top"><p>text</p></td><td class="entry" align="left" valign="top"><p>Pacific Standard Time; PST</p></td></tr><tr><td class="entry" align="left" valign="top"><p>Z</p></td><td class="entry" align="left" valign="top"><p>time zone offset/id</p></td><td class="entry" align="left" valign="top"><p>zone</p></td><td class="entry" align="left" valign="top"><p>-0800; -08:00; America/Los_Angeles</p></td></tr><tr><td class="entry" align="left" valign="top"><p>'</p></td><td class="entry" align="left" valign="top"><p>escape for text</p></td><td class="entry" align="left" valign="top"><p>delimiter</p></td><td class="entry" align="left" valign="top"><p>''</p></td></tr></tbody></table></div><p>The count of pattern letters determine the format.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Text
</span></dt><dd>
If the number of pattern letters is 4 or more, the full form is used; otherwise a short or abbreviated form is used if available.
</dd><dt><span class="term">
Number
</span></dt><dd>
The minimum number of digits. Shorter numbers are zero-padded to this amount.
</dd><dt><span class="term">
Year
</span></dt><dd>
Numeric presentation for year and weekyear fields are handled specially. For example, if the count of <span class="emphasis"><em>y</em></span> is 2, the year will be displayed as the zero-based year of the century, which is two digits.
</dd><dt><span class="term">
Month
</span></dt><dd>
3 or over, use text, otherwise use number.
</dd><dt><span class="term">
Zone
</span></dt><dd>
<span class="emphasis"><em>Z</em></span> outputs offset without a colon, <span class="emphasis"><em>ZZ</em></span> outputs the offset with a colon, <span class="emphasis"><em>ZZZ</em></span> or more outputs the zone id.
</dd><dt><span class="term">
Zone names
</span></dt><dd>
Time zone names (<span class="emphasis"><em>z</em></span>) cannot be parsed.
</dd></dl></div><p>Any characters in the pattern that are not in the ranges of [<span class="emphasis"><em>a</em></span>..<span class="emphasis"><em>z</em></span>] and [<span class="emphasis"><em>A</em></span>..<span class="emphasis"><em>Z</em></span>] will be treated as quoted text. For instance, characters like <span class="emphasis"><em>:</em></span>, <span class="emphasis"><em>.</em></span>, ' <span class="emphasis"><em>, '#</em></span> and <span class="emphasis"><em>?</em></span> will appear in the resulting time text even they are not embraced within single quotes.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">IPv4 Range Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-daterange-aggregation.html">
              &nbsp;
              Date Range Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-histogram-aggregation.html">Histogram Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-iprange-aggregation"></a>IPv4 Range Aggregation</h2></div></div></div><p>Just like the dedicated <a class="link" href="search-aggregations-bucket-daterange-aggregation.html" title="Date Range Aggregation">date</a> range aggregation, there is also a dedicated range aggregation for IPv4 typed fields:</p><p>Example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "ip_ranges" : {
            "ip_range" : {
                "field" : "ip",
                "ranges" : [
                    { "to" : "10.0.0.5" },
                    { "from" : "10.0.0.5" }
                ]
            }
        }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...

    "aggregations": {
        "ip_ranges": {
            "buckets" : [
                {
                    "to": 167772165,
                    "to_as_string": "10.0.0.5",
                    "doc_count": 4
                },
                {
                    "from": 167772165,
                    "from_as_string": "10.0.0.5",
                    "doc_count": 6
                }
            ]
        }
    }
}</pre></div><p>IP ranges can also be defined as CIDR masks:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "ip_ranges" : {
            "ip_range" : {
                "field" : "ip",
                "ranges" : [
                    { "mask" : "10.0.0.0/25" },
                    { "mask" : "10.0.0.127/25" }
                ]
            }
        }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggregations": {
        "ip_ranges": {
            "buckets": [
                {
                    "key": "10.0.0.0/25",
                    "from": 1.6777216E+8,
                    "from_as_string": "10.0.0.0",
                    "to": 167772287,
                    "to_as_string": "10.0.0.127",
                    "doc_count": 127
                },
                {
                    "key": "10.0.0.127/25",
                    "from": 1.6777216E+8,
                    "from_as_string": "10.0.0.0",
                    "to": 167772287,
                    "to_as_string": "10.0.0.127",
                    "doc_count": 127
                }
            ]
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Histogram Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-iprange-aggregation.html">
              &nbsp;
              IPv4 Range Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-datehistogram-aggregation.html">Date Histogram Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-histogram-aggregation"></a>Histogram Aggregation</h2></div></div></div><p>A multi-bucket values source based aggregation that can be applied on numeric values extracted from the documents.
It dynamically builds fixed size (a.k.a. interval) buckets over the values. For example, if the documents have a field
that holds a price (numeric), we can configure this aggregation to dynamically build buckets with interval <code class="literal">5</code>
(in case of price it may represent $5). When the aggregation executes, the price field of every document will be
evaluated and will be rounded down to its closest bucket - for example, if the price is <code class="literal">32</code> and the bucket size is <code class="literal">5</code>
then the rounding will yield <code class="literal">30</code> and thus the document will "fall" into the bucket that is associated withe the key <code class="literal">30</code>.
To make this more formal, here is the rounding function that is used:</p><div class="pre_wrapper"><pre class="programlisting">rem = value % interval
if (rem &lt; 0) {
    rem += interval
}
bucket_key = value - rem</pre></div><p>From the rounding function above it can be seen that the intervals themselves <span class="strong emphasis"><strong>must</strong></span> be integers.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Currently, values are cast to integers before being bucketed, which
might cause negative floating-point values to fall into the wrong bucket. For
instance, <code class="literal">-4.5</code> with an interval of <code class="literal">2</code> would be cast to <code class="literal">-4</code>, and so would
end up in the <code class="literal">-4 &lt;= val &lt; -2</code> bucket instead of the <code class="literal">-6 &lt;= val &lt; -4</code> bucket.</p></div></div><p>The following snippet "buckets" the products based on their <code class="literal">price</code> by interval of <code class="literal">50</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "prices" : {
            "histogram" : {
                "field" : "price",
                "interval" : 50
            }
        }
    }
}</pre></div><p>And the following may be the response:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggregations": {
        "prices" : {
            "buckets": [
                {
                    "key": 0,
                    "doc_count": 2
                },
                {
                    "key": 50,
                    "doc_count": 4
                },
                {
                    "key": 150,
                    "doc_count": 3
                }
            ]
        }
    }
}</pre></div><p>The response above shows that none of the aggregated products has a price that falls within the range of <code class="literal">[100 - 150)</code>.
By default, the response will only contain those buckets with a <code class="literal">doc_count</code> greater than 0. It is possible change that
and request buckets with either a higher minimum count or even 0 (in which case elasticsearch will "fill in the gaps"
and create buckets with zero documents). This can be configured using the <code class="literal">min_doc_count</code> setting:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "prices" : {
            "histogram" : {
                "field" : "price",
                "interval" : 50,
                "min_doc_count" : 0
            }
        }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggregations": {
        "prices" : {
            "buckets": [
                {
                    "key": 0,
                    "doc_count": 2
                },
                {
                    "key": 50,
                    "doc_count": 4
                },
                {
                    "key" : 100,
                    "doc_count" : 0 <a id="CO38-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                },
                {
                    "key": 150,
                    "doc_count": 3
                }
            ]
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO38-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
No documents were found that belong in this bucket, yet it is still returned with zero <code class="literal">doc_count</code>.
</p></td></tr></tbody></table></div><p><a id="search-aggregations-bucket-histogram-aggregation-extended-bounds"></a>By default the date_/histogram returns all the buckets within the range of the data itself, that is, the documents with
the smallest values (on which with histogram) will determine the min bucket (the bucket with the smallest key) and the
documents with the highest values will determine the max bucket (the bucket with the highest key). Often, when
requesting empty buckets (<code class="literal">"min_doc_count" : 0</code>), this causes a confusion, specifically, when the data is also filtered.</p><p>To understand why, lets look at an example:</p><p>Lets say the youre filtering your request to get all docs with values between <code class="literal">0</code> and <code class="literal">500</code>, in addition youd like
to slice the data per price using a histogram with an interval of <code class="literal">50</code>. You also specify <code class="literal">"min_doc_count" : 0</code> as youd
like to get all buckets even the empty ones. If it happens that all products (documents) have prices higher than <code class="literal">100</code>,
the first bucket youll get will be the one with <code class="literal">100</code> as its key. This is confusing, as many times, youd also like
to get those buckets between <code class="literal">0 - 100</code>.</p><p>With <code class="literal">extended_bounds</code> setting, you now can "force" the histogram aggregation to start building buckets on a specific
<code class="literal">min</code> values and also keep on building buckets up to a <code class="literal">max</code> value (even if there are no documents anymore). Using
<code class="literal">extended_bounds</code> only makes sense when <code class="literal">min_doc_count</code> is 0 (the empty buckets will never be returned if <code class="literal">min_doc_count</code>
is greater than 0).</p><p>Note that (as the name suggest) <code class="literal">extended_bounds</code> is <span class="strong emphasis"><strong>not</strong></span> filtering buckets. Meaning, if the <code class="literal">extended_bounds.min</code> is higher
than the values extracted from the documents, the documents will still dictate what the first bucket will be (and the
same goes for the <code class="literal">extended_bounds.max</code> and the last bucket). For filtering buckets, one should nest the histogram aggregation
under a range <code class="literal">filter</code> aggregation with the appropriate <code class="literal">from</code>/<code class="literal">to</code> settings.</p><p>Example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "filtered" : { "filter": { "range" : { "price" : { "to" : "500" } } } }
    },
    "aggs" : {
        "prices" : {
            "histogram" : {
                "field" : "price",
                "interval" : 50,
                "min_doc_count" : 0,
                "extended_bounds" : {
                    "min" : 0,
                    "max" : 500
                }
            }
        }
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_order"></a>Order</h3></div></div></div><p>By default the returned buckets are sorted by their <code class="literal">key</code> ascending, though the order behaviour can be controlled
using the <code class="literal">order</code> setting.</p><p>Ordering the buckets by their key - descending:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "prices" : {
            "histogram" : {
                "field" : "price",
                "interval" : 50,
                "order" : { "_key" : "desc" }
            }
        }
    }
}</pre></div><p>Ordering the buckets by their <code class="literal">doc_count</code> - ascending:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "prices" : {
            "histogram" : {
                "field" : "price",
                "interval" : 50,
                "order" : { "_count" : "asc" }
            }
        }
    }
}</pre></div><p>If the histogram aggregation has a direct metrics sub-aggregation, the latter can determine the order of the buckets:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "prices" : {
            "histogram" : {
                "field" : "price",
                "interval" : 50,
                "order" : { "price_stats.min" : "asc" } <a id="CO39-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            },
            "aggs" : {
                "price_stats" : { "stats" : {} } <a id="CO39-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO39-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">{ "price_stats.min" : asc" }</code> will sort the buckets based on <code class="literal">min</code> value of their <code class="literal">price_stats</code> sub-aggregation.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO39-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
There is no need to configure the <code class="literal">price</code> field for the <code class="literal">price_stats</code> aggregation as it will inherit it by default from its parent histogram aggregation.
</p></td></tr></tbody></table></div><p>It is also possible to order the buckets based on a "deeper" aggregation in the hierarchy. This is supported as long
as the aggregations path are of a single-bucket type, where the last aggregation in the path may either by a single-bucket
one or a metrics one. If its a single-bucket type, the order will be defined by the number of docs in the bucket (i.e. <code class="literal">doc_count</code>),
in case its a metrics one, the same rules as above apply (where the path must indicate the metric name to sort by in case of
a multi-value metrics aggregation, and in case of a single-value metrics aggregation the sort will be applied on that value).</p><p>The path must be defined in the following form:</p><pre class="screen">AGG_SEPARATOR       :=  '&gt;'
METRIC_SEPARATOR    :=  '.'
AGG_NAME            :=  &lt;the name of the aggregation&gt;
METRIC              :=  &lt;the name of the metric (in case of multi-value metrics aggregation)&gt;
PATH                :=  &lt;AGG_NAME&gt;[&lt;AGG_SEPARATOR&gt;&lt;AGG_NAME&gt;]*[&lt;METRIC_SEPARATOR&gt;&lt;METRIC&gt;]</pre><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "prices" : {
            "histogram" : {
                "field" : "price",
                "interval" : 50,
                "order" : { "promoted_products&gt;rating_stats.avg" : "desc" } <a id="CO40-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            },
            "aggs" : {
                "promoted_products" : {
                    "filter" : { "term" : { "promoted" : true }},
                    "aggs" : {
                        "rating_stats" : { "stats" : { "field" : "rating" }}
                    }
                }
            }
        }
    }
}</pre></div><p>The above will sort the buckets based on the avg rating among the promoted products</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_minimum_document_count_3"></a>Minimum document count</h3></div></div></div><p>It is possible to only return buckets that have a document count that is greater than or equal to a configured
limit through the <code class="literal">min_doc_count</code> option.</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "prices" : {
            "histogram" : {
                "field" : "price",
                "interval" : 50,
                "min_doc_count": 10
            }
        }
    }
}</pre></div><p>The above aggregation would only return buckets that contain 10 documents or more. Default value is <code class="literal">1</code>.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The special value <code class="literal">0</code> can be used to add empty buckets to the response between the minimum and the maximum buckets.
Here is an example of what the response could look like:</p></div></div><div class="pre_wrapper"><pre class="programlisting">{
    "aggregations": {
        "prices": {
            "buckets": {
                "0": {
                    "key": 0,
                    "doc_count": 2
                },
                "50": {
                    "key": 50,
                    "doc_count": 0
                },
                "150": {
                    "key": 150,
                    "doc_count": 3
                },
                "200": {
                    "key": 150,
                    "doc_count": 0
                },
                "250": {
                    "key": 150,
                    "doc_count": 0
                },
                "300": {
                    "key": 150,
                    "doc_count": 1
                }
            }
        }
   }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_response_format"></a>Response Format</h3></div></div></div><p>By default, the buckets are returned as an ordered array. It is also possible to request the response as a hash
instead keyed by the buckets keys:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "prices" : {
            "histogram" : {
                "field" : "price",
                "interval" : 50,
                "keyed" : true
            }
        }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggregations": {
        "prices": {
            "buckets": {
                "0": {
                    "key": 0,
                    "doc_count": 2
                },
                "50": {
                    "key": 50,
                    "doc_count": 4
                },
                "150": {
                    "key": 150,
                    "doc_count": 3
                }
            }
        }
    }
}</pre></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Date Histogram Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-histogram-aggregation.html">
              &nbsp;
              Histogram Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-geodistance-aggregation.html">Geo Distance Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-datehistogram-aggregation"></a>Date Histogram Aggregation</h2></div></div></div><p>A multi-bucket aggregation similar to the <a class="link" href="search-aggregations-bucket-histogram-aggregation.html" title="Histogram Aggregation">histogram</a> except it can
only be applied on date values. Since dates are represented in elasticsearch internally as long values, it is possible
to use the normal <code class="literal">histogram</code> on dates as well, though accuracy will be compromised. The reason for this is in the fact
that time based intervals are not fixed (think of leap years and on the number of days in a month). For this reason,
we need special support for time based data. From a functionality perspective, this histogram supports the same features
as the normal <a class="link" href="search-aggregations-bucket-histogram-aggregation.html" title="Histogram Aggregation">histogram</a>. The main difference is that the interval can be specified by date/time expressions.</p><p>Requesting bucket intervals of a month.</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "articles_over_time" : {
            "date_histogram" : {
                "field" : "date",
                "interval" : "month"
            }
        }
    }
}</pre></div><p>Available expressions for interval: <code class="literal">year</code>, <code class="literal">quarter</code>, <code class="literal">month</code>, <code class="literal">week</code>, <code class="literal">day</code>, <code class="literal">hour</code>, <code class="literal">minute</code>, <code class="literal">second</code></p><p>Fractional values are allowed for seconds, minutes, hours, days and weeks. For example 1.5 hours:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "articles_over_time" : {
            "date_histogram" : {
                "field" : "date",
                "interval" : "1.5h"
            }
        }
    }
}</pre></div><p>See <a class="xref" href="common-options.html#time-units" title="Time unitsedit">the section called Time units</a> for accepted abbreviations.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_time_zone"></a>Time Zone</h3></div></div></div><p>By default, times are stored as UTC milliseconds since the epoch. Thus, all computation and "bucketing" / "rounding" is
done on UTC. It is possible to provide a time zone value, which will cause all computations to take the relevant zone
into account. The time returned for each bucket/entry is milliseconds since the epoch of the provided time zone.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.5.0. </h3>
 pre_zone, post_zone are replaced by time_zone
</div></div><p>The parameters are <code class="literal">pre_zone</code> (pre rounding based on interval) and <code class="literal">post_zone</code> (post rounding based on interval). The
<code class="literal">time_zone</code> parameter simply sets the <code class="literal">pre_zone</code> parameter. By default, those are set to <code class="literal">UTC</code>.</p><p>The zone value accepts either a numeric value for the hours offset, for example: <code class="literal">"time_zone" : -2</code>. It also accepts a
format of hours and minutes, like <code class="literal">"time_zone" : "-02:30"</code>. Another option is to provide a time zone accepted as one of
the values listed here.</p><p>Lets take an example. For <code class="literal">2012-04-01T04:15:30Z</code>, with a <code class="literal">pre_zone</code> of <code class="literal">-08:00</code>. For day interval, the actual time by
applying the time zone and rounding falls under <code class="literal">2012-03-31</code>, so the returned value will be (in millis) of
<code class="literal">2012-03-31T00:00:00Z</code> (UTC). For hour interval, applying the time zone results in <code class="literal">2012-03-31T20:15:30</code>, rounding it
results in <code class="literal">2012-03-31T20:00:00</code>, but, we want to return it in UTC (<code class="literal">post_zone</code> is not set), so we convert it back to
UTC: <code class="literal">2012-04-01T04:00:00Z</code>. Note, we are consistent in the results, returning the rounded value in UTC.</p><p><code class="literal">post_zone</code> simply takes the result, and adds the relevant offset.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.5.0. </h3>
 pre_zone_adjust_large_interval will be removed
</div></div><p>Sometimes, we want to apply the same conversion to UTC we did above for hour also for day (and up) intervals. We can
set <code class="literal">pre_zone_adjust_large_interval</code> to <code class="literal">true</code>, which will apply the same conversion done for hour interval in the
example, to day and above intervals (it can be set regardless of the interval, but only kick in when using day and
higher intervals).</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_offset"></a>Offset</h3></div></div></div><p>The <code class="literal">offset</code> option can be provided for shifting the date bucket intervals boundaries after any other shifts because of
time zones are applies. This for example makes it possible that daily buckets go from 6AM to 6AM the next day instead of starting at 12AM
or that monthly buckets go from the 10th of the month to the 10th of the next month instead of the 1st.</p><p>The <code class="literal">offset</code> option accepts positive or negative time durations like "1h" for an hour or "1M" for a Month. See <a class="xref" href="common-options.html#time-units" title="Time unitsedit">the section called Time units</a> for more
possible time duration options.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.5.0. </h3>
 pre_offset and post_offset are deprecated and replaced by offset
</div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_keys"></a>Keys</h3></div></div></div><p>Since internally, dates are represented as 64bit numbers, these numbers are returned as the bucket keys (each key
representing a date - milliseconds since the epoch). It is also possible to define a date format, which will result in
returning the dates as formatted strings next to the numeric key values:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "articles_over_time" : {
            "date_histogram" : {
                "field" : "date",
                "interval" : "1M",
                "format" : "yyyy-MM-dd" <a id="CO40-2"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO40-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> <a href="#CO40-2"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Supports expressive date <a class="link" href="search-aggregations-bucket-daterange-aggregation.html#date-format-pattern" title="Date Format/Pattern">format pattern</a>
</p></td></tr></tbody></table></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggregations": {
        "articles_over_time": {
            "buckets": [
                {
                    "key_as_string": "2013-02-02",
                    "key": 1328140800000,
                    "doc_count": 1
                },
                {
                    "key_as_string": "2013-03-02",
                    "key": 1330646400000,
                    "doc_count": 2
                },
                ...
            ]
        }
    }
}</pre></div><p>Like with the normal <a class="link" href="search-aggregations-bucket-histogram-aggregation.html" title="Histogram Aggregation">histogram</a>, both document level scripts and
value level scripts are supported. It is also possible to control the order of the returned buckets using the <code class="literal">order</code>
settings and filter the returned buckets based on a <code class="literal">min_doc_count</code> setting (by default all buckets with
<code class="literal">min_doc_count &gt; 0</code> will be returned). This histogram also supports the <code class="literal">extended_bounds</code> setting, which enables extending
the bounds of the histogram beyond the data itself (to read more on why youd want to do that please refer to the
explanation <a class="link" href="search-aggregations-bucket-histogram-aggregation.html#search-aggregations-bucket-histogram-aggregation-extended-bounds">here</a>).</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">Geo Distance Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-datehistogram-aggregation.html">
              &nbsp;
              Date Histogram Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-aggregations-bucket-geohashgrid-aggregation.html">GeoHash grid Aggregation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-geodistance-aggregation"></a>Geo Distance Aggregation</h2></div></div></div><p>A multi-bucket aggregation that works on <code class="literal">geo_point</code> fields and conceptually works very similar to the <a class="link" href="search-aggregations-bucket-range-aggregation.html" title="Range Aggregation">range</a> aggregation. The user can define a point of origin and a set of distance range buckets. The aggregation evaluate the distance of each document value from the origin point and determines the buckets it belongs to based on the ranges (a document belongs to a bucket if the distance between the document and the origin falls within the distance range of the bucket).</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "rings_around_amsterdam" : {
            "geo_distance" : {
                "field" : "location",
                "origin" : "52.3760, 4.894",
                "ranges" : [
                    { "to" : 100 },
                    { "from" : 100, "to" : 300 },
                    { "from" : 300 }
                ]
            }
        }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggregations": {
        "rings" : {
            "buckets": [
                {
                    "key": "*-100.0",
                    "from": 0,
                    "to": 100.0,
                    "doc_count": 3
                },
                {
                    "key": "100.0-300.0",
                    "from": 100.0,
                    "to": 300.0,
                    "doc_count": 1
                },
                {
                    "key": "300.0-*",
                    "from": 300.0,
                    "doc_count": 7
                }
            ]
        }
    }
}</pre></div><p>The specified field must be of type <code class="literal">geo_point</code> (which can only be set explicitly in the mappings). And it can also hold an array of <code class="literal">geo_point</code> fields, in which case all will be taken into account during aggregation. The origin point can accept all formats supported by the <code class="literal">geo_point</code> <a class="link" href="mapping-geo-point-type.html" title="Geo Point Type">type</a>:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Object format: <code class="literal">{ "lat" : 52.3760, "lon" : 4.894 }</code> - this is the safest format as it is the most explicit about the <code class="literal">lat</code> &amp; <code class="literal">lon</code> values
</li><li class="listitem">
String format: <code class="literal">"52.3760, 4.894"</code> - where the first number is the <code class="literal">lat</code> and the second is the <code class="literal">lon</code>
</li><li class="listitem">
Array format: <code class="literal">[4.894, 52.3760]</code> - which is based on the <code class="literal">GeoJson</code> standard and where the first number is the <code class="literal">lon</code> and the second one is the <code class="literal">lat</code>
</li></ul></div><p>By default, the distance unit is <code class="literal">m</code> (metres) but it can also accept: <code class="literal">mi</code> (miles), <code class="literal">in</code> (inches), <code class="literal">yd</code> (yards), <code class="literal">km</code> (kilometers), <code class="literal">cm</code> (centimeters), <code class="literal">mm</code> (millimeters).</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "rings" : {
            "geo_distance" : {
                "field" : "location",
                "origin" : "52.3760, 4.894",
                "unit" : "mi", <a id="CO41-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                "ranges" : [
                    { "to" : 100 },
                    { "from" : 100, "to" : 300 },
                    { "from" : 300 }
                ]
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO41-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The distances will be computed as miles
</p></td></tr></tbody></table></div><p>There are three distance calculation modes: <code class="literal">sloppy_arc</code> (the default), <code class="literal">arc</code> (most accurate) and <code class="literal">plane</code> (fastest). The <code class="literal">arc</code> calculation is the most accurate one but also the more expensive one in terms of performance. The <code class="literal">sloppy_arc</code> is faster but less accurate. The <code class="literal">plane</code> is the fastest but least accurate distance function. Consider using <code class="literal">plane</code> when your search context is "narrow" and spans smaller geographical areas (like cities or even countries). <code class="literal">plane</code> may return higher error mergins for searches across very large areas (e.g. cross continent search). The distance calculation type can be set using the <code class="literal">distance_type</code> parameter:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "rings" : {
            "geo_distance" : {
                "field" : "location",
                "origin" : "52.3760, 4.894",
                "distance_type" : "plane",
                "ranges" : [
                    { "to" : 100 },
                    { "from" : 100, "to" : 300 },
                    { "from" : 300 }
                ]
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-aggregations.html">Aggregations</a></span>  <span class="breadcrumb-node">GeoHash grid Aggregation</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-geodistance-aggregation.html">
              &nbsp;
              Geo Distance Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-facets.html">Facets
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-aggregations-bucket-geohashgrid-aggregation"></a>GeoHash grid Aggregation</h2></div></div></div><p>A multi-bucket aggregation that works on <code class="literal">geo_point</code> fields and groups points into buckets that represent cells in a grid.
The resulting grid can be sparse and only contains cells that have matching data. Each cell is labeled using a <a class="ulink" href="http://en.wikipedia.org/wiki/Geohash" target="_top">geohash</a> which is of user-definable precision.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
High precision geohashes have a long string length and represent cells that cover only a small area.
</li><li class="listitem">
Low precision geohashes have a short string length and represent cells that each cover a large area.
</li></ul></div><p>Geohashes used in this aggregation can have a choice of precision between 1 and 12.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>The highest-precision geohash of length 12 produces cells that cover less than a square metre of land and so high-precision requests can be very costly in terms of RAM and result sizes.
Please see the example below on how to first filter the aggregation to a smaller geographic area before requesting high-levels of detail.</p></div></div><p>The specified field must be of type <code class="literal">geo_point</code> (which can only be set explicitly in the mappings) and it can also hold an array of <code class="literal">geo_point</code> fields, in which case all points will be taken into account during aggregation.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_simple_low_precision_request"></a>Simple low-precision request</h3></div></div></div><div class="pre_wrapper"><pre class="programlisting">{
    "aggregations" : {
        "myLarge-GrainGeoHashGrid" : {
            "geohash_grid" : {
                "field" : "location",
                "precision" : 3
            }
        }
    }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggregations": {
        "myLarge-GrainGeoHashGrid": {
            "buckets": [
                {
                    "key": "svz",
                    "doc_count": 10964
                },
                {
                    "key": "sv8",
                    "doc_count": 3198
                }
            ]
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_high_precision_requests"></a>High-precision requests</h3></div></div></div><p>When requesting detailed buckets (typically for displaying a "zoomed in" map) a filter like <a class="link" href="query-dsl-geo-bounding-box-filter.html" title="Geo Bounding Box Filter">geo_bounding_box</a> should be applied to narrow the subject area otherwise potentially millions of buckets will be created and returned.</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggregations" : {
        "zoomedInView" : {
            "filter" : {
                "geo_bounding_box" : {
                    "location" : {
                        "top_left" : "51.73, 0.9",
                        "bottom_right" : "51.55, 1.1"
                    }
                }
            },
            "aggregations":{
                "zoom1":{
                    "geohash_grid" : {
                        "field":"location",
                        "precision":8,
                    }
                }
            }
        }
    }
 }</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_cell_dimensions_at_the_equator"></a>Cell dimensions at the equator</h3></div></div></div><p>The table below shows the metric dimensions for cells covered by various string lengths of geohash.
Cell dimensions vary with latitude and so the table is for the worst-case scenario at the equator.</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<span class="strong emphasis"><strong>GeoHash length</strong></span>
</p>
</td><td class="entry" valign="top">
<p>
<span class="strong emphasis"><strong>Area width x height</strong></span>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
1
</p>
</td><td class="entry" valign="top">
<p>
5,009.4km x 4,992.6km
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
2
</p>
</td><td class="entry" valign="top">
<p>
1,252.3km x 624.1km
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
3
</p>
</td><td class="entry" valign="top">
<p>
156.5km x 156km
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
4
</p>
</td><td class="entry" valign="top">
<p>
39.1km x 19.5km
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
5
</p>
</td><td class="entry" valign="top">
<p>
4.9km x 4.9km
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
6
</p>
</td><td class="entry" valign="top">
<p>
1.2km x 609.4m
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
7
</p>
</td><td class="entry" valign="top">
<p>
152.9m x 152.4m
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
8
</p>
</td><td class="entry" valign="top">
<p>
38.2m x 19m
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
9
</p>
</td><td class="entry" valign="top">
<p>
4.8m x 4.8m
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
10
</p>
</td><td class="entry" valign="top">
<p>
1.2m x 59.5cm
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
11
</p>
</td><td class="entry" valign="top">
<p>
14.9cm x 14.9cm
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
12
</p>
</td><td class="entry" valign="top">
<p>
3.7cm x 1.9cm
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_options_3"></a>Options</h3></div></div></div><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
field
</p>
</td><td class="entry" valign="top">
<p>
Mandatory. The name of the field indexed with GeoPoints.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
precision
</p>
</td><td class="entry" valign="top">
<p>
Optional. The string length of the geohashes used to define
                cells/buckets in the results. Defaults to 5.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
size
</p>
</td><td class="entry" valign="top">
<p>
Optional. The maximum number of geohash buckets to return
                (defaults to 10,000). When results are trimmed, buckets are
                prioritised based on the volumes of documents they contain.
                A value of <code class="literal">0</code> will return all buckets that
                contain a hit, use with caution as this could use a lot of CPU
                and network bandwidth if there are many buckets.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
shard_size
</p>
</td><td class="entry" valign="top">
<p>
Optional. To allow for more accurate counting of the top cells
                returned in the final result the aggregation defaults to
                returning <code class="literal">max(10,(size x number-of-shards))</code> buckets from each
                shard. If this heuristic is undesirable, the number considered
                from each shard can be over-ridden using this parameter.
                A value of <code class="literal">0</code> makes the shard size unlimited.
</p>
</td></tr></tbody></table></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">Facets</span></div><div class="navheader"><span class="prev"><a href="search-aggregations-bucket-geohashgrid-aggregation.html">
              &nbsp;
              GeoHash grid Aggregation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-facets-terms-facet.html">Terms Facet
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-facets"></a>Facets</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Facets are deprecated and will be removed in a future release. You are
encouraged to migrate to <a class="link" href="search-aggregations.html" title="Aggregations">aggregations</a> instead.</p></div></div><p>The usual purpose of a full-text search engine is to return a small
number of documents matching your query.</p><p><span class="emphasis"><em>Facets</em></span> provide aggregated data based on a search query. In the
simplest case, a
<a class="link" href="search-facets-terms-facet.html" title="Terms Facet">terms facet</a>
can return <span class="emphasis"><em>facet counts</em></span> for various <span class="emphasis"><em>facet values</em></span> for a specific
<span class="emphasis"><em>field</em></span>. Elasticsearch supports more facet implementations, such as
<a class="link" href="search-facets-statistical-facet.html" title="Statistical Facet">statistical</a>
or
<a class="link" href="search-facets-date-histogram-facet.html" title="Date Histogram Facet">date histogram</a> facets.</p><p>The field used for facet calculations <span class="emphasis"><em>must</em></span> be of type numeric,
date/time or be analyzed as a single token  see the
<a class="link" href="mapping.html" title="Mapping"><span class="emphasis"><em>Mapping</em></span></a> guide for details on the
analysis process.</p><p>You can give the facet a custom <span class="emphasis"><em>name</em></span> and return multiple facets in one
request.</p><p>Lets try it out with a simple example. Suppose we have a number of
articles with a field called <code class="literal">tags</code>, preferably analyzed with the
<a class="link" href="analysis-keyword-analyzer.html" title="Keyword Analyzer">keyword</a>
analyzer. The facet aggregation will return counts for the most popular
tags across the documents matching your query  or across all documents
in the index.</p><p>We will store some example data first:</p><div class="pre_wrapper"><pre class="programlisting">curl -X DELETE "http://localhost:9200/articles"
curl -X POST "http://localhost:9200/articles/article" -d '{"title" : "One",   "tags" : ["foo"]}'
curl -X POST "http://localhost:9200/articles/article" -d '{"title" : "Two",   "tags" : ["foo", "bar"]}'
curl -X POST "http://localhost:9200/articles/article" -d '{"title" : "Three", "tags" : ["foo", "bar", "baz"]}'</pre></div><p>Now, lets query the index for articles beginning with letter <code class="literal">T</code>
and retrieve a
<a class="link" href="search-facets-terms-facet.html" title="Terms Facet"><span class="emphasis"><em>terms facet</em></span></a>
for the <code class="literal">tags</code> field. We will name the facet simply: <span class="emphasis"><em>tags</em></span>.</p><div class="pre_wrapper"><pre class="programlisting">curl -X POST "http://localhost:9200/articles/_search?pretty=true" -d '
  {
    "query" : { "query_string" : {"query" : "T*"} },
    "facets" : {
      "tags" : { "terms" : {"field" : "tags"} }
    }
  }
'</pre></div><p>This request will return articles <code class="literal">Two</code> and <code class="literal">Three</code> (because
they match our query), as well as the <code class="literal">tags</code> facet:</p><div class="pre_wrapper"><pre class="programlisting">"facets" : {
  "tags" : {
    "_type" : "terms",
    "missing" : 0,
    "total": 5,
    "other": 0,
    "terms" : [ {
      "term" : "foo",
      "count" : 2
    }, {
      "term" : "bar",
      "count" : 2
    }, {
      "term" : "baz",
      "count" : 1
    } ]
  }
}</pre></div><p>In the <code class="literal">terms</code> array, relevant <span class="emphasis"><em>terms</em></span> and <span class="emphasis"><em>counts</em></span> are returned. Youll
probably want to display these to your users. The facet returns several
important counts:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">missing</code> : The number of documents which have no value for the
faceted field
</li><li class="listitem">
<code class="literal">total</code> : The total number of terms in the facet
</li><li class="listitem">
<code class="literal">other</code> : The number of terms not included in the returned facet
(effectively <code class="literal">other</code> = <code class="literal">total</code> - <code class="literal">terms</code> )
</li></ul></div><p>Notice, that the counts are scoped to the current query: <span class="emphasis"><em>foo</em></span> is
counted only twice (not three times), <span class="emphasis"><em>bar</em></span> is counted twice and <span class="emphasis"><em>baz</em></span>
once. Also note that terms are counted once per document, even if the
occur more frequently in that document.</p><p>Thats because the primary purpose of facets is to enable
<a class="ulink" href="http://en.wikipedia.org/wiki/Faceted_search" target="_top"><span class="emphasis"><em>faceted navigation</em></span></a>,
allowing the user to refine her query based on the insight from the
facet, i.e. restrict the search to a specific category, price or date
range. Facets can be used, however, for other purposes: computing
histograms, statistical aggregations, and more. See the blog about
<a class="ulink" href="https://www.elastic.co/blog/data-visualization-with-elasticsearch-and-protovis" target="_top">data visualization</a> for inspiration.</p><h3><a id="_scope"></a>Scope</h3><p>As we have already mentioned, facet computation is restricted to the
scope of the current query, called <code class="literal">main</code>, by default. Facets can be
computed within the <code class="literal">global</code> scope as well, in which case it will return
values computed across all documents in the index:</p><div class="pre_wrapper"><pre class="programlisting">{
    "facets" : {
        "my_facets" : {
            "terms" : { ... },
            "global" : true <a id="CO42-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO42-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">global</code> keyword can be used with any facet type.
</p></td></tr></tbody></table></div><p>Theres one <span class="strong emphasis"><strong>important distinction</strong></span> to keep in mind. While search
<span class="emphasis"><em>queries</em></span> restrict both the returned documents and facet counts, search
<span class="emphasis"><em>filters</em></span> restrict only returned documents  but <span class="emphasis"><em>not</em></span> facet counts.</p><p>If you need to restrict both the documents and facets, and youre not
willing or able to use a query, you may use a <span class="emphasis"><em>facet filter</em></span>.</p><h3><a id="_facet_filter"></a>Facet Filter</h3><p>All facets can be configured with an additional filter (explained in the
<a class="link" href="query-dsl.html" title="Query DSL">Query DSL</a> section), which <span class="emphasis"><em>will</em></span> reduce
the documents they use for computing results. An example with a <span class="emphasis"><em>term</em></span>
filter:</p><div class="pre_wrapper"><pre class="programlisting">{
    "facets" : {
        "&lt;FACET NAME&gt;" : {
            "&lt;FACET TYPE&gt;" : {
                ...
            },
            "facet_filter" : {
                "term" : { "user" : "kimchy"}
            }
        }
    }
}</pre></div><p>Note that this is different from a facet of the
<a class="link" href="search-facets-filter-facet.html" title="Filter Facets">filter</a> type.</p><h3><a id="_facets_with_the_emphasis_nested_emphasis_types"></a>Facets with the <span class="emphasis"><em>nested</em></span> types</h3><p><a class="link" href="mapping-nested-type.html" title="Nested Type">Nested</a> mapping allows
for better support for "inner" documents faceting, especially when it
comes to multi valued key and value facets (like histograms, or term
stats).</p><p>What is it good for? First of all, this is the only way to use facets on
nested documents once they are used (possibly for other reasons). But,
there is also facet specific reason why nested documents can be used,
and thats the fact that facets working on different key and value field
(like term_stats, or histogram) can now support cases where both are
multi valued properly.</p><p>For example, lets use the following mapping:</p><div class="pre_wrapper"><pre class="programlisting">{
    "type1" : {
        "properties" : {
            "obj1" : {
                "type" : "nested"
            }
        }
    }
}</pre></div><p>And, here is a sample data:</p><div class="pre_wrapper"><pre class="programlisting">{
    "obj1" : [
        {
            "name" : "blue",
            "count" : 4
        },
        {
            "name" : "green",
            "count" : 6
        }
    ]
}</pre></div><h4><a id="_all_nested_matching_root_documents"></a>All Nested Matching Root Documents</h4><p>Another option is to run the facet on all the nested documents matching
the root objects that the main query will end up producing. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query": {
        "match_all": {}
    },
    "facets": {
        "facet1": {
            "terms_stats": {
                "key_field" : "name",
                "value_field": "count"
            },
            "nested": "obj1"
        }
    }
}</pre></div><p>The <code class="literal">nested</code> element provides the path to the nested document (can be a
multi level nested docs) that will be used.</p><p>Facet filter allows you to filter your facet on the nested object level.
It is important that these filters match on the nested object level and
not on the root document level. In the following example the
<code class="literal">terms_stats</code> only applies on nested objects with the name <span class="emphasis"><em>blue</em></span>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query": {
        "match_all": {}
    },
    "facets": {
        "facet1": {
            "terms_stats": {
                "key_field" : "name",
                "value_field": "count"
            },
            "nested": "obj1",
            "facet_filter" : {
                "term" : {"name" : "blue"}
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-facets.html">Facets</a></span>  <span class="breadcrumb-node">Terms Facet</span></div><div class="navheader"><span class="prev"><a href="search-facets.html">
              &nbsp;
              Facets</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-facets-range-facet.html">Range Facets
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-facets-terms-facet"></a>Terms Facet</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Facets are deprecated and will be removed in a future release. You are
encouraged to migrate to <a class="link" href="search-aggregations.html" title="Aggregations">aggregations</a> instead.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The equivalent aggregation would be the
<a class="link" href="search-aggregations-bucket-terms-aggregation.html" title="Terms Aggregation"><code class="literal">terms</code></a>
aggregation.</p></div></div><p>Allow to specify field facets that return the N most frequent terms. For
example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "tag" : {
            "terms" : {
                "field" : "tag",
                "size" : 10
            }
        }
    }
}</pre></div><p>It is preferred to have the terms facet executed on a non analyzed
field, or a field without a large number of terms it breaks to.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_accuracy_control"></a>Accuracy Control</h3></div></div></div><p>The <code class="literal">size</code> parameter defines how many top terms should be returned out
of the overall terms list. By default, the node coordinating the
search process will ask each shard to provide its own top <code class="literal">size</code> terms
and once all shards respond, it will reduce the results to the final list
that will then be sent back to the client. This means that if the number
of unique terms is greater than <code class="literal">size</code>, the returned list is slightly off
and not accurate (it could be that the term counts are slightly off and it
could even be that a term that should have been in the top <code class="literal">size</code> entries
was not returned).</p><p>The higher the requested <code class="literal">size</code> is, the more accurate the results will be,
but also, the more expensive it will be to compute the final results (both
due to bigger priority queues that are managed on a shard level and due to
bigger data transfers between the nodes and the client). In an attempt to
minimize the extra work that comes with bigger requested <code class="literal">size</code> the
<code class="literal">shard_size</code> parameter was introduced. When defined, it will determine
how many terms the coordinating node will request from each shard. Once
all the shards responded, the coordinating node will then reduce them
to a final result which will be based on the <code class="literal">size</code> parameter - this way,
one can increase the accuracy of the returned terms and avoid the overhead
of streaming a big list of terms back to the client.</p><p>Note that <code class="literal">shard_size</code> cannot be smaller than <code class="literal">size</code> if thats the case
elasticsearch will override it and reset it to be equal to <code class="literal">size</code>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_ordering"></a>Ordering</h3></div></div></div><p>Allow to control the ordering of the terms facets, to be ordered by
<code class="literal">count</code>, <code class="literal">term</code>, <code class="literal">reverse_count</code> or <code class="literal">reverse_term</code>. The default is
<code class="literal">count</code>. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "tag" : {
            "terms" : {
                "field" : "tag",
                "size" : 10,
                "order" : "term"
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_all_terms"></a>All Terms</h3></div></div></div><p>Allow to get all the terms in the terms facet, ones that do not match a
hit, will have a count of 0. Note, this should not be used with fields
that have many terms.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "tag" : {
            "terms" : {
                "field" : "tag",
                "all_terms" : true
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_excluding_terms"></a>Excluding Terms</h3></div></div></div><p>It is possible to specify a set of terms that should be excluded from
the terms facet request result:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : { }
    },
    "facets" : {
        "tag" : {
            "terms" : {
                "field" : "tag",
                "exclude" : ["term1", "term2"]
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_regex_patterns"></a>Regex Patterns</h3></div></div></div><p>The terms API allows to define regex expression that will control which
terms will be included in the faceted list, here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : { }
    },
    "facets" : {
        "tag" : {
            "terms" : {
                "field" : "tag",
                "regex" : "_regex expression here_",
                "regex_flags" : "DOTALL"
            }
        }
    }
}</pre></div><p>Check
<a class="ulink" href="http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#field_summary" target="_top">Java
Pattern API</a> for more details about <code class="literal">regex_flags</code> options.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_term_scripts"></a>Term Scripts</h3></div></div></div><p>Allow to define a script for terms facet to process the actual term that
will be used in the term facet collection, and also optionally control
its inclusion or not.</p><p>The script can either return a boolean value, with <code class="literal">true</code> to include it
in the facet collection, and <code class="literal">false</code> to exclude it from the facet
collection.</p><p>Another option is for the script to return a <code class="literal">string</code> controlling the
term that will be used to count against. The script execution will
include the term variable which is the current field term used.</p><p>For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "tag" : {
            "terms" : {
                "field" : "tag",
                "size" : 10,
                "script" : "term + 'aaa'"
            }
        }
    }
}</pre></div><p>And using the boolean feature:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "tag" : {
            "terms" : {
                "field" : "tag",
                "size" : 10,
                "script" : "term == 'aaa' ? true : false"
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_multi_fields_2"></a>Multi Fields</h3></div></div></div><p>The term facet can be executed against more than one field, returning
the aggregation result across those fields. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "tag" : {
            "terms" : {
                "fields" : ["tag1", "tag2"],
                "size" : 10
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_field"></a>Script Field</h3></div></div></div><p>A script that provides the actual terms that will be processed for a
given doc. A <code class="literal">script_field</code> (or <code class="literal">script</code> which will be used when no
<code class="literal">field</code> or <code class="literal">fields</code> are provided) can be set to provide it.</p><p>As an example, a search request (that is quite "heavy") can be executed
and use either <code class="literal">_source</code> itself or <code class="literal">_fields</code> (for stored fields) without
needing to load the terms to memory (at the expense of much slower
execution of the search, and causing more IO load):</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "my_facet" : {
            "terms" : {
                "script_field" : "_source.my_field",
                "size" : 10
            }
        }
    }
}</pre></div><p>Or:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "my_facet" : {
            "terms" : {
                "script_field" : "_fields['my_field']",
                "size" : 10
            }
        }
    }
}</pre></div><p>Note also, that the above will use the whole field value as a single
term.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_index_2"></a>_index</h3></div></div></div><p>The term facet allows to specify a special field name called <code class="literal">_index</code>.
This will return a facet count of hits per <code class="literal">_index</code> the search was
executed on (relevant when a search request spans more than one index).</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_memory_considerations_2"></a>Memory Considerations</h3></div></div></div><p>Term facet causes the relevant field values to be loaded into memory.
This means that per shard, there should be enough memory to contain
them. It is advisable to explicitly set the fields to be <code class="literal">not_analyzed</code>
or make sure the number of unique tokens a field can have is not large.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-facets.html">Facets</a></span>  <span class="breadcrumb-node">Range Facets</span></div><div class="navheader"><span class="prev"><a href="search-facets-terms-facet.html">
              &nbsp;
              Terms Facet</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-facets-histogram-facet.html">Histogram Facets
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-facets-range-facet"></a>Range Facets</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Facets are deprecated and will be removed in a future release. You are
encouraged to migrate to <a class="link" href="search-aggregations.html" title="Aggregations">aggregations</a> instead.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The equivalent aggregation would be the
<a class="link" href="search-aggregations-bucket-range-aggregation.html" title="Range Aggregation"><code class="literal">range</code></a>
aggregation.</p></div></div><p><code class="literal">range</code> facet allows to specify a set of ranges and get both the number
of docs (count) that fall within each range, and aggregated data either
based on the field, or using another field. Here is a simple example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "range1" : {
            "range" : {
                "field" : "field_name",
                "ranges" : [
                    { "to" : 50 },
                    { "from" : 20, "to" : 70 },
                    { "from" : 70, "to" : 120 },
                    { "from" : 150 }
                ]
            }
        }
    }
}</pre></div><p>Another option which is a bit more DSL enabled is to provide the ranges
on the actual field name, for example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "range1" : {
            "range" : {
                "my_field" : [
                    { "to" : 50 },
                    { "from" : 20, "to" : 70 },
                    { "from" : 70, "to" : 120 },
                    { "from" : 150 }
                ]
            }
        }
    }
}</pre></div><p>The <code class="literal">range</code> facet always includes the <code class="literal">from</code> parameter and excludes the
<code class="literal">to</code> parameter for each range.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_key_and_value"></a>Key and Value</h3></div></div></div><p>The <code class="literal">range</code> facet allows to use a different field to check if its value
falls within a range, and another field to compute aggregated data per
range (like total). For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "range1" : {
            "range" : {
                "key_field" : "field_name",
                "value_field" : "another_field_name",
                "ranges" : [
                    { "to" : 50 },
                    { "from" : 20, "to" : 70 },
                    { "from" : 70, "to" : 120 },
                    { "from" : 150 }
                ]
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_key_and_value"></a>Script Key and Value</h3></div></div></div><p>Sometimes, some munging of both the key and the value are needed. In the
key case, before it is checked if it falls within a range, and for the
value, when the statistical data is computed per range scripts can be
used. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "range1" : {
            "range" : {
                "key_script" : "doc['date'].date.minuteOfHour",
                "value_script" : "doc['num1'].value",
                "ranges" : [
                    { "to" : 50 },
                    { "from" : 20, "to" : 70 },
                    { "from" : 70, "to" : 120 },
                    { "from" : 150 }
                ]
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_date_ranges"></a>Date Ranges</h3></div></div></div><p>The range facet support also providing the range as string formatted
dates.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-facets.html">Facets</a></span>  <span class="breadcrumb-node">Histogram Facets</span></div><div class="navheader"><span class="prev"><a href="search-facets-range-facet.html">
              &nbsp;
              Range Facets</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-facets-date-histogram-facet.html">Date Histogram Facet
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-facets-histogram-facet"></a>Histogram Facets</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Facets are deprecated and will be removed in a future release. You are
encouraged to migrate to <a class="link" href="search-aggregations.html" title="Aggregations">aggregations</a> instead.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The equivalent aggregation would be the
<a class="link" href="search-aggregations-bucket-histogram-aggregation.html" title="Histogram Aggregation"><code class="literal">histogram</code></a>
aggregation.</p></div></div><p>The histogram facet works with numeric data by building a histogram
across intervals of the field values. Each value is "rounded" into an
interval (or placed in a bucket), and statistics are provided per
interval/bucket (count and total). Here is a simple example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "histo1" : {
            "histogram" : {
                "field" : "field_name",
                "interval" : 100
            }
        }
    }
}</pre></div><p>The above example will run a histogram facet on the <code class="literal">field_name</code> field,
with an <code class="literal">interval</code> of <code class="literal">100</code> (so, for example, a value of <code class="literal">1055</code> will be
placed within the <code class="literal">1000</code> bucket).</p><p>The interval can also be provided as a time based interval (using the
time format). This mainly make sense when working on date fields or
field that represent absolute milliseconds, here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "histo1" : {
            "histogram" : {
                "field" : "field_name",
                "time_interval" : "1.5h"
            }
        }
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_key_and_value_2"></a>Key and Value</h3></div></div></div><p>The histogram facet allows to use a different key and value. The key is
used to place the hit/document within the appropriate bucket, and the
value is used to compute statistical data (for example, total). Here is
an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "histo1" : {
            "histogram" : {
                "key_field" : "key_field_name",
                "value_field" : "value_field_name",
                "interval" : 100
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_key_and_value_2"></a>Script Key and Value</h3></div></div></div><p>Sometimes, some munging of both the key and the value are needed. In the
key case, before it is rounded into a bucket, and for the value, when
the statistical data is computed per bucket
<a class="link" href="modules-scripting.html" title="Scripting">scripts</a> can be used. Here
is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "histo1" : {
            "histogram" : {
                "key_script" : "doc['date'].date.minuteOfHour",
                "value_script" : "doc['num1'].value"
            }
        }
    }
}</pre></div><p>In the above sample, we can use a date type field called <code class="literal">date</code> to get
the minute of hour from it, and the total will be computed based on
another field <code class="literal">num1</code>. Note, in this case, no <code class="literal">interval</code> was provided, so
the bucket will be based directly on the <code class="literal">key_script</code> (no rounding).</p><p>Parameters can also be provided to the different scripts (preferable if
the script is the same, with different values for a specific parameter,
like "factor"):</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "histo1" : {
            "histogram" : {
                "key_script" : "doc['date'].date.minuteOfHour * factor1",
                "value_script" : "doc['num1'].value + factor2",
                "params" : {
                    "factor1" : 2,
                    "factor2" : 3
                }
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_memory_considerations_3"></a>Memory Considerations</h3></div></div></div><p>In order to implement the histogram facet, the relevant field values are
loaded into memory from the index. This means that per shard, there
should be enough memory to contain them. Since by default, dynamic
introduced types are <code class="literal">long</code> and <code class="literal">double</code>, one option to reduce the
memory footprint is to explicitly set the types for the relevant fields
to either <code class="literal">short</code>, <code class="literal">integer</code>, or <code class="literal">float</code> when possible.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-facets.html">Facets</a></span>  <span class="breadcrumb-node">Date Histogram Facet</span></div><div class="navheader"><span class="prev"><a href="search-facets-histogram-facet.html">
              &nbsp;
              Histogram Facets</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-facets-filter-facet.html">Filter Facets
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-facets-date-histogram-facet"></a>Date Histogram Facet</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Facets are deprecated and will be removed in a future release. You are
encouraged to migrate to <a class="link" href="search-aggregations.html" title="Aggregations">aggregations</a> instead.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The equivalent aggregation would be the
<a class="link" href="search-aggregations-bucket-datehistogram-aggregation.html" title="Date Histogram Aggregation"><code class="literal">date_histogram</code></a>
aggregation.</p></div></div><p>A specific histogram facet that can work with <code class="literal">date</code> field types
enhancing it over the regular
<a class="link" href="search-facets-histogram-facet.html" title="Histogram Facets">histogram facet</a>. Here is a quick example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "histo1" : {
            "date_histogram" : {
                "field" : "field_name",
                "interval" : "day"
            }
        }
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_interval"></a>Interval</h3></div></div></div><p>The <code class="literal">interval</code> allows to set the interval at which buckets will be
created for each hit. It allows for the constant values of <code class="literal">year</code>,
<code class="literal">quarter</code>, <code class="literal">month</code>, <code class="literal">week</code>, <code class="literal">day</code>, <code class="literal">hour</code>, <code class="literal">minute</code> ,<code class="literal">second</code>.</p><p>It also support time setting like <code class="literal">1.5h</code> (up to <code class="literal">w</code> for weeks).</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_time_zone_2"></a>Time Zone</h3></div></div></div><p>By default, times are stored as UTC milliseconds since the epoch. Thus,
all computation and "bucketing" / "rounding" is done on UTC. It is
possible to provide a time zone (both pre rounding, and post rounding)
value, which will cause all computations to take the relevant zone into
account. The time returned for each bucket/entry is milliseconds since
the epoch of the provided time zone.</p><p>The parameters are <code class="literal">pre_zone</code> (pre rounding based on interval) and
<code class="literal">post_zone</code> (post rounding based on interval). The <code class="literal">time_zone</code> parameter
simply sets the <code class="literal">pre_zone</code> parameter. By default, those are set to
<code class="literal">UTC</code>.</p><p>The zone value accepts either a numeric value for the hours offset, for
example: <code class="literal">"time_zone" : -2</code>. It also accepts a format of hours and
minutes, like <code class="literal">"time_zone" : "-02:30"</code>. Another option is to provide a
time zone accepted as one of the values listed
<a class="ulink" href="http://www.joda.org/joda-time/timezones.html" target="_top">here</a>.</p><p>Lets take an example. For <code class="literal">2012-04-01T04:15:30Z</code>, with a <code class="literal">pre_zone</code> of
<code class="literal">-08:00</code>. For <code class="literal">day</code> interval, the actual time by applying the time zone
and rounding falls under <code class="literal">2012-03-31</code>, so the returned value will be (in
millis) of <code class="literal">2012-03-31T00:00:00Z</code> (UTC). For <code class="literal">hour</code> interval, applying
the time zone results in <code class="literal">2012-03-31T20:15:30</code>, rounding it results in
<code class="literal">2012-03-31T20:00:00</code>, but, we want to return it in UTC (<code class="literal">post_zone</code> is
not set), so we convert it back to UTC: <code class="literal">2012-04-01T04:00:00Z</code>. Note, we
are consistent in the results, returning the rounded value in UTC.</p><p><code class="literal">post_zone</code> simply takes the result, and adds the relevant offset.</p><p>Sometimes, we want to apply the same conversion to UTC we did above for
<code class="literal">hour</code> also for <code class="literal">day</code> (and up) intervals. We can set
<code class="literal">pre_zone_adjust_large_interval</code> to <code class="literal">true</code>, which will apply the same
conversion done for <code class="literal">hour</code> interval in the example, to <code class="literal">day</code> and above
intervals (it can be set regardless of the interval, but only kick in
when using <code class="literal">day</code> and higher intervals).</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_factor"></a>Factor</h3></div></div></div><p>The date histogram works on numeric values (since time is stored in
milliseconds since the epoch in UTC). But, sometimes, systems will store
a different resolution (like seconds since UTC) in a numeric field. The
<code class="literal">factor</code> parameter can be used to change the value in the field to
milliseconds to actual do the relevant rounding, and then be applied
again to get to the original unit. For example, when storing in a
numeric field seconds resolution, the <code class="literal">factor</code> can be set to <code class="literal">1000</code>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_pre_post_offset"></a>Pre / Post Offset</h3></div></div></div><p>Specific offsets can be provided for pre rounding and post rounding. The
<code class="literal">pre_offset</code> for pre rounding, and <code class="literal">post_offset</code> for post rounding. The
format is the date time format (<code class="literal">1h</code>, <code class="literal">1d</code>, ).</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_value_field"></a>Value Field</h3></div></div></div><p>The date_histogram facet allows to use a different key (of type date)
which controls the bucketing, with a different value field which will
then return the total and mean for that field values of the hits within
the relevant bucket. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "histo1" : {
            "date_histogram" : {
                "key_field" : "timestamp",
                "value_field" : "price",
                "interval" : "day"
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_value_field"></a>Script Value Field</h3></div></div></div><p>A script can be used to compute the value that will then be used to
compute the total and mean for a bucket. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "histo1" : {
            "date_histogram" : {
                "key_field" : "timestamp",
                "value_script" : "doc['price'].value * 2",
                "interval" : "day"
            }
        }
    }
}</pre></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-facets.html">Facets</a></span>  <span class="breadcrumb-node">Filter Facets</span></div><div class="navheader"><span class="prev"><a href="search-facets-date-histogram-facet.html">
              &nbsp;
              Date Histogram Facet</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-facets-query-facet.html">Query Facets
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-facets-filter-facet"></a>Filter Facets</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Facets are deprecated and will be removed in a future release. You are
encouraged to migrate to <a class="link" href="search-aggregations.html" title="Aggregations">aggregations</a> instead.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The equivalent aggregation would be the
<a class="link" href="search-aggregations-bucket-filter-aggregation.html" title="Filter Aggregation"><code class="literal">filter</code></a>
aggregation.</p></div></div><p>A filter facet (not to be confused with a
<a class="link" href="search-facets.html" title="Facets">facet filter</a>) allows you to
return a count of the hits matching the filter. The filter itself can be
expressed using the <a class="link" href="query-dsl.html" title="Query DSL">Query DSL</a>. For
example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "facets" : {
        "wow_facet" : {
            "filter" : {
                "term" : { "tag" : "wow" }
            }
        }
    }
}</pre></div><p>Note, filter facet filters are faster than query facet when using native
filters (non query wrapper ones).</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-facets.html">Facets</a></span>  <span class="breadcrumb-node">Query Facets</span></div><div class="navheader"><span class="prev"><a href="search-facets-filter-facet.html">
              &nbsp;
              Filter Facets</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-facets-statistical-facet.html">Statistical Facet
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-facets-query-facet"></a>Query Facets</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Facets are deprecated and will be removed in a future release. You are
encouraged to migrate to <a class="link" href="search-aggregations.html" title="Aggregations">aggregations</a> instead.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>There is no equivalent aggregation but you can use the
<a class="link" href="search-aggregations-bucket-filter-aggregation.html" title="Filter Aggregation"><code class="literal">filter</code></a> aggregation and wrap
the query inside a <a class="link" href="query-dsl-query-filter.html" title="Query Filter">query filter</a>.</p></div></div><p>A facet query allows to return a count of the hits matching the facet
query. The query itself can be expressed using the Query DSL. For
example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "facets" : {
        "wow_facet" : {
            "query" : {
                "term" : { "tag" : "wow" }
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-facets.html">Facets</a></span>  <span class="breadcrumb-node">Statistical Facet</span></div><div class="navheader"><span class="prev"><a href="search-facets-query-facet.html">
              &nbsp;
              Query Facets</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-facets-terms-stats-facet.html">Terms Stats Facet
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-facets-statistical-facet"></a>Statistical Facet</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Facets are deprecated and will be removed in a future release. You are
encouraged to migrate to <a class="link" href="search-aggregations.html" title="Aggregations">aggregations</a> instead.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The equivalent aggregation would be the
<a class="link" href="search-aggregations-metrics-stats-aggregation.html" title="Stats Aggregation"><code class="literal">stats</code></a>
aggregation.</p></div></div><p>Statistical facet allows to compute statistical data on a numeric
fields. The statistical data include count, total, sum of squares, mean
(average), minimum, maximum, variance, and standard deviation. Here is
an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "stat1" : {
            "statistical" : {
                "field" : "num1"
            }
        }
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_script_field_2"></a>Script field</h3></div></div></div><p>When using <code class="literal">field</code>, the numeric value of the field is used to compute
the statistical information. Sometimes, several fields values represent
the statistics we want to compute, or some sort of mathematical
evaluation. The script field allows to define a
<a class="link" href="modules-scripting.html" title="Scripting">script</a> to evaluate, with
its value used to compute the statistical information. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "stat1" : {
            "statistical" : {
                "script" : "doc['num1'].value + doc['num2'].value"
            }
        }
    }
}</pre></div><p>Parameters can also be provided to the different scripts (preferable if
the script is the same, with different values for a specific parameter,
like "factor"):</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "stat1" : {
            "statistical" : {
                "script" : "(doc['num1'].value + doc['num2'].value) * factor",
                "params" : {
                    "factor" : 5
                }
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_multi_field"></a>Multi Field</h3></div></div></div><p>The statistical facet can be executed against more than one field,
returning the aggregation result across those fields. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "stat1" : {
            "statistical" : {
                "fields" : ["num1", "num2"]
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_memory_considerations_4"></a>Memory Considerations</h3></div></div></div><p>In order to implement the statistical facet, the relevant field values
are loaded into memory from the index. This means that per shard, there
should be enough memory to contain them. Since by default, dynamic
introduced types are <code class="literal">long</code> and <code class="literal">double</code>, one option to reduce the
memory footprint is to explicitly set the types for the relevant fields
to either <code class="literal">short</code>, <code class="literal">integer</code>, or <code class="literal">float</code> when possible.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-facets.html">Facets</a></span>  <span class="breadcrumb-node">Terms Stats Facet</span></div><div class="navheader"><span class="prev"><a href="search-facets-statistical-facet.html">
              &nbsp;
              Statistical Facet</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-facets-geo-distance-facet.html">Geo Distance Facets
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-facets-terms-stats-facet"></a>Terms Stats Facet</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Facets are deprecated and will be removed in a future release. You are
encouraged to migrate to <a class="link" href="search-aggregations.html" title="Aggregations">aggregations</a> instead.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The equivalent aggregation would be the
<a class="link" href="search-aggregations-bucket-terms-aggregation.html" title="Terms Aggregation"><code class="literal">terms</code></a>
aggregation with an inner
<a class="link" href="search-aggregations-metrics-stats-aggregation.html" title="Stats Aggregation"><code class="literal">stats</code></a>
aggregation.</p></div></div><p>The <code class="literal">terms_stats</code> facet combines both the
<a class="link" href="search-facets-terms-facet.html" title="Terms Facet">terms</a> and
<a class="link" href="search-facets-statistical-facet.html" title="Statistical Facet">statistical</a>
allowing to compute stats computed on a field, per term value driven by
another field. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {  }
    },
    "facets" : {
        "tag_price_stats" : {
            "terms_stats" : {
                "key_field" : "tag",
                "value_field" : "price"
            }
        }
    }
}</pre></div><p>The <code class="literal">size</code> parameter controls how many facet entries will be returned.
It defaults to <code class="literal">10</code>. Setting it to 0 will return all terms matching the
hits (be careful not to return too many results).</p><p>One can also set <code class="literal">shard_size</code> (in addition to <code class="literal">size</code>) which will determine
how many term entries will be requested from each shard. When dealing
with field with high cardinality (at least higher than the requested <code class="literal">size</code>)
The greater <code class="literal">shard_size</code> is - the more accurate the result will be (and the
more expensive the overall facet computation will be). <code class="literal">shard_size</code> is there
to enable you to increase accuracy yet still avoid returning too many
terms_stats entries back to the client.</p><p>Ordering is done by setting <code class="literal">order</code>, with possible values of <code class="literal">term</code>,
<code class="literal">reverse_term</code>, <code class="literal">count</code>, <code class="literal">reverse_count</code>, <code class="literal">total</code>, <code class="literal">reverse_total</code>,
<code class="literal">min</code>, <code class="literal">reverse_min</code>, <code class="literal">max</code>, <code class="literal">reverse_max</code>, <code class="literal">mean</code>, <code class="literal">reverse_mean</code>.
Defaults to <code class="literal">count</code>.</p><p>The value computed can also be a script, using the <code class="literal">value_script</code>
instead of <code class="literal">value_field</code>, in which case the <code class="literal">lang</code> can control its
language, and <code class="literal">params</code> allow to provide custom parameters (as in other
scripted components).</p><p>Note, the terms stats can work with multi valued key fields, or multi
valued value fields, but not when both are multi valued (as ordering is
not maintained).</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-facets.html">Facets</a></span>  <span class="breadcrumb-node">Geo Distance Facets</span></div><div class="navheader"><span class="prev"><a href="search-facets-terms-stats-facet.html">
              &nbsp;
              Terms Stats Facet</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-facets-migrating-to-aggs.html">Migrating to aggregations
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-facets-geo-distance-facet"></a>Geo Distance Facets</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Facets are deprecated and will be removed in a future release. You are
encouraged to migrate to <a class="link" href="search-aggregations.html" title="Aggregations">aggregations</a> instead.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The equivalent aggregation would be the
<a class="link" href="search-aggregations-bucket-geodistance-aggregation.html" title="Geo Distance Aggregation"><code class="literal">geo_distance</code></a>
aggregation.</p></div></div><p>The geo_distance facet is a facet providing information for ranges of
distances from a provided geo_point including count of the number of
hits that fall within each range, and aggregation information (like
total).</p><p>Assuming the following sample doc:</p><div class="pre_wrapper"><pre class="programlisting">{
    "pin" : {
        "location" : {
            "lat" : 40.12,
            "lon" : -71.34
        }
    }
}</pre></div><p>Here is an example that create a <code class="literal">geo_distance</code> facet from a
<code class="literal">pin.location</code> of 40,-70, and a set of ranges:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "geo1" : {
            "geo_distance" : {
                "pin.location" : {
                    "lat" : 40,
                    "lon" : -70
                },
                "ranges" : [
                    { "to" : 10 },
                    { "from" : 10, "to" : 20 },
                    { "from" : 20, "to" : 100 },
                    { "from" : 100 }
                ]
            }
        }
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_accepted_formats"></a>Accepted Formats</h3></div></div></div><p>In much the same way the geo_point type can accept different
representation of the geo point, the filter can accept it as well:</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_lat_lon_as_properties_2"></a>Lat Lon As Properties</h4></div></div></div><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "geo1" : {
            "geo_distance" : {
                "pin.location" : {
                    "lat" : 40,
                    "lon" : -70
                },
                "ranges" : [
                    { "to" : 10 },
                    { "from" : 10, "to" : 20 },
                    { "from" : 20, "to" : 100 },
                    { "from" : 100 }
                ]
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_lat_lon_as_array_2"></a>Lat Lon As Array</h4></div></div></div><p>Format in <code class="literal">[lon, lat]</code>, note, the order of lon/lat here in order to
conform with <a class="ulink" href="http://geojson.org/" target="_top">GeoJSON</a>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "geo1" : {
            "geo_distance" : {
                "pin.location" : [40, -70],
                "ranges" : [
                    { "to" : 10 },
                    { "from" : 10, "to" : 20 },
                    { "from" : 20, "to" : 100 },
                    { "from" : 100 }
                ]
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_lat_lon_as_string_2"></a>Lat Lon As String</h4></div></div></div><p>Format in <code class="literal">lat,lon</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "geo1" : {
            "geo_distance" : {
                "pin.location" : "40, -70",
                "ranges" : [
                    { "to" : 10 },
                    { "from" : 10, "to" : 20 },
                    { "from" : 20, "to" : 100 },
                    { "from" : 100 }
                ]
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_geohash_2"></a>Geohash</h4></div></div></div><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "geo1" : {
            "geo_distance" : {
                "pin.location" : "drm3btev3e86",
                "ranges" : [
                    { "to" : 10 },
                    { "from" : 10, "to" : 20 },
                    { "from" : 20, "to" : 100 },
                    { "from" : 100 }
                ]
            }
        }
    }
}</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_ranges"></a>Ranges</h3></div></div></div><p>When a <code class="literal">to</code> or <code class="literal">from</code> are not set, they are assumed to be unbounded.
Ranges are allowed to overlap, basically, each range is treated by
itself.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_options_4"></a>Options</h3></div></div></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Option </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">unit</code></p></td><td class="entry" align="left" valign="top"><p>The unit the ranges are provided in. Defaults to <code class="literal">km</code>. Can also
be <code class="literal">mi</code>, <code class="literal">miles</code>, <code class="literal">in</code>, <code class="literal">inch</code>, <code class="literal">yd</code>, <code class="literal">yards</code>, <code class="literal">ft</code>, <code class="literal">feet</code>, <code class="literal">kilometers</code>, <code class="literal">mm</code>, <code class="literal">millimeters</code>, <code class="literal">cm</code>, <code class="literal">centimeters</code>, <code class="literal">m</code> or <code class="literal">meters</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">distance_type</code></p></td><td class="entry" align="left" valign="top"><p>How to compute the distance. Can either be <code class="literal">arc</code>
(better precision), <code class="literal">sloppy_arc</code> (faster) or <code class="literal">plane</code> (fastest). Defaults to <code class="literal">sloppy_arc</code>.</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_value_options"></a>Value Options</h3></div></div></div><p>On top of the count of hits falling within each range, aggregated data
can be provided (total) as well. By default, the aggregated data will
simply use the distance calculated, but the value can be extracted
either using a different numeric field, or a script. Here is an example
of using a different numeric field:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "geo1" : {
            "geo_distance" : {
                "pin.location" : "drm3btev3e86",
                "value_field" : "num1",
                "ranges" : [
                    { "to" : 10 },
                    { "from" : 10, "to" : 20 },
                    { "from" : 20, "to" : 100 },
                    { "from" : 100 }
                ]
            }
        }
    }
}</pre></div><p>And here is an example of using a script:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "match_all" : {}
    },
    "facets" : {
        "geo1" : {
            "geo_distance" : {
                "pin.location" : "drm3btev3e86",
                "value_script" : "doc['num1'].value * factor",
                "params" : {
                    "factor" : 5
                }
                "ranges" : [
                    { "to" : 10 },
                    { "from" : 10, "to" : 20 },
                    { "from" : 20, "to" : 100 },
                    { "from" : 100 }
                ]
            }
        }
    }
}</pre></div><p>Note the params option, allowing to pass parameters to the script
(resulting in faster script execution instead of providing the values
within the script each time).</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><h3><code class="literal">geo_point</code> Type</h3><p>The facet <span class="strong emphasis"><strong>requires</strong></span> the <code class="literal">geo_point</code> type to be set on the relevant
field.</p></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><h3>Multi Location Per Document</h3><p>The facet can work with multiple locations per document.</p></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-facets.html">Facets</a></span>  <span class="breadcrumb-node">Migrating to aggregations</span></div><div class="navheader"><span class="prev"><a href="search-facets-geo-distance-facet.html">
              &nbsp;
              Geo Distance Facets</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-suggesters.html">Suggesters
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-facets-migrating-to-aggs"></a>Migrating to aggregations</h2></div></div></div><p>Facets have been deprecated in favor of <a class="link" href="search-aggregations.html" title="Aggregations">aggregations</a>
and as such it is recommended to migrate existing code using facets to
aggregations.</p><p>It is recommended to read the documentation about aggregations before this
section.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_simple_cases"></a>Simple cases</h3></div></div></div><p>In quite a number of cases, the migration is rather straightforward as simple
facets have their direct aggregation equivalent and the only thing that is
required is to replace <code class="literal">facets</code> with <code class="literal">aggs</code>.</p><p>For instance:</p><div class="pre_wrapper"><pre class="programlisting">{
    "facets" : {
        "wow" : {
            "filter" : {
                "term" : { "tag" : "wow" }
            }
        }
    }
}</pre></div><p>can be translated to the following aggregation:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "wow" : {
            "filter" : {
                "term" : { "tag" : "wow" }
            }
        }
    }
}</pre></div><p>We will now spend more time on facets that dont have their direct aggregation
equivalent and need more modifications.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_query_facets"></a>Query facets</h3></div></div></div><p>There is no <code class="literal">query</code> aggregation so such facets must be migrated to the <code class="literal">filter</code>
aggregation.</p><p>For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "facets" : {
        "wow" : {
            "query" : {
                "query_string" : {
                    "query" : "tag:wow"
                }
            }
        }
    }
}</pre></div><p>can be replaced with the following
<a class="link" href="search-aggregations-bucket-filter-aggregation.html" title="Filter Aggregation">filter aggregation</a> that uses
the <a class="link" href="query-dsl-query-filter.html" title="Query Filter">query filter</a>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "wow" : {
            "filter" : {
                "query" : {
                    "query_string" : {
                        "query" : "tag:wow"
                    }
                }
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_term_stats"></a>Term stats</h3></div></div></div><p>There is no <code class="literal">term_stats</code> aggregation, so you actually need to create a
<a class="link" href="search-aggregations-bucket-terms-aggregation.html" title="Terms Aggregation">terms aggregation</a> that will
create buckets that will be processed with a
<a class="link" href="search-aggregations-metrics-stats-aggregation.html" title="Stats Aggregation">stats aggregation</a>.</p><p>For example</p><div class="pre_wrapper"><pre class="programlisting">{
    "facets" : {
        "tag_price_stats" : {
            "terms_stats" : {
                "key_field" : "tag",
                "value_field" : "price"
            }
        }
    }
}</pre></div><p>can be replaced with</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "tags" : {
            "terms" : {
                "field" : "tag"
            },
            "aggs" : {
                "price_stats" : {
                    "stats" : {
                        "field" : "price"
                    }
                }
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_value_field_2"></a>value_field</h3></div></div></div><p>The <code class="literal">histogram</code>, <code class="literal">date_histogram</code>, <code class="literal">range</code> and <code class="literal">geo_distance</code> facets have a
<code class="literal">value_field</code> parameter that allows to compute statistics per bucket. With
aggregations this needs to be changed to a sub
<a class="link" href="search-aggregations-metrics-stats-aggregation.html" title="Stats Aggregation">stats aggregation</a>.</p><p>For example</p><div class="pre_wrapper"><pre class="programlisting">{
    "facets" : {
        "histo1" : {
            "date_histogram" : {
                "key_field" : "timestamp",
                "value_field" : "price",
                "interval" : "day"
            }
        }
    }
}</pre></div><p>can be replaced with</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "histo1" : {
            "date_histogram" : {
                "field" : "timestamp",
                "interval" : "day"
            },
            "aggs" : {
                "price_stats" : {
                    "stats" : {
                        "field" : "price"
                    }
                }
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_global_scope"></a>Global scope</h3></div></div></div><p>Facets allow to set a global scope by setting <code class="literal">global : true</code> in the facet
definition. With aggregations, you will need to put your aggregation under a
<a class="link" href="search-aggregations-bucket-global-aggregation.html" title="Global Aggregation">global aggregation</a> instead.</p><p>For example</p><div class="pre_wrapper"><pre class="programlisting">{
    "facets" : {
        "terms1" : {
            "terms" : { ... },
            "global" : true
        }
    }
}</pre></div><p>can be replaced with</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "global_count" : {
            "global" : {},
            "aggs" : {
                "terms1" : {
                    "terms" : { ... }
                }
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_facet_filters"></a>Facet filters</h3></div></div></div><p>Facet filters can be replaced with a
<a class="link" href="search-aggregations-bucket-filter-aggregation.html" title="Filter Aggregation">filter aggregation</a>.</p><p>For example</p><div class="pre_wrapper"><pre class="programlisting">{
    "facets" : {
        "&lt;FACET NAME&gt;" : {
            "&lt;FACET TYPE&gt;" : {
                ...
            },
            "facet_filter" : {
                "term" : { "user" : "mvg" }
            }
        }
    }
}</pre></div><p>can be replaced with</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "filter1" : {
            "filter" : {
                "term" : { "user" : "mvg" }
            },
            "aggs" : {
                "&lt;AGG NAME&gt;" : {
                    "&lt;AGG TYPE&gt;" : {
                        ...
                    }
                }
            }
        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_nested"></a>Nested</h3></div></div></div><p>Aggregations have a dedicated
<a class="link" href="search-aggregations-bucket-nested-aggregation.html" title="Nested Aggregation">nested aggregation</a> to deal
with nested objects.</p><p>For example</p><div class="pre_wrapper"><pre class="programlisting">{
    "facets" : {
        "facet1" : {
            "terms" : {
                "field" : "name"
            },
            "nested" : "obj1"
        }
    }
}</pre></div><p>can be replaced with</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "agg1" : {
            "nested" : {
                "path" : "obj1"
            },
            "aggs" : {
                "agg1": {
                    "terms": {
                        "field" : "obj1.name"
                    }
                }
            }
        }
    }
}</pre></div><p>Note how fields are identified with their full path instead of relative path.</p><p>Similarly, this more complex facet that combines <code class="literal">nested</code> and facet filters:</p><div class="pre_wrapper"><pre class="programlisting">{
    "facets" : {
        "facet1" : {
            "terms" : {
                "field" : "name"
            },
            "nested" : "obj1",
            "facet_filter" : {
                "term" : { "color" : "blue" }
            }
        }
    }
}</pre></div><p>can be replaced with the following aggregation, which puts a terms aggregation
under a filter aggregation, and the filter aggregation under a nested
aggregation:</p><div class="pre_wrapper"><pre class="programlisting">{
    "aggs" : {
        "nested_obj1" : {
            "nested" : {
                "path" : "obj1"
            },
            "aggs" : {
                "color_filter" : {
                    "filter" : {
                        "term" : { "obj1.color" : "blue" }
                    },
                    "aggs" : {
                        "name_terms" : {
                            "terms" : {
                                "field" : "obj1.name"
                            }
                        }
                    }
                }
            }
        }
    }
}</pre></div><p>In short, this aggregation first moves from the root documents to their nested
documents following the path <code class="literal">obj1</code>. Then for each nested document, it filters
out those that are not blue, and for the remaining documents, it computes a
terms aggregation on the <code class="literal">name</code> field.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">Suggesters</span></div><div class="navheader"><span class="prev"><a href="search-facets-migrating-to-aggs.html">
              &nbsp;
              Migrating to aggregations</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-suggesters-term.html">Term suggester
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-suggesters"></a>Suggesters</h2></div></div></div><p>The suggest feature suggests similar looking terms based on a provided
text by using a suggester. Parts of the suggest feature are still under
development.</p><p>The suggest request part is either defined alongside the query part in a
<code class="literal">_search</code> request or via the REST <code class="literal">_suggest</code> endpoint.</p><div class="pre_wrapper"><pre class="programlisting">curl -s -XPOST 'localhost:9200/_search' -d '{
  "query" : {
    ...
  },
  "suggest" : {
    ...
  }
}'</pre></div><p>Suggest requests executed against the <code class="literal">_suggest</code> endpoint should omit
the surrounding <code class="literal">suggest</code> element which is only used if the suggest
request is part of a search.</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/_suggest' -d '{
  "my-suggestion" : {
    "text" : "the amsterdma meetpu",
    "term" : {
      "field" : "body"
    }
  }
}'</pre></div><p>Several suggestions can be specified per request. Each suggestion is
identified with an arbitrary name. In the example below two suggestions
are requested. Both <code class="literal">my-suggest-1</code> and <code class="literal">my-suggest-2</code> suggestions use
the <code class="literal">term</code> suggester, but have a different <code class="literal">text</code>.</p><div class="pre_wrapper"><pre class="programlisting">"suggest" : {
  "my-suggest-1" : {
    "text" : "the amsterdma meetpu",
    "term" : {
      "field" : "body"
    }
  },
  "my-suggest-2" : {
    "text" : "the rottredam meetpu",
    "term" : {
      "field" : "title"
    }
  }
}</pre></div><p>The below suggest response example includes the suggestion response for
<code class="literal">my-suggest-1</code> and <code class="literal">my-suggest-2</code>. Each suggestion part contains
entries. Each entry is effectively a token from the suggest text and
contains the suggestion entry text, the original start offset and length
in the suggest text and if found an arbitrary number of options.</p><div class="pre_wrapper"><pre class="programlisting">{
  ...
  "suggest": {
    "my-suggest-1": [
      {
        "text" : "amsterdma",
        "offset": 4,
        "length": 9,
        "options": [
           ...
        ]
      },
      ...
    ],
    "my-suggest-2" : [
      ...
    ]
  }
  ...
}</pre></div><p>Each options array contains an option object that includes the
suggested text, its document frequency and score compared to the suggest
entry text. The meaning of the score depends on the used suggester. The
term suggesters score is based on the edit distance.</p><div class="pre_wrapper"><pre class="programlisting">"options": [
  {
    "text": "amsterdam",
    "freq": 77,
    "score": 0.8888889
  },
  ...
]</pre></div><h3><a id="global-suggest"></a>Global suggest text</h3><p>To avoid repetition of the suggest text, it is possible to define a
global text. In the example below the suggest text is defined globally
and applies to the <code class="literal">my-suggest-1</code> and <code class="literal">my-suggest-2</code> suggestions.</p><div class="pre_wrapper"><pre class="programlisting">"suggest" : {
  "text" : "the amsterdma meetpu",
  "my-suggest-1" : {
    "term" : {
      "field" : "title"
    }
  },
  "my-suggest-2" : {
    "term" : {
      "field" : "body"
    }
  }
}</pre></div><p>The suggest text can in the above example also be specified as
suggestion specific option. The suggest text specified on suggestion
level override the suggest text on the global level.</p><h3><a id="_other_suggest_example"></a>Other suggest example</h3><p>In the below example we request suggestions for the following suggest
text: <code class="literal">devloping distibutd saerch engies</code> on the <code class="literal">title</code> field with a
maximum of 3 suggestions per term inside the suggest text. Note that in
this example we use the <code class="literal">count</code> search type. This isnt required, but a
nice optimization. The suggestions are gather in the <code class="literal">query</code> phase and
in the case that we only care about suggestions (so no hits) we dont
need to execute the <code class="literal">fetch</code> phase.</p><div class="pre_wrapper"><pre class="programlisting">curl -s -XPOST 'localhost:9200/_search?search_type=count' -d '{
  "suggest" : {
    "my-title-suggestions-1" : {
      "text" : "devloping distibutd saerch engies",
      "term" : {
        "size" : 3,
        "field" : "title"
      }
    }
  }
}'</pre></div><p>The above request could yield the response as stated in the code example
below. As you can see if we take the first suggested options of each
suggestion entry we get <code class="literal">developing distributed search engines</code> as
result.</p><div class="pre_wrapper"><pre class="programlisting">{
  ...
  "suggest": {
    "my-title-suggestions-1": [
      {
        "text": "devloping",
        "offset": 0,
        "length": 9,
        "options": [
          {
            "text": "developing",
            "freq": 77,
            "score": 0.8888889
          },
          {
            "text": "deloping",
            "freq": 1,
            "score": 0.875
          },
          {
            "text": "deploying",
            "freq": 2,
            "score": 0.7777778
          }
        ]
      },
      {
        "text": "distibutd",
        "offset": 10,
        "length": 9,
        "options": [
          {
            "text": "distributed",
            "freq": 217,
            "score": 0.7777778
          },
          {
            "text": "disributed",
            "freq": 1,
            "score": 0.7777778
          },
          {
            "text": "distribute",
            "freq": 1,
            "score": 0.7777778
          }
        ]
      },
      {
        "text": "saerch",
        "offset": 20,
        "length": 6,
        "options": [
          {
            "text": "search",
            "freq": 1038,
            "score": 0.8333333
          },
          {
            "text": "smerch",
            "freq": 3,
            "score": 0.8333333
          },
          {
            "text": "serch",
            "freq": 2,
            "score": 0.8
          }
        ]
      },
      {
        "text": "engies",
        "offset": 27,
        "length": 6,
        "options": [
          {
            "text": "engines",
            "freq": 568,
            "score": 0.8333333
          },
          {
            "text": "engles",
            "freq": 3,
            "score": 0.8333333
          },
          {
            "text": "eggies",
            "freq": 1,
            "score": 0.8333333
          }
        ]
      }
    ]
  }
  ...
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-suggesters.html">Suggesters</a></span>  <span class="breadcrumb-node">Term suggester</span></div><div class="navheader"><span class="prev"><a href="search-suggesters.html">
              &nbsp;
              Suggesters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-suggesters-phrase.html">Phrase Suggester
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-suggesters-term"></a>Term suggester</h2></div></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>In order to understand the format of suggestions, please
read the <a class="xref" href="search-suggesters.html" title="Suggesters"><em>Suggesters</em></a> page first.</p></div></div><p>The <code class="literal">term</code> suggester suggests terms based on edit distance. The provided
suggest text is analyzed before terms are suggested. The suggested terms
are provided per analyzed suggest text token. The <code class="literal">term</code> suggester
doesnt take the query into account that is part of request.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_common_suggest_options"></a>Common suggest options:</h3></div></div></div><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">text</code>
</p>
</td><td class="entry" valign="top">
<p>
    The suggest text. The suggest text is a required option that
    needs to be set globally or per suggestion.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">field</code>
</p>
</td><td class="entry" valign="top">
<p>
    The field to fetch the candidate suggestions from. This is
    an required option that either needs to be set globally or per
    suggestion.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">analyzer</code>
</p>
</td><td class="entry" valign="top">
<p>
    The analyzer to analyse the suggest text with. Defaults
    to the search analyzer of the suggest field.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">size</code>
</p>
</td><td class="entry" valign="top">
<p>
    The maximum corrections to be returned per suggest text
    token.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">sort</code>
</p>
</td><td class="entry" valign="top">
<p>
    Defines how suggestions should be sorted per suggest text
    term. Two possible values:
</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">score</code>:     Sort by score first, then document frequency and
                    then the term itself.
</li><li class="listitem">
<code class="literal">frequency</code>: Sort by document frequency first, then similarity
                    score and then the term itself.
</li></ul></div>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">suggest_mode</code>
</p>
</td><td class="entry" valign="top">
<p>
    The suggest mode controls what suggestions are
    included or controls for what suggest text terms, suggestions should be
    suggested. Three possible values can be specified:
</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">missing</code>:  Only provide suggestions for suggest text terms that are
                    not in the index. This is the default.
</li><li class="listitem">
<code class="literal">popular</code>:  Only suggest suggestions that occur in more docs then
                    the original suggest text term.
</li><li class="listitem">
<code class="literal">always</code>:   Suggest any matching suggestions based on terms in the
                    suggest text.
</li></ul></div>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_other_term_suggest_options"></a>Other term suggest options:</h3></div></div></div><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">lowercase_terms</code>
</p>
</td><td class="entry" valign="top">
<p>
    Lower cases the suggest text terms after text analysis.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max_edits</code>
</p>
</td><td class="entry" valign="top">
<p>
    The maximum edit distance candidate suggestions can
    have in order to be considered as a suggestion. Can only be a value
    between 1 and 2. Any other value result in an bad request error being
    thrown. Defaults to 2.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">prefix_length</code>
</p>
</td><td class="entry" valign="top">
<p>
    The number of minimal prefix characters that must
    match in order be a candidate suggestions. Defaults to 1. Increasing
    this number improves spellcheck performance. Usually misspellings dont
    occur in the beginning of terms. (Old name "prefix_len" is deprecated)
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">min_word_length</code>
</p>
</td><td class="entry" valign="top">
<p>
    The minimum length a suggest text term must have in
    order to be included. Defaults to 4. (Old name "min_word_len" is deprecated)
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">shard_size</code>
</p>
</td><td class="entry" valign="top">
<p>
    Sets the maximum number of suggestions to be retrieved
    from each individual shard. During the reduce phase only the top N
    suggestions are returned based on the <code class="literal">size</code> option. Defaults to the
    <code class="literal">size</code> option. Setting this to a value higher than the <code class="literal">size</code> can be
    useful in order to get a more accurate document frequency for spelling
    corrections at the cost of performance. Due to the fact that terms are
    partitioned amongst shards, the shard level document frequencies of
    spelling corrections may not be precise. Increasing this will make these
    document frequencies more precise.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max_inspections</code>
</p>
</td><td class="entry" valign="top">
<p>
    A factor that is used to multiply with the
    <code class="literal">shards_size</code> in order to inspect more candidate spell corrections on
    the shard level. Can improve accuracy at the cost of performance.
    Defaults to 5.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">min_doc_freq</code>
</p>
</td><td class="entry" valign="top">
<p>
    The minimal threshold in number of documents a
    suggestion should appear in. This can be specified as an absolute number
    or as a relative percentage of number of documents. This can improve
    quality by only suggesting high frequency terms. Defaults to 0f and is
    not enabled. If a value higher than 1 is specified then the number
    cannot be fractional. The shard level document frequencies are used for
    this option.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max_term_freq</code>
</p>
</td><td class="entry" valign="top">
<p>
    The maximum threshold in number of documents a
    suggest text token can exist in order to be included. Can be a relative
    percentage number (e.g 0.4) or an absolute number to represent document
    frequencies. If an value higher than 1 is specified then fractional can
    not be specified. Defaults to 0.01f. This can be used to exclude high
    frequency terms from being spellchecked. High frequency terms are
    usually spelled correctly on top of this also improves the spellcheck
    performance. The shard level document frequencies are used for this
    option.
</p>
</td></tr></tbody></table></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-suggesters.html">Suggesters</a></span>  <span class="breadcrumb-node">Phrase Suggester</span></div><div class="navheader"><span class="prev"><a href="search-suggesters-term.html">
              &nbsp;
              Term suggester</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-suggesters-completion.html">Completion Suggester
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-suggesters-phrase"></a>Phrase Suggester</h2></div></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>In order to understand the format of suggestions, please
read the <a class="xref" href="search-suggesters.html" title="Suggesters"><em>Suggesters</em></a> page first.</p></div></div><p>The <code class="literal">term</code> suggester provides a very convenient API to access word
alternatives on a per token basis within a certain string distance. The API
allows accessing each token in the stream individually while
suggest-selection is left to the API consumer. Yet, often pre-selected
suggestions are required in order to present to the end-user. The
<code class="literal">phrase</code> suggester adds additional logic on top of the <code class="literal">term</code> suggester
to select entire corrected phrases instead of individual tokens weighted
based on <code class="literal">ngram-language</code> models. In practice this suggester will be
able to make better decisions about which tokens to pick based on
co-occurence and frequencies.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_api_example"></a>API Example</h3></div></div></div><p>The <code class="literal">phrase</code> request is defined along side the query part in the json
request:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/_search' -d '{
  "suggest" : {
    "text" : "Xor the Got-Jewel",
    "simple_phrase" : {
      "phrase" : {
        "analyzer" : "body",
        "field" : "bigram",
        "size" : 1,
        "real_word_error_likelihood" : 0.95,
        "max_errors" : 0.5,
        "gram_size" : 2,
        "direct_generator" : [ {
          "field" : "body",
          "suggest_mode" : "always",
          "min_word_length" : 1
        } ],
        "highlight": {
          "pre_tag": "&lt;em&gt;",
          "post_tag": "&lt;/em&gt;"
        }
      }
    }
  }
}'</pre></div><p>The response contains suggestions scored by the most likely spell
correction first. In this case we received the expected correction
<code class="literal">xorr the god jewel</code> first while the second correction is less
conservative where only one of the errors is corrected. Note, the
request is executed with <code class="literal">max_errors</code> set to <code class="literal">0.5</code> so 50% of the terms
can contain misspellings (See parameter descriptions below).</p><div class="pre_wrapper"><pre class="programlisting">  {
  "took" : 5,
  "timed_out" : false,
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "hits" : {
    "total" : 2938,
    "max_score" : 0.0,
    "hits" : [ ]
  },
  "suggest" : {
    "simple_phrase" : [ {
      "text" : "Xor the Got-Jewel",
      "offset" : 0,
      "length" : 17,
      "options" : [ {
        "text" : "xorr the god jewel",
        "highlighted": "&lt;em&gt;xorr&lt;/em&gt; the &lt;em&gt;god&lt;/em&gt; jewel",
        "score" : 0.17877324
      }, {
        "text" : "xor the god jewel",
        "highlighted": "xor the &lt;em&gt;god&lt;/em&gt; jewel",
        "score" : 0.14231323
      } ]
    } ]
  }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_basic_phrase_suggest_api_parameters"></a>Basic Phrase suggest API parameters</h3></div></div></div><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">field</code>
</p>
</td><td class="entry" valign="top">
<p>
    the name of the field used to do n-gram lookups for the
    language model, the suggester will use this field to gain statistics to
    score corrections. This field is mandatory.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">gram_size</code>
</p>
</td><td class="entry" valign="top">
<p>
    sets max size of the n-grams (shingles) in the <code class="literal">field</code>.
    If the field doesnt contain n-grams (shingles) this should be omitted
    or set to <code class="literal">1</code>. Note that Elasticsearch tries to detect the gram size
    based on the specified <code class="literal">field</code>. If the field uses a <code class="literal">shingle</code> filter the
    <code class="literal">gram_size</code> is set to the <code class="literal">max_shingle_size</code> if not explicitly set.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">real_word_error_likelihood</code>
</p>
</td><td class="entry" valign="top">
<p>
    the likelihood of a term being a
    misspelled even if the term exists in the dictionary. The default is
    <code class="literal">0.95</code> corresponding to 5% of the real words are misspelled.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">confidence</code>
</p>
</td><td class="entry" valign="top">
<p>
    The confidence level defines a factor applied to the
    input phrases score which is used as a threshold for other suggest
    candidates. Only candidates that score higher than the threshold will be
    included in the result. For instance a confidence level of <code class="literal">1.0</code> will
    only return suggestions that score higher than the input phrase. If set
    to <code class="literal">0.0</code> the top N candidates are returned. The default is <code class="literal">1.0</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max_errors</code>
</p>
</td><td class="entry" valign="top">
<p>
    the maximum percentage of the terms that at most
    considered to be misspellings in order to form a correction. This method
    accepts a float value in the range <code class="literal">[0..1)</code> as a fraction of the actual
    query terms or a number <code class="literal">&gt;=1</code> as an absolute number of query terms. The
    default is set to <code class="literal">1.0</code> which corresponds to that only corrections with
    at most 1 misspelled term are returned.  Note that setting this too high
    can negatively impact performance. Low values like <code class="literal">1</code> or <code class="literal">2</code> are recommended
    otherwise the time spend in suggest calls might exceed the time spend in
    query execution.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">separator</code>
</p>
</td><td class="entry" valign="top">
<p>
    the separator that is used to separate terms in the
    bigram field. If not set the whitespace character is used as a
    separator.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">size</code>
</p>
</td><td class="entry" valign="top">
<p>
    the number of candidates that are generated for each
    individual query term Low numbers like <code class="literal">3</code> or <code class="literal">5</code> typically produce good
    results. Raising this can bring up terms with higher edit distances. The
    default is <code class="literal">5</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">analyzer</code>
</p>
</td><td class="entry" valign="top">
<p>
    Sets the analyzer to analyse to suggest text with.
    Defaults to the search analyzer of the suggest field passed via <code class="literal">field</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">shard_size</code>
</p>
</td><td class="entry" valign="top">
<p>
    Sets the maximum number of suggested term to be
    retrieved from each individual shard. During the reduce phase, only the
    top N suggestions are returned based on the <code class="literal">size</code> option. Defaults to
    <code class="literal">5</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">text</code>
</p>
</td><td class="entry" valign="top">
<p>
    Sets the text / query to provide suggestions for.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">highlight</code>
</p>
</td><td class="entry" valign="top">
<p>
    Sets up suggestion highlighting.  If not provided then
    no <code class="literal">highlighted</code> field is returned.  If provided must
    contain exactly <code class="literal">pre_tag</code> and <code class="literal">post_tag</code> which are
    wrapped around the changed tokens.  If multiple tokens
    in a row are changed the entire phrase of changed tokens
    is wrapped rather than each token.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">collate</code>
</p>
</td><td class="entry" valign="top">
<p>
    Checks each suggestion against a specified <code class="literal">query</code> to prune suggestions
    for which no matching docs exist in the index. The collate query for a
    suggestion is run only on the local shard from which the suggestion has
    been generated from. A <code class="literal">query</code> must be specified, and it is run as a
    <a class="link" href="query-dsl-template-query.html" title="Template Query"><code class="literal">template</code> query</a>. The current suggestion is
    automatically made available as the <code class="literal">{{suggestion}}</code> variable, which
    should be used in your query.  You can still specify your own template
    <code class="literal">params</code>the <code class="literal">suggestion</code> value will be added to the variables you specify.
    Additionally, you can specify a <code class="literal">prune</code> to control if all phrase suggestions
    will be returned, when set to <code class="literal">true</code> the suggestions will have an additional
    option <code class="literal">collate_match</code>, which will be <code class="literal">true</code> if matching documents for the
    phrase was found, <code class="literal">false</code> otherwise. The default value for <code class="literal">prune</code> is <code class="literal">false</code>.
    The option of specifying a <code class="literal">filter</code> has been deprecated in v1.6.0 and will be
    removed in v2.0.0.
</p>
</td></tr></tbody></table></div><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/_search' -d {
   "suggest" : {
     "text" : "Xor the Got-Jewel",
     "simple_phrase" : {
       "phrase" : {
         "field" :  "bigram",
         "size" :   1,
         "direct_generator" : [ {
           "field" :            "body",
           "suggest_mode" :     "always",
           "min_word_length" :  1
         } ],
         "collate": {
           "query": { <a id="CO43-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
             "match": {
                 "{{field_name}}" : "{{suggestion}}" <a id="CO43-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
             }
           },
           "params": {"field_name" : "title"}, <a id="CO43-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span>
           "prune": true <a id="CO43-4"></a><span><img class="images-icons-callouts-4-png" alt=""></span>
         }
       }
     }
   }
 }</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO43-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This query will be run once for every suggestion.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO43-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">{{suggestion}}</code> variable will be replaced by the text
    of each suggestion.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO43-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
An additional <code class="literal">field_name</code> variable has been specified in
    <code class="literal">params</code> and is used by the <code class="literal">match</code> query.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO43-4"><span><img class="images-icons-callouts-4-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
All suggestions will be returned with an extra <code class="literal">collate_match</code>
    option indicating whether the generated phrase matched any
    document.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_smoothing_models"></a>Smoothing Models</h3></div></div></div><p>The <code class="literal">phrase</code> suggester supports multiple smoothing models to balance
weight between infrequent grams (grams (shingles) are not existing in
the index) and frequent grams (appear at least once in the index).</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">stupid_backoff</code>
</p>
</td><td class="entry" valign="top">
<p>
    a simple backoff model that backs off to lower
    order n-gram models if the higher order count is <code class="literal">0</code> and discounts the
    lower order n-gram model by a constant factor. The default <code class="literal">discount</code> is
    <code class="literal">0.4</code>. Stupid Backoff is the default model.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">laplace</code>
</p>
</td><td class="entry" valign="top">
<p>
    a smoothing model that uses an additive smoothing where a
    constant (typically <code class="literal">1.0</code> or smaller) is added to all counts to balance
    weights, The default <code class="literal">alpha</code> is <code class="literal">0.5</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">linear_interpolation</code>
</p>
</td><td class="entry" valign="top">
<p>
    a smoothing model that takes the weighted
    mean of the unigrams, bigrams and trigrams based on user supplied
    weights (lambdas). Linear Interpolation doesnt have any default values.
    All parameters (<code class="literal">trigram_lambda</code>, <code class="literal">bigram_lambda</code>, <code class="literal">unigram_lambda</code>)
    must be supplied.
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_candidate_generators"></a>Candidate Generators</h3></div></div></div><p>The <code class="literal">phrase</code> suggester uses candidate generators to produce a list of
possible terms per term in the given text. A single candidate generator
is similar to a <code class="literal">term</code> suggester called for each individual term in the
text. The output of the generators is subsequently scored in combination
with the candidates from the other terms to for suggestion candidates.</p><p>Currently only one type of candidate generator is supported, the
<code class="literal">direct_generator</code>. The Phrase suggest API accepts a list of generators
under the key <code class="literal">direct_generator</code> each of the generators in the list are
called per term in the original text.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_direct_generators"></a>Direct Generators</h3></div></div></div><p>The direct generators support the following parameters:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">field</code>
</p>
</td><td class="entry" valign="top">
<p>
    The field to fetch the candidate suggestions from. This is
    a required option that either needs to be set globally or per
    suggestion.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">size</code>
</p>
</td><td class="entry" valign="top">
<p>
    The maximum corrections to be returned per suggest text token.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">suggest_mode</code>
</p>
</td><td class="entry" valign="top">
<p>
    The suggest mode controls what suggestions are
    included or controls for what suggest text terms, suggestions should be
    suggested. Three possible values can be specified:
</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">missing</code>: Only suggest terms in the suggest text that arent in the
                  index. This is the default.
</li><li class="listitem">
<code class="literal">popular</code>: Only suggest suggestions that occur in more docs then the
                  original suggest text term.
</li><li class="listitem">
<code class="literal">always</code>: Suggest any matching suggestions based on terms in the
                 suggest text.
</li></ul></div>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max_edits</code>
</p>
</td><td class="entry" valign="top">
<p>
    The maximum edit distance candidate suggestions can have
    in order to be considered as a suggestion. Can only be a value between 1
    and 2. Any other value result in an bad request error being thrown.
    Defaults to 2.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">prefix_length</code>
</p>
</td><td class="entry" valign="top">
<p>
    The number of minimal prefix characters that must
    match in order be a candidate suggestions. Defaults to 1. Increasing
    this number improves spellcheck performance. Usually misspellings dont
    occur in the beginning of terms. (Old name "prefix_len" is deprecated)
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">min_word_length</code>
</p>
</td><td class="entry" valign="top">
<p>
    The minimum length a suggest text term must have in
    order to be included. Defaults to 4. (Old name "min_word_len" is deprecated)
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max_inspections</code>
</p>
</td><td class="entry" valign="top">
<p>
    A factor that is used to multiply with the
    <code class="literal">shards_size</code> in order to inspect more candidate spell corrections on
    the shard level. Can improve accuracy at the cost of performance.
    Defaults to 5.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">min_doc_freq</code>
</p>
</td><td class="entry" valign="top">
<p>
    The minimal threshold in number of documents a
    suggestion should appear in. This can be specified as an absolute number
    or as a relative percentage of number of documents. This can improve
    quality by only suggesting high frequency terms. Defaults to 0f and is
    not enabled. If a value higher than 1 is specified then the number
    cannot be fractional. The shard level document frequencies are used for
    this option.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max_term_freq</code>
</p>
</td><td class="entry" valign="top">
<p>
    The maximum threshold in number of documents a
    suggest text token can exist in order to be included. Can be a relative
    percentage number (e.g 0.4) or an absolute number to represent document
    frequencies. If an value higher than 1 is specified then fractional can
    not be specified. Defaults to 0.01f. This can be used to exclude high
    frequency terms from being spellchecked. High frequency terms are
    usually spelled correctly on top of this also improves the spellcheck
    performance. The shard level document frequencies are used for this
    option.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">pre_filter</code>
</p>
</td><td class="entry" valign="top">
<p>
    a filter (analyzer) that is applied to each of the
    tokens passed to this candidate generator. This filter is applied to the
    original token before candidates are generated.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">post_filter</code>
</p>
</td><td class="entry" valign="top">
<p>
    a filter (analyzer) that is applied to each of the
    generated tokens before they are passed to the actual phrase scorer.
</p>
</td></tr></tbody></table></div><p>The following example shows a <code class="literal">phrase</code> suggest call with two generators,
the first one is using a field containing ordinary indexed terms and the
second one uses a field that uses terms indexed with a <code class="literal">reverse</code> filter
(tokens are index in reverse order). This is used to overcome the limitation
of the direct generators to require a constant prefix to provide
high-performance suggestions. The <code class="literal">pre_filter</code> and <code class="literal">post_filter</code> options
accept ordinary analyzer names.</p><div class="pre_wrapper"><pre class="programlisting">curl -s -XPOST 'localhost:9200/_search' -d {
 "suggest" : {
    "text" : "Xor the Got-Jewel",
    "simple_phrase" : {
      "phrase" : {
        "analyzer" : "body",
        "field" : "bigram",
        "size" : 4,
        "real_word_error_likelihood" : 0.95,
        "confidence" : 2.0,
        "gram_size" : 2,
        "direct_generator" : [ {
          "field" : "body",
          "suggest_mode" : "always",
          "min_word_length" : 1
        }, {
          "field" : "reverse",
          "suggest_mode" : "always",
          "min_word_length" : 1,
          "pre_filter" : "reverse",
          "post_filter" : "reverse"
        } ]
      }
    }
  }
}</pre></div><p><code class="literal">pre_filter</code> and <code class="literal">post_filter</code> can also be used to inject synonyms after
candidates are generated. For instance for the query <code class="literal">captain usq</code> we
might generate a candidate <code class="literal">usa</code> for term <code class="literal">usq</code> which is a synonym for
<code class="literal">america</code> which allows to present <code class="literal">captain america</code> to the user if this
phrase scores high enough.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-suggesters.html">Suggesters</a></span>  <span class="breadcrumb-node">Completion Suggester</span></div><div class="navheader"><span class="prev"><a href="search-suggesters-phrase.html">
              &nbsp;
              Phrase Suggester</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="suggester-context.html">Context Suggester
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="search-suggesters-completion"></a>Completion Suggester</h2></div></div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>In order to understand the format of suggestions, please
read the <a class="xref" href="search-suggesters.html" title="Suggesters"><em>Suggesters</em></a> page first.</p></div></div><p>The <code class="literal">completion</code> suggester is a so-called prefix suggester. It does not
do spell correction like the <code class="literal">term</code> or <code class="literal">phrase</code> suggesters but allows
basic <code class="literal">auto-complete</code> functionality.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_why_another_suggester_why_not_prefix_queries"></a>Why another suggester? Why not prefix queries?</h3></div></div></div><p>The first question which comes to mind when reading about a prefix
suggestion is, why you should use it at all, if you have prefix queries
already. The answer is simple: Prefix suggestions are fast.</p><p>The data structures are internally backed by Lucenes
<code class="literal">AnalyzingSuggester</code>, which uses FSTs (finite state transducers) to
execute suggestions. Usually these data structures are costly to
create, stored in-memory and need to be rebuilt every now and then to
reflect changes in your indexed documents. The <code class="literal">completion</code> suggester
circumvents this by storing the FST (finite state transducer) as part
of your index during index time. This allows for really fast
loads and executions.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="completion-suggester-mapping"></a>Mapping</h3></div></div></div><p>In order to use this feature, you have to specify a special mapping for
this field, which enables the special storage of the field.</p><div class="pre_wrapper"><pre class="programlisting">curl -X PUT localhost:9200/music
curl -X PUT localhost:9200/music/song/_mapping -d '{
  "song" : {
        "properties" : {
            "name" : { "type" : "string" },
            "suggest" : { "type" : "completion",
                          "index_analyzer" : "simple",
                          "search_analyzer" : "simple",
                          "payloads" : true
            }
        }
    }
}'</pre></div><p>Mapping supports the following parameters:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">index_analyzer</code>
</span></dt><dd>
    The index analyzer to use, defaults to <code class="literal">simple</code>.
</dd><dt><span class="term">
<code class="literal">search_analyzer</code>
</span></dt><dd>
    The search analyzer to use, defaults to <code class="literal">simple</code>.
    In case you are wondering why we did not opt for the <code class="literal">standard</code>
    analyzer: We try to have easy to understand behaviour here, and if you
    index the field content <code class="literal">At the Drive-in</code>, you will not get any
    suggestions for <code class="literal">a</code>, nor for <code class="literal">d</code> (the first non stopword).
</dd><dt><span class="term">
<code class="literal">payloads</code>
</span></dt><dd>
    Enables the storing of payloads, defaults to <code class="literal">false</code>
</dd><dt><span class="term">
<code class="literal">preserve_separators</code>
</span></dt><dd>
    Preserves the separators, defaults to <code class="literal">true</code>.
    If disabled, you could find a field starting with <code class="literal">Foo Fighters</code>, if you
    suggest for <code class="literal">foof</code>.
</dd><dt><span class="term">
<code class="literal">preserve_position_increments</code>
</span></dt><dd>
    Enables position increments, defaults
    to <code class="literal">true</code>. If disabled and using stopwords analyzer, you could get a
    field starting with <code class="literal">The Beatles</code>, if you suggest for <code class="literal">b</code>. <span class="strong emphasis"><strong>Note</strong></span>: You
    could also achieve this by indexing two inputs, <code class="literal">Beatles</code> and
    <code class="literal">The Beatles</code>, no need to change a simple analyzer, if you are able to
    enrich your data.
</dd><dt><span class="term">
<code class="literal">max_input_length</code>
</span></dt><dd>
    Limits the length of a single input, defaults to <code class="literal">50</code> UTF-16 code points.
    This limit is only used at index time to reduce the total number of
    characters per input string in order to prevent massive inputs from
    bloating the underlying datastructure. The most usecases wont be influenced
    by the default value since prefix completions hardly grow beyond prefixes longer
    than a handful of characters. (Old name "max_input_len" is deprecated)
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="indexing"></a>Indexing</h3></div></div></div><div class="pre_wrapper"><pre class="programlisting">curl -X PUT 'localhost:9200/music/song/1?refresh=true' -d '{
    "name" : "Nevermind",
    "suggest" : {
        "input": [ "Nevermind", "Nirvana" ],
        "output": "Nirvana - Nevermind",
        "payload" : { "artistId" : 2321 },
        "weight" : 34
    }
}'</pre></div><p>The following parameters are supported:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">input</code>
</span></dt><dd>
    The input to store, this can be a an array of strings or just
    a string. This field is mandatory.
</dd><dt><span class="term">
<code class="literal">output</code>
</span></dt><dd>
    The string to return, if a suggestion matches. This is very
    useful to normalize outputs (i.e. have them always in the format
    <code class="literal">artist - songname</code>). This is optional.
    <span class="strong emphasis"><strong>Note</strong></span>: The result is de-duplicated if several documents
    have the same output, i.e. only one is returned as part of the
    suggest result.
</dd><dt><span class="term">
<code class="literal">payload</code>
</span></dt><dd>
    An arbitrary JSON object, which is simply returned in the
    suggest option. You could store data like the id of a document, in order
    to load it from elasticsearch without executing another search (which
    might not yield any results, if <code class="literal">input</code> and <code class="literal">output</code> differ strongly).
</dd><dt><span class="term">
<code class="literal">weight</code>
</span></dt><dd>
    A positive integer or a string containing a positive integer,
    which defines a weight and allows you to rank your suggestions.
    This field is optional.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Even though you will lose most of the features of the
completion suggest, you can choose to use the following shorthand form.
Keep in mind that you will not be able to use several inputs, an output,
payloads or weights. This form does still work inside of multi fields.</p></div></div><div class="pre_wrapper"><pre class="programlisting">{
  "suggest" : "Nirvana"
}</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The suggest data structure might not reflect deletes on
documents immediately. You may need to do an <a class="xref" href="indices-optimize.html" title="Optimize"><em>Optimize</em></a> for that.
You can call optimize with the <code class="literal">only_expunge_deletes=true</code> to only target
deletions for merging. By default <code class="literal">only_expunge_deletes=true</code> will only select
segments for merge where the percentage of deleted documents is greater than <code class="literal">10%</code> of
the number of document in that segment. To adjust this <code class="literal">index.merge.policy.expunge_deletes_allowed</code> can
be updated to a value between <code class="literal">[0..100]</code>. Please remember even with this option set, optimize
is considered a extremely heavy operation and should be called rarely.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="querying"></a>Querying</h3></div></div></div><p>Suggesting works as usual, except that you have to specify the suggest
type as <code class="literal">completion</code>.</p><div class="pre_wrapper"><pre class="programlisting">curl -X POST 'localhost:9200/music/_suggest?pretty' -d '{
    "song-suggest" : {
        "text" : "n",
        "completion" : {
            "field" : "suggest"
        }
    }
}'

{
  "_shards" : {
    "total" : 5,
    "successful" : 5,
    "failed" : 0
  },
  "song-suggest" : [ {
    "text" : "n",
    "offset" : 0,
    "length" : 1,
    "options" : [ {
      "text" : "Nirvana - Nevermind",
      "score" : 34.0, "payload" : {"artistId":2321}
    } ]
  } ]
}</pre></div><p>As you can see, the payload is included in the response, if configured
appropriately. If you configured a weight for a suggestion, this weight
is used as <code class="literal">score</code>. Also the <code class="literal">text</code> field uses the <code class="literal">output</code> of your
indexed suggestion, if configured, otherwise the matched part of the
<code class="literal">input</code> field.</p><p>The basic completion suggester query supports the following two parameters:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">field</code>
</span></dt><dd>
The name of the field on which to run the query (required).
</dd><dt><span class="term">
<code class="literal">size</code>
</span></dt><dd>
The number of suggestions to return (defaults to <code class="literal">5</code>).
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The completion suggester considers all documents in the index.
See <a class="xref" href="suggester-context.html" title="Context Suggester">Context Suggester</a> for an explanation of how to query a subset of
documents instead.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="fuzzy"></a>Fuzzy queries</h3></div></div></div><p>The completion suggester also supports fuzzy queries - this means,
you can actually have a typo in your search and still get results back.</p><div class="pre_wrapper"><pre class="programlisting">curl -X POST 'localhost:9200/music/_suggest?pretty' -d '{
    "song-suggest" : {
        "text" : "n",
        "completion" : {
            "field" : "suggest",
            "fuzzy" : {
                "fuzziness" : 2
            }
        }
    }
}'</pre></div><p>The fuzzy query can take specific fuzzy parameters.
The following parameters are supported:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">fuzziness</code>
</p>
</td><td class="entry" valign="top">
<p>
    The fuzziness factor, defaults to <code class="literal">AUTO</code>.
    See  <a class="xref" href="common-options.html#fuzziness" title="Fuzzinessedit">the section called Fuzziness</a> for allowed settings.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">transpositions</code>
</p>
</td><td class="entry" valign="top">
<p>
    Sets if transpositions should be counted
    as one or two changes, defaults to <code class="literal">true</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">min_length</code>
</p>
</td><td class="entry" valign="top">
<p>
    Minimum length of the input before fuzzy
    suggestions are returned, defaults <code class="literal">3</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">prefix_length</code>
</p>
</td><td class="entry" valign="top">
<p>
    Minimum length of the input, which is not
    checked for fuzzy alternatives, defaults to <code class="literal">1</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">unicode_aware</code>
</p>
</td><td class="entry" valign="top">
<p>
    Sets all are measurements (like edit distance,
    transpositions and lengths) in unicode code points
    (actual letters) instead of bytes.
</p>
</td></tr></tbody></table></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>If you want to stick with the default values, but
      still use fuzzy, you can either use <code class="literal">fuzzy: {}</code>
      or <code class="literal">fuzzy: true</code>.</p></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-link"><a href="search-suggesters.html">Suggesters</a></span>  <span class="breadcrumb-node">Context Suggester</span></div><div class="navheader"><span class="prev"><a href="search-suggesters-completion.html">
              &nbsp;
              Completion Suggester</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-multi-search.html">Multi Search API
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="suggester-context"></a>Context Suggester</h2></div></div></div><p>The context suggester is an extension to the suggest API of Elasticsearch. Namely the
suggester system provides a very fast way of searching documents by handling these
entirely in memory. But this special treatment does not allow the handling of
traditional queries and filters, because those would have notable impact on the
performance. So the context extension is designed to take so-called context information
into account to specify a more accurate way of searching within the suggester system.
Instead of using the traditional query and filter system a predefined ``context`` is
configured to limit suggestions to a particular subset of suggestions.
Such a context is defined by a set of context mappings which can either be a simple
<span class="strong emphasis"><strong>category</strong></span> or a <span class="strong emphasis"><strong>geo location</strong></span>. The information used by the context suggester is
configured in the type mapping with the <code class="literal">context</code> parameter, which lists all of the
contexts that need to be specified in each document and in each suggestion request.
For instance:</p><div class="pre_wrapper"><pre class="programlisting">PUT services/_mapping/service
{
    "service": {
        "properties": {
            "name": {
                "type" : "string"
            },
            "tag": {
                "type" : "string"
            },
            "suggest_field": {
                "type": "completion",
                "context": {
                    "color": { <a id="CO44-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                        "type": "category",
                        "path": "color_field",
                        "default": ["red", "green", "blue"]
                    },
                    "location": { <a id="CO44-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
                        "type": "geo",
                        "precision": "5m",
                        "neighbors": true,
                        "default": "u33"
                    }
                }
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO44-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
See <a class="xref" href="suggester-context.html#suggester-context-category" title="Category Contextedit">the section called Category Context</a>
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO44-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
See <a class="xref" href="suggester-context.html#suggester-context-geo" title="Geo location Contextedit">the section called Geo location Context</a>
</p></td></tr></tbody></table></div><p>However contexts are specified (as type <code class="literal">category</code> or <code class="literal">geo</code>, which are discussed below), each
context value generates a new sub-set of documents which can be queried by the completion
suggester. All three types accept a <code class="literal">default</code> parameter which provides a default value to use
if the corresponding context value is absent.</p><p>The basic structure of this element is that each field forms a new context and the fieldname
is used to reference this context information later on during indexing or querying. All context
mappings have the <code class="literal">default</code> and the <code class="literal">type</code> option in common. The value of the <code class="literal">default</code> field
is used, when ever no specific is provided for the certain context. Note that a context is
defined by at least one value. The <code class="literal">type</code> option defines the kind of information hold by this
context. These type will be explained further in the following sections.</p><h4><a id="suggester-context-category"></a>Category Context</h4><p>The <code class="literal">category</code> context allows you to specify one or more categories in the document at index time.
The document will be assigned to each named category, which can then be queried later. The category
type also allows to specify a field to extract the categories from. The <code class="literal">path</code> parameter is used to
specify this field of the documents that should be used. If the referenced field contains multiple
values, all these values will be used as alternative categories.</p><h5><a id="_category_mapping"></a>Category Mapping</h5><p>The mapping for a category is simply defined by its <code class="literal">default</code> values. These can either be
defined as list of <span class="strong emphasis"><strong>default</strong></span> categories:</p><div class="pre_wrapper"><pre class="programlisting">"context": {
    "color": {
        "type": "category",
        "default": ["red", "orange"]
    }
}</pre></div><p>or as a single value</p><div class="pre_wrapper"><pre class="programlisting">"context": {
    "color": {
        "type": "category",
        "default": "red"
    }
}</pre></div><p>or as reference to another field within the documents indexed:</p><div class="pre_wrapper"><pre class="programlisting">"context": {
    "color": {
        "type": "category",
        "default": "red",
        "path": "color_field"
    }
}</pre></div><p>in this case the <span class="strong emphasis"><strong>default</strong></span> categories will only be used, if the given field does not
exist within the document. In the example above the categories are received from a
field named <code class="literal">color_field</code>. If this field does not exist a category <span class="strong emphasis"><strong>red</strong></span> is assumed for
the context <span class="strong emphasis"><strong>color</strong></span>.</p><h5><a id="_indexing_category_contexts"></a>Indexing category contexts</h5><p>Within a document the category is specified either as an <code class="literal">array</code> of values, a
single value or <code class="literal">null</code>. A list of values is interpreted as alternative categories. So
a document belongs to all the categories defined. If the category is <code class="literal">null</code> or remains
unset the categories will be retrieved from the documents field addressed by the <code class="literal">path</code>
parameter. If this value is not set or the field is missing, the default values of the
mapping will be assigned to the context.</p><div class="pre_wrapper"><pre class="programlisting">PUT services/service/1
{
    "name": "knapsack",
    "suggest_field": {
        "input": ["knacksack", "backpack", "daypack"],
        "context": {
            "color": ["red", "yellow"]
        }
    }
}</pre></div><h5><a id="_category_query"></a>Category Query</h5><p>A query within a category works similar to the configuration. If the value is <code class="literal">null</code>
the mappings default categories will be used. Otherwise the suggestion takes place
for all documents that have at least one category in common with the query.</p><div class="pre_wrapper"><pre class="programlisting">POST services/_suggest?pretty'
{
    "suggest" : {
        "text" : "m",
        "completion" : {
            "field" : "suggest_field",
            "size": 10,
            "context": {
                "color": "red"
            }
        }
    }
}</pre></div><h4><a id="suggester-context-geo"></a>Geo location Context</h4><p>A <code class="literal">geo</code> context allows you to limit results to those that lie within a certain distance
of a specified geolocation. At index time, a lat/long geo point is converted into a
geohash of a certain precision, which provides the context.</p><h5><a id="_geo_location_mapping"></a>Geo location Mapping</h5><p>The mapping for a geo context accepts four settings, only of which <code class="literal">precision</code> is required:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">precision</code>
</p>
</td><td class="entry" valign="top">
<p>
This defines the precision of the geohash and can be specified as <code class="literal">5m</code>, <code class="literal">10km</code>,
               or as a raw geohash precision: <code class="literal">1</code>..<code class="literal">12</code>. Its also possible to setup multiple
               precisions by defining a list of precisions: <code class="literal">["5m", "10km"]</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">neighbors</code>
</p>
</td><td class="entry" valign="top">
<p>
Geohashes are rectangles, so a geolocation, which in reality is only 1 metre
               away from the specified point, may fall into the neighbouring rectangle. Set
               <code class="literal">neighbours</code> to <code class="literal">true</code> to include the neighbouring geohashes in the context.
               (default is <span class="strong emphasis"><strong>on</strong></span>)
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">path</code>
</p>
</td><td class="entry" valign="top">
<p>
Optionally specify a field to use to look up the geopoint.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">default</code>
</p>
</td><td class="entry" valign="top">
<p>
The geopoint to use if no geopoint has been specified.
</p>
</td></tr></tbody></table></div><p>Since all locations of this mapping are translated into geohashes, each location matches
a geohash cell. So some results that lie within the specified range but not in the same
cell as the query location will not match. To avoid this the <code class="literal">neighbors</code> option allows a
matching of cells that join the bordering regions of the documents location. This option
is turned on by default.
If a document or a query doesnt define a location a value to use instead can defined by
the <code class="literal">default</code> option. The value of this option supports all the ways a <code class="literal">geo_point</code> can be
defined. The <code class="literal">path</code> refers to another field within the document to retrieve the
location. If this field contains multiple values, the document will be linked to all these
locations.</p><div class="pre_wrapper"><pre class="programlisting">"context": {
    "location": {
        "type": "geo",
        "precision": ["1km", "5m"],
        "neighbors": true,
        "path": "pin",
        "default": {
            "lat": 0.0,
            "lon": 0.0
        }
    }
}</pre></div><h5><a id="_geo_location_config"></a>Geo location Config</h5><p>Within a document a geo location retrieved from the mapping definition can be overridden
by another location. In this case the context mapped to a geo location supports all
variants of defining a <code class="literal">geo_point</code>.</p><div class="pre_wrapper"><pre class="programlisting">PUT services/service/1
{
    "name": "some hotel 1",
    "suggest_field": {
        "input": ["my hotel", "this hotel"],
        "context": {
            "location": {
                    "lat": 0,
                    "lon": 0
            }
        }
    }
}</pre></div><h5><a id="_geo_location_query"></a>Geo location Query</h5><p>Like in the configuration, querying with a geo location in context, the geo location
query supports all representations of a <code class="literal">geo_point</code> to define the location. In this
simple case all precision values defined in the mapping will be applied to the given
location.</p><div class="pre_wrapper"><pre class="programlisting">POST services/_suggest
{
    "suggest" : {
        "text" : "m",
        "completion" : {
            "field" : "suggest_field",
            "size": 10,
            "context": {
                "location": {
                    "lat": 0,
                    "lon": 0
                }
            }
        }
    }
}</pre></div><p>But it also possible to set a subset of the precisions set in the mapping, by using the
<code class="literal">precision</code> parameter. Like in the mapping, this parameter is allowed to be set to a
single precision value or a list of these.</p><div class="pre_wrapper"><pre class="programlisting">POST services/_suggest
{
    "suggest" : {
        "text" : "m",
        "completion" : {
            "field" : "suggest_field",
            "size": 10,
            "context": {
                "location": {
                    "value": {
                        "lat": 0,
                        "lon": 0
                    },
                    "precision": "1km"
                }
            }
        }
    }
}</pre></div><p>A special form of the query is defined by an extension of the object representation of
the <code class="literal">geo_point</code>. Using this representation allows to set the <code class="literal">precision</code> parameter within
the location itself:</p><div class="pre_wrapper"><pre class="programlisting">POST services/_suggest
{
    "suggest" : {
        "text" : "m",
        "completion" : {
            "field" : "suggest_field",
            "size": 10,
            "context": {
                "location": {
                        "lat": 0,
                        "lon": 0,
                        "precision": "1km"
                }
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">Multi Search API</span></div><div class="navheader"><span class="prev"><a href="suggester-context.html">
              &nbsp;
              Context Suggester</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-count.html">Count API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-multi-search"></a>Multi Search API</h2></div></div></div><p>The multi search API allows to execute several search requests within
the same API. The endpoint for it is <code class="literal">_msearch</code>.</p><p>The format of the request is similar to the bulk API format, and the
structure is as follows (the structure is specifically optimized to
reduce parsing if a specific search ends up redirected to another node):</p><div class="pre_wrapper"><pre class="programlisting">header\n
body\n
header\n
body\n</pre></div><p>The header part includes which index / indices to search on, optional
(mapping) types to search on, the <code class="literal">search_type</code>, <code class="literal">preference</code>, and
<code class="literal">routing</code>. The body includes the typical search body request (including
the <code class="literal">query</code>, <code class="literal">facets</code>, <code class="literal">from</code>, <code class="literal">size</code>, and so on). Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">$ cat requests
{"index" : "test"}
{"query" : {"match_all" : {}}, "from" : 0, "size" : 10}
{"index" : "test", "search_type" : "count"}
{"query" : {"match_all" : {}}}
{}
{"query" : {"match_all" : {}}}

{"query" : {"match_all" : {}}}
{"search_type" : "count"}
{"query" : {"match_all" : {}}}

$ curl -XGET localhost:9200/_msearch --data-binary "@requests"; echo</pre></div><p>Note, the above includes an example of an empty header (can also be just
without any content) which is supported as well.</p><p>The response returns a <code class="literal">responses</code> array, which includes the search
response for each search request matching its order in the original
multi search request. If there was a complete failure for that specific
search request, an object with <code class="literal">error</code> message will be returned in place
of the actual search response.</p><p>The endpoint allows to also search against an index/indices and
type/types in the URI itself, in which case it will be used as the
default unless explicitly defined otherwise in the header. For example:</p><div class="pre_wrapper"><pre class="programlisting">$ cat requests
{}
{"query" : {"match_all" : {}}, "from" : 0, "size" : 10}
{}
{"query" : {"match_all" : {}}}
{"index" : "test2"}
{"query" : {"match_all" : {}}}

$ curl -XGET localhost:9200/test/_msearch --data-binary @requests; echo</pre></div><p>The above will execute the search against the <code class="literal">test</code> index for all the
requests that dont define an index, and the last one will be executed
against the <code class="literal">test2</code> index.</p><p>The <code class="literal">search_type</code> can be set in a similar manner to globally apply to
all search requests.</p><h3><a id="msearch-security"></a>Security</h3><p>See <a class="xref" href="url-access-control.html" title="URL-based access control"><em>URL-based access control</em></a></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">Count API</span></div><div class="navheader"><span class="prev"><a href="search-multi-search.html">
              &nbsp;
              Multi Search API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-exists.html">Search Exists API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-count"></a>Count API</h2></div></div></div><p>The count API allows to easily execute a query and get the number of
matches for that query. It can be executed across one or more indices
and across one or more types. The query can either be provided using a
simple query string as a parameter, or using the
<a class="link" href="query-dsl.html" title="Query DSL">Query DSL</a> defined within the request
body. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/twitter/tweet/_count?q=user:kimchy'

$ curl -XGET 'http://localhost:9200/twitter/tweet/_count' -d '
{
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}'</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The query being sent in the body must be nested in a <code class="literal">query</code> key, same as
the <a class="link" href="search-search.html" title="Search">search api</a> works</p></div></div><p>Both examples above do the same thing, which is count the number of
tweets from the twitter index for a certain user. The result is:</p><div class="pre_wrapper"><pre class="programlisting">{
    "count" : 1,
    "_shards" : {
        "total" : 5,
        "successful" : 5,
        "failed" : 0
    }
}</pre></div><p>The query is optional, and when not provided, it will use <code class="literal">match_all</code> to
count all the docs.</p><h3><a id="_multi_index_multi_type"></a>Multi index, Multi type</h3><p>The count API can be applied to <a class="link" href="search-search.html#search-multi-index-type" title="Multi-Index, Multi-Typeedit">multiple types in multiple indices</a>.</p><h3><a id="_request_parameters"></a>Request Parameters</h3><p>When executing count using the query parameter <code class="literal">q</code>, the query passed is
a query string using Lucene query parser. There are additional
parameters that can be passed:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Name </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">df</code></p></td><td class="entry" align="left" valign="top"><p>The default field to use when no field prefix is defined within the
query.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyzer</code></p></td><td class="entry" align="left" valign="top"><p>The analyzer name to be used when analyzing the query string.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">default_operator</code></p></td><td class="entry" align="left" valign="top"><p>The default operator to be used, can be <code class="literal">AND</code> or
<code class="literal">OR</code>. Defaults to <code class="literal">OR</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">lenient</code></p></td><td class="entry" align="left" valign="top"><p>If set to true will cause format based failures (like
providing text to a numeric field) to be ignored. Defaults to false.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">lowercase_expanded_terms</code></p></td><td class="entry" align="left" valign="top"><p>Should terms be automatically lowercased or
not. Defaults to <code class="literal">true</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyze_wildcard</code></p></td><td class="entry" align="left" valign="top"><p>Should wildcard and prefix queries be analyzed or
not. Defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">terminate_after</code></p></td><td class="entry" align="left" valign="top"><p><span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">
The API for this feature may change in the future
</span></span>
The maximum count for each shard, upon reaching which the query execution
will terminate early. If set, the response will have a boolean field
<code class="literal">terminated_early</code> to indicate whether the query execution has actually
terminated_early. Defaults to no terminate_after.</p></td></tr></tbody></table></div><h3><a id="_request_body"></a>Request Body</h3><p>The count can use the <a class="link" href="query-dsl.html" title="Query DSL">Query DSL</a> within
its body in order to express the query that should be executed. The body
content can also be passed as a REST parameter named <code class="literal">source</code>.</p><p>Both HTTP GET and HTTP POST can be used to execute count with body.
Since not all clients support GET with body, POST is allowed as well.</p><h3><a id="_distributed"></a>Distributed</h3><p>The count operation is broadcast across all shards. For each shard id
group, a replica is chosen and executed against it. This means that
replicas increase the scalability of count.</p><h3><a id="_routing"></a>Routing</h3><p>The routing value (a comma separated list of the routing values) can be
specified to control which shards the count request will be executed on.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">Search Exists API</span></div><div class="navheader"><span class="prev"><a href="search-count.html">
              &nbsp;
              Count API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-validate.html">Validate API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-exists"></a>Search Exists API</h2></div></div></div><p>The exists API allows to easily determine if any
matching documents exist for a provided query. It can be executed across one or more indices
and across one or more types. The query can either be provided using a
simple query string as a parameter, or using the
<a class="link" href="query-dsl.html" title="Query DSL">Query DSL</a> defined within the request
body. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/twitter/tweet/_search/exists?q=user:kimchy'

$ curl -XGET 'http://localhost:9200/twitter/tweet/_search/exists' -d '
{
    "query" : {
        "term" : { "user" : "kimchy" }
    }
}'</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The query being sent in the body must be nested in a <code class="literal">query</code> key, same as
how the <a class="link" href="search-search.html" title="Search">search api</a> works.</p></div></div><p>Both the examples above do the same thing, which is determine the existence of
tweets from the twitter index for a certain user. The response body will be of
the following format:</p><div class="pre_wrapper"><pre class="programlisting">{
    "exists" : true
}</pre></div><h3><a id="_multi_index_multi_type_2"></a>Multi index, Multi type</h3><p>The exists API can be applied to <a class="link" href="search-search.html#search-multi-index-type" title="Multi-Index, Multi-Typeedit">multiple types in multiple indices</a>.</p><h3><a id="_request_parameters_2"></a>Request Parameters</h3><p>When executing exists using the query parameter <code class="literal">q</code>, the query passed is
a query string using Lucene query parser. There are additional
parameters that can be passed:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Name </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">df</code></p></td><td class="entry" align="left" valign="top"><p>The default field to use when no field prefix is defined within the
query.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyzer</code></p></td><td class="entry" align="left" valign="top"><p>The analyzer name to be used when analyzing the query string.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">default_operator</code></p></td><td class="entry" align="left" valign="top"><p>The default operator to be used, can be <code class="literal">AND</code> or
<code class="literal">OR</code>. Defaults to <code class="literal">OR</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">lenient</code></p></td><td class="entry" align="left" valign="top"><p>If set to true will cause format based failures (like
providing text to a numeric field) to be ignored. Defaults to false.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">lowercase_expanded_terms</code></p></td><td class="entry" align="left" valign="top"><p>Should terms be automatically lowercased or
not. Defaults to <code class="literal">true</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyze_wildcard</code></p></td><td class="entry" align="left" valign="top"><p>Should wildcard and prefix queries be analyzed or
not. Defaults to <code class="literal">false</code>.</p></td></tr></tbody></table></div><h3><a id="_request_body_2"></a>Request Body</h3><p>The exists API can use the <a class="link" href="query-dsl.html" title="Query DSL">Query DSL</a> within
its body in order to express the query that should be executed. The body
content can also be passed as a REST parameter named <code class="literal">source</code>.</p><p>HTTP GET and HTTP POST can be used to execute exists with body.
Since not all clients support GET with body, POST is allowed as well.</p><h3><a id="_distributed_2"></a>Distributed</h3><p>The exists operation is broadcast across all shards. For each shard id
group, a replica is chosen and executed against it. This means that
replicas increase the scalability of exists. The exists operation also
early terminates shard requests once the first shard reports matched
document existence.</p><h3><a id="_routing_2"></a>Routing</h3><p>The routing value (a comma separated list of the routing values) can be
specified to control which shards the exists request will be executed on.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">Validate API</span></div><div class="navheader"><span class="prev"><a href="search-exists.html">
              &nbsp;
              Search Exists API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-explain.html">Explain API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-validate"></a>Validate API</h2></div></div></div><p>The validate API allows a user to validate a potentially expensive query
without executing it. The following example shows how it can be used:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'http://localhost:9200/twitter/tweet/1' -d '{
    "user" : "kimchy",
    "post_date" : "2009-11-15T14:12:12",
    "message" : "trying out Elasticsearch"
}'</pre></div><p>When the query is valid, the response contains <code class="literal">valid:true</code>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/_validate/query?q=user:foo'
{"valid":true,"_shards":{"total":1,"successful":1,"failed":0}}</pre></div><h3><a id="_request_parameters_3"></a>Request Parameters</h3><p>When executing exists using the query parameter <code class="literal">q</code>, the query passed is
a query string using Lucene query parser. There are additional
parameters that can be passed:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Name </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">df</code></p></td><td class="entry" align="left" valign="top"><p>The default field to use when no field prefix is defined within the
query.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyzer</code></p></td><td class="entry" align="left" valign="top"><p>The analyzer name to be used when analyzing the query string.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">default_operator</code></p></td><td class="entry" align="left" valign="top"><p>The default operator to be used, can be <code class="literal">AND</code> or
<code class="literal">OR</code>. Defaults to <code class="literal">OR</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">lenient</code></p></td><td class="entry" align="left" valign="top"><p>If set to true will cause format based failures (like
providing text to a numeric field) to be ignored. Defaults to false.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">lowercase_expanded_terms</code></p></td><td class="entry" align="left" valign="top"><p>Should terms be automatically lowercased or
not. Defaults to <code class="literal">true</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyze_wildcard</code></p></td><td class="entry" align="left" valign="top"><p>Should wildcard and prefix queries be analyzed or
not. Defaults to <code class="literal">false</code>.</p></td></tr></tbody></table></div><p>Or, with a request body:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/_validate/query' -d '{
  "query" : {
    "filtered" : {
      "query" : {
        "query_string" : {
          "query" : "*:*"
        }
      },
      "filter" : {
        "term" : { "user" : "kimchy" }
      }
    }
  }
}'
{"valid":true,"_shards":{"total":1,"successful":1,"failed":0}}</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The query being sent in the body must be nested in a <code class="literal">query</code> key, same as
the <a class="link" href="search-search.html" title="Search">search api</a> works</p></div></div><p>If the query is invalid, <code class="literal">valid</code> will be <code class="literal">false</code>. Here the query is
invalid because Elasticsearch knows the post_date field should be a date
due to dynamic mapping, and <span class="emphasis"><em>foo</em></span> does not correctly parse into a date:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/_validate/query?q=post_date:foo'
{"valid":false,"_shards":{"total":1,"successful":1,"failed":0}}</pre></div><p>An <code class="literal">explain</code> parameter can be specified to get more detailed information
about why a query failed:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/tweet/_validate/query?q=post_date:foo&amp;pretty=true&amp;explain=true'
{
  "valid" : false,
  "_shards" : {
    "total" : 1,
    "successful" : 1,
    "failed" : 0
  },
  "explanations" : [ {
    "index" : "twitter",
    "valid" : false,
    "error" : "org.elasticsearch.index.query.QueryParsingException: [twitter] Failed to parse; org.elasticsearch.ElasticsearchParseException: failed to parse date field [foo], tried both date format [dateOptionalTime], and timestamp number; java.lang.IllegalArgumentException: Invalid format: \"foo\""
  } ]
}</pre></div><p><span class="added">
      [<span class="version">1.6.0</span>]
      <span class="detail">Added in 1.6.0.
</span></span> When the query is valid, the explanation defaults to the string
representation of that query. With <code class="literal">rewrite</code> set to <code class="literal">true</code>, the explanation
is more detailed showing the actual Lucene query that will be executed.</p><p>For Fuzzy Queries:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/imdb/movies/_validate/query?rewrite=true'
{
  "query": {
    "fuzzy": {
      "actors": "kyle"
    }
  }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
   "valid": true,
   "_shards": {
      "total": 1,
      "successful": 1,
      "failed": 0
   },
   "explanations": [
      {
         "index": "imdb",
         "valid": true,
         "explanation": "filtered(plot:kyle plot:kylie^0.75 plot:kyne^0.75 plot:lyle^0.75 plot:pyle^0.75)-&gt;cache(_type:movies)"
      }
   ]
}</pre></div><p>For More Like This:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/imdb/movies/_validate/query?rewrite=true'
{
  "query": {
    "more_like_this": {
      "like": {
        "_id": "88247"
      },
      "boost_terms": 1
    }
  }
}</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
   "valid": true,
   "_shards": {
      "total": 1,
      "successful": 1,
      "failed": 0
   },
   "explanations": [
      {
         "index": "imdb",
         "valid": true,
         "explanation": "filtered(((title:terminator^3.71334 plot:future^2.763601 plot:human^2.8415773 plot:sarah^3.4193945 plot:kyle^3.8244398 plot:cyborg^3.9177752 plot:connor^4.040236 plot:reese^4.7133346 ... )~6) -ConstantScore(_uid:movies#88247))-&gt;cache(_type:movies)"
      }
   ]
}</pre></div><div class="caution admon"><div class="icon"><img alt="Caution" class="images-icons-caution-png"></div><div class="admon_content"><p>The request is executed on a single shard only, which is randomly
selected. The detailed explanation of the query may depend on which shard is
being hit, and therefore may vary from one request to another.</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">Explain API</span></div><div class="navheader"><span class="prev"><a href="search-validate.html">
              &nbsp;
              Validate API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-percolate.html">Percolator
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-explain"></a>Explain API</h2></div></div></div><p>The explain api computes a score explanation for a query and a specific
document. This can give useful feedback whether a document matches or
didnt match a specific query.</p><p>The <code class="literal">index</code> and <code class="literal">type</code> parameters expect a single index and a single
type respectively.</p><h3><a id="_usage_2"></a>Usage</h3><p>Full query example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/twitter/tweet/1/_explain' -d '{
      "query" : {
        "term" : { "message" : "search" }
      }
}'</pre></div><p>This will yield the following result:</p><div class="pre_wrapper"><pre class="programlisting">{
  "matches" : true,
  "explanation" : {
    "value" : 0.15342641,
    "description" : "fieldWeight(message:search in 0), product of:",
    "details" : [ {
      "value" : 1.0,
      "description" : "tf(termFreq(message:search)=1)"
    }, {
      "value" : 0.30685282,
      "description" : "idf(docFreq=1, maxDocs=1)"
    }, {
      "value" : 0.5,
      "description" : "fieldNorm(field=message, doc=0)"
    } ]
  }
}</pre></div><p>There is also a simpler way of specifying the query via the <code class="literal">q</code>
parameter. The specified <code class="literal">q</code> parameter value is then parsed as if the
<code class="literal">query_string</code> query was used. Example usage of the <code class="literal">q</code> parameter in the
explain api:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/twitter/tweet/1/_explain?q=message:search'</pre></div><p>This will yield the same result as the previous request.</p><h3><a id="_all_parameters_2"></a>All parameters:</h3><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">_source</code>
</p>
</td><td class="entry" valign="top">
<p>
    Set to <code class="literal">true</code> to retrieve the <code class="literal">_source</code> of the document explained. You can also
    retrieve part of the document by using <code class="literal">_source_include</code> &amp; <code class="literal">_source_exclude</code> (see <a class="link" href="docs-get.html#get-source-filtering" title="Source filteringedit">Get API</a> for more details)
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">fields</code>
</p>
</td><td class="entry" valign="top">
<p>
    Allows to control which stored fields to return as part of the
    document explained.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">routing</code>
</p>
</td><td class="entry" valign="top">
<p>
    Controls the routing in the case the routing was used
    during indexing.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">parent</code>
</p>
</td><td class="entry" valign="top">
<p>
    Same effect as setting the routing parameter.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">preference</code>
</p>
</td><td class="entry" valign="top">
<p>
    Controls on which shard the explain is executed.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">source</code>
</p>
</td><td class="entry" valign="top">
<p>
    Allows the data of the request to be put in the query
    string of the url.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">q</code>
</p>
</td><td class="entry" valign="top">
<p>
    The query string (maps to the query_string query).
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">df</code>
</p>
</td><td class="entry" valign="top">
<p>
    The default field to use when no field prefix is defined within
    the query. Defaults to _all field.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">analyzer</code>
</p>
</td><td class="entry" valign="top">
<p>
    The analyzer name to be used when analyzing the query
    string. Defaults to the analyzer of the _all field.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">analyze_wildcard</code>
</p>
</td><td class="entry" valign="top">
<p>
    Should wildcard and prefix queries be analyzed or
    not. Defaults to false.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">lowercase_expanded_terms</code>
</p>
</td><td class="entry" valign="top">
<p>
    Should terms be automatically lowercased
    or not. Defaults to true.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">lenient</code>
</p>
</td><td class="entry" valign="top">
<p>
    If set to true will cause format based failures (like
    providing text to a numeric field) to be ignored. Defaults to false.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">default_operator</code>
</p>
</td><td class="entry" valign="top">
<p>
    The default operator to be used, can be AND or
    OR. Defaults to OR.
</p>
</td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">Percolator</span></div><div class="navheader"><span class="prev"><a href="search-explain.html">
              &nbsp;
              Explain API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-more-like-this.html">More Like This API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-percolate"></a>Percolator</h2></div></div></div><p>Traditionally you design documents based on your data, store them into an index, and then define queries via the search API
in order to retrieve these documents. The percolator works in the opposite direction. First you store queries into an
index and then, via the percolate API, you define documents in order to retrieve these queries.</p><p>The reason that queries can be stored comes from the fact that in Elasticsearch both documents and queries are defined in
JSON. This allows you to embed queries into documents via the index API. Elasticsearch can extract the query from a
document and make it available to the percolate API. Since documents are also defined as JSON, you can define a document
in a request to the percolate API.</p><p>The percolator and most of its features work in realtime, so once a percolate query is indexed it can immediately be used
in the percolate API.</p><div class="important admon"><div class="icon"><img alt="Important" class="images-icons-important-png"></div><div class="admon_content"><p>Fields referred to in a percolator query must <span class="strong emphasis"><strong>already</strong></span> exist in the mapping
associated with the index used for percolation.
There are two ways to make sure that a field mapping exist:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Add or update a mapping via the <a class="link" href="indices-create-index.html" title="Create Index">create index</a> or
  <a class="link" href="indices-put-mapping.html" title="Put Mapping">put mapping</a> APIs.
</li><li class="listitem">
Percolate a document before registering a query. Percolating a document can
  add field mappings dynamically, in the same way as happens when indexing a
  document.
</li></ul></div></div></div><h3><a id="_sample_usage"></a>Sample Usage</h3><p>Create an index with a mapping for the field <code class="literal">message</code>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/my-index' -d '{
  "mappings": {
    "my-type": {
      "properties": {
        "message": {
          "type": "string"
        }
      }
    }
  }
}'</pre></div><p>Register a query in the percolator:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/my-index/.percolator/1' -d '{
    "query" : {
        "match" : {
            "message" : "bonsai tree"
        }
    }
}'</pre></div><p>Match a document to the registered percolator queries:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/my-index/my-type/_percolate' -d '{
    "doc" : {
        "message" : "A new bonsai tree in the office"
    }
}'</pre></div><p>The above request will yield the following response:</p><div class="pre_wrapper"><pre class="programlisting">{
    "took" : 19,
    "_shards" : {
        "total" : 5,
        "successful" : 5,
        "failed" : 0
    },
    "total" : 1,
    "matches" : [ <a id="CO45-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        {
          "_index" : "my-index",
          "_id" : "1"
        }
    ]
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO45-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The percolate query with id <code class="literal">1</code> matches our document.
</p></td></tr></tbody></table></div><h3><a id="_indexing_percolator_queries"></a>Indexing Percolator Queries</h3><p>Percolate queries are stored as documents in a specific format and in an arbitrary index under a reserved type with the
name <code class="literal">.percolator</code>. The query itself is placed as is in a JSON object under the top level field <code class="literal">query</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
                "match" : {
                        "field" : "value"
                }
        }
}</pre></div><p>Since this is just an ordinary document, any field can be added to this document. This can be useful later on to only
percolate documents by specific queries.</p><div class="pre_wrapper"><pre class="programlisting">{
        "query" : {
                "match" : {
                        "field" : "value"
                }
        },
        "priority" : "high"
}</pre></div><p>On top of this, also a mapping type can be associated with this query. This allows to control how certain queries
like range queries, shape filters, and other query &amp; filters that rely on mapping settings get constructed. This is
important since the percolate queries are indexed into the <code class="literal">.percolator</code> type, and the queries / filters that rely on
mapping settings would yield unexpected behaviour. Note: By default, field names do get resolved in a smart manner,
but in certain cases with multiple types this can lead to unexpected behavior, so being explicit about it will help.</p><div class="pre_wrapper"><pre class="programlisting">{
        "query" : {
                "range" : {
                        "created_at" : {
                                "gte" : "2010-01-01T00:00:00",
                                "lte" : "2011-01-01T00:00:00"
                        }
                }
        },
        "type" : "tweet",
        "priority" : "high"
}</pre></div><p>In the above example the range query really gets parsed into a Lucene numeric range query, based on the settings for
the field <code class="literal">created_at</code> in the type <code class="literal">tweet</code>.</p><p>Just as with any other type, the <code class="literal">.percolator</code> type has a mapping, which you can configure via the mappings APIs.
The default percolate mapping doesnt index the query field, only stores it.</p><p>Because <code class="literal">.percolate</code> is a type it also has a mapping. By default the following mapping is active:</p><div class="pre_wrapper"><pre class="programlisting">{
        ".percolator" : {
                "properties" : {
                        "query" : {
                                "type" : "object",
                                "enabled" : false
                        }
                }
        }
}</pre></div><p>If needed, this mapping can be modified with the update mapping API.</p><p>In order to un-register a percolate query the delete API can be used. So if the previous added query needs to be deleted
the following delete requests needs to be executed:</p><div class="pre_wrapper"><pre class="programlisting">curl -XDELETE localhost:9200/my-index/.percolator/1</pre></div><h3><a id="_percolate_api"></a>Percolate API</h3><p>The percolate API executes in a distributed manner, meaning it executes on all shards an index points to.</p><div class="itemizedlist"><p class="title"><strong>Required options</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">index</code> - The index that contains the <code class="literal">.percolator</code> type. This can also be an alias.
</li><li class="listitem">
<code class="literal">type</code> - The type of the document to be percolated. The mapping of that type is used to parse document.
</li><li class="listitem">
<code class="literal">doc</code> - The actual document to percolate. Unlike the other two options this needs to be specified in the request body. Note: This isnt required when percolating an existing document.
</li></ul></div><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/twitter/tweet/_percolate' -d '{
        "doc" : {
                "created_at" : "2010-10-10T00:00:00",
                "message" : "some text"
        }
}'</pre></div><div class="itemizedlist"><p class="title"><strong>Additional supported query string options</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">routing</code> - In case the percolate queries are partitioned by a custom routing value, that routing option makes sure
that the percolate request only gets executed on the shard where the routing value is partitioned to. This means that
the percolate request only gets executed on one shard instead of all shards. Multiple values can be specified as a
comma separated string, in that case the request can be be executed on more than one shard.
</li><li class="listitem">
<code class="literal">preference</code> - Controls which shard replicas are preferred to execute the request on. Works the same as in the search API.
</li><li class="listitem">
<code class="literal">ignore_unavailable</code> - Controls if missing concrete indices should silently be ignored. Same as is in the search API.
</li><li class="listitem">
<code class="literal">percolate_format</code> - If <code class="literal">ids</code> is specified then the matches array in the percolate response will contain a string
array of the matching ids instead of an array of objects. This can be useful to reduce the amount of data being send
back to the client. Obviously if there are two percolator queries with same id from different indices there is no way
to find out which percolator query belongs to what index. Any other value to <code class="literal">percolate_format</code> will be ignored.
</li></ul></div><div class="itemizedlist"><p class="title"><strong>Additional request body options</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">filter</code> - Reduces the number queries to execute during percolating. Only the percolator queries that match with the
filter will be included in the percolate execution. The filter option works in near realtime, so a refresh needs to have
occurred for the filter to included the latest percolate queries.
</li><li class="listitem">
<code class="literal">query</code> - Same as the <code class="literal">filter</code> option, but also the score is computed. The computed scores can then be used by the
<code class="literal">track_scores</code> and <code class="literal">sort</code> option.
</li><li class="listitem">
<code class="literal">size</code> - Defines to maximum number of matches (percolate queries) to be returned. Defaults to unlimited.
</li><li class="listitem">
<code class="literal">track_scores</code> - Whether the <code class="literal">_score</code> is included for each match. The <code class="literal">_score</code> is based on the query and represents
how the query matched the <span class="strong emphasis"><strong>percolate querys metadata</strong></span>, <span class="strong emphasis"><strong>not</strong></span> how the document (that is being percolated) matched
the query. The <code class="literal">query</code> option is required for this option. Defaults to <code class="literal">false</code>.
</li><li class="listitem">
<code class="literal">sort</code> - Define a sort specification like in the search API. Currently only sorting <code class="literal">_score</code> reverse (default relevancy)
is supported. Other sort fields will throw an exception. The <code class="literal">size</code> and <code class="literal">query</code> option are required for this setting. Like
<code class="literal">track_score</code> the score is based on the query and represents how the query matched to the percolate querys metadata
and <span class="strong emphasis"><strong>not</strong></span> how the document being percolated matched to the query.
</li><li class="listitem">
<code class="literal">facets</code> - Allows facet definitions to be included. The facets are based on the matching percolator queries. See facet
documentation how to define facets.
</li><li class="listitem">
<code class="literal">aggs</code> - Allows aggregation definitions to be included. The aggregations are based on the matching percolator queries,
look at the aggregation documentation on how to define aggregations.
</li><li class="listitem">
<code class="literal">highlight</code> - Allows highlight definitions to be included. The document being percolated is being highlight for each
matching query. This allows you to see how each match is highlighting the document being percolated. See highlight
documentation on how to define highlights. The <code class="literal">size</code> option is required for highlighting, the performance of highlighting
 in the percolate API depends of how many matches are being highlighted.
</li></ul></div><h3><a id="_dedicated_percolator_index"></a>Dedicated Percolator Index</h3><p>Percolate queries can be added to any index. Instead of adding percolate queries to the index the data resides in,
these queries can also be added to a dedicated index. The advantage of this is that this dedicated percolator index
can have its own index settings (For example the number of primary and replica shards). If you choose to have a dedicated
percolate index, you need to make sure that the mappings from the normal index are also available on the percolate index.
Otherwise percolate queries can be parsed incorrectly.</p><h3><a id="_filtering_executed_queries"></a>Filtering Executed Queries</h3><p>Filtering allows to reduce the number of queries, any filter that the search API supports, (except the ones mentioned in important notes)
can also be used in the percolate API. The filter only works on the metadata fields. The <code class="literal">query</code> field isnt indexed by
default. Based on the query we indexed before, the following filter can be defined:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET localhost:9200/test/type1/_percolate -d '{
    "doc" : {
        "field" : "value"
    },
    "filter" : {
        "term" : {
            "priority" : "high"
        }
    }
}'</pre></div><h3><a id="_percolator_count_api"></a>Percolator Count API</h3><p>The count percolate API, only keeps track of the number of matches and doesnt keep track of the actual matches
Example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/my-index/my-type/_percolate/count' -d '{
   "doc" : {
       "message" : "some message"
   }
}'</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
   ... // header
   "total" : 3
}</pre></div><h3><a id="_percolating_an_existing_document"></a>Percolating an Existing Document</h3><p>In order to percolate a newly indexed document, the percolate existing document can be used. Based on the response
from an index request, the <code class="literal">_id</code> and other meta information can be used to immediately percolate the newly added
document.</p><div class="itemizedlist"><p class="title"><strong>Supported options for percolating an existing document on top of existing percolator options:</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">id</code> - The id of the document to retrieve the source for.
</li><li class="listitem">
<code class="literal">percolate_index</code> - The index containing the percolate queries. Defaults to the <code class="literal">index</code> defined in the url.
</li><li class="listitem">
<code class="literal">percolate_type</code> - The percolate type (used for parsing the document). Default to <code class="literal">type</code> defined in the url.
</li><li class="listitem">
<code class="literal">routing</code> - The routing value to use when retrieving the document to percolate.
</li><li class="listitem">
<code class="literal">preference</code> - Which shard to prefer when retrieving the existing document.
</li><li class="listitem">
<code class="literal">percolate_routing</code> - The routing value to use when percolating the existing document.
</li><li class="listitem">
<code class="literal">percolate_preference</code> - Which shard to prefer when executing the percolate request.
</li><li class="listitem">
<code class="literal">version</code> - Enables a version check. If the fetched documents version isnt equal to the specified version then the request fails with a version conflict and the percolation request is aborted.
</li></ul></div><p>Internally the percolate API will issue a GET request for fetching the <code class="literal">_source</code> of the document to percolate.
For this feature to work, the <code class="literal">_source</code> for documents to be percolated needs to be stored.</p><h4><a id="_example_3"></a>Example</h4><p>Index response:</p><div class="pre_wrapper"><pre class="programlisting">{
        "_index" : "my-index",
        "_type" : "message",
        "_id" : "1",
        "_version" : 1,
        "created" : true
}</pre></div><p>Percolating an Existing Document:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/my-index1/message/1/_percolate'</pre></div><p>The response is the same as with the regular percolate API.</p><h3><a id="_multi_percolate_api"></a>Multi Percolate API</h3><p>The multi percolate API allows to bundle multiple percolate requests into a single request, similar to what the multi
search API does to search requests. The request body format is line based. Each percolate request item takes two lines,
the first line is the header and the second line is the body.</p><p>The header can contain any parameter that normally would be set via the request path or query string parameters.
There are several percolate actions, because there are multiple types of percolate requests.</p><div class="itemizedlist"><p class="title"><strong>Supported actions:</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">percolate</code> - Action for defining a regular percolate request.
</li><li class="listitem">
<code class="literal">count</code> - Action for defining a count percolate request.
</li></ul></div><p>Depending on the percolate action different parameters can be specified. For example the percolate and percolate existing
document actions support different parameters.</p><div class="itemizedlist"><p class="title"><strong>The following endpoints are supported</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">GET|POST /[index]/[type]/_mpercolate</code>
</li><li class="listitem">
<code class="literal">GET|POST /[index]/_mpercolate</code>
</li><li class="listitem">
<code class="literal">GET|POST /_mpercolate</code>
</li></ul></div><p>The <code class="literal">index</code> and <code class="literal">type</code> defined in the url path are the default index and type.</p><h4><a id="_example_4"></a>Example</h4><p>Request:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/twitter/tweet/_mpercolate' --data-binary "@requests.txt"; echo</pre></div><p>The index <code class="literal">twitter</code> is the default index, and the type <code class="literal">tweet</code> is the default type and will be used in the case a header
doesnt specify an index or type.</p><p>requests.txt:</p><div class="pre_wrapper"><pre class="programlisting">{"percolate" : {"index" : "twitter", "type" : "tweet"}}
{"doc" : {"message" : "some text"}}
{"percolate" : {"index" : "twitter", "type" : "tweet", "id" : "1"}}
{}
{"percolate" : {"index" : "users", "type" : "user", "id" : "3", "percolate_index" : "users_2012" }}
{"size" : 10}
{"count" : {"index" : "twitter", "type" : "tweet"}}
{"doc" : {"message" : "some other text"}}
{"count" : {"index" : "twitter", "type" : "tweet", "id" : "1"}}
{}</pre></div><p>For a percolate existing document item (headers with the <code class="literal">id</code> field), the response can be an empty JSON object.
All the required options are set in the header.</p><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    "responses" : [
        {
            "took" : 24,
            "_shards" : {
                "total" : 5,
                "successful" : 5,
                "failed" : 0,
            },
            "total" : 3,
            "matches" : [
                {
                    "_index": "twitter",
                    "_id": "1"
                },
                {
                    "_index": "twitter",
                    "_id": "2"
                },
                {
                    "_index": "twitter",
                    "_id": "3"
                }
            ]
        },
        {
            "took" : 12,
            "_shards" : {
                "total" : 5,
                "successful" : 5,
                "failed" : 0,
            },
            "total" : 3,
            "matches" : [
                {
                    "_index": "twitter",
                    "_id": "4"
                },
                {
                    "_index": "twitter",
                    "_id": "5"
                },
                {
                    "_index": "twitter",
                    "_id": "6"
                }
             ]
        },
        {
            "error" : "DocumentMissingException[[_na][_na] [user][3]: document missing]"
        },
        {
            "took" : 12,
            "_shards" : {
                "total" : 5,
                "successful" : 5,
                "failed" : 0,
            },
            "total" : 3
        },
        {
            "took" : 14,
            "_shards" : {
                "total" : 5,
                "successful" : 5,
                "failed" : 0,
            },
            "total" : 3
        }
    ]
}</pre></div><p>Each item represents a percolate response, the order of the items maps to the order in which the percolate requests
were specified. In case a percolate request failed, the item response is substituted with an error message.</p><h3><a id="_how_it_works_under_the_hood"></a>How it Works Under the Hood</h3><p>When indexing a document that contains a query in an index and the <code class="literal">.percolator</code> type, the query part of the documents gets
parsed into a Lucene query and is kept in memory until that percolator document is removed or the index containing the
<code class="literal">.percolator</code> type gets removed. So, all the active percolator queries are kept in memory.</p><p>At percolate time, the document specified in the request gets parsed into a Lucene document and is stored in a in-memory
Lucene index. This in-memory index can just hold this one document and it is optimized for that. Then all the queries
that are registered to the index that the percolate request is targeted for, are going to be executed on this single document
in-memory index. This happens on each shard the percolate request needs to execute.</p><p>By using <code class="literal">routing</code>, <code class="literal">filter</code> or <code class="literal">query</code> features the amount of queries that need to be executed can be reduced and thus
the time the percolate API needs to run can be decreased.</p><h3><a id="_important_notes"></a>Important Notes</h3><p>Because the percolator API is processing one document at a time, it doesnt support queries and filters that run
against child documents such as <code class="literal">has_child</code>, <code class="literal">has_parent</code> and <code class="literal">top_children</code>.</p><p>The <code class="literal">inner_hits</code> feature on the <code class="literal">nested</code> query isnt supported in the percolate api.</p><p>The <code class="literal">wildcard</code> and <code class="literal">regexp</code> query natively use a lot of memory and because the percolator keeps the queries into memory
this can easily take up the available memory in the heap space. If possible try to use a <code class="literal">prefix</code> query or ngramming to
achieve the same result (with way less memory being used).</p><p>The delete-by-query API doesnt work to unregister a query, it only deletes the percolate documents from disk. In order
to update the registered queries in memory the index needs be closed and opened.</p><h3><a id="_forcing_unmapped_fields_to_be_handled_as_strings"></a>Forcing Unmapped Fields to be Handled as Strings</h3><p>In certain cases it is unknown what kind of percolator queries do get registered, and if no field mapping exists for fields
that are referred by percolator queries then adding a percolator query fails. This means the mapping needs to be updated
to have the field with the appropriate settings, and then the percolator query can be added. But sometimes it is sufficient
if all unmapped fields are handled as if these were default string fields. In those cases one can configure the
<code class="literal">index.percolator.map_unmapped_fields_as_string</code> setting to <code class="literal">true</code> (default to <code class="literal">false</code>) and then if a field referred in
a percolator query does not exist, it will be handled as a default string field so that adding the percolator query doesnt
fail.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">More Like This API</span></div><div class="navheader"><span class="prev"><a href="search-percolate.html">
              &nbsp;
              Percolator</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="search-field-stats.html">Field stats API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-more-like-this"></a>More Like This API</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.6.0. </h3>
 The More Like This API will be removed in 2.0, instead use the More Like This Query
</div></div><p>The more like this (mlt) API allows to get documents that are "like" a
specified document. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/twitter/tweet/1/_mlt?mlt_fields=tag,content&amp;min_doc_freq=1'</pre></div><p>The API simply results in executing a search request with
<a class="link" href="query-dsl-mlt-query.html" title="More Like This Query">moreLikeThis</a> query (http
parameters match the parameters to the <code class="literal">more_like_this</code> query). This
means that the body of the request can optionally include all the
request body options in the <a class="link" href="search-search.html" title="Search">search API</a> (aggs, from/to and so on). Internally, the more like this
API is equivalent to performing a boolean query of <code class="literal">more_like_this_field</code>
queries, with one query per specified <code class="literal">mlt_fields</code>.</p><p>Rest parameters relating to search are also allowed, including
<code class="literal">search_type</code>, <code class="literal">search_indices</code>, <code class="literal">search_types</code>, <code class="literal">search_scroll</code>,
<code class="literal">search_size</code> and <code class="literal">search_from</code>.</p><p>When no <code class="literal">mlt_fields</code> are specified, all the fields of the document will
be used in the <code class="literal">more_like_this</code> query generated.</p><p>By default, the queried document is excluded from the response (<code class="literal">include</code>
set to false).</p><p>Note: In order to use the <code class="literal">mlt</code> feature a <code class="literal">mlt_field</code> needs to be either
be <code class="literal">stored</code>, store <code class="literal">term_vector</code> or <code class="literal">source</code> needs to be enabled.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="search.html">Search APIs</a></span>  <span class="breadcrumb-node">Field stats API</span></div><div class="navheader"><span class="prev"><a href="search-more-like-this.html">
              &nbsp;
              More Like This API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices.html">Indices APIs
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="search-field-stats"></a>Field stats API</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p></div></div><p>The field stats api allows one to find statistical properties of a field
without executing a search, but looking up measurements that are natively
available in the Lucene index. This can be useful to explore a dataset which
you dont know much about. For example, this allows creating a histogram
aggregation with meaningful intervals based on the min/max range of values.</p><p>The field stats api by defaults executes on all indices, but can execute on
specific indices too.</p><p>All indices:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET "http://localhost:9200/_field_stats?fields=rating"</pre></div><p>Specific indices:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET "http://localhost:9200/index1,index2/_field_stats?fields=rating"</pre></div><p>Supported request options:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">fields</code>
</p>
</td><td class="entry" valign="top">
<p>
A list of fields to compute stats for.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">level</code>
</p>
</td><td class="entry" valign="top">
<p>
Defines if field stats should be returned on a per index level or on a
            cluster wide level. Valid values are <code class="literal">indices</code> and <code class="literal">cluster</code> (default).
</p>
</td></tr></tbody></table></div><h3><a id="_field_statistics_2"></a>Field statistics</h3><p>The field stats api is supported on string based, number based and date based fields and can return the following statistics per field:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">max_doc</code>
</p>
</td><td class="entry" valign="top">
<p>
The total number of documents.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">doc_count</code>
</p>
</td><td class="entry" valign="top">
<p>
The number of documents that have at least one term for this field, or -1 if
this measurement isnt available on one or more shards.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">density</code>
</p>
</td><td class="entry" valign="top">
<p>
The percentage of documents that have at least one value for this field. This
is a derived statistic and is based on the <code class="literal">max_doc</code> and <code class="literal">doc_count</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">sum_doc_freq</code>
</p>
</td><td class="entry" valign="top">
<p>
The sum of each terms document frequency in this field, or -1 if this
measurement isnt available on one or more shards.
Document frequency is the number of documents containing a particular term.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">sum_total_term_freq</code>
</p>
</td><td class="entry" valign="top">
<p>
The sum of the term frequencies of all terms in this field across all
documents, or -1 if this measurement isnt available on one or more shards.
Term frequency is the total number of occurrences of a term in a particular
document and field.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">min_value</code>
</p>
</td><td class="entry" valign="top">
<p>
The lowest value in the field represented in a displayable form.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max_value</code>
</p>
</td><td class="entry" valign="top">
<p>
The highest value in the field represented in a displayable form.
</p>
</td></tr></tbody></table></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Documents marked as deleted (but not yet removed by the merge process)
still affect all the mentioned statistics.</p></div></div><div class="example"><a id="id-1.7.18.15"></a><p class="title"><strong>Example&nbsp;1.&nbsp;Cluster level field statistics</strong></p><div class="example-contents"><div class="pre_wrapper"><pre class="programlisting">GET /_field_stats?fields=rating,answer_count,creation_date,display_name</pre></div><div class="pre_wrapper"><pre class="programlisting">{
   "_shards": {
      "total": 1,
      "successful": 1,
      "failed": 0
   },
   "indices": {
      "_all": { <a id="CO46-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
         "fields": {
            "creation_date": {
               "max_doc": 1326564,
               "doc_count": 564633,
               "density": 42,
               "sum_doc_freq": 2258532,
               "sum_total_term_freq": -1,
               "min_value": "2008-08-01T16:37:51.513Z",
               "max_value": "2013-06-02T03:23:11.593Z"
            },
            "display_name": {
               "max_doc": 1326564,
               "doc_count": 126741,
               "density": 9,
               "sum_doc_freq": 166535,
               "sum_total_term_freq": 166616,
               "min_value": "0",
               "max_value": ""
            },
            "answer_count": {
               "max_doc": 1326564,
               "doc_count": 139885,
               "density": 10,
               "sum_doc_freq": 559540,
               "sum_total_term_freq": -1,
               "min_value": 0,
               "max_value": 160
            },
            "rating": {
               "max_doc": 1326564,
               "doc_count": 437892,
               "density": 33,
               "sum_doc_freq": 1751568,
               "sum_total_term_freq": -1,
               "min_value": -14,
               "max_value": 1277
            }
         }
      }
   }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO46-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">_all</code> key indicates that it contains the field stats of all indices in the cluster.
</p></td></tr></tbody></table></div></div></div><br class="example-break"><div class="example"><a id="id-1.7.18.16"></a><p class="title"><strong>Example&nbsp;2.&nbsp;Indices level field statistics</strong></p><div class="example-contents"><div class="pre_wrapper"><pre class="programlisting">GET /_field_stats?fields=rating,answer_count,creation_date,display_name&amp;level=indices</pre></div><div class="pre_wrapper"><pre class="programlisting">{
   "_shards": {
      "total": 1,
      "successful": 1,
      "failed": 0
   },
   "indices": {
      "stack": { <a id="CO47-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
         "fields": {
            "creation_date": {
               "max_doc": 1326564,
               "doc_count": 564633,
               "density": 42,
               "sum_doc_freq": 2258532,
               "sum_total_term_freq": -1,
               "min_value": "2008-08-01T16:37:51.513Z",
               "max_value": "2013-06-02T03:23:11.593Z"
            },
            "display_name": {
               "max_doc": 1326564,
               "doc_count": 126741,
               "density": 9,
               "sum_doc_freq": 166535,
               "sum_total_term_freq": 166616,
               "min_value": "0",
               "max_value": ""
            },
            "answer_count": {
               "max_doc": 1326564,
               "doc_count": 139885,
               "density": 10,
               "sum_doc_freq": 559540,
               "sum_total_term_freq": -1,
               "min_value": 0,
               "max_value": 160
            },
            "rating": {
               "max_doc": 1326564,
               "doc_count": 437892,
               "density": 33,
               "sum_doc_freq": 1751568,
               "sum_total_term_freq": -1,
               "min_value": -14,
               "max_value": 1277
            }
         }
      }
   }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO47-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">stack</code> key means it contains all field stats for the <code class="literal">stack</code> index.
</p></td></tr></tbody></table></div></div></div><br class="example-break"></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">Indices APIs</span></div><div class="navheader"><span class="prev"><a href="search-field-stats.html">
              &nbsp;
              Field stats API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-create-index.html">Create Index
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="indices"></a>Indices APIs</h1></div></div></div><div class="partintro"><div></div><p>The indices APIs are used to manage individual indices,
index settings, aliases, mappings, index templates
and warmers.</p><h2><a id="index-management"></a>Index management:</h2><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="xref" href="indices-create-index.html" title="Create Index"><em>Create Index</em></a>
</li><li class="listitem">
<a class="xref" href="indices-delete-index.html" title="Delete Index"><em>Delete Index</em></a>
</li><li class="listitem">
<a class="xref" href="indices-get-index.html" title="Get Index"><em>Get Index</em></a>
</li><li class="listitem">
<a class="xref" href="indices-exists.html" title="Indices Exists"><em>Indices Exists</em></a>
</li><li class="listitem">
<a class="xref" href="indices-open-close.html" title="Open / Close Index API"><em>Open / Close Index API</em></a>
</li></ul></div><h2><a id="mapping-management"></a>Mapping management:</h2><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="xref" href="indices-put-mapping.html" title="Put Mapping"><em>Put Mapping</em></a>
</li><li class="listitem">
<a class="xref" href="indices-get-mapping.html" title="Get Mapping"><em>Get Mapping</em></a>
</li><li class="listitem">
<a class="xref" href="indices-get-field-mapping.html" title="Get Field Mapping"><em>Get Field Mapping</em></a>
</li><li class="listitem">
<a class="xref" href="indices-delete-mapping.html" title="Delete Mapping"><em>Delete Mapping</em></a>
</li><li class="listitem">
<a class="xref" href="indices-types-exists.html" title="Types Exists"><em>Types Exists</em></a>
</li></ul></div><h2><a id="alias-management"></a>Alias management:</h2><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="xref" href="indices-aliases.html" title="Index Aliases"><em>Index Aliases</em></a>
</li></ul></div><h2><a id="index-settings"></a>Index settings:</h2><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="xref" href="indices-update-settings.html" title="Update Indices Settings"><em>Update Indices Settings</em></a>
</li><li class="listitem">
<a class="xref" href="indices-get-settings.html" title="Get Settings"><em>Get Settings</em></a>
</li><li class="listitem">
<a class="xref" href="indices-analyze.html" title="Analyze"><em>Analyze</em></a>
</li><li class="listitem">
<a class="xref" href="indices-templates.html" title="Index Templates"><em>Index Templates</em></a>
</li><li class="listitem">
<a class="xref" href="indices-warmers.html" title="Warmers"><em>Warmers</em></a>
</li></ul></div><h2><a id="shadow-replicas"></a>Replica configurations</h2><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="xref" href="indices-shadow-replicas.html" title="Shadow replica indices"><em>Shadow replica indices</em></a>
</li></ul></div><h2><a id="monitoring"></a>Monitoring:</h2><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="xref" href="indices-status.html" title="Status"><em>Status</em></a>
</li><li class="listitem">
<a class="xref" href="indices-stats.html" title="Indices Stats"><em>Indices Stats</em></a>
</li><li class="listitem">
<a class="xref" href="indices-segments.html" title="Indices Segments"><em>Indices Segments</em></a>
</li><li class="listitem">
<a class="xref" href="indices-recovery.html" title="Indices Recovery"><em>Indices Recovery</em></a>
</li></ul></div><h2><a id="status-management"></a>Status management:</h2><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="xref" href="indices-clearcache.html" title="Clear Cache"><em>Clear Cache</em></a>
</li><li class="listitem">
<a class="xref" href="indices-refresh.html" title="Refresh"><em>Refresh</em></a>
</li><li class="listitem">
<a class="xref" href="indices-flush.html" title="Flush"><em>Flush</em></a>
</li><li class="listitem">
<a class="xref" href="indices-optimize.html" title="Optimize"><em>Optimize</em></a>
</li><li class="listitem">
<a class="xref" href="indices-upgrade.html" title="Upgrade"><em>Upgrade</em></a>
</li></ul></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Create Index</span></div><div class="navheader"><span class="prev"><a href="indices.html">
              &nbsp;
              Indices APIs</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-delete-index.html">Delete Index
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-create-index"></a>Create Index</h2></div></div></div><p>The create index API allows to instantiate an index. Elasticsearch
provides support for multiple indices, including executing operations
across several indices.</p><h3><a id="create-index-settings"></a>Index Settings</h3><p>Each index created can have specific settings
associated with it.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/twitter/'

$ curl -XPUT 'http://localhost:9200/twitter/' -d '
index :
    number_of_shards : 3 <a id="CO48-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
    number_of_replicas : 2 <a id="CO48-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
'</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO48-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Default for <code class="literal">number_of_shards</code> is 5
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO48-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Default for <code class="literal">number_of_replicas</code> is 1 (ie one replica for each primary shard)
</p></td></tr></tbody></table></div><p>The above second curl example shows how an index called <code class="literal">twitter</code> can be
created with specific settings for it using <a class="ulink" href="http://www.yaml.org" target="_top">YAML</a>.
In this case, creating an index with 3 shards, each with 2 replicas. The
index settings can also be defined with <a class="ulink" href="http://www.json.org" target="_top">JSON</a>:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/twitter/' -d '{
    "settings" : {
        "index" : {
            "number_of_shards" : 3,
            "number_of_replicas" : 2
        }
    }
}'</pre></div><p>or more simplified</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/twitter/' -d '{
    "settings" : {
        "number_of_shards" : 3,
        "number_of_replicas" : 2
    }
}'</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>You do not have to explicitly specify <code class="literal">index</code> section inside the
<code class="literal">settings</code> section.</p></div></div><p>For more information regarding all the different index level settings
that can be set when creating an index, please check the
<a class="link" href="index-modules.html" title="Index Modules">index modules</a> section.</p><h3><a id="mappings"></a>Mappings</h3><p>The create index API allows to provide a set of one or more mappings:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST localhost:9200/test -d '{
    "settings" : {
        "number_of_shards" : 1
    },
    "mappings" : {
        "type1" : {
            "_source" : { "enabled" : false },
            "properties" : {
                "field1" : { "type" : "string", "index" : "not_analyzed" }
            }
        }
    }
}'</pre></div><h3><a id="warmers"></a>Warmers</h3><p>The create index API allows also to provide a set of <a class="link" href="indices-warmers.html" title="Warmers">warmers</a>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test -d '{
    "warmers" : {
        "warmer_1" : {
            "source" : {
                "query" : {
                    ...
                }
            }
        }
    }
}'</pre></div><h3><a id="create-index-aliases"></a>Aliases</h3><p>The create index API allows also to provide a set of <a class="link" href="indices-aliases.html" title="Index Aliases">aliases</a>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test -d '{
    "aliases" : {
        "alias_1" : {},
        "alias_2" : {
            "filter" : {
                "term" : {"user" : "kimchy" }
            },
            "routing" : "kimchy"
        }
    }
}'</pre></div><h3><a id="_creation_date"></a>Creation Date</h3><p>When an index is created, a timestamp is stored in the index metadata for the creation date.  By
default this it is automatically generated but it can also be specified using the
<code class="literal">creation_date</code> parameter on the create index API:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test -d '{
    "creation_date" : 1407751337000 <a id="CO49-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
}'</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO49-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
<code class="literal">creation_date</code> is set using epoch time in milliseconds.
</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Delete Index</span></div><div class="navheader"><span class="prev"><a href="indices-create-index.html">
              &nbsp;
              Create Index</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-get-index.html">Get Index
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-delete-index"></a>Delete Index</h2></div></div></div><p>The delete index API allows to delete an existing index.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XDELETE 'http://localhost:9200/twitter/'</pre></div><p>The above example deletes an index called <code class="literal">twitter</code>. Specifying an index,
alias or wildcard expression is required.</p><p>The delete index API can also be applied to more than one index, or on
all indices (be careful!) by using <code class="literal">_all</code> or <code class="literal">*</code> as index.</p><p>In order to disable allowing to delete indices via wildcards or <code class="literal">_all</code>,
set <code class="literal">action.destructive_requires_name</code> setting in the config to <code class="literal">true</code>.
This setting can also be changed via the cluster update settings api.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Get Index</span></div><div class="navheader"><span class="prev"><a href="indices-delete-index.html">
              &nbsp;
              Delete Index</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-exists.html">Indices Exists
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-get-index"></a>Get Index</h2></div></div></div><p>The get index API allows to retrieve information about one or more indexes.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/twitter/'</pre></div><p>The above example gets the information for an index called <code class="literal">twitter</code>. Specifying an index,
alias or wildcard expression is required.</p><p>The get index API can also be applied to more than one index, or on
all indices by using <code class="literal">_all</code> or <code class="literal">*</code> as index.</p><h3><a id="_filtering_index_information"></a>Filtering index information</h3><p>The information returned by the get API can be filtered to include only specific features
by specifying a comma delimited list of features in the URL:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/twitter/_settings,_mappings'</pre></div><p>The above command will only return the settings and mappings for the index called <code class="literal">twitter</code>.</p><p>The available features are <code class="literal">_settings</code>, <code class="literal">_mappings</code>, <code class="literal">_warmers</code> and <code class="literal">_aliases</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Indices Exists</span></div><div class="navheader"><span class="prev"><a href="indices-get-index.html">
              &nbsp;
              Get Index</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-open-close.html">Open / Close Index API
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-exists"></a>Indices Exists</h2></div></div></div><p>Used to check if the index (indices) exists or not. For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XHEAD -i 'http://localhost:9200/twitter'</pre></div><p>The HTTP status code indicates if the index exists or not. A <code class="literal">404</code> means
it does not exist, and <code class="literal">200</code> means it does.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Open / Close Index API</span></div><div class="navheader"><span class="prev"><a href="indices-exists.html">
              &nbsp;
              Indices Exists</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-put-mapping.html">Put Mapping
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-open-close"></a>Open / Close Index API</h2></div></div></div><p>The open and close index APIs allow to close an index, and later on
opening it. A closed index has almost no overhead on the cluster (except
for maintaining its metadata), and is blocked for read/write operations.
A closed index can be opened which will then go through the normal
recovery process.</p><p>The REST endpoint is <code class="literal">/{index}/_close</code> and <code class="literal">/{index}/_open</code>. For
example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/my_index/_close'

curl -XPOST 'localhost:9200/my_index/_open'</pre></div><p>It is possible to open and close multiple indices. An error will be thrown
if the request explicitly refers to a missing index. This behaviour can be
disabled using the <code class="literal">ignore_unavailable=true</code> parameter.</p><p>All indices can be opened or closed at once using <code class="literal">_all</code> as the index name
or specifying patterns that identify them all (e.g. <code class="literal">*</code>).</p><p>Identifying indices via wildcards or <code class="literal">_all</code> can be disabled by setting the
<code class="literal">action.destructive_requires_name</code> flag in the config file to <code class="literal">true</code>.
This setting can also be changed via the cluster update settings api.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Put Mapping</span></div><div class="navheader"><span class="prev"><a href="indices-open-close.html">
              &nbsp;
              Open / Close Index API</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-get-mapping.html">Get Mapping
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-put-mapping"></a>Put Mapping</h2></div></div></div><p>The put mapping API allows to register specific mapping definition for a
specific type.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/twitter/_mapping/tweet' -d '
{
    "tweet" : {
        "properties" : {
            "message" : {"type" : "string", "store" : true }
        }
    }
}
'</pre></div><p>The above example creates a mapping called <code class="literal">tweet</code> within the <code class="literal">twitter</code>
index. The mapping simply defines that the <code class="literal">message</code> field should be
stored (by default, fields are not stored, just indexed) so we can
retrieve it later on using selective loading.</p><p>More information on how to define type mappings can be found in the
<a class="link" href="mapping.html" title="Mapping">mapping</a> section.</p><h3><a id="merging-conflicts"></a>Merging &amp; Conflicts</h3><p>When an existing mapping already exists under the given type, the two
mapping definitions, the one already defined, and the new ones are
merged. The <code class="literal">ignore_conflicts</code> parameters can be used to control if
conflicts should be ignored or not, by default, it is set to <code class="literal">false</code>
which means conflicts are <span class="strong emphasis"><strong>not</strong></span> ignored.</p><p>The definition of conflict is really dependent on the type merged, but
in general, if a different core type is defined, it is considered as a
conflict. New mapping definitions can be added to object types, and core
type mappings can be upgraded by specifying multi fields on a core type.</p><h3><a id="put-mapping-multi-index"></a>Multi Index</h3><p>The put mapping API can be applied to more than one index with a single
call, or even on <code class="literal">_all</code> the indices.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/kimchy,elasticsearch/_mapping/tweet' -d '
{
    "tweet" : {
        "properties" : {
            "message" : {"type" : "string", "store" : true }
        }
    }
}
'</pre></div><p>All options:</p><div class="pre_wrapper"><pre class="programlisting">PUT /{index}/_mapping/{type}</pre></div><p>where</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">{index}</code>
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">blank | * | _all | glob pattern | name1, name2, </code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">{type}</code>
</p>
</td><td class="entry" valign="top">
<p>
Name of the type to add. Must be the name of the type defined in the body.
</p>
</td></tr></tbody></table></div><p>Instead of <code class="literal">_mapping</code> you can also use the plural <code class="literal">_mappings</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Get Mapping</span></div><div class="navheader"><span class="prev"><a href="indices-put-mapping.html">
              &nbsp;
              Put Mapping</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-get-field-mapping.html">Get Field Mapping
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-get-mapping"></a>Get Mapping</h2></div></div></div><p>The get mapping API allows to retrieve mapping definitions for an index or
index/type.</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/_mapping/tweet'</pre></div><h3><a id="_multiple_indices_and_types"></a>Multiple Indices and Types</h3><p>The get mapping API can be used to get more than one index or type
mapping with a single call. General usage of the API follows the
following syntax: <code class="literal">host:port/{index}/_mapping/{type}</code> where both
<code class="literal">{index}</code> and <code class="literal">{type}</code> can accept a comma-separated list of names. To
get mappings for all indices you can use <code class="literal">_all</code> for <code class="literal">{index}</code>. The
following are some examples:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/_mapping/twitter,kimchy'

curl -XGET 'http://localhost:9200/_all/_mapping/tweet,book'</pre></div><p>If you want to get mappings of all indices and types then the following
two examples are equivalent:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/_all/_mapping'

curl -XGET 'http://localhost:9200/_mapping'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Get Field Mapping</span></div><div class="navheader"><span class="prev"><a href="indices-get-mapping.html">
              &nbsp;
              Get Mapping</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-types-exists.html">Types Exists
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-get-field-mapping"></a>Get Field Mapping</h2></div></div></div><p>The get field mapping API allows you to retrieve mapping definitions for one or more fields.
This is useful when you do not need the complete type mapping returned by
the <a class="xref" href="indices-get-mapping.html" title="Get Mapping"><em>Get Mapping</em></a> API.</p><p>The following returns the mapping of the field <code class="literal">text</code> only:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/_mapping/tweet/field/text'</pre></div><p>For which the response is (assuming <code class="literal">text</code> is a default string field):</p><div class="pre_wrapper"><pre class="programlisting">{
   "twitter": {
      "tweet": {
         "text": {
            "full_name": "text",
            "mapping": {
               "text": { "type": "string" }
            }
         }
      }
   }
}</pre></div><h3><a id="_multiple_indices_types_and_fields"></a>Multiple Indices, Types and Fields</h3><p>The get field mapping API can be used to get the mapping of multiple fields from more than one index or type
with a single call. General usage of the API follows the
following syntax: <code class="literal">host:port/{index}/{type}/_mapping/field/{field}</code> where
<code class="literal">{index}</code>, <code class="literal">{type}</code> and <code class="literal">{field}</code> can stand for comma-separated list of names or wild cards. To
get mappings for all indices you can use <code class="literal">_all</code> for <code class="literal">{index}</code>. The
following are some examples:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter,kimchy/_mapping/field/message'

curl -XGET 'http://localhost:9200/_all/_mapping/tweet,book/field/message,user.id'

curl -XGET 'http://localhost:9200/_all/_mapping/tw*/field/*.id'</pre></div><h3><a id="_specifying_fields"></a>Specifying fields</h3><p>The get mapping api allows you to specify one or more fields separated with by a comma.
You can also use wildcards. The field names can be any of the following:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
Full names
</p>
</td><td class="entry" valign="top">
<p>
the full path, including any parent object name the field is
   part of (ex. <code class="literal">user.id</code>).
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Index names
</p>
</td><td class="entry" valign="top">
<p>
the name of the lucene field (can be different than the
   field name if the <code class="literal">index_name</code> option of the mapping is used).
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Field names
</p>
</td><td class="entry" valign="top">
<p>
the name of the field without the path to it (ex. <code class="literal">id</code> for <code class="literal">{ "user" : { "id" : 1 } }</code>).
</p>
</td></tr></tbody></table></div><p>The above options are specified in the order the <code class="literal">field</code> parameter is resolved.
The first field found which matches is returned. This is especially important
if index names or field names are used as those can be ambiguous.</p><p>For example, consider the following mapping:</p><div class="pre_wrapper"><pre class="programlisting"> {
     "article": {
         "properties": {
             "id": { "type": "string" },
             "title":  { "type": "string", "index_name": "text" },
             "abstract": { "type": "string", "index_name": "text" },
             "author": {
                 "properties": {
                     "id": { "type": "string" },
                     "name": { "type": "string", "index_name": "author" }
                 }
             }
         }
     }
 }</pre></div><p>To select the <code class="literal">id</code> of the <code class="literal">author</code> field, you can use its full name <code class="literal">author.id</code>. Using <code class="literal">text</code> will return
the mapping of <code class="literal">abstract</code> as it is one of the fields which map to the Lucene field <code class="literal">text</code>. <code class="literal">name</code> will return
the field <code class="literal">author.name</code>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET "http://localhost:9200/publications/_mapping/article/field/author.id,text,name"</pre></div><p>returns:</p><div class="pre_wrapper"><pre class="programlisting">{
   "publications": {
      "article": {
         "text": {
            "full_name": "abstract",
            "mapping": {
               "abstract": { "type": "string", "index_name": "text" }
            }
         },
         "author.id": {
            "full_name": "author.id",
            "mapping": {
               "id": { "type": "string" }
            }
         },
         "name": {
            "full_name": "author.name",
            "mapping": {
               "name": { "type": "string", "index_name": "author" }
            }
         }
      }
   }
}</pre></div><p>Note how the response always use the same fields specified in the request as keys.
The <code class="literal">full_name</code> in every entry contains the full name of the field whose mapping were returned.
This is useful when the request can refer to to multiple fields (like <code class="literal">text</code> above).</p><h3><a id="_other_options"></a>Other options</h3><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">include_defaults</code>
</p>
</td><td class="entry" valign="top">
<p>
    adding <code class="literal">include_defaults=true</code> to the query string will cause the response
    to include default values, which are normally suppressed.
</p>
</td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Types Exists</span></div><div class="navheader"><span class="prev"><a href="indices-get-field-mapping.html">
              &nbsp;
              Get Field Mapping</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-delete-mapping.html">Delete Mapping
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-types-exists"></a>Types Exists</h2></div></div></div><p>Used to check if a type/types exists in an index/indices.</p><div class="pre_wrapper"><pre class="programlisting">curl -XHEAD -i 'http://localhost:9200/twitter/tweet'</pre></div><p>The HTTP status code indicates if the type exists or not. A <code class="literal">404</code> means
it does not exist, and <code class="literal">200</code> means it does.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Delete Mapping</span></div><div class="navheader"><span class="prev"><a href="indices-types-exists.html">
              &nbsp;
              Types Exists</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-aliases.html">Index Aliases
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-delete-mapping"></a>Delete Mapping</h2></div></div></div><p>Allow to delete a mapping (type) along with its data. The REST endpoints are</p><div class="pre_wrapper"><pre class="programlisting">[DELETE] /{index}/{type}

[DELETE] /{index}/{type}/_mapping

[DELETE] /{index}/_mapping/{type}</pre></div><p>where</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">index</code>
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">* | _all | glob pattern | name1, name2, </code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">type</code>
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">* | _all | glob pattern | name1, name2, </code>
</p>
</td></tr></tbody></table></div><p>Note, most times, it make more sense to reindex the data into a fresh
index compared to delete large chunks of it.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Index Aliases</span></div><div class="navheader"><span class="prev"><a href="indices-delete-mapping.html">
              &nbsp;
              Delete Mapping</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-update-settings.html">Update Indices Settings
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-aliases"></a>Index Aliases</h2></div></div></div><p>APIs in elasticsearch accept an index name when working against a
specific index, and several indices when applicable. The index aliases
API allow to alias an index with a name, with all APIs automatically
converting the alias name to the actual index name. An alias can also be
mapped to more than one index, and when specifying it, the alias will
automatically expand to the aliases indices. An alias can also be
associated with a filter that will automatically be applied when
searching, and routing values.</p><p>Here is a sample of associating the alias <code class="literal">alias1</code> with index <code class="literal">test1</code>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
        { "add" : { "index" : "test1", "alias" : "alias1" } }
    ]
}'</pre></div><p>An alias can also be removed, for example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
        { "remove" : { "index" : "test1", "alias" : "alias1" } }
    ]
}'</pre></div><p>Renaming an alias is a simple <code class="literal">remove</code> then <code class="literal">add</code> operation within the
same API. This operation is atomic, no need to worry about a short
period of time where the alias does not point to an index:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
        { "remove" : { "index" : "test1", "alias" : "alias1" } },
        { "add" : { "index" : "test1", "alias" : "alias2" } }
    ]
}'</pre></div><p>Associating an alias with more than one index are simply several <code class="literal">add</code>
actions:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
        { "add" : { "index" : "test1", "alias" : "alias1" } },
        { "add" : { "index" : "test2", "alias" : "alias1" } }
    ]
}'</pre></div><p>Alternatively, you can use a glob pattern to associate an alias to
more than one index that share a common name:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
        { "add" : { "index" : "test*", "alias" : "all_test_indices" } }
    ]
}'</pre></div><p>In this case, the alias is a point-in-time alias that will group all
current indices that match, it will not automatically update as new
indices that match this pattern are added/removed.</p><p>It is an error to index to an alias which points to more than one index.</p><h3><a id="filtered"></a>Filtered Aliases</h3><p>Aliases with filters provide an easy way to create different "views" of
the same index. The filter can be defined using Query DSL and is applied
to all Search, Count, Delete By Query and More Like This operations with
this alias.</p><p>To create a filtered alias, first we need to ensure that the fields already
exist in the mapping:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'http://localhost:9200/test1' -d '{
  "mappings": {
    "type1": {
      "properties": {
        "user" : {
          "type": "string",
          "index": "not_analyzed"
        }
      }
    }
  }
}</pre></div><p>Now we can create an alias that uses a filter on field <code class="literal">user</code>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'http://localhost:9200/_aliases' -d '{
    "actions" : [
        {
            "add" : {
                 "index" : "test1",
                 "alias" : "alias2",
                 "filter" : { "term" : { "user" : "kimchy" } }
            }
        }
    ]
}'</pre></div><h4><a id="aliases-routing"></a>Routing</h4><p>It is possible to associate routing values with aliases. This feature
can be used together with filtering aliases in order to avoid
unnecessary shard operations.</p><p>The following command creates a new alias <code class="literal">alias1</code> that points to index
<code class="literal">test</code>. After <code class="literal">alias1</code> is created, all operations with this alias are
automatically modified to use value <code class="literal">1</code> for routing:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
        {
            "add" : {
                 "index" : "test",
                 "alias" : "alias1",
                 "routing" : "1"
            }
        }
    ]
}'</pre></div><p>Its also possible to specify different routing values for searching
and indexing operations:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'http://localhost:9200/_aliases' -d '
{
    "actions" : [
        {
            "add" : {
                 "index" : "test",
                 "alias" : "alias2",
                 "search_routing" : "1,2",
                 "index_routing" : "2"
            }
        }
    ]
}'</pre></div><p>As shown in the example above, search routing may contain several values
separated by comma. Index routing can contain only a single value.</p><p>If an operation that uses routing alias also has a routing parameter, an
intersection of both alias routing and routing specified in the
parameter is used. For example the following command will use "2" as a
routing value:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/alias2/_search?q=user:kimchy&amp;routing=2,3'</pre></div><h3><a id="alias-adding"></a>Add a single alias</h3><p>An alias can also be added with the endpoint</p><p><code class="literal">PUT /{index}/_alias/{name}</code></p><p>where</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">index</code>
</p>
</td><td class="entry" valign="top">
<p>
The index the alias refers to. Can be any of <code class="literal">* | _all | glob pattern | name1, name2, </code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">name</code>
</p>
</td><td class="entry" valign="top">
<p>
The name of the alias. This is a required option.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">routing</code>
</p>
</td><td class="entry" valign="top">
<p>
An optional routing that can be associated with an alias.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">filter</code>
</p>
</td><td class="entry" valign="top">
<p>
An optional filter that can be associated with an alias.
</p>
</td></tr></tbody></table></div><p>You can also use the plural <code class="literal">_aliases</code>.</p><h4><a id="_examples"></a>Examples:</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Adding time based alias
</span></dt><dd><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/logs_201305/_alias/2013'</pre></div></dd><dt><span class="term">
Adding a user alias
</span></dt><dd><p class="simpara">First create the index and add a mapping for the <code class="literal">user_id</code> field:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/users' -d '{
    "mappings" : {
        "user" : {
            "properties" : {
                "user_id" : {"type" : "integer"}
            }
        }
    }
}'</pre></div><p class="simpara">Then add the alias for a specific user:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/users/_alias/user_12' -d '{
    "routing" : "12",
    "filter" : {
        "term" : {
            "user_id" : 12
        }
    }
}'</pre></div></dd></dl></div><h3><a id="alias-index-creation"></a>Aliases during index creation</h3><p>Aliases can also be specified during <a class="link" href="indices-create-index.html#create-index-aliases" title="Aliasesedit">index creation</a>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/logs_20142801 -d '{
    "mappings" : {
        "type" : {
            "properties" : {
                "year" : {"type" : "integer"}
            }
        }
    },
    "aliases" : {
        "current_day" : {},
        "2014" : {
            "filter" : {
                "term" : {"year" : 2014 }
            }
        }
    }
}'</pre></div><h3><a id="deleting"></a>Delete aliases</h3><p>The rest endpoint is: <code class="literal">/{index}/_alias/{name}</code></p><p>where</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">index</code>
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">* | _all | glob pattern | name1, name2, </code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">name</code>
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">* | _all | glob pattern | name1, name2, </code>
</p>
</td></tr></tbody></table></div><p>Alternatively you can use the plural <code class="literal">_aliases</code>. Example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XDELETE 'localhost:9200/users/_alias/user_12'</pre></div><h3><a id="alias-retrieving"></a>Retrieving existing aliases</h3><p>The get index alias api allows to filter by
alias name and index name. This api redirects to the master and fetches
the requested index aliases, if available. This api only serialises the
found index aliases.</p><p>Possible options:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">index</code>
</p>
</td><td class="entry" valign="top">
<p>
    The index name to get aliases for. Partially names are
    supported via wildcards, also multiple index names can be specified
    separated with a comma. Also the alias name for an index can be used.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">alias</code>
</p>
</td><td class="entry" valign="top">
<p>
    The name of alias to return in the response. Like the index
    option, this option supports wildcards and the option the specify
    multiple alias names separated by a comma.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">ignore_unavailable</code>
</p>
</td><td class="entry" valign="top">
<p>
    What to do is an specified index name doesnt
    exist. If set to <code class="literal">true</code> then those indices are ignored.
</p>
</td></tr></tbody></table></div><p>The rest endpoint is: <code class="literal">/{index}/_alias/{alias}</code>.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>For future versions of Elasticsearch, the default <a class="xref" href="multi-index.html" title="Multiple Indices"><em>Multiple Indices</em></a> options will error if a requested index is unavailable. This is to bring
this API in line with the other indices GET APIs</p></div></div><h4><a id="_examples_2"></a>Examples:</h4><p>All aliases for the index users:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/users/_alias/*'</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting"> {
  "users" : {
    "aliases" : {
      "user_13" : {
        "filter" : {
          "term" : {
            "user_id" : 13
          }
        },
        "index_routing" : "13",
        "search_routing" : "13"
      },
      "user_14" : {
        "filter" : {
          "term" : {
            "user_id" : 14
          }
        },
        "index_routing" : "14",
        "search_routing" : "14"
      },
      "user_12" : {
        "filter" : {
          "term" : {
            "user_id" : 12
          }
        },
        "index_routing" : "12",
        "search_routing" : "12"
      }
    }
  }
}</pre></div><p>All aliases with the name 2013 in any index:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/_alias/2013'</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
  "logs_201304" : {
    "aliases" : {
      "2013" : { }
    }
  },
  "logs_201305" : {
    "aliases" : {
      "2013" : { }
    }
  }
}</pre></div><p>All aliases that start with 2013_01 in any index:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/_alias/2013_01*'</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
  "logs_20130101" : {
    "aliases" : {
      "2013_01" : { }
    }
  }
}</pre></div><p>There is also a HEAD variant of the get indices aliases api to check if
index aliases exist. The indices aliases exists api supports the same
option as the get indices aliases api. Examples:</p><div class="pre_wrapper"><pre class="programlisting">curl -XHEAD -i 'localhost:9200/_alias/2013'
curl -XHEAD -i 'localhost:9200/_alias/2013_01*'
curl -XHEAD -i 'localhost:9200/users/_alias/*'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Update Indices Settings</span></div><div class="navheader"><span class="prev"><a href="indices-aliases.html">
              &nbsp;
              Index Aliases</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-get-settings.html">Get Settings
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-update-settings"></a>Update Indices Settings</h2></div></div></div><p>Change specific index level settings in real time.</p><p>The REST endpoint is <code class="literal">/_settings</code> (to update all indices) or
<code class="literal">{index}/_settings</code> to update one (or more) indices settings. The body
of the request includes the updated settings, for example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "number_of_replicas" : 4
    }
}</pre></div><p>The above will change the number of replicas to 4 from the current
number of replicas. Here is a curl example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/my_index/_settings' -d '
{
    "index" : {
        "number_of_replicas" : 4
    }
}'</pre></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>When changing the number of replicas the index needs to be open. Changing
the number of replicas on a closed index might prevent the index to be opened correctly again.</p></div></div><p>Below is the list of settings that can be changed using the update
settings API:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">index.number_of_replicas</code>
</span></dt><dd>
    The number of replicas each shard has.
</dd><dt><span class="term">
<code class="literal">index.auto_expand_replicas</code> (string)
</span></dt><dd>
    Set to a dash delimited lower and upper bound (e.g. <code class="literal">0-5</code>)
    or one may use <code class="literal">all</code> as the upper bound (e.g. <code class="literal">0-all</code>), or <code class="literal">false</code> to disable it.
</dd><dt><span class="term">
<code class="literal">index.blocks.read_only</code>
</span></dt><dd>
    Set to <code class="literal">true</code> to have the index read only, <code class="literal">false</code> to allow writes
    and metadata changes.
</dd><dt><span class="term">
<code class="literal">index.blocks.read</code>
</span></dt><dd>
    Set to <code class="literal">true</code> to disable read operations against the index.
</dd><dt><span class="term">
<code class="literal">index.blocks.write</code>
</span></dt><dd>
    Set to <code class="literal">true</code> to disable write operations against the index.
</dd><dt><span class="term">
<code class="literal">index.blocks.metadata</code>
</span></dt><dd>
    Set to <code class="literal">true</code> to disable metadata operations against the index.
</dd><dt><span class="term">
<code class="literal">index.refresh_interval</code>
</span></dt><dd>
    The async refresh interval of a shard.
</dd><dt><span class="term">
<code class="literal">index.index_concurrency</code>
</span></dt><dd>
    <span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span> Defaults to <code class="literal">8</code>.
</dd><dt><span class="term">
<code class="literal">index.fail_on_merge_failure</code>
</span></dt><dd>
    <span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span> Default to <code class="literal">true</code>.
</dd></dl></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.5.0. </h3>
 As of 2.0 index.fail_on_merge_failure is removed and the engine will always fail on an unexpected merge exception.
</div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">index.translog.flush_threshold_ops</code>
</span></dt><dd>
    When to flush based on operations.
</dd><dt><span class="term">
<code class="literal">index.translog.flush_threshold_size</code>
</span></dt><dd>
    When to flush based on translog (bytes) size.
</dd><dt><span class="term">
<code class="literal">index.translog.flush_threshold_period</code>
</span></dt><dd>
    When to flush based on a period of not flushing.
</dd><dt><span class="term">
<code class="literal">index.translog.disable_flush</code>
</span></dt><dd>
    Disables flushing. Note, should be set for a short
    interval and then enabled.
</dd><dt><span class="term">
<code class="literal">index.cache.filter.max_size</code>
</span></dt><dd>
    The maximum size of filter cache (per segment in shard).
    Set to <code class="literal">-1</code> to disable.
</dd><dt><span class="term">
<code class="literal">index.cache.filter.expire</code>
</span></dt><dd>
    <span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span> The expire after access time for filter cache.
    Set to <code class="literal">-1</code> to disable.
</dd><dt><span class="term">
<code class="literal">index.gateway.snapshot_interval</code>
</span></dt><dd>
    <span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span> The gateway snapshot interval (only applies to shared
    gateways). Defaults to 10s.
</dd><dt><span class="term">
<a class="link" href="index-modules-merge.html" title="Merge">merge policy</a>
</span></dt><dd>
    All the settings for the merge policy currently configured.
    A different merge policy cant be set.
</dd><dt><span class="term">
<code class="literal">index.routing.allocation.include.*</code>
</span></dt><dd>
    A node matching any rule will be allowed to host shards from the index.
</dd><dt><span class="term">
<code class="literal">index.routing.allocation.exclude.*</code>
</span></dt><dd>
    A node matching any rule will NOT be allowed to host shards from the index.
</dd><dt><span class="term">
<code class="literal">index.routing.allocation.require.*</code>
</span></dt><dd>
    Only nodes matching all rules will be allowed to host shards from the index.
</dd><dt><span class="term">
<code class="literal">index.routing.allocation.disable_allocation</code>
</span></dt><dd>
    Disable allocation. Defaults to <code class="literal">false</code>. Deprecated in favour for <code class="literal">index.routing.allocation.enable</code>.
</dd><dt><span class="term">
<code class="literal">index.routing.allocation.disable_new_allocation</code>
</span></dt><dd>
    Disable new allocation. Defaults to <code class="literal">false</code>. Deprecated in favour for <code class="literal">index.routing.allocation.enable</code>.
</dd><dt><span class="term">
<code class="literal">index.routing.allocation.disable_replica_allocation</code>
</span></dt><dd>
    Disable replica allocation. Defaults to <code class="literal">false</code>. Deprecated in favour for <code class="literal">index.routing.allocation.enable</code>.
</dd><dt><span class="term">
<code class="literal">index.routing.allocation.enable</code>
</span></dt><dd><p class="simpara">
    Enables shard allocation for a specific index. It can be set to:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">all</code> (default) - Allows shard allocation for all shards.
</li><li class="listitem">
<code class="literal">primaries</code> - Allows shard allocation only for primary shards.
</li><li class="listitem">
<code class="literal">new_primaries</code> - Allows shard allocation only for primary shards for new indices.
</li><li class="listitem">
<code class="literal">none</code> - No shard allocation is allowed.
</li></ul></div></dd><dt><span class="term">
<code class="literal">index.routing.allocation.total_shards_per_node</code>
</span></dt><dd>
    Controls the total number of shards (replicas and primaries) allowed to be allocated on a single node. Defaults to unbounded (<code class="literal">-1</code>).
</dd><dt><span class="term">
<code class="literal">index.recovery.initial_shards</code>
</span></dt><dd><p class="simpara">
    When using local gateway a particular shard is recovered only if there can be allocated quorum shards in the cluster. It can be set to:
</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">quorum</code> (default)
</li><li class="listitem">
<code class="literal">quorum-1</code> (or <code class="literal">half</code>)
</li><li class="listitem">
<code class="literal">full</code>
</li><li class="listitem">
<code class="literal">full-1</code>.
</li><li class="listitem">
Number values are also supported, e.g. <code class="literal">1</code>.
</li></ul></div></dd><dt><span class="term">
<code class="literal">index.gc_deletes</code>
</span></dt><dd>
    <span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span>
</dd><dt><span class="term">
<code class="literal">index.ttl.disable_purge</code>
</span></dt><dd>
    <span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span> Disables temporarily the purge of expired docs.
</dd><dt><span class="term">
<a class="link" href="index-modules-store.html" title="Store">store level throttling</a>
</span></dt><dd>
    All the settings for the store level throttling policy currently configured.
</dd><dt><span class="term">
<code class="literal">index.translog.fs.type</code>
</span></dt><dd>
    <span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span> Either <code class="literal">simple</code> or <code class="literal">buffered</code> (default).
</dd><dt><span class="term">
<code class="literal">index.compound_format</code>
</span></dt><dd>
    <span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span> See <a class="link" href="index-modules.html#index-compound-format"><code class="literal">index.compound_format</code></a> in
    <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settingsedit">the section called Index Settings</a>.
</dd><dt><span class="term">
<code class="literal">index.compound_on_flush</code>
</span></dt><dd>
    <span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span> See <a class="link" href="index-modules.html#index-compound-on-flush">`index.compound_on_flush</a> in
    <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settingsedit">the section called Index Settings</a>.
</dd><dt><span class="term">
<a class="xref" href="index-modules-slowlog.html" title="Index Slow Log"><em>Index Slow Log</em></a>
</span></dt><dd>
    All the settings for slow log.
</dd><dt><span class="term">
<code class="literal">index.warmer.enabled</code>
</span></dt><dd>
    See <a class="xref" href="indices-warmers.html" title="Warmers"><em>Warmers</em></a>. Defaults to <code class="literal">true</code>.
</dd></dl></div><h3><a id="bulk"></a>Bulk Indexing Usage</h3><p>For example, the update settings API can be used to dynamically change
the index from being more performant for bulk indexing, and then move it
to more real time indexing state. Before the bulk indexing is started,
use:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test/_settings -d '{
    "index" : {
        "refresh_interval" : "-1"
    } }'</pre></div><p>(Another optimization option is to start the index without any replicas,
and only later adding them, but that really depends on the use case).</p><p>Then, once bulk indexing is done, the settings can be updated (back to
the defaults for example):</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test/_settings -d '{
    "index" : {
        "refresh_interval" : "1s"
    } }'</pre></div><p>And, an optimize should be called:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'http://localhost:9200/test/_optimize?max_num_segments=5'</pre></div><h3><a id="update-settings-analysis"></a>Updating Index Analysis</h3><p>It is also possible to define new <a class="link" href="analysis.html" title="Analysis">analyzers</a> for the index.
But it is required to <a class="link" href="indices-open-close.html" title="Open / Close Index API">close</a> the index
first and <a class="link" href="indices-open-close.html" title="Open / Close Index API">open</a> it after the changes are made.</p><p>For example if <code class="literal">content</code> analyzer hasnt been defined on <code class="literal">myindex</code> yet
you can use the following commands to add it:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/myindex/_close'

curl -XPUT 'localhost:9200/myindex/_settings' -d '{
  "analysis" : {
    "analyzer":{
      "content":{
        "type":"custom",
        "tokenizer":"whitespace"
      }
    }
  }
}'

curl -XPOST 'localhost:9200/myindex/_open'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Get Settings</span></div><div class="navheader"><span class="prev"><a href="indices-update-settings.html">
              &nbsp;
              Update Indices Settings</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-analyze.html">Analyze
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-get-settings"></a>Get Settings</h2></div></div></div><p>The get settings API allows to retrieve settings of index/indices:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/twitter/_settings'</pre></div><h3><a id="_multiple_indices_and_types_2"></a>Multiple Indices and Types</h3><p>The get settings API can be used to get settings for more than one index
with a single call. General usage of the API follows the
following syntax: <code class="literal">host:port/{index}/_settings</code> where
<code class="literal">{index}</code> can stand for comma-separated list of index names and aliases. To
get settings for all indices you can use <code class="literal">_all</code> for <code class="literal">{index}</code>.
Wildcard expressions are also supported. The following are some examples:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter,kimchy/_settings'

curl -XGET 'http://localhost:9200/_all/_settings'

curl -XGET 'http://localhost:9200/2013-*/_settings'</pre></div><h3><a id="_filtering_settings_by_name"></a>Filtering settings by name</h3><p>The settings that are returned can be filtered with wildcard matching
as follows:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/2013-*/_settings/name=index.number_*'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Analyze</span></div><div class="navheader"><span class="prev"><a href="indices-get-settings.html">
              &nbsp;
              Get Settings</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-templates.html">Index Templates
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-analyze"></a>Analyze</h2></div></div></div><p>Performs the analysis process on a text and return the tokens breakdown
of the text.</p><p>Can be used without specifying an index against one of the many built in
analyzers:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/_analyze?analyzer=standard' -d 'this is a test'</pre></div><p>Or by building a custom transient analyzer out of tokenizers,
token filters and char filters. Token filters can use the shorter <span class="emphasis"><em>filters</em></span>
parameter name:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/_analyze?tokenizer=keyword&amp;filters=lowercase' -d 'this is a test'

curl -XGET 'localhost:9200/_analyze?tokenizer=keyword&amp;token_filters=lowercase&amp;char_filters=html_strip' -d 'this is a &lt;b&gt;test&lt;/b&gt;'</pre></div><p>It can also run against a specific index:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/test/_analyze?text=this+is+a+test'</pre></div><p>The above will run an analysis on the "this is a test" text, using the
default index analyzer associated with the <code class="literal">test</code> index. An <code class="literal">analyzer</code>
can also be provided to use a different analyzer:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/test/_analyze?analyzer=whitespace' -d 'this is a test'</pre></div><p>Also, the analyzer can be derived based on a field mapping, for example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'localhost:9200/test/_analyze?field=obj1.field1' -d 'this is a test'</pre></div><p>Will cause the analysis to happen based on the analyzer configured in the
mapping for <code class="literal">obj1.field1</code> (and if not, the default index analyzer).</p><p>Also, the text can be provided as part of the request body, and not as a
parameter.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Index Templates</span></div><div class="navheader"><span class="prev"><a href="indices-analyze.html">
              &nbsp;
              Analyze</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-warmers.html">Warmers
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-templates"></a>Index Templates</h2></div></div></div><p>Index templates allow you to define templates that will automatically be
applied to new indices created. The templates include both settings and
mappings, and a simple pattern template that controls if the template
will be applied to the index created. For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_template/template_1 -d '
{
    "template" : "te*",
    "settings" : {
        "number_of_shards" : 1
    },
    "mappings" : {
        "type1" : {
            "_source" : { "enabled" : false }
        }
    }
}
'</pre></div><p>Defines a template named template_1, with a template pattern of <code class="literal">te*</code>.
The settings and mappings will be applied to any index name that matches
the <code class="literal">te*</code> template.</p><p>It is also possible to include aliases in an index template as follows:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_template/template_1 -d '
{
    "template" : "te*",
    "settings" : {
        "number_of_shards" : 1
    },
    "aliases" : {
        "alias1" : {},
        "alias2" : {
            "filter" : {
                "term" : {"user" : "kimchy" }
            },
            "routing" : "kimchy"
        },
        "{index}-alias" : {} <a id="CO50-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
    }
}
'</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO50-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
the <code class="literal">{index}</code> placeholder within the alias name will be replaced with the
actual index name that the template gets applied to during index creation.
</p></td></tr></tbody></table></div><h3><a id="delete"></a>Deleting a Template</h3><p>Index templates are identified by a name (in the above case
<code class="literal">template_1</code>) and can be deleted as well:</p><div class="pre_wrapper"><pre class="programlisting">curl -XDELETE localhost:9200/_template/template_1</pre></div><h3><a id="getting"></a>GETting templates</h3><p>Index templates are identified by a name (in the above case
<code class="literal">template_1</code>) and can be retrieved using the following:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET localhost:9200/_template/template_1</pre></div><p>You can also match several templates by using wildcards like:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET localhost:9200/_template/temp*
curl -XGET localhost:9200/_template/template_1,template_2</pre></div><p>To get list of all index templates you can run:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET localhost:9200/_template/</pre></div><h3><a id="indices-templates-exists"></a>Templates exists</h3><p>Used to check if the template exists or not. For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XHEAD -i localhost:9200/_template/template_1</pre></div><p>The HTTP status code indicates if the template with the given name
exists or not. A status code <code class="literal">200</code> means it exists, a <code class="literal">404</code> it does not.</p><h3><a id="multiple-templates"></a>Multiple Template Matching</h3><p>Multiple index templates can potentially match an index, in this case,
both the settings and mappings are merged into the final configuration
of the index. The order of the merging can be controlled using the
<code class="literal">order</code> parameter, with lower order being applied first, and higher
orders overriding them. For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_template/template_1 -d '
{
    "template" : "*",
    "order" : 0,
    "settings" : {
        "number_of_shards" : 1
    },
    "mappings" : {
        "type1" : {
            "_source" : { "enabled" : false }
        }
    }
}
'

curl -XPUT localhost:9200/_template/template_2 -d '
{
    "template" : "te*",
    "order" : 1,
    "settings" : {
        "number_of_shards" : 1
    },
    "mappings" : {
        "type1" : {
            "_source" : { "enabled" : true }
        }
    }
}
'</pre></div><p>The above will disable storing the <code class="literal">_source</code> on all <code class="literal">type1</code> types, but
for indices of that start with <code class="literal">te*</code>, source will still be enabled.
Note, for mappings, the merging is "deep", meaning that specific
object/property based mappings can easily be added/overridden on higher
order templates, with lower order templates providing the basis.</p><h3><a id="config"></a>Config</h3><p>Index templates can also be placed within the config location
(<code class="literal">path.conf</code>) under the <code class="literal">templates</code> directory (note, make sure to place
them on all master eligible nodes). For example, a file called
<code class="literal">template_1.json</code> can be placed under <code class="literal">config/templates</code> and it will be
added if it matches an index. Here is a sample of the mentioned file:</p><div class="pre_wrapper"><pre class="programlisting">{
    "template_1" : {
        "template" : "*",
        "settings" : {
            "index.number_of_shards" : 2
        },
        "mappings" : {
            "_default_" : {
                "_source" : {
                    "enabled" : false
                }
            },
            "type1" : {
                "_all" : {
                    "enabled" : false
                }
            }
        }
    }
}</pre></div><p><span class="strong emphasis"><strong>Please note that templates added this way will not appear in the <code class="literal">/_template/*</code> API request.</strong></span></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Warmers</span></div><div class="navheader"><span class="prev"><a href="indices-templates.html">
              &nbsp;
              Index Templates</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-status.html">Status
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-warmers"></a>Warmers</h2></div></div></div><p>Index warming allows to run registered search requests to warm up the index
before it is available for search. With the near real time aspect of search,
cold data (segments) will be warmed up before they become available for search.
This includes things such as the filter cache, filesystem cache, and loading
field data for fields.</p><p>Warmup searches typically include requests that require heavy loading of
data, such as aggregations or sorting on specific fields. The warmup APIs
allows to register warmup (search) under specific names, remove them,
and get them.</p><p>Index warmup can be disabled by setting <code class="literal">index.warmer.enabled</code> to
<code class="literal">false</code>. It is supported as a realtime setting using update settings
API. This can be handy when doing initial bulk indexing: disable pre
registered warmers to make indexing faster and less expensive and then
enable it.</p><h3><a id="creation"></a>Index Creation / Templates</h3><p>Warmers can be registered when an index gets created, for example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test -d '{
    "warmers" : {
        "warmer_1" : {
            "types" : [],
            "source" : {
                "query" : {
                    ...
                },
                "aggs" : {
                    ...
                }
            }
        }
    }
}'</pre></div><p>Or, in an index template:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_template/template_1 -d '
{
    "template" : "te*",
    "warmers" : {
        "warmer_1" : {
            "types" : [],
            "source" : {
                "query" : {
                    ...
                },
                "aggs" : {
                    ...
                }
            }
        }
    }
}'</pre></div><p>On the same level as <code class="literal">types</code> and <code class="literal">source</code>, the <code class="literal">query_cache</code> flag is supported
to enable query caching for the warmed search request. If not specified, it will
use the index level configuration of query caching.</p><h3><a id="warmer-adding"></a>Put Warmer</h3><p>Allows to put a warmup search request on a specific index (or indices),
with the body composing of a regular search request. Types can be
provided as part of the URI if the search request is designed to be run
only against the specific types.</p><p>Here is an example that registers a warmup called <code class="literal">warmer_1</code> against
index <code class="literal">test</code> (can be alias or several indices), for a search request
that runs against all types:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test/_warmer/warmer_1 -d '{
    "query" : {
        "match_all" : {}
    },
    "aggs" : {
        "aggs_1" : {
            "terms" : {
                "field" : "field"
            }
        }
    }
}'</pre></div><p>And an example that registers a warmup against specific types:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test/type1/_warmer/warmer_1 -d '{
    "query" : {
        "match_all" : {}
    },
    "aggs" : {
        "aggs_1" : {
            "terms" : {
                "field" : "field"
            }
        }
    }
}'</pre></div><p>All options:</p><div class="pre_wrapper"><pre class="programlisting">PUT _warmer/{warmer_name}

PUT /{index}/_warmer/{warmer_name}

PUT /{index}/{type}/_warmer/{warmer_name}</pre></div><p>where</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">{index}</code>
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">* | _all | glob pattern | name1, name2, </code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">{type}</code>
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">* | _all | glob pattern | name1, name2, </code>
</p>
</td></tr></tbody></table></div><p>Instead of <code class="literal">_warmer</code> you can also use the plural <code class="literal">_warmers</code>.</p><p>The <code class="literal">query_cache</code> parameter can be used to enable query caching for
the search request. If not specified, it will use the index level configuration
of query caching.</p><h3><a id="removing"></a>Delete Warmers</h3><p>Warmers can be deleted using the following endpoint:</p><div class="pre_wrapper"><pre class="programlisting">[DELETE] /{index}/_warmer/{name}</pre></div><p>where</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">{index}</code>
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">* | _all | glob pattern | name1, name2, </code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">{name}</code>
</p>
</td><td class="entry" valign="top">
<p>
<code class="literal">* | _all | glob pattern | name1, name2, </code>
</p>
</td></tr></tbody></table></div><p>Instead of <code class="literal">_warmer</code> you can also use the plural <code class="literal">_warmers</code>.</p><h3><a id="warmer-retrieving"></a>GETting Warmer</h3><p>Getting a warmer for specific index (or alias, or several indices) based
on its name. The provided name can be a simple wildcard expression or
omitted to get all warmers.</p><p>Some examples:</p><div class="pre_wrapper"><pre class="programlisting"># get warmer named warmer_1 on test index
curl -XGET localhost:9200/test/_warmer/warmer_1

# get all warmers that start with warm on test index
curl -XGET localhost:9200/test/_warmer/warm*

# get all warmers for test index
curl -XGET localhost:9200/test/_warmer/</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Status</span></div><div class="navheader"><span class="prev"><a href="indices-warmers.html">
              &nbsp;
              Warmers</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-stats.html">Indices Stats
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-status"></a>Status</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.2.0. </h3>
See the Indices Recovery API
</div></div><p>The indices status API allows to get a comprehensive status information
of one or more indices.</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/twitter/_status'</pre></div><p>In order to see the recovery status of shards, pass <code class="literal">recovery</code> flag and
set it to <code class="literal">true</code>. For snapshot status, pass the <code class="literal">snapshot</code> flag and set
it to <code class="literal">true</code>.</p><h3><a id="_multi_index"></a>Multi Index</h3><p>The status API can be applied to more than one index with a single call,
or even on <code class="literal">_all</code> the indices.</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/kimchy,elasticsearch/_status'

curl -XGET 'http://localhost:9200/_status'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Indices Stats</span></div><div class="navheader"><span class="prev"><a href="indices-status.html">
              &nbsp;
              Status</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-segments.html">Indices Segments
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-stats"></a>Indices Stats</h2></div></div></div><p>Indices level stats provide statistics on different operations happening
on an index. The API provides statistics on the index level scope
(though most stats can also be retrieved using node level scope).</p><p>The following returns high level aggregation and index level stats for
all indices:</p><div class="pre_wrapper"><pre class="programlisting">curl localhost:9200/_stats</pre></div><p>Specific index stats can be retrieved using:</p><div class="pre_wrapper"><pre class="programlisting">curl localhost:9200/index1,index2/_stats</pre></div><p>By default, all stats are returned, returning only specific stats can be
specified as well in the URI. Those stats can be any of:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">docs</code>
</p>
</td><td class="entry" valign="top">
<p>
The number of docs / deleted docs (docs not yet merged out).
                                Note, affected by refreshing the index.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">store</code>
</p>
</td><td class="entry" valign="top">
<p>
The size of the index.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">indexing</code>
</p>
</td><td class="entry" valign="top">
<p>
Indexing statistics, can be combined with a comma
                                separated list of <code class="literal">types</code> to provide document type level stats.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">get</code>
</p>
</td><td class="entry" valign="top">
<p>
Get statistics, including missing stats.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">search</code>
</p>
</td><td class="entry" valign="top">
<p>
Search statistics. You can include statistics for custom groups by adding
                an extra <code class="literal">groups</code> parameter (search operations can be associated with one or more
                groups). The <code class="literal">groups</code> parameter accepts a comma separated list of group names.
                Use <code class="literal">_all</code> to return statistics for all groups.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">completion</code>
</p>
</td><td class="entry" valign="top">
<p>
Completion suggest statistics.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">fielddata</code>
</p>
</td><td class="entry" valign="top">
<p>
Fielddata statistics.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">flush</code>
</p>
</td><td class="entry" valign="top">
<p>
Flush statistics.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">merge</code>
</p>
</td><td class="entry" valign="top">
<p>
Merge statistics.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">query_cache</code>
</p>
</td><td class="entry" valign="top">
<p>
<a class="link" href="index-modules-shard-query-cache.html" title="Shard query cache">Shard query cache</a> statistics.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">refresh</code>
</p>
</td><td class="entry" valign="top">
<p>
Refresh statistics.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">suggest</code>
</p>
</td><td class="entry" valign="top">
<p>
Suggest statistics.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">warmer</code>
</p>
</td><td class="entry" valign="top">
<p>
Warmer statistics.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">translog</code>
</p>
</td><td class="entry" valign="top">
<p>
Translog statistics.
</p>
</td></tr></tbody></table></div><p>Some statistics allow per field granularity which accepts a list
comma-separated list of included fields. By default all fields are included:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">fields</code>
</p>
</td><td class="entry" valign="top">
<p>
    List of fields to be included in the statistics. This is used as the
    default list unless a more specific field list is provided (see below).
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">completion_fields</code>
</p>
</td><td class="entry" valign="top">
<p>
    List of fields to be included in the Completion Suggest statistics.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">fielddata_fields</code>
</p>
</td><td class="entry" valign="top">
<p>
    List of fields to be included in the Fielddata statistics.
</p>
</td></tr></tbody></table></div><p>Here are some samples:</p><div class="pre_wrapper"><pre class="programlisting"># Get back stats for merge and refresh only for all indices
curl 'localhost:9200/_stats/merge,refresh'
# Get back stats for type1 and type2 documents for the my_index index
curl 'localhost:9200/my_index/_stats/indexing?types=type1,type2
# Get back just search stats for group1 and group2
curl 'localhost:9200/_stats/search?groups=group1,group2</pre></div><p>The stats returned are aggregated on the index level, with
<code class="literal">primaries</code> and <code class="literal">total</code> aggregations, where <code class="literal">primaries</code> are the values for only the
primary shards, and <code class="literal">total</code> are the cumulated values for both primary and replica shards.</p><p>In order to get back shard level stats, set the <code class="literal">level</code> parameter to <code class="literal">shards</code>.</p><p>Note, as shards move around the cluster, their stats will be cleared as
they are created on other nodes. On the other hand, even though a shard
"left" a node, that node will still retain the stats that shard
contributed to.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Indices Segments</span></div><div class="navheader"><span class="prev"><a href="indices-stats.html">
              &nbsp;
              Indices Stats</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-recovery.html">Indices Recovery
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-segments"></a>Indices Segments</h2></div></div></div><p>Provide low level segments information that a Lucene index (shard level)
is built with. Allows to be used to provide more information on the
state of a shard and an index, possibly optimization information, data
"wasted" on deletes, and so on.</p><p>Endpoints include segments for a specific index, several indices, or
all:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/test/_segments'
curl -XGET 'http://localhost:9200/test1,test2/_segments'
curl -XGET 'http://localhost:9200/_segments'</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
    ...
        "_3": {
            "generation": 3,
            "num_docs": 1121,
            "deleted_docs": 53,
            "size_in_bytes": 228288,
            "memory_in_bytes": 3211,
            "committed": true,
            "search": true,
            "version": "4.6",
            "compound": true
        }
    ...
}</pre></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
_0
</span></dt><dd>
The key of the JSON document is the name of the segment. This name
             is used to generate file names: all files starting with this
             segment name in the directory of the shard belong to this segment.
</dd><dt><span class="term">
generation
</span></dt><dd>
A generation number that is basically incremented when needing to
             write a new segment. The segment name is derived from this
             generation number.
</dd><dt><span class="term">
num_docs
</span></dt><dd>
The number of non-deleted documents that are stored in this segment.
</dd><dt><span class="term">
deleted_docs
</span></dt><dd>
The number of deleted documents that are stored in this segment.
             It is perfectly fine if this number is greater than 0, space is
             going to be reclaimed when this segment gets merged.
</dd><dt><span class="term">
size_in_bytes
</span></dt><dd>
The amount of disk space that this segment uses, in bytes.
</dd><dt><span class="term">
memory_in_bytes
</span></dt><dd>
Segments need to store some data into memory in order to be
             searchable efficiently. This number returns the number of bytes
             that are used for that purpose. A value of -1 indicates that
             Elasticsearch was not able to compute this number.
</dd><dt><span class="term">
committed
</span></dt><dd>
Whether the segment has been synced on disk. Segments that are
             committed would survive a hard reboot. No need to worry in case
             of false, the data from uncommitted segments is also stored in
             the transaction log so that Elasticsearch is able to replay
             changes on the next start.
</dd><dt><span class="term">
search
</span></dt><dd>
Whether the segment is searchable. A value of false would most
             likely mean that the segment has been written to disk but no
             refresh occurred since then to make it searchable.
</dd><dt><span class="term">
version
</span></dt><dd>
The version of Lucene that has been used to write this segment.
</dd><dt><span class="term">
compound
</span></dt><dd>
Whether the segment is stored in a compound file. When true, this
             means that Lucene merged all files from the segment in a single
             one in order to save file descriptors.
</dd></dl></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Indices Recovery</span></div><div class="navheader"><span class="prev"><a href="indices-segments.html">
              &nbsp;
              Indices Segments</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-clearcache.html">Clear Cache
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-recovery"></a>Indices Recovery</h2></div></div></div><p>The indices recovery API provides insight into on-going index shard recoveries.
Recovery status may be reported for specific indices, or cluster-wide.</p><p>For example, the following command would show recovery information for the indices "index1" and "index2".</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET http://localhost:9200/index1,index2/_recovery</pre></div><p>To see cluster-wide recovery status simply leave out the index names.</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET http://localhost:9200/_recovery?pretty&amp;human</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
  "index1" : {
    "shards" : [ {
      "id" : 0,
      "type" : "SNAPSHOT",
      "stage" : "INDEX",
      "primary" : true,
      "start_time" : "2014-02-24T12:15:59.716",
      "start_time_in_millis": 1393244159716,
      "total_time" : "2.9m"
      "total_time_in_millis" : 175576,
      "source" : {
        "repository" : "my_repository",
        "snapshot" : "my_snapshot",
        "index" : "index1"
      },
      "target" : {
        "id" : "ryqJ5lO5S4-lSFbGntkEkg",
        "hostname" : "my.fqdn",
        "ip" : "10.0.1.7",
        "name" : "my_es_node"
      },
      "index" : {
        "size" : {
          "total" : "75.4mb"
          "total_in_bytes" : 79063092,
          "reused" : "0b",
          "reused_in_bytes" : 0,
          "recovered" : "65.7mb",
          "recovered_in_bytes" : 68891939,
          "percent" : "87.1%"
        },
        "files" : {
          "total" : 73,
          "reused" : 0,
          "recovered" : 69,
          "percent" : "94.5%"
        },
        "total_time" : "0s",
        "total_time_in_millis" : 0
      },
      "translog" : {
        "recovered" : 0,
        "total" : 0,
        "percent" : "100.0%",
        "total_on_start" : 0,
        "total_time" : "0s",
        "total_time_in_millis" : 0
      },
      "start" : {
        "check_index_time" : "0s",
        "check_index_time_in_millis" : 0,
        "total_time" : "0s",
        "total_time_in_millis" : 0
      }
    } ]
  }
}</pre></div><p>The above response shows a single index recovering a single shard. In this case, the source of the recovery is a snapshot repository
and the target of the recovery is the node with name "my_es_node".</p><p>Additionally, the output shows the number and percent of files recovered, as well as the number and percent of bytes recovered.</p><p>In some cases a higher level of detail may be preferable. Setting "detailed=true" will present a list of physical files in recovery.</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET http://localhost:9200/_recovery?pretty&amp;human&amp;detailed=true</pre></div><p>Response:</p><div class="pre_wrapper"><pre class="programlisting">{
  "index1" : {
    "shards" : [ {
      "id" : 0,
      "type" : "GATEWAY",
      "stage" : "DONE",
      "primary" : true,
      "start_time" : "2014-02-24T12:38:06.349",
      "start_time_in_millis" : "1393245486349",
      "stop_time" : "2014-02-24T12:38:08.464",
      "stop_time_in_millis" : "1393245488464",
      "total_time" : "2.1s",
      "total_time_in_millis" : 2115,
      "source" : {
        "id" : "RGMdRc-yQWWKIBM4DGvwqQ",
        "hostname" : "my.fqdn",
        "ip" : "10.0.1.7",
        "name" : "my_es_node"
      },
      "target" : {
        "id" : "RGMdRc-yQWWKIBM4DGvwqQ",
        "hostname" : "my.fqdn",
        "ip" : "10.0.1.7",
        "name" : "my_es_node"
      },
      "index" : {
        "size" : {
          "total" : "24.7mb",
          "total_in_bytes" : 26001617,
          "reused" : "24.7mb",
          "reused_in_bytes" : 26001617,
          "recovered" : "0b",
          "recovered_in_bytes" : 0,
          "percent" : "100.0%"
        },
        "files" : {
          "total" : 26,
          "reused" : 26,
          "recovered" : 0,
          "percent" : "100.0%",
          "details" : [ {
            "name" : "segments.gen",
            "length" : 20,
            "recovered" : 20
          }, {
            "name" : "_0.cfs",
            "length" : 135306,
            "recovered" : 135306
          }, {
            "name" : "segments_2",
            "length" : 251,
            "recovered" : 251
          },
           ...
          ]
        },
        "total_time" : "2ms",
        "total_time_in_millis" : 2
      },
      "translog" : {
        "recovered" : 71,
        "total_time" : "2.0s",
        "total_time_in_millis" : 2025
      },
      "start" : {
        "check_index_time" : 0,
        "total_time" : "88ms",
        "total_time_in_millis" : 88
      }
    } ]
  }
}</pre></div><p>This response shows a detailed listing (truncated for brevity) of the actual files recovered and their sizes.</p><p>Also shown are the timings in milliseconds of the various stages of recovery: index retrieval, translog replay, and index start time.</p><p>Note that the above listing indicates that the recovery is in stage "done". All recoveries, whether on-going or complete, are kept in
cluster state and may be reported on at any time. Setting "active_only=true" will cause only on-going recoveries to be reported.</p><p>Here is a complete list of options:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">detailed</code>
</p>
</td><td class="entry" valign="top">
<p>
Display a detailed view. This is primarily useful for viewing the recovery of physical index files. Default: false.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">active_only</code>
</p>
</td><td class="entry" valign="top">
<p>
Display only those recoveries that are currently on-going. Default: false.
</p>
</td></tr></tbody></table></div><p>Description of output fields:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">id</code>
</p>
</td><td class="entry" valign="top">
<p>
Shard ID
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">type</code>
</p>
</td><td class="entry" valign="top">
<p>
Recovery type:
</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
gateway
</li><li class="listitem">
snapshot
</li><li class="listitem">
replica
</li><li class="listitem">
relocating
</li></ul></div>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">stage</code>
</p>
</td><td class="entry" valign="top">
<p>
Recovery stage:
</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
init:     Recovery has not started
</li><li class="listitem">
index:    Reading index meta-data and copying bytes from source to destination
</li><li class="listitem">
start:    Starting the engine; opening the index for use
</li><li class="listitem">
translog: Replaying transaction log
</li><li class="listitem">
finalize: Cleanup
</li><li class="listitem">
done:     Complete
</li></ul></div>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">primary</code>
</p>
</td><td class="entry" valign="top">
<p>
True if shard is primary, false otherwise
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">start_time</code>
</p>
</td><td class="entry" valign="top">
<p>
Timestamp of recovery start
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">stop_time</code>
</p>
</td><td class="entry" valign="top">
<p>
Timestamp of recovery finish
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">total_time_in_millis</code>
</p>
</td><td class="entry" valign="top">
<p>
Total time to recover shard in milliseconds
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">source</code>
</p>
</td><td class="entry" valign="top">
<p>
Recovery source:
</p>
<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
repository description if recovery is from a snapshot
</li><li class="listitem">
description of source node otherwise
</li></ul></div>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">target</code>
</p>
</td><td class="entry" valign="top">
<p>
Destination node
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">index</code>
</p>
</td><td class="entry" valign="top">
<p>
Statistics about physical index recovery
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">translog</code>
</p>
</td><td class="entry" valign="top">
<p>
Statistics about translog recovery
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">start</code>
</p>
</td><td class="entry" valign="top">
<p>
Statistics about time to open and start the index
</p>
</td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Clear Cache</span></div><div class="navheader"><span class="prev"><a href="indices-recovery.html">
              &nbsp;
              Indices Recovery</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-flush.html">Flush
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-clearcache"></a>Clear Cache</h2></div></div></div><p>The clear cache API allows to clear either all caches or specific cached
associated with one or more indices.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/twitter/_cache/clear'</pre></div><p>The API, by default, will clear all caches. Specific caches can be cleaned
explicitly by setting <code class="literal">filter</code>, <code class="literal">fielddata</code>, <code class="literal">query_cache</code>,
or <code class="literal">id_cache</code> to <code class="literal">true</code>.</p><p>All caches relating to a specific field(s) can also be cleared by
specifying <code class="literal">fields</code> parameter with a comma delimited list of the
relevant fields.</p><h3><a id="_multi_index_2"></a>Multi Index</h3><p>The clear cache API can be applied to more than one index with a single
call, or even on <code class="literal">_all</code> the indices.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/kimchy,elasticsearch/_cache/clear'

$ curl -XPOST 'http://localhost:9200/_cache/clear'</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The <code class="literal">filter</code> cache is not cleared immediately but is scheduled to be
cleared within 60 seconds.</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Flush</span></div><div class="navheader"><span class="prev"><a href="indices-clearcache.html">
              &nbsp;
              Clear Cache</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-synced-flush.html">Synced Flush
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-flush"></a>Flush</h2></div></div></div><p>The flush API allows to flush one or more indices through an API. The
flush process of an index basically frees memory from the index by
flushing data to the index storage and clearing the internal
<a class="link" href="index-modules-translog.html" title="Translog">transaction log</a>. By
default, Elasticsearch uses memory heuristics in order to automatically
trigger flush operations as required in order to clear memory.</p><div class="pre_wrapper"><pre class="programlisting">POST /twitter/_flush</pre></div><div class="sense_widget" data-snippet="snippets/indices-flush/1.json"></div><h3><a id="flush-parameters"></a>Request Parameters</h3><p>The flush API accepts the following request parameters:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">wait_if_ongoing</code>
</p>
</td><td class="entry" valign="top">
<p>
If set to <code class="literal">true</code> the flush operation will block until the
flush can be executed if another flush operation is already executing.
The default is <code class="literal">false</code> and will cause an exception to be thrown on
the shard level if another flush operation is already running.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">force</code>
</p>
</td><td class="entry" valign="top">
<p>
Whether a flush should be forced even if it is not necessarily needed ie.
if no changes will be committed to the index. This is useful if transaction log IDs
should be incremented even if no uncommitted changes are present.
(This setting can be considered as internal)
</p>
</td></tr></tbody></table></div><h3><a id="flush-multi-index"></a>Multi Index</h3><p>The flush API can be applied to more than one index with a single call,
or even on <code class="literal">_all</code> the indices.</p><div class="pre_wrapper"><pre class="programlisting">POST /kimchy,elasticsearch/_flush

POST /_flush</pre></div><div class="sense_widget" data-snippet="snippets/indices-flush/2.json"></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-link"><a href="indices-flush.html">Flush</a></span>  <span class="breadcrumb-node">Synced Flush</span></div><div class="navheader"><span class="prev"><a href="indices-flush.html">
              &nbsp;
              Flush</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-refresh.html">Refresh
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="indices-synced-flush"></a>Synced Flush</h2></div></div></div><p>Elasticsearch tracks the indexing activity of each shard. Shards that have not
received any indexing operations for 5 minutes are automatically marked as inactive. This presents
an opportunity for Elasticsearch to reduce shard resources and also perform
a special kind of flush, called <code class="literal">synced flush</code>. A synced flush performs a normal flush, then adds
a generated unique marker (sync_id) to all shards.</p><p>Since the sync id marker was added when there were no ongoing indexing operations, it can
be used as a quick way to check if the two shards' lucene indices are identical. This quick sync id
comparison (if present) is used during recovery or restarts to skip the first and
most costly phase of the process. In that case, no segment files need to be copied and
the transaction log replay phase of the recovery can start immediately. Note that since the sync id
marker was applied together with a flush, it is very likely that the transaction log will be empty,
speeding up recoveries even more.</p><p>This is particularly useful for use cases having lots of indices which are
never or very rarely updated, such as time based data. This use case typically generates lots of indices whose
recovery without the synced flush marker would take a long time.</p><p>To check whether a shard has a marker or not, look for the <code class="literal">commit</code> section of shard stats returned by
the <a class="link" href="indices-stats.html" title="Indices Stats">indices stats</a> API:</p><div class="pre_wrapper"><pre class="programlisting">GET /twitter/_stats/commit?level=shards</pre></div><div class="sense_widget" data-snippet="snippets/indices-synced-flush/1.json"></div><p>which returns something similar to:</p><div class="pre_wrapper"><pre class="programlisting">{
   ...
   "indices": {
      "twitter": {
         "primaries": {},
         "total": {},
         "shards": {
            "0": [
               {
                  "routing": {
                     ...
                  },
                  "commit": {
                     "id": "te7zF7C4UsirqvL6jp/vUg==",
                     "generation": 2,
                     "user_data": {
                        "sync_id": "AU2VU0meX-VX2aNbEUsD" <a id="CO51-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>,
                        ...
                     },
                     "num_docs": 0
                  }
               }
               ...
            ],
            ...
         }
      }
   }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO51-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
the <code class="literal">sync id</code> marker
</p></td></tr></tbody></table></div><h3><a id="_synced_flush_api"></a>Synced Flush API</h3><p>The Synced Flush API allows an administrator to initiate a synced flush manually. This can be particularly useful for
a planned (rolling) cluster restart where you can stop indexing and dont want to wait the default 5 minutes for
idle indices to be sync-flushed automatically.</p><p>While handy, there are a couple of caveats for this API:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Synced flush is a best effort operation. Any ongoing indexing operations will cause
the synced flush to fail on that shard. This means that some shards may be synced flushed while others arent. See below for more.
</li><li class="listitem">
The <code class="literal">sync_id</code> marker is removed as soon as the shard is flushed again. That is because a flush replaces the low level
lucene commit point where the marker is stored. Uncommitted operations in the transaction log do not remove the marker.
In practice, one should consider any indexing operation on an index as removing the marker as a flush can be triggered by Elasticsearch
at any time.
</li></ol></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>It is harmless to request a synced flush while there is ongoing indexing. Shards that are idle will succeed and shards
 that are not will fail. Any shards that succeeded will have faster recovery times.</p></div></div><div class="pre_wrapper"><pre class="programlisting">POST /twitter/_flush/synced</pre></div><div class="sense_widget" data-snippet="snippets/indices-synced-flush/2.json"></div><p>The response contains details about how many shards were successfully sync-flushed and information about any failure.</p><p>Here is what it looks like when all shards of a two shards and one replica index successfully
sync-flushed:</p><div class="pre_wrapper"><pre class="programlisting">{
   "_shards": {
      "total": 4,
      "successful": 4,
      "failed": 0
   },
   "twitter": {
      "total": 4,
      "successful": 4,
      "failed": 0
   }
}</pre></div><p>Here is what it looks like when one shard group failed due to pending operations:</p><div class="pre_wrapper"><pre class="programlisting">{
   "_shards": {
      "total": 4,
      "successful": 2,
      "failed": 2
   },
   "twitter": {
      "total": 4,
      "successful": 2,
      "failed": 2,
      "failures": [
         {
            "shard": 1,
            "reason": "[2] ongoing operations on primary"
         }
      ]
   }
}</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The above error is shown when the synced flush failes due to concurrent indexing operations. The HTTP
status code in that case will be <code class="literal">409 CONFLICT</code>.</p></div></div><p>Sometimes the failures are specific to a shard copy. The copies that failed will not be eligible for
fast recovery but those that succeeded still will be. This case is reported as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
   "_shards": {
      "total": 4,
      "successful": 1,
      "failed": 1
   },
   "twitter": {
      "total": 4,
      "successful": 3,
      "failed": 1,
      "failures": [
         {
            "shard": 1,
            "reason": "unexpected error",
            "routing": {
               "state": "STARTED",
               "primary": false,
               "node": "SZNr2J_ORxKTLUCydGX4zA",
               "relocating_node": null,
               "shard": 1,
               "index": "twitter"
            }
         }
      ]
   }
}</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>When a shard copy fails to sync-flush, the HTTP status code returned will be <code class="literal">409 CONFLICT</code>.</p></div></div><p>The synced flush API can be applied to more than one index with a single call,
or even on <code class="literal">_all</code> the indices.</p><div class="pre_wrapper"><pre class="programlisting">POST /kimchy,elasticsearch/_flush/synced

POST /_flush/synced</pre></div><div class="sense_widget" data-snippet="snippets/indices-synced-flush/3.json"></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Refresh</span></div><div class="navheader"><span class="prev"><a href="indices-synced-flush.html">
              &nbsp;
              Synced Flush</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-optimize.html">Optimize
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-refresh"></a>Refresh</h2></div></div></div><p>The refresh API allows to explicitly refresh one or more index, making
all operations performed since the last refresh available for search.
The (near) real-time capabilities depend on the index engine used. For
example, the internal one requires refresh to be called, but by default a
refresh is scheduled periodically.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/twitter/_refresh'</pre></div><h3><a id="_multi_index_3"></a>Multi Index</h3><p>The refresh API can be applied to more than one index with a single
call, or even on <code class="literal">_all</code> the indices.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/kimchy,elasticsearch/_refresh'

$ curl -XPOST 'http://localhost:9200/_refresh'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Optimize</span></div><div class="navheader"><span class="prev"><a href="indices-refresh.html">
              &nbsp;
              Refresh</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-shadow-replicas.html">Shadow replica indices
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-optimize"></a>Optimize</h2></div></div></div><p>The optimize API allows to optimize one or more indices through an API.
The optimize process basically optimizes the index for faster search
operations (and relates to the number of segments a Lucene index holds
within each shard). The optimize operation allows to reduce the number
of segments by merging them.</p><p>This call will block until the optimize is complete. If the http connection
is lost, the request will continue in the background, and
any new requests will block until the previous optimize is complete.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/twitter/_optimize'</pre></div><h3><a id="optimize-parameters"></a>Request Parameters</h3><p>The optimize API accepts the following request parameters as query arguments:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">max_num_segments</code>
</p>
</td><td class="entry" valign="top">
<p>
The number of segments to optimize to. To fully
optimize the index, set it to <code class="literal">1</code>. Defaults to simply checking if a
merge needs to execute, and if so, executes it.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">only_expunge_deletes</code>
</p>
</td><td class="entry" valign="top">
<p>
Should the optimize process only expunge segments with
deletes in it. In Lucene, a document is not deleted from a segment, just marked
as deleted. During a merge process of segments, a new segment is created that
does not have those deletes. This flag allows to only merge segments that have
deletes. Defaults to <code class="literal">false</code>.  Note that this wont override the
<code class="literal">index.merge.policy.expunge_deletes_allowed</code> threshold.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">flush</code>
</p>
</td><td class="entry" valign="top">
<p>
Should a flush be performed after the optimize. Defaults to
<code class="literal">true</code>.
</p>
</td></tr></tbody></table></div><h3><a id="optimize-multi-index"></a>Multi Index</h3><p>The optimize API can be applied to more than one index with a single
call, or even on <code class="literal">_all</code> the indices.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/kimchy,elasticsearch/_optimize'

$ curl -XPOST 'http://localhost:9200/_optimize?only_expunge_deletes=true'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Shadow replica indices</span></div><div class="navheader"><span class="prev"><a href="indices-optimize.html">
              &nbsp;
              Optimize</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_node_level_settings_related_to_shadow_replicas.html">Node level settings related to shadow replicas
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-shadow-replicas"></a>Shadow replica indices</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p></div></div><p>If you would like to use a shared filesystem, you can use the shadow replicas
settings to choose where on disk the data for an index should be kept, as well
as how Elasticsearch should replay operations on all the replica shards of an
index.</p><p>In order to fully utilize the <code class="literal">index.data_path</code> and <code class="literal">index.shadow_replicas</code>
settings, you need to enable using it in elasticsearch.yml:</p><div class="pre_wrapper"><pre class="programlisting">node.enable_custom_paths: true</pre></div><p>You can then create an index with a custom data path, where each node will use
this path for the data:</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Because shadow replicas do not index the document on replica shards, its
possible for the replicas known mapping to be behind the indexs known mapping
if the latest cluster state has not yet been processed on the node containing
the replica. Because of this, it is highly recommended to use pre-defined
mappings when using shadow replicas.</p></div></div><div class="pre_wrapper"><pre class="programlisting">curl -XPUT 'localhost:9200/my_index' -d '
{
    "index" : {
        "number_of_shards" : 1,
        "number_of_replicas" : 4,
        "data_path": "/var/data/my_index",
        "shadow_replicas": true
    }
}'</pre></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>In the above example, the "/var/data/my_index" path is a shared filesystem that
must be available on every node in the Elasticsearch cluster. You must also
ensure that the Elasticsearch process has the correct permissions to read from
and write to the directory used in the <code class="literal">index.data_path</code> setting.</p></div></div><p>An index that has been created with the <code class="literal">index.shadow_replicas</code> setting set to
"true" will not replicate document operations to any of the replica shards,
instead, it will only continually refresh. Once segments are available on the
filesystem where the shadow replica resides (after an Elasticsearch "flush"), a
regular refresh (governed by the <code class="literal">index.refresh_interval</code>) can be used to make
the new data searchable.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Since documents are only indexed on the primary shard, realtime GET
requests could fail to return a document if executed on the replica shard,
therefore, GET API requests automatically have the <code class="literal">?preference=_primary</code> flag
set if there is no preference flag already set.</p></div></div><p>In order to ensure the data is being synchronized in a fast enough manner, you
may need to tune the flush threshold for the index to a desired number. A flush
is needed to fsync segment files to disk, so they will be visible to all other
replica nodes. Users should test what flush threshold levels they are
comfortable with, as increased flushing can impact indexing performance.</p><p>The Elasticsearch cluster will still detect the loss of a primary shard, and
transform the replica into a primary in this situation. This transformation will
take slightly longer, since no <code class="literal">IndexWriter</code> is maintained for each shadow
replica.</p><p>Below is the list of settings that can be changed using the update
settings API:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">index.data_path</code> (string)
</span></dt><dd>
    Path to use for the indexs data. Note that by default Elasticsearch will
    append the node ordinal by default to the path to ensure multiple instances
    of Elasticsearch on the same machine do not share a data directory.
</dd><dt><span class="term">
<code class="literal">index.shadow_replicas</code>
</span></dt><dd>
    Boolean value indicating this index should use shadow replicas. Defaults to
    <code class="literal">false</code>.
</dd><dt><span class="term">
<code class="literal">index.shared_filesystem</code>
</span></dt><dd>
    Boolean value indicating this index uses a shared filesystem. Defaults to
    the <code class="literal">true</code> if <code class="literal">index.shadow_replicas</code> is set to true, <code class="literal">false</code> otherwise.
</dd><dt><span class="term">
<code class="literal">index.shared_filesystem.recover_on_any_node</code>
</span></dt><dd>
    Boolean value indicating whether the primary shards for the index should be
    allowed to recover on any node in the cluster, regardless of the number of
    replicas or whether the node has previously had the shard allocated to it
    before. Defaults to <code class="literal">false</code>.
</dd></dl></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-link"><a href="indices-shadow-replicas.html">Shadow replica indices</a></span>  <span class="breadcrumb-node">Node level settings related to shadow replicas</span></div><div class="navheader"><span class="prev"><a href="indices-shadow-replicas.html">
              &nbsp;
              Shadow replica indices</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="indices-upgrade.html">Upgrade
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_node_level_settings_related_to_shadow_replicas"></a>Node level settings related to shadow replicas</h2></div></div></div><p>These are non-dynamic settings that need to be configured in <code class="literal">elasticsearch.yml</code></p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">node.add_id_to_custom_path</code>
</span></dt><dd>
    Boolean setting indicating whether Elasticsearch should append the nodes
    ordinal to the custom data path. For example, if this is enabled and a path
    of "/tmp/foo" is used, the first locally-running node will use "/tmp/foo/0",
    the second will use "/tmp/foo/1", the third "/tmp/foo/2", etc. Defaults to
    <code class="literal">true</code>.
</dd><dt><span class="term">
<code class="literal">node.enable_custom_paths</code>
</span></dt><dd>
    Boolean value that must be set to <code class="literal">true</code> in order to use the
    <code class="literal">index.data_path</code> setting. Defaults to <code class="literal">false</code>.
</dd></dl></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="indices.html">Indices APIs</a></span>  <span class="breadcrumb-node">Upgrade</span></div><div class="navheader"><span class="prev"><a href="_node_level_settings_related_to_shadow_replicas.html">
              &nbsp;
              Node level settings related to shadow replicas</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat.html">cat APIs
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="indices-upgrade"></a>Upgrade</h2></div></div></div><p>The upgrade API allows to upgrade one or more indices to the latest Lucene
format through an API. The upgrade process converts any segments written with
older formats.</p><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>When to use the <code class="literal">upgrade</code> API</strong></p></div></div></div><p>Newer versions of Lucene often come with a new index format which provides bug
fixes and performance improvements. In order to take advantage of these
improvements, the segments in each shard need to be rewritten using the latest
Lucene format.</p><p class="formalpara"><strong>Automatic upgrading.&nbsp;</strong>Indices that are actively being written to will automatically write new
segments in the latest format.  The background merge process which combines
multiple small segments into a single bigger segment will also write the new
merged segment in the latest format.</p><p class="formalpara"><strong>Optional manual upgrades.&nbsp;</strong>Some old segments may never be merged away because they are already too big to
be worth merging, and indices that no longer receive changes will not be
upgraded automatically.  Upgrading segments is not required for most
Elasticsearch upgrades because it can read older formats from the current and
previous major version of Lucene.</p><p>You can, however, choose to upgrade old segments manually to take advantage of
the latest format. The <code class="literal">upgrade</code> API will rewrite any old segments in the
latest Lucene format.  It can be run on one index, multiple or all indices, so
you can control when it is run and how many indices it should upgrade.</p><p class="formalpara"><strong>When you must use the <code class="literal">upgrade</code> API.&nbsp;</strong>Elasticsearch can only read formats from the current and previous major
version of Lucene.  For instance, Elasticsearch 2.x (Lucene 5) can read disk
formats from Elasticsearch 0.90 and 1.x (Lucene 4), but not from Elasticsearch
0.20 and before (Lucene 3).</p><p>In fact, an Elasticsearch 2.0 cluster will refuse to start if any indices
created before Elasticsearch 0.90 are present, and it will refuse to open them
if they are imported as dangling indices later on.  It will not be possible to
restore an index created with Elasticsearch 0.20.x and before into a 2.0
cluster.</p><p>These ancient indices must either be deleted or upgraded before migrating to
Elasticsearch 2.0.  Upgrading will:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Rewrite old segments in the latest Lucene format.
</li><li class="listitem">
Add the <code class="literal">index.version.minimum_compatible</code> setting to the index, to mark it as
  2.0 compatible <span class="added">
      [<span class="version">1.6.0</span>]
      <span class="detail">Added in 1.6.0.
</span></span>.
</li></ul></div><p>Instead of upgrading all segments that werent written with the most recent
version of Lucene, you can choose to do the minimum work required before
moving to Elasticsearch 2.0, by specifying the <code class="literal">only_ancient_segments</code> option,
which will only rewrite segments written by Lucene 3.</p></div><h3><a id="_start_an_upgrade"></a>Start an upgrade</h3><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/twitter/_upgrade'</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Upgrading is an I/O intensive operation, and is limited to processing a
single shard per node at a time.  It also is not allowed to run at the same
time as optimize.</p></div></div><p>This call will block until the upgrade is complete. If the http connection
is lost, the request will continue in the background, and
any new requests will block until the previous upgrade is complete.</p><h4><a id="upgrade-parameters"></a>Request Parameters</h4><p>The <code class="literal">upgrade</code> API accepts the following request parameters:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">only_ancient_segments</code>
</p>
</td><td class="entry" valign="top">
<p>
If true, only very old segments (from a
previous Lucene major release) will be upgraded.  While this will do
the minimal work to ensure the next major release of Elasticsearch can
read the segments, its dangerous because it can leave other very old
segments in sub-optimal formats.  Defaults to <code class="literal">false</code>.
</p>
</td></tr></tbody></table></div><h3><a id="_check_upgrade_status"></a>Check upgrade status</h3><p>Use a <code class="literal">GET</code> request to monitor how much of an index is upgraded.  This
can also be used prior to starting an upgrade to identify which
indices you want to upgrade at the same time.</p><p>The <code class="literal">ancient</code> byte values that are returned indicate total bytes of
segments whose version is extremely old (Lucene major version is
different from the current version), showing how much upgrading is
necessary when you run with <code class="literal">only_ancient_segments=true</code>.</p><div class="pre_wrapper"><pre class="programlisting">curl 'http://localhost:9200/twitter/_upgrade?pretty&amp;human'</pre></div><div class="pre_wrapper"><pre class="programlisting">{
  "size": "21gb",
  "size_in_bytes": "21000000000",
  "size_to_upgrade": "10gb",
  "size_to_upgrade_in_bytes": "10000000000"
  "size_to_upgrade_ancient": "1gb",
  "size_to_upgrade_ancient_in_bytes": "1000000000"
  "indices": {
    "twitter": {
      "size": "21gb",
      "size_in_bytes": "21000000000",
      "size_to_upgrade": "10gb",
      "size_to_upgrade_in_bytes": "10000000000"
      "size_to_upgrade_ancient": "1gb",
      "size_to_upgrade_ancient_in_bytes": "1000000000"
    }
  }
}</pre></div><p>The level of details in the upgrade status command can be controlled by
setting <code class="literal">level</code> parameter to <code class="literal">cluster</code>, <code class="literal">index</code> (default) or <code class="literal">shard</code> levels.
For example, you can run the upgrade status command with <code class="literal">level=shard</code> to
get detailed upgrade information of each individual shard.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">cat APIs</span></div><div class="navheader"><span class="prev"><a href="indices-upgrade.html">
              &nbsp;
              Upgrade</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat-alias.html">cat aliases
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="cat"></a>cat APIs</h1></div></div></div><div class="partintro"><div></div><h2><a id="intro"></a>Introduction</h2><p>JSON is great for computers.  Even if its pretty-printed, trying
to find relationships in the data is tedious.  Human eyes, especially
when looking at an ssh terminal, need compact and aligned text.  The
cat API aims to meet this need.</p><p>All the cat commands accept a query string parameter <code class="literal">help</code> to see all
the headers and info they provide, and the <code class="literal">/_cat</code> command alone lists all
the available commands.</p><h2><a id="common-parameters"></a>Common parameters</h2><h3><a id="verbose"></a>Verbose</h3><p>Each of the commands accepts a query string parameter <code class="literal">v</code> to turn on
verbose output.</p><div class="pre_wrapper"><pre class="programlisting">% curl 'localhost:9200/_cat/master?v'
id                     ip        node
EGtKWZlWQYWDmX29fUnp3Q 127.0.0.1 Grey, Sara</pre></div><h3><a id="help"></a>Help</h3><p>Each of the commands accepts a query string parameter <code class="literal">help</code> which will
output its available columns.</p><div class="pre_wrapper"><pre class="programlisting">% curl 'localhost:9200/_cat/master?help'
id   | node id
ip   | node transport ip address
node | node name</pre></div><h3><a id="headers"></a>Headers</h3><p>Each of the commands accepts a query string parameter <code class="literal">h</code> which forces
only those columns to appear.</p><div class="pre_wrapper"><pre class="programlisting">% curl 'n1:9200/_cat/nodes?h=ip,port,heapPercent,name'
192.168.56.40 9300 40.3 Captain Universe
192.168.56.20 9300 15.3 Kaluu
192.168.56.50 9300 17.0 Yellowjacket
192.168.56.10 9300 12.3 Remy LeBeau
192.168.56.30 9300 43.9 Ramsey, Doug</pre></div><h3><a id="numeric-formats"></a>Numeric formats</h3><p>Many commands provide a few types of numeric output, either a byte
value or a time value.  By default, these types are human-formatted,
for example, <code class="literal">3.5mb</code> instead of <code class="literal">3763212</code>.  The human values are not
sortable numerically, so in order to operate on these values where
order is important, you can change it.</p><p>Say you want to find the largest index in your cluster (storage used
by all the shards, not number of documents).  The <code class="literal">/_cat/indices</code> API
is ideal.  We only need to tweak two things.  First, we want to turn
off human mode.  Well use a byte-level resolution.  Then well pipe
our output into <code class="literal">sort</code> using the appropriate column, which in this
case is the eight one.</p><div class="pre_wrapper"><pre class="programlisting">% curl '192.168.56.10:9200/_cat/indices?bytes=b' | sort -rnk8
green wiki2 3 0 10000   0 105274918 105274918
green wiki1 3 0 10000 413 103776272 103776272
green foo   1 0   227   0   2065131   2065131</pre></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-node">cat aliases</span></div><div class="navheader"><span class="prev"><a href="cat.html">
              &nbsp;
              cat APIs</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat-allocation.html">cat allocation
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cat-alias"></a>cat aliases</h2></div></div></div><p><code class="literal">aliases</code> shows information about currently configured aliases to indices
including filter and routing infos.</p><div class="pre_wrapper"><pre class="programlisting">% curl '192.168.56.10:9200/_cat/aliases?v'
alias  index filter indexRouting searchRouting
alias2 test1 *      -            -
alias4 test1 -      2            1,2
alias1 test1 -      -            -
alias3 test1 -      1            1</pre></div><p>The output shows that <code class="literal">alias</code> has configured a filter, and specific routing
configurations in <code class="literal">alias3</code> and <code class="literal">alias4</code>.</p><p>If you only want to get information about a single alias, you can specify
the alias in the URL, for example <code class="literal">/_cat/aliases/alias1</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-node">cat allocation</span></div><div class="navheader"><span class="prev"><a href="cat-alias.html">
              &nbsp;
              cat aliases</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat-count.html">cat count
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cat-allocation"></a>cat allocation</h2></div></div></div><p><code class="literal">allocation</code> provides a snapshot of how shards have located around the
cluster and the state of disk usage.</p><div class="pre_wrapper"><pre class="programlisting">% curl '192.168.56.10:9200/_cat/allocation?v'
shards diskUsed diskAvail diskRatio ip            node
     1    5.6gb    72.2gb      7.8% 192.168.56.10 Jarella
     1    5.6gb    72.2gb      7.8% 192.168.56.30 Solarr
     1    5.5gb    72.3gb      7.6% 192.168.56.20 Adam II</pre></div><p>Here we can see that each node has been allocated a single shard and
that theyre all using about the same amount of space.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-node">cat count</span></div><div class="navheader"><span class="prev"><a href="cat-allocation.html">
              &nbsp;
              cat allocation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat-fielddata.html">cat fielddata
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cat-count"></a>cat count</h2></div></div></div><p><code class="literal">count</code> provides quick access to the document count of the entire
cluster, or individual indices.</p><div class="pre_wrapper"><pre class="programlisting">% curl 192.168.56.10:9200/_cat/indices
green wiki1 3 0 10000 331 168.5mb 168.5mb
green wiki2 3 0   428   0     8mb     8mb
% curl 192.168.56.10:9200/_cat/count
1384314124582 19:42:04 10428
% curl 192.168.56.10:9200/_cat/count/wiki2
1384314139815 19:42:19 428</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-node">cat fielddata</span></div><div class="navheader"><span class="prev"><a href="cat-count.html">
              &nbsp;
              cat count</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat-health.html">cat health
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cat-fielddata"></a>cat fielddata</h2></div></div></div><p><code class="literal">fielddata</code> shows information about currently loaded fielddata on a per-node
basis.</p><div class="pre_wrapper"><pre class="programlisting">% curl '192.168.56.10:9200/_cat/fielddata?v'
id                     host    ip            node          total   body    text
c223lARiSGeezlbrcugAYQ myhost1 10.20.100.200 Jessica Jones 385.6kb 159.8kb 225.7kb
waPCbitNQaCL6xC8VxjAwg myhost2 10.20.100.201 Adversary     435.2kb 159.8kb 275.3kb
yaDkp-G3R0q1AJ-HUEvkSQ myhost3 10.20.100.202 Microchip     284.6kb 109.2kb 175.3kb</pre></div><p>Fields can be specified either as a query parameter, or in the URL path:</p><div class="pre_wrapper"><pre class="programlisting">% curl '192.168.56.10:9200/_cat/fielddata?v&amp;fields=body'
id                     host    ip            node          total   body
c223lARiSGeezlbrcugAYQ myhost1 10.20.100.200 Jessica Jones 385.6kb 159.8kb
waPCbitNQaCL6xC8VxjAwg myhost2 10.20.100.201 Adversary     435.2kb 159.8kb
yaDkp-G3R0q1AJ-HUEvkSQ myhost3 10.20.100.202 Microchip     284.6kb 109.2kb

% curl '192.168.56.10:9200/_cat/fielddata/body,text?v'
id                     host    ip            node          total   body    text
c223lARiSGeezlbrcugAYQ myhost1 10.20.100.200 Jessica Jones 385.6kb 159.8kb 225.7kb
waPCbitNQaCL6xC8VxjAwg myhost2 10.20.100.201 Adversary     435.2kb 159.8kb 275.3kb
yaDkp-G3R0q1AJ-HUEvkSQ myhost3 10.20.100.202 Microchip     284.6kb 109.2kb 175.3kb</pre></div><p>The output shows the total fielddata and then the individual fielddata for the
<code class="literal">body</code> and <code class="literal">text</code> fields.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-node">cat health</span></div><div class="navheader"><span class="prev"><a href="cat-fielddata.html">
              &nbsp;
              cat fielddata</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat-indices.html">cat indices
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cat-health"></a>cat health</h2></div></div></div><p><code class="literal">health</code> is a terse, one-line representation of the same information
from <code class="literal">/_cluster/health</code>. It has one option <code class="literal">ts</code> to disable the
timestamping.</p><div class="pre_wrapper"><pre class="programlisting">% curl 192.168.56.10:9200/_cat/health
1384308967 18:16:07 foo green 3 3 3 3 0 0 0
% curl '192.168.56.10:9200/_cat/health?v&amp;ts=0'
cluster status nodeTotal nodeData shards pri relo init unassign tasks
foo     green          3        3      3   3    0    0        0     0</pre></div><p>A common use of this command is to verify the health is consistent
across nodes:</p><div class="pre_wrapper"><pre class="programlisting">% pssh -i -h list.of.cluster.hosts curl -s localhost:9200/_cat/health
[1] 20:20:52 [SUCCESS] es3.vm
1384309218 18:20:18 foo green 3 3 3 3 0 0 0 0
[2] 20:20:52 [SUCCESS] es1.vm
1384309218 18:20:18 foo green 3 3 3 3 0 0 0 0
[3] 20:20:52 [SUCCESS] es2.vm
1384309218 18:20:18 foo green 3 3 3 3 0 0 0 0</pre></div><p>A less obvious use is to track recovery of a large cluster over
time. With enough shards, starting a cluster, or even recovering after
losing a node, can take time (depending on your network &amp; disk). A way
to track its progress is by using this command in a delayed loop:</p><div class="pre_wrapper"><pre class="programlisting">% while true; do curl 192.168.56.10:9200/_cat/health; sleep 120; done
1384309446 18:24:06 foo red 3 3 20 20 0 0 1812 0
1384309566 18:26:06 foo yellow 3 3 950 916 0 12 870 0
1384309686 18:28:06 foo yellow 3 3 1328 916 0 12 492 0
1384309806 18:30:06 foo green 3 3 1832 916 4 0 0
^C</pre></div><p>In this scenario, we can tell that recovery took roughly four minutes.
If this were going on for hours, we would be able to watch the
<code class="literal">UNASSIGNED</code> shards drop precipitously.  If that number remained
static, we would have an idea that there is a problem.</p><h3><a id="timestamp"></a>Why the timestamp?</h3><p>You typically are using the <code class="literal">health</code> command when a cluster is
malfunctioning.  During this period, its extremely important to
correlate activities across log files, alerting systems, etc.</p><p>There are two outputs.  The <code class="literal">HH:MM:SS</code> output is simply for quick
human consumption.  The epoch time retains more information, including
date, and is machine sortable if your recovery spans days.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-node">cat indices</span></div><div class="navheader"><span class="prev"><a href="cat-health.html">
              &nbsp;
              cat health</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat-master.html">cat master
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cat-indices"></a>cat indices</h2></div></div></div><p>The <code class="literal">indices</code> command provides a cross-section of each index.  This
information <span class="strong emphasis"><strong>spans nodes</strong></span>.</p><div class="pre_wrapper"><pre class="programlisting">% curl 'localhost:9200/_cat/indices/twi*?v'
health status index    pri rep docs.count docs.deleted store.size pri.store.size
green  open   twitter    5   1      11434            0       64mb           32mb
green  open   twitter2   2   0       2030            0      5.8mb          5.8mb</pre></div><p>We can tell quickly how many shards make up an index, the number of
docs, deleted docs, primary store size, and total store size (all
shards including replicas).</p><h3><a id="pri-flag"></a>Primaries</h3><p>The index stats by default will show them for all of an indexs
shards, including replicas.  A <code class="literal">pri</code> flag can be supplied to enable
the view of relevant stats in the context of only the primaries.</p><h3><a id="examples"></a>Examples</h3><p>Which indices are yellow?</p><div class="pre_wrapper"><pre class="programlisting">% curl localhost:9200/_cat/indices | grep ^yell
yellow open  wiki     2 1  6401 1115 151.4mb 151.4mb
yellow open  twitter  5 1 11434    0    32mb    32mb</pre></div><p>Whats my largest index by disk usage not including replicas?</p><div class="pre_wrapper"><pre class="programlisting">% curl 'localhost:9200/_cat/indices?bytes=b' | sort -rnk8
green open  wiki     2 0  6401 1115 158843725 158843725
green open  twitter  5 1 11434    0  67155614  33577857
green open  twitter2 2 0  2030    0   6125085   6125085</pre></div><p>How many merge operations have the shards for the <code class="literal">wiki</code> completed?</p><div class="pre_wrapper"><pre class="programlisting">% curl 'localhost:9200/_cat/indices/wiki?pri&amp;v&amp;h=health,index,prirep,docs.count,mt'
health index docs.count mt pri.mt
green  wiki        9646 16     16</pre></div><p>How much memory is used per index?</p><div class="pre_wrapper"><pre class="programlisting">% curl 'localhost:9200/_cat/indices?v&amp;h=i,tm'
i     tm
wiki  8.1gb
test  30.5kb
user  1.9mb</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-node">cat master</span></div><div class="navheader"><span class="prev"><a href="cat-indices.html">
              &nbsp;
              cat indices</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat-nodes.html">cat nodes
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cat-master"></a>cat master</h2></div></div></div><p><code class="literal">master</code> doesnt have any extra options. It simply displays the
masters node ID, bound IP address, and node name.</p><div class="pre_wrapper"><pre class="programlisting">% curl 'localhost:9200/_cat/master?v'
id                     ip            node
Ntgn2DcuTjGuXlhKDUD4vA 192.168.56.30 Solarr</pre></div><p>This information is also available via the <code class="literal">nodes</code> command, but this
is slightly shorter when all you want to do, for example, is verify
all nodes agree on the master:</p><div class="pre_wrapper"><pre class="programlisting">% pssh -i -h list.of.cluster.hosts curl -s localhost:9200/_cat/master
[1] 19:16:37 [SUCCESS] es3.vm
Ntgn2DcuTjGuXlhKDUD4vA 192.168.56.30 Solarr
[2] 19:16:37 [SUCCESS] es2.vm
Ntgn2DcuTjGuXlhKDUD4vA 192.168.56.30 Solarr
[3] 19:16:37 [SUCCESS] es1.vm
Ntgn2DcuTjGuXlhKDUD4vA 192.168.56.30 Solarr</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-node">cat nodes</span></div><div class="navheader"><span class="prev"><a href="cat-master.html">
              &nbsp;
              cat master</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat-pending-tasks.html">cat pending tasks
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cat-nodes"></a>cat nodes</h2></div></div></div><p>The <code class="literal">nodes</code> command shows the cluster topology.</p><div class="pre_wrapper"><pre class="programlisting">% curl 192.168.56.10:9200/_cat/nodes
SP4H 4727 192.168.56.30 9300 1.7.6 1.8.0_25 72.1gb 35.4 93.9mb 79 239.1mb 0.45 3.4h d m Boneyard
_uhJ 5134 192.168.56.10 9300 1.7.6 1.8.0_25 72.1gb 33.3 93.9mb 85 239.1mb 0.06 3.4h d * Athena
HfDp 4562 192.168.56.20 9300 1.7.6 1.8.0_25 72.2gb 74.5 93.9mb 83 239.1mb 0.12 3.4h d m Zarek</pre></div><p>The first few columns tell you where your nodes live.  For sanity it
also tells you what version of ES and the JVM each one runs.</p><div class="pre_wrapper"><pre class="programlisting">nodeId pid  ip            port version jdk
u2PZ   4234 192.168.56.30 9300 1.7.6   1.8.0_25
URzf   5443 192.168.56.10 9300 1.7.6   1.8.0_25
ActN   3806 192.168.56.20 9300 1.7.6   1.8.0_25</pre></div><p>The next few give a picture of your heap, memory, and load.</p><div class="pre_wrapper"><pre class="programlisting">diskAvail heapPercent heapMax ramPercent  ramMax load
   72.1gb        31.3  93.9mb         81 239.1mb 0.24
   72.1gb        19.6  93.9mb         82 239.1mb 0.05
   72.2gb        64.9  93.9mb         84 239.1mb 0.12</pre></div><p>The last columns provide ancillary information that can often be
useful when looking at the cluster as a whole, particularly large
ones.  How many master-eligible nodes do I have?  How many client
nodes?  It looks like someone restarted a node recently; which one was
it?</p><div class="pre_wrapper"><pre class="programlisting">uptime data/client master name
  3.5h d           m      Boneyard
  3.5h d           *      Athena
  3.5h d           m      Zarek</pre></div><h3><a id="_columns"></a>Columns</h3><p>Below is an exhaustive list of the existing headers that can be
passed to <code class="literal">nodes?h=</code> to retrieve the relevant details in ordered
columns.  If no headers are specified, then those marked to Appear
by Default will appear. If any header is specified, then the defaults
are not used.</p><p>Aliases can be used in place of the full header name for brevity.
Columns appear in the order that they are listed below unless a
different order is specified (e.g., <code class="literal">h=pid,id</code> versus <code class="literal">h=id,pid</code>).</p><p>When specifying headers, the headers are not placed in the output
by default.  To have the headers appear in the output, use verbose
mode (<code class="literal">v</code>). The header name will match the supplied value (e.g.,
<code class="literal">pid</code> versus <code class="literal">p</code>).  For example:</p><div class="pre_wrapper"><pre class="programlisting">% curl 192.168.56.10:9200/_cat/nodes?v&amp;h=id,ip,port,v,m
id   ip            port version m
pLSN 192.168.56.30 9300 1.7.6   m
k0zy 192.168.56.10 9300 1.7.6   m
6Tyi 192.168.56.20 9300 1.7.6   *
% curl 192.168.56.10:9200/_cat/nodes?h=id,ip,port,v,m
pLSN 192.168.56.30 9300 1.7.6 m
k0zy 192.168.56.10 9300 1.7.6 m
6Tyi 192.168.56.20 9300 1.7.6 *</pre></div><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"><col class="col_5"></colgroup><thead><tr><th class="entry" align="left" valign="top">Header </th><th class="entry" align="left" valign="top">Alias </th><th class="entry" align="left" valign="top">Appear by Default </th><th class="entry" align="left" valign="top">Description </th><th class="entry" align="left" valign="top">Example</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">id</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">nodeId</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Unique node ID</p></td><td class="entry" align="left" valign="top"><p>k0zy</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">pid</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">p</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Process ID</p></td><td class="entry" align="left" valign="top"><p>13061</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">host</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">h</code></p></td><td class="entry" align="left" valign="top"><p>Yes</p></td><td class="entry" align="left" valign="top"><p>Host name</p></td><td class="entry" align="left" valign="top"><p>n1</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ip</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">i</code></p></td><td class="entry" align="left" valign="top"><p>Yes</p></td><td class="entry" align="left" valign="top"><p>IP address</p></td><td class="entry" align="left" valign="top"><p>127.0.1.1</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">port</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">po</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Bound transport port</p></td><td class="entry" align="left" valign="top"><p>9300</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">version</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">v</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Elasticsearch version</p></td><td class="entry" align="left" valign="top"><p>1.7.6</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">build</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">b</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Elasticsearch Build hash</p></td><td class="entry" align="left" valign="top"><p>5c03844</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">jdk</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">j</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Running Java version</p></td><td class="entry" align="left" valign="top"><p>1.8.0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">disk.avail</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">d</code>, <code class="literal">disk</code>, <code class="literal">diskAvail</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Available disk space</p></td><td class="entry" align="left" valign="top"><p>1.8gb</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">heap.current</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">hc</code>, <code class="literal">heapCurrent</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Used heap</p></td><td class="entry" align="left" valign="top"><p>311.2mb</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">heap.percent</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">hp</code>, <code class="literal">heapPercent</code></p></td><td class="entry" align="left" valign="top"><p>Yes</p></td><td class="entry" align="left" valign="top"><p>Used heap percentage</p></td><td class="entry" align="left" valign="top"><p>7</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">heap.max</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">hm</code>, <code class="literal">heapMax</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Maximum configured heap</p></td><td class="entry" align="left" valign="top"><p>1015.6mb</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ram.current</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">rc</code>, <code class="literal">ramCurrent</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Used total memory</p></td><td class="entry" align="left" valign="top"><p>513.4mb</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ram.percent</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">rp</code>, <code class="literal">ramPercent</code></p></td><td class="entry" align="left" valign="top"><p>Yes</p></td><td class="entry" align="left" valign="top"><p>Used total memory percentage</p></td><td class="entry" align="left" valign="top"><p>47</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ram.max</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">rm</code>, <code class="literal">ramMax</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Total memory</p></td><td class="entry" align="left" valign="top"><p>2.9gb</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">file_desc.current</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">fdc</code>, <code class="literal">fileDescriptorCurrent</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Used file
descriptors</p></td><td class="entry" align="left" valign="top"><p>123</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">file_desc.percent</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">fdp</code>, <code class="literal">fileDescriptorPercent</code></p></td><td class="entry" align="left" valign="top"><p>Yes</p></td><td class="entry" align="left" valign="top"><p>Used file
descriptors percentage</p></td><td class="entry" align="left" valign="top"><p>1</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">file_desc.max</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">fdm</code>, <code class="literal">fileDescriptorMax</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Maximum number of file
descriptors</p></td><td class="entry" align="left" valign="top"><p>1024</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">load</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">l</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Most recent load average</p></td><td class="entry" align="left" valign="top"><p>0.22</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">uptime</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">u</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Node uptime</p></td><td class="entry" align="left" valign="top"><p>17.3m</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">node.role</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">r</code>, <code class="literal">role</code>, <code class="literal">dc</code>, <code class="literal">nodeRole</code></p></td><td class="entry" align="left" valign="top"><p>Yes</p></td><td class="entry" align="left" valign="top"><p>Data node (d); Client
node (c)</p></td><td class="entry" align="left" valign="top"><p>d</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">master</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">m</code></p></td><td class="entry" align="left" valign="top"><p>Yes</p></td><td class="entry" align="left" valign="top"><p>Current master (*); master eligible (m)</p></td><td class="entry" align="left" valign="top"><p>m</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">name</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">n</code></p></td><td class="entry" align="left" valign="top"><p>Yes</p></td><td class="entry" align="left" valign="top"><p>Node name</p></td><td class="entry" align="left" valign="top"><p>Venom</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">completion.size</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">cs</code>, <code class="literal">completionSize</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Size of completion</p></td><td class="entry" align="left" valign="top"><p>0b</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">fielddata.memory_size</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">fm</code>, <code class="literal">fielddataMemory</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Used fielddata
cache memory</p></td><td class="entry" align="left" valign="top"><p>0b</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">fielddata.evictions</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">fe</code>, <code class="literal">fielddataEvictions</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Fielddata cache
evictions</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">filter_cache.memory_size</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">fcm</code>, <code class="literal">filterCacheMemory</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Used filter
cache memory</p></td><td class="entry" align="left" valign="top"><p>0b</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">filter_cache.evictions</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">fce</code>, <code class="literal">filterCacheEvictions</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Filter
cache evictions</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">flush.total</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">ft</code>, <code class="literal">flushTotal</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of flushes</p></td><td class="entry" align="left" valign="top"><p>1</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">flush.total_time</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">ftt</code>, <code class="literal">flushTotalTime</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Time spent in flush</p></td><td class="entry" align="left" valign="top"><p>1</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">get.current</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">gc</code>, <code class="literal">getCurrent</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of current get
operations</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">get.time</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">gti</code>, <code class="literal">getTime</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Time spent in get</p></td><td class="entry" align="left" valign="top"><p>14ms</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">get.total</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">gto</code>, <code class="literal">getTotal</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of get operations</p></td><td class="entry" align="left" valign="top"><p>2</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">get.exists_time</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">geti</code>, <code class="literal">getExistsTime</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Time spent in
successful gets</p></td><td class="entry" align="left" valign="top"><p>14ms</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">get.exists_total</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">geto</code>, <code class="literal">getExistsTotal</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of successful
get operations</p></td><td class="entry" align="left" valign="top"><p>2</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">get.missing_time</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">gmti</code>, <code class="literal">getMissingTime</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Time spent in failed
gets</p></td><td class="entry" align="left" valign="top"><p>0s</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">get.missing_total</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">gmto</code>, <code class="literal">getMissingTotal</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of failed
get operations</p></td><td class="entry" align="left" valign="top"><p>1</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">id_cache.memory_size</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">im</code>, <code class="literal">idCacheMemory</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Used ID cache
memory</p></td><td class="entry" align="left" valign="top"><p>216b</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">indexing.delete_current</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">idc</code>, <code class="literal">indexingDeleteCurrent</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number
of current deletion operations</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">indexing.delete_time</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">idti</code>, <code class="literal">indexingDeleteTime</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Time spent in
deletions</p></td><td class="entry" align="left" valign="top"><p>2ms</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">indexing.delete_total</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">idto</code>, <code class="literal">indexingDeleteTotal</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of
deletion operations</p></td><td class="entry" align="left" valign="top"><p>2</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">indexing.index_current</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">iic</code>, <code class="literal">indexingIndexCurrent</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number
of current indexing operations</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">indexing.index_time</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">iiti</code>, <code class="literal">indexingIndexTime</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Time spent in
indexing</p></td><td class="entry" align="left" valign="top"><p>134ms</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">indexing.index_total</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">iito</code>, <code class="literal">indexingIndexTotal</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of
indexing operations</p></td><td class="entry" align="left" valign="top"><p>1</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">merges.current</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">mc</code>, <code class="literal">mergesCurrent</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of current
merge operations</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">merges.current_docs</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">mcd</code>, <code class="literal">mergesCurrentDocs</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of
current merging documents</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">merges.current_size</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">mcs</code>, <code class="literal">mergesCurrentSize</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Size of current
merges</p></td><td class="entry" align="left" valign="top"><p>0b</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">merges.total</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">mt</code>, <code class="literal">mergesTotal</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of completed merge
operations</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">merges.total_docs</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">mtd</code>, <code class="literal">mergesTotalDocs</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of merged
documents</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">merges.total_size</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">mts</code>, <code class="literal">mergesTotalSize</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Size of current
merges</p></td><td class="entry" align="left" valign="top"><p>0b</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">merges.total_time</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">mtt</code>, <code class="literal">mergesTotalTime</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Time spent merging
documents</p></td><td class="entry" align="left" valign="top"><p>0s</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">percolate.current</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">pc</code>, <code class="literal">percolateCurrent</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of current
percolations</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">percolate.memory_size</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">pm</code>, <code class="literal">percolateMemory</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Memory used by
current percolations</p></td><td class="entry" align="left" valign="top"><p>0b</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">percolate.queries</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">pq</code>, <code class="literal">percolateQueries</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of
registered percolation queries</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">percolate.time</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">pti</code>, <code class="literal">percolateTime</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Time spent
percolating</p></td><td class="entry" align="left" valign="top"><p>0s</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">percolate.total</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">pto</code>, <code class="literal">percolateTotal</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Total percolations</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">refresh.total</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">rto</code>, <code class="literal">refreshTotal</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of refreshes</p></td><td class="entry" align="left" valign="top"><p>16</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">refresh.time</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">rti</code>, <code class="literal">refreshTime</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Time spent in refreshes</p></td><td class="entry" align="left" valign="top"><p>91ms</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">search.fetch_current</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">sfc</code>, <code class="literal">searchFetchCurrent</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Current fetch
phase operations</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">search.fetch_time</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">sfti</code>, <code class="literal">searchFetchTime</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Time spent in fetch
phase</p></td><td class="entry" align="left" valign="top"><p>37ms</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">search.fetch_total</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">sfto</code>, <code class="literal">searchFetchTotal</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of fetch
operations</p></td><td class="entry" align="left" valign="top"><p>7</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">search.open_contexts</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">so</code>, <code class="literal">searchOpenContexts</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Open search
contexts</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">search.query_current</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">sqc</code>, <code class="literal">searchFetchCurrent</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Current query
phase operations</p></td><td class="entry" align="left" valign="top"><p>0</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">search.query_time</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">sqti</code>, <code class="literal">searchFetchTime</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Time spent in query
phase</p></td><td class="entry" align="left" valign="top"><p>43ms</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">search.query_total</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">sqto</code>, <code class="literal">searchFetchTotal</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of query
operations</p></td><td class="entry" align="left" valign="top"><p>9</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">segments.count</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">sc</code>, <code class="literal">segmentsCount</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Number of segments</p></td><td class="entry" align="left" valign="top"><p>4</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">segments.memory</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">sm</code>, <code class="literal">segmentsMemory</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Memory used by
segments</p></td><td class="entry" align="left" valign="top"><p>1.4kb</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">segments.index_writer_memory</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">siwm</code>, <code class="literal">segmentsIndexWriterMemory</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Memory used by index writer</p></td><td class="entry" align="left" valign="top"><p>18mb</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">segments.index_writer_max_memory</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">siwmx</code>, <code class="literal">segmentsIndexWriterMaxMemory</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Maximum memory index writer may use before it must write buffered documents to a new segment</p></td><td class="entry" align="left" valign="top"><p>32mb</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">segments.version_map_memory</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">svmm</code>, <code class="literal">segmentsVersionMapMemory</code></p></td><td class="entry" align="left" valign="top"><p>No</p></td><td class="entry" align="left" valign="top"><p>Memory used by version map</p></td><td class="entry" align="left" valign="top"><p>1.0kb</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-node">cat pending tasks</span></div><div class="navheader"><span class="prev"><a href="cat-nodes.html">
              &nbsp;
              cat nodes</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat-plugins.html">cat plugins
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cat-pending-tasks"></a>cat pending tasks</h2></div></div></div><p><code class="literal">pending_tasks</code> provides the same information as the
<a class="link" href="cluster-pending.html" title="Pending cluster tasks"><code class="literal">/_cluster/pending_tasks</code></a> API in a
convenient tabular format.</p><div class="pre_wrapper"><pre class="programlisting">% curl 'localhost:9200/_cat/pending_tasks?v'
insertOrder timeInQueue priority source
       1685       855ms HIGH     update-mapping [foo][t]
       1686       843ms HIGH     update-mapping [foo][t]
       1693       753ms HIGH     refresh-mapping [foo][[t]]
       1688       816ms HIGH     update-mapping [foo][t]
       1689       802ms HIGH     update-mapping [foo][t]
       1690       787ms HIGH     update-mapping [foo][t]
       1691       773ms HIGH     update-mapping [foo][t]</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-node">cat plugins</span></div><div class="navheader"><span class="prev"><a href="cat-pending-tasks.html">
              &nbsp;
              cat pending tasks</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat-recovery.html">cat recovery
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cat-plugins"></a>cat plugins</h2></div></div></div><p>The <code class="literal">plugins</code> command provides a view per node of running plugins. This information <span class="strong emphasis"><strong>spans nodes</strong></span>.</p><div class="pre_wrapper"><pre class="programlisting">% curl 'localhost:9200/_cat/plugins?v'
name    component       version        type isolation url
Abraxas cloud-azure     2.1.0-SNAPSHOT j    x
Abraxas lang-groovy     2.0.0          j    x
Abraxas lang-javascript 2.0.0-SNAPSHOT j    x
Abraxas marvel          NA             j/s  x         /_plugin/marvel/
Abraxas lang-python     2.0.0-SNAPSHOT j    x
Abraxas inquisitor      NA             s              /_plugin/inquisitor/
Abraxas kopf            0.5.2          s              /_plugin/kopf/
Abraxas segmentspy      NA             s              /_plugin/segmentspy/</pre></div><p>We can tell quickly how many plugins per node we have and which versions.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-node">cat recovery</span></div><div class="navheader"><span class="prev"><a href="cat-plugins.html">
              &nbsp;
              cat plugins</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat-thread-pool.html">cat thread pool
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cat-recovery"></a>cat recovery</h2></div></div></div><p>The <code class="literal">recovery</code> command is a view of index shard recoveries, both on-going and previously
completed. It is a more compact view of the JSON <a class="link" href="indices-recovery.html" title="Indices Recovery">recovery</a> API.</p><p>A recovery event occurs anytime an index shard moves to a different node in the cluster.
This can happen during a snapshot recovery, a change in replication level, node failure, or
on node startup. This last type is called a local gateway recovery and is the normal
way for shards to be loaded from disk when a node starts up.</p><p>As an example, here is what the recovery state of a cluster may look like when there
are no shards in transit from one node to another:</p><div class="pre_wrapper"><pre class="programlisting">&gt; curl -XGET 'localhost:9200/_cat/recovery?v'
index shard time type    stage source target files percent bytes     percent
wiki  0     73   gateway done  hostA  hostA  36    100.0%  24982806 100.0%
wiki  1     245  gateway done  hostA  hostA  33    100.0%  24501912 100.0%
wiki  2     230  gateway done  hostA  hostA  36    100.0%  30267222 100.0%</pre></div><p>In the above case, the source and target nodes are the same because the recovery
type was gateway, i.e. they were read from local storage on node start.</p><p>Now lets see what a live recovery looks like. By increasing the replica count
of our index and bringing another node online to host the replicas, we can see
what a live shard recovery looks like.</p><div class="pre_wrapper"><pre class="programlisting">&gt; curl -XPUT 'localhost:9200/wiki/_settings' -d'{"number_of_replicas":1}'
{"acknowledged":true}

&gt; curl -XGET 'localhost:9200/_cat/recovery?v'
index shard time type    stage source target files percent bytes    percent
wiki  0     1252 gateway done  hostA  hostA  4     100.0%  23638870 100.0%
wiki  0     1672 replica index hostA  hostB  4     75.0%   23638870 48.8%
wiki  1     1698 replica index hostA  hostB  4     75.0%   23348540 49.4%
wiki  1     4812 gateway done  hostA  hostA  33    100.0%  24501912 100.0%
wiki  2     1689 replica index hostA  hostB  4     75.0%   28681851 40.2%
wiki  2     5317 gateway done  hostA  hostA  36    100.0%  30267222 100.0%</pre></div><p>We can see in the above listing that our 3 initial shards are in various stages
of being replicated from one node to another. Notice that the recovery type is
shown as <code class="literal">replica</code>. The files and bytes copied are real-time measurements.</p><p>Finally, lets see what a snapshot recovery looks like. Assuming I have previously
made a backup of my index, I can restore it using the <a class="link" href="modules-snapshots.html" title="Snapshot And Restore">snapshot and restore</a>
API.</p><div class="pre_wrapper"><pre class="programlisting">&gt; curl -XPOST 'localhost:9200/_snapshot/imdb/snapshot_2/_restore'
{"acknowledged":true}
&gt; curl -XGET 'localhost:9200/_cat/recovery?v'
index shard time type     stage repository snapshot files percent bytes percent
imdb  0     1978 snapshot done  imdb       snap_1   79    8.0%    12086 9.0%
imdb  1     2790 snapshot index imdb       snap_1   88    7.7%    11025 8.1%
imdb  2     2790 snapshot index imdb       snap_1   85    0.0%    12072 0.0%
imdb  3     2796 snapshot index imdb       snap_1   85    2.4%    12048 7.2%
imdb  4     819  snapshot init  imdb       snap_1   0     0.0%    0     0.0%</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-node">cat thread pool</span></div><div class="navheader"><span class="prev"><a href="cat-recovery.html">
              &nbsp;
              cat recovery</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat-shards.html">cat shards
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cat-thread-pool"></a>cat thread pool</h2></div></div></div><p>The <code class="literal">thread_pool</code> command shows cluster wide thread pool statistics per node. By default the active, queue and rejected
statistics are returned for the bulk, index and search thread pools.</p><div class="pre_wrapper"><pre class="programlisting">% curl 192.168.56.10:9200/_cat/thread_pool
host1 192.168.1.35 0 0 0 0 0 0 0 0 0
host2 192.168.1.36 0 0 0 0 0 0 0 0 0</pre></div><p>The first two columns contain the host and ip of a node.</p><div class="pre_wrapper"><pre class="programlisting">host      ip
host1 192.168.1.35
host2 192.168.1.36</pre></div><p>The next three columns show the active queue and rejected statistics for the bulk thread pool.</p><div class="pre_wrapper"><pre class="programlisting">bulk.active bulk.queue bulk.rejected
          0          0             0</pre></div><p>The remaining columns show the active queue and rejected statistics of the index and search thread pool respectively.</p><p>Also other statistics of different thread pools can be retrieved by using the <code class="literal">h</code> (header) parameter.</p><div class="pre_wrapper"><pre class="programlisting">% curl 'localhost:9200/_cat/thread_pool?v&amp;h=id,host,suggest.active,suggest.rejected,suggest.completed'
host      suggest.active suggest.rejected suggest.completed
host1                  0                0                 0
host2                  0                0                 0</pre></div><p>Here the host columns and the active, rejected and completed suggest thread pool statistic are displayed. The suggest
thread pool wont be displayed by default, so you always need to be specific about what statistic you want to display.</p><h3><a id="_available_thread_pools"></a>Available Thread Pools</h3><p>Currently available <a class="link" href="modules-threadpool.html" title="Thread Pool">thread pools</a>:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th class="entry" align="left" valign="top">Thread Pool </th><th class="entry" align="left" valign="top">Alias </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">bulk</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">b</code></p></td><td class="entry" align="left" valign="top"><p>Thread pool used for <a class="link" href="docs-bulk.html" title="Bulk API">bulk</a> operations</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">flush</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">f</code></p></td><td class="entry" align="left" valign="top"><p>Thread pool used for <a class="link" href="indices-flush.html" title="Flush">flush</a> operations</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">generic</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">ge</code></p></td><td class="entry" align="left" valign="top"><p>Thread pool used for generic operations (e.g. background node discovery)</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">get</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">g</code></p></td><td class="entry" align="left" valign="top"><p>Thread pool used for <a class="link" href="docs-get.html" title="Get API">get</a> operations</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">index</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">i</code></p></td><td class="entry" align="left" valign="top"><p>Thread pool used for <a class="link" href="docs-index_.html" title="Index API">index</a>/<a class="link" href="docs-delete.html" title="Delete API">delete</a> operations</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">management</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">ma</code></p></td><td class="entry" align="left" valign="top"><p>Thread pool used for management of Elasticsearch (e.g. cluster management)</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">merge</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">m</code></p></td><td class="entry" align="left" valign="top"><p>Thread pool used for <a class="link" href="index-modules-merge.html" title="Merge">merge</a> operations</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">optimize</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">o</code></p></td><td class="entry" align="left" valign="top"><p>Thread pool used for <a class="link" href="indices-optimize.html" title="Optimize">optimize</a> operations</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">percolate</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">p</code></p></td><td class="entry" align="left" valign="top"><p>Thread pool used for <a class="link" href="search-percolate.html" title="Percolator">percolator</a> operations</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">refresh</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">r</code></p></td><td class="entry" align="left" valign="top"><p>Thread pool used for <a class="link" href="indices-refresh.html" title="Refresh">refresh</a> operations</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">search</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">s</code></p></td><td class="entry" align="left" valign="top"><p>Thread pool used for <a class="link" href="search-search.html" title="Search">search</a>/<a class="link" href="search-count.html" title="Count API">count</a> operations</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">snapshot</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">sn</code></p></td><td class="entry" align="left" valign="top"><p>Thread pool used for <a class="link" href="modules-snapshots.html" title="Snapshot And Restore">snapshot</a> operations</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">suggest</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">su</code></p></td><td class="entry" align="left" valign="top"><p>Thread pool used for <a class="link" href="search-suggesters.html" title="Suggesters">suggester</a> operations</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">warmer</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">w</code></p></td><td class="entry" align="left" valign="top"><p>Thread pool used for <a class="link" href="indices-warmers.html" title="Warmers">index warm-up</a> operations</p></td></tr></tbody></table></div><p>The thread pool name (or alias) must be combined with a thread pool field below
to retrieve the requested information.</p><h4><a id="_thread_pool_fields"></a>Thread Pool Fields</h4><p>For each thread pool, you can load details about it by using the field names
in the table below, either using the full field name (e.g. <code class="literal">bulk.active</code>) or
its alias (e.g. <code class="literal">sa</code> is equivalent to <code class="literal">search.active</code>).</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th class="entry" align="left" valign="top">Field Name </th><th class="entry" align="left" valign="top">Alias </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">type</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">t</code></p></td><td class="entry" align="left" valign="top"><p>The current (*) type of thread pool (<code class="literal">cached</code>, <code class="literal">fixed</code> or <code class="literal">scaling</code>)</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">active</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">a</code></p></td><td class="entry" align="left" valign="top"><p>The number of active threads in the current thread pool</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">size</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">s</code></p></td><td class="entry" align="left" valign="top"><p>The number of threads in the current thread pool</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">queue</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">q</code></p></td><td class="entry" align="left" valign="top"><p>The number of tasks in the queue for the current thread pool</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">queueSize</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">qs</code></p></td><td class="entry" align="left" valign="top"><p>The maximum number of tasks in the queue for the current thread pool</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">rejected</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">r</code></p></td><td class="entry" align="left" valign="top"><p>The number of rejected threads in the current thread pool</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">largest</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">l</code></p></td><td class="entry" align="left" valign="top"><p>The highest number of active threads in the current thread pool</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">completed</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">c</code></p></td><td class="entry" align="left" valign="top"><p>The number of completed threads in the current thread pool</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">min</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">mi</code></p></td><td class="entry" align="left" valign="top"><p>The configured minimum number of active threads allowed in the current thread pool</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">max</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">ma</code></p></td><td class="entry" align="left" valign="top"><p>The configured maximum number of active threads allowed in the current thread pool</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">keepAlive</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">k</code></p></td><td class="entry" align="left" valign="top"><p>The configured keep alive time for threads</p></td></tr></tbody></table></div><h3><a id="_other_fields"></a>Other Fields</h3><p>In addition to details about each thread pool, it is also convenient to get an
understanding of where those thread pools reside.  As such, you can request
other details like the <code class="literal">ip</code> of the responding node(s).</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th class="entry" align="left" valign="top">Field Name </th><th class="entry" align="left" valign="top">Alias </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">id</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">nodeId</code></p></td><td class="entry" align="left" valign="top"><p>The unique node ID</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">pid</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">p</code></p></td><td class="entry" align="left" valign="top"><p>The process ID of the running node</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">host</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">h</code></p></td><td class="entry" align="left" valign="top"><p>The hostname for the current node</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ip</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">i</code></p></td><td class="entry" align="left" valign="top"><p>The IP address for the current node</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">port</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">po</code></p></td><td class="entry" align="left" valign="top"><p>The bound transport port for the current node</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-node">cat shards</span></div><div class="navheader"><span class="prev"><a href="cat-thread-pool.html">
              &nbsp;
              cat thread pool</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="index-pattern.html">Index pattern
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cat-shards"></a>cat shards</h2></div></div></div><p>The <code class="literal">shards</code> command is the detailed view of what nodes contain which
shards.  It will tell you if its a primary or replica, the number of
docs, the bytes it takes on disk, and the node where its located.</p><p>Here we see a single index, with three primary shards and no replicas:</p><div class="pre_wrapper"><pre class="programlisting">% curl 192.168.56.20:9200/_cat/shards
wiki1 0 p STARTED 3014 31.1mb 192.168.56.10 Stiletto
wiki1 1 p STARTED 3013 29.6mb 192.168.56.30 Frankie Raye
wiki1 2 p STARTED 3973 38.1mb 192.168.56.20 Commander Kraken</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-link"><a href="cat-shards.html">cat shards</a></span>  <span class="breadcrumb-node">Index pattern</span></div><div class="navheader"><span class="prev"><a href="cat-shards.html">
              &nbsp;
              cat shards</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="relocation.html">Relocation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="index-pattern"></a>Index pattern</h2></div></div></div><p>If you have many shards, you may wish to limit which indices show up
in the output.  You can always do this with <code class="literal">grep</code>, but you can save
some bandwidth by supplying an index pattern to the end.</p><div class="pre_wrapper"><pre class="programlisting">% curl 192.168.56.20:9200/_cat/shards/wiki2
wiki2 0 p STARTED 197 3.2mb 192.168.56.10 Stiletto
wiki2 1 p STARTED 205 5.9mb 192.168.56.30 Frankie Raye
wiki2 2 p STARTED 275 7.8mb 192.168.56.20 Commander Kraken</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-link"><a href="cat-shards.html">cat shards</a></span>  <span class="breadcrumb-node">Relocation</span></div><div class="navheader"><span class="prev"><a href="index-pattern.html">
              &nbsp;
              Index pattern</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="states.html">Shard states
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="relocation"></a>Relocation</h2></div></div></div><p>Lets say youve checked your health and you see two relocating
shards.  Where are they from and where are they going?</p><div class="pre_wrapper"><pre class="programlisting">% curl 192.168.56.10:9200/_cat/health
1384315316 20:01:56 foo green 3 3 12 6 2 0 0
% curl 192.168.56.10:9200/_cat/shards | fgrep RELO
wiki1 0 r RELOCATING 3014 31.1mb 192.168.56.20 Commander Kraken -&gt; 192.168.56.30 Frankie Raye
wiki1 1 r RELOCATING 3013 29.6mb 192.168.56.10 Stiletto -&gt; 192.168.56.30 Frankie Raye</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-link"><a href="cat-shards.html">cat shards</a></span>  <span class="breadcrumb-node">Shard states</span></div><div class="navheader"><span class="prev"><a href="relocation.html">
              &nbsp;
              Relocation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cat-segments.html">cat segments
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="states"></a>Shard states</h2></div></div></div><p>Before a shard can be used, it goes through an <code class="literal">INITIALIZING</code> state.
<code class="literal">shards</code> can show you which ones.</p><div class="pre_wrapper"><pre class="programlisting">% curl -XPUT 192.168.56.20:9200/_settings -d'{"number_of_replicas":1}'
{"acknowledged":true}
% curl 192.168.56.20:9200/_cat/shards
wiki1 0 p STARTED      3014 31.1mb 192.168.56.10 Stiletto
wiki1 0 r INITIALIZING    0 14.3mb 192.168.56.30 Frankie Raye
wiki1 1 p STARTED      3013 29.6mb 192.168.56.30 Frankie Raye
wiki1 1 r INITIALIZING    0 13.1mb 192.168.56.20 Commander Kraken
wiki1 2 r INITIALIZING    0   14mb 192.168.56.10 Stiletto
wiki1 2 p STARTED      3973 38.1mb 192.168.56.20 Commander Kraken</pre></div><p>If a shard cannot be assigned, for example youve overallocated the
number of replicas for the number of nodes in the cluster, they will
remain <code class="literal">UNASSIGNED</code>.</p><div class="pre_wrapper"><pre class="programlisting">% curl -XPUT 192.168.56.20:9200/_settings -d'{"number_of_replicas":3}'
% curl 192.168.56.20:9200/_cat/health
1384316325 20:18:45 foo yellow 3 3 9 3 0 0 3
% curl 192.168.56.20:9200/_cat/shards
wiki1 0 p STARTED    3014 31.1mb 192.168.56.10 Stiletto
wiki1 0 r STARTED    3014 31.1mb 192.168.56.30 Frankie Raye
wiki1 0 r STARTED    3014 31.1mb 192.168.56.20 Commander Kraken
wiki1 0 r UNASSIGNED
wiki1 1 r STARTED    3013 29.6mb 192.168.56.10 Stiletto
wiki1 1 p STARTED    3013 29.6mb 192.168.56.30 Frankie Raye
wiki1 1 r STARTED    3013 29.6mb 192.168.56.20 Commander Kraken
wiki1 1 r UNASSIGNED
wiki1 2 r STARTED    3973 38.1mb 192.168.56.10 Stiletto
wiki1 2 r STARTED    3973 38.1mb 192.168.56.30 Frankie Raye
wiki1 2 p STARTED    3973 38.1mb 192.168.56.20 Commander Kraken
wiki1 2 r UNASSIGNED</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cat.html">cat APIs</a></span>  <span class="breadcrumb-node">cat segments</span></div><div class="navheader"><span class="prev"><a href="states.html">
              &nbsp;
              Shard states</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cluster.html">Cluster APIs
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cat-segments"></a>cat segments</h2></div></div></div><p>The <code class="literal">segments</code> command provides low level information about the segments
in the shards of an index. It provides information similar to the
<a class="ulink" href="indices-segments.html" target="_top">_segments</a> endpoint.</p><div class="pre_wrapper"><pre class="programlisting">% curl 'http://localhost:9200/_cat/segments?v'
index shard prirep ip            segment generation docs.count [...]
test  4     p      192.168.2.105 _0               0          1
test1 2     p      192.168.2.105 _0               0          1
test1 3     p      192.168.2.105 _2               2          1</pre></div><div class="pre_wrapper"><pre class="programlisting">[...] docs.deleted  size size.memory committed searchable version compound
                 0 2.9kb        7818 false     true       4.10.2  true
                 0 2.9kb        7818 false     true       4.10.2  true
                 0 2.9kb        7818 false     true       4.10.2  true</pre></div><p>The output shows information about index names and shard numbers in the first
two columns.</p><p>If you only want to get information about segments in one particular index,
you can add the index name in the URL, for example <code class="literal">/_cat/segments/test</code>. Also,
several indexes can be queried like <code class="literal">/_cat/segments/test,test1</code></p><p>The following columns provide additional monitoring information:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
prirep
</span></dt><dd>
Whether this segment belongs to a primary or replica shard.
</dd><dt><span class="term">
ip
</span></dt><dd>
The ip address of the segments shard.
</dd><dt><span class="term">
segment
</span></dt><dd>
A segment name, derived from the segment generation. The name
                is internally used to generate the file names in the directory
                of the shard this segment belongs to.
</dd><dt><span class="term">
generation
</span></dt><dd>
The generation number is incremented with each segment that is written.
                The name of the segment is derived from this generation number.
</dd><dt><span class="term">
docs.count
</span></dt><dd>
The number of non-deleted documents that are stored in this segment.
</dd><dt><span class="term">
docs.deleted
</span></dt><dd>
The number of deleted documents that are stored in this segment.
                It is perfectly fine if this number is greater than 0, space is
                going to be reclaimed when this segment gets merged.
</dd><dt><span class="term">
size
</span></dt><dd>
The amount of disk space that this segment uses.
</dd><dt><span class="term">
size.memory
</span></dt><dd>
Segments store some data into memory in order to be searchable efficiently.
                This column shows the number of bytes in memory that are used.
</dd><dt><span class="term">
committed
</span></dt><dd>
Whether the segment has been synced on disk. Segments that are
                committed would survive a hard reboot. No need to worry in case
                of false, the data from uncommitted segments is also stored in
                the transaction log so that Elasticsearch is able to replay
                changes on the next start.
</dd><dt><span class="term">
searchable
</span></dt><dd>
True if the segment is searchable. A value of false would most
                likely mean that the segment has been written to disk but no
                refresh occurred since then to make it searchable.
</dd><dt><span class="term">
version
</span></dt><dd>
The version of Lucene that has been used to write this segment.
</dd><dt><span class="term">
compound
</span></dt><dd>
Whether the segment is stored in a compound file. When true, this
                means that Lucene merged all files from the segment in a single
                one in order to save file descriptors.
</dd></dl></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">Cluster APIs</span></div><div class="navheader"><span class="prev"><a href="cat-segments.html">
              &nbsp;
              cat segments</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cluster-health.html">Cluster Health
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="cluster"></a>Cluster APIs</h1></div></div></div><div class="partintro"><div></div><h2><a id="cluster-nodes"></a>Node specification</h2><p>Most cluster level APIs allow to specify which nodes to execute on (for
example, getting the node stats for a node). Nodes can be identified in
the APIs either using their internal node id, the node name, address,
custom attributes, or just the <code class="literal">_local</code> node receiving the request. For
example, here are some sample executions of nodes info:</p><div class="pre_wrapper"><pre class="programlisting"># Local
curl localhost:9200/_nodes/_local
# Address
curl localhost:9200/_nodes/10.0.0.3,10.0.0.4
curl localhost:9200/_nodes/10.0.0.*
# Names
curl localhost:9200/_nodes/node_name_goes_here
curl localhost:9200/_nodes/node_name_goes_*
# Attributes (set something like node.rack: 2 in the config)
curl localhost:9200/_nodes/rack:2
curl localhost:9200/_nodes/ra*:2
curl localhost:9200/_nodes/ra*:2*</pre></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span>  <span class="breadcrumb-node">Cluster Health</span></div><div class="navheader"><span class="prev"><a href="cluster.html">
              &nbsp;
              Cluster APIs</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cluster-state.html">Cluster State
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cluster-health"></a>Cluster Health</h2></div></div></div><p>The cluster health API allows to get a very simple status on the health
of the cluster.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/_cluster/health?pretty=true'
{
  "cluster_name" : "testcluster",
  "status" : "green",
  "timed_out" : false,
  "number_of_nodes" : 2,
  "number_of_data_nodes" : 2,
  "active_primary_shards" : 5,
  "active_shards" : 10,
  "relocating_shards" : 0,
  "initializing_shards" : 0,
  "unassigned_shards" : 0,
  "number_of_pending_tasks" : 0
}</pre></div><p>The API can also be executed against one or more indices to get just the
specified indices health:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/_cluster/health/test1,test2'</pre></div><p>The cluster health status is: <code class="literal">green</code>, <code class="literal">yellow</code> or <code class="literal">red</code>. On the shard
level, a <code class="literal">red</code> status indicates that the specific shard is not allocated
in the cluster, <code class="literal">yellow</code> means that the primary shard is allocated but
replicas are not, and <code class="literal">green</code> means that all shards are allocated. The
index level status is controlled by the worst shard status. The cluster
status is controlled by the worst index status.</p><p>One of the main benefits of the API is the ability to wait until the
cluster reaches a certain high water-mark health level. For example, the
following will wait for 50 seconds for the cluster to reach the <code class="literal">yellow</code>
level (if it reaches the <code class="literal">green</code> or <code class="literal">yellow</code> status before 50 seconds elapse,
it will return at that point):</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/_cluster/health?wait_for_status=yellow&amp;timeout=50s'</pre></div><h3><a id="request-params"></a>Request Parameters</h3><p>The cluster health API accepts the following request parameters:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">level</code>
</span></dt><dd>
    Can be one of <code class="literal">cluster</code>, <code class="literal">indices</code> or <code class="literal">shards</code>. Controls the
    details level of the health information returned. Defaults to <code class="literal">cluster</code>.
</dd><dt><span class="term">
<code class="literal">wait_for_status</code>
</span></dt><dd>
    One of <code class="literal">green</code>, <code class="literal">yellow</code> or <code class="literal">red</code>. Will wait (until
    the timeout provided) until the status of the cluster changes to the one
    provided or better, i.e. <code class="literal">green</code> &gt; <code class="literal">yellow</code> &gt; <code class="literal">red</code>. By default, will not
    wait for any status.
</dd><dt><span class="term">
<code class="literal">wait_for_relocating_shards</code>
</span></dt><dd>
    A number controlling to how many relocating
    shards to wait for. Usually will be <code class="literal">0</code> to indicate to wait till all
    relocations have happened. Defaults to not wait.
</dd><dt><span class="term">
<code class="literal">wait_for_active_shards</code>
</span></dt><dd>
    A number controlling to how many active
    shards to wait for. Defaults to not wait.
</dd><dt><span class="term">
<code class="literal">wait_for_nodes</code>
</span></dt><dd>
    The request waits until the specified number <code class="literal">N</code> of
    nodes is available. It also accepts <code class="literal">&gt;=N</code>, <code class="literal">&lt;=N</code>, <code class="literal">&gt;N</code> and <code class="literal">&lt;N</code>.
    Alternatively, it is possible to use <code class="literal">ge(N)</code>, <code class="literal">le(N)</code>, <code class="literal">gt(N)</code> and
    <code class="literal">lt(N)</code> notation.
</dd><dt><span class="term">
<code class="literal">timeout</code>
</span></dt><dd>
    A time based parameter controlling how long to wait if one of
    the wait_for_XXX are provided. Defaults to <code class="literal">30s</code>.
</dd></dl></div><p>The following is an example of getting the cluster health at the
<code class="literal">shards</code> level:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/_cluster/health/twitter?level=shards'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span>  <span class="breadcrumb-node">Cluster State</span></div><div class="navheader"><span class="prev"><a href="cluster-health.html">
              &nbsp;
              Cluster Health</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cluster-stats.html">Cluster Stats
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cluster-state"></a>Cluster State</h2></div></div></div><p>The cluster state API allows to get a comprehensive state information of
the whole cluster.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/_cluster/state'</pre></div><p>By default, the cluster state request is routed to the master node, to
ensure that the latest cluster state is returned.
For debugging purposes, you can retrieve the cluster state local to a
particular node by adding <code class="literal">local=true</code> to the  query string.</p><h3><a id="_response_filters"></a>Response Filters</h3><p>As the cluster state can grow (depending on the number of shards and indices, your mapping, templates),
it is possible to filter the cluster state response specifying the parts in the URL.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/_cluster/state/{metrics}/{indices}'</pre></div><p><code class="literal">metrics</code> can be a comma-separated list of</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">version</code>
</span></dt><dd>
    Shows the cluster state version.
</dd><dt><span class="term">
<code class="literal">master_node</code>
</span></dt><dd>
    Shows the elected <code class="literal">master_node</code> part of the response
</dd><dt><span class="term">
<code class="literal">nodes</code>
</span></dt><dd>
    Shows the <code class="literal">nodes</code> part of the response
</dd><dt><span class="term">
<code class="literal">routing_table</code>
</span></dt><dd>
    Shows the <code class="literal">routing_table</code> part of the response. If you supply a comma separated list of indices, the returned output will only contain the indices listed.
</dd><dt><span class="term">
<code class="literal">metadata</code>
</span></dt><dd>
    Shows the <code class="literal">metadata</code> part of the response. If you supply a comma separated list of indices, the returned output will only contain the indices listed.
</dd><dt><span class="term">
<code class="literal">blocks</code>
</span></dt><dd>
    Shows the <code class="literal">blocks</code> part of the response
</dd></dl></div><p>A couple of example calls:</p><div class="pre_wrapper"><pre class="programlisting"># return only metadata and routing_table data for specified indices
$ curl -XGET 'http://localhost:9200/_cluster/state/metadata,routing_table/foo,bar'

# return everything for these two indices
$ curl -XGET 'http://localhost:9200/_cluster/state/_all/foo,bar'

# Return only blocks data
$ curl -XGET 'http://localhost:9200/_cluster/state/blocks'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span>  <span class="breadcrumb-node">Cluster Stats</span></div><div class="navheader"><span class="prev"><a href="cluster-state.html">
              &nbsp;
              Cluster State</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cluster-pending.html">Pending cluster tasks
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cluster-stats"></a>Cluster Stats</h2></div></div></div><p>The Cluster Stats API allows to retrieve statistics from a cluster wide perspective.
The API returns basic index metrics (shard numbers, store size, memory usage) and
information about the current nodes that form the cluster (number, roles, os, jvm
versions, memory usage, cpu and installed plugins).</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/_cluster/stats?human&amp;pretty'</pre></div><p>Will return, for example:</p><div class="pre_wrapper"><pre class="programlisting">{
   "timestamp": 1439326129256,
   "cluster_name": "elasticsearch",
   "status": "green",
   "indices": {
      "count": 3,
      "shards": {
         "total": 35,
         "primaries": 15,
         "replication": 1.333333333333333,
         "index": {
            "shards": {
               "min": 10,
               "max": 15,
               "avg": 11.66666666666666
            },
            "primaries": {
               "min": 5,
               "max": 5,
               "avg": 5
            },
            "replication": {
               "min": 1,
               "max": 2,
               "avg": 1.3333333333333333
            }
         }
      },
      "docs": {
         "count": 2,
         "deleted": 0
      },
      "store": {
         "size": "5.6kb",
         "size_in_bytes": 5770,
         "throttle_time": "0s",
         "throttle_time_in_millis": 0
      },
      "fielddata": {
         "memory_size": "0b",
         "memory_size_in_bytes": 0,
         "evictions": 0
      },
      "filter_cache": {
         "memory_size": "0b",
         "memory_size_in_bytes": 0,
         "evictions": 0
      },
      "id_cache": {
         "memory_size": "0b",
         "memory_size_in_bytes": 0
      },
      "completion": {
         "size": "0b",
         "size_in_bytes": 0
      },
      "segments": {
         "count": 2,
         "memory": "6.4kb",
         "memory_in_bytes": 6596,
         "index_writer_memory": "0b",
         "index_writer_memory_in_bytes": 0,
         "index_writer_max_memory": "275.7mb",
         "index_writer_max_memory_in_bytes": 289194639,
         "version_map_memory": "0b",
         "version_map_memory_in_bytes": 0,
         "fixed_bit_set": "0b",
         "fixed_bit_set_memory_in_bytes": 0
      },
      "percolate": {
         "total": 0,
         "get_time": "0s",
         "time_in_millis": 0,
         "current": 0,
         "memory_size_in_bytes": -1,
         "memory_size": "-1b",
         "queries": 0
      }
   },
   "nodes": {
      "count": {
         "total": 2,
         "master_only": 0,
         "data_only": 0,
         "master_data": 2,
         "client": 0
      },
      "versions": [
         "1.7.6"
      ],
      "os": {
         "available_processors": 4,
         "mem": {
            "total": "8gb",
            "total_in_bytes": 8589934592
         },
         "cpu": [
            {
               "vendor": "Intel",
               "model": "MacBookAir5,2",
               "mhz": 2000,
               "total_cores": 4,
               "total_sockets": 4,
               "cores_per_socket": 16,
               "cache_size": "256b",
               "cache_size_in_bytes": 256,
               "count": 1
            }
         ]
      },
      "process": {
         "cpu": {
            "percent": 3
         },
         "open_file_descriptors": {
            "min": 200,
            "max": 346,
            "avg": 273
         }
      },
      "jvm": {
         "max_uptime": "24s",
         "max_uptime_in_millis": 24054,
         "versions": [
            {
               "version": "1.6.0_45",
               "vm_name": "Java HotSpot(TM) 64-Bit Server VM",
               "vm_version": "20.45-b01-451",
               "vm_vendor": "Apple Inc.",
               "count": 2
            }
         ],
         "mem": {
            "heap_used": "38.3mb",
            "heap_used_in_bytes": 40237120,
            "heap_max": "1.9gb",
            "heap_max_in_bytes": 2130051072
         },
         "threads": 89
      },
      "fs":
         {
            "total": "232.9gb",
            "total_in_bytes": 250140434432,
            "free": "31.3gb",
            "free_in_bytes": 33705881600,
            "available": "31.1gb",
            "available_in_bytes": 33443737600,
            "disk_reads": 21202753,
            "disk_writes": 27028840,
            "disk_io_op": 48231593,
            "disk_read_size": "528gb",
            "disk_read_size_in_bytes": 566980806656,
            "disk_write_size": "617.9gb",
            "disk_write_size_in_bytes": 663525366784,
            "disk_io_size": "1145.9gb",
            "disk_io_size_in_bytes": 1230506173440
       },
      "plugins": [
         // all plugins installed on nodes
         {
            "name": "inquisitor",
            "description": "",
            "url": "/_plugin/inquisitor/",
            "jvm": false,
            "site": true
         }
      ]
   }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span>  <span class="breadcrumb-node">Pending cluster tasks</span></div><div class="navheader"><span class="prev"><a href="cluster-stats.html">
              &nbsp;
              Cluster Stats</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cluster-reroute.html">Cluster Reroute
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cluster-pending"></a>Pending cluster tasks</h2></div></div></div><p>The pending cluster tasks API returns a list of any cluster-level changes
(e.g. create index, update mapping, allocate or fail shard) which have not yet
been executed.</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XGET 'http://localhost:9200/_cluster/pending_tasks'</pre></div><p>Usually this will return an empty list as cluster-level changes are usually
fast. However if there are tasks queued up, the output will look something
like this:</p><div class="pre_wrapper"><pre class="programlisting">{
   "tasks": [
      {
         "insert_order": 101,
         "priority": "URGENT",
         "source": "create-index [foo_9], cause [api]",
         "time_in_queue_millis": 86,
         "time_in_queue": "86ms"
      },
      {
         "insert_order": 46,
         "priority": "HIGH",
         "source": "shard-started ([foo_2][1], node[tMTocMvQQgGCkj7QDHl3OA], [P], s[INITIALIZING]), reason [after recovery from gateway]",
         "time_in_queue_millis": 842,
         "time_in_queue": "842ms"
      },
      {
         "insert_order": 45,
         "priority": "HIGH",
         "source": "shard-started ([foo_2][0], node[tMTocMvQQgGCkj7QDHl3OA], [P], s[INITIALIZING]), reason [after recovery from gateway]",
         "time_in_queue_millis": 858,
         "time_in_queue": "858ms"
      }
  ]
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span>  <span class="breadcrumb-node">Cluster Reroute</span></div><div class="navheader"><span class="prev"><a href="cluster-pending.html">
              &nbsp;
              Pending cluster tasks</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cluster-update-settings.html">Cluster Update Settings
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cluster-reroute"></a>Cluster Reroute</h2></div></div></div><p>The reroute command allows to explicitly execute a cluster reroute
allocation command including specific commands. For example, a shard can
be moved from one node to another explicitly, an allocation can be
canceled, or an unassigned shard can be explicitly allocated on a
specific node.</p><p>Here is a short example of how a simple reroute API call:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/_cluster/reroute' -d '{
    "commands" : [ {
        "move" :
            {
              "index" : "test", "shard" : 0,
              "from_node" : "node1", "to_node" : "node2"
            }
        },
        {
          "allocate" : {
              "index" : "test", "shard" : 1, "node" : "node3"
          }
        }
    ]
}'</pre></div><p>An important aspect to remember is the fact that once when an allocation
occurs, the cluster will aim at re-balancing its state back to an even
state. For example, if the allocation includes moving a shard from
<code class="literal">node1</code> to <code class="literal">node2</code>, in an <code class="literal">even</code> state, then another shard will be moved
from <code class="literal">node2</code> to <code class="literal">node1</code> to even things out.</p><p>The cluster can be set to disable allocations, which means that only the
explicitly allocations will be performed. Obviously, only once all
commands has been applied, the cluster will aim to be re-balance its
state.</p><p>Another option is to run the commands in <code class="literal">dry_run</code> (as a URI flag, or in
the request body). This will cause the commands to apply to the current
cluster state, and return the resulting cluster after the commands (and
re-balancing) has been applied.</p><p>If the <code class="literal">explain</code> parameter is specified, a detailed explanation of why the
commands could or could not be executed is returned.</p><p>The commands supported are:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">move</code>
</span></dt><dd>
    Move a started shard from one node to another node. Accepts
    <code class="literal">index</code> and <code class="literal">shard</code> for index name and shard number, <code class="literal">from_node</code> for the
    node to move the shard <code class="literal">from</code>, and <code class="literal">to_node</code> for the node to move the
    shard to.
</dd><dt><span class="term">
<code class="literal">cancel</code>
</span></dt><dd>
    Cancel allocation of a shard (or recovery). Accepts <code class="literal">index</code>
    and <code class="literal">shard</code> for index name and shard number, and <code class="literal">node</code> for the node to
    cancel the shard allocation on. It also accepts <code class="literal">allow_primary</code> flag to
    explicitly specify that it is allowed to cancel allocation for a primary
    shard.
</dd><dt><span class="term">
<code class="literal">allocate</code>
</span></dt><dd>
    Allocate an unassigned shard to a node. Accepts the
    <code class="literal">index</code> and <code class="literal">shard</code> for index name and shard number, and <code class="literal">node</code> to
    allocate the shard to. It also accepts <code class="literal">allow_primary</code> flag to
    explicitly specify that it is allowed to explicitly allocate a primary
    shard (might result in data loss).
</dd></dl></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>The <code class="literal">allow_primary</code> parameter will force a new <span class="emphasis"><em>empty</em></span> primary shard
to be allocated <span class="strong emphasis"><strong>without any data</strong></span>. If a node which has a copy of the original
primary shard (including data) rejoins the cluster later on, that data will be
deleted: the old shard copy will be replaced by the new live shard copy.</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span>  <span class="breadcrumb-node">Cluster Update Settings</span></div><div class="navheader"><span class="prev"><a href="cluster-reroute.html">
              &nbsp;
              Cluster Reroute</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cluster-nodes-stats.html">Nodes Stats
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cluster-update-settings"></a>Cluster Update Settings</h2></div></div></div><p>Allows to update cluster wide specific settings. Settings updated can
either be persistent (applied cross restarts) or transient (will not
survive a full cluster restart). Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_cluster/settings -d '{
    "persistent" : {
        "discovery.zen.minimum_master_nodes" : 2
    }
}'</pre></div><p>Or:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_cluster/settings -d '{
    "transient" : {
        "discovery.zen.minimum_master_nodes" : 2
    }
}'</pre></div><p>The cluster responds with the settings updated. So the response for the
last example will be:</p><div class="pre_wrapper"><pre class="programlisting">{
    "persistent" : {},
    "transient" : {
        "discovery.zen.minimum_master_nodes" : "2"
    }
}'</pre></div><p>Cluster wide settings can be returned using:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET localhost:9200/_cluster/settings</pre></div><p>There is a specific list of settings that can be updated, those include:</p><h3><a id="cluster-settings"></a>Cluster settings</h3><h4><a id="_routing_allocation"></a>Routing allocation</h4><h5><a id="_awareness"></a>Awareness</h5><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">cluster.routing.allocation.awareness.attributes</code>
</span></dt><dd>
     See <a class="xref" href="modules-cluster.html" title="Cluster"><em>Cluster</em></a>.
</dd><dt><span class="term">
<code class="literal">cluster.routing.allocation.awareness.force.*</code>
</span></dt><dd>
     See <a class="xref" href="modules-cluster.html" title="Cluster"><em>Cluster</em></a>.
</dd></dl></div><h5><a id="_balanced_shards"></a>Balanced Shards</h5><p>All these values are relative to one another.  The first three are used to
compose a three separate weighting functions into one.  The cluster is balanced
when no allowed action can bring the weights of each node closer together by
more then the fourth setting.  Actions might not be allowed, for instance,
due to forced awareness or allocation filtering.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">cluster.routing.allocation.balance.shard</code>
</span></dt><dd>
     Defines the weight factor for shards allocated on a node
     (float). Defaults to <code class="literal">0.45f</code>.  Raising this raises the tendency to
     equalize the number of shards across all nodes in the cluster.
</dd><dt><span class="term">
<code class="literal">cluster.routing.allocation.balance.index</code>
</span></dt><dd>
     Defines a factor to the number of shards per index allocated
      on a specific node (float). Defaults to <code class="literal">0.55f</code>.  Raising this raises the
      tendency to equalize the number of shards per index across all nodes in
      the cluster.
</dd><dt><span class="term">
<code class="literal">cluster.routing.allocation.balance.primary</code>
</span></dt><dd>
     Defines a weight factor for the number of primaries of a specific index
      allocated on a node (float). <code class="literal">0.00f</code>.  Raising this raises the tendency
      to equalize the number of primary shards across all nodes in the cluster. <span class="deprecated">
      [<span class="version">1.3.8</span>]
      <span class="detail">Deprecated in 1.3.8.
</span></span>
</dd><dt><span class="term">
<code class="literal">cluster.routing.allocation.balance.threshold</code>
</span></dt><dd>
     Minimal optimization value of operations that should be performed (non
      negative float). Defaults to <code class="literal">1.0f</code>.  Raising this will cause the cluster
      to be less aggressive about optimizing the shard balance.
</dd></dl></div><h5><a id="_concurrent_rebalance"></a>Concurrent Rebalance</h5><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">cluster.routing.allocation.cluster_concurrent_rebalance</code>
</span></dt><dd>
       Allow to control how many concurrent rebalancing of shards are
       allowed cluster wide, and default it to <code class="literal">2</code> (integer). <code class="literal">-1</code> for
       unlimited. See also <a class="xref" href="modules-cluster.html" title="Cluster"><em>Cluster</em></a>.
</dd></dl></div><h5><a id="_disable_allocation"></a>Disable allocation</h5><p>All the disable allocation settings have been deprecated in favour for
<code class="literal">cluster.routing.allocation.enable</code> setting.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">cluster.routing.allocation.disable_allocation</code>
</span></dt><dd>
     See <a class="xref" href="modules-cluster.html" title="Cluster"><em>Cluster</em></a>.
</dd><dt><span class="term">
<code class="literal">cluster.routing.allocation.disable_replica_allocation</code>
</span></dt><dd>
     See <a class="xref" href="modules-cluster.html" title="Cluster"><em>Cluster</em></a>.
</dd><dt><span class="term">
<code class="literal">cluster.routing.allocation.disable_new_allocation</code>
</span></dt><dd>
     See <a class="xref" href="modules-cluster.html" title="Cluster"><em>Cluster</em></a>.
</dd></dl></div><h5><a id="_enable_allocation"></a>Enable allocation</h5><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">cluster.routing.allocation.enable</code>
</span></dt><dd>
     See <a class="xref" href="modules-cluster.html" title="Cluster"><em>Cluster</em></a>.
</dd></dl></div><h5><a id="_throttling_allocation"></a>Throttling allocation</h5><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">cluster.routing.allocation.node_initial_primaries_recoveries</code>
</span></dt><dd>
     See <a class="xref" href="modules-cluster.html" title="Cluster"><em>Cluster</em></a>.
</dd><dt><span class="term">
<code class="literal">cluster.routing.allocation.node_concurrent_recoveries</code>
</span></dt><dd>
     See <a class="xref" href="modules-cluster.html" title="Cluster"><em>Cluster</em></a>.
</dd></dl></div><h5><a id="_filter_allocation"></a>Filter allocation</h5><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">cluster.routing.allocation.include.*</code>
</span></dt><dd>
     See <a class="xref" href="modules-cluster.html" title="Cluster"><em>Cluster</em></a>.
</dd><dt><span class="term">
<code class="literal">cluster.routing.allocation.exclude.*</code>
</span></dt><dd>
     See <a class="xref" href="modules-cluster.html" title="Cluster"><em>Cluster</em></a>.
</dd></dl></div><p><code class="literal">cluster.routing.allocation.require.*</code>
     See <a class="xref" href="modules-cluster.html" title="Cluster"><em>Cluster</em></a>.</p><h4><a id="_metadata"></a>Metadata</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">cluster.blocks.read_only</code>
</span></dt><dd>
      Have the whole cluster read only (indices do not accept write operations), metadata is not allowed to be modified (create or delete indices).
</dd></dl></div><h4><a id="_discovery"></a>Discovery</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">discovery.zen.minimum_master_nodes</code>
</span></dt><dd>
     See <a class="xref" href="modules-discovery-zen.html" title="Zen Discovery">Zen Discovery</a>
</dd><dt><span class="term">
<code class="literal">discovery.zen.publish_timeout</code>
</span></dt><dd>
     See <a class="xref" href="modules-discovery-zen.html" title="Zen Discovery">Zen Discovery</a>
</dd></dl></div><h4><a id="_threadpools"></a>Threadpools</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">threadpool.*</code>
</span></dt><dd>
     See <a class="xref" href="modules-threadpool.html" title="Thread Pool"><em>Thread Pool</em></a>
</dd></dl></div><h3><a id="cluster-index-settings"></a>Index settings</h3><h4><a id="_index_filter_cache"></a>Index filter cache</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">indices.cache.filter.size</code>
</span></dt><dd>
     See <a class="xref" href="index-modules-cache.html" title="Cache"><em>Cache</em></a>
</dd><dt><span class="term">
<code class="literal">indices.cache.filter.expire</code> (time)
</span></dt><dd>
     See <a class="xref" href="index-modules-cache.html" title="Cache"><em>Cache</em></a>
</dd></dl></div><h4><a id="_ttl_interval"></a>TTL interval</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">indices.ttl.interval</code> (time)
</span></dt><dd>
    See <a class="xref" href="mapping-ttl-field.html" title="_ttl"><code class="literal">_ttl</code></a>
</dd></dl></div><h4><a id="_recovery"></a>Recovery</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">indices.recovery.concurrent_streams</code>
</span></dt><dd>
     See <a class="xref" href="modules-indices.html" title="Indices"><em>Indices</em></a>
</dd><dt><span class="term">
<code class="literal">indices.recovery.concurrent_small_file_streams</code>
</span></dt><dd>
     See <a class="xref" href="modules-indices.html" title="Indices"><em>Indices</em></a>
</dd><dt><span class="term">
<code class="literal">indices.recovery.file_chunk_size</code>
</span></dt><dd>
     See <a class="xref" href="modules-indices.html" title="Indices"><em>Indices</em></a>
</dd><dt><span class="term">
<code class="literal">indices.recovery.translog_ops</code>
</span></dt><dd>
     See <a class="xref" href="modules-indices.html" title="Indices"><em>Indices</em></a>
</dd><dt><span class="term">
<code class="literal">indices.recovery.translog_size</code>
</span></dt><dd>
     See <a class="xref" href="modules-indices.html" title="Indices"><em>Indices</em></a>
</dd><dt><span class="term">
<code class="literal">indices.recovery.compress</code>
</span></dt><dd>
     See <a class="xref" href="modules-indices.html" title="Indices"><em>Indices</em></a>
</dd><dt><span class="term">
<code class="literal">indices.recovery.max_bytes_per_sec</code>
</span></dt><dd>
     See <a class="xref" href="modules-indices.html" title="Indices"><em>Indices</em></a>
</dd></dl></div><h4><a id="_store_level_throttling"></a>Store level throttling</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">indices.store.throttle.type</code>
</span></dt><dd>
      See <a class="xref" href="index-modules-store.html" title="Store"><em>Store</em></a>
</dd><dt><span class="term">
<code class="literal">indices.store.throttle.max_bytes_per_sec</code>
</span></dt><dd>
      See <a class="xref" href="index-modules-store.html" title="Store"><em>Store</em></a>
</dd></dl></div><h3><a id="logger"></a>Logger</h3><p>Logger values can also be updated by setting <code class="literal">logger.</code> prefix. More
settings will be allowed to be updated.</p><h3><a id="_field_data_circuit_breaker"></a>Field data circuit breaker</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">indices.breaker.fielddata.limit</code>
</span></dt><dd>
     See <a class="xref" href="index-modules-fielddata.html" title="Field data"><em>Field data</em></a>
</dd><dt><span class="term">
<code class="literal">indices.breaker.fielddata.overhead</code>
</span></dt><dd>
     See <a class="xref" href="index-modules-fielddata.html" title="Field data"><em>Field data</em></a>
</dd></dl></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span>  <span class="breadcrumb-node">Nodes Stats</span></div><div class="navheader"><span class="prev"><a href="cluster-update-settings.html">
              &nbsp;
              Cluster Update Settings</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cluster-nodes-info.html">Nodes Info
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cluster-nodes-stats"></a>Nodes Stats</h2></div></div></div><h3><a id="_nodes_statistics"></a>Nodes statistics</h3><p>The cluster nodes stats API allows to retrieve one or more (or all) of
the cluster nodes statistics.</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/_nodes/stats'
curl -XGET 'http://localhost:9200/_nodes/nodeId1,nodeId2/stats'</pre></div><p>The first command retrieves stats of all the nodes in the cluster. The
second command selectively retrieves nodes stats of only <code class="literal">nodeId1</code> and
<code class="literal">nodeId2</code>. All the nodes selective options are explained
<a class="link" href="cluster.html#cluster-nodes" title="Node specificationedit">here</a>.</p><p>By default, all stats are returned. You can limit this by combining any
of <code class="literal">indices</code>, <code class="literal">os</code>, <code class="literal">process</code>, <code class="literal">jvm</code>, <code class="literal">network</code>, <code class="literal">transport</code>, <code class="literal">http</code>,
<code class="literal">fs</code>, <code class="literal">breaker</code> and <code class="literal">thread_pool</code>. For example:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">indices</code>
</p>
</td><td class="entry" valign="top">
<p>
        Indices stats about size, document count, indexing and
        deletion times, search times, field cache size , merges and flushes
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">fs</code>
</p>
</td><td class="entry" valign="top">
<p>
        File system information, data path, free disk space, read/write
        stats
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">http</code>
</p>
</td><td class="entry" valign="top">
<p>
        HTTP connection information
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">jvm</code>
</p>
</td><td class="entry" valign="top">
<p>
        JVM stats, memory pool information, garbage collection, buffer
        pools
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">network</code>
</p>
</td><td class="entry" valign="top">
<p>
        TCP information
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">os</code>
</p>
</td><td class="entry" valign="top">
<p>
        Operating system stats, load average, cpu, mem, swap
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">process</code>
</p>
</td><td class="entry" valign="top">
<p>
        Process statistics, memory consumption, cpu usage, open
        file descriptors
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">thread_pool</code>
</p>
</td><td class="entry" valign="top">
<p>
        Statistics about each thread pool, including current
        size, queue and rejected tasks
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">transport</code>
</p>
</td><td class="entry" valign="top">
<p>
        Transport statistics about sent and received bytes in
        cluster communication
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">breaker</code>
</p>
</td><td class="entry" valign="top">
<p>
        Statistics about the field data circuit breaker
</p>
</td></tr></tbody></table></div><div class="pre_wrapper"><pre class="programlisting"># return indices and os
curl -XGET 'http://localhost:9200/_nodes/stats/os'
# return just os and process
curl -XGET 'http://localhost:9200/_nodes/stats/os,process'
# specific type endpoint
curl -XGET 'http://localhost:9200/_nodes/stats/process'
curl -XGET 'http://localhost:9200/_nodes/10.0.0.1/stats/process'</pre></div><p>All stats can be explicitly requested via <code class="literal">/_nodes/stats/_all</code> or <code class="literal">/_nodes/stats?metric=_all</code>.</p><h3><a id="field-data"></a>Field data statistics</h3><p>You can get information about field data memory usage on node
level or on index level.</p><div class="pre_wrapper"><pre class="programlisting"># Node Stats
curl -XGET 'http://localhost:9200/_nodes/stats/indices/?fields=field1,field2&amp;pretty'

# Indices Stat
curl -XGET 'http://localhost:9200/_stats/fielddata/?fields=field1,field2&amp;pretty'

# You can use wildcards for field names
curl -XGET 'http://localhost:9200/_stats/fielddata/?fields=field*&amp;pretty'
curl -XGET 'http://localhost:9200/_nodes/stats/indices/?fields=field*&amp;pretty'</pre></div><h3><a id="search-groups"></a>Search groups</h3><p>You can get statistics about search groups for searches executed
on this node.</p><div class="pre_wrapper"><pre class="programlisting"># All groups with all stats
curl -XGET 'http://localhost:9200/_nodes/stats?pretty&amp;groups=_all'

# Some groups from just the indices stats
curl -XGET 'http://localhost:9200/_nodes/stats/indices?pretty&amp;groups=foo,bar'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span>  <span class="breadcrumb-node">Nodes Info</span></div><div class="navheader"><span class="prev"><a href="cluster-nodes-stats.html">
              &nbsp;
              Nodes Stats</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cluster-nodes-hot-threads.html">Nodes hot_threads
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cluster-nodes-info"></a>Nodes Info</h2></div></div></div><p>The cluster nodes info API allows to retrieve one or more (or all) of
the cluster nodes information.</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/_nodes'
curl -XGET 'http://localhost:9200/_nodes/nodeId1,nodeId2'</pre></div><p>The first command retrieves information of all the nodes in the cluster.
The second command selectively retrieves nodes information of only
<code class="literal">nodeId1</code> and <code class="literal">nodeId2</code>. All the nodes selective options are explained
<a class="link" href="cluster.html#cluster-nodes" title="Node specificationedit">here</a>.</p><p>By default, it just returns all attributes and core settings for a node.
It also allows to get only information on <code class="literal">settings</code>, <code class="literal">os</code>, <code class="literal">process</code>, <code class="literal">jvm</code>,
<code class="literal">thread_pool</code>, <code class="literal">network</code>, <code class="literal">transport</code>, <code class="literal">http</code> and <code class="literal">plugins</code>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET 'http://localhost:9200/_nodes/process'
curl -XGET 'http://localhost:9200/_nodes/_all/process'
curl -XGET 'http://localhost:9200/_nodes/nodeId1,nodeId2/jvm,process'
# same as above
curl -XGET 'http://localhost:9200/_nodes/nodeId1,nodeId2/info/jvm,process'

curl -XGET 'http://localhost:9200/_nodes/nodeId1,nodeId2/_all</pre></div><p>The <code class="literal">_all</code> flag can be set to return all the information - or you can simply omit it.</p><p><code class="literal">plugins</code> - if set, the result will contain details about the loaded
plugins per node:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">name</code>: plugin name
</li><li class="listitem">
<code class="literal">description</code>: plugin description if any
</li><li class="listitem">
<code class="literal">site</code>: <code class="literal">true</code> if the plugin is a site plugin
</li><li class="listitem">
<code class="literal">jvm</code>: <code class="literal">true</code> if the plugin is a plugin running in the JVM
</li><li class="listitem">
<code class="literal">url</code>: URL if the plugin is a site plugin
</li></ul></div><p>The result will look similar to:</p><div class="pre_wrapper"><pre class="programlisting">{
  "cluster_name" : "test-cluster-MacBook-Air-de-David.local",
  "nodes" : {
    "hJLXmY_NTrCytiIMbX4_1g" : {
      "name" : "node4",
      "transport_address" : "inet[/172.18.58.139:9303]",
      "hostname" : "MacBook-Air-de-David.local",
      "version" : "0.90.0.Beta2-SNAPSHOT",
      "http_address" : "inet[/172.18.58.139:9203]",
      "plugins" : [ {
        "name" : "test-plugin",
        "description" : "test-plugin description",
        "site" : true,
        "jvm" : false
      }, {
        "name" : "test-no-version-plugin",
        "description" : "test-no-version-plugin description",
        "site" : true,
        "jvm" : false
      }, {
        "name" : "dummy",
        "description" : "No description found for dummy.",
        "url" : "/_plugin/dummy/",
        "site" : false,
        "jvm" : true
      } ]
    }
  }
}</pre></div><p>if your <code class="literal">plugin</code> data is subject to change use
<code class="literal">plugins.info_refresh_interval</code> to change or disable the caching
interval:</p><div class="pre_wrapper"><pre class="programlisting"># Change cache to 20 seconds
plugins.info_refresh_interval: 20s

# Infinite cache
plugins.info_refresh_interval: -1

# Disable cache
plugins.info_refresh_interval: 0</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span>  <span class="breadcrumb-node">Nodes hot_threads</span></div><div class="navheader"><span class="prev"><a href="cluster-nodes-info.html">
              &nbsp;
              Nodes Info</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="cluster-nodes-shutdown.html">Nodes Shutdown
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cluster-nodes-hot-threads"></a>Nodes hot_threads</h2></div></div></div><p>An API allowing to get the current hot threads on each node in the
cluster. Endpoints are <code class="literal">/_nodes/hot_threads</code>, and
<code class="literal">/_nodes/{nodesIds}/hot_threads</code>.</p><p>The output is plain text with a breakdown of each nodes top hot
threads. Parameters allowed are:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">threads</code>
</p>
</td><td class="entry" valign="top">
<p>
number of hot threads to provide, defaults to 3.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">interval</code>
</p>
</td><td class="entry" valign="top">
<p>
the interval to do the second sampling of threads.
                                Defaults to 500ms.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">type</code>
</p>
</td><td class="entry" valign="top">
<p>
The type to sample, defaults to cpu, but supports wait and
                                block to see hot threads that are in wait or block state.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">ignore_idle_threads</code>
</p>
</td><td class="entry" valign="top">
<p>
If true, known idle threads (e.g. waiting in a socket select, or to
                           get a task from an empty queue) are filtered out.  Defaults to true.
</p>
</td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="cluster.html">Cluster APIs</a></span>  <span class="breadcrumb-node">Nodes Shutdown</span></div><div class="navheader"><span class="prev"><a href="cluster-nodes-hot-threads.html">
              &nbsp;
              Nodes hot_threads</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl.html">Query DSL
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="cluster-nodes-shutdown"></a>Nodes Shutdown</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.6.0. </h3>
 The _shutdown API will be removed in v2.0.0
</div></div><p>The nodes shutdown API allows to shutdown one or more (or all) nodes in
the cluster. Here is an example of shutting the <code class="literal">_local</code> node the
request is directed to:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/_cluster/nodes/_local/_shutdown'</pre></div><p>Specific node(s) can be shutdown as well using their respective node ids
(or other selective options as explained
<a class="link" href="cluster.html#cluster-nodes" title="Node specificationedit">here</a> .):</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/_cluster/nodes/nodeId1,nodeId2/_shutdown'</pre></div><p>The master (of the cluster) can also be shutdown using:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/_cluster/nodes/_master/_shutdown'</pre></div><p>Finally, all nodes can be shutdown using one of the options below:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/_shutdown'

$ curl -XPOST 'http://localhost:9200/_cluster/nodes/_shutdown'

$ curl -XPOST 'http://localhost:9200/_cluster/nodes/_all/_shutdown'</pre></div><h3><a id="delay"></a>Delay</h3><p>By default, the shutdown will be executed after a 1 second delay (<code class="literal">1s</code>).
The delay can be customized by setting the <code class="literal">delay</code> parameter in a time
value format. For example:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPOST 'http://localhost:9200/_cluster/nodes/_local/_shutdown?delay=10s'</pre></div><h3><a id="_disable_shutdown"></a>Disable Shutdown</h3><p>The shutdown API can be disabled by setting <code class="literal">action.disable_shutdown</code> in
the node configuration.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">Query DSL</span></div><div class="navheader"><span class="prev"><a href="cluster-nodes-shutdown.html">
              &nbsp;
              Nodes Shutdown</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-queries.html">Queries
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="query-dsl"></a>Query DSL</h1></div></div></div><div class="partintro"><div></div><p><span class="strong emphasis"><strong>elasticsearch</strong></span> provides a full Query DSL based on JSON to define
queries. In general, there are basic queries such as
<a class="link" href="query-dsl-term-query.html" title="Term Query">term</a> or
<a class="link" href="query-dsl-prefix-query.html" title="Prefix Query">prefix</a>. There are
also compound queries like the
<a class="link" href="query-dsl-bool-query.html" title="Bool Query">bool</a> query. Queries can
also have filters associated with them such as the
<a class="link" href="query-dsl-filtered-query.html" title="Filtered Query">filtered</a> or
<a class="link" href="query-dsl-constant-score-query.html" title="Constant Score Query">constant_score</a>
queries, with specific filter queries.</p><p>Think of the Query DSL as an AST of queries. Certain queries can contain
other queries (like the
<a class="link" href="query-dsl-bool-query.html" title="Bool Query">bool</a> query), others can
contain filters (like the
<a class="link" href="query-dsl-constant-score-query.html" title="Constant Score Query">constant_score</a>),
and some can contain both a query and a filter (like the
<a class="link" href="query-dsl-filtered-query.html" title="Filtered Query">filtered</a>). Each of
those can contain <span class="strong emphasis"><strong>any</strong></span> query of the list of queries or <span class="strong emphasis"><strong>any</strong></span> filter
from the list of filters, resulting in the ability to build quite
complex (and interesting) queries.</p><p>Both queries and filters can be used in different APIs. For example,
within a <a class="link" href="search-request-query.html" title="Query">search query</a>, or
as a <a class="link" href="search-facets.html" title="Facets">facet filter</a>. This
section explains the components (queries and filters) that can form the
AST one can use.</p><p>Filters are very handy since they perform an order of magnitude better
than plain queries since no scoring is performed and they are
automatically cached.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-node">Queries</span></div><div class="navheader"><span class="prev"><a href="query-dsl.html">
              &nbsp;
              Query DSL</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-match-query.html">Match Query
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-queries"></a>Queries</h2></div></div></div><p>As a general rule, queries should be used instead of filters:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
for full text search
</li><li class="listitem">
where the result depends on a relevance score
</li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Match Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-queries.html">
              &nbsp;
              Queries</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-multi-match-query.html">Multi Match Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-match-query"></a>Match Query</h2></div></div></div><p>A family of <code class="literal">match</code> queries that accepts text/numerics/dates, analyzes
them, and constructs a query. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "match" : {
        "message" : "this is a test"
    }
}</pre></div><p>Note, <code class="literal">message</code> is the name of a field, you can substitute the name of
any field (including <code class="literal">_all</code>) instead.</p><h4><a id="_types_of_match_queries"></a>Types of Match Queries</h4><h5><a id="_boolean"></a>boolean</h5><p>The default <code class="literal">match</code> query is of type <code class="literal">boolean</code>. It means that the text
provided is analyzed and the analysis process constructs a boolean query
from the provided text. The <code class="literal">operator</code> flag can be set to <code class="literal">or</code> or <code class="literal">and</code>
to control the boolean clauses (defaults to <code class="literal">or</code>). The minimum number of
optional <code class="literal">should</code> clauses to match can be set using the
<a class="link" href="query-dsl-minimum-should-match.html" title="Minimum Should Match"><code class="literal">minimum_should_match</code></a>
parameter.</p><p>The <code class="literal">analyzer</code> can be set to control which analyzer will perform the
analysis process on the text. It defaults to the field explicit mapping
definition, or the default search analyzer.</p><p><code class="literal">fuzziness</code> allows <span class="emphasis"><em>fuzzy matching</em></span> based on the type of field being queried.
See <a class="xref" href="common-options.html#fuzziness" title="Fuzzinessedit">the section called Fuzziness</a> for allowed settings.</p><p>The <code class="literal">prefix_length</code> and
<code class="literal">max_expansions</code> can be set in this case to control the fuzzy process.
If the fuzzy option is set the query will use <code class="literal">constant_score_rewrite</code>
as its <a class="link" href="query-dsl-multi-term-rewrite.html" title="Multi Term Query Rewrite">rewrite method</a> the <code class="literal">fuzzy_rewrite</code> parameter allows to control how the query will get
rewritten.</p><p>Here is an example when providing additional parameters (note the slight
change in structure, <code class="literal">message</code> is the field name):</p><div class="pre_wrapper"><pre class="programlisting">{
    "match" : {
        "message" : {
            "query" : "this is a test",
            "operator" : "and"
        }
    }
}</pre></div><p class="formalpara"><strong>zero_terms_query.&nbsp;</strong>If the analyzer used removes all tokens in a query like a <code class="literal">stop</code> filter
does, the default behavior is to match no documents at all. In order to
change that the <code class="literal">zero_terms_query</code> option can be used, which accepts
<code class="literal">none</code> (default) and <code class="literal">all</code> which corresponds to a <code class="literal">match_all</code> query.</p><div class="pre_wrapper"><pre class="programlisting">{
    "match" : {
        "message" : {
            "query" : "to be or not to be",
            "operator" : "and",
            "zero_terms_query": "all"
        }
    }
}</pre></div><p class="formalpara"><strong>cutoff_frequency.&nbsp;</strong>The match query supports a <code class="literal">cutoff_frequency</code> that allows
specifying an absolute or relative document frequency where high
frequency terms are moved into an optional subquery and are only scored
if one of the low frequency (below the cutoff) terms in the case of an
<code class="literal">or</code> operator or all of the low frequency terms in the case of an <code class="literal">and</code>
operator match.</p><p>This query allows handling <code class="literal">stopwords</code> dynamically at runtime, is domain
independent and doesnt require a stopword file. It prevents scoring /
iterating high frequency terms and only takes the terms into account if a
more significant / lower frequency term matches a document. Yet, if all
of the query terms are above the given <code class="literal">cutoff_frequency</code> the query is
automatically transformed into a pure conjunction (<code class="literal">and</code>) query to
ensure fast execution.</p><p>The <code class="literal">cutoff_frequency</code> can either be relative to the total number of
documents if in the range <code class="literal">[0..1)</code> or absolute if greater or equal to
<code class="literal">1.0</code>.</p><p>Here is an example showing a query composed of stopwords exclusively:</p><div class="pre_wrapper"><pre class="programlisting">{
    "match" : {
        "message" : {
            "query" : "to be or not to be",
            "cutoff_frequency" : 0.001
        }
    }
}</pre></div><div class="important admon"><div class="icon"><img alt="Important" class="images-icons-important-png"></div><div class="admon_content"><p>The <code class="literal">cutoff_frequency</code> option operates on a per-shard-level. This means
that when trying it out on test indexes with low document numbers you
should follow the advice in <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/guide/current/relevance-is-broken.html" target="_top">Relevance is broken</a>.</p></div></div><h5><a id="_phrase"></a>phrase</h5><p>The <code class="literal">match_phrase</code> query analyzes the text and creates a <code class="literal">phrase</code> query
out of the analyzed text. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "match_phrase" : {
        "message" : "this is a test"
    }
}</pre></div><p>Since <code class="literal">match_phrase</code> is only a <code class="literal">type</code> of a <code class="literal">match</code> query, it can also be
used in the following manner:</p><div class="pre_wrapper"><pre class="programlisting">{
    "match" : {
        "message" : {
            "query" : "this is a test",
            "type" : "phrase"
        }
    }
}</pre></div><p>A phrase query matches terms up to a configurable <code class="literal">slop</code>
(which defaults to 0) in any order. Transposed terms have a slop of 2.</p><p>The <code class="literal">analyzer</code> can be set to control which analyzer will perform the
analysis process on the text. It defaults to the field explicit mapping
definition, or the default search analyzer, for example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "match_phrase" : {
        "message" : {
            "query" : "this is a test",
            "analyzer" : "my_analyzer"
        }
    }
}</pre></div><h5><a id="_match_phrase_prefix"></a>match_phrase_prefix</h5><p>The <code class="literal">match_phrase_prefix</code> is the same as <code class="literal">match_phrase</code>, except that it
allows for prefix matches on the last term in the text. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "match_phrase_prefix" : {
        "message" : "this is a test"
    }
}</pre></div><p>Or:</p><div class="pre_wrapper"><pre class="programlisting">{
    "match" : {
        "message" : {
            "query" : "this is a test",
            "type" : "phrase_prefix"
        }
    }
}</pre></div><p>It accepts the same parameters as the phrase type. In addition, it also
accepts a <code class="literal">max_expansions</code> parameter that can control to how many
prefixes the last term will be expanded. It is highly recommended to set
it to an acceptable value to control the execution time of the query.
For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "match_phrase_prefix" : {
        "message" : {
            "query" : "this is a test",
            "max_expansions" : 10
        }
    }
}</pre></div><h4><a id="_comparison_to_query_string_field"></a>Comparison to query_string / field</h4><p>The match family of queries does not go through a "query parsing"
process. It does not support field name prefixes, wildcard characters,
or other "advanced" features. For this reason, chances of it failing are
very small / non existent, and it provides an excellent behavior when it
comes to just analyze and run that text as a query behavior (which is
usually what a text search box does). Also, the <code class="literal">phrase_prefix</code> type can
provide a great "as you type" behavior to automatically load search
results.</p><h4><a id="_other_options_2"></a>Other options</h4><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">lenient</code> - If set to true will cause format based failures (like
providing text to a numeric field) to be ignored. Defaults to false.
</li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Multi Match Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-match-query.html">
              &nbsp;
              Match Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-bool-query.html">Bool Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-multi-match-query"></a>Multi Match Query</h2></div></div></div><p>The <code class="literal">multi_match</code> query builds on the <a class="link" href="query-dsl-match-query.html" title="Match Query"><code class="literal">match</code> query</a>
to allow multi-field queries:</p><div class="pre_wrapper"><pre class="programlisting">{
  "multi_match" : {
    "query":    "this is a test", <a id="CO52-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
    "fields": [ "subject", "message" ] <a id="CO52-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO52-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The query string.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO52-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The fields to be queried.
</p></td></tr></tbody></table></div><h3><a id="_literal_fields_literal_and_per_field_boosting"></a><code class="literal">fields</code> and per-field boosting</h3><p>Fields can be specified with wildcards, eg:</p><div class="pre_wrapper"><pre class="programlisting">{
  "multi_match" : {
    "query":    "Will Smith",
    "fields": [ "title", "*_name" ] <a id="CO53-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO53-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Query the <code class="literal">title</code>, <code class="literal">first_name</code> and <code class="literal">last_name</code> fields.
</p></td></tr></tbody></table></div><p>Individual fields can be boosted with the caret (<code class="literal">^</code>) notation:</p><div class="pre_wrapper"><pre class="programlisting">{
  "multi_match" : {
    "query" : "this is a test",
    "fields" : [ "subject^3", "message" ] <a id="CO54-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO54-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">subject</code> field is three times as important as the <code class="literal">message</code> field.
</p></td></tr></tbody></table></div><h3><a id="_literal_use_dis_max_literal"></a><code class="literal">use_dis_max</code></h3><p>By default, the <code class="literal">multi_match</code> query generates a <code class="literal">match</code> clause per field, then wraps them
in a <code class="literal">dis_max</code> query.  By setting <code class="literal">use_dis_max</code> to <code class="literal">false</code>, they will be wrapped in a
<code class="literal">bool</code> query instead.</p><h3><a id="multi-match-types"></a>Types of <code class="literal">multi_match</code> query:</h3><p>The way the <code class="literal">multi_match</code> query is executed internally depends on the <code class="literal">type</code>
parameter, which can be set to:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">best_fields</code>
</p>
</td><td class="entry" valign="top">
<p>
(<span class="strong emphasis"><strong>default</strong></span>) Finds documents which match any field, but
                    uses the  <code class="literal">_score</code> from the best field.  See <a class="xref" href="query-dsl-multi-match-query.html#type-best-fields" title="best_fields"><code class="literal">best_fields</code></a>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">most_fields</code>
</p>
</td><td class="entry" valign="top">
<p>
Finds documents which match any field and combines
                    the <code class="literal">_score</code> from each field.  See <a class="xref" href="query-dsl-multi-match-query.html#type-most-fields" title="most_fields"><code class="literal">most_fields</code></a>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">cross_fields</code>
</p>
</td><td class="entry" valign="top">
<p>
Treats fields with the same <code class="literal">analyzer</code> as though they
                    were one big field. Looks for each word in <span class="strong emphasis"><strong>any</strong></span>
                    field. See <a class="xref" href="query-dsl-multi-match-query.html#type-cross-fields" title="cross_fields"><code class="literal">cross_fields</code></a>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">phrase</code>
</p>
</td><td class="entry" valign="top">
<p>
Runs a <code class="literal">match_phrase</code> query on each field and combines
                    the <code class="literal">_score</code> from each field.  See <a class="xref" href="query-dsl-multi-match-query.html#type-phrase" title="phrase and phrase_prefix"><code class="literal">phrase</code> and <code class="literal">phrase_prefix</code></a>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">phrase_prefix</code>
</p>
</td><td class="entry" valign="top">
<p>
Runs a <code class="literal">match_phrase_prefix</code> query on each field and
                    combines the <code class="literal">_score</code> from each field.  See <a class="xref" href="query-dsl-multi-match-query.html#type-phrase" title="phrase and phrase_prefix"><code class="literal">phrase</code> and <code class="literal">phrase_prefix</code></a>.
</p>
</td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="type-best-fields"></a><code class="literal">best_fields</code></h3></div></div></div><p>The <code class="literal">best_fields</code> type is most useful when you are searching for multiple
words best found in the same field. For instance brown fox in a single
field is more meaningful than brown in one field and fox in the other.</p><p>The <code class="literal">best_fields</code> type generates a <a class="link" href="query-dsl-match-query.html" title="Match Query"><code class="literal">match</code> query</a> for
each field and wraps them in a <a class="link" href="query-dsl-dis-max-query.html" title="Dis Max Query"><code class="literal">dis_max</code></a> query, to
find the single best matching field.  For instance, this query:</p><div class="pre_wrapper"><pre class="programlisting">{
  "multi_match" : {
    "query":      "brown fox",
    "type":       "best_fields",
    "fields":     [ "subject", "message" ],
    "tie_breaker": 0.3
  }
}</pre></div><p>would be executed as:</p><div class="pre_wrapper"><pre class="programlisting">{
  "dis_max": {
    "queries": [
      { "match": { "subject": "brown fox" }},
      { "match": { "message": "brown fox" }}
    ],
    "tie_breaker": 0.3
  }
}</pre></div><p>Normally the <code class="literal">best_fields</code> type uses the score of the <span class="strong emphasis"><strong>single</strong></span> best matching
field, but if <code class="literal">tie_breaker</code> is specified, then it calculates the score as
follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
the score from the best matching field
</li><li class="listitem">
plus <code class="literal">tie_breaker * _score</code> for all other matching fields
</li></ul></div><p>Also, accepts <code class="literal">analyzer</code>, <code class="literal">boost</code>, <code class="literal">operator</code>, <code class="literal">minimum_should_match</code>,
<code class="literal">fuzziness</code>, <code class="literal">prefix_length</code>, <code class="literal">max_expansions</code>, <code class="literal">rewrite</code>, <code class="literal">zero_terms_query</code>
and <code class="literal">cutoff_frequency</code>, as explained in <a class="link" href="query-dsl-match-query.html" title="Match Query">match query</a>.</p><div class="important admon"><div class="icon"><img alt="Important" class="images-icons-important-png"></div><div class="admon_content"><h3><code class="literal">operator</code> and <code class="literal">minimum_should_match</code><a id="operator-min"></a></h3><p>The <code class="literal">best_fields</code> and <code class="literal">most_fields</code> types are <span class="emphasis"><em>field-centric</em></span>they generate
a <code class="literal">match</code> query <span class="strong emphasis"><strong>per field</strong></span>.  This means that the <code class="literal">operator</code> and
<code class="literal">minimum_should_match</code> parameters are applied to each field individually,
which is probably not what you want.</p><p>Take this query for example:</p><div class="pre_wrapper"><pre class="programlisting">{
  "multi_match" : {
    "query":      "Will Smith",
    "type":       "best_fields",
    "fields":     [ "first_name", "last_name" ],
    "operator":   "and" <a id="CO55-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO55-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
All terms must be present.
</p></td></tr></tbody></table></div><p>This query is executed as:</p><pre class="literallayout">  (+first_name:will +first_name:smith)
| (+last_name:will  +last_name:smith)</pre><p>In other words, <span class="strong emphasis"><strong>all terms</strong></span> must be present <span class="strong emphasis"><strong>in a single field</strong></span> for a document
to match.</p><p>See <a class="xref" href="query-dsl-multi-match-query.html#type-cross-fields" title="cross_fields"><code class="literal">cross_fields</code></a> for a better solution.</p></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="type-most-fields"></a><code class="literal">most_fields</code></h3></div></div></div><p>The <code class="literal">most_fields</code> type is most useful when querying multiple fields that
contain the same text analyzed in different ways.  For instance, the main
field may contain synonyms, stemming and terms without diacritics. A second
field may contain the original terms, and a third field might contain
shingles. By combining scores from all three fields we can match as many
documents as possible with the main field, but use the second and third fields
to push the most similar results to the top of the list.</p><p>This query:</p><div class="pre_wrapper"><pre class="programlisting">{
  "multi_match" : {
    "query":      "quick brown fox",
    "type":       "most_fields",
    "fields":     [ "title", "title.original", "title.shingles" ]
  }
}</pre></div><p>would be executed as:</p><div class="pre_wrapper"><pre class="programlisting">{
  "bool": {
    "should": [
      { "match": { "title":          "quick brown fox" }},
      { "match": { "title.original": "quick brown fox" }},
      { "match": { "title.shingles": "quick brown fox" }}
    ]
  }
}</pre></div><p>The score from each <code class="literal">match</code> clause is added together, then divided by the
number of <code class="literal">match</code> clauses.</p><p>Also, accepts <code class="literal">analyzer</code>, <code class="literal">boost</code>, <code class="literal">operator</code>, <code class="literal">minimum_should_match</code>,
<code class="literal">fuzziness</code>, <code class="literal">prefix_length</code>, <code class="literal">max_expansions</code>, <code class="literal">rewrite</code>, <code class="literal">zero_terms_query</code>
and <code class="literal">cutoff_frequency</code>, as explained in <a class="link" href="query-dsl-match-query.html" title="Match Query">match query</a>, but
<span class="strong emphasis"><strong>see <a class="xref" href="query-dsl-multi-match-query.html#operator-min" title="operator and minimum_should_match"><code class="literal">operator</code> and <code class="literal">minimum_should_match</code></a></strong></span>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="type-phrase"></a><code class="literal">phrase</code> and <code class="literal">phrase_prefix</code></h3></div></div></div><p>The <code class="literal">phrase</code> and <code class="literal">phrase_prefix</code> types behave just like <a class="xref" href="query-dsl-multi-match-query.html#type-best-fields" title="best_fields"><code class="literal">best_fields</code></a>,
but they use a <code class="literal">match_phrase</code> or <code class="literal">match_phrase_prefix</code> query instead of a
<code class="literal">match</code> query.</p><p>This query:</p><div class="pre_wrapper"><pre class="programlisting">{
  "multi_match" : {
    "query":      "quick brown f",
    "type":       "phrase_prefix",
    "fields":     [ "subject", "message" ]
  }
}</pre></div><p>would be executed as:</p><div class="pre_wrapper"><pre class="programlisting">{
  "dis_max": {
    "queries": [
      { "match_phrase_prefix": { "subject": "quick brown f" }},
      { "match_phrase_prefix": { "message": "quick brown f" }}
    ]
  }
}</pre></div><p>Also, accepts <code class="literal">analyzer</code>, <code class="literal">boost</code>, <code class="literal">slop</code> and <code class="literal">zero_terms_query</code>  as explained
in <a class="xref" href="query-dsl-match-query.html" title="Match Query">Match Query</a>.  Type <code class="literal">phrase_prefix</code> additionally accepts
<code class="literal">max_expansions</code>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="type-cross-fields"></a><code class="literal">cross_fields</code></h3></div></div></div><p>The <code class="literal">cross_fields</code> type is particularly useful with structured documents where
multiple fields <span class="strong emphasis"><strong>should</strong></span> match.  For instance, when querying the <code class="literal">first_name</code>
and <code class="literal">last_name</code> fields for Will Smith, the best match is likely to have
Will in one field and Smith in the other.</p><div class="sidebar"><div class="titlepage"></div><p>This sounds like a job for <a class="xref" href="query-dsl-multi-match-query.html#type-most-fields" title="most_fields"><code class="literal">most_fields</code></a> but there are two problems
with that approach. The first problem is that <code class="literal">operator</code> and
<code class="literal">minimum_should_match</code> are applied per-field, instead of per-term (see
<a class="link" href="query-dsl-multi-match-query.html#operator-min" title="operator and minimum_should_match">explanation above</a>).</p><p>The second problem is to do with relevance: the different term frequencies in
the <code class="literal">first_name</code> and <code class="literal">last_name</code> fields   can produce unexpected results.</p><p>For instance, imagine we have two people: Will Smith and Smith Jones.
Smith as a last name is very common (and so is of low importance) but
Smith as a first name is very uncommon (and so is of great importance).</p><p>If we do a search for Will Smith, the Smith Jones document will
probably appear above the better matching Will Smith because the score of
<code class="literal">first_name:smith</code> has trumped the combined scores of <code class="literal">first_name:will</code> plus
<code class="literal">last_name:smith</code>.</p></div><p>One way of dealing with these types of queries is simply to index the
<code class="literal">first_name</code> and <code class="literal">last_name</code> fields into a single <code class="literal">full_name</code> field.  Of
course, this can only be done at index time.</p><p>The <code class="literal">cross_field</code> type tries to solve these problems at query time by taking a
<span class="emphasis"><em>term-centric</em></span> approach.  It first analyzes the query string into individual
terms, then looks for each term in any of the fields, as though they were one
big field.</p><p>A query like:</p><div class="pre_wrapper"><pre class="programlisting">{
  "multi_match" : {
    "query":      "Will Smith",
    "type":       "cross_fields",
    "fields":     [ "first_name", "last_name" ],
    "operator":   "and"
  }
}</pre></div><p>is executed as:</p><pre class="literallayout">+(first_name:will  last_name:will)
+(first_name:smith last_name:smith)</pre><p>In other words, <span class="strong emphasis"><strong>all terms</strong></span> must be present <span class="strong emphasis"><strong>in at least one field</strong></span> for a
document to match.  (Compare this to
<a class="link" href="query-dsl-multi-match-query.html#operator-min" title="operator and minimum_should_match">the logic used for <code class="literal">best_fields</code> and <code class="literal">most_fields</code></a>.)</p><p>That solves one of the two problems. The problem of differing term frequencies
is solved by <span class="emphasis"><em>blending</em></span> the term frequencies for all fields in order to even
out the differences.</p><p>In practice, <code class="literal">first_name:smith</code> will be treated as though it has the same
frequencies as <code class="literal">last_name:smith</code>, plus one. This will make matches on
<code class="literal">first_name</code> and <code class="literal">last_name</code> have comparable scores, with a tiny advantage
for <code class="literal">last_name</code> since it is the most likely field that contains <code class="literal">smith</code>.</p><p>Note that <code class="literal">cross_fields</code> is usually only useful on short string fields
that all have a <code class="literal">boost</code> of <code class="literal">1</code>. Otherwise boosts, term freqs and length
normalization contribute to the score in such a way that the blending of term
statistics is not meaningful anymore.</p><p>If you run the above query through the <a class="xref" href="search-validate.html" title="Validate API"><em>Validate API</em></a>, it returns this
explanation:</p><pre class="literallayout">+blended("will",  fields: [first_name, last_name])
+blended("smith", fields: [first_name, last_name])</pre><p>Also, accepts <code class="literal">analyzer</code>, <code class="literal">boost</code>, <code class="literal">operator</code>, <code class="literal">minimum_should_match</code>,
<code class="literal">zero_terms_query</code> and <code class="literal">cutoff_frequency</code>, as explained in
<a class="link" href="query-dsl-match-query.html" title="Match Query">match query</a>.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_literal_cross_field_literal_and_analysis"></a><code class="literal">cross_field</code> and analysis</h4></div></div></div><p>The <code class="literal">cross_field</code> type can only work in term-centric mode on fields that have
the same analyzer. Fields with the same analyzer are grouped together as in
the example above.  If there are multiple groups, they are combined with a
<code class="literal">bool</code> query.</p><p>For instance, if we have a <code class="literal">first</code> and <code class="literal">last</code> field which have
the same analyzer, plus a <code class="literal">first.edge</code> and <code class="literal">last.edge</code> which
both use an <code class="literal">edge_ngram</code> analyzer, this query:</p><div class="pre_wrapper"><pre class="programlisting">{
  "multi_match" : {
    "query":      "Jon",
    "type":       "cross_fields",
    "fields":     [
        "first", "first.edge",
        "last",  "last.edge"
    ]
  }
}</pre></div><p>would be executed as:</p><pre class="literallayout">    blended("jon", fields: [first, last])
| (
    blended("j",   fields: [first.edge, last.edge])
    blended("jo",  fields: [first.edge, last.edge])
    blended("jon", fields: [first.edge, last.edge])
)</pre><p>In other words, <code class="literal">first</code> and <code class="literal">last</code> would be grouped together and
treated as a single field, and <code class="literal">first.edge</code> and <code class="literal">last.edge</code> would be
grouped together and treated as a single field.</p><p>Having multiple groups is fine, but when combined with <code class="literal">operator</code> or
<code class="literal">minimum_should_match</code>, it can suffer from the <a class="link" href="query-dsl-multi-match-query.html#operator-min" title="operator and minimum_should_match">same problem</a>
as <code class="literal">most_fields</code> or <code class="literal">best_fields</code>.</p><p>You can easily rewrite this query yourself as two separate <code class="literal">cross_fields</code>
queries combined with a <code class="literal">bool</code> query, and apply the <code class="literal">minimum_should_match</code>
parameter to just one of them:</p><div class="pre_wrapper"><pre class="programlisting">{
    "bool": {
        "should": [
            {
              "multi_match" : {
                "query":      "Will Smith",
                "type":       "cross_fields",
                "fields":     [ "first", "last" ],
                "minimum_should_match": "50%" <a id="CO56-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
              }
            },
            {
              "multi_match" : {
                "query":      "Will Smith",
                "type":       "cross_fields",
                "fields":     [ "*.edge" ]
              }
            }
        ]
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO56-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Either <code class="literal">will</code> or <code class="literal">smith</code> must be present in either of the <code class="literal">first</code>
    or <code class="literal">last</code> fields
</p></td></tr></tbody></table></div><p>You can force all fields into the same group by specifying the <code class="literal">analyzer</code>
parameter in the query.</p><div class="pre_wrapper"><pre class="programlisting">{
  "multi_match" : {
    "query":      "Jon",
    "type":       "cross_fields",
    "analyzer":   "standard", <a id="CO57-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
    "fields":     [ "first", "last", "*.edge" ]
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO57-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Use the <code class="literal">standard</code> analyzer for all fields.
</p></td></tr></tbody></table></div><p>which will be executed as:</p><pre class="literallayout">blended("will",  fields: [first, first.edge, last.edge, last])
blended("smith", fields: [first, first.edge, last.edge, last])</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_literal_tie_breaker_literal"></a><code class="literal">tie_breaker</code></h4></div></div></div><p>By default, each per-term <code class="literal">blended</code> query will use the best score returned by
any field in a group, then these scores are added together to give the final
score. The <code class="literal">tie_breaker</code> parameter can change the default behaviour of the
per-term <code class="literal">blended</code> queries. It accepts:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">0.0</code>
</p>
</td><td class="entry" valign="top">
<p>
Take the single best score out of (eg) <code class="literal">first_name:will</code>
                    and <code class="literal">last_name:will</code> (<span class="strong emphasis"><strong>default</strong></span>)
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">1.0</code>
</p>
</td><td class="entry" valign="top">
<p>
Add together the scores for (eg) <code class="literal">first_name:will</code> and
                    <code class="literal">last_name:will</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">0.0 &lt; n &lt; 1.0</code>
</p>
</td><td class="entry" valign="top">
<p>
Take the single best score plus <code class="literal">tie_breaker</code> multiplied
                    by each of the scores from other matching fields.
</p>
</td></tr></tbody></table></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Bool Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-multi-match-query.html">
              &nbsp;
              Multi Match Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-boosting-query.html">Boosting Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-bool-query"></a>Bool Query</h2></div></div></div><p>A query that matches documents matching boolean combinations of other
queries. The bool query maps to Lucene <code class="literal">BooleanQuery</code>. It is built using
one or more boolean clauses, each clause with a typed occurrence. The
occurrence types are:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Occur </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">must</code></p></td><td class="entry" align="left" valign="top"><p>The clause (query) must appear in matching documents.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">should</code></p></td><td class="entry" align="left" valign="top"><p>The clause (query) should appear in the matching document. In
a boolean query with no <code class="literal">must</code> clauses, one or more <code class="literal">should</code> clauses
must match a document. The minimum number of should clauses to match can
be set using the
<a class="link" href="query-dsl-minimum-should-match.html" title="Minimum Should Match"><code class="literal">minimum_should_match</code></a>
parameter.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">must_not</code></p></td><td class="entry" align="left" valign="top"><p>The clause (query) must not appear in the matching
documents.</p></td></tr></tbody></table></div><p>The bool query also supports <code class="literal">disable_coord</code> parameter (defaults to
<code class="literal">false</code>). Basically the coord similarity computes a score factor based
on the fraction of all query terms that a document contains. See Lucene
<code class="literal">BooleanQuery</code> for more details.</p><p>The <code class="literal">bool</code> query takes a <span class="emphasis"><em>more-matches-is-better</em></span> approach, so the score from
each matching <code class="literal">must</code> or <code class="literal">should</code> clause will be added together to provide the
final <code class="literal">_score</code> for each document.</p><div class="pre_wrapper"><pre class="programlisting">{
    "bool" : {
        "must" : {
            "term" : { "user" : "kimchy" }
        },
        "must_not" : {
            "range" : {
                "age" : { "from" : 10, "to" : 20 }
            }
        },
        "should" : [
            {
                "term" : { "tag" : "wow" }
            },
            {
                "term" : { "tag" : "elasticsearch" }
            }
        ],
        "minimum_should_match" : 1,
        "boost" : 1.0
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Boosting Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-bool-query.html">
              &nbsp;
              Bool Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-common-terms-query.html">Common Terms Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-boosting-query"></a>Boosting Query</h2></div></div></div><p>The <code class="literal">boosting</code> query can be used to effectively demote results that
match a given query. Unlike the "NOT" clause in bool query, this still
selects documents that contain undesirable terms, but reduces their
overall score.</p><div class="pre_wrapper"><pre class="programlisting">{
    "boosting" : {
        "positive" : {
            "term" : {
                "field1" : "value1"
            }
        },
        "negative" : {
            "term" : {
                "field2" : "value2"
            }
        },
        "negative_boost" : 0.2
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Common Terms Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-boosting-query.html">
              &nbsp;
              Boosting Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-constant-score-query.html">Constant Score Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-common-terms-query"></a>Common Terms Query</h2></div></div></div><p>The <code class="literal">common</code> terms query is a modern alternative to stopwords which
improves the precision and recall of search results (by taking stopwords
into account), without sacrificing performance.</p><h4><a id="_the_problem"></a>The problem</h4><p>Every term in a query has a cost. A search for <code class="literal">"The brown fox"</code>
requires three term queries, one for each of <code class="literal">"the"</code>, <code class="literal">"brown"</code> and
<code class="literal">"fox"</code>, all of which are executed against all documents in the index.
The query for <code class="literal">"the"</code> is likely to match many documents and thus has a
much smaller impact on relevance than the other two terms.</p><p>Previously, the solution to this problem was to ignore terms with high
frequency. By treating <code class="literal">"the"</code> as a <span class="emphasis"><em>stopword</em></span>, we reduce the index size
and reduce the number of term queries that need to be executed.</p><p>The problem with this approach is that, while stopwords have a small
impact on relevance, they are still important. If we remove stopwords,
we lose precision, (eg we are unable to distinguish between <code class="literal">"happy"</code>
and <code class="literal">"not happy"</code>) and we lose recall (eg text like <code class="literal">"The The"</code> or
<code class="literal">"To be or not to be"</code> would simply not exist in the index).</p><h4><a id="_the_solution"></a>The solution</h4><p>The <code class="literal">common</code> terms query divides the query terms into two groups: more
important (ie <span class="emphasis"><em>low frequency</em></span> terms) and less important (ie <span class="emphasis"><em>high
frequency</em></span> terms which would previously have been stopwords).</p><p>First it searches for documents which match the more important terms.
These are the terms which appear in fewer documents and have a greater
impact on relevance.</p><p>Then, it executes a second query for the less important termsterms
which appear frequently and have a low impact on relevance. But instead
of calculating the relevance score for <span class="strong emphasis"><strong>all</strong></span> matching documents, it only
calculates the <code class="literal">_score</code> for documents already matched by the first
query. In this way the high frequency terms can improve the relevance
calculation without paying the cost of poor performance.</p><p>If a query consists only of high frequency terms, then a single query is
executed as an <code class="literal">AND</code> (conjunction) query, in other words all terms are
required. Even though each individual term will match many documents,
the combination of terms narrows down the resultset to only the most
relevant. The single query can also be executed as an <code class="literal">OR</code> with a
specific
<a class="link" href="query-dsl-minimum-should-match.html" title="Minimum Should Match"><code class="literal">minimum_should_match</code></a>,
in this case a high enough value should probably be used.</p><p>Terms are allocated to the high or low frequency groups based on the
<code class="literal">cutoff_frequency</code>, which can be specified as an absolute frequency
(<code class="literal">&gt;=1</code>) or as a relative frequency (<code class="literal">0.0 .. 1.0</code>). (Remember that document
frequencies are computed on a per shard level as explained in the blog post
<a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/guide/current/relevance-is-broken.html" target="_top">Relevance is broken</a>.)</p><p>Perhaps the most interesting property of this query is that it adapts to
domain specific stopwords automatically. For example, on a video hosting
site, common terms like <code class="literal">"clip"</code> or <code class="literal">"video"</code> will automatically behave
as stopwords without the need to maintain a manual list.</p><h4><a id="_examples_3"></a>Examples</h4><p>In this example, words that have a document frequency greater than 0.1%
(eg <code class="literal">"this"</code> and <code class="literal">"is"</code>) will be treated as <span class="emphasis"><em>common terms</em></span>.</p><div class="pre_wrapper"><pre class="programlisting">{
  "common": {
    "body": {
      "query": "this is bonsai cool",
      "cutoff_frequency": 0.001
    }
  }
}</pre></div><p>The number of terms which should match can be controlled with the
<a class="link" href="query-dsl-minimum-should-match.html" title="Minimum Should Match"><code class="literal">minimum_should_match</code></a>
(<code class="literal">high_freq</code>, <code class="literal">low_freq</code>), <code class="literal">low_freq_operator</code> (default <code class="literal">"or"</code>) and
<code class="literal">high_freq_operator</code> (default <code class="literal">"or"</code>) parameters.</p><p>For low frequency terms, set the <code class="literal">low_freq_operator</code> to <code class="literal">"and"</code> to make
all terms required:</p><div class="pre_wrapper"><pre class="programlisting">{
  "common": {
    "body": {
      "query": "nelly the elephant as a cartoon",
      "cutoff_frequency": 0.001,
      "low_freq_operator": "and"
    }
  }
}</pre></div><p>which is roughly equivalent to:</p><div class="pre_wrapper"><pre class="programlisting">{
  "bool": {
    "must": [
      { "term": { "body": "nelly"}},
      { "term": { "body": "elephant"}},
      { "term": { "body": "cartoon"}}
    ],
    "should": [
      { "term": { "body": "the"}}
      { "term": { "body": "as"}}
      { "term": { "body": "a"}}
    ]
  }
}</pre></div><p>Alternatively use
<a class="link" href="query-dsl-minimum-should-match.html" title="Minimum Should Match"><code class="literal">minimum_should_match</code></a>
to specify a minimum number or percentage of low frequency terms which
must be present, for instance:</p><div class="pre_wrapper"><pre class="programlisting">{
  "common": {
    "body": {
      "query": "nelly the elephant as a cartoon",
      "cutoff_frequency": 0.001,
      "minimum_should_match": 2
    }
  }
}</pre></div><p>which is roughly equivalent to:</p><div class="pre_wrapper"><pre class="programlisting">{
  "bool": {
    "must": {
      "bool": {
        "should": [
          { "term": { "body": "nelly"}},
          { "term": { "body": "elephant"}},
          { "term": { "body": "cartoon"}}
        ],
        "minimum_should_match": 2
      }
    },
    "should": [
      { "term": { "body": "the"}}
      { "term": { "body": "as"}}
      { "term": { "body": "a"}}
    ]
  }
}</pre></div><p>minimum_should_match</p><p>A different
<a class="link" href="query-dsl-minimum-should-match.html" title="Minimum Should Match"><code class="literal">minimum_should_match</code></a>
can be applied for low and high frequency terms with the additional
<code class="literal">low_freq</code> and <code class="literal">high_freq</code> parameters. Here is an example when providing
additional parameters (note the change in structure):</p><div class="pre_wrapper"><pre class="programlisting">{
  "common": {
    "body": {
      "query": "nelly the elephant not as a cartoon",
      "cutoff_frequency": 0.001,
      "minimum_should_match": {
          "low_freq" : 2,
          "high_freq" : 3
       }
    }
  }
}</pre></div><p>which is roughly equivalent to:</p><div class="pre_wrapper"><pre class="programlisting">{
  "bool": {
    "must": {
      "bool": {
        "should": [
          { "term": { "body": "nelly"}},
          { "term": { "body": "elephant"}},
          { "term": { "body": "cartoon"}}
        ],
        "minimum_should_match": 2
      }
    },
    "should": {
      "bool": {
        "should": [
          { "term": { "body": "the"}},
          { "term": { "body": "not"}},
          { "term": { "body": "as"}},
          { "term": { "body": "a"}}
        ],
        "minimum_should_match": 3
      }
    }
  }
}</pre></div><p>In this case it means the high frequency terms have only an impact on
relevance when there are at least three of them. But the most
interesting use of the
<a class="link" href="query-dsl-minimum-should-match.html" title="Minimum Should Match"><code class="literal">minimum_should_match</code></a>
for high frequency terms is when there are only high frequency terms:</p><div class="pre_wrapper"><pre class="programlisting">{
  "common": {
    "body": {
      "query": "how not to be",
      "cutoff_frequency": 0.001,
      "minimum_should_match": {
          "low_freq" : 2,
          "high_freq" : 3
       }
    }
  }
}</pre></div><p>which is roughly equivalent to:</p><div class="pre_wrapper"><pre class="programlisting">{
  "bool": {
    "should": [
      { "term": { "body": "how"}},
      { "term": { "body": "not"}},
      { "term": { "body": "to"}},
      { "term": { "body": "be"}}
    ],
    "minimum_should_match": "3&lt;50%"
  }
}</pre></div><p>The high frequency generated query is then slightly less restrictive
than with an <code class="literal">AND</code>.</p><p>The <code class="literal">common</code> terms query also supports <code class="literal">boost</code>, <code class="literal">analyzer</code> and
<code class="literal">disable_coord</code> as parameters.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Constant Score Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-common-terms-query.html">
              &nbsp;
              Common Terms Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-dis-max-query.html">Dis Max Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-constant-score-query"></a>Constant Score Query</h2></div></div></div><p>A query that wraps a filter or another query and simply returns a
constant score equal to the query boost for every document in the
filter. Maps to Lucene <code class="literal">ConstantScoreQuery</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score" : {
        "filter" : {
            "term" : { "user" : "kimchy"}
        },
        "boost" : 1.2
    }
}</pre></div><p>The filter object can hold only filter elements, not queries. Filters
can be much faster compared to queries since they dont perform any
scoring, especially when they are cached.</p><p>A query can also be wrapped in a <code class="literal">constant_score</code> query:</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score" : {
        "query" : {
            "term" : { "user" : "kimchy"}
        },
        "boost" : 1.2
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Dis Max Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-constant-score-query.html">
              &nbsp;
              Constant Score Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-filtered-query.html">Filtered Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-dis-max-query"></a>Dis Max Query</h2></div></div></div><p>A query that generates the union of documents produced by its
subqueries, and that scores each document with the maximum score for
that document as produced by any subquery, plus a tie breaking increment
for any additional matching subqueries.</p><p>This is useful when searching for a word in multiple fields with
different boost factors (so that the fields cannot be combined
equivalently into a single search field). We want the primary score to
be the one associated with the highest boost, not the sum of the field
scores (as Boolean Query would give). If the query is "albino elephant"
this ensures that "albino" matching one field and "elephant" matching
another gets a higher score than "albino" matching both fields. To get
this result, use both Boolean Query and DisjunctionMax Query: for each
term a DisjunctionMaxQuery searches for it in each field, while the set
of these DisjunctionMaxQuerys is combined into a BooleanQuery.</p><p>The tie breaker capability allows results that include the same term in
multiple fields to be judged better than results that include this term
in only the best of those multiple fields, without confusing this with
the better case of two different terms in the multiple fields.The
default <code class="literal">tie_breaker</code> is <code class="literal">0.0</code>.</p><p>This query maps to Lucene <code class="literal">DisjunctionMaxQuery</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "dis_max" : {
        "tie_breaker" : 0.7,
        "boost" : 1.2,
        "queries" : [
            {
                "term" : { "age" : 34 }
            },
            {
                "term" : { "age" : 35 }
            }
        ]
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Filtered Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-dis-max-query.html">
              &nbsp;
              Dis Max Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-flt-query.html">Fuzzy Like This Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-filtered-query"></a>Filtered Query</h2></div></div></div><p>The <code class="literal">filtered</code> query is used to combine another query with any
<a class="link" href="query-dsl-filters.html" title="Filters">filter</a>. Filters are usually faster than queries because:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
they dont have to calculate the relevance <code class="literal">_score</code> for each document    the answer is just a boolean Yes, the document matches the filter or
    No, the document does not match the filter.
</li><li class="listitem">
the results from most filters can be cached in memory, making subsequent
    executions faster.
</li></ul></div><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>Exclude as many document as you can with a filter, then query just the
documents that remain.</p></div></div><div class="pre_wrapper"><pre class="programlisting">{
  "filtered": {
    "query": {
      "match": { "tweet": "full text search" }
    },
    "filter": {
      "range": { "created": { "gte": "now-1d/d" }}
    }
  }
}</pre></div><p>The <code class="literal">filtered</code> query can be used wherever a <code class="literal">query</code> is expected, for instance,
to use the above example in search request:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET localhost:9200/_search -d '
{
  "query": {
    "filtered": { <a id="CO58-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
      "query": {
        "match": { "tweet": "full text search" }
      },
      "filter": {
        "range": { "created": { "gte": "now-1d/d" }}
      }
    }
  }
}
'</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO58-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">filtered</code> query is passed as the value of the <code class="literal">query</code>
    parameter in the search request.
</p></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_filtering_without_a_query"></a>Filtering without a query</h3></div></div></div><p>If a <code class="literal">query</code> is not specified, it defaults to the
<a class="link" href="query-dsl-match-all-query.html" title="Match All Query"><code class="literal">match_all</code> query</a>.  This means that the
<code class="literal">filtered</code> query can be used to wrap just a filter, so that it can be used
wherever a query is expected.</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET localhost:9200/_search -d '
{
  "query": {
    "filtered": { <a id="CO59-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
      "filter": {
        "range": { "created": { "gte": "now-1d/d" }}
      }
    }
  }
}
'</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO59-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
No <code class="literal">query</code> has been specified, so this request applies just the filter,
   returning all documents created since yesterday.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_multiple_filters"></a>Multiple filters</h3></div></div></div><p>Multiple filters can be applied by wrapping them in a
<a class="link" href="query-dsl-bool-filter.html" title="Bool Filter"><code class="literal">bool</code> filter</a>, for example:</p><div class="pre_wrapper"><pre class="programlisting">{
  "filtered": {
    "query": { "match": { "tweet": "full text search" }},
    "filter": {
      "bool": {
        "must": { "range": { "created": { "gte": "now-1d/d" }}},
        "should": [
          { "term": { "featured": true }},
          { "term": { "starred":  true }}
        ],
        "must_not": { "term": { "deleted": false }}
      }
    }
  }
}</pre></div><p>Similarly, multiple queries can be combined with a
<a class="link" href="query-dsl-bool-query.html" title="Bool Query"><code class="literal">bool</code> query</a>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_filter_strategy"></a>Filter strategy</h3></div></div></div><p>You can control how the filter and query are executed with the <code class="literal">strategy</code>
parameter:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" :   { ... },
        "filter" :  { ... },
        "strategy": "leap_frog"
    }
}</pre></div><div class="important admon"><div class="icon"><img alt="Important" class="images-icons-important-png"></div><div class="admon_content"><p>This is an <span class="emphasis"><em>expert-level</em></span> setting.  Most users can simply ignore it.</p></div></div><p>The <code class="literal">strategy</code> parameter accepts the following options:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">leap_frog_query_first</code>
</p>
</td><td class="entry" valign="top">
<p>
        Look for the first document matching the query, and then alternatively
        advance the query and the filter to find common matches.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">leap_frog_filter_first</code>
</p>
</td><td class="entry" valign="top">
<p>
    Look for the first document matching the filter, and then alternatively
    advance the query and the filter to find common matches.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">leap_frog</code>
</p>
</td><td class="entry" valign="top">
<p>
    Same as <code class="literal">leap_frog_query_first</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">query_first</code>
</p>
</td><td class="entry" valign="top">
<p>
    If the filter supports random access, then search for documents using the
    query, and then consult the filter to check whether there is a match.
    Otherwise fall back to <code class="literal">leap_frog_query_first</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">random_access_${threshold}</code>
</p>
</td><td class="entry" valign="top">
<p>
    If the filter supports random access and if there is at least one matching
    document among the first <code class="literal">threshold</code> ones, then apply the filter first.
    Otherwise fall back to <code class="literal">leap_frog_query_first</code>. <code class="literal">${threshold}</code> must be
    greater than or equal to <code class="literal">1</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">random_access_always</code>
</p>
</td><td class="entry" valign="top">
<p>
    Apply the filter first if it supports random access. Otherwise fall back
    to <code class="literal">leap_frog_query_first</code>.
</p>
</td></tr></tbody></table></div><p>The default strategy is to use <code class="literal">query_first</code> on filters that are not
advanceable such as geo filters and script filters, and <code class="literal">random_access_100</code> on
other filters.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Fuzzy Like This Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-filtered-query.html">
              &nbsp;
              Filtered Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-flt-field-query.html">Fuzzy Like This Field Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-flt-query"></a>Fuzzy Like This Query</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.6.0. </h3>
 This query will be removed in Elasticsearch 2.0
</div></div><p>Fuzzy like this query find documents that are "like" provided text by
running it against one or more fields.</p><div class="pre_wrapper"><pre class="programlisting">{
    "fuzzy_like_this" : {
        "fields" : ["name.first", "name.last"],
        "like_text" : "text like this one",
        "max_query_terms" : 12
    }
}</pre></div><p><code class="literal">fuzzy_like_this</code> can be shortened to <code class="literal">flt</code>.</p><p>The <code class="literal">fuzzy_like_this</code> top level parameters include:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Parameter </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">fields</code></p></td><td class="entry" align="left" valign="top"><p>A list of the fields to run the more like this query against.
Defaults to the <code class="literal">_all</code> field.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">like_text</code></p></td><td class="entry" align="left" valign="top"><p>The text to find documents like it, <span class="strong emphasis"><strong>required</strong></span>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ignore_tf</code></p></td><td class="entry" align="left" valign="top"><p>Should term frequency be ignored. Defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">max_query_terms</code></p></td><td class="entry" align="left" valign="top"><p>The maximum number of query terms that will be
included in any generated query. Defaults to <code class="literal">25</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">fuzziness</code></p></td><td class="entry" align="left" valign="top"><p>The minimum similarity of the term variants. Defaults
to <code class="literal">0.5</code>. See  <a class="xref" href="common-options.html#fuzziness" title="Fuzzinessedit">the section called Fuzziness</a>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">prefix_length</code></p></td><td class="entry" align="left" valign="top"><p>Length of required common prefix on variant terms.
Defaults to <code class="literal">0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">boost</code></p></td><td class="entry" align="left" valign="top"><p>Sets the boost value of the query. Defaults to <code class="literal">1.0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyzer</code></p></td><td class="entry" align="left" valign="top"><p>The analyzer that will be used to analyze the text.
Defaults to the analyzer associated with the field.</p></td></tr></tbody></table></div><h4><a id="_how_it_works"></a>How it Works</h4><p>Fuzzifies ALL terms provided as strings and then picks the best n
differentiating terms. In effect this mixes the behaviour of FuzzyQuery
and MoreLikeThis but with special consideration of fuzzy scoring
factors. This generally produces good results for queries where users
may provide details in a number of fields and have no knowledge of
boolean query syntax and also want a degree of fuzzy matching and a fast
query.</p><p>For each source term the fuzzy variants are held in a BooleanQuery with
no coord factor (because we are not looking for matches on multiple
variants in any one doc). Additionally, a specialized TermQuery is used
for variants and does not use that variant terms IDF because this would
favor rarer terms, such as misspellings. Instead, all variants use the
same IDF ranking (the one for the source query term) and this is
factored into the variants boost. If the source query term does not
exist in the index the average IDF of the variants is used.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Fuzzy Like This Field Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-flt-query.html">
              &nbsp;
              Fuzzy Like This Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-function-score-query.html">Function Score Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-flt-field-query"></a>Fuzzy Like This Field Query</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.6.0. </h3>
 This query will be removed in Elasticsearch 2.0
</div></div><p>The <code class="literal">fuzzy_like_this_field</code> query is the same as the <code class="literal">fuzzy_like_this</code>
query, except that it runs against a single field. It provides nicer
query DSL over the generic <code class="literal">fuzzy_like_this</code> query, and support typed
fields query (automatically wraps typed fields with type filter to match
only on the specific type).</p><div class="pre_wrapper"><pre class="programlisting">{
    "fuzzy_like_this_field" : {
        "name.first" : {
            "like_text" : "text like this one",
            "max_query_terms" : 12
        }
    }
}</pre></div><p><code class="literal">fuzzy_like_this_field</code> can be shortened to <code class="literal">flt_field</code>.</p><p>The <code class="literal">fuzzy_like_this_field</code> top level parameters include:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Parameter </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">like_text</code></p></td><td class="entry" align="left" valign="top"><p>The text to find documents like it, <span class="strong emphasis"><strong>required</strong></span>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ignore_tf</code></p></td><td class="entry" align="left" valign="top"><p>Should term frequency be ignored. Defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">max_query_terms</code></p></td><td class="entry" align="left" valign="top"><p>The maximum number of query terms that will be
included in any generated query. Defaults to <code class="literal">25</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">fuzziness</code></p></td><td class="entry" align="left" valign="top"><p>The fuzziness of the term variants. Defaults
to <code class="literal">0.5</code>. See  <a class="xref" href="common-options.html#fuzziness" title="Fuzzinessedit">the section called Fuzziness</a>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">prefix_length</code></p></td><td class="entry" align="left" valign="top"><p>Length of required common prefix on variant terms.
Defaults to <code class="literal">0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">boost</code></p></td><td class="entry" align="left" valign="top"><p>Sets the boost value of the query. Defaults to <code class="literal">1.0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyzer</code></p></td><td class="entry" align="left" valign="top"><p>The analyzer that will be used to analyze the text.
Defaults to the analyzer associated with the field.</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Function Score Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-flt-field-query.html">
              &nbsp;
              Fuzzy Like This Field Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-fuzzy-query.html">Fuzzy Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-function-score-query"></a>Function Score Query</h2></div></div></div><p>The <code class="literal">function_score</code> allows you to modify the score of documents that are
retrieved by a query. This can be useful if, for example, a score
function is computationally expensive and it is sufficient to compute
the score on a filtered set of documents.</p><p><code class="literal">function_score</code> provides the same functionality that
<code class="literal">custom_boost_factor</code>, <code class="literal">custom_score</code> and
<code class="literal">custom_filters_score</code> provided
but with additional capabilities such as distance and recency scoring (see description below).</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_using_function_score"></a>Using function score</h3></div></div></div><p>To use <code class="literal">function_score</code>, the user has to define a query and one or
several functions, that compute a new score for each document returned
by the query.</p><p><code class="literal">function_score</code> can be used with only one function like this:</p><div class="pre_wrapper"><pre class="programlisting">"function_score": {
    "(query|filter)": {},
    "boost": "boost for the whole query",
    "FUNCTION": {},  <a id="CO60-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
    "boost_mode":"(multiply|replace|...)"
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO60-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
See <a class="xref" href="query-dsl-function-score-query.html#score-functions" title="Score functions">Score functions</a> for a list of supported functions.
</p></td></tr></tbody></table></div><p>Furthermore, several functions can be combined. In this case one can
optionally choose to apply the function only if a document matches a
given filter:</p><div class="pre_wrapper"><pre class="programlisting">"function_score": {
    "(query|filter)": {},
    "boost": "boost for the whole query",
    "functions": [
        {
            "filter": {},
            "FUNCTION": {}, <a id="CO61-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            "weight": number
        },
        {
            "FUNCTION": {} <a id="CO61-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        {
            "filter": {},
            "weight": number
        }
    ],
    "max_boost": number,
    "score_mode": "(multiply|max|...)",
    "boost_mode": "(multiply|replace|...)",
    "min_score" : number
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO61-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> <a href="#CO61-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
See <a class="xref" href="query-dsl-function-score-query.html#score-functions" title="Score functions">Score functions</a> for a list of supported functions.
</p></td></tr></tbody></table></div><p>If no filter is given with a function this is equivalent to specifying
<code class="literal">"match_all": {}</code></p><p>First, each document is scored by the defined functions. The parameter
<code class="literal">score_mode</code> specifies how the computed scores are combined:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">multiply</code>
</p>
</td><td class="entry" valign="top">
<p>
scores are multiplied (default)
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">sum</code>
</p>
</td><td class="entry" valign="top">
<p>
scores are summed
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">avg</code>
</p>
</td><td class="entry" valign="top">
<p>
scores are averaged
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">first</code>
</p>
</td><td class="entry" valign="top">
<p>
the first function that has a matching filter
                is applied
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max</code>
</p>
</td><td class="entry" valign="top">
<p>
maximum score is used
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">min</code>
</p>
</td><td class="entry" valign="top">
<p>
minimum score is used
</p>
</td></tr></tbody></table></div><p>Because scores can be on different scales (for example, between 0 and 1 for decay functions but arbitrary for <code class="literal">field_value_factor</code>) and also because sometimes a different impact of functions on the score is desirable, the score of each function can be adjusted with a user defined <code class="literal">weight</code> (). The <code class="literal">weight</code> can be defined per function in the <code class="literal">functions</code> array (example above) and is multiplied with the score computed by the respective function.
If weight is given without any other function declaration, <code class="literal">weight</code> acts as a function that simply returns the <code class="literal">weight</code>.</p><p>The new score can be restricted to not exceed a certain limit by setting
the <code class="literal">max_boost</code> parameter. The default for <code class="literal">max_boost</code> is FLT_MAX.</p><p>The newly computed score is combined with the score of the
query. The parameter <code class="literal">boost_mode</code> defines how:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">multiply</code>
</p>
</td><td class="entry" valign="top">
<p>
query score and function score is multiplied (default)
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">replace</code>
</p>
</td><td class="entry" valign="top">
<p>
only function score is used, the query score is ignored
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">sum</code>
</p>
</td><td class="entry" valign="top">
<p>
query score and function score are added
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">avg</code>
</p>
</td><td class="entry" valign="top">
<p>
average
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max</code>
</p>
</td><td class="entry" valign="top">
<p>
max of query score and function score
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">min</code>
</p>
</td><td class="entry" valign="top">
<p>
min of query score and function score
</p>
</td></tr></tbody></table></div><p>By default, modifying the score does not change which documents match. To exclude
documents that do not meet a certain score threshold the <code class="literal">min_score</code> parameter can be set to the desired score threshold.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="score-functions"></a>Score functions</h3></div></div></div><p>The <code class="literal">function_score</code> query provides several types of score functions:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="link" href="query-dsl-function-score-query.html#function-script-score" title="Script score"><code class="literal">script_score</code></a>
</li><li class="listitem">
<a class="link" href="query-dsl-function-score-query.html#function-weight" title="Weight"><code class="literal">weight</code></a>
</li><li class="listitem">
<a class="link" href="query-dsl-function-score-query.html#function-random" title="Random"><code class="literal">random_score</code></a>
</li><li class="listitem">
<a class="link" href="query-dsl-function-score-query.html#function-field-value-factor" title="Field Value factor"><code class="literal">field_value_factor</code></a>
</li><li class="listitem">
<a class="link" href="query-dsl-function-score-query.html#function-decay" title="Decay functions">decay functions</a>: <code class="literal">gauss</code>, <code class="literal">linear</code>, <code class="literal">exp</code>
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="function-script-score"></a>Script score</h3></div></div></div><p>The <code class="literal">script_score</code> function allows you to wrap another query and customize
the scoring of it optionally with a computation derived from other numeric
field values in the doc using a script expression. Here is a
simple sample:</p><div class="pre_wrapper"><pre class="programlisting">"script_score" : {
    "script" : "_score * doc['my_numeric_field'].value"
}</pre></div><p>On top of the different scripting field values and expression, the
<code class="literal">_score</code> script parameter can be used to retrieve the score based on the
wrapped query.</p><p>Scripts are cached for faster execution. If the script has parameters
that it needs to take into account, it is preferable to reuse the same
script, and provide parameters to it:</p><div class="pre_wrapper"><pre class="programlisting">"script_score": {
    "lang": "lang",
    "params": {
        "param1": value1,
        "param2": value2
     },
    "script": "_score * doc['my_numeric_field'].value / pow(param1, param2)"
}</pre></div><p>Note that unlike the <code class="literal">custom_score</code> query, the
score of the query is multiplied with the result of the script scoring. If
you wish to inhibit this, set <code class="literal">"boost_mode": "replace"</code></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="function-weight"></a>Weight</h3></div></div></div><p>The <code class="literal">weight</code> score allows you to multiply the score by the provided
<code class="literal">weight</code>. This can sometimes be desired since boost value set on
specific queries gets normalized, while for this score function it does
not.</p><div class="pre_wrapper"><pre class="programlisting">"weight" : number</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="function-random"></a>Random</h4></div></div></div><p>The <code class="literal">random_score</code> generates scores using a hash of the <code class="literal">_uid</code> field,
with a <code class="literal">seed</code> for variation. If <code class="literal">seed</code> is not specified, the current
time is used.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Using this feature will load field data for <code class="literal">_uid</code>, which can
be a memory intensive operation since the values are unique.</p></div></div><div class="pre_wrapper"><pre class="programlisting">"random_score": {
    "seed" : number
}</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="function-field-value-factor"></a>Field Value factor</h3></div></div></div><p>The <code class="literal">field_value_factor</code> function allows you to use a field from a document to
influence the score. Its similar to using the <code class="literal">script_score</code> function, however,
it avoids the overhead of scripting. If used on a multi-valued field, only the
first value of the field is used in calculations.</p><p>As an example, imagine you have a document indexed with a numeric <code class="literal">popularity</code>
field and wish to influence the score of a document with this field, an example
doing so would look like:</p><div class="pre_wrapper"><pre class="programlisting">"field_value_factor": {
  "field": "popularity",
  "factor": 1.2,
  "modifier": "sqrt",
  "missing": 1
}</pre></div><p>Which will translate into the following formula for scoring:</p><p><code class="literal">sqrt(1.2 * doc['popularity'].value)</code></p><p>There are a number of options for the <code class="literal">field_value_factor</code> function:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">field</code>
</p>
</td><td class="entry" valign="top">
<p>
    Field to be extracted from the document.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">factor</code>
</p>
</td><td class="entry" valign="top">
<p>
    Optional factor to multiply the field value with, defaults to <code class="literal">1</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">modifier</code>
</p>
</td><td class="entry" valign="top">
<p>
    Modifier to apply to the field value, can be one of: <code class="literal">none</code>, <code class="literal">log</code>,
    <code class="literal">log1p</code>, <code class="literal">log2p</code>, <code class="literal">ln</code>, <code class="literal">ln1p</code>, <code class="literal">ln2p</code>, <code class="literal">square</code>, <code class="literal">sqrt</code>, or <code class="literal">reciprocal</code>.
    Defaults to <code class="literal">none</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">missing</code>
</p>
</td><td class="entry" valign="top">
<p>
    Value used if the document doesnt have that field. The modifier
    and factor are still applied to it as though it were read from the document.
</p>
</td></tr></tbody></table></div><p>Keep in mind that taking the log() of 0, or the square root of a negative number
is an illegal operation, and an exception will be thrown. Be sure to limit the
values of the field with a range filter to avoid this, or use <code class="literal">log1p</code> and
<code class="literal">ln1p</code>.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="function-decay"></a>Decay functions</h3></div></div></div><p>Decay functions score a document with a function that decays depending
on the distance of a numeric field value of the document from a user
given origin. This is similar to a range query, but with smooth edges
instead of boxes.</p><p>To use distance scoring on a query that has numerical fields, the user
has to define an <code class="literal">origin</code> and a <code class="literal">scale</code> for each field. The <code class="literal">origin</code>
is needed to define the central point from which the distance
is calculated, and the <code class="literal">scale</code> to define the rate of decay. The
decay function is specified as</p><div class="pre_wrapper"><pre class="programlisting">"DECAY_FUNCTION": { <a id="CO62-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
    "FIELD_NAME": { <a id="CO62-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
          "origin": "11, 12",
          "scale": "2km",
          "offset": "0km",
          "decay": 0.33
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO62-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">DECAY_FUNCTION</code> should be one of <code class="literal">linear</code>, <code class="literal">exp</code>, or <code class="literal">gauss</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO62-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The specified field must be a numeric field.
</p></td></tr></tbody></table></div><p>In the above example, the field is a <a class="xref" href="mapping-geo-point-type.html" title="Geo Point Type">Geo Point Type</a> and origin can be provided in geo format. <code class="literal">scale</code> and <code class="literal">offset</code> must be given with a unit in this case. If your field is a date field, you can set <code class="literal">scale</code> and <code class="literal">offset</code> as days, weeks, and so on. Example:</p><div class="pre_wrapper"><pre class="programlisting">    "gauss": {
        "date": {
              "origin": "2013-09-17", <a id="CO63-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
              "scale": "10d",
              "offset": "5d", <a id="CO63-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
              "decay" : 0.5 <a id="CO63-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span>
        }
    }</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO63-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The date format of the origin depends on the <a class="xref" href="mapping-date-format.html" title="Date Format"><em>Date Format</em></a> defined in
    your mapping. If you do not define the origin, the current time is used.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO63-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> <a href="#CO63-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">offset</code> and <code class="literal">decay</code> parameters are optional.
</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">offset</code>
</p>
</td><td class="entry" valign="top">
<p>
    If an <code class="literal">offset</code> is defined, the decay function will only compute the
    decay function for documents with a distance greater that the defined
    <code class="literal">offset</code>. The default is 0.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">decay</code>
</p>
</td><td class="entry" valign="top">
<p>
    The <code class="literal">decay</code> parameter defines how documents are scored at the distance
    given at <code class="literal">scale</code>. If no <code class="literal">decay</code> is defined, documents at the distance
    <code class="literal">scale</code> will be scored 0.5.
</p>
</td></tr></tbody></table></div></td></tr></tbody></table></div><p>In the first example, your documents might represents hotels and contain a geo
location field. You want to compute a decay function depending on how
far the hotel is from a given location. You might not immediately see
what scale to choose for the gauss function, but you can say something
like: "At a distance of 2km from the desired location, the score should
be reduced by one third."
The parameter "scale" will then be adjusted automatically to assure that
the score function computes a score of 0.5 for hotels that are 2km away
from the desired location.</p><p>In the second example, documents with a field value between 2013-09-12 and 2013-09-22 would get a weight of 1.0 and documents which are 15 days from that date a weight of 0.5.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_supported_decay_functions"></a>Supported decay functions</h4></div></div></div><p>The <code class="literal">DECAY_FUNCTION</code> determines the shape of the decay:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">gauss</code>
</span></dt><dd><p class="simpara">Normal decay, computed as:</p><p class="simpara"><span class="inlinemediaobject"><img class="images-Gaussian-png" alt="images/Gaussian.png"></span></p><p class="simpara">where <span class="inlinemediaobject"><img class="images-sigma-png" alt="images/sigma.png"></span> is computed to assure that the score takes the value <code class="literal">decay</code> at distance <code class="literal">scale</code> from <code class="literal">origin</code>+-<code class="literal">offset</code></p><p class="simpara"><span class="inlinemediaobject"><img class="images-sigma_calc-png" alt="images/sigma_calc.png"></span></p><p class="simpara">See <a class="xref" href="query-dsl-function-score-query.html#gauss-decay" title="Normal decay, keyword gauss">Normal decay, keyword <code class="literal">gauss</code></a> for graphs demonstrating the curve generated by the <code class="literal">gauss</code> function.</p></dd><dt><span class="term">
<code class="literal">exp</code>
</span></dt><dd><p class="simpara">Exponential decay, computed as:</p><p class="simpara"><span class="inlinemediaobject"><img class="images-Exponential-png" alt="images/Exponential.png"></span></p><p class="simpara">where again the parameter <span class="inlinemediaobject"><img class="images-lambda-png" alt="images/lambda.png"></span> is computed to assure that the score takes the value <code class="literal">decay</code> at distance <code class="literal">scale</code> from <code class="literal">origin</code>+-<code class="literal">offset</code></p><p class="simpara"><span class="inlinemediaobject"><img class="images-lambda_calc-png" alt="images/lambda_calc.png"></span></p><p class="simpara">See <a class="xref" href="query-dsl-function-score-query.html#exp-decay" title="Exponential decay, keyword exp">Exponential decay, keyword <code class="literal">exp</code></a> for graphs demonstrating the curve generated by the <code class="literal">exp</code> function.</p></dd><dt><span class="term">
<code class="literal">linear</code>
</span></dt><dd><p class="simpara">Linear decay, computed as:</p><p class="simpara"><span class="inlinemediaobject"><img class="images-Linear-png" alt="images/Linear.png"></span>.</p><p class="simpara">where again the parameter <code class="literal">s</code> is computed to assure that the score takes the value <code class="literal">decay</code> at distance <code class="literal">scale</code> from <code class="literal">origin</code>+-<code class="literal">offset</code></p><p class="simpara"><span class="inlinemediaobject"><img class="images-s_calc-png" alt="images/s_calc.png"></span></p><p class="simpara">In contrast to the normal and exponential decay, this function actually
sets the score to 0 if the field value exceeds twice the user given
scale value.</p><p class="simpara">See <a class="xref" href="query-dsl-function-score-query.html#linear-decay" title="Linear decay, keyword linear">Linear decay, keyword <code class="literal">linear</code></a> for graphs demonstrating the curve generated by the <code class="literal">linear</code> function.</p></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_multi_value_fields"></a>Multi-value fields:</h4></div></div></div><p>If a field used for computing the decay contains multiple values, per default the value closest to the origin is chosen for determining the distance.
This can be changed by setting <code class="literal">multi_value_mode</code>.</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">min</code>
</p>
</td><td class="entry" valign="top">
<p>
Distance is the minimum distance
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max</code>
</p>
</td><td class="entry" valign="top">
<p>
Distance is the maximum distance
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">avg</code>
</p>
</td><td class="entry" valign="top">
<p>
Distance is the average distance
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">sum</code>
</p>
</td><td class="entry" valign="top">
<p>
Distance is the sum of all distances
</p>
</td></tr></tbody></table></div><p>Example:</p><div class="pre_wrapper"><pre class="programlisting">    "DECAY_FUNCTION": {
        "FIELD_NAME": {
              "origin": ...,
              "scale": ...
        },
        "multi_value_mode": "avg"
    }</pre></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_detailed_example"></a>Detailed example</h3></div></div></div><p>Suppose you are searching for a hotel in a certain town. Your budget is
limited. Also, you would like the hotel to be close to the town center,
so the farther the hotel is from the desired location the less likely
you are to check in.</p><p>You would like the query results that match your criterion (for
example, "hotel, Nancy, non-smoker") to be scored with respect to
distance to the town center and also the price.</p><p>Intuitively, you would like to define the town center as the origin and
maybe you are willing to walk 2km to the town center from the hotel.
In this case your <span class="strong emphasis"><strong>origin</strong></span> for the location field is the town center
and the <span class="strong emphasis"><strong>scale</strong></span> is ~2km.</p><p>If your budget is low, you would probably prefer something cheap above
something expensive.  For the price field, the <span class="strong emphasis"><strong>origin</strong></span> would be 0 Euros
and the <span class="strong emphasis"><strong>scale</strong></span> depends on how much you are willing to pay, for example 20 Euros.</p><p>In this example, the fields might be called "price" for the price of the
hotel and "location" for the coordinates of this hotel.</p><p>The function for <code class="literal">price</code> in this case would be</p><div class="pre_wrapper"><pre class="programlisting">"gauss": { <a id="CO64-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
    "price": {
          "origin": "0",
          "scale": "20"
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO64-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The decay function could also be <code class="literal">linear</code> or <code class="literal">exp</code>.
</p></td></tr></tbody></table></div><p>and for <code class="literal">location</code>:</p><div class="pre_wrapper"><pre class="programlisting">"gauss": { <a id="CO65-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
    "location": {
          "origin": "11, 12",
          "scale": "2km"
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO65-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The decay function could also be <code class="literal">linear</code> or <code class="literal">exp</code>.
</p></td></tr></tbody></table></div><p>Suppose you want to multiply these two functions on the original score,
the request would look like this:</p><div class="pre_wrapper"><pre class="programlisting">GET /hotels/_search/
{
  "query": {
    "function_score": {
      "functions": [
        {
          "gauss": {
            "price": {
              "origin": "0",
              "scale": "20"
            }
          }
        },
        {
          "gauss": {
            "location": {
              "origin": "11, 12",
              "scale": "2km"
            }
          }
        }
      ],
      "query": {
        "match": {
          "properties": "balcony"
        }
      },
      "score_mode": "multiply"
    }
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/query-dsl-function-score-query/1.json"></div><p>Next, we show how the computed score looks like for each of the three
possible decay functions.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="gauss-decay"></a>Normal decay, keyword <code class="literal">gauss</code></h4></div></div></div><p>When choosing <code class="literal">gauss</code> as the decay function in the above example, the
contour and surface plot of the multiplier looks like this:</p><div class="informalfigure"><div class="mediaobject"><img src="https://f.cloud.github.com/assets/4320215/768157/cd0e18a6-e898-11e2-9b3c-f0145078bd6f.png" width="700" alt="https://f.cloud.github.com/assets/4320215/768157/cd0e18a6-e898-11e2-9b3c-f0145078bd6f.png"></div></div><div class="informalfigure"><div class="mediaobject"><img src="https://f.cloud.github.com/assets/4320215/768160/ec43c928-e898-11e2-8e0d-f3c4519dbd89.png" width="700" alt="https://f.cloud.github.com/assets/4320215/768160/ec43c928-e898-11e2-8e0d-f3c4519dbd89.png"></div></div><p>Suppose your original search results matches three hotels :</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
"Backback Nap"
</li><li class="listitem">
"Drink n Drive"
</li><li class="listitem">
"BnB Bellevue".
</li></ul></div><p>"Drink n Drive" is pretty far from your defined location (nearly 2 km)
and is not too cheap (about 13 Euros) so it gets a low factor a factor
of 0.56. "BnB Bellevue" and "Backback Nap" are both pretty close to the
defined location but "BnB Bellevue" is cheaper, so it gets a multiplier
of 0.86 whereas "Backpack Nap" gets a value of 0.66.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="exp-decay"></a>Exponential decay, keyword <code class="literal">exp</code></h4></div></div></div><p>When choosing <code class="literal">exp</code> as the decay function in the above example, the
contour and surface plot of the multiplier looks like this:</p><div class="informalfigure"><div class="mediaobject"><img src="https://f.cloud.github.com/assets/4320215/768161/082975c0-e899-11e2-86f7-174c3a729d64.png" width="700" alt="https://f.cloud.github.com/assets/4320215/768161/082975c0-e899-11e2-86f7-174c3a729d64.png"></div></div><div class="informalfigure"><div class="mediaobject"><img src="https://f.cloud.github.com/assets/4320215/768162/0b606884-e899-11e2-907b-aefc77eefef6.png" width="700" alt="https://f.cloud.github.com/assets/4320215/768162/0b606884-e899-11e2-907b-aefc77eefef6.png"></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="linear-decay"></a>Linear decay, keyword <code class="literal">linear</code></h4></div></div></div><p>When choosing <code class="literal">linear</code> as the decay function in the above example, the
contour and surface plot of the multiplier looks like this:</p><div class="informalfigure"><div class="mediaobject"><img src="https://f.cloud.github.com/assets/4320215/768164/1775b0ca-e899-11e2-9f4a-776b406305c6.png" width="700" alt="https://f.cloud.github.com/assets/4320215/768164/1775b0ca-e899-11e2-9f4a-776b406305c6.png"></div></div><div class="informalfigure"><div class="mediaobject"><img src="https://f.cloud.github.com/assets/4320215/768165/19d8b1aa-e899-11e2-91bc-6b0553e8d722.png" width="700" alt="https://f.cloud.github.com/assets/4320215/768165/19d8b1aa-e899-11e2-91bc-6b0553e8d722.png"></div></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_supported_fields_for_decay_functions"></a>Supported fields for decay functions</h3></div></div></div><p>Only numeric, date, and geo-point fields are supported.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_what_if_a_field_is_missing"></a>What if a field is missing?</h3></div></div></div><p>If the numeric field is missing in the document, the function will
return 1.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_relation_to_literal_custom_boost_literal_literal_custom_score_literal_and_literal_custom_filters_score_literal"></a>Relation to <code class="literal">custom_boost</code>, <code class="literal">custom_score</code> and <code class="literal">custom_filters_score</code></h3></div></div></div><p>The <code class="literal">custom_boost_factor</code> query</p><div class="pre_wrapper"><pre class="programlisting">"custom_boost_factor": {
    "boost_factor": 5.2,
    "query": {...}
}</pre></div><p>becomes</p><div class="pre_wrapper"><pre class="programlisting">"function_score": {
    "weight": 5.2,
    "query": {...}
}</pre></div><p>The <code class="literal">custom_score</code> query</p><div class="pre_wrapper"><pre class="programlisting">"custom_score": {
    "params": {
        "param1": 2,
        "param2": 3.1
    },
    "query": {...},
    "script": "_score * doc['my_numeric_field'].value / pow(param1, param2)"
}</pre></div><p>becomes</p><div class="pre_wrapper"><pre class="programlisting">"function_score": {
    "boost_mode": "replace",
    "query": {...},
    "script_score": {
        "params": {
            "param1": 2,
            "param2": 3.1
        },
        "script": "_score * doc['my_numeric_field'].value / pow(param1, param2)"
    }
}</pre></div><p>and the <code class="literal">custom_filters_score</code></p><div class="pre_wrapper"><pre class="programlisting">"custom_filters_score": {
    "filters": [
        {
            "boost": "3",
            "filter": {...}
        },
        {
            "filter": {...},
            "script": "_score * doc['my_numeric_field'].value / pow(param1, param2)"
        }
    ],
    "params": {
        "param1": 2,
        "param2": 3.1
    },
    "query": {...},
    "score_mode": "first"
}</pre></div><p>becomes:</p><div class="pre_wrapper"><pre class="programlisting">"function_score": {
    "functions": [
        {
            "weight": "3",
            "filter": {...}
        },
        {
            "filter": {...},
            "script_score": {
                "params": {
                    "param1": 2,
                    "param2": 3.1
                },
                "script": "_score * doc['my_numeric_field'].value / pow(param1, param2)"
            }
        }
    ],
    "query": {...},
    "score_mode": "first"
}</pre></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Fuzzy Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-function-score-query.html">
              &nbsp;
              Function Score Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-geo-shape-query.html">GeoShape Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-fuzzy-query"></a>Fuzzy Query</h2></div></div></div><p>The fuzzy query uses similarity based on Levenshtein edit distance for
<code class="literal">string</code> fields, and a <code class="literal">+/-</code> margin on numeric and date fields.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_string_fields_2"></a>String fields</h3></div></div></div><p>The <code class="literal">fuzzy</code> query generates all possible matching terms that are within  the
maximum edit distance specified in <code class="literal">fuzziness</code> and then checks the term
dictionary to find out which of those generated terms actually exist in the
index.</p><p>Here is a simple example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "fuzzy" : { "user" : "ki" }
}</pre></div><p>Or with more advanced settings:</p><div class="pre_wrapper"><pre class="programlisting">{
    "fuzzy" : {
        "user" : {
            "value" :         "ki",
            "boost" :         1.0,
            "fuzziness" :     2,
            "prefix_length" : 0,
            "max_expansions": 100
        }
    }
}</pre></div><h5><a id="_parameters_7"></a>Parameters</h5><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">fuzziness</code>
</p>
</td><td class="entry" valign="top">
<p>
    The maximum edit distance. Defaults to <code class="literal">AUTO</code>. See <a class="xref" href="common-options.html#fuzziness" title="Fuzzinessedit">the section called Fuzziness</a>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">prefix_length</code>
</p>
</td><td class="entry" valign="top">
<p>
    The number of initial characters which will not be fuzzified. This
    helps to reduce the number of terms which must be examined. Defaults
    to <code class="literal">0</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max_expansions</code>
</p>
</td><td class="entry" valign="top">
<p>
    The maximum number of terms that the <code class="literal">fuzzy</code> query will expand to.
    Defaults to <code class="literal">50</code>.
</p>
</td></tr></tbody></table></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>this query can be very heavy if <code class="literal">prefix_length</code> and <code class="literal">max_expansions</code>
are both set to <code class="literal">0</code>. This could cause every term in the index to be examined!</p></div></div><h4><a id="_numeric_and_date_fields"></a>Numeric and date fields</h4><p>Performs a <a class="xref" href="query-dsl-range-query.html" title="Range Query">Range Query</a> around the value using the
<code class="literal">fuzziness</code> value as a <code class="literal">+/-</code> range, where:</p><pre class="literallayout">-fuzziness &lt;= field value &lt;= +fuzziness</pre><p>For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "fuzzy" : {
        "price" : {
            "value" : 12,
            "fuzziness" : 2
        }
    }
}</pre></div><p>Will result in a range query between 10 and 14. Date fields support
<a class="link" href="common-options.html#time-units" title="Time unitsedit">time values</a>, eg:</p><div class="pre_wrapper"><pre class="programlisting">{
    "fuzzy" : {
        "created" : {
            "value" : "2010-02-05T12:05:07",
            "fuzziness" : "1d"
        }
    }
}</pre></div><p>See <a class="xref" href="common-options.html#fuzziness" title="Fuzzinessedit">the section called Fuzziness</a> for more details about accepted values.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">GeoShape Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-fuzzy-query.html">
              &nbsp;
              Fuzzy Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-has-child-query.html">Has Child Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-geo-shape-query"></a>GeoShape Query</h2></div></div></div><p>Query version of the
<a class="link" href="query-dsl-geo-shape-filter.html" title="GeoShape Filter">geo_shape Filter</a>.</p><p>Requires the <a class="link" href="mapping-geo-shape-type.html" title="Geo Shape Type">geo_shape Mapping</a>.</p><p>Given a document that looks like this:</p><div class="pre_wrapper"><pre class="programlisting">{
    "name": "Wind &amp; Wetter, Berlin, Germany",
    "location": {
        "type": "Point",
        "coordinates": [13.400544, 52.530286]
    }
}</pre></div><p>The following query will find the point:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query": {
        "geo_shape": {
            "location": {
                "shape": {
                    "type": "envelope",
                    "coordinates": [[13, 53],[14, 52]]
                }
            }
        }
    }
}</pre></div><p>See the Filters documentation for more information.</p><h4><a id="_relevancy_and_score"></a>Relevancy and Score</h4><p>Currently Elasticsearch does not have any notion of geo shape relevancy,
consequently the Query internally uses a <code class="literal">constant_score</code> Query which
wraps a <a class="link" href="query-dsl-geo-shape-filter.html" title="GeoShape Filter">geo_shape filter</a>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_spatial_relations"></a>Spatial Relations</h3></div></div></div><p>The <a class="link" href="mapping-geo-shape-type.html#spatial-strategy" title="Spatial strategiesedit">geo_shape strategy</a> mapping parameter determines
which spatial relation operators may be used at search time.</p><p>The following is a complete list of spatial relation operators available:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">INTERSECTS</code> - (default) Return all documents whose <code class="literal">geo_shape</code> field
intersects the query geometry.
</li><li class="listitem">
<code class="literal">DISJOINT</code> - Return all documents whose <code class="literal">geo_shape</code> field
has nothing in common with the query geometry.
</li><li class="listitem">
<code class="literal">WITHIN</code> - Return all documents whose <code class="literal">geo_shape</code> field
is within the query geometry.
</li></ul></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Has Child Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-geo-shape-query.html">
              &nbsp;
              GeoShape Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-has-parent-query.html">Has Parent Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-has-child-query"></a>Has Child Query</h2></div></div></div><p>The <code class="literal">has_child</code> query works the same as the
<a class="link" href="query-dsl-has-child-filter.html" title="Has Child Filter">has_child</a> filter,
by automatically wrapping the filter with a
<a class="link" href="query-dsl-constant-score-query.html" title="Constant Score Query">constant_score</a>
(when using the default score type). It has the same syntax as the
<a class="link" href="query-dsl-has-child-filter.html" title="Has Child Filter">has_child</a> filter:</p><div class="pre_wrapper"><pre class="programlisting">{
    "has_child" : {
        "type" : "blog_tag",
        "query" : {
            "term" : {
                "tag" : "something"
            }
        }
    }
}</pre></div><p>An important difference with the <code class="literal">top_children</code> query is that this query
is always executed in two iterations whereas the <code class="literal">top_children</code> query
can be executed in one or more iteration. When using the <code class="literal">has_child</code>
query the <code class="literal">total_hits</code> is always correct.</p><h4><a id="_scoring_capabilities"></a>Scoring capabilities</h4><p>The <code class="literal">has_child</code> also has scoring support. The
supported score types are <code class="literal">min</code>, <code class="literal">max</code>, <code class="literal">sum</code>, <code class="literal">avg</code> or <code class="literal">none</code>. The default is
<code class="literal">none</code> and yields the same behaviour as in previous versions. If the
score type is set to another value than <code class="literal">none</code>, the scores of all the
matching child documents are aggregated into the associated parent
documents. The score type can be specified with the <code class="literal">score_mode</code> field
inside the <code class="literal">has_child</code> query:</p><div class="pre_wrapper"><pre class="programlisting">{
    "has_child" : {
        "type" : "blog_tag",
        "score_mode" : "sum",
        "query" : {
            "term" : {
                "tag" : "something"
            }
        }
    }
}</pre></div><h4><a id="_min_max_children"></a>Min/Max Children</h4><p>The <code class="literal">has_child</code> query allows you to specify that a minimum and/or maximum
number of children are required to match for the parent doc to be considered
a match:</p><div class="pre_wrapper"><pre class="programlisting">{
    "has_child" : {
        "type" : "blog_tag",
        "score_mode" : "sum",
        "min_children": 2, <a id="CO66-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        "max_children": 10, <a id="CO66-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        "query" : {
            "term" : {
                "tag" : "something"
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO66-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> <a href="#CO66-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Both <code class="literal">min_children</code> and <code class="literal">max_children</code> are optional.
</p></td></tr></tbody></table></div><p>The  <code class="literal">min_children</code> and <code class="literal">max_children</code> parameters can be combined with
the <code class="literal">score_mode</code> parameter.</p><h4><a id="_memory_considerations_5"></a>Memory Considerations</h4><p>In order to support parent-child joins, all of the (string) parent IDs
must be resident in memory (in the <a class="link" href="index-modules-fielddata.html" title="Field data">field data cache</a>.
Additionally, every child document is mapped to its parent using a long
value (approximately). It is advisable to keep the string parent ID short
in order to reduce memory usage.</p><p>You can check how much memory is being used by the ID cache using the
<a class="link" href="indices-stats.html" title="Indices Stats">indices stats</a> or <a class="link" href="cluster-nodes-stats.html" title="Nodes Stats">nodes stats</a>
APIS, eg:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET "http://localhost:9200/_stats/id_cache?pretty&amp;human"</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Has Parent Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-has-child-query.html">
              &nbsp;
              Has Child Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-ids-query.html">Ids Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-has-parent-query"></a>Has Parent Query</h2></div></div></div><p>The <code class="literal">has_parent</code> query works the same as the
<a class="link" href="query-dsl-has-parent-filter.html" title="Has Parent Filter">has_parent</a>
filter, by automatically wrapping the filter with a constant_score (when
using the default score type). It has the same syntax as the
<a class="link" href="query-dsl-has-parent-filter.html" title="Has Parent Filter">has_parent</a>
filter.</p><div class="pre_wrapper"><pre class="programlisting">{
    "has_parent" : {
        "parent_type" : "blog",
        "query" : {
            "term" : {
                "tag" : "something"
            }
        }
    }
}</pre></div><h4><a id="_scoring_capabilities_2"></a>Scoring capabilities</h4><p>The <code class="literal">has_parent</code> also has scoring support. The
supported score types are <code class="literal">score</code> or <code class="literal">none</code>. The default is <code class="literal">none</code> and
this ignores the score from the parent document. The score is in this
case equal to the boost on the <code class="literal">has_parent</code> query (Defaults to 1). If
the score type is set to <code class="literal">score</code>, then the score of the matching parent
document is aggregated into the child documents belonging to the
matching parent document. The score type can be specified with the
<code class="literal">score_mode</code> field inside the <code class="literal">has_parent</code> query:</p><div class="pre_wrapper"><pre class="programlisting">{
    "has_parent" : {
        "parent_type" : "blog",
        "score_mode" : "score",
        "query" : {
            "term" : {
                "tag" : "something"
            }
        }
    }
}</pre></div><h4><a id="_memory_considerations_6"></a>Memory Considerations</h4><p>In order to support parent-child joins, all of the (string) parent IDs
must be resident in memory (in the <a class="link" href="index-modules-fielddata.html" title="Field data">field data cache</a>.
Additionally, every child document is mapped to its parent using a long
value (approximately). It is advisable to keep the string parent ID short
in order to reduce memory usage.</p><p>You can check how much memory is being used by the ID cache using the
<a class="link" href="indices-stats.html" title="Indices Stats">indices stats</a> or <a class="link" href="cluster-nodes-stats.html" title="Nodes Stats">nodes stats</a>
APIS, eg:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET "http://localhost:9200/_stats/id_cache?pretty&amp;human"</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Ids Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-has-parent-query.html">
              &nbsp;
              Has Parent Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-indices-query.html">Indices Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-ids-query"></a>Ids Query</h2></div></div></div><p>Filters documents that only have the provided ids. Note, this filter
does not require the <a class="link" href="mapping-id-field.html" title="_id">_id</a>
field to be indexed since it works using the
<a class="link" href="mapping-uid-field.html" title="_uid">_uid</a> field.</p><div class="pre_wrapper"><pre class="programlisting">{
    "ids" : {
        "type" : "my_type",
        "values" : ["1", "4", "100"]
    }
}</pre></div><p>The <code class="literal">type</code> is optional and can be omitted, and can also accept an array
of values.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Indices Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-ids-query.html">
              &nbsp;
              Ids Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-match-all-query.html">Match All Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-indices-query"></a>Indices Query</h2></div></div></div><p>The <code class="literal">indices</code> query can be used when executed across multiple indices,
allowing to have a query that executes only when executed on an index
that matches a specific list of indices, and another query that executes
when it is executed on an index that does not match the listed indices.</p><div class="pre_wrapper"><pre class="programlisting">{
    "indices" : {
        "indices" : ["index1", "index2"],
        "query" : {
            "term" : { "tag" : "wow" }
        },
        "no_match_query" : {
            "term" : { "tag" : "kow" }
        }
    }
}</pre></div><p>You can use the <code class="literal">index</code> field to provide a single index.</p><p><code class="literal">no_match_query</code> can also have "string" value of <code class="literal">none</code> (to match no
documents), and <code class="literal">all</code> (to match all). Defaults to <code class="literal">all</code>.</p><p><code class="literal">query</code> is mandatory, as well as <code class="literal">indices</code> (or <code class="literal">index</code>).</p><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The fields order is important: if the <code class="literal">indices</code> are provided before <code class="literal">query</code>
or <code class="literal">no_match_query</code>, the related queries get parsed only against the indices
that they are going to be executed on. This is useful to avoid parsing queries
when it is not necessary and prevent potential mapping errors.</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Match All Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-indices-query.html">
              &nbsp;
              Indices Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-mlt-query.html">More Like This Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-match-all-query"></a>Match All Query</h2></div></div></div><p>A query that matches all documents. Maps to Lucene <code class="literal">MatchAllDocsQuery</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "match_all" : { }
}</pre></div><p>Which can also have boost associated with it:</p><div class="pre_wrapper"><pre class="programlisting">{
    "match_all" : { "boost" : 1.2 }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">More Like This Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-match-all-query.html">
              &nbsp;
              Match All Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-nested-query.html">Nested Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-mlt-query"></a>More Like This Query</h2></div></div></div><p>The More Like This Query (MLT Query) finds documents that are "like" a given
set of documents. In order to do so, MLT selects a set of representative terms
of these input documents, forms a query using these terms, executes the query
and returns the results. The user controls the input documents, how the terms
should be selected and how the query is formed. <code class="literal">more_like_this</code> can be
shortened to <code class="literal">mlt</code>.</p><p>The simplest use case consists of asking for documents that are similar to a
provided piece of text. Here, we are asking for all movies that have some text
similar to "Once upon a time" in their "title" and in their "description"
fields, limiting the number of selected terms to 12.</p><div class="pre_wrapper"><pre class="programlisting">{
    "more_like_this" : {
        "fields" : ["title", "description"],
        "like_text" : "Once upon a time",
        "min_term_freq" : 1,
        "max_query_terms" : 12
    }
}</pre></div><p>Another use case consists of asking for similar documents to ones already
existing in the index. In this case, the syntax to specify a document is
similar to the one used in the <a class="link" href="docs-multi-get.html" title="Multi Get API">Multi GET API</a>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "more_like_this" : {
        "fields" : ["title", "description"],
        "docs" : [
        {
            "_index" : "imdb",
            "_type" : "movies",
            "_id" : "1"
        },
        {
            "_index" : "imdb",
            "_type" : "movies",
            "_id" : "2"
        }],
        "min_term_freq" : 1,
        "max_query_terms" : 12
    }
}</pre></div><p>Finally, users can also provide documents not necessarily
present in the index using a syntax is similar to
<a class="link" href="docs-termvectors.html#docs-termvectors-artificial-doc" title="Example 3edit">artificial documents</a>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "more_like_this" : {
        "fields" : ["name.first", "name.last"],
        "docs" : [
        {
            "_index" : "marvel",
            "_type" : "quotes",
            "doc" : {
                "name": {
                    "first": "Ben",
                    "last": "Grimm"
                },
                "tweet": "You got no idea what I'd... what I'd give to be invisible."
              }
            }
        },
        {
            "_index" : "marvel",
            "_type" : "quotes",
            "_id" : "2"
        }
        ],
        "min_term_freq" : 1,
        "max_query_terms" : 12
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_how_it_works_2"></a>How it Works</h3></div></div></div><p>Suppose we wanted to find all documents similar to a given input document.
Obviously, the input document itself should be its best match for that type of
query. And the reason would be mostly, according to
<a class="ulink" href="https://lucene.apache.org/core/4_9_0/core/org/apache/lucene/search/similarities/TFIDFSimilarity.html" target="_top">Lucene scoring formula</a>,
due to the terms with the highest tf-idf. Therefore, the terms of the input
document that have the highest tf-idf are good representatives of that
document, and could be used within a disjunctive query (or <code class="literal">OR</code>) to retrieve
similar documents. The MLT query simply extracts the text from the input
document, analyzes it, usually using the same analyzer as the field, then
selects the top K terms with highest tf-idf to form a disjunctive query of
these terms.</p><div class="important admon"><div class="icon"><img alt="Important" class="images-icons-important-png"></div><div class="admon_content"><p>The fields on which to perform MLT must be indexed and of type
<code class="literal">string</code>. Additionally, when using <code class="literal">like</code> with documents, either <code class="literal">_source</code>
must be enabled or the fields must be <code class="literal">stored</code> or have <code class="literal">term_vector</code> enabled.
In order to speed up analysis, it could help to store term vectors at index
time, but at the expense of disk usage.</p></div></div><p>For example, if we wish to perform MLT on the "title" and "tags.raw" fields,
we can explicitly store their <code class="literal">term_vector</code> at index time. We can still
perform MLT on the "description" and "tags" fields, as <code class="literal">_source</code> is enabled by
default, but there will be no speed up on analysis for these fields.</p><div class="pre_wrapper"><pre class="programlisting">curl -s -XPUT 'http://localhost:9200/imdb/' -d '{
  "mappings": {
    "movies": {
      "properties": {
        "title": {
          "type": "string",
          "term_vector": "yes"
         },
         "description": {
          "type": "string"
        },
        "tags": {
          "type": "string",
          "fields" : {
            "raw": {
              "type" : "string",
              "index" : "not_analyzed",
              "term_vector" : "yes"
            }
          }
        }
      }
    }
  }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_parameters_8"></a>Parameters</h3></div></div></div><p>The only required parameters are either <code class="literal">docs</code>, <code class="literal">ids</code> or <code class="literal">like_text</code>, all
other parameters have sensible defaults. There are three types of parameters:
one to specify the document input, the other one for term selection and for
query formation.</p><h4><a id="_document_input_parameters"></a>Document Input Parameters</h4><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">docs</code>
</p>
</td><td class="entry" valign="top">
<p>
The list of documents to find documents like it. The syntax to specify
documents is similar to the one used by the <a class="link" href="docs-multi-get.html" title="Multi Get API">Multi GET API</a>.
The text is fetched from <code class="literal">fields</code> unless overridden in each document request.
The text is analyzed by the analyzer at the field, but could also be
overridden. The syntax to override the analyzer at the field follows a similar
syntax to the <code class="literal">per_field_analyzer</code> parameter of the
<a class="link" href="docs-termvectors.html#docs-termvectors-per-field-analyzer" title="Example 4edit">Term Vectors API</a>. Additionally, to
provide documents not necessarily present in the index,
<a class="link" href="docs-termvectors.html#docs-termvectors-artificial-doc" title="Example 3edit">artificial documents</a> are also supported.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">ids</code>
</p>
</td><td class="entry" valign="top">
<p>
A list of document ids, shortcut to <code class="literal">docs</code> if <code class="literal">_index</code> and <code class="literal">_type</code> are the
same as the request.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">like_text</code>
</p>
</td><td class="entry" valign="top">
<p>
The text to find documents like it. <span class="strong emphasis"><strong>required</strong></span> if <code class="literal">ids</code> or <code class="literal">docs</code> are not
specified.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">fields</code>
</p>
</td><td class="entry" valign="top">
<p>
A list of the fields to run the more like this query against. Defaults to the
<code class="literal">_all</code> field for <code class="literal">like_text</code> and to all possible fields for <code class="literal">ids</code> or <code class="literal">docs</code>.
</p>
</td></tr></tbody></table></div><h4><a id="_term_selection_parameters"></a>Term Selection Parameters</h4><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">max_query_terms</code>
</p>
</td><td class="entry" valign="top">
<p>
The maximum number of query terms that will be selected. Increasing this value
gives greater accuracy at the expense of query execution speed. Defaults to
<code class="literal">25</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">min_term_freq</code>
</p>
</td><td class="entry" valign="top">
<p>
The minimum term frequency below which the terms will be ignored from the
input document. Defaults to <code class="literal">2</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">min_doc_freq</code>
</p>
</td><td class="entry" valign="top">
<p>
The minimum document frequency below which the terms will be ignored from the
input document. Defaults to <code class="literal">5</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max_doc_freq</code>
</p>
</td><td class="entry" valign="top">
<p>
The maximum document frequency above which the terms will be ignored from the
input document. This could be useful in order to ignore highly frequent words
such as stop words. Defaults to unbounded (<code class="literal">0</code>).
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">min_word_length</code>
</p>
</td><td class="entry" valign="top">
<p>
The minimum word length below which the terms will be ignored. Defaults to <code class="literal">0</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max_word_length</code>
</p>
</td><td class="entry" valign="top">
<p>
The maximum word length above which the terms will be ignored. Defaults to unbounded (<code class="literal">0</code>).
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">stop_words</code>
</p>
</td><td class="entry" valign="top">
<p>
An array of stop words. Any word in this set is considered "uninteresting" and
ignored. If the analyzer allows for stop words, you might want to tell MLT to
explicitly ignore them, as for the purposes of document similarity it seems
reasonable to assume that "a stop word is never interesting".
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">analyzer</code>
</p>
</td><td class="entry" valign="top">
<p>
The analyzer that is used to analyze the free form text. Defaults to the
analyzer associated with the first field in <code class="literal">fields</code>.
</p>
</td></tr></tbody></table></div><h4><a id="_query_formation_parameters"></a>Query Formation Parameters</h4><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">minimum_should_match</code>
</p>
</td><td class="entry" valign="top">
<p>
After the disjunctive query has been formed, this parameter controls the
number of terms that must match. The syntax is the same as the
<a class="link" href="query-dsl-minimum-should-match.html" title="Minimum Should Match">minimum should match</a>. (Defaults to <code class="literal">"30%"</code>).
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">percent_terms_to_match</code>
</p>
</td><td class="entry" valign="top">
<p>
<span class="deprecated">
      [<span class="version">1.5.0</span>]
      <span class="detail">Deprecated in 1.5.0.
Replaced by <code class="literal">minimum_should_match</code>
</span></span>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">boost_terms</code>
</p>
</td><td class="entry" valign="top">
<p>
Each term in the formed query could be further boosted by their tf-idf score.
This sets the boost factor to use when using this feature. Defaults to
deactivated (<code class="literal">0</code>). Any other positive value activates terms boosting with the
given boost factor.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">include</code>
</p>
</td><td class="entry" valign="top">
<p>
Specifies whether the input documents should also be included in the search
results returned. Defaults to <code class="literal">false</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">boost</code>
</p>
</td><td class="entry" valign="top">
<p>
Sets the boost value of the whole query. Defaults to <code class="literal">1.0</code>.
</p>
</td></tr></tbody></table></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Nested Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-mlt-query.html">
              &nbsp;
              More Like This Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-prefix-query.html">Prefix Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-nested-query"></a>Nested Query</h2></div></div></div><p>Nested query allows to query nested objects / docs (see
<a class="link" href="mapping-nested-type.html" title="Nested Type">nested mapping</a>). The
query is executed against the nested objects / docs as if they were
indexed as separate docs (they are, internally) and resulting in the
root parent doc (or parent nested mapping). Here is a sample mapping we
will work with:</p><div class="pre_wrapper"><pre class="programlisting">{
    "type1" : {
        "properties" : {
            "obj1" : {
                "type" : "nested"
            }
        }
    }
}</pre></div><p>And here is a sample nested query usage:</p><div class="pre_wrapper"><pre class="programlisting">{
    "nested" : {
        "path" : "obj1",
        "score_mode" : "avg",
        "query" : {
            "bool" : {
                "must" : [
                    {
                        "match" : {"obj1.name" : "blue"}
                    },
                    {
                        "range" : {"obj1.count" : {"gt" : 5}}
                    }
                ]
            }
        }
    }
}</pre></div><p>The query <code class="literal">path</code> points to the nested object path, and the <code class="literal">query</code> (or
<code class="literal">filter</code>) includes the query that will run on the nested docs matching
the direct path, and joining with the root parent docs. Note that any
fields referenced inside the query must use the complete path (fully
qualified).</p><p>The <code class="literal">score_mode</code> allows to set how inner children matching affects
scoring of parent. It defaults to <code class="literal">avg</code>, but can be <code class="literal">sum</code>, <code class="literal">max</code> and
<code class="literal">none</code>.</p><p>Multi level nesting is automatically supported, and detected, resulting
in an inner nested query to automatically match the relevant nesting
level (and not root) if it exists within another nested query.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Prefix Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-nested-query.html">
              &nbsp;
              Nested Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-query-string-query.html">Query String Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-prefix-query"></a>Prefix Query</h2></div></div></div><p>Matches documents that have fields containing terms with a specified
prefix (<span class="strong emphasis"><strong>not analyzed</strong></span>). The prefix query maps to Lucene <code class="literal">PrefixQuery</code>.
The following matches documents where the user field contains a term
that starts with <code class="literal">ki</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "prefix" : { "user" : "ki" }
}</pre></div><p>A boost can also be associated with the query:</p><div class="pre_wrapper"><pre class="programlisting">{
    "prefix" : { "user" :  { "value" : "ki", "boost" : 2.0 } }
}</pre></div><p>Or :</p><div class="pre_wrapper"><pre class="programlisting">{
    "prefix" : { "user" :  { "prefix" : "ki", "boost" : 2.0 } }
}</pre></div><p>This multi term query allows you to control how it gets rewritten using the
<a class="link" href="query-dsl-multi-term-rewrite.html" title="Multi Term Query Rewrite">rewrite</a>
parameter.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Query String Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-prefix-query.html">
              &nbsp;
              Prefix Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-simple-query-string-query.html">Simple Query String Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-query-string-query"></a>Query String Query</h2></div></div></div><p>A query that uses a query parser in order to parse its content. Here is
an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query_string" : {
        "default_field" : "content",
        "query" : "this AND that OR thus"
    }
}</pre></div><p>The <code class="literal">query_string</code> top level parameters include:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Parameter </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">query</code></p></td><td class="entry" align="left" valign="top"><p>The actual query to be parsed. See <a class="xref" href="query-dsl-query-string-query.html#query-string-syntax" title="Query string syntax">Query string syntax</a>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">default_field</code></p></td><td class="entry" align="left" valign="top"><p>The default field for query terms if no prefix field
is specified. Defaults to the <code class="literal">index.query.default_field</code> index
settings, which in turn defaults to <code class="literal">_all</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">default_operator</code></p></td><td class="entry" align="left" valign="top"><p>The default operator used if no explicit operator
is specified. For example, with a default operator of <code class="literal">OR</code>, the query
<code class="literal">capital of Hungary</code> is translated to <code class="literal">capital OR of OR Hungary</code>, and
with default operator of <code class="literal">AND</code>, the same query is translated to
<code class="literal">capital AND of AND Hungary</code>. The default value is <code class="literal">OR</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyzer</code></p></td><td class="entry" align="left" valign="top"><p>The analyzer name used to analyze the query string.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">allow_leading_wildcard</code></p></td><td class="entry" align="left" valign="top"><p>When set, <code class="literal">*</code> or <code class="literal">?</code> are allowed as the first
character. Defaults to <code class="literal">true</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">lowercase_expanded_terms</code></p></td><td class="entry" align="left" valign="top"><p>Whether terms of wildcard, prefix, fuzzy,
and range queries are to be automatically lower-cased or not (since they
are not analyzed). Default it <code class="literal">true</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">enable_position_increments</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to enable position
increments in result queries. Defaults to <code class="literal">true</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">fuzzy_max_expansions</code></p></td><td class="entry" align="left" valign="top"><p>Controls the number of terms fuzzy queries will
expand to. Defaults to <code class="literal">50</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">fuzziness</code></p></td><td class="entry" align="left" valign="top"><p>Set the fuzziness for fuzzy queries. Defaults
to <code class="literal">AUTO</code>. See  <a class="xref" href="common-options.html#fuzziness" title="Fuzzinessedit">the section called Fuzziness</a> for allowed settings.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">fuzzy_prefix_length</code></p></td><td class="entry" align="left" valign="top"><p>Set the prefix length for fuzzy queries. Default
is <code class="literal">0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">phrase_slop</code></p></td><td class="entry" align="left" valign="top"><p>Sets the default slop for phrases. If zero, then exact
phrase matches are required. Default value is <code class="literal">0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">boost</code></p></td><td class="entry" align="left" valign="top"><p>Sets the boost value of the query. Defaults to <code class="literal">1.0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyze_wildcard</code></p></td><td class="entry" align="left" valign="top"><p>By default, wildcards terms in a query string are
not analyzed. By setting this value to <code class="literal">true</code>, a best effort will be
made to analyze those as well.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">auto_generate_phrase_queries</code></p></td><td class="entry" align="left" valign="top"><p>Defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">max_determinized_states</code></p></td><td class="entry" align="left" valign="top"><p>Limit on how many automaton states regexp
queries are allowed to create.  This protects against too-difficult
(e.g. exponentially hard) regexps.  Defaults to 10000.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">minimum_should_match</code></p></td><td class="entry" align="left" valign="top"><p>A value controlling how many "should" clauses
in the resulting boolean query should match. It can be an absolute value
(<code class="literal">2</code>), a percentage (<code class="literal">30%</code>) or a
<a class="link" href="query-dsl-minimum-should-match.html" title="Minimum Should Match">combination of both</a>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">lenient</code></p></td><td class="entry" align="left" valign="top"><p>If set to <code class="literal">true</code> will cause format based failures (like
providing text to a numeric field) to be ignored.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">locale</code></p></td><td class="entry" align="left" valign="top"><p>Locale that should be used for string conversions.
Defaults to <code class="literal">ROOT</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">time_zone</code></p></td><td class="entry" align="left" valign="top"><p>Time Zone to be applied to any range query related to dates. See also
<a class="ulink" href="http://www.joda.org/joda-time/apidocs/org/joda/time/DateTimeZone.html" target="_top">JODA timezone</a>.</p></td></tr></tbody></table></div><p>When a multi term query is being generated, one can control how it gets
rewritten using the
<a class="link" href="query-dsl-multi-term-rewrite.html" title="Multi Term Query Rewrite">rewrite</a>
parameter.</p><h4><a id="_default_field"></a>Default Field</h4><p>When not explicitly specifying the field to search on in the query
string syntax, the <code class="literal">index.query.default_field</code> will be used to derive
which field to search on. It defaults to <code class="literal">_all</code> field.</p><p>So, if <code class="literal">_all</code> field is disabled, it might make sense to change it to set
a different default field.</p><h4><a id="_multi_field_2"></a>Multi Field</h4><p>The <code class="literal">query_string</code> query can also run against multiple fields. Fields can be
provided via the <code class="literal">"fields"</code> parameter (example below).</p><p>The idea of running the <code class="literal">query_string</code> query against multiple fields is to
expand each query term to an OR clause like this:</p><pre class="literallayout">field1:query_term OR field2:query_term | ...</pre><p>For example, the following query</p><div class="pre_wrapper"><pre class="programlisting">{
    "query_string" : {
        "fields" : ["content", "name"],
        "query" : "this AND that"
    }
}</pre></div><p>matches the same words as</p><div class="pre_wrapper"><pre class="programlisting">{
    "query_string": {
      "query": "(content:this OR name:this) AND (content:that OR name:that)"
    }
}</pre></div><p>Since several queries are generated from the individual search terms,
combining them can be automatically done using either a <code class="literal">dis_max</code> query or a
simple <code class="literal">bool</code> query. For example (the <code class="literal">name</code> is boosted by 5 using <code class="literal">^5</code>
notation):</p><div class="pre_wrapper"><pre class="programlisting">{
    "query_string" : {
        "fields" : ["content", "name^5"],
        "query" : "this AND that OR thus",
        "use_dis_max" : true
    }
}</pre></div><p>Simple wildcard can also be used to search "within" specific inner
elements of the document. For example, if we have a <code class="literal">city</code> object with
several fields (or inner object with fields) in it, we can automatically
search on all "city" fields:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query_string" : {
        "fields" : ["city.*"],
        "query" : "this AND that OR thus",
        "use_dis_max" : true
    }
}</pre></div><p>Another option is to provide the wildcard fields search in the query
string itself (properly escaping the <code class="literal">*</code> sign), for example:
<code class="literal">city.\*:something</code>.</p><p>When running the <code class="literal">query_string</code> query against multiple fields, the
following additional parameters are allowed:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Parameter </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">use_dis_max</code></p></td><td class="entry" align="left" valign="top"><p>Should the queries be combined using <code class="literal">dis_max</code> (set it
to <code class="literal">true</code>), or a <code class="literal">bool</code> query (set it to <code class="literal">false</code>). Defaults to <code class="literal">true</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">tie_breaker</code></p></td><td class="entry" align="left" valign="top"><p>When using <code class="literal">dis_max</code>, the disjunction max tie breaker.
Defaults to <code class="literal">0</code>.</p></td></tr></tbody></table></div><p>The fields parameter can also include pattern based field names,
allowing to automatically expand to the relevant fields (dynamically
introduced fields included). For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query_string" : {
        "fields" : ["content", "name.*^5"],
        "query" : "this AND that OR thus",
        "use_dis_max" : true
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="query-string-syntax"></a>Query string syntax</h3></div></div></div><p>The query string mini-language is used by the
<a class="xref" href="query-dsl-query-string-query.html" title="Query String Query">Query String Query</a> and by the
<code class="literal">q</code> query string parameter in the <a class="link" href="search-search.html" title="Search"><code class="literal">search</code> API</a>.</p><p>The query string is parsed into a series of <span class="emphasis"><em>terms</em></span> and <span class="emphasis"><em>operators</em></span>. A
term can be a single word<code class="literal">quick</code> or <code class="literal">brown</code>or a phrase, surrounded by
double quotes<code class="literal">"quick brown"</code>which searches for all the words in the
phrase, in the same order.</p><p>Operators allow you to customize the searchthe available options are
explained below.</p><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_field_names"></a>Field names</h4></div></div></div><p>As mentioned in <a class="xref" href="query-dsl-query-string-query.html" title="Query String Query">Query String Query</a>, the <code class="literal">default_field</code> is searched for the
search terms, but it is possible to specify other fields in the query syntax:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
where the <code class="literal">status</code> field contains <code class="literal">active</code>
</p><pre class="literallayout">status:active</pre></li><li class="listitem"><p class="simpara">
where the <code class="literal">title</code> field contains <code class="literal">quick</code> or <code class="literal">brown</code>.
  If you omit the OR operator the default operator will be used
</p><pre class="literallayout">title:(quick OR brown)
title:(quick brown)</pre></li><li class="listitem"><p class="simpara">
where the <code class="literal">author</code> field contains the exact phrase <code class="literal">"john smith"</code>
</p><pre class="literallayout">author:"John Smith"</pre></li><li class="listitem"><p class="simpara">
where any of the fields <code class="literal">book.title</code>, <code class="literal">book.content</code> or <code class="literal">book.date</code> contains
  <code class="literal">quick</code> or <code class="literal">brown</code> (note how we need to escape the <code class="literal">*</code> with a backslash):
</p><pre class="literallayout">book.\*:(quick brown)</pre></li><li class="listitem"><p class="simpara">
where the field <code class="literal">title</code> has no value (or is missing):
</p><pre class="literallayout">_missing_:title</pre></li><li class="listitem"><p class="simpara">
where the field <code class="literal">title</code> has any non-null value:
</p><pre class="literallayout">_exists_:title</pre></li></ul></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_wildcards"></a>Wildcards</h4></div></div></div><p>Wildcard searches can be run on individual terms, using <code class="literal">?</code> to replace
a single character, and <code class="literal">*</code> to replace zero or more characters:</p><pre class="literallayout">qu?ck bro*</pre><p>Be aware that wildcard queries can use an enormous amount of memory and
perform very badlyjust think how many terms need to be queried to
match the query string <code class="literal">"a* b* c*"</code>.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Allowing a wildcard at the beginning of a word (eg <code class="literal">"*ing"</code>) is particularly
heavy, because all terms in the index need to be examined, just in case
they match.  Leading wildcards can be disabled by setting
<code class="literal">allow_leading_wildcard</code> to <code class="literal">false</code>.</p></div></div><p>Wildcarded terms are not analyzed by defaultthey are lowercased
(<code class="literal">lowercase_expanded_terms</code> defaults to <code class="literal">true</code>) but no further analysis
is done, mainly because it is impossible to accurately analyze a word that
is missing some of its letters.  However, by setting <code class="literal">analyze_wildcard</code> to
<code class="literal">true</code>, an attempt will be made to analyze wildcarded words before searching
the term list for matching terms.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_regular_expressions"></a>Regular expressions</h4></div></div></div><p>Regular expression patterns can be embedded in the query string by
wrapping them in forward-slashes (<code class="literal">"/"</code>):</p><pre class="literallayout">name:/joh?n(ath[oa]n)/</pre><p>The supported regular expression syntax is explained in <a class="xref" href="query-dsl-regexp-query.html#regexp-syntax" title="Regular expression syntax">Regular expression syntax</a>.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>The <code class="literal">allow_leading_wildcard</code> parameter does not have any control over
regular expressions.  A query string such as the following would force
Elasticsearch to visit every term in the index:</p><pre class="literallayout">/.*n/</pre><p>Use with caution!</p></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_fuzziness"></a>Fuzziness</h4></div></div></div><p>We can search for terms that are
similar to, but not exactly like our search terms, using the fuzzy
operator:</p><pre class="literallayout">quikc~ brwn~ foks~</pre><p>This uses the
<a class="ulink" href="http://en.wikipedia.org/wiki/Damerau-Levenshtein_distance" target="_top">Damerau-Levenshtein distance</a>
to find all terms with a maximum of
two changes, where a change is the insertion, deletion
or substitution of a single character, or transposition of two adjacent
characters.</p><p>The default <span class="emphasis"><em>edit distance</em></span> is <code class="literal">2</code>, but an edit distance of <code class="literal">1</code> should be
sufficient to catch 80% of all human misspellings. It can be specified as:</p><pre class="literallayout">quikc~1</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_proximity_searches"></a>Proximity searches</h4></div></div></div><p>While a phrase query (eg <code class="literal">"john smith"</code>) expects all of the terms in exactly
the same order, a proximity query allows the specified words to be further
apart or in a different order.  In the same way that fuzzy queries can
specify a maximum edit distance for characters in a word, a proximity search
allows us to specify a maximum edit distance of words in a phrase:</p><pre class="literallayout">"fox quick"~5</pre><p>The closer the text in a field is to the original order specified in the
query string, the more relevant that document is considered to be. When
compared to the above example query, the phrase <code class="literal">"quick fox"</code> would be
considered more relevant than <code class="literal">"quick brown fox"</code>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_ranges_2"></a>Ranges</h4></div></div></div><p>Ranges can be specified for date, numeric or string fields. Inclusive ranges
are specified with square brackets <code class="literal">[min TO max]</code> and exclusive ranges with
curly brackets <code class="literal">{min TO max}</code>.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
All days in 2012:
</p><pre class="literallayout">date:[2012-01-01 TO 2012-12-31]</pre></li><li class="listitem"><p class="simpara">
Numbers 1..5
</p><pre class="literallayout">count:[1 TO 5]</pre></li><li class="listitem"><p class="simpara">
Tags between <code class="literal">alpha</code> and <code class="literal">omega</code>, excluding <code class="literal">alpha</code> and <code class="literal">omega</code>:
</p><pre class="literallayout">tag:{alpha TO omega}</pre></li><li class="listitem"><p class="simpara">
Numbers from 10 upwards
</p><pre class="literallayout">count:[10 TO *]</pre></li><li class="listitem"><p class="simpara">
Dates before 2012
</p><pre class="literallayout">date:{* TO 2012-01-01}</pre></li></ul></div><p>Curly and square brackets can be combined:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
Numbers from 1 up to but not including 5
</p><pre class="literallayout">count:[1 TO 5}</pre></li></ul></div><p>Ranges with one side unbounded can use the following syntax:</p><pre class="literallayout">age:&gt;10
age:&gt;=10
age:&lt;10
age:&lt;=10</pre><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>To combine an upper and lower bound with the simplified syntax, you
would need to join two clauses with an <code class="literal">AND</code> operator:</p><pre class="literallayout">age:(&gt;=10 AND &lt;20)
age:(+&gt;=10 +&lt;20)</pre></div></div><p>The parsing of ranges in query strings can be complex and error prone. It is
much more reliable to use an explicit <a class="link" href="query-dsl-range-filter.html" title="Range Filter"><code class="literal">range</code> filter</a>.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_boosting"></a>Boosting</h4></div></div></div><p>Use the <span class="emphasis"><em>boost</em></span> operator <code class="literal">^</code> to make one term more relevant than another.
For instance, if we want to find all documents about foxes, but we are
especially interested in quick foxes:</p><pre class="literallayout">quick^2 fox</pre><p>The default <code class="literal">boost</code> value is 1, but can be any positive floating point number.
Boosts between 0 and 1 reduce relevance.</p><p>Boosts can also be applied to phrases or to groups:</p><pre class="literallayout">"john smith"^2   (foo bar)^4</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_boolean_operators"></a>Boolean operators</h4></div></div></div><p>By default, all terms are optional, as long as one term matches.  A search
for <code class="literal">foo bar baz</code> will find any document that contains one or more of
<code class="literal">foo</code> or <code class="literal">bar</code> or <code class="literal">baz</code>.  We have already discussed the <code class="literal">default_operator</code>
above which allows you to force all terms to be required, but there are
also <span class="emphasis"><em>boolean operators</em></span> which can be used in the query string itself
to provide more control.</p><p>The preferred operators are <code class="literal">+</code> (this term <span class="strong emphasis"><strong>must</strong></span> be present) and <code class="literal">-</code>
(this term <span class="strong emphasis"><strong>must not</strong></span> be present). All other terms are optional.
For example, this query:</p><pre class="literallayout">quick brown +fox -news</pre><p>states that:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">fox</code> must be present
</li><li class="listitem">
<code class="literal">news</code> must not be present
</li><li class="listitem">
<code class="literal">quick</code> and <code class="literal">brown</code> are optionaltheir presence increases the relevance
</li></ul></div><p>The familiar operators <code class="literal">AND</code>, <code class="literal">OR</code> and <code class="literal">NOT</code> (also written <code class="literal">&amp;&amp;</code>, <code class="literal">||</code> and <code class="literal">!</code>)
are also supported.  However, the effects of these operators can be more
complicated than is obvious at first glance.  <code class="literal">NOT</code> takes precedence over
<code class="literal">AND</code>, which takes precedence over <code class="literal">OR</code>.  While the <code class="literal">+</code> and <code class="literal">-</code> only affect
the term to the right of the operator, <code class="literal">AND</code> and <code class="literal">OR</code> can affect the terms to
the left and right.</p><div class="sidebar"><div class="titlepage"></div><p>Rewriting the above query using <code class="literal">AND</code>, <code class="literal">OR</code> and <code class="literal">NOT</code> demonstrates the
complexity:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">quick OR brown AND fox AND NOT news</code>
</span></dt><dd>
This is incorrect, because <code class="literal">brown</code> is now a required term.
</dd><dt><span class="term">
<code class="literal">(quick OR brown) AND fox AND NOT news</code>
</span></dt><dd>
This is incorrect because at least one of <code class="literal">quick</code> or <code class="literal">brown</code> is now required
and the search for those terms would be scored differently from the original
query.
</dd><dt><span class="term">
<code class="literal">((quick AND fox) OR (brown AND fox) OR fox) AND NOT news</code>
</span></dt><dd>
This form now replicates the logic from the original query correctly, but
the relevance scoring bares little resemblance to the original.
</dd></dl></div><p>In contrast, the same query rewritten using the <a class="link" href="query-dsl-match-query.html" title="Match Query"><code class="literal">match</code> query</a>
would look like this:</p><pre class="literallayout">{
    "bool": {
        "must":     { "match": "fox"         },
        "should":   { "match": "quick brown" },
        "must_not": { "match": "news"        }
    }
}</pre></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_grouping"></a>Grouping</h4></div></div></div><p>Multiple terms or clauses can be grouped together with parentheses, to form
sub-queries:</p><pre class="literallayout">(quick OR brown) AND fox</pre><p>Groups can be used to target a particular field, or to boost the result
of a sub-query:</p><pre class="literallayout">status:(active OR pending) title:(full text search)^2</pre></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_reserved_characters"></a>Reserved characters</h4></div></div></div><p>If you need to use any of the characters which function as operators in your
query itself (and not as operators), then you should escape them with
a leading backslash. For instance, to search for <code class="literal">(1+1)=2</code>, you would
need to write your query as <code class="literal">\(1\+1\)\=2</code>.</p><p>The reserved characters are:  <code class="literal">+ - = &amp;&amp; || &gt; &lt; ! ( ) { } [ ] ^ " ~ * ? : \ /</code></p><p>Failing to escape these special characters correctly could lead to a syntax
error which prevents your query from running.</p><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Watch this space</strong></p></div></div></div><p>A space may also be a reserved character.  For instance, if you have a
synonym list which converts <code class="literal">"wi fi"</code> to <code class="literal">"wifi"</code>, a <code class="literal">query_string</code> search
for <code class="literal">"wi fi"</code> would fail. The query string parser would interpret your
query as a search for <code class="literal">"wi OR fi"</code>, while the token stored in your
index is actually <code class="literal">"wifi"</code>.  Escaping the space will protect it from
being touched by the query string parser: <code class="literal">"wi\ fi"</code>.</p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_empty_query"></a>Empty Query</h4></div></div></div><p>If the query string is empty or only contains whitespaces the query will
yield an empty result set.</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Simple Query String Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-query-string-query.html">
              &nbsp;
              Query String Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-range-query.html">Range Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-simple-query-string-query"></a>Simple Query String Query</h2></div></div></div><p>A query that uses the SimpleQueryParser to parse its context. Unlike the
regular <code class="literal">query_string</code> query, the <code class="literal">simple_query_string</code> query will never
throw an exception, and discards invalid parts of the query. Here is
an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "simple_query_string" : {
        "query": "\"fried eggs\" +(eggplant | potato) -frittata",
        "analyzer": "snowball",
        "fields": ["body^5","_all"],
        "default_operator": "and"
    }
}</pre></div><p>The <code class="literal">simple_query_string</code> top level parameters include:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Parameter </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">query</code></p></td><td class="entry" align="left" valign="top"><p>The actual query to be parsed. See below for syntax.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">fields</code></p></td><td class="entry" align="left" valign="top"><p>The fields to perform the parsed query against. Defaults to the
<code class="literal">index.query.default_field</code> index settings, which in turn defaults to <code class="literal">_all</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">default_operator</code></p></td><td class="entry" align="left" valign="top"><p>The default operator used if no explicit operator
is specified. For example, with a default operator of <code class="literal">OR</code>, the query
<code class="literal">capital of Hungary</code> is translated to <code class="literal">capital OR of OR Hungary</code>, and
with default operator of <code class="literal">AND</code>, the same query is translated to
<code class="literal">capital AND of AND Hungary</code>. The default value is <code class="literal">OR</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyzer</code></p></td><td class="entry" align="left" valign="top"><p>The analyzer used to analyze each term of the query when
creating composite queries.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">flags</code></p></td><td class="entry" align="left" valign="top"><p>Flags specifying which features of the <code class="literal">simple_query_string</code> to
enable. Defaults to <code class="literal">ALL</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">lowercase_expanded_terms</code></p></td><td class="entry" align="left" valign="top"><p>Whether terms of prefix and fuzzy queries should
be automatically lower-cased or not (since they are not analyzed). Defaults to
<code class="literal">true</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyze_wildcard</code></p></td><td class="entry" align="left" valign="top"><p>Whether terms of prefix queries should be automatically
analyzed or not. If <code class="literal">true</code> a best effort will be made to analyze the prefix. However,
some analyzers will be not able to provide a meaningful results
based just on the prefix of a term. Defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">locale</code></p></td><td class="entry" align="left" valign="top"><p>Locale that should be used for string conversions.
Defaults to <code class="literal">ROOT</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">lenient</code></p></td><td class="entry" align="left" valign="top"><p>If set to <code class="literal">true</code> will cause format based failures
(like providing text to a numeric field) to be ignored.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">minimum_should_match</code></p></td><td class="entry" align="left" valign="top"><p>The minimum number of clauses that must match for a
 document to be returned. See the
 <a class="link" href="query-dsl-minimum-should-match.html" title="Minimum Should Match"><code class="literal">minimum_should_match</code></a> documentation for the
 full list of options.</p></td></tr></tbody></table></div><h4><a id="_simple_query_string_syntax"></a>Simple Query String Syntax</h4><p>The <code class="literal">simple_query_string</code> supports the following special characters:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">+</code> signifies AND operation
</li><li class="listitem">
<code class="literal">|</code> signifies OR operation
</li><li class="listitem">
<code class="literal">-</code> negates a single token
</li><li class="listitem">
<code class="literal">"</code> wraps a number of tokens to signify a phrase for searching
</li><li class="listitem">
<code class="literal">*</code> at the end of a term signifies a prefix query
</li><li class="listitem">
<code class="literal">(</code> and <code class="literal">)</code> signify precedence
</li><li class="listitem">
<code class="literal">~N</code> after a word signifies edit distance (fuzziness)
</li><li class="listitem">
<code class="literal">~N</code> after a phrase signifies slop amount
</li></ul></div><p>In order to search for any of these special characters, they will need to
be escaped with <code class="literal">\</code>.</p><h4><a id="_default_field_2"></a>Default Field</h4><p>When not explicitly specifying the field to search on in the query
string syntax, the <code class="literal">index.query.default_field</code> will be used to derive
which field to search on. It defaults to <code class="literal">_all</code> field.</p><p>So, if <code class="literal">_all</code> field is disabled, it might make sense to change it to set
a different default field.</p><h4><a id="_multi_field_3"></a>Multi Field</h4><p>The fields parameter can also include pattern based field names,
allowing to automatically expand to the relevant fields (dynamically
introduced fields included). For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "simple_query_string" : {
        "fields" : ["content", "name.*^5"],
        "query" : "foo bar baz"
    }
}</pre></div><h4><a id="_flags"></a>Flags</h4><p><code class="literal">simple_query_string</code> support multiple flags to specify which parsing features
should be enabled. It is specified as a <code class="literal">|</code>-delimited string with the
<code class="literal">flags</code> parameter:</p><div class="pre_wrapper"><pre class="programlisting">{
    "simple_query_string" : {
        "query" : "foo | bar + baz*",
        "flags" : "OR|AND|PREFIX"
    }
}</pre></div><p>The available flags are: <code class="literal">ALL</code>, <code class="literal">NONE</code>, <code class="literal">AND</code>, <code class="literal">OR</code>, <code class="literal">NOT</code>, <code class="literal">PREFIX</code>, <code class="literal">PHRASE</code>,
<code class="literal">PRECEDENCE</code>, <code class="literal">ESCAPE</code>, <code class="literal">WHITESPACE</code>, <code class="literal">FUZZY</code>, <code class="literal">NEAR</code>, and <code class="literal">SLOP</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Range Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-simple-query-string-query.html">
              &nbsp;
              Simple Query String Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-regexp-query.html">Regexp Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-range-query"></a>Range Query</h2></div></div></div><p>Matches documents with fields that have terms within a certain range.
The type of the Lucene query depends on the field type, for <code class="literal">string</code>
fields, the <code class="literal">TermRangeQuery</code>, while for number/date fields, the query is
a <code class="literal">NumericRangeQuery</code>. The following example returns all documents where
<code class="literal">age</code> is between <code class="literal">10</code> and <code class="literal">20</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "range" : {
        "age" : {
            "gte" : 10,
            "lte" : 20,
            "boost" : 2.0
        }
    }
}</pre></div><p>The <code class="literal">range</code> query accepts the following parameters:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">gte</code>
</p>
</td><td class="entry" valign="top">
<p>
Greater-than or equal to
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">gt</code>
</p>
</td><td class="entry" valign="top">
<p>
Greater-than
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">lte</code>
</p>
</td><td class="entry" valign="top">
<p>
Less-than or equal to
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">lt</code>
</p>
</td><td class="entry" valign="top">
<p>
Less-than
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">boost</code>
</p>
</td><td class="entry" valign="top">
<p>
Sets the boost value of the query, defaults to <code class="literal">1.0</code>
</p>
</td></tr></tbody></table></div><h4><a id="_date_options"></a>Date options</h4><p>When applied on <code class="literal">date</code> fields the <code class="literal">range</code> filter accepts also a <code class="literal">time_zone</code> parameter.
The <code class="literal">time_zone</code> parameter will be applied to your input lower and upper bounds and will
move them to UTC time based date:</p><div class="pre_wrapper"><pre class="programlisting">{
    "range" : {
        "born" : {
            "gte": "2012-01-01",
            "lte": "now",
            "time_zone": "+1:00"
        }
    }
}</pre></div><p>In the above example, <code class="literal">gte</code> will be actually moved to <code class="literal">2011-12-31T23:00:00</code> UTC date.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>if you give a date with a timezone explicitly defined and use the <code class="literal">time_zone</code> parameter, <code class="literal">time_zone</code> will be
ignored. For example, setting <code class="literal">gte</code> to <code class="literal">2012-01-01T00:00:00+01:00</code> with <code class="literal">"time_zone":"+10:00"</code> will still use <code class="literal">+01:00</code> time zone.</p></div></div><p>When applied on <code class="literal">date</code> fields the <code class="literal">range</code> query accepts also a <code class="literal">format</code> parameter.
The <code class="literal">format</code> parameter will help support another date format than the one defined in mapping:</p><div class="pre_wrapper"><pre class="programlisting">{
    "range" : {
        "born" : {
            "gte": "01/01/2012",
            "lte": "2013",
            "format": "dd/MM/yyyy||yyyy"
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Regexp Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-range-query.html">
              &nbsp;
              Range Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-span-first-query.html">Span First Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-regexp-query"></a>Regexp Query</h2></div></div></div><p>The <code class="literal">regexp</code> query allows you to use regular expression term queries.
See <a class="xref" href="query-dsl-regexp-query.html#regexp-syntax" title="Regular expression syntax">Regular expression syntax</a> for details of the supported regular expression language.
The "term queries" in that first sentence means that Elasticsearch will apply
the regexp to the terms produced by the tokenizer for that field, and not
to the original text of the field.</p><p><span class="strong emphasis"><strong>Note</strong></span>: The performance of a <code class="literal">regexp</code> query heavily depends on the
regular expression chosen. Matching everything like <code class="literal">.*</code> is very slow as
well as using lookaround regular expressions. If possible, you should
try to use a long prefix before your regular expression starts. Wildcard
matchers like <code class="literal">.*?+</code> will mostly lower performance.</p><div class="pre_wrapper"><pre class="programlisting">{
    "regexp":{
        "name.first": "s.*y"
    }
}</pre></div><p>Boosting is also supported</p><div class="pre_wrapper"><pre class="programlisting">{
    "regexp":{
        "name.first":{
            "value":"s.*y",
            "boost":1.2
        }
    }
}</pre></div><p>You can also use special flags</p><div class="pre_wrapper"><pre class="programlisting">{
    "regexp":{
        "name.first": {
            "value": "s.*y",
            "flags" : "INTERSECTION|COMPLEMENT|EMPTY"
        }
    }
}</pre></div><p>Possible flags are <code class="literal">ALL</code> (default), <code class="literal">ANYSTRING</code>, <code class="literal">COMPLEMENT</code>,
<code class="literal">EMPTY</code>, <code class="literal">INTERSECTION</code>, <code class="literal">INTERVAL</code>, or <code class="literal">NONE</code>. Please check the
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/core/org/apache/lucene/util/automaton/RegExp.html" target="_top">Lucene
documentation</a> for their meaning</p><p>Regular expressions are dangerous because its easy to accidentally
create an innocuous looking one that requires an exponential number of
internal determinized automaton states (and corresponding RAM and CPU)
for Lucene to execute.  Lucene prevents these using the
<code class="literal">max_determinized_states</code> setting (defaults to 10000).  You can raise
this limit to allow more complex regular expressions to execute.</p><div class="pre_wrapper"><pre class="programlisting">{
    "regexp":{
        "name.first": {
            "value": "s.*y",
            "flags" : "INTERSECTION|COMPLEMENT|EMPTY",
            "max_determinized_states": 20000
        }
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="regexp-syntax"></a>Regular expression syntax</h3></div></div></div><p>Regular expression queries are supported by the <code class="literal">regexp</code> and the <code class="literal">query_string</code>
queries.  The Lucene regular expression engine
is not Perl-compatible but supports a smaller range of operators.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>We will not attempt to explain regular expressions, but
just explain the supported operators.</p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_standard_operators"></a>Standard operators</h4></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Anchoring
</span></dt><dd><p class="simpara">Most regular expression engines allow you to match any part of a string.
If you want the regexp pattern to start at the beginning of the string or
finish at the end of the string, then you have to <span class="emphasis"><em>anchor</em></span> it specifically,
using <code class="literal">^</code> to indicate the beginning or <code class="literal">$</code> to indicate the end.</p><p class="simpara">Lucenes patterns are always anchored.  The pattern provided must match
the entire string. For string <code class="literal">"abcde"</code>:</p><pre class="literallayout">ab.*     # match
abcd     # no match</pre></dd><dt><span class="term">
Allowed characters
</span></dt><dd><p class="simpara">Any Unicode characters may be used in the pattern, but certain characters
are reserved and must be escaped.  The standard reserved characters are:</p><pre class="literallayout">. ? + * | { } [ ] ( ) " \</pre><p class="simpara">If you enable optional features (see below) then these characters may
also be reserved:</p><pre class="literallayout"># @ &amp; &lt; &gt;  ~</pre><p class="simpara">Any reserved character can be escaped with a backslash <code class="literal">"\*"</code> including
a literal backslash character: <code class="literal">"\\"</code></p><p class="simpara">Additionally, any characters (except double quotes) are interpreted literally
when surrounded by double quotes:</p><pre class="literallayout">john"@smith.com"</pre></dd><dt><span class="term">
Match any character
</span></dt><dd><p class="simpara">The period <code class="literal">"."</code> can be used to represent any character.  For string <code class="literal">"abcde"</code>:</p><pre class="literallayout">ab...   # match
a.c.e   # match</pre></dd><dt><span class="term">
One-or-more
</span></dt><dd><p class="simpara">The plus sign <code class="literal">"+"</code> can be used to repeat the preceding shortest pattern
once or more times. For string <code class="literal">"aaabbb"</code>:</p><pre class="literallayout">a+b+        # match
aa+bb+      # match
a+.+        # match
aa+bbb+     # match</pre></dd><dt><span class="term">
Zero-or-more
</span></dt><dd><p class="simpara">The asterisk <code class="literal">"*"</code> can be used to match the preceding shortest pattern
zero-or-more times.  For string <code class="literal">"aaabbb</code>":</p><pre class="literallayout">a*b*        # match
a*b*c*      # match
.*bbb.*     # match
aaa*bbb*    # match</pre></dd><dt><span class="term">
Zero-or-one
</span></dt><dd><p class="simpara">The question mark <code class="literal">"?"</code> makes the preceding shortest pattern optional. It
matches zero or one times.  For string <code class="literal">"aaabbb"</code>:</p><pre class="literallayout">aaa?bbb?    # match
aaaa?bbbb?  # match
.....?.?    # match
aa?bb?      # no match</pre></dd><dt><span class="term">
Min-to-max
</span></dt><dd><p class="simpara">Curly brackets <code class="literal">"{}"</code> can be used to specify a minimum and (optionally)
a maximum number of times the preceding shortest pattern can repeat.  The
allowed forms are:</p><pre class="literallayout">{5}     # repeat exactly 5 times
{2,5}   # repeat at least twice and at most 5 times
{2,}    # repeat at least twice</pre><p class="simpara">For string <code class="literal">"aaabbb"</code>:</p><pre class="literallayout">a{3}b{3}        # match
a{2,4}b{2,4}    # match
a{2,}b{2,}      # match
.{3}.{3}        # match
a{4}b{4}        # no match
a{4,6}b{4,6}    # no match
a{4,}b{4,}      # no match</pre></dd><dt><span class="term">
Grouping
</span></dt><dd><p class="simpara">Parentheses <code class="literal">"()"</code> can be used to form sub-patterns. The quantity operators
listed above operate on the shortest previous pattern, which can be a group.
For string <code class="literal">"ababab"</code>:</p><pre class="literallayout">(ab)+       # match
ab(ab)+     # match
(..)+       # match
(...)+      # no match
(ab)*       # match
abab(ab)?   # match
ab(ab)?     # no match
(ab){3}     # match
(ab){1,2}   # no match</pre></dd><dt><span class="term">
Alternation
</span></dt><dd><p class="simpara">The pipe symbol <code class="literal">"|"</code> acts as an OR operator. The match will succeed if
the pattern on either the left-hand side OR the right-hand side matches.
The alternation applies to the <span class="emphasis"><em>longest pattern</em></span>, not the shortest.
For string <code class="literal">"aabb"</code>:</p><pre class="literallayout">aabb|bbaa   # match
aacc|bb     # no match
aa(cc|bb)   # match
a+|b+       # no match
a+b+|b+a+   # match
a+(b|c)+    # match</pre></dd><dt><span class="term">
Character classes
</span></dt><dd><p class="simpara">Ranges of potential characters may be represented as character classes
by enclosing them in square brackets <code class="literal">"[]"</code>. A leading <code class="literal">^</code>
negates the character class. The allowed forms are:</p><pre class="literallayout">[abc]   # 'a' or 'b' or 'c'
[a-c]   # 'a' or 'b' or 'c'
[-abc]  # '-' or 'a' or 'b' or 'c'
[abc\-] # '-' or 'a' or 'b' or 'c'
[^abc]  # any character except 'a' or 'b' or 'c'
[^a-c]  # any character except 'a' or 'b' or 'c'
[^-abc]  # any character except '-' or 'a' or 'b' or 'c'
[^abc\-] # any character except '-' or 'a' or 'b' or 'c'</pre><p class="simpara">Note that the dash <code class="literal">"-"</code> indicates a range of characeters, unless it is
the first character or if it is escaped with a backslash.</p><p class="simpara">For string <code class="literal">"abcd"</code>:</p><pre class="literallayout">ab[cd]+     # match
[a-d]+      # match
[^a-d]+     # no match</pre></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_optional_operators"></a>Optional operators</h4></div></div></div><p>These operators are available by default as the <code class="literal">flags</code> parameter defaults to <code class="literal">ALL</code>.
Different flag combinations (concatened with <code class="literal">"\"</code>) can be used to enable/disable
specific operators:</p><pre class="literallayout">{
    "regexp": {
        "username": {
            "value": "john~athon&lt;1-5&gt;",
            "flags": "COMPLEMENT|INTERVAL"
        }
    }
}</pre><div class="variablelist"><dl class="variablelist"><dt><span class="term">
Complement
</span></dt><dd><p class="simpara">The complement is probably the most useful option. The shortest pattern that
follows a tilde <code class="literal">"~"</code> is negated.  For the string <code class="literal">"abcdef"</code>:</p><pre class="literallayout">ab~df     # match
ab~cf     # no match
a~(cd)f   # match
a~(bc)f   # no match</pre><p class="simpara">Enabled with the <code class="literal">COMPLEMENT</code> or <code class="literal">ALL</code> flags.</p></dd><dt><span class="term">
Interval
</span></dt><dd><p class="simpara">The interval option enables the use of numeric ranges, enclosed by angle
brackets <code class="literal">"&lt;&gt;"</code>. For string: <code class="literal">"foo80"</code>:</p><pre class="literallayout">foo&lt;1-100&gt;     # match
foo&lt;01-100&gt;    # match
foo&lt;001-100&gt;   # no match</pre><p class="simpara">Enabled with the <code class="literal">INTERVAL</code> or <code class="literal">ALL</code> flags.</p></dd><dt><span class="term">
Intersection
</span></dt><dd><p class="simpara">The ampersand <code class="literal">"&amp;"</code> joins two patterns in a way that both of them have to
match. For string <code class="literal">"aaabbb"</code>:</p><pre class="literallayout">aaa.+&amp;.+bbb     # match
aaa&amp;bbb         # no match</pre><p class="simpara">Using this feature usually means that you should rewrite your regular
expression.</p><p class="simpara">Enabled with the <code class="literal">INTERSECTION</code> or <code class="literal">ALL</code> flags.</p></dd><dt><span class="term">
Any string
</span></dt><dd><p class="simpara">The at sign <code class="literal">"@"</code> matches any string in its entirety.  This could be combined
with the intersection and complement above to express everything except.
For instance:</p><pre class="literallayout">@&amp;~(foo.+)      # anything except string beginning with "foo"</pre><p class="simpara">Enabled with the <code class="literal">ANYSTRING</code> or <code class="literal">ALL</code> flags.</p></dd></dl></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Span First Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-regexp-query.html">
              &nbsp;
              Regexp Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-span-multi-term-query.html">Span Multi Term Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-span-first-query"></a>Span First Query</h2></div></div></div><p>Matches spans near the beginning of a field. The span first query maps
to Lucene <code class="literal">SpanFirstQuery</code>. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "span_first" : {
        "match" : {
            "span_term" : { "user" : "kimchy" }
        },
        "end" : 3
    }
}</pre></div><p>The <code class="literal">match</code> clause can be any other span type query. The <code class="literal">end</code> controls
the maximum end position permitted in a match.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Span Multi Term Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-span-first-query.html">
              &nbsp;
              Span First Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-span-near-query.html">Span Near Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-span-multi-term-query"></a>Span Multi Term Query</h2></div></div></div><p>The <code class="literal">span_multi</code> query allows you to wrap a <code class="literal">multi term query</code> (one of wildcard,
fuzzy, prefix, term, range or regexp query) as a <code class="literal">span query</code>, so
it can be nested. Example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "span_multi":{
        "match":{
            "prefix" : { "user" :  { "value" : "ki" } }
        }
    }
}</pre></div><p>A boost can also be associated with the query:</p><div class="pre_wrapper"><pre class="programlisting">{
    "span_multi":{
        "match":{
            "prefix" : { "user" :  { "value" : "ki", "boost" : 1.08 } }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Span Near Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-span-multi-term-query.html">
              &nbsp;
              Span Multi Term Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-span-not-query.html">Span Not Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-span-near-query"></a>Span Near Query</h2></div></div></div><p>Matches spans which are near one another. One can specify <span class="emphasis"><em>slop</em></span>, the
maximum number of intervening unmatched positions, as well as whether
matches are required to be in-order. The span near query maps to Lucene
<code class="literal">SpanNearQuery</code>. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "span_near" : {
        "clauses" : [
            { "span_term" : { "field" : "value1" } },
            { "span_term" : { "field" : "value2" } },
            { "span_term" : { "field" : "value3" } }
        ],
        "slop" : 12,
        "in_order" : false,
        "collect_payloads" : false
    }
}</pre></div><p>The <code class="literal">clauses</code> element is a list of one or more other span type queries
and the <code class="literal">slop</code> controls the maximum number of intervening unmatched
positions permitted.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Span Not Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-span-near-query.html">
              &nbsp;
              Span Near Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-span-or-query.html">Span Or Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-span-not-query"></a>Span Not Query</h2></div></div></div><p>Removes matches which overlap with another span query. The span not
query maps to Lucene <code class="literal">SpanNotQuery</code>. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "span_not" : {
        "include" : {
            "span_term" : { "field1" : "hoya" }
        },
        "exclude" : {
            "span_near" : {
                "clauses" : [
                    { "span_term" : { "field1" : "la" } },
                    { "span_term" : { "field1" : "hoya" } }
                ],
                "slop" : 0,
                "in_order" : true
            }
        }
    }
}</pre></div><p>The <code class="literal">include</code> and <code class="literal">exclude</code> clauses can be any span type query. The
<code class="literal">include</code> clause is the span query whose matches are filtered, and the
<code class="literal">exclude</code> clause is the span query whose matches must not overlap those
returned.</p><p>In the above example all documents with the term hoya are filtered except the ones that have <span class="emphasis"><em>la</em></span> preceding them.</p><p>Other top level options:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">pre</code>
</p>
</td><td class="entry" valign="top">
<p>
If set the amount of tokens before the include span cant have overlap with the exclude span.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">post</code>
</p>
</td><td class="entry" valign="top">
<p>
If set the amount of tokens after the include span cant have overlap with the exclude span.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">dist</code>
</p>
</td><td class="entry" valign="top">
<p>
If set the amount of tokens from within the include span cant have overlap with the exclude span. Equivalent
            of setting both <code class="literal">pre</code> and <code class="literal">post</code>.
</p>
</td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Span Or Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-span-not-query.html">
              &nbsp;
              Span Not Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-span-term-query.html">Span Term Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-span-or-query"></a>Span Or Query</h2></div></div></div><p>Matches the union of its span clauses. The span or query maps to Lucene
<code class="literal">SpanOrQuery</code>. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "span_or" : {
        "clauses" : [
            { "span_term" : { "field" : "value1" } },
            { "span_term" : { "field" : "value2" } },
            { "span_term" : { "field" : "value3" } }
        ]
    }
}</pre></div><p>The <code class="literal">clauses</code> element is a list of one or more other span type queries.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Span Term Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-span-or-query.html">
              &nbsp;
              Span Or Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-term-query.html">Term Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-span-term-query"></a>Span Term Query</h2></div></div></div><p>Matches spans containing a term. The span term query maps to Lucene
<code class="literal">SpanTermQuery</code>. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "span_term" : { "user" : "kimchy" }
}</pre></div><p>A boost can also be associated with the query:</p><div class="pre_wrapper"><pre class="programlisting">{
    "span_term" : { "user" : { "value" : "kimchy", "boost" : 2.0 } }
}</pre></div><p>Or :</p><div class="pre_wrapper"><pre class="programlisting">{
    "span_term" : { "user" : { "term" : "kimchy", "boost" : 2.0 } }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Term Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-span-term-query.html">
              &nbsp;
              Span Term Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-terms-query.html">Terms Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-term-query"></a>Term Query</h2></div></div></div><p>The <code class="literal">term</code> query finds documents that contain the <span class="strong emphasis"><strong>exact</strong></span> term specified
in the inverted index.  For instance:</p><div class="pre_wrapper"><pre class="programlisting">{
    "term" : { "user" : "Kimchy" } <a id="CO67-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO67-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Finds documents which contain the exact term <code class="literal">Kimchy</code> in the inverted index
    of the <code class="literal">user</code> field.
</p></td></tr></tbody></table></div><p>A <code class="literal">boost</code> parameter can be specified to give this <code class="literal">term</code> query a higher
relevance score than another query, for instance:</p><div class="pre_wrapper"><pre class="programlisting">GET /_search
{
  "query": {
    "bool": {
      "should": [
        {
          "term": {
            "status": {
              "value": "urgent",
              "boost": 2.0 <a id="CO68-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            }
          }
        },
        {
          "term": {
            "status": "normal" <a id="CO68-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
          }
        }
      ]
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO68-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">urgent</code> query clause has a boost of <code class="literal">2.0</code>, meaning it is twice as important
    as the query clause for <code class="literal">normal</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO68-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">normal</code> clause has the default neutral boost of <code class="literal">1.0</code>.
</p></td></tr></tbody></table></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Why doesnt the <code class="literal">term</code> query match my document?</strong></p></div></div></div><p>String fields can be <code class="literal">analyzed</code> (treated as full text, like the body of an
email), or <code class="literal">not_analyzed</code> (treated as exact values, like an email address or a
zip code).  Exact values (like numbers, dates, and <code class="literal">not_analyzed</code> strings) have
the exact value specified in the field added to the inverted index in order
to make them searchable.</p><p>By default, however, <code class="literal">string</code> fields are <code class="literal">analyzed</code>. This means that their
values are first passed through an <a class="link" href="analysis.html" title="Analysis">analyzer</a> to produce a list of
terms, which are then added to the inverted index.</p><p>There are many ways to analyze text: the default
<a class="link" href="analysis-standard-analyzer.html" title="Standard Analyzer"><code class="literal">standard</code> analyzer</a> drops most punctuation,
breaks up text into individual words, and lower cases them.    For instance,
the <code class="literal">standard</code> analyzer would turn the string Quick Brown Fox! into the
terms [<code class="literal">quick</code>, <code class="literal">brown</code>, <code class="literal">fox</code>].</p><p>This analysis process makes it possible to search for individual words
within a big block of full text.</p><p>The <code class="literal">term</code> query looks for the <span class="strong emphasis"><strong>exact</strong></span> term in the fields inverted indexit doesnt know anything about the fields analyzer.  This makes it useful for
looking up values in <code class="literal">not_analyzed</code> string fields, or in numeric or date
fields.  When querying full text fields, use the
<a class="link" href="query-dsl-match-query.html" title="Match Query"><code class="literal">match</code> query</a> instead, which understands how the field
has been analyzed.</p><p>To demonstrate, try out the example below.  First, create an index, specifying the field mappings, and index a document:</p><div class="pre_wrapper"><pre class="programlisting">PUT my_index
{
  "mappings": {
    "my_type": {
      "properties": {
        "full_text": {
          "type":  "string" <a id="CO69-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "exact_value": {
          "type":  "string",
          "index": "not_analyzed" <a id="CO69-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        }
      }
    }
  }
}

PUT my_index/my_type/1
{
  "full_text":   "Quick Foxes!", <a id="CO69-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span>
  "exact_value": "Quick Foxes!"  <a id="CO69-4"></a><span><img class="images-icons-callouts-4-png" alt=""></span>
}</pre></div><div class="sense_widget" data-snippet="snippets/query-dsl-term-query/1.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO69-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">full_text</code> field is <code class="literal">analyzed</code> by default.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO69-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">exact_value</code> field is set to be <code class="literal">not_analyzed</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO69-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">full_text</code> inverted index will contain the terms: [<code class="literal">quick</code>, <code class="literal">foxes</code>].
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO69-4"><span><img class="images-icons-callouts-4-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">exact_value</code> inverted index will contain the exact term: [<code class="literal">Quick Foxes!</code>].
</p></td></tr></tbody></table></div><p>Now, compare the results for the <code class="literal">term</code> query and the <code class="literal">match</code> query:</p><div class="pre_wrapper"><pre class="programlisting">GET my_index/my_type/_search
{
  "query": {
    "term": {
      "exact_value": "Quick Foxes!" <a id="CO70-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
    }
  }
}

GET my_index/my_type/_search
{
  "query": {
    "term": {
      "full_text": "Quick Foxes!" <a id="CO70-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
    }
  }
}

GET my_index/my_type/_search
{
  "query": {
    "term": {
      "exact_value": "foxes" <a id="CO70-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span>
    }
  }
}

GET my_index/my_type/_search
{
  "query": {
    "match": {
      "full_text": "Quick Foxes!" <a id="CO70-4"></a><span><img class="images-icons-callouts-4-png" alt=""></span>
    }
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/query-dsl-term-query/2.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO70-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This query matches because the <code class="literal">exact_value</code> field contains the exact
    term <code class="literal">Quick Foxes!</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO70-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This query does not match, because the <code class="literal">full_text</code> field only contains
    the terms <code class="literal">quick</code> and <code class="literal">foxes</code>. It does not contain the exact term
    <code class="literal">Quick Foxes!</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO70-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
A <code class="literal">term</code> query for the term <code class="literal">foxes</code> matches the <code class="literal">full_text</code> field.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO70-4"><span><img class="images-icons-callouts-4-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This <code class="literal">match</code> query on the <code class="literal">full_text</code> field first analyzes the query string,
    then looks for documents containing <code class="literal">quick</code> or <code class="literal">foxes</code> or both.
</p></td></tr></tbody></table></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Terms Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-term-query.html">
              &nbsp;
              Term Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-top-children-query.html">Top Children Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-terms-query"></a>Terms Query</h2></div></div></div><p>A query that match on any (configurable) of the provided terms. This is
a simpler syntax query for using a <code class="literal">bool</code> query with several <code class="literal">term</code>
queries in the <code class="literal">should</code> clauses. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "terms" : {
        "tags" : [ "blue", "pill" ],
        "minimum_should_match" : 1
    }
}</pre></div><p>The <code class="literal">terms</code> query is also aliased with <code class="literal">in</code> as the query name for
simpler usage.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Top Children Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-terms-query.html">
              &nbsp;
              Terms Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-wildcard-query.html">Wildcard Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-top-children-query"></a>Top Children Query</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.6.0. </h3>
 Use the has_child query instead
</div></div><p>The <code class="literal">top_children</code> query runs the child query with an estimated hits
size, and out of the hit docs, aggregates it into parent docs. If there
arent enough parent docs matching the requested from/size search
request, then it is run again with a wider (more hits) search.</p><p>The <code class="literal">top_children</code> also provide scoring capabilities, with the ability
to specify <code class="literal">max</code>, <code class="literal">sum</code> or <code class="literal">avg</code> as the score type.</p><p>One downside of using the <code class="literal">top_children</code> is that if there are more child
docs matching the required hits when executing the child query, then the
<code class="literal">total_hits</code> result of the search response will be incorrect.</p><p>How many hits are asked for in the first child query run is controlled
using the <code class="literal">factor</code> parameter (defaults to <code class="literal">5</code>). For example, when asking
for 10 parent docs (with <code class="literal">from</code> set to 0), then the child query will
execute with 50 hits expected. If not enough parents are found (in our
example 10), and there are still more child docs to query, then the
child search hits are expanded by multiplying by the
<code class="literal">incremental_factor</code> (defaults to <code class="literal">2</code>).</p><p>The required parameters are the <code class="literal">query</code> and <code class="literal">type</code> (the child type to
execute the query on). Here is an example with all different parameters,
including the default values:</p><div class="pre_wrapper"><pre class="programlisting">{
    "top_children" : {
        "type": "blog_tag",
        "query" : {
            "term" : {
                "tag" : "something"
            }
        },
        "score" : "max",
        "factor" : 5,
        "incremental_factor" : 2
    }
}</pre></div><h4><a id="_scope_2"></a>Scope</h4><p>A <code class="literal">_scope</code> can be defined on the query allowing to run facets on the
same scope name that will work against the child documents. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "top_children" : {
        "_scope" : "my_scope",
        "type": "blog_tag",
        "query" : {
            "term" : {
                "tag" : "something"
            }
        }
    }
}</pre></div><h4><a id="_memory_considerations_7"></a>Memory Considerations</h4><p>In order to support parent-child joins, all of the (string) parent IDs
must be resident in memory (in the <a class="link" href="index-modules-fielddata.html" title="Field data">field data cache</a>.
Additionally, every child document is mapped to its parent using a long
value (approximately). It is advisable to keep the string parent ID short
in order to reduce memory usage.</p><p>You can check how much memory is being used by the ID cache using the
<a class="link" href="indices-stats.html" title="Indices Stats">indices stats</a> or <a class="link" href="cluster-nodes-stats.html" title="Nodes Stats">nodes stats</a>
APIS, eg:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET "http://localhost:9200/_stats/id_cache?pretty&amp;human"</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Wildcard Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-top-children-query.html">
              &nbsp;
              Top Children Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-minimum-should-match.html">Minimum Should Match
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-wildcard-query"></a>Wildcard Query</h2></div></div></div><p>Matches documents that have fields matching a wildcard expression (<span class="strong emphasis"><strong>not
analyzed</strong></span>). Supported wildcards are <code class="literal">*</code>, which matches any character
sequence (including the empty one), and <code class="literal">?</code>, which matches any single
character. Note this query can be slow, as it needs to iterate over many
terms. In order to prevent extremely slow wildcard queries, a wildcard
term should not start with one of the wildcards <code class="literal">*</code> or <code class="literal">?</code>. The wildcard
query maps to Lucene <code class="literal">WildcardQuery</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "wildcard" : { "user" : "ki*y" }
}</pre></div><p>A boost can also be associated with the query:</p><div class="pre_wrapper"><pre class="programlisting">{
    "wildcard" : { "user" : { "value" : "ki*y", "boost" : 2.0 } }
}</pre></div><p>Or :</p><div class="pre_wrapper"><pre class="programlisting">{
    "wildcard" : { "user" : { "wildcard" : "ki*y", "boost" : 2.0 } }
}</pre></div><p>This multi term query allows to control how it gets rewritten using the
<a class="link" href="query-dsl-multi-term-rewrite.html" title="Multi Term Query Rewrite">rewrite</a>
parameter.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Minimum Should Match</span></div><div class="navheader"><span class="prev"><a href="query-dsl-wildcard-query.html">
              &nbsp;
              Wildcard Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-multi-term-rewrite.html">Multi Term Query Rewrite
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-minimum-should-match"></a>Minimum Should Match</h2></div></div></div><p>The <code class="literal">minimum_should_match</code> parameter possible values:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th class="entry" align="left" valign="top">Type </th><th class="entry" align="left" valign="top">Example </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p>Integer</p></td><td class="entry" align="left" valign="top"><p><code class="literal">3</code></p></td><td class="entry" align="left" valign="top"><p>Indicates a fixed value regardless of the number of
optional clauses.</p></td></tr><tr><td class="entry" align="left" valign="top"><p>Negative integer</p></td><td class="entry" align="left" valign="top"><p><code class="literal">-2</code></p></td><td class="entry" align="left" valign="top"><p>Indicates that the total number of optional
clauses, minus this number should be mandatory.</p></td></tr><tr><td class="entry" align="left" valign="top"><p>Percentage</p></td><td class="entry" align="left" valign="top"><p><code class="literal">75%</code></p></td><td class="entry" align="left" valign="top"><p>Indicates that this percent of the total number of
optional clauses are necessary. The number computed from the percentage
is rounded down and used as the minimum.</p></td></tr><tr><td class="entry" align="left" valign="top"><p>Negative percentage</p></td><td class="entry" align="left" valign="top"><p><code class="literal">-25%</code></p></td><td class="entry" align="left" valign="top"><p>Indicates that this percent of the total
number of optional clauses can be missing. The number computed from the
percentage is rounded down, before being subtracted from the total to
determine the minimum.</p></td></tr><tr><td class="entry" align="left" valign="top"><p>Combination</p></td><td class="entry" align="left" valign="top"><p><code class="literal">3&lt;90%</code></p></td><td class="entry" align="left" valign="top"><p>A positive integer, followed by the less-than
symbol, followed by any of the previously mentioned specifiers is a
conditional specification. It indicates that if the number of optional
clauses is equal to (or less than) the integer, they are all required,
but if its greater than the integer, the specification applies. In this
example: if there are 1 to 3 clauses they are all required, but for 4 or
more clauses only 90% are required.</p></td></tr><tr><td class="entry" align="left" valign="top"><p>Multiple combinations</p></td><td class="entry" align="left" valign="top"><p><code class="literal">2&lt;-25% 9&lt;-3</code></p></td><td class="entry" align="left" valign="top"><p>Multiple conditional
specifications can be separated by spaces, each one only being valid for
numbers greater than the one before it. In this example: if there are 1
or 2 clauses both are required, if there are 3-9 clauses all but 25% are
required, and if there are more than 9 clauses, all but three are
required.</p></td></tr></tbody></table></div><p><span class="strong emphasis"><strong>NOTE:</strong></span></p><p>When dealing with percentages, negative values can be used to get
different behavior in edge cases. 75% and -25% mean the same thing when
dealing with 4 clauses, but when dealing with 5 clauses 75% means 3 are
required, but -25% means 4 are required.</p><p>If the calculations based on the specification determine that no
optional clauses are needed, the usual rules about BooleanQueries still
apply at search time (a BooleanQuery containing no required clauses must
still match at least one optional clause)</p><p>No matter what number the calculation arrives at, a value greater than
the number of optional clauses, or a value less than 1 will never be
used. (ie: no matter how low or how high the result of the calculation
result is, the minimum number of required matches will never be lower
than 1 or greater than the number of clauses.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Multi Term Query Rewrite</span></div><div class="navheader"><span class="prev"><a href="query-dsl-minimum-should-match.html">
              &nbsp;
              Minimum Should Match</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-template-query.html">Template Query
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-multi-term-rewrite"></a>Multi Term Query Rewrite</h2></div></div></div><p>Multi term queries, like
<a class="link" href="query-dsl-wildcard-query.html" title="Wildcard Query">wildcard</a> and
<a class="link" href="query-dsl-prefix-query.html" title="Prefix Query">prefix</a> are called
multi term queries and end up going through a process of rewrite. This
also happens on the
<a class="link" href="query-dsl-query-string-query.html" title="Query String Query">query_string</a>.
All of those queries allow to control how they will get rewritten using
the <code class="literal">rewrite</code> parameter:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
When not set, or set to <code class="literal">constant_score_auto</code>, defaults to
automatically choosing either <code class="literal">constant_score_boolean</code> or
<code class="literal">constant_score_filter</code> based on query characteristics.
</li><li class="listitem">
<code class="literal">scoring_boolean</code>: A rewrite method that first translates each term
into a should clause in a boolean query, and keeps the scores as
computed by the query. Note that typically such scores are meaningless
to the user, and require non-trivial CPU to compute, so its almost
always better to use <code class="literal">constant_score_auto</code>. This rewrite method will hit
too many clauses failure if it exceeds the boolean query limit (defaults
to <code class="literal">1024</code>).
</li><li class="listitem">
<code class="literal">constant_score_boolean</code>: Similar to <code class="literal">scoring_boolean</code> except scores
are not computed. Instead, each matching document receives a constant
score equal to the querys boost. This rewrite method will hit too many
clauses failure if it exceeds the boolean query limit (defaults to
<code class="literal">1024</code>).
</li><li class="listitem">
<code class="literal">constant_score_filter</code>: A rewrite method that first creates a private
Filter by visiting each term in sequence and marking all docs for that
term. Matching documents are assigned a constant score equal to the
querys boost.
</li><li class="listitem">
<code class="literal">top_terms_N</code>: A rewrite method that first translates each term into
should clause in boolean query, and keeps the scores as computed by the
query. This rewrite method only uses the top scoring terms so it will
not overflow boolean max clause count. The <code class="literal">N</code> controls the size of the
top scoring terms to use.
</li><li class="listitem">
<code class="literal">top_terms_boost_N</code>: A rewrite method that first translates each term
into should clause in boolean query, but the scores are only computed as
the boost. This rewrite method only uses the top scoring terms so it
will not overflow the boolean max clause count. The <code class="literal">N</code> controls the
size of the top scoring terms to use.
</li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-queries.html">Queries</a></span>  <span class="breadcrumb-node">Template Query</span></div><div class="navheader"><span class="prev"><a href="query-dsl-multi-term-rewrite.html">
              &nbsp;
              Multi Term Query Rewrite</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-filters.html">Filters
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-template-query"></a>Template Query</h2></div></div></div><p>A query that accepts a query template and a map of key/value pairs to fill in
template parameters. Templating is based on Mustache. For simple token substitution all you provide
is a query containing some variable that you want to substitute and the actual
values:</p><div class="pre_wrapper"><pre class="programlisting">GET /_search
{
    "query": {
        "template": {
            "query": { "match": { "text": "{{query_string}}" }},
            "params" : {
                "query_string" : "all about search"
            }
        }
    }
}</pre></div><p>The above request is translated into:</p><div class="pre_wrapper"><pre class="programlisting">GET /_search
{
    "query": {
        "match": {
            "text": "all about search"
        }
    }
}</pre></div><p>Alternatively passing the template as an escaped string works as well:</p><div class="pre_wrapper"><pre class="programlisting">GET /_search
{
    "query": {
        "template": {
            "query": "{ \"match\": { \"text\": \"{{query_string}}\" }}", <a id="CO71-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            "params" : {
                "query_string" : "all about search"
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO71-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
New line characters (<code class="literal">\n</code>) should be escaped as <code class="literal">\\n</code> or removed,
    and quotes (<code class="literal">"</code>) should be escaped as <code class="literal">\\"</code>.
</p></td></tr></tbody></table></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_stored_templates"></a>Stored templates</h3></div></div></div><p>You can register a template by storing it in the <code class="literal">config/scripts</code> directory, in a file using the <code class="literal">.mustache</code> extension.
In order to execute the stored template, reference it by name in the <code class="literal">file</code>
parameter:</p><div class="pre_wrapper"><pre class="programlisting">GET /_search
{
    "query": {
        "template": {
            "file": "my_template", <a id="CO72-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            "params" : {
                "query_string" : "all about search"
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO72-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Name of the the query template in <code class="literal">config/scripts/</code>, i.e., <code class="literal">my_template.mustache</code>.
</p></td></tr></tbody></table></div><p>Alternatively, you can register a query template in the special <code class="literal">.scripts</code> index with:</p><div class="pre_wrapper"><pre class="programlisting">PUT /_search/template/my_template
{
    "template": { "match": { "text": "{{query_string}}" }},
}</pre></div><p>and refer to it in the <code class="literal">template</code> query with the <code class="literal">id</code> parameter:</p><div class="pre_wrapper"><pre class="programlisting">GET /_search
{
    "query": {
        "template": {
            "id": "my_template", <a id="CO73-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
            "params" : {
                "query_string" : "all about search"
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO73-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Name of the the query template in <code class="literal">config/scripts/</code>, i.e., <code class="literal">storedTemplate.mustache</code>.
</p></td></tr></tbody></table></div><p>There is also a dedicated <code class="literal">template</code> endpoint, allows you to template an entire search request.
Please see <a class="xref" href="search-template.html" title="Search Template"><em>Search Template</em></a> for more details.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-node">Filters</span></div><div class="navheader"><span class="prev"><a href="query-dsl-template-query.html">
              &nbsp;
              Template Query</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-and-filter.html">And Filter
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-filters"></a>Filters</h2></div></div></div><p>As a general rule, filters should be used instead of queries:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
for binary yes/no searches
</li><li class="listitem">
for queries on exact values
</li></ul></div><h3><a id="caching"></a>Filters and Caching</h3><p>Filters can be a great candidate for caching. Caching the result of a
filter does not require a lot of memory, and will cause other queries
executing against the same filter (same parameters) to be blazingly
fast.</p><p>Some filters already produce a result that is easily cacheable, and the
difference between caching and not caching them is the act of placing
the result in the cache or not. These filters, which include the
<a class="link" href="query-dsl-term-filter.html" title="Term Filter">term</a>,
<a class="link" href="query-dsl-terms-filter.html" title="Terms Filter">terms</a>,
<a class="link" href="query-dsl-prefix-filter.html" title="Prefix Filter">prefix</a>, and
<a class="link" href="query-dsl-range-filter.html" title="Range Filter">range</a> filters, are by
default cached and are recommended to use (compared to the equivalent
query version) when the same filter (same parameters) will be used
across multiple different queries (for example, a range filter with age
higher than 10).</p><p>Other filters, usually already working with the field data loaded into
memory, are not cached by default. Those filters are already very fast,
and the process of caching them requires extra processing in order to
allow the filter result to be used with different queries than the one
executed. These filters, including the geo,
and <a class="link" href="query-dsl-script-filter.html" title="Script Filter">script</a> filters
are not cached by default.</p><p>The last type of filters are those working with other filters. The
<a class="link" href="query-dsl-and-filter.html" title="And Filter">and</a>,
<a class="link" href="query-dsl-not-filter.html" title="Not Filter">not</a> and
<a class="link" href="query-dsl-or-filter.html" title="Or Filter">or</a> filters are not
cached as they basically just manipulate the internal filters.</p><p>All filters allow to set <code class="literal">_cache</code> element on them to explicitly control
caching. They also allow to set <code class="literal">_cache_key</code> which will be used as the
caching key for that filter. This can be handy when using very large
filters (like a terms filter with many elements in it).</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">And Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-filters.html">
              &nbsp;
              Filters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-bool-filter.html">Bool Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-and-filter"></a>And Filter</h2></div></div></div><p>A filter that matches documents using the <code class="literal">AND</code> boolean operator on other
filters. Can be placed within queries that accept a filter.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "term" : { "name.first" : "shay" }
        },
        "filter" : {
            "and" : [
                {
                    "range" : {
                        "postDate" : {
                            "from" : "2010-03-01",
                            "to" : "2010-04-01"
                        }
                    }
                },
                {
                    "prefix" : { "name.second" : "ba" }
                }
            ]
        }
    }
}</pre></div><h4><a id="_caching"></a>Caching</h4><p>The result of the filter is not cached by default. The <code class="literal">_cache</code> can be
set to <code class="literal">true</code> in order to cache it (though usually not needed). Since
the <code class="literal">_cache</code> element requires to be set on the <code class="literal">and</code> filter itself, the
structure then changes a bit to have the filters provided within a
<code class="literal">filters</code> element:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "term" : { "name.first" : "shay" }
        },
        "filter" : {
            "and" : {
                "filters": [
                    {
                        "range" : {
                            "postDate" : {
                                "from" : "2010-03-01",
                                "to" : "2010-04-01"
                            }
                        }
                    },
                    {
                        "prefix" : { "name.second" : "ba" }
                    }
                ],
                "_cache" : true
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Bool Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-and-filter.html">
              &nbsp;
              And Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-exists-filter.html">Exists Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-bool-filter"></a>Bool Filter</h2></div></div></div><p>A filter that matches documents matching boolean combinations of other
queries. Similar in concept to
<a class="link" href="query-dsl-bool-query.html" title="Bool Query">Boolean query</a>, except
that the clauses are other filters. Can be placed within queries that
accept a filter.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "query_string" : {
                "default_field" : "message",
                "query" : "elasticsearch"
            }
        },
        "filter" : {
            "bool" : {
                "must" : {
                    "term" : { "tag" : "wow" }
                },
                "must_not" : {
                    "range" : {
                        "age" : { "gte" : 10, "lt" : 20 }
                    }
                },
                "should" : [
                    {
                        "term" : { "tag" : "sometag" }
                    },
                    {
                        "term" : { "tag" : "sometagtag" }
                    }
                ]
            }
        }
    }
}</pre></div><h4><a id="_caching_2"></a>Caching</h4><p>The result of the <code class="literal">bool</code> filter is not cached by default (though
internal filters might be). The <code class="literal">_cache</code> can be set to <code class="literal">true</code> in order
to enable caching.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Exists Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-bool-filter.html">
              &nbsp;
              Bool Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-geo-bounding-box-filter.html">Geo Bounding Box Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-exists-filter"></a>Exists Filter</h2></div></div></div><p>Returns documents that have at least one non-<code class="literal">null</code> value in the original field:</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score" : {
        "filter" : {
            "exists" : { "field" : "user" }
        }
    }
}</pre></div><p>For instance, these documents would all match the above filter:</p><div class="pre_wrapper"><pre class="programlisting">{ "user": "jane" }
{ "user": "" } <a id="CO74-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
{ "user": "-" } <a id="CO74-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
{ "user": ["jane"] }
{ "user": ["jane", null ] } <a id="CO74-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO74-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
An empty string is a non-<code class="literal">null</code> value.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO74-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Even though the <code class="literal">standard</code> analyzer would emit zero tokens, the original field is non-<code class="literal">null</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO74-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
At least one non-<code class="literal">null</code> value is required.
</p></td></tr></tbody></table></div><p>These documents would <span class="strong emphasis"><strong>not</strong></span> match the above filter:</p><div class="pre_wrapper"><pre class="programlisting">{ "user": null }
{ "user": [] } <a id="CO75-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
{ "user": [null] } <a id="CO75-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
{ "foo":  "bar" } <a id="CO75-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO75-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This field has no values.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO75-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
At least one non-<code class="literal">null</code> value is required.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO75-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">user</code> field is missing completely.
</p></td></tr></tbody></table></div><h4><a id="_literal_null_value_literal_mapping"></a><code class="literal">null_value</code> mapping</h4><p>If the field mapping includes the <code class="literal">null_value</code> setting (see <a class="xref" href="mapping-core-types.html" title="Core Types">Core Types</a>)
then explicit <code class="literal">null</code> values are replaced with the specified <code class="literal">null_value</code>.  For
instance, if the <code class="literal">user</code> field were mapped as follows:</p><div class="pre_wrapper"><pre class="programlisting">  "user": {
    "type": "string",
    "null_value": "_null_"
  }</pre></div><p>then explicit <code class="literal">null</code> values would be indexed as the string <code class="literal">_null_</code>, and the
following docs would match the <code class="literal">exists</code> filter:</p><div class="pre_wrapper"><pre class="programlisting">{ "user": null }
{ "user": [null] }</pre></div><p>However, these docswithout explicit <code class="literal">null</code> valueswould still have
no values in the <code class="literal">user</code> field and thus would not match the <code class="literal">exists</code> filter:</p><div class="pre_wrapper"><pre class="programlisting">{ "user": [] }
{ "foo": "bar" }</pre></div><h4><a id="_caching_3"></a>Caching</h4><p>The result of the filter is always cached.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Geo Bounding Box Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-exists-filter.html">
              &nbsp;
              Exists Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-geo-distance-filter.html">Geo Distance Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-geo-bounding-box-filter"></a>Geo Bounding Box Filter</h2></div></div></div><p>A filter allowing to filter hits based on a point location using a
bounding box. Assuming the following indexed document:</p><div class="pre_wrapper"><pre class="programlisting">{
    "pin" : {
        "location" : {
            "lat" : 40.12,
            "lon" : -71.34
        }
    }
}</pre></div><p>Then the following simple query can be executed with a
<code class="literal">geo_bounding_box</code> filter:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_bounding_box" : {
                "pin.location" : {
                    "top_left" : {
                        "lat" : 40.73,
                        "lon" : -74.1
                    },
                    "bottom_right" : {
                        "lat" : 40.01,
                        "lon" : -71.12
                    }
                }
            }
        }
    }
}</pre></div><h4><a id="_accepted_formats_2"></a>Accepted Formats</h4><p>In much the same way the geo_point type can accept different
representation of the geo point, the filter can accept it as well:</p><h5><a id="_lat_lon_as_properties_3"></a>Lat Lon As Properties</h5><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_bounding_box" : {
                "pin.location" : {
                    "top_left" : {
                        "lat" : 40.73,
                        "lon" : -74.1
                    },
                    "bottom_right" : {
                        "lat" : 40.01,
                        "lon" : -71.12
                    }
                }
            }
        }
    }
}</pre></div><h5><a id="_lat_lon_as_array_3"></a>Lat Lon As Array</h5><p>Format in <code class="literal">[lon, lat]</code>, note, the order of lon/lat here in order to
conform with <a class="ulink" href="http://geojson.org/" target="_top">GeoJSON</a>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_bounding_box" : {
                "pin.location" : {
                    "top_left" : [-74.1, 40.73],
                    "bottom_right" : [-71.12, 40.01]
                }
            }
        }
    }
}</pre></div><h5><a id="_lat_lon_as_string_3"></a>Lat Lon As String</h5><p>Format in <code class="literal">lat,lon</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_bounding_box" : {
                "pin.location" : {
                    "top_left" : "40.73, -74.1",
                    "bottom_right" : "40.01, -71.12"
                }
            }
        }
    }
}</pre></div><h5><a id="_geohash_3"></a>Geohash</h5><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_bounding_box" : {
                "pin.location" : {
                    "top_left" : "dr5r9ydj2y73",
                    "bottom_right" : "drj7teegpus6"
                }
            }
        }
    }
}</pre></div><h4><a id="_vertices"></a>Vertices</h4><p>The vertices of the bounding box can either be set by <code class="literal">top_left</code> and
<code class="literal">bottom_right</code> or by <code class="literal">top_right</code> and <code class="literal">bottom_left</code> parameters. More
over the names <code class="literal">topLeft</code>, <code class="literal">bottomRight</code>, <code class="literal">topRight</code> and <code class="literal">bottomLeft</code>
are supported. Instead of setting the values pairwise, one can use
the simple names <code class="literal">top</code>, <code class="literal">left</code>, <code class="literal">bottom</code> and <code class="literal">right</code> to set the
values separately.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_bounding_box" : {
                "pin.location" : {
                    "top" : -74.1,
                    "left" : 40.73,
                    "bottom" : -71.12,
                    "right" : 40.01
                }
            }
        }
    }
}</pre></div><h4><a id="_geo_point_type"></a>geo_point Type</h4><p>The filter <span class="strong emphasis"><strong>requires</strong></span> the <code class="literal">geo_point</code> type to be set on the relevant
field.</p><h4><a id="_multi_location_per_document"></a>Multi Location Per Document</h4><p>The filter can work with multiple locations / points per document. Once
a single location / point matches the filter, the document will be
included in the filter</p><h4><a id="_type_2"></a>Type</h4><p>The type of the bounding box execution by default is set to <code class="literal">memory</code>,
which means in memory checks if the doc falls within the bounding box
range. In some cases, an <code class="literal">indexed</code> option will perform faster (but note
that the <code class="literal">geo_point</code> type must have lat and lon indexed in this case).
Note, when using the indexed option, multi locations per document field
are not supported. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_bounding_box" : {
                "pin.location" : {
                    "top_left" : {
                        "lat" : 40.73,
                        "lon" : -74.1
                    },
                    "bottom_right" : {
                        "lat" : 40.10,
                        "lon" : -71.12
                    }
                },
                "type" : "indexed"
            }
        }
    }
}</pre></div><h4><a id="_caching_4"></a>Caching</h4><p>The result of the filter is not cached by default. The <code class="literal">_cache</code> can be
set to <code class="literal">true</code> to cache the <span class="strong emphasis"><strong>result</strong></span> of the filter. This is handy when
the same bounding box parameters are used on several (many) other
queries. Note, the process of caching the first execution is higher when
caching (since it needs to satisfy different queries).</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Geo Distance Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-geo-bounding-box-filter.html">
              &nbsp;
              Geo Bounding Box Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-geo-distance-range-filter.html">Geo Distance Range Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-geo-distance-filter"></a>Geo Distance Filter</h2></div></div></div><p>Filters documents that include only hits that exists within a specific
distance from a geo point. Assuming the following indexed json:</p><div class="pre_wrapper"><pre class="programlisting">{
    "pin" : {
        "location" : {
            "lat" : 40.12,
            "lon" : -71.34
        }
    }
}</pre></div><p>Then the following simple query can be executed with a <code class="literal">geo_distance</code>
filter:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_distance" : {
                "distance" : "200km",
                "pin.location" : {
                    "lat" : 40,
                    "lon" : -70
                }
            }
        }
    }
}</pre></div><h4><a id="_accepted_formats_3"></a>Accepted Formats</h4><p>In much the same way the <code class="literal">geo_point</code> type can accept different
representation of the geo point, the filter can accept it as well:</p><h5><a id="_lat_lon_as_properties_4"></a>Lat Lon As Properties</h5><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_distance" : {
                "distance" : "12km",
                "pin.location" : {
                    "lat" : 40,
                    "lon" : -70
                }
            }
        }
    }
}</pre></div><h5><a id="_lat_lon_as_array_4"></a>Lat Lon As Array</h5><p>Format in <code class="literal">[lon, lat]</code>, note, the order of lon/lat here in order to
conform with <a class="ulink" href="http://geojson.org/" target="_top">GeoJSON</a>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_distance" : {
                "distance" : "12km",
                "pin.location" : [-70, 40]
            }
        }
    }
}</pre></div><h5><a id="_lat_lon_as_string_4"></a>Lat Lon As String</h5><p>Format in <code class="literal">lat,lon</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_distance" : {
                "distance" : "12km",
                "pin.location" : "40,-70"
            }
        }
    }
}</pre></div><h5><a id="_geohash_4"></a>Geohash</h5><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_distance" : {
                "distance" : "12km",
                "pin.location" : "drm3btev3e86"
            }
        }
    }
}</pre></div><h4><a id="_options_5"></a>Options</h4><p>The following are options allowed on the filter:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">distance</code>
</p>
</td><td class="entry" valign="top">
<p>
    The radius of the circle centred on the specified location. Points which
    fall into this circle are considered to be matches. The <code class="literal">distance</code> can be
    specified in various units. See <a class="xref" href="common-options.html#distance-units" title="Distance Unitsedit">the section called Distance Units</a>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">distance_type</code>
</p>
</td><td class="entry" valign="top">
<p>
    How to compute the distance. Can either be <code class="literal">sloppy_arc</code> (default), <code class="literal">arc</code> (slightly more precise but significantly slower) or <code class="literal">plane</code> (faster, but inaccurate on long distances and close to the poles).
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">optimize_bbox</code>
</p>
</td><td class="entry" valign="top">
<p>
    Whether to use the optimization of first running a bounding box check
    before the distance check. Defaults to <code class="literal">memory</code> which will do in memory
    checks. Can also have values of <code class="literal">indexed</code> to use indexed value check (make
    sure the <code class="literal">geo_point</code> type index lat lon in this case), or <code class="literal">none</code> which
    disables bounding box optimization.
</p>
</td></tr></tbody></table></div><h4><a id="_geo_point_type_2"></a>geo_point Type</h4><p>The filter <span class="strong emphasis"><strong>requires</strong></span> the <code class="literal">geo_point</code> type to be set on the relevant
field.</p><h4><a id="_multi_location_per_document_2"></a>Multi Location Per Document</h4><p>The <code class="literal">geo_distance</code> filter can work with multiple locations / points per
document. Once a single location / point matches the filter, the
document will be included in the filter.</p><h4><a id="_caching_5"></a>Caching</h4><p>The result of the filter is not cached by default. The <code class="literal">_cache</code> can be
set to <code class="literal">true</code> to cache the <span class="strong emphasis"><strong>result</strong></span> of the filter. This is handy when
the same point and distance parameters are used on several (many) other
queries. Note, the process of caching the first execution is higher when
caching (since it needs to satisfy different queries).</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Geo Distance Range Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-geo-distance-filter.html">
              &nbsp;
              Geo Distance Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-geo-polygon-filter.html">Geo Polygon Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-geo-distance-range-filter"></a>Geo Distance Range Filter</h2></div></div></div><p>Filters documents that exists within a range from a specific point:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_distance_range" : {
                "from" : "200km",
                "to" : "400km",
                "pin.location" : {
                    "lat" : 40,
                    "lon" : -70
                }
            }
        }
    }
}</pre></div><p>Supports the same point location parameter as the
<a class="link" href="query-dsl-geo-distance-filter.html" title="Geo Distance Filter">geo_distance</a>
filter. And also support the common parameters for range (lt, lte, gt,
gte, from, to, include_upper and include_lower).</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Geo Polygon Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-geo-distance-range-filter.html">
              &nbsp;
              Geo Distance Range Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-geo-shape-filter.html">GeoShape Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-geo-polygon-filter"></a>Geo Polygon Filter</h2></div></div></div><p>A filter allowing to include hits that only fall within a polygon of
points. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_polygon" : {
                "person.location" : {
                    "points" : [
                        {"lat" : 40, "lon" : -70},
                        {"lat" : 30, "lon" : -80},
                        {"lat" : 20, "lon" : -90}
                    ]
                }
            }
        }
    }
}</pre></div><h4><a id="_allowed_formats"></a>Allowed Formats</h4><h5><a id="_lat_long_as_array"></a>Lat Long as Array</h5><p>Format in <code class="literal">[lon, lat]</code>, note, the order of lon/lat here in order to
conform with <a class="ulink" href="http://geojson.org/" target="_top">GeoJSON</a>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_polygon" : {
                "person.location" : {
                    "points" : [
                        [-70, 40],
                        [-80, 30],
                        [-90, 20]
                    ]
                }
            }
        }
    }
}</pre></div><h5><a id="_lat_lon_as_string_5"></a>Lat Lon as String</h5><p>Format in <code class="literal">lat,lon</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_polygon" : {
                "person.location" : {
                    "points" : [
                        "40, -70",
                        "30, -80",
                        "20, -90"
                    ]
                }
            }
        }
    }
}</pre></div><h5><a id="_geohash_5"></a>Geohash</h5><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geo_polygon" : {
                "person.location" : {
                    "points" : [
                        "drn5x1g8cu2y",
                        "30, -80",
                        "20, -90"
                    ]
                }
            }
        }
    }
}</pre></div><h4><a id="_geo_point_type_3"></a>geo_point Type</h4><p>The filter <span class="strong emphasis"><strong>requires</strong></span> the
<a class="link" href="mapping-geo-point-type.html" title="Geo Point Type">geo_point</a> type to be
set on the relevant field.</p><h4><a id="_caching_6"></a>Caching</h4><p>The result of the filter is not cached by default. The <code class="literal">_cache</code> can be
set to <code class="literal">true</code> to cache the <span class="strong emphasis"><strong>result</strong></span> of the filter. This is handy when
the same points parameters are used on several (many) other queries.
Note, the process of caching the first execution is higher when caching
(since it needs to satisfy different queries).</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">GeoShape Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-geo-polygon-filter.html">
              &nbsp;
              Geo Polygon Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-geohash-cell-filter.html">Geohash Cell Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-geo-shape-filter"></a>GeoShape Filter</h2></div></div></div><p>Filter documents indexed using the <code class="literal">geo_shape</code> type.</p><p>Requires the <a class="link" href="mapping-geo-shape-type.html" title="Geo Shape Type">geo_shape Mapping</a>.</p><p>You may also use the
<a class="link" href="query-dsl-geo-shape-query.html" title="GeoShape Query">geo_shape Query</a>.</p><p>The <code class="literal">geo_shape</code> Filter uses the same grid square representation as the
geo_shape mapping to find documents that have a shape that intersects
with the query shape. It will also use the same PrefixTree configuration
as defined for the field mapping.</p><h4><a id="_filter_format"></a>Filter Format</h4><p>The Filter supports two ways of defining the Filter shape, either by
providing a whole shape defintion, or by referencing the name of a shape
pre-indexed in another index. Both formats are defined below with
examples.</p><h5><a id="_provided_shape_definition"></a>Provided Shape Definition</h5><p>Similar to the <code class="literal">geo_shape</code> type, the <code class="literal">geo_shape</code> Filter uses
<a class="ulink" href="http://www.geojson.org" target="_top">GeoJSON</a> to represent shapes.</p><p>Given a document that looks like this:</p><div class="pre_wrapper"><pre class="programlisting">{
    "name": "Wind &amp; Wetter, Berlin, Germany",
    "location": {
        "type": "Point",
        "coordinates": [13.400544, 52.530286]
    }
}</pre></div><p>The following query will find the point using the Elasticsearchs
<code class="literal">envelope</code> GeoJSON extension:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query":{
        "filtered": {
            "query": {
                "match_all": {}
            },
            "filter": {
                "geo_shape": {
                    "location": {
                        "shape": {
                            "type": "envelope",
                            "coordinates" : [[13.0, 53.0], [14.0, 52.0]]
                        }
                    }
                }
            }
        }
    }
}</pre></div><h5><a id="_pre_indexed_shape"></a>Pre-Indexed Shape</h5><p>The Filter also supports using a shape which has already been indexed in
another index and/or index type. This is particularly useful for when
you have a pre-defined list of shapes which are useful to your
application and you want to reference this using a logical name (for
example <span class="emphasis"><em>New Zealand</em></span>) rather than having to provide their coordinates
each time. In this situation it is only necessary to provide:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">id</code> - The ID of the document that containing the pre-indexed shape.
</li><li class="listitem">
<code class="literal">index</code> - Name of the index where the pre-indexed shape is. Defaults
to <span class="emphasis"><em>shapes</em></span>.
</li><li class="listitem">
<code class="literal">type</code> - Index type where the pre-indexed shape is.
</li><li class="listitem">
<code class="literal">path</code> - The field specified as path containing the pre-indexed shape.
Defaults to <span class="emphasis"><em>shape</em></span>.
</li></ul></div><p>The following is an example of using the Filter with a pre-indexed
shape:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered": {
        "query": {
            "match_all": {}
        },
        "filter": {
            "geo_shape": {
                "location": {
                    "indexed_shape": {
                        "id": "DEU",
                        "type": "countries",
                        "index": "shapes",
                        "path": "location"
                    }
                }
            }
        }
    }
}</pre></div><h4><a id="_caching_7"></a>Caching</h4><p>The result of the Filter is not cached by default. Setting <code class="literal">_cache</code> to
<code class="literal">true</code> will mean the results of the Filter will be cached. Since shapes
can contain 10s-100s of coordinates and any one differing means a new
shape, it may make sense to only using caching when you are sure that
the shapes will remain reasonably static.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Geohash Cell Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-geo-shape-filter.html">
              &nbsp;
              GeoShape Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-has-child-filter.html">Has Child Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-geohash-cell-filter"></a>Geohash Cell Filter</h2></div></div></div><p>The <code class="literal">geohash_cell</code> filter provides access to a hierarchy of geohashes.
By defining a geohash cell, only <a class="link" href="mapping-geo-point-type.html" title="Geo Point Type">geopoints</a>
within this cell will match this filter.</p><p>To get this filter work all prefixes of a geohash need to be indexed. In
example a geohash <code class="literal">u30</code> needs to be decomposed into three terms: <code class="literal">u30</code>,
<code class="literal">u3</code> and <code class="literal">u</code>. This decomposition must be enabled in the mapping of the
<a class="link" href="mapping-geo-point-type.html" title="Geo Point Type">geopoint</a> field thats going to be filtered by
setting the <code class="literal">geohash_prefix</code> option:</p><div class="pre_wrapper"><pre class="programlisting">{
    "mappings" : {
        "location": {
            "properties": {
                "pin": {
                    "type": "geo_point",
                    "geohash": true,
                    "geohash_prefix": true,
                    "geohash_precision": 10
                }
            }
        }
    }
}</pre></div><p>The geohash cell can defined by all formats of <code class="literal">geo_points</code>. If such a cell is
defined by a latitude and longitude pair the size of the cell needs to be
setup. This can be done by the <code class="literal">precision</code> parameter of the filter. This
parameter can be set to an integer value which sets the length of the geohash
prefix. Instead of setting a geohash length directly it is also possible to
define the precision as distance, in example <code class="literal">"precision": "50m"</code>. (See
<a class="xref" href="common-options.html#distance-units" title="Distance Unitsedit">the section called Distance Units</a>.)</p><p>The <code class="literal">neighbor</code> option of the filter offers the possibility to filter cells
next to the given cell.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "match_all" : {}
        },
        "filter" : {
            "geohash_cell": {
                "pin": {
                    "lat": 13.4080,
                    "lon": 52.5186
                },
                "precision": 3,
                "neighbors": true
            }
        }
    }
}</pre></div><h4><a id="_caching_8"></a>Caching</h4><p>The result of the filter is not cached by default. The
<code class="literal">_cache</code> parameter can be set to <code class="literal">true</code> to turn caching on.
By default the filter uses the resulting geohash cells as a cache key.
This can be changed by using the <code class="literal">_cache_key</code> option.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Has Child Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-geohash-cell-filter.html">
              &nbsp;
              Geohash Cell Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-has-parent-filter.html">Has Parent Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-has-child-filter"></a>Has Child Filter</h2></div></div></div><p>The <code class="literal">has_child</code> filter accepts a query and the child type to run
against, and results in parent documents that have child docs matching
the query. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "has_child" : {
        "type" : "blog_tag",
        "query" : {
            "term" : {
                "tag" : "something"
            }
        }
    }
}</pre></div><p>The <code class="literal">type</code> is the child type to query against. The parent type to return
is automatically detected based on the mappings.</p><p>The way that the filter is implemented is by first running the child
query, doing the matching up to the parent doc for each document
matched.</p><p>The <code class="literal">has_child</code> filter also accepts a filter instead of a query:</p><div class="pre_wrapper"><pre class="programlisting">{
    "has_child" : {
        "type" : "comment",
        "filter" : {
            "term" : {
                "user" : "john"
            }
        }
    }
}</pre></div><h4><a id="_min_max_children_2"></a>Min/Max Children</h4><p>The <code class="literal">has_child</code> filter allows you to specify that a minimum and/or maximum
number of children are required to match for the parent doc to be considered
a match:</p><div class="pre_wrapper"><pre class="programlisting">{
    "has_child" : {
        "type" : "comment",
        "min_children": 2, <a id="CO76-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        "max_children": 10, <a id="CO76-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        "filter" : {
            "term" : {
                "user" : "john"
            }
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO76-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> <a href="#CO76-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Both <code class="literal">min_children</code> and <code class="literal">max_children</code> are optional.
</p></td></tr></tbody></table></div><p>The execution speed of the <code class="literal">has_child</code> filter is equivalent
to that of the <code class="literal">has_child</code> query when <code class="literal">min_children</code> or <code class="literal">max_children</code>
is specified.</p><h4><a id="_memory_considerations_8"></a>Memory Considerations</h4><p>In order to support parent-child joins, all of the (string) parent IDs
must be resident in memory (in the <a class="link" href="index-modules-fielddata.html" title="Field data">field data cache</a>.
Additionally, every child document is mapped to its parent using a long
value (approximately). It is advisable to keep the string parent ID short
in order to reduce memory usage.</p><p>You can check how much memory is being used by the ID cache using the
<a class="link" href="indices-stats.html" title="Indices Stats">indices stats</a> or <a class="link" href="cluster-nodes-stats.html" title="Nodes Stats">nodes stats</a>
APIS, eg:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET "http://localhost:9200/_stats/id_cache?pretty&amp;human"</pre></div><h4><a id="_caching_9"></a>Caching</h4><p>The <code class="literal">has_child</code> filter cannot be cached in the filter cache. The <code class="literal">_cache</code>
and <code class="literal">_cache_key</code> options are a no-op in this filter. Also any filter that
wraps the <code class="literal">has_child</code> filter either directly or indirectly will not be cached.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Has Parent Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-has-child-filter.html">
              &nbsp;
              Has Child Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-ids-filter.html">Ids Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-has-parent-filter"></a>Has Parent Filter</h2></div></div></div><p>The <code class="literal">has_parent</code> filter accepts a query and a parent type. The query is
executed in the parent document space, which is specified by the parent
type. This filter returns child documents which associated parents have
matched. For the rest <code class="literal">has_parent</code> filter has the same options and works
in the same manner as the <code class="literal">has_child</code> filter.</p><h4><a id="_filter_example"></a>Filter example</h4><div class="pre_wrapper"><pre class="programlisting">{
    "has_parent" : {
        "parent_type" : "blog",
        "query" : {
            "term" : {
                "tag" : "something"
            }
        }
    }
}</pre></div><p>The <code class="literal">parent_type</code> field name can also be abbreviated to <code class="literal">type</code>.</p><p>The way that the filter is implemented is by first running the parent
query, doing the matching up to the child doc for each document matched.</p><p>The <code class="literal">has_parent</code> filter also accepts a filter instead of a query:</p><div class="pre_wrapper"><pre class="programlisting">{
    "has_parent" : {
        "type" : "blog",
        "filter" : {
            "term" : {
                "text" : "bonsai three"
            }
        }
    }
}</pre></div><h4><a id="_memory_considerations_9"></a>Memory Considerations</h4><p>In order to support parent-child joins, all of the (string) parent IDs
must be resident in memory (in the <a class="link" href="index-modules-fielddata.html" title="Field data">field data cache</a>.
Additionally, every child document is mapped to its parent using a long
value (approximately). It is advisable to keep the string parent ID short
in order to reduce memory usage.</p><p>You can check how much memory is being used by the ID cache using the
<a class="link" href="indices-stats.html" title="Indices Stats">indices stats</a> or <a class="link" href="cluster-nodes-stats.html" title="Nodes Stats">nodes stats</a>
APIS, eg:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET "http://localhost:9200/_stats/id_cache?pretty&amp;human"</pre></div><h4><a id="_caching_10"></a>Caching</h4><p>The <code class="literal">has_parent</code> filter cannot be cached in the filter cache. The <code class="literal">_cache</code>
and <code class="literal">_cache_key</code> options are a no-op in this filter. Also any filter that
wraps the <code class="literal">has_parent</code> filter either directly or indirectly will not be cached.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Ids Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-has-parent-filter.html">
              &nbsp;
              Has Parent Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-indices-filter.html">Indices Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-ids-filter"></a>Ids Filter</h2></div></div></div><p>Filters documents that only have the provided ids. Note, this filter
does not require the <a class="link" href="mapping-id-field.html" title="_id">_id</a>
field to be indexed since it works using the
<a class="link" href="mapping-uid-field.html" title="_uid">_uid</a> field.</p><div class="pre_wrapper"><pre class="programlisting">{
    "ids" : {
        "type" : "my_type",
        "values" : ["1", "4", "100"]
    }
}</pre></div><p>The <code class="literal">type</code> is optional and can be omitted, and can also accept an array
of values.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Indices Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-ids-filter.html">
              &nbsp;
              Ids Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-limit-filter.html">Limit Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-indices-filter"></a>Indices Filter</h2></div></div></div><p>The <code class="literal">indices</code> filter can be used when executed across multiple indices,
allowing to have a filter that executes only when executed on an index
that matches a specific list of indices, and another filter that executes
when it is executed on an index that does not match the listed indices.</p><div class="pre_wrapper"><pre class="programlisting">{
    "indices" : {
        "indices" : ["index1", "index2"],
        "filter" : {
            "term" : { "tag" : "wow" }
        },
        "no_match_filter" : {
            "term" : { "tag" : "kow" }
        }
    }
}</pre></div><p>You can use the <code class="literal">index</code> field to provide a single index.</p><p><code class="literal">no_match_filter</code> can also have "string" value of <code class="literal">none</code> (to match no
documents), and <code class="literal">all</code> (to match all). Defaults to <code class="literal">all</code>.</p><p><code class="literal">filter</code> is mandatory, as well as <code class="literal">indices</code> (or <code class="literal">index</code>).</p><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The fields order is important: if the <code class="literal">indices</code> are provided before <code class="literal">filter</code>
or <code class="literal">no_match_filter</code>, the related filters get parsed only against the indices
that they are going to be executed on. This is useful to avoid parsing filters
when it is not necessary and prevent potential mapping errors.</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Limit Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-indices-filter.html">
              &nbsp;
              Indices Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-match-all-filter.html">Match All Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-limit-filter"></a>Limit Filter</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.6.0. </h3>
 Use terminate_after instead
</div></div><p>A limit filter limits the number of documents (per shard) to execute on.
For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "filter" : {
             "limit" : {"value" : 100}
         },
         "query" : {
            "term" : { "name.first" : "shay" }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Match All Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-limit-filter.html">
              &nbsp;
              Limit Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-missing-filter.html">Missing Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-match-all-filter"></a>Match All Filter</h2></div></div></div><p>A filter that matches on all documents:</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score" : {
        "filter" : {
            "match_all" : { }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Missing Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-match-all-filter.html">
              &nbsp;
              Match All Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-nested-filter.html">Nested Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-missing-filter"></a>Missing Filter</h2></div></div></div><p>Returns documents that have only <code class="literal">null</code> values or no value in the original field:</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score" : {
        "filter" : {
            "missing" : { "field" : "user" }
        }
    }
}</pre></div><p>For instance, the following docs would match the above filter:</p><div class="pre_wrapper"><pre class="programlisting">{ "user": null }
{ "user": [] } <a id="CO77-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
{ "user": [null] } <a id="CO77-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
{ "foo":  "bar" } <a id="CO77-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO77-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This field has no values.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO77-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This field has no non-<code class="literal">null</code> values.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO77-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The <code class="literal">user</code> field is missing completely.
</p></td></tr></tbody></table></div><p>These documents would <span class="strong emphasis"><strong>not</strong></span> match the above filter:</p><div class="pre_wrapper"><pre class="programlisting">{ "user": "jane" }
{ "user": "" } <a id="CO78-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
{ "user": "-" } <a id="CO78-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
{ "user": ["jane"] }
{ "user": ["jane", null ] } <a id="CO78-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO78-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
An empty string is a non-<code class="literal">null</code> value.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO78-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Even though the <code class="literal">standard</code> analyzer would emit zero tokens, the original field is non-<code class="literal">null</code>.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO78-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This field has one non-<code class="literal">null</code> value.
</p></td></tr></tbody></table></div><h4><a id="_literal_null_value_literal_mapping_2"></a><code class="literal">null_value</code> mapping</h4><p>If the field mapping includes a <code class="literal">null_value</code> (see <a class="xref" href="mapping-core-types.html" title="Core Types">Core Types</a>) then explicit <code class="literal">null</code> values
are replaced with the specified <code class="literal">null_value</code>.  For instance, if the <code class="literal">user</code> field were mapped
as follows:</p><div class="pre_wrapper"><pre class="programlisting">  "user": {
    "type": "string",
    "null_value": "_null_"
  }</pre></div><p>then explicit <code class="literal">null</code> values would be indexed as the string <code class="literal">_null_</code>, and the
the following docs would <span class="strong emphasis"><strong>not</strong></span> match the <code class="literal">missing</code> filter:</p><div class="pre_wrapper"><pre class="programlisting">{ "user": null }
{ "user": [null] }</pre></div><p>However, these docswithout explicit <code class="literal">null</code> valueswould still have
no values in the <code class="literal">user</code> field and thus would match the <code class="literal">missing</code> filter:</p><div class="pre_wrapper"><pre class="programlisting">{ "user": [] }
{ "foo": "bar" }</pre></div><h5><a id="_literal_existence_literal_and_literal_null_value_literal_parameters"></a><code class="literal">existence</code> and <code class="literal">null_value</code> parameters</h5><p>When the field being queried has a <code class="literal">null_value</code> mapping, then the behaviour of
the <code class="literal">missing</code> filter can be altered with the <code class="literal">existence</code> and <code class="literal">null_value</code>
parameters:</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score" : {
        "filter" : {
            "missing" : {
                "field" : "user",
                "existence" : true,
                "null_value" : false
            }
        }
    }
}</pre></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">existence</code>
</span></dt><dd><p class="simpara">When the <code class="literal">existence</code> parameter is set to <code class="literal">true</code> (the default), the missing
filter will include documents where the field has <span class="strong emphasis"><strong>no</strong></span> values, ie:</p><div class="pre_wrapper"><pre class="programlisting">{ "user": [] }
{ "foo": "bar" }</pre></div><p class="simpara">When set to <code class="literal">false</code>, these documents will not be included.</p></dd><dt><span class="term">
<code class="literal">null_value</code>
</span></dt><dd><p class="simpara">When the <code class="literal">null_value</code> parameter is set to <code class="literal">true</code>, the missing
filter will include documents where the field contains a <code class="literal">null</code> value, ie:</p><div class="pre_wrapper"><pre class="programlisting">{ "user": null }
{ "user": [null] }
{ "user": ["jane",null] } <a id="CO79-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO79-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Matches because the field contains a <code class="literal">null</code> value, even though it also contains a non-<code class="literal">null</code> value.
</p></td></tr></tbody></table></div><p class="simpara">When set to <code class="literal">false</code> (the default), these documents will not be included.</p></dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Either <code class="literal">existence</code> or <code class="literal">null_value</code> or both must be set to <code class="literal">true</code>.</p></div></div><h4><a id="_caching_11"></a>Caching</h4><p>The result of the filter is always cached.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Nested Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-missing-filter.html">
              &nbsp;
              Missing Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-not-filter.html">Not Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-nested-filter"></a>Nested Filter</h2></div></div></div><p>A <code class="literal">nested</code> filter works in a similar fashion to the
<a class="link" href="query-dsl-nested-query.html" title="Nested Query">nested</a> query, except its
used as a filter. It follows exactly the same structure, but also allows
to cache the results (set <code class="literal">_cache</code> to <code class="literal">true</code>), and have it named (set
the <code class="literal">_name</code> value). For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : { "match_all" : {} },
        "filter" : {
            "nested" : {
                "path" : "obj1",
                "filter" : {
                    "bool" : {
                        "must" : [
                            {
                                "term" : {"obj1.name" : "blue"}
                            },
                            {
                                "range" : {"obj1.count" : {"gt" : 5}}
                            }
                        ]
                    }
                },
                "_cache" : true
            }
        }
    }
}</pre></div><h4><a id="_join_option"></a>Join option</h4><p>The nested filter also supports a <code class="literal">join</code> option which controls whether to perform the block join or not.
By default, its enabled. But when its disabled, it emits the hidden nested documents as hits instead of the joined root document.</p><p>This is useful when a <code class="literal">nested</code> filter is used in a facet where nested is enabled, like you can see in the example below:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query" : {
        "nested" : {
            "path" : "offers",
            "query" : {
                "match" : {
                    "offers.color" : "blue"
                }
            }
        }
    },
    "facets" : {
        "size" : {
            "terms" : {
                "field" : "offers.size"
            },
            "facet_filter" : {
                "nested" : {
                    "path" : "offers",
                    "query" : {
                        "match" : {
                            "offers.color" : "blue"
                        }
                    },
                    "join" : false
                }
            },
            "nested" : "offers"
        }
    }
}'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Not Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-nested-filter.html">
              &nbsp;
              Nested Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-or-filter.html">Or Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-not-filter"></a>Not Filter</h2></div></div></div><p>A filter that filters out matched documents using a query. Can be placed
within queries that accept a filter.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "term" : { "name.first" : "shay" }
        },
        "filter" : {
            "not" : {
                "range" : {
                    "postDate" : {
                        "from" : "2010-03-01",
                        "to" : "2010-04-01"
                    }
                }
            }
        }
    }
}</pre></div><p>Or, in a longer form with a <code class="literal">filter</code> element:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "term" : { "name.first" : "shay" }
        },
        "filter" : {
            "not" : {
                "filter" :  {
                    "range" : {
                        "postDate" : {
                            "from" : "2010-03-01",
                            "to" : "2010-04-01"
                        }
                    }
                }
            }
        }
    }
}</pre></div><h4><a id="_caching_12"></a>Caching</h4><p>The result of the filter is not cached by default. The <code class="literal">_cache</code> can be
set to <code class="literal">true</code> in order to cache it (though usually not needed). Here is
an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "term" : { "name.first" : "shay" }
        },
        "filter" : {
            "not" : {
                "filter" :  {
                    "range" : {
                        "postDate" : {
                            "from" : "2010-03-01",
                            "to" : "2010-04-01"
                        }
                    }
                },
                "_cache" : true
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Or Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-not-filter.html">
              &nbsp;
              Not Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-prefix-filter.html">Prefix Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-or-filter"></a>Or Filter</h2></div></div></div><p>A filter that matches documents using the <code class="literal">OR</code> boolean operator on other
filters. Can be placed within queries that accept a filter.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "term" : { "name.first" : "shay" }
        },
        "filter" : {
            "or" : [
                {
                    "term" : { "name.second" : "banon" }
                },
                {
                    "term" : { "name.nick" : "kimchy" }
                }
            ]
        }
    }
}</pre></div><h4><a id="_caching_13"></a>Caching</h4><p>The result of the filter is not cached by default. The <code class="literal">_cache</code> can be
set to <code class="literal">true</code> in order to cache it (though usually not needed). Since
the <code class="literal">_cache</code> element requires to be set on the <code class="literal">or</code> filter itself, the
structure then changes a bit to have the filters provided within a
<code class="literal">filters</code> element:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered" : {
        "query" : {
            "term" : { "name.first" : "shay" }
        },
        "filter" : {
            "or" : {
                "filters" : [
                    {
                        "term" : { "name.second" : "banon" }
                    },
                    {
                        "term" : { "name.nick" : "kimchy" }
                    }
                ],
                "_cache" : true
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Prefix Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-or-filter.html">
              &nbsp;
              Or Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-query-filter.html">Query Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-prefix-filter"></a>Prefix Filter</h2></div></div></div><p>Filters documents that have fields containing terms with a specified
prefix (<span class="strong emphasis"><strong>not analyzed</strong></span>). Similar to prefix query, except that it acts as
a filter. Can be placed within queries that accept a filter.</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score" : {
        "filter" : {
            "prefix" : { "user" : "ki" }
        }
    }
}</pre></div><h4><a id="_caching_14"></a>Caching</h4><p>The result of the filter is cached by default. The <code class="literal">_cache</code> can be set
to <code class="literal">false</code> in order not to cache it. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score" : {
        "filter" : {
            "prefix" : {
                "user" : "ki",
                "_cache" : false
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Query Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-prefix-filter.html">
              &nbsp;
              Prefix Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-range-filter.html">Range Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-query-filter"></a>Query Filter</h2></div></div></div><p>Wraps any query to be used as a filter. Can be placed within queries
that accept a filter.</p><div class="pre_wrapper"><pre class="programlisting">{
    "constantScore" : {
        "filter" : {
            "query" : {
                "query_string" : {
                    "query" : "this AND that OR thus"
                }
            }
        }
    }
}</pre></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Keep in mind that once you wrap a query as a filter, it loses query features like
highlighting and scoring because these are not features supported by filters.</p></div></div><h4><a id="_caching_15"></a>Caching</h4><p>The result of the filter is not cached by default. The <code class="literal">_cache</code> can be
set to <code class="literal">true</code> to cache the <span class="strong emphasis"><strong>result</strong></span> of the filter. This is handy when
the same query is used on several (many) other queries. Note, the
process of caching the first execution is higher when not caching (since
it needs to satisfy different queries).</p><p>Setting the <code class="literal">_cache</code> element requires a different format for the
<code class="literal">query</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "constantScore" : {
        "filter" : {
            "fquery" : {
                "query" : {
                    "query_string" : {
                        "query" : "this AND that OR thus"
                    }
                },
                "_cache" : true
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Range Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-query-filter.html">
              &nbsp;
              Query Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-regexp-filter.html">Regexp Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-range-filter"></a>Range Filter</h2></div></div></div><p>Filters documents with fields that have terms within a certain range.
Similar to <a class="link" href="query-dsl-range-query.html" title="Range Query">range query</a>, except that it acts as a filter. Can be placed within queries
that accept a filter.</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score" : {
        "filter" : {
            "range" : {
                "age" : {
                    "gte": 10,
                    "lte": 20
                }
            }
        }
    }
}</pre></div><p>The <code class="literal">range</code> filter accepts the following parameters:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">gte</code>
</p>
</td><td class="entry" valign="top">
<p>
Greater-than or equal to
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">gt</code>
</p>
</td><td class="entry" valign="top">
<p>
Greater-than
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">lte</code>
</p>
</td><td class="entry" valign="top">
<p>
Less-than or equal to
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">lt</code>
</p>
</td><td class="entry" valign="top">
<p>
Less-than
</p>
</td></tr></tbody></table></div><h4><a id="_date_options_2"></a>Date options</h4><p>When applied on <code class="literal">date</code> fields the <code class="literal">range</code> filter accepts also a <code class="literal">time_zone</code> parameter.
The <code class="literal">time_zone</code> parameter will be applied to your input lower and upper bounds and will
move them to UTC time based date:</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score": {
        "filter": {
            "range" : {
                "born" : {
                    "gte": "2012-01-01",
                    "lte": "now",
                    "time_zone": "+1:00"
                }
            }
        }
    }
}</pre></div><p>In the above example, <code class="literal">gte</code> will be actually moved to <code class="literal">2011-12-31T23:00:00</code> UTC date.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>if you give a date with a timezone explicitly defined and use the <code class="literal">time_zone</code> parameter, <code class="literal">time_zone</code> will be
ignored. For example, setting <code class="literal">gte</code> to <code class="literal">2012-01-01T00:00:00+01:00</code> with <code class="literal">"time_zone":"+10:00"</code> will still use <code class="literal">+01:00</code> time zone.</p></div></div><p>When applied on <code class="literal">date</code> fields the <code class="literal">range</code> filter accepts also a <code class="literal">format</code> parameter.
The <code class="literal">format</code> parameter will help support another date format than the one defined in mapping:</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score": {
        "filter": {
            "range" : {
                "born" : {
                    "gte": "01/01/2012",
                    "lte": "2013",
                    "format": "dd/MM/yyyy||yyyy"
                }
            }
        }
    }
}</pre></div><h4><a id="_execution"></a>Execution</h4><p>The <code class="literal">execution</code> option controls how the range filter internally executes. The <code class="literal">execution</code> option accepts the following values:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">index</code>
</p>
</td><td class="entry" valign="top">
<p>
Uses the fields inverted index in order to determine whether documents fall within the specified range.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">fielddata</code>
</p>
</td><td class="entry" valign="top">
<p>
Uses fielddata in order to determine whether documents fall within the specified range.
</p>
</td></tr></tbody></table></div><p>In general for small ranges the <code class="literal">index</code> execution is faster and for longer ranges the <code class="literal">fielddata</code> execution is faster. Defaults to <code class="literal">index</code>.</p><p>The <code class="literal">fielddata</code> execution, as the name suggests, uses field data and therefore
requires more memory, so make sure you have sufficient memory on your nodes in
order to use this execution mode. It usually makes sense to use it on fields
youre already aggregating or sorting by.</p><h4><a id="_caching_16"></a>Caching</h4><p>The result of the filter is only automatically cached by default if the <code class="literal">execution</code> is set to <code class="literal">index</code>. The
<code class="literal">_cache</code> can be set to <code class="literal">false</code> to turn it off.</p><p>If the <code class="literal">now</code> date math expression is used without rounding then a range filter will never be cached even if <code class="literal">_cache</code> is
set to <code class="literal">true</code>. Also any filter that wraps this filter will never be cached.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Regexp Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-range-filter.html">
              &nbsp;
              Range Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-script-filter.html">Script Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-regexp-filter"></a>Regexp Filter</h2></div></div></div><p>The <code class="literal">regexp</code> filter is similar to the
<a class="link" href="query-dsl-regexp-query.html" title="Regexp Query">regexp</a> query, except
that it is cacheable and can speedup performance in case you are reusing
this filter in your queries.</p><p>See <a class="xref" href="query-dsl-regexp-query.html#regexp-syntax" title="Regular expression syntax">Regular expression syntax</a> for details of the supported regular expression language.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered": {
        "query": {
            "match_all": {}
        },
        "filter": {
            "regexp":{
                "name.first" : "s.*y"
            }
        }
    }
}</pre></div><p>You can also select the cache name and use the same regexp flags in the
filter as in the query.</p><p>Regular expressions are dangerous because its easy to accidentally
create an innocuous looking one that requires an exponential number of
internal determinized automaton states (and corresponding RAM and CPU)
for Lucene to execute.  Lucene prevents these using the
<code class="literal">max_determinized_states</code> setting (defaults to 10000).  You can raise
this limit to allow more complex regular expressions to execute.</p><p>You have to enable caching explicitly in order to have the
<code class="literal">regexp</code> filter cached.</p><div class="pre_wrapper"><pre class="programlisting">{
    "filtered": {
        "query": {
            "match_all": {}
        },
        "filter": {
            "regexp":{
                "name.first" : {
                    "value" : "s.*y",
                    "flags" : "INTERSECTION|COMPLEMENT|EMPTY",
                    "max_determinized_states": 20000
                },
                "_name":"test",
                "_cache" : true,
                "_cache_key" : "key"
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Script Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-regexp-filter.html">
              &nbsp;
              Regexp Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-term-filter.html">Term Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-script-filter"></a>Script Filter</h2></div></div></div><p>A filter allowing to define
<a class="link" href="modules-scripting.html" title="Scripting">scripts</a> as filters. For
example:</p><div class="pre_wrapper"><pre class="programlisting">"filtered" : {
    "query" : {
        ...
    },
    "filter" : {
        "script" : {
            "script" : "doc['num1'].value &gt; 1"
        }
    }
}</pre></div><h4><a id="_custom_parameters"></a>Custom Parameters</h4><p>Scripts are compiled and cached for faster execution. If the same script
can be used, just with different parameters provider, it is preferable
to use the ability to pass parameters to the script itself, for example:</p><div class="pre_wrapper"><pre class="programlisting">"filtered" : {
    "query" : {
        ...
    },
    "filter" : {
        "script" : {
            "script" : "doc['num1'].value &gt; param1"
            "params" : {
                "param1" : 5
            }
        }
    }
}</pre></div><h4><a id="_caching_17"></a>Caching</h4><p>The result of the filter is not cached by default. The <code class="literal">_cache</code> can be
set to <code class="literal">true</code> to cache the <span class="strong emphasis"><strong>result</strong></span> of the filter. This is handy when
the same script and parameters are used on several (many) other queries.
Note, the process of caching the first execution is higher when caching
(since it needs to satisfy different queries).</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Term Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-script-filter.html">
              &nbsp;
              Script Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-terms-filter.html">Terms Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-term-filter"></a>Term Filter</h2></div></div></div><p>Filters documents that have fields that contain a term (<span class="strong emphasis"><strong>not analyzed</strong></span>).
Similar to <a class="link" href="query-dsl-term-query.html" title="Term Query">term query</a>,
except that it acts as a filter. Can be placed within queries that
accept a filter, for example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score" : {
        "filter" : {
            "term" : { "user" : "kimchy"}
        }
    }
}</pre></div><h4><a id="_caching_18"></a>Caching</h4><p>The result of the filter is automatically cached by default. The
<code class="literal">_cache</code> can be set to <code class="literal">false</code> to turn it off. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score" : {
        "filter" : {
            "term" : {
                "user" : "kimchy",
                "_cache" : false
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Terms Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-term-filter.html">
              &nbsp;
              Term Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="query-dsl-type-filter.html">Type Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-terms-filter"></a>Terms Filter</h2></div></div></div><p>Filters documents that have fields that match any of the provided terms
(<span class="strong emphasis"><strong>not analyzed</strong></span>). For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score" : {
        "filter" : {
            "terms" : { "user" : ["kimchy", "elasticsearch"]}
        }
    }
}</pre></div><p>The <code class="literal">terms</code> filter is also aliased with <code class="literal">in</code> as the filter name for
simpler usage.</p><h4><a id="_execution_mode"></a>Execution Mode</h4><p>The way terms filter executes is by iterating over the terms provided
and finding matches docs (loading into a bitset) and caching it.
Sometimes, we want a different execution model that can still be
achieved by building more complex queries in the DSL, but we can support
them in the more compact model that terms filter provides.</p><p>The <code class="literal">execution</code> option now has the following options :</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">plain</code>
</p>
</td><td class="entry" valign="top">
<p>
    The default. Works as today. Iterates over all the terms,
    building a bit set matching it, and filtering. The total filter is
    cached.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">fielddata</code>
</p>
</td><td class="entry" valign="top">
<p>
    Generates a terms filters that uses the fielddata cache to
    compare terms.  This execution mode is great to use when filtering
    on a field that is already loaded into the fielddata cache from
    faceting, sorting, or index warmers.  When filtering on
    a large number of terms, this execution can be considerably faster
    than the other modes.  The total filter is not cached unless
    explicitly configured to do so.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">bool</code>
</p>
</td><td class="entry" valign="top">
<p>
    Generates a term filter (which is cached) for each term, and
    wraps those in a bool filter. The bool filter itself is not cached as it
    can operate very quickly on the cached term filters.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">and</code>
</p>
</td><td class="entry" valign="top">
<p>
    Generates a term filter (which is cached) for each term, and
    wraps those in an and filter. The and filter itself is not cached.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">or</code>
</p>
</td><td class="entry" valign="top">
<p>
    Generates a term filter (which is cached) for each term, and
    wraps those in an or filter. The or filter itself is not cached.
    Generally, the <code class="literal">bool</code> execution mode should be preferred.
</p>
</td></tr></tbody></table></div><p>If you dont want the generated individual term queries to be cached,
you can use: <code class="literal">bool_nocache</code>, <code class="literal">and_nocache</code> or <code class="literal">or_nocache</code> instead, but
be aware that this will affect performance.</p><p>The "total" terms filter caching can still be explicitly controlled
using the <code class="literal">_cache</code> option. Note the default value for it depends on the
execution value.</p><p>For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "constant_score" : {
        "filter" : {
            "terms" : {
                "user" : ["kimchy", "elasticsearch"],
                "execution" : "bool",
                "_cache": true
            }
        }
    }
}</pre></div><h4><a id="_caching_19"></a>Caching</h4><p>The result of the filter is automatically cached by default. The
<code class="literal">_cache</code> can be set to <code class="literal">false</code> to turn it off.</p><h4><a id="_terms_lookup_mechanism"></a>Terms lookup mechanism</h4><p>When its needed to specify a <code class="literal">terms</code> filter with a lot of terms it can
be beneficial to fetch those term values from a document in an index. A
concrete example would be to filter tweets tweeted by your followers.
Potentially the amount of user ids specified in the terms filter can be
a lot. In this scenario it makes sense to use the terms filters terms
lookup mechanism.</p><p>The terms lookup mechanism supports the following options:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">index</code>
</p>
</td><td class="entry" valign="top">
<p>
    The index to fetch the term values from. Defaults to the
    current index.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">type</code>
</p>
</td><td class="entry" valign="top">
<p>
    The type to fetch the term values from.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">id</code>
</p>
</td><td class="entry" valign="top">
<p>
    The id of the document to fetch the term values from.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">path</code>
</p>
</td><td class="entry" valign="top">
<p>
    The field specified as path to fetch the actual values for the
    <code class="literal">terms</code> filter.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">routing</code>
</p>
</td><td class="entry" valign="top">
<p>
    A custom routing value to be used when retrieving the
    external terms doc.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">cache</code>
</p>
</td><td class="entry" valign="top">
<p>
    Whether to cache the filter built from the retrieved document
    (<code class="literal">true</code> - default) or whether to fetch and rebuild the filter on every
    request (<code class="literal">false</code>). See "<a class="link" href="query-dsl-terms-filter.html#query-dsl-terms-filter-lookup-caching" title="Terms lookup cachingedit">Terms lookup caching</a>" below
</p>
</td></tr></tbody></table></div><p>The values for the <code class="literal">terms</code> filter will be fetched from a field in a
document with the specified id in the specified type and index.
Internally a get request is executed to fetch the values from the
specified path. At the moment for this feature to work the <code class="literal">_source</code>
needs to be stored.</p><p>Also, consider using an index with a single shard and fully replicated
across all nodes if the "reference" terms data is not large. The lookup
terms filter will prefer to execute the get request on a local node if
possible, reducing the need for networking.</p><h4><a id="query-dsl-terms-filter-lookup-caching"></a>Terms lookup caching</h4><p>There is an additional cache involved, which caches the lookup of the
lookup document to the actual terms. This lookup cache is a LRU cache.
This cache has the following options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">indices.cache.filter.terms.size</code>
</span></dt><dd>
    The size of the lookup cache. The default is <code class="literal">10mb</code>.
</dd><dt><span class="term">
<code class="literal">indices.cache.filter.terms.expire_after_access</code>
</span></dt><dd>
    The time after the last read an entry should expire. Disabled by default.
</dd><dt><span class="term">
<code class="literal">indices.cache.filter.terms.expire_after_write</code>
</span></dt><dd>
    The time after the last write an entry should expire. Disabled by default.
</dd></dl></div><p>All options for the lookup of the documents cache can only be configured
via the <code class="literal">elasticsearch.yml</code> file.</p><p>When using the terms lookup the <code class="literal">execution</code> option isnt taken into
account and behaves as if the execution mode was set to <code class="literal">plain</code>.</p><h4><a id="_terms_lookup_twitter_example"></a>Terms lookup twitter example</h4><div class="pre_wrapper"><pre class="programlisting"># index the information for user with id 2, specifically, its followers
curl -XPUT localhost:9200/users/user/2 -d '{
   "followers" : ["1", "3"]
}'

# index a tweet, from user with id 2
curl -XPUT localhost:9200/tweets/tweet/1 -d '{
   "user" : "2"
}'

# search on all the tweets that match the followers of user 2
curl -XGET localhost:9200/tweets/_search -d '{
  "query" : {
    "filtered" : {
      "filter" : {
        "terms" : {
          "user" : {
            "index" : "users",
            "type" : "user",
            "id" : "2",
            "path" : "followers"
          },
          "_cache_key" : "user_2_friends"
        }
      }
    }
  }
}'</pre></div><p>The above is highly optimized, both in a sense that the list of
followers will not be fetched if the filter is already cached in the
filter cache, and with internal LRU cache for fetching external values
for the terms filter. Also, the entry in the filter cache will not hold
<code class="literal">all</code> the terms reducing the memory required for it.</p><p><code class="literal">_cache_key</code> is recommended to be set, so its simple to clear the cache
associated with it using the clear cache API. For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/tweets/_cache/clear?filter_keys=user_2_friends'</pre></div><p>The structure of the external terms document can also include array of
inner objects, for example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/users/user/2 -d '{
 "followers" : [
   {
     "id" : "1"
   },
   {
     "id" : "2"
   }
 ]
}'</pre></div><p>In which case, the lookup path will be <code class="literal">followers.id</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="query-dsl.html">Query DSL</a></span>  <span class="breadcrumb-link"><a href="query-dsl-filters.html">Filters</a></span>  <span class="breadcrumb-node">Type Filter</span></div><div class="navheader"><span class="prev"><a href="query-dsl-terms-filter.html">
              &nbsp;
              Terms Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping.html">Mapping
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="query-dsl-type-filter"></a>Type Filter</h2></div></div></div><p>Filters documents matching the provided document / mapping type. Note,
this filter can work even when the <code class="literal">_type</code> field is not indexed (using
the <a class="link" href="mapping-uid-field.html" title="_uid">_uid</a> field).</p><div class="pre_wrapper"><pre class="programlisting">{
    "type" : {
        "value" : "my_type"
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">Mapping</span></div><div class="navheader"><span class="prev"><a href="query-dsl-type-filter.html">
              &nbsp;
              Type Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-fields.html">Fields
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="mapping"></a>Mapping</h1></div></div></div><div class="partintro"><div></div><p>Mapping is the process of defining how a document should be mapped to
the Search Engine, including its searchable characteristics such as
which fields are searchable and if/how they are tokenized. In
Elasticsearch, an index may store documents of different "mapping
types". Elasticsearch allows one to associate multiple mapping
definitions for each mapping type.</p><p>Explicit mapping is defined on an index/type level. By default, there
isnt a need to define an explicit mapping, since one is automatically
created and registered when a new type or new field is introduced (with
no performance overhead) and have sensible defaults. Only when the
defaults need to be overridden must a mapping definition be provided.</p><h3><a id="all-mapping-types"></a>Mapping Types</h3><p>Mapping types are a way to divide the documents in an index into logical
groups. Think of it as tables in a database. Though there is separation
between types, its not a full separation (all end up as a document
within the same Lucene index).</p><p>Field names with the same name across types are highly recommended to
have the same type and same mapping characteristics (analysis settings
for example). There is an effort to allow to explicitly "choose" which
field to use by using type prefix (<code class="literal">my_type.my_field</code>), but its not
complete, and there are places where it will never work (like faceting
on the field).</p><p>In practice though, this restriction is almost never an issue. The field
name usually ends up being a good indication to its "typeness" (e.g.
"first_name" will always be a string). Note also, that this does not
apply to the cross index case.</p><h3><a id="mapping-api"></a>Mapping API</h3><p>To create a mapping, you will need the <a class="link" href="indices-put-mapping.html" title="Put Mapping">Put Mapping API</a>, or you can add multiple mappings when you <a class="link" href="indices-create-index.html" title="Create Index">create an index</a>.</p><h3><a id="mapping-settings"></a>Global Settings</h3><p>The <code class="literal">index.mapping.ignore_malformed</code> global setting can be set on the
index level to allow to ignore malformed content globally across all
mapping types (malformed content example is trying to index a text string
value as a numeric type).</p><p>The <code class="literal">index.mapping.coerce</code> global setting can be set on the
index level to coerce numeric content globally across all
mapping types (The default setting is true and coercions attempted are
to convert strings with numbers into numeric types and also numeric values
with fractions to any integer/short/long values minus the fraction part).
When the permitted conversions fail in their attempts, the value is considered
malformed and the ignore_malformed setting dictates what will happen next.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-node">Fields</span></div><div class="navheader"><span class="prev"><a href="mapping.html">
              &nbsp;
              Mapping</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-uid-field.html"><code class="literal">_uid</code>
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-fields"></a>Fields</h2></div></div></div><p>Each mapping has a number of fields associated with it
which can be used to control how the document metadata
(eg <a class="xref" href="mapping-all-field.html" title="_all"><code class="literal">_all</code></a>) is indexed.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-fields.html">Fields</a></span>  <span class="breadcrumb-node"><code class="literal">_uid</code></span></div><div class="navheader"><span class="prev"><a href="mapping-fields.html">
              &nbsp;
              Fields</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-id-field.html"><code class="literal">_id</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-uid-field"></a><code class="literal">_uid</code></h2></div></div></div><p>Each document indexed is associated with an id and a type, the internal
<code class="literal">_uid</code> field is the unique identifier of a document within an index and
is composed of the type and the id (meaning that different types can
have the same id and still maintain uniqueness).</p><p>The <code class="literal">_uid</code> field is automatically used when <code class="literal">_type</code> is not indexed to
perform type based filtering, and does not require the <code class="literal">_id</code> to be
indexed.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-fields.html">Fields</a></span>  <span class="breadcrumb-node"><code class="literal">_id</code></span></div><div class="navheader"><span class="prev"><a href="mapping-uid-field.html">
              &nbsp;
              <code class="literal">_uid</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-type-field.html"><code class="literal">_type</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-id-field"></a><code class="literal">_id</code></h2></div></div></div><p>Each document indexed is associated with an id and a type. The <code class="literal">_id</code>
field can be used to index just the id, and possible also store it. By
default it is not indexed and not stored (thus, not created).</p><p>Note, even though the <code class="literal">_id</code> is not indexed, all the APIs still work
(since they work with the <code class="literal">_uid</code> field), as well as fetching by ids
using <code class="literal">term</code>, <code class="literal">terms</code> or <code class="literal">prefix</code> queries/filters (including the
specific <code class="literal">ids</code> query/filter).</p><p>The <code class="literal">_id</code> field can be enabled to be indexed, and possibly stored,
using the appropriate mapping attributes:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_id" : {
            "index" : "not_analyzed",
            "store" : true
        }
    }
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_path"></a>path</h3></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Deprecated in 1.5.0. </p></div></div><p>The <code class="literal">_id</code> mapping can also be associated with a <code class="literal">path</code> that will be used
to extract the id from a different location in the source document. For
example, having the following mapping:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_id" : {
            "path" : "post_id"
        }
    }
}</pre></div><p>Will cause <code class="literal">1</code> to be used as the id for:</p><div class="pre_wrapper"><pre class="programlisting">{
    "message" : "You know, for Search",
    "post_id" : "1"
}</pre></div><p>This does require an additional lightweight parsing step while indexing,
in order to extract the id to decide which shard the index operation
will be executed on.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-fields.html">Fields</a></span>  <span class="breadcrumb-node"><code class="literal">_type</code></span></div><div class="navheader"><span class="prev"><a href="mapping-id-field.html">
              &nbsp;
              <code class="literal">_id</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-source-field.html"><code class="literal">_source</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-type-field"></a><code class="literal">_type</code></h2></div></div></div><p>Each document indexed is associated with an id and a type. The type,
when indexing, is automatically indexed into a <code class="literal">_type</code> field. By
default, the <code class="literal">_type</code> field is indexed (but <span class="strong emphasis"><strong>not</strong></span> analyzed) and not
stored. This means that the <code class="literal">_type</code> field can be queried.</p><p>The <code class="literal">_type</code> field can be stored as well, for example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_type" : {"store" : true}
    }
}</pre></div><p>The <code class="literal">_type</code> field can also not be indexed, and all the APIs will still
work except for specific queries (term queries / filters) or faceting
done on the <code class="literal">_type</code> field.</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_type" : {"index" : "no"}
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-fields.html">Fields</a></span>  <span class="breadcrumb-node"><code class="literal">_source</code></span></div><div class="navheader"><span class="prev"><a href="mapping-type-field.html">
              &nbsp;
              <code class="literal">_type</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-all-field.html"><code class="literal">_all</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-source-field"></a><code class="literal">_source</code></h2></div></div></div><p>The <code class="literal">_source</code> field is an automatically generated field that stores the actual
JSON that was used as the indexed document. It is not indexed (searchable),
just stored. When executing "fetch" requests, like <a class="link" href="docs-get.html" title="Get API">get</a> or
<a class="link" href="search-search.html" title="Search">search</a>, the <code class="literal">_source</code> field is returned by default.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_disabling_source"></a>Disabling source</h3></div></div></div><p>Though very handy to have around, the source field does incur storage overhead
within the index. For this reason, it can be disabled as follows:</p><div class="pre_wrapper"><pre class="programlisting">PUT tweets
{
  "mappings": {
    "tweet": {
      "_source": {
        "enabled": false
      }
    }
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/mapping-source-field/1.json"></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Think before disabling the source field</h3><p>Users often disable the <code class="literal">_source</code> field without thinking about the
consequences, and then live to regret it.  If the <code class="literal">_source</code> field isnt
available then a number of features are not supported:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The <a class="link" href="docs-update.html" title="Update API"><code class="literal">update</code> API</a>.
</li><li class="listitem">
On the fly <a class="link" href="search-request-highlighting.html" title="Highlighting">highlighting</a>.
</li><li class="listitem">
The ability to reindex from one Elasticsearch index to another, either
  to change mappings or analysis, or to upgrade an index to a new major
  version.
</li><li class="listitem">
The ability to debug queries or aggregations by viewing the original
  document used at index time.
</li><li class="listitem">
Potentially in the future, the ability to repair index corruption
  automatically.
</li></ul></div></div></div><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>The metrics use case</strong></p></div></div></div><p>The <span class="emphasis"><em>metrics</em></span> use case is distinct from other time-based or logging use cases
in that there are many small documents which consist only of numbers, dates,
or keywords.  There are no updates, no highlighting requests, and the data
ages quickly so there is no need to reindex.  Search requests typically use
simple queries to filter the dataset by date or tags, and the results are
returned as aggregations.</p><p>In this case, disabling the <code class="literal">_source</code> field will save space and reduce I/O.
It is also advisable to disable the <a class="link" href="mapping-all-field.html" title="_all"><code class="literal">_all</code> field</a> in the
metrics case.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="include-exclude"></a>Including / Excluding fields from source</h3></div></div></div><p>An expert-only feature is the ability to prune the contents of the <code class="literal">_source</code>
field after the document has been indexed, but before the <code class="literal">_source</code> field is
stored.  The <code class="literal">includes</code>/<code class="literal">excludes</code> parameters (which also accept wildcards)
can be used as follows:</p><div class="pre_wrapper"><pre class="programlisting">PUT logs
{
  "mappings": {
    "event": {
      "_source": {
        "includes": [
          "*.count",
          "meta.*"
        ],
        "excludes": [
          "meta.description",
          "meta.other.*"
        ]
      }
    }
  }
}

PUT logs/event/1
{
  "requests": {
    "count": 10,
    "foo": "bar" <a id="CO80-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
  },
  "meta": {
    "name": "Some metric",
    "description": "Some metric description", <a id="CO80-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
    "other": {
      "foo": "one", <a id="CO80-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span>
      "baz": "two" <a id="CO80-4"></a><span><img class="images-icons-callouts-4-png" alt=""></span>
    }
  }
}

GET logs/event/_search
{
  "query": {
    "match": {
      "meta.other.foo": "one" <a id="CO80-5"></a><span><img class="images-icons-callouts-5-png" alt=""></span>
    }
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/mapping-source-field/2.json"></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO80-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> <a href="#CO80-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> <a href="#CO80-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> <a href="#CO80-4"><span><img class="images-icons-callouts-4-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
These fields will be removed from the stored <code class="literal">_source</code> field.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO80-5"><span><img class="images-icons-callouts-5-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
We can still search on this field, even though it is not in the stored <code class="literal">_source</code>.
</p></td></tr></tbody></table></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Removing fields from the <code class="literal">_source</code> has similar downsides to disabling
<code class="literal">_source</code>, especially the fact that you cannot reindex documents from one
Elasticsearch index to another. Consider using
<a class="link" href="search-request-source-filtering.html" title="Source filtering">source filtering</a> or a
<a class="link" href="mapping-transform.html" title="Transform">transform script</a> instead.</p></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-fields.html">Fields</a></span>  <span class="breadcrumb-node"><code class="literal">_all</code></span></div><div class="navheader"><span class="prev"><a href="mapping-source-field.html">
              &nbsp;
              <code class="literal">_source</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-analyzer-field.html"><code class="literal">_analyzer</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-all-field"></a><code class="literal">_all</code></h2></div></div></div><p>The idea of the <code class="literal">_all</code> field is that it includes the text of one or more
other fields within the document indexed. It can come very handy
especially for search requests, where we want to execute a search query
against the content of a document, without knowing which fields to
search on. This comes at the expense of CPU cycles and index size.</p><p>The <code class="literal">_all</code> fields can be completely disabled. Explicit field mappings and
object mappings can be excluded / included in the <code class="literal">_all</code> field. By
default, it is enabled and all fields are included in it for ease of
use.</p><p>When disabling the <code class="literal">_all</code> field, it is a good practice to set
<code class="literal">index.query.default_field</code> to a different value (for example, if you
have a main "message" field in your data, set it to <code class="literal">message</code>).</p><p>One of the nice features of the <code class="literal">_all</code> field is that it takes into
account specific fields boost levels. Meaning that if a title field is
boosted more than content, the title (part) in the <code class="literal">_all</code> field will
mean more than the content (part) in the <code class="literal">_all</code> field.</p><p>Here is a sample mapping:</p><div class="pre_wrapper"><pre class="programlisting">{
    "person" : {
        "_all" : {"enabled" : true},
        "properties" : {
            "name" : {
                "type" : "object",
                "dynamic" : false,
                "properties" : {
                    "first" : {"type" : "string", "store" : true , "include_in_all" : false},
                    "last" : {"type" : "string", "index" : "not_analyzed"}
                }
            },
            "address" : {
                "type" : "object",
                "include_in_all" : false,
                "properties" : {
                    "first" : {
                        "properties" : {
                            "location" : {"type" : "string", "store" : true}
                        }
                    },
                    "last" : {
                        "properties" : {
                            "location" : {"type" : "string"}
                        }
                    }
                }
            },
            "simple1" : {"type" : "long", "include_in_all" : true},
            "simple2" : {"type" : "long", "include_in_all" : false}
        }
    }
}</pre></div><p>The <code class="literal">_all</code> fields allows for <code class="literal">store</code>, <code class="literal">term_vector</code> and <code class="literal">analyzer</code> (with
specific <code class="literal">index_analyzer</code> and <code class="literal">search_analyzer</code>) to be set.</p><h4><a id="highlighting"></a>Highlighting</h4><p>For any field to allow
<a class="link" href="search-request-highlighting.html" title="Highlighting">highlighting</a> it has
to be either stored or part of the <code class="literal">_source</code> field. By default the <code class="literal">_all</code>
field does not qualify for either, so highlighting for it does not yield
any data.</p><p>Although it is possible to <code class="literal">store</code> the <code class="literal">_all</code> field, it is basically an
aggregation of all fields, which means more data will be stored, and
highlighting it might produce strange results.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-fields.html">Fields</a></span>  <span class="breadcrumb-node"><code class="literal">_analyzer</code></span></div><div class="navheader"><span class="prev"><a href="mapping-all-field.html">
              &nbsp;
              <code class="literal">_all</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-boost-field.html"><code class="literal">_boost</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-analyzer-field"></a><code class="literal">_analyzer</code></h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.5.0. </h3>
 Use separate fields with different analyzers
</div></div><p>The <code class="literal">_analyzer</code> mapping allows to use a document field property as the
name of the analyzer that will be used to index the document. The
analyzer will be used for any field that does not explicitly defines an
<code class="literal">analyzer</code> or <code class="literal">index_analyzer</code> when indexing.</p><p>Here is a simple mapping:</p><div class="pre_wrapper"><pre class="programlisting">{
    "type1" : {
        "_analyzer" : {
            "path" : "my_field"
        }
    }
}</pre></div><p>The above will use the value of the <code class="literal">my_field</code> to lookup an analyzer
registered under it. For example, indexing the following doc:</p><div class="pre_wrapper"><pre class="programlisting">{
    "my_field" : "whitespace"
}</pre></div><p>Will cause the <code class="literal">whitespace</code> analyzer to be used as the index analyzer
for all fields without explicit analyzer setting.</p><p>The default path value is <code class="literal">_analyzer</code>, so the analyzer can be driven for
a specific document by setting the <code class="literal">_analyzer</code> field in it. If a custom json
field name is needed, an explicit mapping with a different path should
be set.</p><p>By default, the <code class="literal">_analyzer</code> field is indexed, it can be disabled by
settings <code class="literal">index</code> to <code class="literal">no</code> in the mapping.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-fields.html">Fields</a></span>  <span class="breadcrumb-node"><code class="literal">_boost</code></span></div><div class="navheader"><span class="prev"><a href="mapping-analyzer-field.html">
              &nbsp;
              <code class="literal">_analyzer</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-parent-field.html"><code class="literal">_parent</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-boost-field"></a><code class="literal">_boost</code></h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.0.0.RC1. </h3>
See Function score instead of boost
</div></div><p>Boosting is the process of enhancing the relevancy of a document or
field. Field level mapping allows to define an explicit boost level on a
specific field. The boost field mapping (applied on the
<a class="link" href="mapping-root-object-type.html" title="Root Object Type">root object</a>) allows
to define a boost field mapping where <span class="strong emphasis"><strong>its content will control the
boost level of the document</strong></span>. For example, consider the following
mapping:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_boost" : {"name" : "my_boost", "null_value" : 1.0}
    }
}</pre></div><p>The above mapping defines a mapping for a field named <code class="literal">my_boost</code>. If the
<code class="literal">my_boost</code> field exists within the JSON document indexed, its value will
control the boost level of the document indexed. For example, the
following JSON document will be indexed with a boost value of <code class="literal">2.2</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "my_boost" : 2.2,
    "message" : "This is a tweet!"
}</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="function-score-instead-of-boost"></a>Function score instead of boost</h3></div></div></div><p>Support for document boosting via the <code class="literal">_boost</code> field has been removed
from Lucene and is deprecated in Elasticsearch as of v1.0.0.RC1. The
implementation in Lucene resulted in unpredictable result when
used with multiple fields or multi-value fields.</p><p>Instead, the <a class="xref" href="query-dsl-function-score-query.html" title="Function Score Query">Function Score Query</a> can be used to achieve
the desired functionality by boosting each document by the value in
any field of the document:</p><div class="pre_wrapper"><pre class="programlisting">{
    "query": {
        "function_score": {
            "query": {  <a id="CO81-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
                "match": {
                    "title": "your main query"
                }
            },
            "functions": [{
                "field_value_factor": { <a id="CO81-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
                    "field": "my_boost_field"
                }
            }],
            "score_mode": "multiply"
        }
    }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO81-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The original query, now wrapped in a <code class="literal">function_score</code> query.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO81-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This function returns the value in <code class="literal">my_boost_field</code>, which is then
    multiplied by the query <code class="literal">_score</code> for each document.
</p></td></tr></tbody></table></div><p>Note, that <code class="literal">field_value_factor</code> is a 1.2.x feature.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-fields.html">Fields</a></span>  <span class="breadcrumb-node"><code class="literal">_parent</code></span></div><div class="navheader"><span class="prev"><a href="mapping-boost-field.html">
              &nbsp;
              <code class="literal">_boost</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-field-names-field.html"><code class="literal">_field_names</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-parent-field"></a><code class="literal">_parent</code></h2></div></div></div><p>The parent field mapping is defined on a child mapping, and points to
the parent type this child relates to. For example, in case of a <code class="literal">blog</code>
type and a <code class="literal">blog_tag</code> type child document, the mapping for <code class="literal">blog_tag</code>
should be:</p><div class="pre_wrapper"><pre class="programlisting">{
    "blog_tag" : {
        "_parent" : {
            "type" : "blog"
        }
    }
}</pre></div><p>The mapping is automatically stored and indexed (meaning it can be
searched on using the <code class="literal">_parent</code> field notation).</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_field_data_loading"></a>Field data loading</h3></div></div></div><p>Contrary to other fields the fielddata loading is not <code class="literal">lazy</code>, but <code class="literal">eager</code>. The reason for this is that when this
field has been enabled it is going to be used in parent/child queries, which heavily relies on field data to perform
efficiently. This can already be observed during indexing after refresh either automatically or manually has been executed.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-fields.html">Fields</a></span>  <span class="breadcrumb-node"><code class="literal">_field_names</code></span></div><div class="navheader"><span class="prev"><a href="mapping-parent-field.html">
              &nbsp;
              <code class="literal">_parent</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-routing-field.html"><code class="literal">_routing</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-field-names-field"></a><code class="literal">_field_names</code></h2></div></div></div><p>The <code class="literal">_field_names</code> field indexes the field names of a document, which can later
be used to search for documents based on the fields that they contain typically
using the <code class="literal">exists</code> and <code class="literal">missing</code> filters.</p><p><code class="literal">_field_names</code> is indexed by default for indices that have been created after
Elasticsearch 1.3.0.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-fields.html">Fields</a></span>  <span class="breadcrumb-node"><code class="literal">_routing</code></span></div><div class="navheader"><span class="prev"><a href="mapping-field-names-field.html">
              &nbsp;
              <code class="literal">_field_names</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-index-field.html"><code class="literal">_index</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-routing-field"></a><code class="literal">_routing</code></h2></div></div></div><p>The routing field allows to control the <code class="literal">_routing</code> aspect when indexing
data and explicit routing control is required.</p><h4><a id="_store_index"></a>store / index</h4><p>The first thing the <code class="literal">_routing</code> mapping does is to store the routing
value provided (<code class="literal">store</code> set to <code class="literal">true</code>) and index it (<code class="literal">index</code> set to
<code class="literal">not_analyzed</code>). The reason why the routing is stored by default is so
reindexing data will be possible if the routing value is completely
external and not part of the docs.</p><h4><a id="_required"></a>required</h4><p>Another aspect of the <code class="literal">_routing</code> mapping is the ability to define it as
required by setting <code class="literal">required</code> to <code class="literal">true</code>. This is very important to set
when using routing features, as it allows different APIs to make use of
it. For example, an index operation will be rejected if no routing value
has been provided (or derived from the doc). A delete operation will be
broadcasted to all shards if no routing value is provided and <code class="literal">_routing</code>
is required.</p><h4><a id="_path_2"></a>path</h4><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Deprecated in 1.5.0. </p></div></div><p>The routing value can be provided as an external value when indexing
(and still stored as part of the document, in much the same way
<code class="literal">_source</code> is stored). But, it can also be automatically extracted from
the index doc based on a <code class="literal">path</code>. For example, having the following
mapping:</p><div class="pre_wrapper"><pre class="programlisting">{
    "comment" : {
        "_routing" : {
            "required" : true,
            "path" : "blog.post_id"
        }
    }
}</pre></div><p>Will cause the following doc to be routed based on the <code class="literal">111222</code> value:</p><div class="pre_wrapper"><pre class="programlisting">{
    "text" : "the comment text"
    "blog" : {
        "post_id" : "111222"
    }
}</pre></div><p>Note, using <code class="literal">path</code> without explicit routing value provided required an
additional (though quite fast) parsing phase.</p><h4><a id="_id_uniqueness"></a>id uniqueness</h4><p>When indexing documents specifying a custom <code class="literal">_routing</code>, the uniqueness
of the <code class="literal">_id</code> is not guaranteed throughout all the shards that the index
is composed of. In fact, documents with the same <code class="literal">_id</code> might end up in
different shards if indexed with different <code class="literal">_routing</code> values.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-fields.html">Fields</a></span>  <span class="breadcrumb-node"><code class="literal">_index</code></span></div><div class="navheader"><span class="prev"><a href="mapping-routing-field.html">
              &nbsp;
              <code class="literal">_routing</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-size-field.html"><code class="literal">_size</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-index-field"></a><code class="literal">_index</code></h2></div></div></div><p>The ability to store in a document the index it belongs to. By default
it is disabled, in order to enable it, the following mapping should be
defined:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_index" : { "enabled" : true }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-fields.html">Fields</a></span>  <span class="breadcrumb-node"><code class="literal">_size</code></span></div><div class="navheader"><span class="prev"><a href="mapping-index-field.html">
              &nbsp;
              <code class="literal">_index</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-timestamp-field.html"><code class="literal">_timestamp</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-size-field"></a><code class="literal">_size</code></h2></div></div></div><p>The <code class="literal">_size</code> field allows to automatically index the size of the original
<code class="literal">_source</code> indexed. By default, its disabled. In order to enable it, set
the mapping to:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_size" : {"enabled" : true}
    }
}</pre></div><p>In order to also store it, use:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_size" : {"enabled" : true, "store" : true }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-fields.html">Fields</a></span>  <span class="breadcrumb-node"><code class="literal">_timestamp</code></span></div><div class="navheader"><span class="prev"><a href="mapping-size-field.html">
              &nbsp;
              <code class="literal">_size</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-ttl-field.html"><code class="literal">_ttl</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-timestamp-field"></a><code class="literal">_timestamp</code></h2></div></div></div><p>The <code class="literal">_timestamp</code> field allows to automatically index the timestamp of a
document. It can be provided externally via the index request or in the
<code class="literal">_source</code>. If it is not provided externally it will be automatically set
to a <a class="link" href="mapping-timestamp-field.html#mapping-timestamp-field-default" title="defaultedit">default date</a>.</p><h4><a id="_enabled"></a>enabled</h4><p>By default it is disabled. In order to enable it, the following mapping
should be defined:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_timestamp" : { "enabled" : true }
    }
}</pre></div><h4><a id="_store_index_2"></a>store / index</h4><p>By default the <code class="literal">_timestamp</code> field has <code class="literal">store</code> set to <code class="literal">false</code> and <code class="literal">index</code>
set to <code class="literal">not_analyzed</code>. It can be queried as a standard date field.</p><h4><a id="_path_3"></a>path</h4><p>The <code class="literal">_timestamp</code> value can be provided as an external value when
indexing. But, it can also be automatically extracted from the document
to index based on a <code class="literal">path</code>. For example, having the following mapping:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_timestamp" : {
            "enabled" : true,
            "path" : "post_date"
        }
    }
}</pre></div><p>Will cause <code class="literal">2009-11-15T14:12:12</code> to be used as the timestamp value for:</p><div class="pre_wrapper"><pre class="programlisting">{
    "message" : "You know, for Search",
    "post_date" : "2009-11-15T14:12:12"
}</pre></div><p>Note, using <code class="literal">path</code> without explicit timestamp value provided requires an
additional (though quite fast) parsing phase.</p><h4><a id="mapping-timestamp-field-format"></a>format</h4><p>You can define the <a class="link" href="mapping-date-format.html" title="Date Format">date format</a> used to parse the provided timestamp value. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_timestamp" : {
            "enabled" : true,
            "path" : "post_date",
            "format" : "YYYY-MM-dd"
        }
    }
}</pre></div><p>Note, the default format is <code class="literal">dateOptionalTime</code>. The timestamp value will
first be parsed as a number and if it fails the format will be tried.</p><h4><a id="mapping-timestamp-field-default"></a>default</h4><p>You can define a default value for when timestamp is not provided
within the index request or in the <code class="literal">_source</code> document.</p><p>By default, the default value is <code class="literal">now</code> which means the date the document was processed by the indexing chain.</p><p>You can reject documents which do not provide a <code class="literal">timestamp</code> value by setting <code class="literal">ignore_missing</code> to false (default to <code class="literal">true</code>):</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_timestamp" : {
            "enabled" : true,
            "ignore_missing" : false
        }
    }
}</pre></div><p>You can also set the default value to any date respecting <a class="link" href="mapping-timestamp-field.html#mapping-timestamp-field-format" title="formatedit">timestamp format</a>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_timestamp" : {
            "enabled" : true,
            "format" : "YYYY-MM-dd",
            "default" : "1970-01-01"
        }
    }
}</pre></div><p>If you dont provide any timestamp value, _timestamp will be set to this default value.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-fields.html">Fields</a></span>  <span class="breadcrumb-node"><code class="literal">_ttl</code></span></div><div class="navheader"><span class="prev"><a href="mapping-timestamp-field.html">
              &nbsp;
              <code class="literal">_timestamp</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-types.html">Types
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-ttl-field"></a><code class="literal">_ttl</code></h2></div></div></div><p>A lot of documents naturally come with an expiration date. Documents can
therefore have a <code class="literal">_ttl</code> (time to live), which will cause the expired
documents to be deleted automatically.</p><p><code class="literal">_ttl</code> accepts two parameters which are described below, every other setting will be silently ignored.</p><h4><a id="_enabled_2"></a>enabled</h4><p>By default it is disabled, in order to enable it, the following mapping
should be defined:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_ttl" : { "enabled" : true }
    }
}</pre></div><p><code class="literal">_ttl</code> can only be enabled once and never be disabled again.</p><h4><a id="_default"></a>default</h4><p>You can provide a per index/type default <code class="literal">_ttl</code> value as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_ttl" : { "enabled" : true, "default" : "1d" }
    }
}</pre></div><p>In this case, if you dont provide a <code class="literal">_ttl</code> value in your query or in
the <code class="literal">_source</code> all tweets will have a <code class="literal">_ttl</code> of one day.</p><p>In case you do not specify a time unit like <code class="literal">d</code> (days), <code class="literal">m</code> (minutes),
<code class="literal">h</code> (hours), <code class="literal">ms</code> (milliseconds) or <code class="literal">w</code> (weeks), milliseconds is used as
default unit.</p><p>If no <code class="literal">default</code> is set and no <code class="literal">_ttl</code> value is given then the document
has an infinite <code class="literal">_ttl</code> and will not expire.</p><p>You can dynamically update the <code class="literal">default</code> value using the put mapping
API. It wont change the <code class="literal">_ttl</code> of already indexed documents but will be
used for future documents.</p><h4><a id="_note_on_documents_expiration"></a>Note on documents expiration</h4><p>Expired documents will be automatically deleted regularly. You can
dynamically set the <code class="literal">indices.ttl.interval</code> to fit your needs. The
default value is <code class="literal">60s</code>.</p><p>The deletion orders are processed by bulk. You can set
<code class="literal">indices.ttl.bulk_size</code> to fit your needs. The default value is <code class="literal">10000</code>.</p><p>Note that the expiration procedure handle versioning properly so if a
document is updated between the collection of documents to expire and
the delete order, the document wont be deleted.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-node">Types</span></div><div class="navheader"><span class="prev"><a href="mapping-ttl-field.html">
              &nbsp;
              <code class="literal">_ttl</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-core-types.html">Core Types
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-types"></a>Types</h2></div></div></div><p>The datatype for each field in a document (eg strings, numbers,
objects etc) can be controlled via the type mapping.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-types.html">Types</a></span>  <span class="breadcrumb-node">Core Types</span></div><div class="navheader"><span class="prev"><a href="mapping-types.html">
              &nbsp;
              Types</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-array-type.html">Array Type
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-core-types"></a>Core Types</h2></div></div></div><p>Each JSON field can be mapped to a specific core type. JSON itself
already provides us with some typing, with its support for <code class="literal">string</code>,
<code class="literal">integer</code>/<code class="literal">long</code>, <code class="literal">float</code>/<code class="literal">double</code>, <code class="literal">boolean</code>, and <code class="literal">null</code>.</p><p>The following sample tweet JSON document will be used to explain the
core types:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" {
        "user" : "kimchy",
        "message" : "This is a tweet!",
        "postDate" : "2009-11-15T14:12:12",
        "priority" : 4,
        "rank" : 12.3
    }
}</pre></div><p>Explicit mapping for the above JSON tweet can be:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "properties" : {
            "user" : {"type" : "string", "index" : "not_analyzed"},
            "message" : {"type" : "string", "null_value" : "na"},
            "postDate" : {"type" : "date"},
            "priority" : {"type" : "integer"},
            "rank" : {"type" : "float"}
        }
    }
}</pre></div><h4><a id="string"></a>String</h4><p>The text based string type is the most basic type, and contains one or
more characters. An example mapping can be:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "properties" : {
            "message" : {
                "type" : "string",
                "store" : true,
                "index" : "analyzed",
                "null_value" : "na"
            },
            "user" : {
                "type" : "string",
                "index" : "not_analyzed",
                "norms" : {
                    "enabled" : false
                }
            }
        }
    }
}</pre></div><p>The above mapping defines a <code class="literal">string</code> <code class="literal">message</code> property/field within the
<code class="literal">tweet</code> type. The field is stored in the index (so it can later be
retrieved using selective loading when searching), and it gets analyzed
(broken down into searchable terms). If the message has a <code class="literal">null</code> value,
then the value that will be stored is <code class="literal">na</code>. There is also a <code class="literal">string</code> <code class="literal">user</code>
which is indexed as-is (not broken down into tokens) and has norms
disabled (so that matching this field is a binary decision, no match is
better than another one).</p><p>The following table lists all the attributes that can be used with the
<code class="literal">string</code> type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Attribute </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">index_name</code></p></td><td class="entry" align="left" valign="top"><p><span class="deprecated">
      [<span class="version">1.5.0</span>]
      <span class="detail">Deprecated in 1.5.0.
Use <a class="link" href="mapping-core-types.html#copy-to" title="Copy to fieldedit"><code class="literal">copy_to</code></a> instead
</span></span> The name of the field that will be stored in the index.
Defaults to the property/field name.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">store</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to actually store the field in the index, <code class="literal">false</code> to not
store it. Since by default Elasticsearch stores all fields of the source
document in the special <code class="literal">_source</code> field, this option is primarily useful when
the <code class="literal">_source</code> field has been disabled in the type definition. Defaults to
<code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">index</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">analyzed</code> for the field to be indexed and searchable
after being broken down into token using an analyzer. <code class="literal">not_analyzed</code>
means that its still searchable, but does not go through any analysis
process or broken down into tokens. <code class="literal">no</code> means that it wont be
searchable at all (as an individual field; it may still be included in
<code class="literal">_all</code>). Setting to <code class="literal">no</code> disables <code class="literal">include_in_all</code>. Defaults to
<code class="literal">analyzed</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc_values</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to store field values in a column-stride fashion.
Automatically set to <code class="literal">true</code> when the <a class="link" href="fielddata-formats.html" title="Field data formats"><code class="literal">fielddata</code> format</a> is <code class="literal">doc_values</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">term_vector</code></p></td><td class="entry" align="left" valign="top"><p>Possible values are <code class="literal">no</code>, <code class="literal">yes</code>, <code class="literal">with_offsets</code>,
<code class="literal">with_positions</code>, <code class="literal">with_positions_offsets</code>. Defaults to <code class="literal">no</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">boost</code></p></td><td class="entry" align="left" valign="top"><p>The boost value. Defaults to <code class="literal">1.0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">null_value</code></p></td><td class="entry" align="left" valign="top"><p>When there is a (JSON) null value for the field, use the
<code class="literal">null_value</code> as the field value. Defaults to not adding the field at
all.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">norms: {enabled: &lt;value&gt;}</code></p></td><td class="entry" align="left" valign="top"><p>Boolean value if norms should be enabled or
not. Defaults to <code class="literal">true</code> for <code class="literal">analyzed</code> fields, and to <code class="literal">false</code> for
<code class="literal">not_analyzed</code> fields. See the <a class="link" href="mapping-core-types.html#norms" title="Normsedit">section about norms</a>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">norms: {loading: &lt;value&gt;}</code></p></td><td class="entry" align="left" valign="top"><p>Describes how norms should be loaded, possible values are
<code class="literal">eager</code> and <code class="literal">lazy</code> (default). It is possible to change the default value to
eager for all fields by configuring the index setting <code class="literal">index.norms.loading</code>
to <code class="literal">eager</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">index_options</code></p></td><td class="entry" align="left" valign="top"><p>Allows to set the indexing
options, possible values are <code class="literal">docs</code> (only doc numbers are indexed),
<code class="literal">freqs</code> (doc numbers and term frequencies), and <code class="literal">positions</code> (doc
numbers, term frequencies and positions). Defaults to <code class="literal">positions</code> for
<code class="literal">analyzed</code> fields, and to <code class="literal">docs</code> for <code class="literal">not_analyzed</code> fields. It
is also possible to set it to <code class="literal">offsets</code> (doc numbers, term
frequencies, positions and offsets).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">analyzer</code></p></td><td class="entry" align="left" valign="top"><p>The analyzer used to analyze the text contents when
<code class="literal">analyzed</code> during indexing and when searching using a query string.
Defaults to the globally configured analyzer.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">index_analyzer</code></p></td><td class="entry" align="left" valign="top"><p>The analyzer used to analyze the text contents when
<code class="literal">analyzed</code> during indexing.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">search_analyzer</code></p></td><td class="entry" align="left" valign="top"><p>The analyzer used to analyze the field when part of
a query string. Can be updated on an existing field.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">include_in_all</code></p></td><td class="entry" align="left" valign="top"><p>Should the field be included in the <code class="literal">_all</code> field (if
enabled). If <code class="literal">index</code> is set to <code class="literal">no</code> this defaults to <code class="literal">false</code>, otherwise,
defaults to <code class="literal">true</code> or to the parent <code class="literal">object</code> type setting.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ignore_above</code></p></td><td class="entry" align="left" valign="top"><p>The analyzer will ignore strings larger than this size.
Useful for generic <code class="literal">not_analyzed</code> fields that should ignore long text.</p>
<p>This option is also useful for protecting against Lucenes term byte-length
limit of <code class="literal">32766</code>. Note: the value for <code class="literal">ignore_above</code> is the <span class="emphasis"><em>character count</em></span>,
but Lucene counts bytes, so if you have UTF-8 text, you may want to set the
limit to <code class="literal">32766 / 3 = 10922</code> since UTF-8 characters may occupy at most 3
bytes.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">position_offset_gap</code></p></td><td class="entry" align="left" valign="top"><p>Position increment gap between field instances
with the same field name. Defaults to 0.</p></td></tr></tbody></table></div><p>The <code class="literal">string</code> type also support custom indexing parameters associated
with the indexed value. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "message" : {
        "_value":  "boosted value",
        "_boost":  2.0
    }
}</pre></div><p>The mapping is required to disambiguate the meaning of the document.
Otherwise, the structure would interpret "message" as a value of type
"object". The key <code class="literal">_value</code> (or <code class="literal">value</code>) in the inner document specifies
the real string content that should eventually be indexed. The <code class="literal">_boost</code>
(or <code class="literal">boost</code>) key specifies the per field document boost (here 2.0).</p><h5><a id="norms"></a>Norms</h5><p>Norms store various normalization factors that are later used (at query time)
in order to compute the score of a document relatively to a query.</p><p>Although useful for scoring, norms also require quite a lot of memory
(typically in the order of one byte per document per field in your index,
even for documents that dont have this specific field). As a consequence, if
you dont need scoring on a specific field, it is highly recommended to disable
norms on it. In  particular, this is the case for fields that are used solely
for filtering or aggregations.</p><p>In case you would like to disable norms after the fact, it is possible to do so
by using the <a class="link" href="indices-put-mapping.html" title="Put Mapping">PUT mapping API</a>, like this:</p><div class="pre_wrapper"><pre class="programlisting">PUT my_index/_mapping/my_type
{
  "properties": {
    "title": {
      "type": "string",
      "norms": {
        "enabled": false
      }
    }
  }
}</pre></div><p>Please however note that norms wont be removed instantly, but will be removed
as old segments are merged into new segments as you continue indexing new documents.
Any score computation on a field that has had
norms removed might return inconsistent results since some documents wont have
norms anymore while other documents might still have norms.</p><h4><a id="number"></a>Number</h4><p>A number based type supporting <code class="literal">float</code>, <code class="literal">double</code>, <code class="literal">byte</code>, <code class="literal">short</code>,
<code class="literal">integer</code>, and <code class="literal">long</code>. It uses specific constructs within Lucene in
order to support numeric values. The number types have the same ranges
as corresponding
<a class="ulink" href="http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html" target="_top">Java
types</a>. An example mapping can be:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "properties" : {
            "rank" : {
                "type" : "float",
                "null_value" : 1.0
            }
        }
    }
}</pre></div><p>The following table lists all the attributes that can be used with a
numbered type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Attribute </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">type</code></p></td><td class="entry" align="left" valign="top"><p>The type of the number. Can be <code class="literal">float</code>, <code class="literal">double</code>, <code class="literal">integer</code>,
<code class="literal">long</code>, <code class="literal">short</code>, <code class="literal">byte</code>. Required.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">index_name</code></p></td><td class="entry" align="left" valign="top"><p><span class="deprecated">
      [<span class="version">1.5.0</span>]
      <span class="detail">Deprecated in 1.5.0.
Use <a class="link" href="mapping-core-types.html#copy-to" title="Copy to fieldedit"><code class="literal">copy_to</code></a> instead
</span></span> The name of the field that will be stored in the index.
Defaults to the property/field name.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">store</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to store actual field in the index, <code class="literal">false</code> to not
store it. Defaults to <code class="literal">false</code> (note, the JSON document itself is stored,
and it can be retrieved from it).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">index</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">no</code> if the value should not be indexed. Setting to
<code class="literal">no</code> disables <code class="literal">include_in_all</code>. If set to <code class="literal">no</code> the field should be either stored
in <code class="literal">_source</code>, have <code class="literal">include_in_all</code> enabled, or <code class="literal">store</code> be set to
<code class="literal">true</code> for this to be useful.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc_values</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to store field values in a column-stride fashion.
Automatically set to <code class="literal">true</code> when the fielddata format is <code class="literal">doc_values</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">precision_step</code></p></td><td class="entry" align="left" valign="top"><p>The precision step (influences the number of terms
generated for each number value). Defaults to <code class="literal">16</code> for <code class="literal">long</code>, <code class="literal">double</code>,
<code class="literal">8</code> for <code class="literal">short</code>, <code class="literal">integer</code>, <code class="literal">float</code>, and <code class="literal">2147483647</code> for <code class="literal">byte</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">boost</code></p></td><td class="entry" align="left" valign="top"><p>The boost value. Defaults to <code class="literal">1.0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">null_value</code></p></td><td class="entry" align="left" valign="top"><p>When there is a (JSON) null value for the field, use the
<code class="literal">null_value</code> as the field value. Defaults to not adding the field at
all.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">include_in_all</code></p></td><td class="entry" align="left" valign="top"><p>Should the field be included in the <code class="literal">_all</code> field (if
enabled). If <code class="literal">index</code> is set to <code class="literal">no</code> this defaults to <code class="literal">false</code>, otherwise,
defaults to <code class="literal">true</code> or to the parent <code class="literal">object</code> type setting.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ignore_malformed</code></p></td><td class="entry" align="left" valign="top"><p>Ignored a malformed number. Defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">coerce</code></p></td><td class="entry" align="left" valign="top"><p>Try convert strings to numbers and truncate fractions for integers. Defaults to <code class="literal">true</code>.</p></td></tr></tbody></table></div><h4><a id="token_count"></a>Token Count</h4><p>The <code class="literal">token_count</code> type maps to the JSON string type but indexes and stores
the number of tokens in the string rather than the string itself.  For
example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "properties" : {
            "name" : {
                "type" : "string",
                "fields" : {
                    "word_count": {
                        "type" : "token_count",
                        "store" : "yes",
                        "analyzer" : "standard"
                    }
                }
            }
        }
    }
}</pre></div><p>All the configuration that can be specified for a number can be specified
for a token_count.  The only extra configuration is the required
<code class="literal">analyzer</code> field which specifies which analyzer to use to break the string
into tokens.  For best performance, use an analyzer with no token filters.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Technically the <code class="literal">token_count</code> type sums position increments rather than
counting tokens. This means that even if the analyzer filters out stop
words they are included in the count.</p></div></div><h4><a id="date"></a>Date</h4><p>The date type is a special type which maps to JSON string type. It
follows a specific format that can be explicitly set. All dates are
<code class="literal">UTC</code>. Internally, a date maps to a number type <code class="literal">long</code>, with the added
parsing stage from string to long and from long to string. An example
mapping:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "properties" : {
            "postDate" : {
                "type" : "date",
                "format" : "YYYY-MM-dd"
            }
        }
    }
}</pre></div><p>The date type will also accept a long number representing UTC
milliseconds since the epoch, regardless of the format it can handle.</p><p>The following table lists all the attributes that can be used with a
date type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Attribute </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">index_name</code></p></td><td class="entry" align="left" valign="top"><p><span class="deprecated">
      [<span class="version">1.5.0</span>]
      <span class="detail">Deprecated in 1.5.0.
Use <a class="link" href="mapping-core-types.html#copy-to" title="Copy to fieldedit"><code class="literal">copy_to</code></a> instead
</span></span> The name of the field that will be stored in the index.
Defaults to the property/field name.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">format</code></p></td><td class="entry" align="left" valign="top"><p>The <a class="link" href="mapping-date-format.html" title="Date Format">date format</a>. Defaults to <code class="literal">dateOptionalTime</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">store</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to store actual field in the index, <code class="literal">false</code> to not
store it. Defaults to <code class="literal">false</code> (note, the JSON document itself is stored,
and it can be retrieved from it).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">index</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">no</code> if the value should not be indexed. Setting to
<code class="literal">no</code> disables <code class="literal">include_in_all</code>. If set to <code class="literal">no</code> the field should be either stored
in <code class="literal">_source</code>, have <code class="literal">include_in_all</code> enabled, or <code class="literal">store</code> be set to
<code class="literal">true</code> for this to be useful.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc_values</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to store field values in a column-stride fashion.
Automatically set to <code class="literal">true</code> when the fielddata format is <code class="literal">doc_values</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">precision_step</code></p></td><td class="entry" align="left" valign="top"><p>The precision step (influences the number of terms
generated for each number value). Defaults to <code class="literal">16</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">boost</code></p></td><td class="entry" align="left" valign="top"><p>The boost value. Defaults to <code class="literal">1.0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">null_value</code></p></td><td class="entry" align="left" valign="top"><p>When there is a (JSON) null value for the field, use the
<code class="literal">null_value</code> as the field value. Defaults to not adding the field at
all.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">include_in_all</code></p></td><td class="entry" align="left" valign="top"><p>Should the field be included in the <code class="literal">_all</code> field (if
enabled). If <code class="literal">index</code> is set to <code class="literal">no</code> this defaults to <code class="literal">false</code>, otherwise,
defaults to <code class="literal">true</code> or to the parent <code class="literal">object</code> type setting.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ignore_malformed</code></p></td><td class="entry" align="left" valign="top"><p>Ignored a malformed number. Defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">numeric_resolution</code></p></td><td class="entry" align="left" valign="top"><p>The unit to use when passed in a numeric values. Possible
values include <code class="literal">seconds</code> and  <code class="literal">milliseconds</code> (default).</p></td></tr></tbody></table></div><h4><a id="boolean"></a>Boolean</h4><p>The boolean type Maps to the JSON boolean type. It ends up storing
within the index either <code class="literal">T</code> or <code class="literal">F</code>, with automatic translation to <code class="literal">true</code>
and <code class="literal">false</code> respectively.</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "properties" : {
            "has_my_special_tweet" : {
                "type" : "boolean"
            }
        }
    }
}</pre></div><p>The boolean type also supports passing the value as a number or a string
(in this case <code class="literal">0</code>, an empty string, <code class="literal">false</code>, <code class="literal">off</code> and <code class="literal">no</code> are
<code class="literal">false</code>, all other values are <code class="literal">true</code>).</p><p>The following table lists all the attributes that can be used with the
boolean type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Attribute </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">index_name</code></p></td><td class="entry" align="left" valign="top"><p><span class="deprecated">
      [<span class="version">1.5.0</span>]
      <span class="detail">Deprecated in 1.5.0.
Use <a class="link" href="mapping-core-types.html#copy-to" title="Copy to fieldedit"><code class="literal">copy_to</code></a> instead
</span></span> The name of the field that will be stored in the index.
Defaults to the property/field name.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">store</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to store actual field in the index, <code class="literal">false</code> to not
store it. Defaults to <code class="literal">false</code> (note, the JSON document itself is stored,
and it can be retrieved from it).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">index</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">no</code> if the value should not be indexed. Setting to
<code class="literal">no</code> disables <code class="literal">include_in_all</code>. If set to <code class="literal">no</code> the field should be either stored
in <code class="literal">_source</code>, have <code class="literal">include_in_all</code> enabled, or <code class="literal">store</code> be set to
<code class="literal">true</code> for this to be useful.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">boost</code></p></td><td class="entry" align="left" valign="top"><p>The boost value. Defaults to <code class="literal">1.0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">null_value</code></p></td><td class="entry" align="left" valign="top"><p>When there is a (JSON) null value for the field, use the
<code class="literal">null_value</code> as the field value. Defaults to not adding the field at
all.</p></td></tr></tbody></table></div><h4><a id="binary"></a>Binary</h4><p>The binary type is a base64 representation of binary data that can be
stored in the index. The field is not stored by default and not indexed at
all.</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "properties" : {
            "image" : {
                "type" : "binary"
            }
        }
    }
}</pre></div><p>The following table lists all the attributes that can be used with the
binary type:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">index_name</code>
</p>
</td><td class="entry" valign="top">
<p>
    <span class="deprecated">
      [<span class="version">1.5.0</span>]
      <span class="detail">Deprecated in 1.5.0.
Use <a class="link" href="mapping-core-types.html#copy-to" title="Copy to fieldedit"><code class="literal">copy_to</code></a> instead
</span></span> The name of the field that will be stored in the index.
    Defaults to the property/field name.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">store</code>
</p>
</td><td class="entry" valign="top">
<p>
    Set to <code class="literal">true</code> to store actual field in the index, <code class="literal">false</code> to not store it.
    Defaults to <code class="literal">false</code> (note, the JSON document itself is already stored, so
    the binary field can be retrieved from there).
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">doc_values</code>
</p>
</td><td class="entry" valign="top">
<p>
    Set to <code class="literal">true</code> to store field values in a column-stride fashion.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">compress</code>
</p>
</td><td class="entry" valign="top">
<p>
    Set to <code class="literal">true</code> to compress the stored binary value.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">compress_threshold</code>
</p>
</td><td class="entry" valign="top">
<p>
    Compression will only be applied to stored binary fields that are greater
    than this size. Defaults to <code class="literal">-1</code>
</p>
</td></tr></tbody></table></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Enabling compression on stored binary fields only makes sense on large
and highly-compressible values. Otherwise per-field compression is usually not
worth doing as the space savings do not compensate for the overhead of the
compression format. Normally, you should not configure any compression and
just rely on the block compression of stored fields (which is enabled by
default and cant be disabled).</p></div></div><h4><a id="fielddata-filters"></a>Fielddata filters</h4><p>It is possible to control which field values are loaded into memory,
which is particularly useful for aggregating on string fields, using
fielddata filters, which are explained in detail in the
<a class="link" href="index-modules-fielddata.html" title="Field data">Fielddata</a> section.</p><p>Fielddata filters can exclude terms which do not match a regex, or which
dont fall between a <code class="literal">min</code> and <code class="literal">max</code> frequency range:</p><div class="pre_wrapper"><pre class="programlisting">{
    tweet: {
        type:      "string",
        analyzer:  "whitespace"
        fielddata: {
            filter: {
                regex: {
                    "pattern":        "^#.*"
                },
                frequency: {
                    min:              0.001,
                    max:              0.1,
                    min_segment_size: 500
                }
            }
        }
    }
}</pre></div><p>These filters can be updated on an existing field mapping and will take
effect the next time the fielddata for a segment is loaded. Use the
<a class="link" href="indices-clearcache.html" title="Clear Cache">Clear Cache</a> API
to reload the fielddata using the new filters.</p><h4><a id="_similarity"></a>Similarity</h4><p>Elasticsearch allows you to configure a similarity (scoring algorithm) per field.
The <code class="literal">similarity</code> setting provides a simple way of choosing a similarity algorithm
other than the default TF/IDF, such as <code class="literal">BM25</code>.</p><p>You can configure similarities via the
<a class="link" href="index-modules-similarity.html" title="Similarity module">similarity module</a></p><h5><a id="_configuring_similarity_per_field"></a>Configuring Similarity per Field</h5><p>Defining the Similarity for a field is done via the <code class="literal">similarity</code> mapping
property, as this example shows:</p><div class="pre_wrapper"><pre class="programlisting">{
   "book":{
      "properties":{
         "title":{
            "type":"string", "similarity":"BM25"
         }
      }
   }
}</pre></div><p>The following Similarities are configured out-of-box:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">default</code>
</span></dt><dd>
        The Default TF/IDF algorithm used by Elasticsearch and
        Lucene in previous versions.
</dd><dt><span class="term">
<code class="literal">BM25</code>
</span></dt><dd>
        The BM25 algorithm.
        <a class="ulink" href="http://en.wikipedia.org/wiki/Okapi_BM25" target="_top">See Okapi_BM25</a> for more
        details.
</dd></dl></div><h5><a id="copy-to"></a>Copy to field</h5><p>Adding <code class="literal">copy_to</code> parameter to any field mapping will cause all values of this field to be copied to fields specified in
the parameter. In the following example all values from fields <code class="literal">title</code> and <code class="literal">abstract</code> will be copied to the field
<code class="literal">meta_data</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
  "book" : {
    "properties" : {
      "title" : { "type" : "string", "copy_to" : "meta_data" },
      "abstract" : { "type" : "string", "copy_to" : "meta_data" },
      "meta_data" : { "type" : "string" }
    }
}</pre></div><p>Multiple fields are also supported:</p><div class="pre_wrapper"><pre class="programlisting">{
  "book" : {
    "properties" : {
      "title" : { "type" : "string", "copy_to" : ["meta_data", "article_info"] }
    }
}</pre></div><h5><a id="_multi_fields_3"></a>Multi fields</h5><p>The <code class="literal">fields</code> options allows to map several core types fields into a single
json source field. This can be useful if a single field need to be
used in different ways. For example a single field is to be used for both
free text search and sorting.</p><div class="pre_wrapper"><pre class="programlisting">{
  "tweet" : {
    "properties" : {
      "name" : {
        "type" : "string",
        "index" : "analyzed",
        "fields" : {
          "raw" : {"type" : "string", "index" : "not_analyzed"}
        }
      }
    }
  }
}</pre></div><p>In the above example the field <code class="literal">name</code> gets processed twice. The first time it gets
processed as an analyzed string and this version is accessible under the field name
<code class="literal">name</code>, this is the main field and is in fact just like any other field. The second time
it gets processed as a not analyzed string and is accessible under the name <code class="literal">name.raw</code>.</p><h4><a id="_include_in_all"></a>Include in All</h4><p>The <code class="literal">include_in_all</code> setting is ignored on any field that is defined in
the <code class="literal">fields</code> options. Setting the <code class="literal">include_in_all</code> only makes sense on
the main field, since the raw field value is copied to the <code class="literal">_all</code> field,
the tokens arent copied.</p><h4><a id="_updating_a_field"></a>Updating a field</h4><p>In the essence a field cant be updated. However multi fields can be
added to existing fields. This allows for example to have a different
<code class="literal">index_analyzer</code> configuration in addition to the already configured
<code class="literal">index_analyzer</code> configuration specified in the main and other multi fields.</p><p>Also the new multi field will only be applied on document that have been
added after the multi field has been added and in fact the new multi field
doesnt exist in existing documents.</p><p>Another important note is that new multi fields will be merged into the
list of existing multi fields, so when adding new multi fields for a field
previous added multi fields dont need to be specified.</p><h4><a id="_accessing_fields"></a>Accessing Fields</h4><p>The multi fields defined in the <code class="literal">fields</code> are prefixed with the
name of the main field and can be accessed by their full path using the
navigation notation: <code class="literal">name.raw</code>, or using the typed navigation notation
<code class="literal">tweet.name.raw</code>.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.0.0. </h3>
The path option below is deprecated.  Use copy_to instead for setting up custom _all fields
</div></div><p>In older releases, the <code class="literal">path</code> option allows to control how fields are accessed.
If the <code class="literal">path</code> option is set to <code class="literal">full</code>, then the full path of the main field
is prefixed, but if the <code class="literal">path</code> option is set to <code class="literal">just_name</code> the actual
multi field name without any prefix is used. The default value for
the <code class="literal">path</code> option is <code class="literal">full</code>.</p><p>The <code class="literal">just_name</code> setting, among other things, allows indexing content of multiple
fields under the same name (commonly used to set up custom _all fields in the past).
In the example below the content of both fields <code class="literal">first_name</code> and <code class="literal">last_name</code>
can be accessed by using <code class="literal">any_name</code> or <code class="literal">tweet.any_name</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
  "tweet" : {
    "properties": {
      "first_name": {
        "type": "string",
        "index": "analyzed",
        "path": "just_name",
        "fields": {
          "any_name": {"type": "string","index": "analyzed"}
        }
      },
      "last_name": {
        "type": "string",
        "index": "analyzed",
        "path": "just_name",
        "fields": {
          "any_name": {"type": "string","index": "analyzed"}
        }
      }
    }
  }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-types.html">Types</a></span>  <span class="breadcrumb-node">Array Type</span></div><div class="navheader"><span class="prev"><a href="mapping-core-types.html">
              &nbsp;
              Core Types</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-object-type.html">Object Type
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-array-type"></a>Array Type</h2></div></div></div><p>JSON documents allow to define an array (list) of fields or objects.
Mapping array types could not be simpler since arrays gets automatically
detected and mapping them can be done either with
<a class="link" href="mapping-core-types.html" title="Core Types">Core Types</a> or
<a class="link" href="mapping-object-type.html" title="Object Type">Object Type</a> mappings.
For example, the following JSON defines several arrays:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "message" : "some arrays in this tweet...",
        "tags" : ["elasticsearch", "wow"],
        "lists" : [
            {
                "name" : "prog_list",
                "description" : "programming list"
            },
            {
                "name" : "cool_list",
                "description" : "cool stuff list"
            }
        ]
    }
}</pre></div><p>The above JSON has the <code class="literal">tags</code> property defining a list of a simple
<code class="literal">string</code> type, and the <code class="literal">lists</code> property is an <code class="literal">object</code> type array. Here
is a sample explicit mapping:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "properties" : {
            "message" : {"type" : "string"},
            "tags" : {"type" : "string"},
            "lists" : {
                "properties" : {
                    "name" : {"type" : "string"},
                    "description" : {"type" : "string"}
                }
            }
        }
    }
}</pre></div><p>The fact that array types are automatically supported can be shown by
the fact that the following JSON document is perfectly fine:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "message" : "some arrays in this tweet...",
        "tags" : "elasticsearch",
        "lists" : {
            "name" : "prog_list",
            "description" : "programming list"
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-types.html">Types</a></span>  <span class="breadcrumb-node">Object Type</span></div><div class="navheader"><span class="prev"><a href="mapping-array-type.html">
              &nbsp;
              Array Type</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-root-object-type.html">Root Object Type
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-object-type"></a>Object Type</h2></div></div></div><p>JSON documents are hierarchical in nature, allowing them to define inner
"objects" within the actual JSON. Elasticsearch completely understands
the nature of these inner objects and can map them easily, providing
query support for their inner fields. Because each document can have
objects with different fields each time, objects mapped this way are
known as "dynamic". Dynamic mapping is enabled by default. Lets take
the following JSON as an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "person" : {
            "name" : {
                "first_name" : "Shay",
                "last_name" : "Banon"
            },
            "sid" : "12345"
        },
        "message" : "This is a tweet!"
    }
}</pre></div><p>The above shows an example where a tweet includes the actual <code class="literal">person</code>
details. A <code class="literal">person</code> is an object, with a <code class="literal">sid</code>, and a <code class="literal">name</code> object
which has <code class="literal">first_name</code> and <code class="literal">last_name</code>. Its important to note that
<code class="literal">tweet</code> is also an object, although it is a special
<a class="link" href="mapping-root-object-type.html" title="Root Object Type">root object type</a>
which allows for additional mapping definitions.</p><p>The following is an example of explicit mapping for the above JSON:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "properties" : {
            "person" : {
                "type" : "object",
                "properties" : {
                    "name" : {
                        "type" : "object",
                        "properties" : {
                            "first_name" : {"type" : "string"},
                            "last_name" : {"type" : "string"}
                        }
                    },
                    "sid" : {"type" : "string", "index" : "not_analyzed"}
                }
            },
            "message" : {"type" : "string"}
        }
    }
}</pre></div><p>In order to mark a mapping of type <code class="literal">object</code>, set the <code class="literal">type</code> to object.
This is an optional step, since if there are <code class="literal">properties</code> defined for
it, it will automatically be identified as an <code class="literal">object</code> mapping.</p><h4><a id="_properties"></a>properties</h4><p>An object mapping can optionally define one or more properties using the
<code class="literal">properties</code> tag for a field. Each property can be either another
<code class="literal">object</code>, or one of the
<a class="link" href="mapping-core-types.html" title="Core Types">core_types</a>.</p><h4><a id="_dynamic"></a>dynamic</h4><p>One of the most important features of Elasticsearch is its ability to be
schema-less. This means that, in our example above, the <code class="literal">person</code> object
can be indexed later with a new property<code class="literal">age</code>, for exampleand it
will automatically be added to the mapping definitions. Same goes for
the <code class="literal">tweet</code> root object.</p><p>This feature is by default turned on, and its the <code class="literal">dynamic</code> nature of
each object mapped. Each object mapped is automatically dynamic, though
it can be explicitly turned off:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "properties" : {
            "person" : {
                "type" : "object",
                "properties" : {
                    "name" : {
                        "dynamic" : false,
                        "properties" : {
                            "first_name" : {"type" : "string"},
                            "last_name" : {"type" : "string"}
                        }
                    },
                    "sid" : {"type" : "string", "index" : "not_analyzed"}
                }
            },
            "message" : {"type" : "string"}
        }
    }
}</pre></div><p>In the above example, the <code class="literal">name</code> object mapped is not dynamic, meaning
that if, in the future, we try to index JSON with a <code class="literal">middle_name</code> within
the <code class="literal">name</code> object, it will get discarded and not added.</p><p>There is no performance overhead if an <code class="literal">object</code> is dynamic, the ability
to turn it off is provided as a safety mechanism so "malformed" objects
wont, by mistake, index data that we do not wish to be indexed.</p><p>If a dynamic object contains yet another inner <code class="literal">object</code>, it will be
automatically added to the index and mapped as well.</p><p>When processing dynamic new fields, their type is automatically derived.
For example, if it is a <code class="literal">number</code>, it will automatically be treated as
number <a class="link" href="mapping-core-types.html" title="Core Types">core_type</a>. Dynamic
fields default to their default attributes, for example, they are not
stored and they are always indexed.</p><p>Date fields are special since they are represented as a <code class="literal">string</code>. Date
fields are detected if they can be parsed as a date when they are first
introduced into the system. The set of date formats that are tested
against can be configured using the <code class="literal">dynamic_date_formats</code> on the root object,
which is explained later.</p><p>Note, once a field has been added, <span class="strong emphasis"><strong>its type can not change</strong></span>. For
example, if we added age and its value is a number, then it cant be
treated as a string.</p><p>The <code class="literal">dynamic</code> parameter can also be set to <code class="literal">strict</code>, meaning that not
only will new fields not be introduced into the mapping, but also that parsing
(indexing) docs with such new fields will fail.</p><h4><a id="_enabled_3"></a>enabled</h4><p>The <code class="literal">enabled</code> flag allows to disable parsing and indexing a named object
completely. This is handy when a portion of the JSON document contains
arbitrary JSON which should not be indexed, nor added to the mapping.
For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "properties" : {
            "person" : {
                "type" : "object",
                "properties" : {
                    "name" : {
                        "type" : "object",
                        "enabled" : false
                    },
                    "sid" : {"type" : "string", "index" : "not_analyzed"}
                }
            },
            "message" : {"type" : "string"}
        }
    }
}</pre></div><p>In the above, <code class="literal">name</code> and its content will not be indexed at all.</p><h4><a id="_include_in_all_2"></a>include_in_all</h4><p><code class="literal">include_in_all</code> can be set on the <code class="literal">object</code> type level. When set, it
propagates down to all the inner mappings defined within the <code class="literal">object</code>
that do not explicitly set it.</p><h4><a id="_path_4"></a>path</h4><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.0.0. </h3>
Use copy_to instead
</div></div><p>In the <a class="link" href="mapping-core-types.html" title="Core Types">core_types</a>
section, a field can have a <code class="literal">index_name</code> associated with it in order to
control the name of the field that will be stored within the index. When
that field exists within an object(s) that are not the root object, the
name of the field of the index can either include the full "path" to the
field with its <code class="literal">index_name</code>, or just the <code class="literal">index_name</code>. For example
(under mapping of <span class="emphasis"><em>type</em></span> <code class="literal">person</code>, removed the tweet type for clarity):</p><div class="pre_wrapper"><pre class="programlisting">{
    "person" : {
        "properties" : {
            "name1" : {
                "type" : "object",
                "path" : "just_name",
                "properties" : {
                    "first1" : {"type" : "string"},
                    "last1" : {"type" : "string", "index_name" : "i_last_1"}
                }
            },
            "name2" : {
                "type" : "object",
                "path" : "full",
                "properties" : {
                    "first2" : {"type" : "string"},
                    "last2" : {"type" : "string", "index_name" : "i_last_2"}
                }
            }
        }
    }
}</pre></div><p>In the above example, the <code class="literal">name1</code> and <code class="literal">name2</code> objects within the
<code class="literal">person</code> object have different combination of <code class="literal">path</code> and <code class="literal">index_name</code>.
The document fields that will be stored in the index as a result of that
are:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">JSON Name </th><th class="entry" align="left" valign="top">Document Field Name</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">name1</code>/<code class="literal">first1</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">first1</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">name1</code>/<code class="literal">last1</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">i_last_1</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">name2</code>/<code class="literal">first2</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">name2.first2</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">name2</code>/<code class="literal">last2</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">name2.i_last_2</code></p></td></tr></tbody></table></div><p>Note, when querying or using a field name in any of the APIs provided
(search, query, selective loading, ), there is an automatic detection
from logical full path and into the <code class="literal">index_name</code> and vice versa. For
example, even though <code class="literal">name1</code>/<code class="literal">last1</code> defines that it is stored with
<code class="literal">just_name</code> and a different <code class="literal">index_name</code>, it can either be referred to
using <code class="literal">name1.last1</code> (logical name), or its actual indexed name of
<code class="literal">i_last_1</code>.</p><p>More over, where applicable, for example, in queries, the full path
including the type can be used such as <code class="literal">person.name.last1</code>, in this
case, both the actual indexed name will be resolved to match against the
index, and an automatic query filter will be added to only match
<code class="literal">person</code> types.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-types.html">Types</a></span>  <span class="breadcrumb-node">Root Object Type</span></div><div class="navheader"><span class="prev"><a href="mapping-object-type.html">
              &nbsp;
              Object Type</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-nested-type.html">Nested Type
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-root-object-type"></a>Root Object Type</h2></div></div></div><p>The root object mapping is an <a class="link" href="mapping-object-type.html" title="Object Type">object type mapping</a> that
maps the root object (the type itself). It supports all of the different
mappings that can be set using the <a class="link" href="mapping-object-type.html" title="Object Type">object type mapping</a>.</p><p>The root object mapping allows to index a JSON document that only contains its
fields. For example, the following <code class="literal">tweet</code> JSON can be indexed without
specifying the <code class="literal">tweet</code> type in the document itself:</p><div class="pre_wrapper"><pre class="programlisting">{
    "message" : "This is a tweet!"
}</pre></div><h4><a id="_index_search_analyzers"></a>Index / Search Analyzers</h4><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.6.0. </h3>
 "Use index level analyzer defaults"
</div></div><p>The root object allows to define type mapping level analyzers for index
and search that will be used with all different fields that do not
explicitly set analyzers on their own. Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "index_analyzer" : "standard",
        "search_analyzer" : "standard"
    }
}</pre></div><p>The above simply explicitly defines both the <code class="literal">index_analyzer</code> and
<code class="literal">search_analyzer</code> that will be used. There is also an option to use the
<code class="literal">analyzer</code> attribute to set both the <code class="literal">search_analyzer</code> and
<code class="literal">index_analyzer</code>.</p><h4><a id="_dynamic_date_formats"></a>dynamic_date_formats</h4><p><code class="literal">dynamic_date_formats</code> (old setting called <code class="literal">date_formats</code> still works)
is the ability to set one or more date formats that will be used to
detect <code class="literal">date</code> fields. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "dynamic_date_formats" : ["yyyy-MM-dd", "dd-MM-yyyy"],
        "properties" : {
            "message" : {"type" : "string"}
        }
    }
}</pre></div><p>In the above mapping, if a new JSON field of type string is detected,
the date formats specified will be used in order to check if its a date.
If it passes parsing, then the field will be declared with <code class="literal">date</code> type,
and will use the matching format as its format attribute. The date
format itself is explained
<a class="link" href="mapping-date-format.html" title="Date Format">here</a>.</p><p>The default formats are: <code class="literal">dateOptionalTime</code> (ISO) and
<code class="literal">yyyy/MM/dd HH:mm:ss Z||yyyy/MM/dd Z</code>.</p><p><span class="strong emphasis"><strong>Note:</strong></span> <code class="literal">dynamic_date_formats</code> are used <span class="strong emphasis"><strong>only</strong></span> for dynamically added
date fields, not for <code class="literal">date</code> fields that you specify in your mapping.</p><h4><a id="_date_detection"></a>date_detection</h4><p>Allows to disable automatic date type detection (if a new field is introduced
and matches the provided format), for example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "date_detection" : false,
        "properties" : {
            "message" : {"type" : "string"}
        }
    }
}</pre></div><h4><a id="_numeric_detection"></a>numeric_detection</h4><p>Sometimes, even though json has support for native numeric types,
numeric values are still provided as strings. In order to try and
automatically detect numeric values from string, the <code class="literal">numeric_detection</code>
can be set to <code class="literal">true</code>. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "numeric_detection" : true,
        "properties" : {
            "message" : {"type" : "string"}
        }
    }
}</pre></div><h4><a id="_dynamic_templates"></a>dynamic_templates</h4><p>Dynamic templates allow to define mapping templates that will be applied
when dynamic introduction of fields / objects happens.</p><div class="important admon"><div class="icon"><img alt="Important" class="images-icons-important-png"></div><div class="admon_content"><p>Dynamic field mappings are only added when a field contains
a concrete valuenot <code class="literal">null</code> or an empty array. This means that if the <code class="literal">null_value</code> option
is used in a <code class="literal">dynamic_template</code>, it will only be applied after the first document
with a concrete value for the field has been indexed.</p></div></div><p>For example, we might want to have all fields to be stored by default,
or all <code class="literal">string</code> fields to be stored, or have <code class="literal">string</code> fields to always
be indexed with multi fields syntax, once analyzed and once not_analyzed.
Here is a simple example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "person" : {
        "dynamic_templates" : [
            {
                "template_1" : {
                    "match" : "multi*",
                    "mapping" : {
                        "type" : "{dynamic_type}",
                        "index" : "analyzed",
                        "fields" : {
                            "org" : {"type": "{dynamic_type}", "index" : "not_analyzed"}
                        }
                    }
                }
            },
            {
                "template_2" : {
                    "match" : "*",
                    "match_mapping_type" : "string",
                    "mapping" : {
                        "type" : "string",
                        "index" : "not_analyzed"
                    }
                }
            }
        ]
    }
}</pre></div><p>The above mapping will create a field with multi fields for all field
names starting with multi, and will map all <code class="literal">string</code> types to be
<code class="literal">not_analyzed</code>.</p><p>Dynamic templates are named to allow for simple merge behavior. A new
mapping, just with a new template can be "put" and that template will be
added, or if it has the same name, the template will be replaced.</p><p>The <code class="literal">match</code> allow to define matching on the field name. An <code class="literal">unmatch</code>
option is also available to exclude fields if they do match on <code class="literal">match</code>.
The <code class="literal">match_mapping_type</code> controls if this template will be applied only
for dynamic fields of the specified type (as guessed by the json
format).</p><p>Another option is to use <code class="literal">path_match</code>, which allows to match the dynamic
template against the "full" dot notation name of the field (for example
<code class="literal">obj1.*.value</code> or <code class="literal">obj1.obj2.*</code>), with the respective <code class="literal">path_unmatch</code>.</p><p>The format of all the matching is simple format, allowing to use * as a
matching element supporting simple patterns such as xxx*, *xxx, xxx*yyy
(with arbitrary number of pattern types), as well as direct equality.
The <code class="literal">match_pattern</code> can be set to <code class="literal">regex</code> to allow for regular
expression based matching.</p><p>The <code class="literal">mapping</code> element provides the actual mapping definition. The
<code class="literal">{name}</code> keyword can be used and will be replaced with the actual
dynamic field name being introduced. The <code class="literal">{dynamic_type}</code> (or
<code class="literal">{dynamicType}</code>) can be used and will be replaced with the mapping
derived based on the field type (or the derived type, like <code class="literal">date</code>).</p><p>Complete generic settings can also be applied, for example, to have all
mappings be stored, just set:</p><div class="pre_wrapper"><pre class="programlisting">{
    "person" : {
        "dynamic_templates" : [
            {
                "store_generic" : {
                    "match" : "*",
                    "mapping" : {
                        "store" : true
                    }
                }
            }
        ]
    }
}</pre></div><p>Such generic templates should be placed at the end of the
<code class="literal">dynamic_templates</code> list because when two or more dynamic templates
match a field, only the first matching one from the list is used.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-types.html">Types</a></span>  <span class="breadcrumb-node">Nested Type</span></div><div class="navheader"><span class="prev"><a href="mapping-root-object-type.html">
              &nbsp;
              Root Object Type</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-ip-type.html">IP Type
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-nested-type"></a>Nested Type</h2></div></div></div><p>The <code class="literal">nested</code> type works like the <a class="link" href="mapping-object-type.html" title="Object Type"><code class="literal">object</code> type</a> except
that an array of <code class="literal">objects</code> is flattened, while an array of <code class="literal">nested</code>  objects
allows each object to be queried independently.  To explain, consider this
document:</p><div class="pre_wrapper"><pre class="programlisting">{
    "group" : "fans",
    "user" : [
        {
            "first" : "John",
            "last" :  "Smith"
        },
        {
            "first" : "Alice",
            "last" :  "White"
        },
    ]
}</pre></div><p>If the <code class="literal">user</code> field is of type <code class="literal">object</code>, this document would be indexed
internally something like this:</p><div class="pre_wrapper"><pre class="programlisting">{
    "group" :        "fans",
    "user.first" : [ "alice", "john" ],
    "user.last" :  [ "smith", "white" ]
}</pre></div><p>The <code class="literal">first</code> and <code class="literal">last</code> fields are flattened, and the association between
<code class="literal">alice</code> and <code class="literal">white</code> is lost.  This document would incorrectly match a query
for <code class="literal">alice AND smith</code>.</p><p>If the <code class="literal">user</code> field is of type <code class="literal">nested</code>, each object is indexed as a separate
document, something like this:</p><div class="pre_wrapper"><pre class="programlisting">{ <a id="CO82-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
    "user.first" : "alice",
    "user.last" :  "white"
}
{ <a id="CO82-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
    "user.first" : "john",
    "user.last" :  "smith"
}
{ <a id="CO82-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span>
    "group" :       "fans"
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO82-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> <a href="#CO82-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Hidden nested documents.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO82-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Visible parent document.
</p></td></tr></tbody></table></div><p>By keeping each nested object separate, the association between the
<code class="literal">user.first</code> and <code class="literal">user.last</code> fields is maintained. The query for <code class="literal">alice AND
smith</code> would <span class="strong emphasis"><strong>not</strong></span> match this document.</p><p>Searching on nested docs can be done using either the
<a class="link" href="query-dsl-nested-query.html" title="Nested Query">nested query</a> or
<a class="link" href="query-dsl-nested-filter.html" title="Nested Filter">nested filter</a>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_mapping"></a>Mapping</h3></div></div></div><p>The mapping for <code class="literal">nested</code> fields is the same as <code class="literal">object</code> fields, except that it
uses type <code class="literal">nested</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "type1" : {
        "properties" : {
            "user" : {
                "type" : "nested",
                "properties": {
                    "first" : {"type": "string" },
                    "last"  : {"type": "string" }
                }
            }
        }
    }
}</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>changing an <code class="literal">object</code> type to <code class="literal">nested</code> type requires reindexing.</p></div></div><p>You may want to index inner objects both as <code class="literal">nested</code> fields <span class="strong emphasis"><strong>and</strong></span>  as flattened
<code class="literal">object</code> fields, eg for highlighting.  This can be achieved by setting
<code class="literal">include_in_parent</code> to <code class="literal">true</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "type1" : {
        "properties" : {
            "user" : {
                "type" : "nested",
                "include_in_parent": true,
                "properties": {
                    "first" : {"type": "string" },
                    "last"  : {"type": "string" }
                }
            }
        }
    }
}</pre></div><p>The result of indexing our example document would be something like this:</p><div class="pre_wrapper"><pre class="programlisting">{ <a id="CO83-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
    "user.first" : "alice",
    "user.last" :  "white"
}
{ <a id="CO83-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
    "user.first" : "john",
    "user.last" :  "smith"
}
{ <a id="CO83-3"></a><span><img class="images-icons-callouts-3-png" alt=""></span>
    "group" :        "fans",
    "user.first" : [ "alice", "john" ],
    "user.last" :  [ "smith", "white" ]
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO83-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> <a href="#CO83-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Hidden nested documents.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO83-3"><span><img class="images-icons-callouts-3-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Visible parent document.
</p></td></tr></tbody></table></div><p>Nested fields may contain other nested fields.  The <code class="literal">include_in_parent</code> object
refers to the direct parent of the field, while the <code class="literal">include_in_root</code>
parameter refers only to the topmost root object or document.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>The <code class="literal">include_in_parent</code> and <code class="literal">include_in_root</code> options do not apply
to <a class="link" href="mapping-geo-shape-type.html" title="Geo Shape Type"><code class="literal">geo_shape</code> fields</a>, which are only ever
indexed inside the nested document.</p></div></div><p>Nested docs will automatically use the root doc <code class="literal">_all</code> field only.</p><div class="sidebar"><div class="titlepage"><div><div><p class="title"><strong>Internal Implementation</strong></p></div></div></div><p>Internally, nested objects are indexed as additional documents, but,
since they can be guaranteed to be indexed within the same "block", it
allows for extremely fast joining with parent docs.</p><p>Those internal nested documents are automatically masked away when doing
operations against the index (like searching with a match_all query),
and they bubble out when using the nested query.</p><p>Because nested docs are always masked to the parent doc, the nested docs
can never be accessed outside the scope of the <code class="literal">nested</code> query. For example
stored fields can be enabled on fields inside nested objects, but there is
no way of retrieving them, since stored fields are fetched outside of
the <code class="literal">nested</code> query scope.</p><p>The <code class="literal">_source</code> field is always associated with the parent document and
because of that field values via the source can be fetched for nested object.</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-types.html">Types</a></span>  <span class="breadcrumb-node">IP Type</span></div><div class="navheader"><span class="prev"><a href="mapping-nested-type.html">
              &nbsp;
              Nested Type</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-geo-point-type.html">Geo Point Type
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-ip-type"></a>IP Type</h2></div></div></div><p>An <code class="literal">ip</code> mapping type allows to store <span class="emphasis"><em>ipv4</em></span> addresses in a numeric form
allowing to easily sort, and range query it (using ip values).</p><p>The following table lists all the attributes that can be used with an ip
type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Attribute </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">index_name</code></p></td><td class="entry" align="left" valign="top"><p><span class="deprecated">
      [<span class="version">1.5.0</span>]
      <span class="detail">Deprecated in 1.5.0.
Use <a class="link" href="mapping-core-types.html#copy-to" title="Copy to fieldedit"><code class="literal">copy_to</code></a> instead
</span></span> The name of the field that will be stored in the index.
Defaults to the property/field name.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">store</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to store actual field in the index, <code class="literal">false</code> to not
store it. Defaults to <code class="literal">false</code> (note, the JSON document itself is stored,
and it can be retrieved from it).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">index</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">no</code> if the value should not be indexed. In this case,
<code class="literal">store</code> should be set to <code class="literal">true</code>, since if its not indexed and not
stored, there is nothing to do with it.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">precision_step</code></p></td><td class="entry" align="left" valign="top"><p>The precision step (influences the number of terms
generated for each number value). Defaults to <code class="literal">16</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">boost</code></p></td><td class="entry" align="left" valign="top"><p>The boost value. Defaults to <code class="literal">1.0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">null_value</code></p></td><td class="entry" align="left" valign="top"><p>When there is a (JSON) null value for the field, use the
<code class="literal">null_value</code> as the field value. Defaults to not adding the field at
all.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">include_in_all</code></p></td><td class="entry" align="left" valign="top"><p>Should the field be included in the <code class="literal">_all</code> field (if
enabled). Defaults to <code class="literal">true</code> or to the parent <code class="literal">object</code> type setting.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc_values</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to store field values in a column-stride fashion.
Automatically set to <code class="literal">true</code> when the <a class="link" href="fielddata-formats.html" title="Field data formats"><code class="literal">fielddata</code> format</a> is <code class="literal">doc_values</code>.</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-types.html">Types</a></span>  <span class="breadcrumb-node">Geo Point Type</span></div><div class="navheader"><span class="prev"><a href="mapping-ip-type.html">
              &nbsp;
              IP Type</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-geo-shape-type.html">Geo Shape Type
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-geo-point-type"></a>Geo Point Type</h2></div></div></div><p>Mapper type called <code class="literal">geo_point</code> to support geo based points. The
declaration looks as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
    "pin" : {
        "properties" : {
            "location" : {
                "type" : "geo_point"
            }
        }
    }
}</pre></div><h4><a id="_indexed_fields"></a>Indexed Fields</h4><p>The <code class="literal">geo_point</code> mapping will index a single field with the format of
<code class="literal">lat,lon</code>. The <code class="literal">lat_lon</code> option can be set to also index the <code class="literal">.lat</code> and
<code class="literal">.lon</code> as numeric fields, and <code class="literal">geohash</code> can be set to <code class="literal">true</code> to also
index <code class="literal">.geohash</code> value.</p><p>A good practice is to enable indexing <code class="literal">lat_lon</code> as well, since both the
geo distance and bounding box filters can either be executed using in
memory checks, or using the indexed lat lon values, and it really
depends on the data set which one performs better. Note though, that
indexed lat lon only make sense when there is a single geo point value
for the field, and not multi values.</p><h4><a id="_geohashes"></a>Geohashes</h4><p>Geohashes are a form of lat/lon encoding which divides the earth up into
a grid. Each cell in this grid is represented by a geohash string. Each
cell in turn can be further subdivided into smaller cells which are
represented by a longer string. So the longer the geohash, the smaller
(and thus more accurate) the cell is.</p><p>Because geohashes are just strings, they can be stored in an inverted
index like any other string, which makes querying them very efficient.</p><p>If you enable the <code class="literal">geohash</code> option, a <code class="literal">geohash</code> sub-field will be
indexed as, eg <code class="literal">pin.geohash</code>. The length of the geohash is controlled by
the <code class="literal">geohash_precision</code> parameter, which can either be set to an absolute
length (eg <code class="literal">12</code>, the default) or to a distance (eg <code class="literal">1km</code>).</p><p>More usefully, set the <code class="literal">geohash_prefix</code> option to <code class="literal">true</code> to not only index
the geohash value, but all the enclosing cells as well.  For instance, a
geohash of <code class="literal">u30</code> will be indexed as <code class="literal">[u,u3,u30]</code>. This option can be used
by the <a class="xref" href="query-dsl-geohash-cell-filter.html" title="Geohash Cell Filter">Geohash Cell Filter</a> to find geopoints within a
particular cell very efficiently.</p><h4><a id="_input_structure"></a>Input Structure</h4><p>The above mapping defines a <code class="literal">geo_point</code>, which accepts different
formats. The following formats are supported:</p><h5><a id="_lat_lon_as_properties_5"></a>Lat Lon as Properties</h5><div class="pre_wrapper"><pre class="programlisting">{
    "pin" : {
        "location" : {
            "lat" : 41.12,
            "lon" : -71.34
        }
    }
}</pre></div><h5><a id="_lat_lon_as_string_6"></a>Lat Lon as String</h5><p>Format in <code class="literal">lat,lon</code>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "pin" : {
        "location" : "41.12,-71.34"
    }
}</pre></div><h5><a id="_geohash_6"></a>Geohash</h5><div class="pre_wrapper"><pre class="programlisting">{
    "pin" : {
        "location" : "drm3btev3e86"
    }
}</pre></div><h5><a id="_lat_lon_as_array_5"></a>Lat Lon as Array</h5><p>Format in <code class="literal">[lon, lat]</code>, note, the order of lon/lat here in order to
conform with <a class="ulink" href="http://geojson.org/" target="_top">GeoJSON</a>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "pin" : {
        "location" : [-71.34, 41.12]
    }
}</pre></div><h4><a id="_mapping_options"></a>Mapping Options</h4><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Option </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">lat_lon</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to also index the <code class="literal">.lat</code> and <code class="literal">.lon</code> as fields.
Defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">geohash</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to also index the <code class="literal">.geohash</code> as a field.
Defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">geohash_precision</code></p></td><td class="entry" align="left" valign="top"><p>Sets the geohash precision. It can be set to an
absolute geohash length or a distance value (eg 1km, 1m, 1ml) defining
the size of the smallest cell. Defaults to an absolute length of 12.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">geohash_prefix</code></p></td><td class="entry" align="left" valign="top"><p>If this option is set to <code class="literal">true</code>, not only the geohash
but also all its parent cells (true prefixes) will be indexed as well. The
number of terms that will be indexed depends on the <code class="literal">geohash_precision</code>.
Defaults to <code class="literal">false</code>. <span class="strong emphasis"><strong>Note</strong></span>: This option implicitly enables <code class="literal">geohash</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">validate</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">false</code> to accept geo points with invalid latitude or
longitude (default is <code class="literal">true</code>). <span class="strong emphasis"><strong>Note</strong></span>: Validation only works when
normalization has been disabled. This option will be deprecated and removed
in upcoming releases.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">validate_lat</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">false</code> to accept geo points with an invalid
latitude (default is <code class="literal">true</code>). This option will be deprecated and removed
in upcoming releases.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">validate_lon</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">false</code> to accept geo points with an invalid
longitude (default is <code class="literal">true</code>). This option will be deprecated and removed
in upcoming releases.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">normalize</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to normalize latitude and longitude (default
is <code class="literal">true</code>).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">normalize_lat</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to normalize latitude.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">normalize_lon</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to normalize longitude.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">precision_step</code></p></td><td class="entry" align="left" valign="top"><p>The precision step (influences the number of terms
generated for each number value) for <code class="literal">.lat</code> and <code class="literal">.lon</code> fields
if <code class="literal">lat_lon</code> is set to <code class="literal">true</code>.
Defaults to <code class="literal">16</code>.</p></td></tr></tbody></table></div><h4><a id="_field_data"></a>Field data</h4><p>By default, geo points use the <code class="literal">array</code> format which loads geo points into two
parallel double arrays, making sure there is no precision loss. However, this
can require a non-negligible amount of memory (16 bytes per document) which is
why Elasticsearch also provides a field data implementation with lossy
compression called <code class="literal">compressed</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "pin" : {
        "properties" : {
            "location" : {
                "type" : "geo_point",
                "fielddata" : {
                    "format" : "compressed",
                    "precision" : "1cm"
                }
            }
        }
    }
}</pre></div><p>This field data format comes with a <code class="literal">precision</code> option which allows to
configure how much precision can be traded for memory. The default value is
<code class="literal">1cm</code>. The following table presents values of the memory savings given various
precisions:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><tbody><tr><td class="entry" align="left" valign="top"><p>Precision</p></td><td class="entry" align="left" valign="top"><p>Bytes per point</p></td><td class="entry" align="left" valign="top"><p>Size reduction</p></td></tr><tr><td class="entry" align="left" valign="top"><p>1km</p></td><td class="entry" align="left" valign="top"><p>4</p></td><td class="entry" align="left" valign="top"><p>75%</p></td></tr><tr><td class="entry" align="left" valign="top"><p>3m</p></td><td class="entry" align="left" valign="top"><p>6</p></td><td class="entry" align="left" valign="top"><p>62.5%</p></td></tr><tr><td class="entry" align="left" valign="top"><p>1cm</p></td><td class="entry" align="left" valign="top"><p>8</p></td><td class="entry" align="left" valign="top"><p>50%</p></td></tr><tr><td class="entry" align="left" valign="top"><p>1mm</p></td><td class="entry" align="left" valign="top"><p>10</p></td><td class="entry" align="left" valign="top"><p>37.5%</p></td></tr></tbody></table></div><p>Precision can be changed on a live index by using the update mapping API.</p><h4><a id="_usage_in_scripts"></a>Usage in Scripts</h4><p>When using <code class="literal">doc[geo_field_name]</code> (in the above mapping,
<code class="literal">doc['location']</code>), the <code class="literal">doc[...].value</code> returns a <code class="literal">GeoPoint</code>, which
then allows access to <code class="literal">lat</code> and <code class="literal">lon</code> (for example,
<code class="literal">doc[...].value.lat</code>). For performance, it is better to access the <code class="literal">lat</code>
and <code class="literal">lon</code> directly using <code class="literal">doc[...].lat</code> and <code class="literal">doc[...].lon</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-types.html">Types</a></span>  <span class="breadcrumb-node">Geo Shape Type</span></div><div class="navheader"><span class="prev"><a href="mapping-geo-point-type.html">
              &nbsp;
              Geo Point Type</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-attachment-type.html">Attachment Type
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-geo-shape-type"></a>Geo Shape Type</h2></div></div></div><p>The <code class="literal">geo_shape</code> mapping type facilitates the indexing of and searching
with arbitrary geo shapes such as rectangles and polygons. It should be
used when either the data being indexed or the queries being executed
contain shapes other than just points.</p><p>You can query documents using this type using
<a class="link" href="query-dsl-geo-shape-filter.html" title="GeoShape Filter">geo_shape Filter</a>
or <a class="link" href="query-dsl-geo-shape-query.html" title="GeoShape Query">geo_shape Query</a>.</p><h4><a id="geo-shape-mapping-options"></a>Mapping Options</h4><p>The geo_shape mapping maps geo_json geometry objects to the geo_shape
type. To enable it, users must explicitly map fields to the geo_shape
type.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th class="entry" align="left" valign="top">Option </th><th class="entry" align="left" valign="top">Description</th><th class="entry" align="left" valign="top"> Default</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">tree</code></p></td><td class="entry" align="left" valign="top"><p>Name of the PrefixTree implementation to be used: <code class="literal">geohash</code> for
GeohashPrefixTree and <code class="literal">quadtree</code> for QuadPrefixTree.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">geohash</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">precision</code></p></td><td class="entry" align="left" valign="top"><p>This parameter may be used instead of <code class="literal">tree_levels</code> to set
an appropriate value for the <code class="literal">tree_levels</code> parameter. The value
specifies the desired precision and Elasticsearch will calculate the
best tree_levels value to honor this precision. The value should be a
number followed by an optional distance unit. Valid distance units
include: <code class="literal">in</code>, <code class="literal">inch</code>, <code class="literal">yd</code>, <code class="literal">yard</code>, <code class="literal">mi</code>, <code class="literal">miles</code>, <code class="literal">km</code>, <code class="literal">kilometers</code>,
<code class="literal">m</code>,<code class="literal">meters</code>, <code class="literal">cm</code>,<code class="literal">centimeters</code>, <code class="literal">mm</code>, <code class="literal">millimeters</code>.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">meters</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">tree_levels</code></p></td><td class="entry" align="left" valign="top"><p>Maximum number of layers to be used by the PrefixTree.
This can be used to control the precision of shape representations and
therefore how many terms are indexed. Defaults to the default value of
the chosen PrefixTree implementation. Since this parameter requires a
certain level of understanding of the underlying implementation, users
may use the <code class="literal">precision</code> parameter instead. However, Elasticsearch only
uses the tree_levels parameter internally and this is what is returned
via the mapping API even if you use the precision parameter.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">50m</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">strategy</code></p></td><td class="entry" align="left" valign="top"><p>The strategy parameter defines the approach for how to
represent shapes at indexing and search time. It also influences the
capabilities available so it is recommended to let Elasticsearch set
this parameter automatically. There are two strategies available:
<code class="literal">recursive</code> and <code class="literal">term</code>. Term strategy supports point types only (the
<code class="literal">points_only</code> parameter will be automatically set to true) while
Recursive strategy supports all shape types. (IMPORTANT: see
<a class="link" href="mapping-geo-shape-type.html#prefix-trees" title="Prefix treesedit">Prefix trees</a> for more detailed information)</p></td><td class="entry" align="left" valign="top"><p><code class="literal">recursive</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">distance_error_pct</code></p></td><td class="entry" align="left" valign="top"><p>Used as a hint to the PrefixTree about how
precise it should be. Defaults to 0.025 (2.5%) with 0.5 as the maximum
supported value. PERFORMANCE NOTE: This value will default to 0 if a <code class="literal">precision</code> or
<code class="literal">tree_level</code> definition is explicitly defined. This guarantees spatial precision
at the level defined in the mapping. This can lead to significant memory usage
for high resolution shapes with low error (e.g., large shapes at 1m with &lt; 0.001 error).
To improve indexing performance (at the cost of query accuracy) explicitly define
<code class="literal">tree_level</code> or <code class="literal">precision</code> along with a reasonable <code class="literal">distance_error_pct</code>, noting
that large shapes will have greater false positives.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">0.025</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">orientation</code></p></td><td class="entry" align="left" valign="top"><p>Optionally define how to interpret vertex order for
polygons / multipolygons.  This parameter defines one of two coordinate
system rules (Right-hand or Left-hand) each of which can be specified in three
different ways. 1. Right-hand rule: <code class="literal">right</code>, <code class="literal">ccw</code>, <code class="literal">counterclockwise</code>,
2. Left-hand rule: <code class="literal">left</code>, <code class="literal">cw</code>, <code class="literal">clockwise</code>. The default orientation
(<code class="literal">counterclockwise</code>) complies with the OGC standard which defines
outer ring vertices in counterclockwise order with inner ring(s) vertices (holes)
in clockwise order. Setting this parameter in the geo_shape mapping explicitly
sets vertex order for the coordinate list of a geo_shape field but can be
overridden in each individual GeoJSON document.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">ccw</code></p></td></tr></tbody></table></div><h4><a id="prefix-trees"></a>Prefix trees</h4><p>To efficiently represent shapes in the index, Shapes are converted into
a series of hashes representing grid squares (commonly referred to as "rasters")
using implementations of a PrefixTree. The tree notion comes from the fact that
the PrefixTree uses multiple grid layers, each with an increasing level of
precision to represent the Earth. This can be thought of as increasing the level
of detail of a map or image at higher zoom levels.</p><p>Multiple PrefixTree implementations are provided:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
GeohashPrefixTree - Uses
<a class="ulink" href="http://en.wikipedia.org/wiki/Geohash" target="_top">geohashes</a> for grid squares.
Geohashes are base32 encoded strings of the bits of the latitude and
longitude interleaved. So the longer the hash, the more precise it is.
Each character added to the geohash represents another tree level and
adds 5 bits of precision to the geohash. A geohash represents a
rectangular area and has 32 sub rectangles. The maximum amount of levels
in Elasticsearch is 24.
</li><li class="listitem">
QuadPrefixTree - Uses a
<a class="ulink" href="http://en.wikipedia.org/wiki/Quadtree" target="_top">quadtree</a> for grid squares.
Similar to geohash, quad trees interleave the bits of the latitude and
longitude the resulting hash is a bit set. A tree level in a quad tree
represents 2 bits in this bit set, one for each coordinate. The maximum
amount of levels for the quad trees in Elasticsearch is 50.
</li></ul></div><h5><a id="spatial-strategy"></a>Spatial strategies</h5><p>The PrefixTree implementations rely on a SpatialStrategy for decomposing
the provided Shape(s) into approximated grid squares. Each strategy answers
the following:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
What type of Shapes can be indexed?
</li><li class="listitem">
What types of Query Operations and Shapes can be used?
</li><li class="listitem">
Does it support more than one Shape per field?
</li></ul></div><p>The following Strategy implementations (with corresponding capabilities)
are provided:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"><col class="col_4"></colgroup><thead><tr><th class="entry" align="left" valign="top">Strategy </th><th class="entry" align="left" valign="top">Supported Shapes </th><th class="entry" align="left" valign="top">Supported Queries </th><th class="entry" align="left" valign="top">Multiple Shapes</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">recursive</code></p></td><td class="entry" align="left" valign="top"><p><a class="link" href="mapping-geo-shape-type.html#input-structure" title="Input Structureedit">All</a></p></td><td class="entry" align="left" valign="top"><p><code class="literal">INTERSECTS</code>, <code class="literal">DISJOINT</code>, <code class="literal">WITHIN</code></p></td><td class="entry" align="left" valign="top"><p>Yes</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">term</code></p></td><td class="entry" align="left" valign="top"><p><a class="link" href="mapping-geo-shape-type.html#point" title="Pointedit">Points</a></p></td><td class="entry" align="left" valign="top"><p><code class="literal">INTERSECTS</code></p></td><td class="entry" align="left" valign="top"><p>Yes</p></td></tr></tbody></table></div><h5><a id="_accuracy"></a>Accuracy</h5><p>Geo_shape does not provide 100% accuracy and depending on how it is
configured it may return some false positives or false negatives for
certain queries. To mitigate this, it is important to select an
appropriate value for the tree_levels parameter and to adjust
expectations accordingly. For example, a point may be near the border of
a particular grid cell and may thus not match a query that only matches the
cell right next to iteven though the shape is very close to the point.</p><h5><a id="_example_5"></a>Example</h5><div class="pre_wrapper"><pre class="programlisting">{
    "properties": {
        "location": {
            "type": "geo_shape",
            "tree": "quadtree",
            "precision": "1m"
        }
    }
}</pre></div><p>This mapping maps the location field to the geo_shape type using the
quad_tree implementation and a precision of 1m. Elasticsearch translates
this into a tree_levels setting of 26.</p><h5><a id="_performance_considerations"></a>Performance considerations</h5><p>Elasticsearch uses the paths in the prefix tree as terms in the index
and in queries. The higher the levels is (and thus the precision), the
more terms are generated. Of course, calculating the terms, keeping them in
memory, and storing them on disk all have a price. Especially with higher
tree levels, indices can become extremely large even with a modest
amount of data. Additionally, the size of the features also matters.
Big, complex polygons can take up a lot of space at higher tree levels.
Which setting is right depends on the use case. Generally one trades off
accuracy against index size and query performance.</p><p>The defaults in Elasticsearch for both implementations are a compromise
between index size and a reasonable level of precision of 50m at the
equator. This allows for indexing tens of millions of shapes without
overly bloating the resulting index too much relative to the input size.</p><h4><a id="input-structure"></a>Input Structure</h4><p>The <a class="ulink" href="http://www.geojson.org" target="_top">GeoJSON</a> format is used to represent
<a class="ulink" href="http://geojson.org/geojson-spec.html#geometry-objects" target="_top">shapes</a> as input
as follows:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th class="entry" align="left" valign="top">GeoJSON Type </th><th class="entry" align="left" valign="top">Elasticsearch Type </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">Point</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">point</code></p></td><td class="entry" align="left" valign="top"><p>A single geographic coordinate.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">LineString</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">linestring</code></p></td><td class="entry" align="left" valign="top"><p>An arbitrary line given two or more points.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">Polygon</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">polygon</code></p></td><td class="entry" align="left" valign="top"><p>A <span class="emphasis"><em>closed</em></span> polygon whose first and last point
must match, thus requiring <code class="literal">n + 1</code> vertices to create an <code class="literal">n</code>-sided
polygon and a minimum of <code class="literal">4</code> vertices.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">MultiPoint</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">multipoint</code></p></td><td class="entry" align="left" valign="top"><p>An array of unconnected, but likely related
points.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">MultiLineString</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">multilinestring</code></p></td><td class="entry" align="left" valign="top"><p>An array of separate linestrings.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">MultiPolygon</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">multipolygon</code></p></td><td class="entry" align="left" valign="top"><p>An array of separate polygons.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">GeometryCollection</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">geometrycollection</code></p></td><td class="entry" align="left" valign="top"><p>A GeoJSON shape similar to the
<code class="literal">multi*</code> shapes except that multiple types can coexist (e.g., a Point
and a LineString).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">N/A</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">envelope</code></p></td><td class="entry" align="left" valign="top"><p>A bounding rectangle, or envelope, specified by
specifying only the top left and bottom right points.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">N/A</code></p></td><td class="entry" align="left" valign="top"><p><code class="literal">circle</code></p></td><td class="entry" align="left" valign="top"><p>A circle specified by a center point and radius with
units, which default to <code class="literal">METERS</code>.</p></td></tr></tbody></table></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>For all types, both the inner <code class="literal">type</code> and <code class="literal">coordinates</code> fields are
required.</p><p>In GeoJSON, and therefore Elasticsearch, the correct <span class="strong emphasis"><strong>coordinate
order is longitude, latitude (X, Y)</strong></span> within coordinate arrays. This
differs from many Geospatial APIs (e.g., Google Maps) that generally
use the colloquial latitude, longitude (Y, X).</p></div></div><h5><a id="point"></a><a class="ulink" href="http://geojson.org/geojson-spec.html#id2" target="_top">Point</a></h5><p>A point is a single geographic coordinate, such as the location of a
building or the current position given by a smartphones Geolocation
API.</p><div class="pre_wrapper"><pre class="programlisting">{
    "location" : {
        "type" : "point",
        "coordinates" : [-77.03653, 38.897676]
    }
}</pre></div><h5><a id="_ulink_url_http_geojson_org_geojson_spec_html_id3_linestring_ulink"></a><a class="ulink" href="http://geojson.org/geojson-spec.html#id3" target="_top">LineString</a></h5><p>A <code class="literal">linestring</code> defined by an array of two or more positions. By
specifying only two points, the <code class="literal">linestring</code> will represent a straight
line.  Specifying more than two points creates an arbitrary path.</p><div class="pre_wrapper"><pre class="programlisting">{
    "location" : {
        "type" : "linestring",
        "coordinates" : [[-77.03653, 38.897676], [-77.009051, 38.889939]]
    }
}</pre></div><p>The above <code class="literal">linestring</code> would draw a straight line starting at the White
House to the US Capitol Building.</p><h5><a id="_ulink_url_http_www_geojson_org_geojson_spec_html_id4_polygon_ulink"></a><a class="ulink" href="http://www.geojson.org/geojson-spec.html#id4" target="_top">Polygon</a></h5><p>A polygon is defined by a list of a list of points. The first and last
points in each (outer) list must be the same (the polygon must be
closed).</p><div class="pre_wrapper"><pre class="programlisting">{
    "location" : {
        "type" : "polygon",
        "coordinates" : [
            [ [100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0] ]
        ]
    }
}</pre></div><p>The first array represents the outer boundary of the polygon, the other
arrays represent the interior shapes ("holes"):</p><div class="pre_wrapper"><pre class="programlisting">{
    "location" : {
        "type" : "polygon",
        "coordinates" : [
            [ [100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0] ],
            [ [100.2, 0.2], [100.8, 0.2], [100.8, 0.8], [100.2, 0.8], [100.2, 0.2] ]
        ]
    }
}</pre></div><p><span class="strong emphasis"><strong>IMPORTANT NOTE:</strong></span> GeoJSON does not mandate a specific order for vertices thus ambiguous
polygons around the dateline and poles are possible. To alleviate ambiguity
the Open Geospatial Consortium (OGC)
<a class="ulink" href="http://www.opengeospatial.org/standards/sfa" target="_top">Simple Feature Access</a> specification
defines the following vertex ordering:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Outer Ring - Counterclockwise
</li><li class="listitem">
Inner Ring(s) / Holes - Clockwise
</li></ul></div><p>For polygons that do not cross the dateline, vertex order will not matter in
Elasticsearch. For polygons that do cross the dateline, Elasticsearch requires
vertex ordering to comply with the OGC specification. Otherwise, an unintended polygon
may be created and unexpected query/filter results will be returned.</p><p>The following provides an example of an ambiguous polygon.  Elasticsearch will apply
OGC standards to eliminate ambiguity resulting in a polygon that crosses the dateline.</p><div class="pre_wrapper"><pre class="programlisting">{
    "location" : {
        "type" : "polygon",
        "coordinates" : [
            [ [-177.0, 10.0], [176.0, 15.0], [172.0, 0.0], [176.0, -15.0], [-177.0, -10.0], [-177.0, 10.0] ],
            [ [178.2, 8.2], [-178.8, 8.2], [-180.8, -8.8], [178.2, 8.8] ]
        ]
    }
}</pre></div><p>An <code class="literal">orientation</code> parameter can be defined when setting the geo_shape mapping (see <a class="xref" href="mapping-geo-shape-type.html#geo-shape-mapping-options" title="Mapping Optionsedit">the section called Mapping Options</a>). This will define vertex
order for the coordinate list on the mapped geo_shape field. It can also be overridden on each document.  The following is an example for
overriding the orientation on a document:</p><div class="pre_wrapper"><pre class="programlisting">{
    "location" : {
        "type" : "polygon",
        "orientation" : "clockwise",
        "coordinates" : [
            [ [-177.0, 10.0], [176.0, 15.0], [172.0, 0.0], [176.0, -15.0], [-177.0, -10.0], [-177.0, 10.0] ],
            [ [178.2, 8.2], [-178.8, 8.2], [-180.8, -8.8], [178.2, 8.8] ]
        ]
    }
}</pre></div><h5><a id="_ulink_url_http_www_geojson_org_geojson_spec_html_id5_multipoint_ulink"></a><a class="ulink" href="http://www.geojson.org/geojson-spec.html#id5" target="_top">MultiPoint</a></h5><p>A list of geojson points.</p><div class="pre_wrapper"><pre class="programlisting">{
    "location" : {
        "type" : "multipoint",
        "coordinates" : [
            [102.0, 2.0], [103.0, 2.0]
        ]
    }
}</pre></div><h5><a id="_ulink_url_http_www_geojson_org_geojson_spec_html_id6_multilinestring_ulink"></a><a class="ulink" href="http://www.geojson.org/geojson-spec.html#id6" target="_top">MultiLineString</a></h5><p>A list of geojson linestrings.</p><div class="pre_wrapper"><pre class="programlisting">{
    "location" : {
        "type" : "multilinestring",
        "coordinates" : [
            [ [102.0, 2.0], [103.0, 2.0], [103.0, 3.0], [102.0, 3.0] ],
            [ [100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0] ],
            [ [100.2, 0.2], [100.8, 0.2], [100.8, 0.8], [100.2, 0.8] ]
        ]
    }
}</pre></div><h5><a id="_ulink_url_http_www_geojson_org_geojson_spec_html_id7_multipolygon_ulink"></a><a class="ulink" href="http://www.geojson.org/geojson-spec.html#id7" target="_top">MultiPolygon</a></h5><p>A list of geojson polygons.</p><div class="pre_wrapper"><pre class="programlisting">{
    "location" : {
        "type" : "multipolygon",
        "coordinates" : [
            [ [[102.0, 2.0], [103.0, 2.0], [103.0, 3.0], [102.0, 3.0], [102.0, 2.0]] ],

            [ [[100.0, 0.0], [101.0, 0.0], [101.0, 1.0], [100.0, 1.0], [100.0, 0.0]],
              [[100.2, 0.2], [100.8, 0.2], [100.8, 0.8], [100.2, 0.8], [100.2, 0.2]] ]
        ]
    }
}</pre></div><h5><a id="_ulink_url_http_geojson_org_geojson_spec_html_geometrycollection_geometry_collection_ulink"></a><a class="ulink" href="http://geojson.org/geojson-spec.html#geometrycollection" target="_top">Geometry Collection</a></h5><p>A collection of geojson geometry objects.</p><div class="pre_wrapper"><pre class="programlisting">{
    "location" : {
        "type": "geometrycollection",
        "geometries": [
            {
                "type": "point",
                "coordinates": [100.0, 0.0]
            },
            {
                "type": "linestring",
                "coordinates": [ [101.0, 0.0], [102.0, 1.0] ]
            }
        ]
    }
}</pre></div><h5><a id="_envelope"></a>Envelope</h5><p>Elasticsearch supports an <code class="literal">envelope</code> type, which consists of coordinates
for upper left and lower right points of the shape to represent a
bounding rectangle:</p><div class="pre_wrapper"><pre class="programlisting">{
    "location" : {
        "type" : "envelope",
        "coordinates" : [ [-45.0, 45.0], [45.0, -45.0] ]
    }
}</pre></div><h5><a id="_circle"></a>Circle</h5><p>Elasticsearch supports a <code class="literal">circle</code> type, which consists of a center
point with a radius:</p><div class="pre_wrapper"><pre class="programlisting">{
    "location" : {
        "type" : "circle",
        "coordinates" : [-45.0, 45.0],
        "radius" : "100m"
    }
}</pre></div><p>Note: The inner <code class="literal">radius</code> field is required. If not specified, then
the units of the <code class="literal">radius</code> will default to <code class="literal">METERS</code>.</p><h4><a id="_sorting_and_retrieving_index_shapes"></a>Sorting and Retrieving index Shapes</h4><p>Due to the complex input structure and index representation of shapes,
it is not currently possible to sort shapes or retrieve their fields
directly. The geo_shape value is only retrievable through the <code class="literal">_source</code>
field.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-types.html">Types</a></span>  <span class="breadcrumb-node">Attachment Type</span></div><div class="navheader"><span class="prev"><a href="mapping-geo-shape-type.html">
              &nbsp;
              Geo Shape Type</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-date-format.html">Date Format
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-attachment-type"></a>Attachment Type</h2></div></div></div><p>The <code class="literal">attachment</code> type allows to index different "attachment" type field
(encoded as <code class="literal">base64</code>), for example, Microsoft Office formats, open
document formats, ePub, HTML, and so on.</p><p>The <code class="literal">attachment</code> type is provided as a
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-mapper-attachments" target="_top">plugin
extension</a>. It uses <a class="ulink" href="http://tika.apache.org/" target="_top">Apache Tika</a> behind the scene.</p><p>See <a class="ulink" href="https://github.com/elasticsearch/elasticsearch-mapper-attachments#mapper-attachments-type-for-elasticsearch" target="_top">README file</a>
for details.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-node">Date Format</span></div><div class="navheader"><span class="prev"><a href="mapping-attachment-type.html">
              &nbsp;
              Attachment Type</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-dynamic-mapping.html">Dynamic Mapping
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-date-format"></a>Date Format</h2></div></div></div><p>In JSON documents, dates are represented as strings. Elasticsearch uses a set
of pre-configured format to recognize and convert those, but you can change the
defaults by specifying the <code class="literal">format</code> option when defining a <code class="literal">date</code> type, or by
specifying <code class="literal">dynamic_date_formats</code> in the <code class="literal">root object</code> mapping (which will
be used unless explicitly overridden by a <code class="literal">date</code> type). There are built in
formats supported, as well as complete custom one.</p><p>The parsing of dates uses <a class="ulink" href="http://www.joda.org/joda-time/" target="_top">Joda</a>. The
default date parsing used if no format is specified is
<a class="ulink" href="http://www.joda.org/joda-time/apidocs/org/joda/time/format/ISODateTimeFormat.html#dateOptionalTimeParser--" target="_top">ISODateTimeFormat.dateOptionalTimeParser</a>.</p><p>An extension to the format allow to define several formats using <code class="literal">||</code>
separator. This allows to define less strict formats that can be used,
for example, the <code class="literal">yyyy/MM/dd HH:mm:ss||yyyy/MM/dd</code> format will parse
both <code class="literal">yyyy/MM/dd HH:mm:ss</code> and <code class="literal">yyyy/MM/dd</code>. The first format will also
act as the one that converts back from milliseconds to a string
representation.</p><h3><a id="date-math"></a>Date Math</h3><p>The <code class="literal">date</code> type supports using date math expression when using it in a
query/filter (mainly makes sense in <code class="literal">range</code> query/filter).</p><p>The expression starts with an "anchor" date, which can be either <code class="literal">now</code>
or a date string (in the applicable format) ending with <code class="literal">||</code>. It can
then follow by a math expression, supporting <code class="literal">+</code>, <code class="literal">-</code> and <code class="literal">/</code>
(rounding). The units supported are <code class="literal">y</code> (year), <code class="literal">M</code> (month), <code class="literal">w</code> (week),
<code class="literal">d</code> (day), <code class="literal">h</code> (hour), <code class="literal">m</code> (minute), and <code class="literal">s</code> (second).</p><p>Here are some samples: <code class="literal">now+1h</code>, <code class="literal">now+1h+1m</code>, <code class="literal">now+1h/d</code>,
<code class="literal">2012-01-01||+1M/d</code>.</p><p>Note, when doing <code class="literal">range</code> type searches, and the upper value is
inclusive, the rounding will properly be rounded to the ceiling instead
of flooring it.</p><p>To change this behavior, set
<code class="literal">"mapping.date.round_ceil": false</code>.</p><h3><a id="built-in"></a>Built In Formats</h3><p>The following tables lists all the defaults ISO formats supported:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Name </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">basic_date</code></p></td><td class="entry" align="left" valign="top"><p>A basic formatter for a full date as four digit year, two
digit month of year, and two digit day of month (yyyyMMdd).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">basic_date_time</code></p></td><td class="entry" align="left" valign="top"><p>A basic formatter that combines a basic date and time,
separated by a <span class="emphasis"><em>T</em></span> (yyyyMMddT'HHmmss.SSSZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">basic_date_time_no_millis</code></p></td><td class="entry" align="left" valign="top"><p>A basic formatter that combines a basic date
and time without millis, separated by a <span class="emphasis"><em>T</em></span> (yyyyMMddT'HHmmssZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">basic_ordinal_date</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a full ordinal date, using a four
digit year and three digit dayOfYear (yyyyDDD).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">basic_ordinal_date_time</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a full ordinal date and time,
using a four digit year and three digit dayOfYear
(yyyyDDDT'HHmmss.SSSZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">basic_ordinal_date_time_no_millis</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a full ordinal date
and time without millis, using a four digit year and three digit
dayOfYear (yyyyDDDT'HHmmssZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">basic_time</code></p></td><td class="entry" align="left" valign="top"><p>A basic formatter for a two digit hour of day, two digit
minute of hour, two digit second of minute, three digit millis, and time
zone offset (HHmmss.SSSZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">basic_time_no_millis</code></p></td><td class="entry" align="left" valign="top"><p>A basic formatter for a two digit hour of day,
two digit minute of hour, two digit second of minute, and time zone
offset (HHmmssZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">basic_t_time</code></p></td><td class="entry" align="left" valign="top"><p>A basic formatter for a two digit hour of day, two digit
minute of hour, two digit second of minute, three digit millis, and time
zone off set prefixed by <span class="emphasis"><em>T</em></span> ('THHmmss.SSSZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">basic_t_time_no_millis</code></p></td><td class="entry" align="left" valign="top"><p>A basic formatter for a two digit hour of day,
two digit minute of hour, two digit second of minute, and time zone
offset prefixed by <span class="emphasis"><em>T</em></span> ('THHmmssZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">basic_week_date</code></p></td><td class="entry" align="left" valign="top"><p>A basic formatter for a full date as four digit
weekyear, two digit week of weekyear, and one digit day of week
(xxxxW'wwe).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">basic_week_date_time</code></p></td><td class="entry" align="left" valign="top"><p>A basic formatter that combines a basic weekyear
date and time, separated by a <span class="emphasis"><em>T</em></span> (xxxxW'wweT'HHmmss.SSSZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">basic_week_date_time_no_millis</code></p></td><td class="entry" align="left" valign="top"><p>A basic formatter that combines a basic
weekyear date and time without millis, separated by a <span class="emphasis"><em>T</em></span>
(xxxxW'wweT'HHmmssZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">date</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a full date as four digit year, two digit month
of year, and two digit day of month (yyyy-MM-dd).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">date_hour</code></p></td><td class="entry" align="left" valign="top"><p>A formatter that combines a full date and two digit hour of
day.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">date_hour_minute</code></p></td><td class="entry" align="left" valign="top"><p>A formatter that combines a full date, two digit hour
of day, and two digit minute of hour.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">date_hour_minute_second</code></p></td><td class="entry" align="left" valign="top"><p>A formatter that combines a full date, two
digit hour of day, two digit minute of hour, and two digit second of
minute.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">date_hour_minute_second_fraction</code></p></td><td class="entry" align="left" valign="top"><p>A formatter that combines a full
date, two digit hour of day, two digit minute of hour, two digit second
of minute, and three digit fraction of second
(yyyy-MM-ddT'HH:mm:ss.SSS).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">date_hour_minute_second_millis</code></p></td><td class="entry" align="left" valign="top"><p>A formatter that combines a full date,
two digit hour of day, two digit minute of hour, two digit second of
minute, and three digit fraction of second (yyyy-MM-ddT'HH:mm:ss.SSS).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">date_optional_time</code></p></td><td class="entry" align="left" valign="top"><p>a generic ISO datetime parser where the date is
mandatory and the time is optional.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">date_time</code></p></td><td class="entry" align="left" valign="top"><p>A formatter that combines a full date and time, separated by
a <span class="emphasis"><em>T</em></span> (yyyy-MM-ddT'HH:mm:ss.SSSZZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">date_time_no_millis</code></p></td><td class="entry" align="left" valign="top"><p>A formatter that combines a full date and time
without millis, separated by a <span class="emphasis"><em>T</em></span> (yyyy-MM-ddT'HH:mm:ssZZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">hour</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a two digit hour of day.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">hour_minute</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a two digit hour of day and two digit
minute of hour.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">hour_minute_second</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a two digit hour of day, two digit
minute of hour, and two digit second of minute.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">hour_minute_second_fraction</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a two digit hour of day,
two digit minute of hour, two digit second of minute, and three digit
fraction of second (HH:mm:ss.SSS).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">hour_minute_second_millis</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a two digit hour of day, two
digit minute of hour, two digit second of minute, and three digit
fraction of second (HH:mm:ss.SSS).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ordinal_date</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a full ordinal date, using a four digit
year and three digit dayOfYear (yyyy-DDD).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ordinal_date_time</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a full ordinal date and time, using
a four digit year and three digit dayOfYear (yyyy-DDDT'HH:mm:ss.SSSZZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ordinal_date_time_no_millis</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a full ordinal date and
time without millis, using a four digit year and three digit dayOfYear
(yyyy-DDDT'HH:mm:ssZZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">time</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a two digit hour of day, two digit minute of
hour, two digit second of minute, three digit fraction of second, and
time zone offset (HH:mm:ss.SSSZZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">time_no_millis</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a two digit hour of day, two digit
minute of hour, two digit second of minute, and time zone offset
(HH:mm:ssZZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">t_time</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a two digit hour of day, two digit minute of
hour, two digit second of minute, three digit fraction of second, and
time zone offset prefixed by <span class="emphasis"><em>T</em></span> ('THH:mm:ss.SSSZZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">t_time_no_millis</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a two digit hour of day, two digit
minute of hour, two digit second of minute, and time zone offset
prefixed by <span class="emphasis"><em>T</em></span> ('THH:mm:ssZZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">week_date</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a full date as four digit weekyear, two
digit week of weekyear, and one digit day of week (xxxx-'Www-e).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">week_date_time</code></p></td><td class="entry" align="left" valign="top"><p>A formatter that combines a full weekyear date and
time, separated by a <span class="emphasis"><em>T</em></span> (xxxx-'Www-eT'HH:mm:ss.SSSZZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">weekDateTimeNoMillis</code></p></td><td class="entry" align="left" valign="top"><p>A formatter that combines a full weekyear date
and time without millis, separated by a <span class="emphasis"><em>T</em></span> (xxxx-'Www-eT'HH:mm:ssZZ).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">week_year</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a four digit weekyear.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">weekyearWeek</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a four digit weekyear and two digit week
of weekyear.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">weekyearWeekDay</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a four digit weekyear, two digit week
of weekyear, and one digit day of week.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">year</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a four digit year.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">year_month</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a four digit year and two digit month of
year.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">year_month_day</code></p></td><td class="entry" align="left" valign="top"><p>A formatter for a four digit year, two digit month of
year, and two digit day of month.</p></td></tr></tbody></table></div><h3><a id="custom"></a>Custom Format</h3><p>Allows for a completely customizable date format explained
<a class="ulink" href="http://www.joda.org/joda-time/apidocs/org/joda/time/format/DateTimeFormat.html" target="_top">here</a>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-node">Dynamic Mapping</span></div><div class="navheader"><span class="prev"><a href="mapping-date-format.html">
              &nbsp;
              Date Format</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-conf-mappings.html">Config Mappings
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-dynamic-mapping"></a>Dynamic Mapping</h2></div></div></div><p>Default mappings allow generic mapping definitions to be automatically applied
to types that do not have mappings predefined. This is mainly done
thanks to the fact that the
<a class="link" href="mapping-object-type.html" title="Object Type">object mapping</a> and
namely the <a class="link" href="mapping-root-object-type.html" title="Root Object Type">root object mapping</a> allow for schema-less dynamic addition of unmapped
fields.</p><p>The default mapping definition is a plain mapping definition that is
embedded within the distribution:</p><div class="pre_wrapper"><pre class="programlisting">{
    "_default_" : {
    }
}</pre></div><p>Pretty short, isnt it? Basically, everything is defaulted, especially the
dynamic nature of the root object mapping. The default mapping
definition can be overridden in several manners. The simplest manner is
to simply define a file called <code class="literal">default-mapping.json</code> and to place it
under the <code class="literal">config</code> directory (which can be configured to exist in a
different location). It can also be explicitly set using the
<code class="literal">index.mapper.default_mapping_location</code> setting.</p><p>The dynamic creation of mappings for unmapped types can be completely
disabled by setting <code class="literal">index.mapper.dynamic</code> to <code class="literal">false</code>.</p><p>The dynamic creation of fields within a type can be completely
disabled by setting the <code class="literal">dynamic</code> property of the type to <code class="literal">strict</code>.</p><p>Here is a <a class="link" href="indices-put-mapping.html" title="Put Mapping">Put Mapping</a> example that
disables dynamic field creation for a <code class="literal">tweet</code>:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/twitter/_mapping/tweet' -d '
{
    "tweet" : {
        "dynamic": "strict",
        "properties" : {
            "message" : {"type" : "string", "store" : true }
        }
    }
}
'</pre></div><p>Here is how we can change the default
<a class="link" href="mapping-date-format.html" title="Date Format">date_formats</a> used in the
root and inner object types:</p><div class="pre_wrapper"><pre class="programlisting">{
    "_default_" : {
        "dynamic_date_formats" : ["yyyy-MM-dd", "dd-MM-yyyy", "date_optional_time"]
    }
}</pre></div><h3><a id="_unmapped_fields_in_queries"></a>Unmapped fields in queries</h3><p>Queries and filters can refer to fields that dont exist in a mapping. Whether this
is allowed is controlled by the <code class="literal">index.query.parse.allow_unmapped_fields</code> setting.
This setting defaults to <code class="literal">true</code>. Setting it to <code class="literal">false</code> will disallow the usage of
unmapped fields in queries.</p><p>When registering a new <a class="link" href="search-percolate.html" title="Percolator">percolator query</a> or creating
a <a class="link" href="indices-aliases.html#filtered" title="Filtered Aliasesedit">filtered alias</a> then the <code class="literal">index.query.parse.allow_unmapped_fields</code> setting
is forcefully overwritten to disallowed unmapped fields.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-node">Config Mappings</span></div><div class="navheader"><span class="prev"><a href="mapping-dynamic-mapping.html">
              &nbsp;
              Dynamic Mapping</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-meta.html">Meta
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-conf-mappings"></a>Config Mappings</h2></div></div></div><p>Creating new mappings can be done using the
<a class="link" href="indices-put-mapping.html" title="Put Mapping">Put Mapping</a>
API. When a document is indexed with no mapping associated with it in
the specific index, the
<a class="link" href="mapping-dynamic-mapping.html" title="Dynamic Mapping">dynamic / default mapping</a> feature will kick in and automatically create mapping
definition for it.</p><p>Mappings can also be provided on the node level, meaning that each index
created will automatically be started with all the mappings defined
within a certain location.</p><p>Mappings can be defined within files called <code class="literal">[mapping_name].json</code> and be
placed either under <code class="literal">config/mappings/_default</code> location, or under
<code class="literal">config/mappings/[index_name]</code> (for mappings that should be associated
only with a specific index).</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-node">Meta</span></div><div class="navheader"><span class="prev"><a href="mapping-conf-mappings.html">
              &nbsp;
              Config Mappings</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="mapping-transform.html">Transform
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-meta"></a>Meta</h2></div></div></div><p>Each mapping can have custom meta data associated with it. These are
simple storage elements that are simply persisted along with the mapping
and can be retrieved when fetching the mapping definition. The meta is
defined under the <code class="literal">_meta</code> element, for example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet" : {
        "_meta" : {
            "attr1" : "value1",
            "attr2" : {
                "attr3" : "value3"
            }
        }
    }
}</pre></div><p>Meta can be handy for example for client libraries that perform
serialization and deserialization to store its meta model (for example,
the class the document maps to).</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-node">Transform</span></div><div class="navheader"><span class="prev"><a href="mapping-meta.html">
              &nbsp;
              Meta</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_get_transformed.html">Get Transformed
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="mapping-transform"></a>Transform</h2></div></div></div><p>The document can be transformed before it is indexed by registering a
script in the <code class="literal">transform</code> element of the mapping.  The result of the
transform is indexed but the original source is stored in the <code class="literal">_source</code>
field.  Example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "example" : {
        "transform" : {
            "script" : "if (ctx._source['title']?.startsWith('t')) ctx._source['suggest'] = ctx._source['content']",
            "params" : {
                "variable" : "not used but an example anyway"
            },
            "lang": "groovy"
        },
        "properties": {
           "title": { "type": "string" },
           "content": { "type": "string" },
           "suggest": { "type": "string" }
        }
    }
}</pre></div><p>Its also possible to specify multiple transforms:</p><div class="pre_wrapper"><pre class="programlisting">{
    "example" : {
        "transform" : [
            {"script": "ctx._source['suggest'] = ctx._source['content']"}
            {"script": "ctx._source['foo'] = ctx._source['bar'];"}
        ]
    }
}</pre></div><p>Because the result isnt stored in the source it cant normally be fetched by
source filtering.  It can be highlighted if it is marked as stored.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-transform.html">Transform</a></span>  <span class="breadcrumb-node">Get Transformed</span></div><div class="navheader"><span class="prev"><a href="mapping-transform.html">
              &nbsp;
              Transform</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_immutable_transformation.html">Immutable Transformation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_get_transformed"></a>Get Transformed</h2></div></div></div><p>The get endpoint will retransform the source if the <code class="literal">_source_transform</code>
parameter is set.  Example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET "http://localhost:9200/test/example/3?pretty&amp;_source_transform"</pre></div><p>The transform is performed before any source filtering but it is mostly
designed to make it easy to see what was passed to the index for debugging.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="mapping.html">Mapping</a></span>  <span class="breadcrumb-link"><a href="mapping-transform.html">Transform</a></span>  <span class="breadcrumb-node">Immutable Transformation</span></div><div class="navheader"><span class="prev"><a href="_get_transformed.html">
              &nbsp;
              Get Transformed</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis.html">Analysis
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_immutable_transformation"></a>Immutable Transformation</h2></div></div></div><p>Transform script cannot be added to an existing mapping for an index type
(regardless of whether the mapping currently uses transform or have any data at all).
In other words, transform script has to be added at mapping creation time for an index type.</p><p>Also, once configured the transform script cannot be modified.  This is not
because that is technically impossible but instead because madness lies
down that road.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">Analysis</span></div><div class="navheader"><span class="prev"><a href="_immutable_transformation.html">
              &nbsp;
              Immutable Transformation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-analyzers.html">Analyzers
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="analysis"></a>Analysis</h1></div></div></div><div class="partintro"><div></div><p>The index analysis module acts as a configurable registry of Analyzers
that can be used in order to both break indexed (analyzed) fields when a
document is indexed and process query strings. It maps to the Lucene
<code class="literal">Analyzer</code>.</p><p>Analyzers are composed of a single <a class="link" href="analysis-tokenizers.html" title="Tokenizers">Tokenizer</a>
and zero or more <a class="link" href="analysis-tokenfilters.html" title="Token Filters">TokenFilters</a>. The tokenizer may
be preceded by one or more <a class="link" href="analysis-charfilters.html" title="Character Filters">CharFilters</a>. The
analysis module allows one to register <code class="literal">TokenFilters</code>, <code class="literal">Tokenizers</code> and
<code class="literal">Analyzers</code> under logical names that can then be referenced either in
mapping definitions or in certain APIs. The Analysis module
automatically registers (<span class="strong emphasis"><strong>if not explicitly defined</strong></span>) built in
analyzers, token filters, and tokenizers.</p><p>Here is a sample configuration:</p><div class="pre_wrapper"><pre class="programlisting">index :
    analysis :
        analyzer :
            standard :
                type : standard
                stopwords : [stop1, stop2]
            myAnalyzer1 :
                type : standard
                stopwords : [stop1, stop2, stop3]
                max_token_length : 500
            # configure a custom analyzer which is
            # exactly like the default standard analyzer
            myAnalyzer2 :
                tokenizer : standard
                filter : [standard, lowercase, stop]
        tokenizer :
            myTokenizer1 :
                type : standard
                max_token_length : 900
            myTokenizer2 :
                type : keyword
                buffer_size : 512
        filter :
            myTokenFilter1 :
                type : stop
                stopwords : [stop1, stop2, stop3, stop4]
            myTokenFilter2 :
                type : length
                min : 0
                max : 2000</pre></div><h3><a id="backwards-compatibility"></a>Backwards compatibility</h3><p>All analyzers, tokenizers, and token filters can be configured with a
<code class="literal">version</code> parameter to control which Lucene version behavior they should
use. Possible values are: <code class="literal">3.0</code> - <code class="literal">3.6</code>, <code class="literal">4.0</code> - <code class="literal">4.3</code> (the highest
version number is the default option).</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-node">Analyzers</span></div><div class="navheader"><span class="prev"><a href="analysis.html">
              &nbsp;
              Analysis</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-standard-analyzer.html">Standard Analyzer
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-analyzers"></a>Analyzers</h2></div></div></div><p>Analyzers are composed of a single <a class="link" href="analysis-tokenizers.html" title="Tokenizers">Tokenizer</a>
and zero or more <a class="link" href="analysis-tokenfilters.html" title="Token Filters">TokenFilters</a>. The tokenizer may
be preceded by one or more <a class="link" href="analysis-charfilters.html" title="Character Filters">CharFilters</a>.
The analysis module allows you to register <code class="literal">Analyzers</code> under logical
names which can then be referenced either in mapping definitions or in
certain APIs.</p><p>Elasticsearch comes with a number of prebuilt analyzers which are
ready to use.  Alternatively, you can combine the built in
character filters, tokenizers and token filters to create
<a class="link" href="analysis-custom-analyzer.html" title="Custom Analyzer">custom analyzers</a>.</p><h3><a id="default-analyzers"></a>Default Analyzers</h3><p>An analyzer is registered under a logical name. It can then be
referenced from mapping definitions or certain APIs. When none are
defined, defaults are used. There is an option to define which analyzers
will be used by default when none can be derived.</p><p>The <code class="literal">default</code> logical name allows one to configure an analyzer that will
be used both for indexing and for searching APIs. The <code class="literal">default_index</code>
logical name can be used to configure a default analyzer that will be
used just when indexing, and the <code class="literal">default_search</code> can be used to
configure a default analyzer that will be used just when searching.</p><h3><a id="aliasing-analyzers"></a>Aliasing Analyzers</h3><p>Analyzers can be aliased to have several registered lookup names
associated with them. For example, the following will allow
the <code class="literal">standard</code> analyzer to also be referenced with <code class="literal">alias1</code>
and <code class="literal">alias2</code> values.</p><div class="pre_wrapper"><pre class="programlisting">index :
  analysis :
    analyzer :
      standard :
        alias: [alias1, alias2]
        type : standard
        stopwords : [test1, test2, test3]</pre></div><p>Below is a list of the built in analyzers.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-analyzers.html">Analyzers</a></span>  <span class="breadcrumb-node">Standard Analyzer</span></div><div class="navheader"><span class="prev"><a href="analysis-analyzers.html">
              &nbsp;
              Analyzers</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-simple-analyzer.html">Simple Analyzer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-standard-analyzer"></a>Standard Analyzer</h2></div></div></div><p>An analyzer of type <code class="literal">standard</code> is built using the
<a class="link" href="analysis-standard-tokenizer.html" title="Standard Tokenizer">Standard Tokenizer</a> with the
<a class="link" href="analysis-standard-tokenfilter.html" title="Standard Token Filter">Standard Token Filter</a>,
<a class="link" href="analysis-lowercase-tokenfilter.html" title="Lowercase Token Filter">Lower Case Token Filter</a>, and
<a class="link" href="analysis-stop-tokenfilter.html" title="Stop Token Filter">Stop Token Filter</a>.</p><p>The following are settings that can be set for a <code class="literal">standard</code> analyzer
type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">stopwords</code></p></td><td class="entry" align="left" valign="top"><p>A list of stopwords to initialize the stop filter with.
Defaults to an <span class="emphasis"><em>empty</em></span> stopword list Check
<a class="link" href="analysis-stop-analyzer.html" title="Stop Analyzer">Stop Analyzer</a> for more details.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">max_token_length</code></p></td><td class="entry" align="left" valign="top"><p>The maximum token length. If a token is seen that exceeds
this length then it is split at <code class="literal">max_token_length</code> intervals. Defaults to <code class="literal">255</code>.</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-analyzers.html">Analyzers</a></span>  <span class="breadcrumb-node">Simple Analyzer</span></div><div class="navheader"><span class="prev"><a href="analysis-standard-analyzer.html">
              &nbsp;
              Standard Analyzer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-whitespace-analyzer.html">Whitespace Analyzer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-simple-analyzer"></a>Simple Analyzer</h2></div></div></div><p>An analyzer of type <code class="literal">simple</code> that is built using a
<a class="link" href="analysis-lowercase-tokenizer.html" title="Lowercase Tokenizer">Lower Case Tokenizer</a>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-analyzers.html">Analyzers</a></span>  <span class="breadcrumb-node">Whitespace Analyzer</span></div><div class="navheader"><span class="prev"><a href="analysis-simple-analyzer.html">
              &nbsp;
              Simple Analyzer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-stop-analyzer.html">Stop Analyzer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-whitespace-analyzer"></a>Whitespace Analyzer</h2></div></div></div><p>An analyzer of type <code class="literal">whitespace</code> that is built using a
<a class="link" href="analysis-whitespace-tokenizer.html" title="Whitespace Tokenizer">Whitespace Tokenizer</a>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-analyzers.html">Analyzers</a></span>  <span class="breadcrumb-node">Stop Analyzer</span></div><div class="navheader"><span class="prev"><a href="analysis-whitespace-analyzer.html">
              &nbsp;
              Whitespace Analyzer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-keyword-analyzer.html">Keyword Analyzer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-stop-analyzer"></a>Stop Analyzer</h2></div></div></div><p>An analyzer of type <code class="literal">stop</code> that is built using a
<a class="link" href="analysis-lowercase-tokenizer.html" title="Lowercase Tokenizer">Lower Case Tokenizer</a>, with
<a class="link" href="analysis-stop-tokenfilter.html" title="Stop Token Filter">Stop Token Filter</a>.</p><p>The following are settings that can be set for a <code class="literal">stop</code> analyzer type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">stopwords</code></p></td><td class="entry" align="left" valign="top"><p>A list of stopwords to initialize the stop filter with.
Defaults to the english stop words.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">stopwords_path</code></p></td><td class="entry" align="left" valign="top"><p>A path (either relative to <code class="literal">config</code> location, or
absolute) to a stopwords file configuration.</p></td></tr></tbody></table></div><p>Use <code class="literal">stopwords: _none_</code> to explicitly specify an <span class="emphasis"><em>empty</em></span> stopword list.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-analyzers.html">Analyzers</a></span>  <span class="breadcrumb-node">Keyword Analyzer</span></div><div class="navheader"><span class="prev"><a href="analysis-stop-analyzer.html">
              &nbsp;
              Stop Analyzer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-pattern-analyzer.html">Pattern Analyzer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-keyword-analyzer"></a>Keyword Analyzer</h2></div></div></div><p>An analyzer of type <code class="literal">keyword</code> that "tokenizes" an entire stream as a
single token. This is useful for data like zip codes, ids and so on.
Note, when using mapping definitions, it might make more sense to simply
mark the field as <code class="literal">not_analyzed</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-analyzers.html">Analyzers</a></span>  <span class="breadcrumb-node">Pattern Analyzer</span></div><div class="navheader"><span class="prev"><a href="analysis-keyword-analyzer.html">
              &nbsp;
              Keyword Analyzer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-lang-analyzer.html">Language Analyzers
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-pattern-analyzer"></a>Pattern Analyzer</h2></div></div></div><p>An analyzer of type <code class="literal">pattern</code> that can flexibly separate text into terms
via a regular expression. Accepts the following settings:</p><p>The following are settings that can be set for a <code class="literal">pattern</code> analyzer
type:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">lowercase</code>
</p>
</td><td class="entry" valign="top">
<p>
Should terms be lowercased or not. Defaults to <code class="literal">true</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">pattern</code>
</p>
</td><td class="entry" valign="top">
<p>
The regular expression pattern, defaults to <code class="literal">\W+</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">flags</code>
</p>
</td><td class="entry" valign="top">
<p>
The regular expression flags.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">stopwords</code>
</p>
</td><td class="entry" valign="top">
<p>
A list of stopwords to initialize the stop filter with.
                Defaults to an <span class="emphasis"><em>empty</em></span> stopword list Check
                <a class="link" href="analysis-stop-analyzer.html" title="Stop Analyzer">Stop Analyzer</a> for more details.
</p>
</td></tr></tbody></table></div><p><span class="strong emphasis"><strong>IMPORTANT</strong></span>: The regular expression should match the <span class="strong emphasis"><strong>token separators</strong></span>,
not the tokens themselves.</p><p>Flags should be pipe-separated, eg <code class="literal">"CASE_INSENSITIVE|COMMENTS"</code>. Check
<a class="ulink" href="http://download.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html#field_summary" target="_top">Java
Pattern API</a> for more details about <code class="literal">flags</code> options.</p><h4><a id="_pattern_analyzer_examples"></a>Pattern Analyzer Examples</h4><p>In order to try out these examples, you should delete the <code class="literal">test</code> index
before running each example.</p><h5><a id="_whitespace_tokenizer"></a>Whitespace tokenizer</h5><div class="pre_wrapper"><pre class="programlisting">DELETE test

PUT /test
{
  "settings": {
    "analysis": {
      "analyzer": {
        "whitespace": {
          "type": "pattern",
          "pattern": "\\s+"
        }
      }
    }
  }
}

GET /test/_analyze?analyzer=whitespace&amp;text=foo,bar baz

# "foo,bar", "baz"</pre></div><div class="sense_widget" data-snippet="snippets/analysis-pattern-analyzer/1.json"></div><h5><a id="_non_word_character_tokenizer"></a>Non-word character tokenizer</h5><div class="pre_wrapper"><pre class="programlisting">DELETE test

PUT /test
{
  "settings": {
    "analysis": {
      "analyzer": {
        "nonword": {
          "type": "pattern",
          "pattern": "[^\\w]+" <a id="CO84-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        }
      }
    }
  }
}

GET /test/_analyze?analyzer=nonword&amp;text=foo,bar baz
# "foo,bar baz" becomes "foo", "bar", "baz"

GET /test/_analyze?analyzer=nonword&amp;text=type_1-type_4
# "type_1","type_4"</pre></div><div class="sense_widget" data-snippet="snippets/analysis-pattern-analyzer/2.json"></div><h5><a id="_camelcase_tokenizer"></a>CamelCase tokenizer</h5><div class="pre_wrapper"><pre class="programlisting">DELETE test

PUT /test?pretty=1
{
  "settings": {
    "analysis": {
      "analyzer": {
        "camel": {
          "type": "pattern",
          "pattern": "([^\\p{L}\\d]+)|(?&lt;=\\D)(?=\\d)|(?&lt;=\\d)(?=\\D)|(?&lt;=[\\p{L}&amp;&amp;[^\\p{Lu}]])(?=\\p{Lu})|(?&lt;=\\p{Lu})(?=\\p{Lu}[\\p{L}&amp;&amp;[^\\p{Lu}]])"
        }
      }
    }
  }
}

GET /test/_analyze?analyzer=camel&amp;text=MooseX::FTPClass2_beta
# "moose","x","ftp","class","2","beta"</pre></div><div class="sense_widget" data-snippet="snippets/analysis-pattern-analyzer/3.json"></div><p>The regex above is easier to understand as:</p><div class="pre_wrapper"><pre class="programlisting">  ([^\p{L}\d]+)                 # swallow non letters and numbers,
| (?&lt;=\D)(?=\d)                 # or non-number followed by number,
| (?&lt;=\d)(?=\D)                 # or number followed by non-number,
| (?&lt;=[ \p{L} &amp;&amp; [^\p{Lu}]])    # or lower case
  (?=\p{Lu})                    #   followed by upper case,
| (?&lt;=\p{Lu})                   # or upper case
  (?=\p{Lu}                     #   followed by upper case
    [\p{L}&amp;&amp;[^\p{Lu}]]          #   then lower case
  )</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-analyzers.html">Analyzers</a></span>  <span class="breadcrumb-node">Language Analyzers</span></div><div class="navheader"><span class="prev"><a href="analysis-pattern-analyzer.html">
              &nbsp;
              Pattern Analyzer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-snowball-analyzer.html">Snowball Analyzer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-lang-analyzer"></a>Language Analyzers</h2></div></div></div><p>A set of analyzers aimed at analyzing specific language text. The
following types are supported:
<a class="link" href="analysis-lang-analyzer.html#arabic-analyzer" title="arabic analyzer"><code class="literal">arabic</code></a>,
<a class="link" href="analysis-lang-analyzer.html#armenian-analyzer" title="armenian analyzer"><code class="literal">armenian</code></a>,
<a class="link" href="analysis-lang-analyzer.html#basque-analyzer" title="basque analyzer"><code class="literal">basque</code></a>,
<a class="link" href="analysis-lang-analyzer.html#brazilian-analyzer" title="brazilian analyzer"><code class="literal">brazilian</code></a>,
<a class="link" href="analysis-lang-analyzer.html#bulgarian-analyzer" title="bulgarian analyzer"><code class="literal">bulgarian</code></a>,
<a class="link" href="analysis-lang-analyzer.html#catalan-analyzer" title="catalan analyzer"><code class="literal">catalan</code></a>,
<a class="link" href="analysis-lang-analyzer.html#chinese-analyzer" title="chinese analyzer"><code class="literal">chinese</code></a>,
<a class="link" href="analysis-lang-analyzer.html#cjk-analyzer" title="cjk analyzer"><code class="literal">cjk</code></a>,
<a class="link" href="analysis-lang-analyzer.html#czech-analyzer" title="czech analyzer"><code class="literal">czech</code></a>,
<a class="link" href="analysis-lang-analyzer.html#danish-analyzer" title="danish analyzer"><code class="literal">danish</code></a>,
<a class="link" href="analysis-lang-analyzer.html#dutch-analyzer" title="dutch analyzer"><code class="literal">dutch</code></a>,
<a class="link" href="analysis-lang-analyzer.html#english-analyzer" title="english analyzer"><code class="literal">english</code></a>,
<a class="link" href="analysis-lang-analyzer.html#finnish-analyzer" title="finnish analyzer"><code class="literal">finnish</code></a>,
<a class="link" href="analysis-lang-analyzer.html#french-analyzer" title="french analyzer"><code class="literal">french</code></a>,
<a class="link" href="analysis-lang-analyzer.html#galician-analyzer" title="galician analyzer"><code class="literal">galician</code></a>,
<a class="link" href="analysis-lang-analyzer.html#german-analyzer" title="german analyzer"><code class="literal">german</code></a>,
<a class="link" href="analysis-lang-analyzer.html#greek-analyzer" title="greek analyzer"><code class="literal">greek</code></a>,
<a class="link" href="analysis-lang-analyzer.html#hindi-analyzer" title="hindi analyzer"><code class="literal">hindi</code></a>,
<a class="link" href="analysis-lang-analyzer.html#hungarian-analyzer" title="hungarian analyzer"><code class="literal">hungarian</code></a>,
<a class="link" href="analysis-lang-analyzer.html#indonesian-analyzer" title="indonesian analyzer"><code class="literal">indonesian</code></a>,
<a class="link" href="analysis-lang-analyzer.html#irish-analyzer" title="irish analyzer"><code class="literal">irish</code></a>,
<a class="link" href="analysis-lang-analyzer.html#italian-analyzer" title="italian analyzer"><code class="literal">italian</code></a>,
<a class="link" href="analysis-lang-analyzer.html#latvian-analyzer" title="latvian analyzer"><code class="literal">latvian</code></a>,
<a class="link" href="analysis-lang-analyzer.html#norwegian-analyzer" title="norwegian analyzer"><code class="literal">norwegian</code></a>,
<a class="link" href="analysis-lang-analyzer.html#persian-analyzer" title="persian analyzer"><code class="literal">persian</code></a>,
<a class="link" href="analysis-lang-analyzer.html#portuguese-analyzer" title="portuguese analyzer"><code class="literal">portuguese</code></a>,
<a class="link" href="analysis-lang-analyzer.html#romanian-analyzer" title="romanian analyzer"><code class="literal">romanian</code></a>,
<a class="link" href="analysis-lang-analyzer.html#russian-analyzer" title="russian analyzer"><code class="literal">russian</code></a>,
<a class="link" href="analysis-lang-analyzer.html#sorani-analyzer" title="sorani analyzer"><code class="literal">sorani</code></a>,
<a class="link" href="analysis-lang-analyzer.html#spanish-analyzer" title="spanish analyzer"><code class="literal">spanish</code></a>,
<a class="link" href="analysis-lang-analyzer.html#swedish-analyzer" title="swedish analyzer"><code class="literal">swedish</code></a>,
<a class="link" href="analysis-lang-analyzer.html#turkish-analyzer" title="turkish analyzer"><code class="literal">turkish</code></a>,
<a class="link" href="analysis-lang-analyzer.html#thai-analyzer" title="thai analyzer"><code class="literal">thai</code></a>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_configuring_language_analyzers"></a>Configuring language analyzers</h3></div></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_stopwords_2"></a>Stopwords</h4></div></div></div><p>All analyzers support setting custom <code class="literal">stopwords</code> either internally in
the config, or by using an external stopwords file by setting
<code class="literal">stopwords_path</code>. Check <a class="link" href="analysis-stop-analyzer.html" title="Stop Analyzer">Stop Analyzer</a> for
more details.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="_excluding_words_from_stemming"></a>Excluding words from stemming</h4></div></div></div><p>The <code class="literal">stem_exclusion</code> parameter allows you to specify an array
of lowercase words that should not be stemmed.  Internally, this
functionality is implemented by adding the
<a class="link" href="analysis-keyword-marker-tokenfilter.html" title="Keyword Marker Token Filter"><code class="literal">keyword_marker</code> token filter</a>
with the <code class="literal">keywords</code> set to the value of the <code class="literal">stem_exclusion</code> parameter.</p><p>The following analyzers support setting custom <code class="literal">stem_exclusion</code> list:
<code class="literal">arabic</code>, <code class="literal">armenian</code>, <code class="literal">basque</code>, <code class="literal">catalan</code>, <code class="literal">bulgarian</code>, <code class="literal">catalan</code>,
<code class="literal">czech</code>, <code class="literal">finnish</code>, <code class="literal">dutch</code>, <code class="literal">english</code>, <code class="literal">finnish</code>, <code class="literal">french</code>, <code class="literal">galician</code>,
<code class="literal">german</code>, <code class="literal">irish</code>, <code class="literal">hindi</code>, <code class="literal">hungarian</code>, <code class="literal">indonesian</code>, <code class="literal">italian</code>, <code class="literal">latvian</code>, <code class="literal">norwegian</code>,
<code class="literal">portuguese</code>, <code class="literal">romanian</code>, <code class="literal">russian</code>, <code class="literal">sorani</code>, <code class="literal">spanish</code>, <code class="literal">swedish</code>, <code class="literal">turkish</code>.</p></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_reimplementing_language_analyzers"></a>Reimplementing language analyzers</h3></div></div></div><p>The built-in language analyzers can be reimplemented as <code class="literal">custom</code> analyzers
(as described below) in order to customize their behaviour.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>If you do not intend to exclude words from being stemmed (the
equivalent of the <code class="literal">stem_exclusion</code> parameter above), then you should remove
the <code class="literal">keyword_marker</code> token filter from the custom analyzer configuration.</p></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="arabic-analyzer"></a><code class="literal">arabic</code> analyzer</h4></div></div></div><p>The <code class="literal">arabic</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "arabic_stop": {
          "type":       "stop",
          "stopwords":  "_arabic_" <a id="CO84-2"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "arabic_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO84-3"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "arabic_stemmer": {
          "type":       "stemmer",
          "language":   "arabic"
        }
      },
      "analyzer": {
        "arabic": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "arabic_stop",
            "arabic_normalization",
            "arabic_keywords",
            "arabic_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO84-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> <a href="#CO84-2"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO84-3"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="armenian-analyzer"></a><code class="literal">armenian</code> analyzer</h4></div></div></div><p>The <code class="literal">armenian</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "armenian_stop": {
          "type":       "stop",
          "stopwords":  "_armenian_" <a id="CO85-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "armenian_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO85-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "armenian_stemmer": {
          "type":       "stemmer",
          "language":   "armenian"
        }
      },
      "analyzer": {
        "armenian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "armenian_stop",
            "armenian_keywords",
            "armenian_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO85-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO85-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="basque-analyzer"></a><code class="literal">basque</code> analyzer</h4></div></div></div><p>The <code class="literal">basque</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "basque_stop": {
          "type":       "stop",
          "stopwords":  "_basque_" <a id="CO86-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "basque_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO86-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "basque_stemmer": {
          "type":       "stemmer",
          "language":   "basque"
        }
      },
      "analyzer": {
        "basque": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "basque_stop",
            "basque_keywords",
            "basque_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO86-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO86-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="brazilian-analyzer"></a><code class="literal">brazilian</code> analyzer</h4></div></div></div><p>The <code class="literal">brazilian</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "brazilian_stop": {
          "type":       "stop",
          "stopwords":  "_brazilian_" <a id="CO87-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "brazilian_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO87-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "brazilian_stemmer": {
          "type":       "stemmer",
          "language":   "brazilian"
        }
      },
      "analyzer": {
        "brazilian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "brazilian_stop",
            "brazilian_keywords",
            "brazilian_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO87-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO87-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="bulgarian-analyzer"></a><code class="literal">bulgarian</code> analyzer</h4></div></div></div><p>The <code class="literal">bulgarian</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "bulgarian_stop": {
          "type":       "stop",
          "stopwords":  "_bulgarian_" <a id="CO88-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "bulgarian_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO88-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "bulgarian_stemmer": {
          "type":       "stemmer",
          "language":   "bulgarian"
        }
      },
      "analyzer": {
        "bulgarian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "bulgarian_stop",
            "bulgarian_keywords",
            "bulgarian_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO88-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO88-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="catalan-analyzer"></a><code class="literal">catalan</code> analyzer</h4></div></div></div><p>The <code class="literal">catalan</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "catalan_elision": {
        "type":         "elision",
            "articles": [ "d", "l", "m", "n", "s", "t"]
        },
        "catalan_stop": {
          "type":       "stop",
          "stopwords":  "_catalan_" <a id="CO89-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "catalan_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO89-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "catalan_stemmer": {
          "type":       "stemmer",
          "language":   "catalan"
        }
      },
      "analyzer": {
        "catalan": {
          "tokenizer":  "standard",
          "filter": [
            "catalan_elision",
            "lowercase",
            "catalan_stop",
            "catalan_keywords",
            "catalan_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO89-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO89-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="chinese-analyzer"></a><code class="literal">chinese</code> analyzer</h4></div></div></div><p>The <code class="literal">chinese</code> analyzer cannot be reimplemented as a <code class="literal">custom</code> analyzer
because it depends on the ChineseTokenizer and ChineseFilter classes,
which are not exposed in Elasticsearch.  These classes are
deprecated in Lucene 4 and the <code class="literal">chinese</code> analyzer will be replaced
with the <a class="xref" href="analysis-standard-analyzer.html" title="Standard Analyzer">Standard Analyzer</a> in Lucene 5.</p></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="cjk-analyzer"></a><code class="literal">cjk</code> analyzer</h4></div></div></div><p>The <code class="literal">cjk</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "english_stop": {
          "type":       "stop",
          "stopwords":  "_english_" <a id="CO90-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        }
      },
      "analyzer": {
        "cjk": {
          "tokenizer":  "standard",
          "filter": [
            "cjk_width",
            "lowercase",
            "cjk_bigram",
            "english_stop"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO90-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="czech-analyzer"></a><code class="literal">czech</code> analyzer</h4></div></div></div><p>The <code class="literal">czech</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "czech_stop": {
          "type":       "stop",
          "stopwords":  "_czech_" <a id="CO91-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "czech_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO91-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "czech_stemmer": {
          "type":       "stemmer",
          "language":   "czech"
        }
      },
      "analyzer": {
        "czech": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "czech_stop",
            "czech_keywords",
            "czech_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO91-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO91-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="danish-analyzer"></a><code class="literal">danish</code> analyzer</h4></div></div></div><p>The <code class="literal">danish</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "danish_stop": {
          "type":       "stop",
          "stopwords":  "_danish_" <a id="CO92-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "danish_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO92-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "danish_stemmer": {
          "type":       "stemmer",
          "language":   "danish"
        }
      },
      "analyzer": {
        "danish": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "danish_stop",
            "danish_keywords",
            "danish_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO92-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO92-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="dutch-analyzer"></a><code class="literal">dutch</code> analyzer</h4></div></div></div><p>The <code class="literal">dutch</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "dutch_stop": {
          "type":       "stop",
          "stopwords":  "_dutch_" <a id="CO93-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "dutch_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO93-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "dutch_stemmer": {
          "type":       "stemmer",
          "language":   "dutch"
        },
        "dutch_override": {
          "type":       "stemmer_override",
          "rules": [
            "fiets=&gt;fiets",
            "bromfiets=&gt;bromfiets",
            "ei=&gt;eier",
            "kind=&gt;kinder"
          ]
        }
      },
      "analyzer": {
        "dutch": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "dutch_stop",
            "dutch_keywords",
            "dutch_override",
            "dutch_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO93-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO93-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="english-analyzer"></a><code class="literal">english</code> analyzer</h4></div></div></div><p>The <code class="literal">english</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "english_stop": {
          "type":       "stop",
          "stopwords":  "_english_" <a id="CO94-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "english_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO94-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "english_stemmer": {
          "type":       "stemmer",
          "language":   "english"
        },
        "english_possessive_stemmer": {
          "type":       "stemmer",
          "language":   "possessive_english"
        }
      },
      "analyzer": {
        "english": {
          "tokenizer":  "standard",
          "filter": [
            "english_possessive_stemmer",
            "lowercase",
            "english_stop",
            "english_keywords",
            "english_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO94-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO94-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="finnish-analyzer"></a><code class="literal">finnish</code> analyzer</h4></div></div></div><p>The <code class="literal">finnish</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "finnish_stop": {
          "type":       "stop",
          "stopwords":  "_finnish_" <a id="CO95-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "finnish_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO95-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "finnish_stemmer": {
          "type":       "stemmer",
          "language":   "finnish"
        }
      },
      "analyzer": {
        "finnish": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "finnish_stop",
            "finnish_keywords",
            "finnish_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO95-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO95-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="french-analyzer"></a><code class="literal">french</code> analyzer</h4></div></div></div><p>The <code class="literal">french</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "french_elision": {
        "type":         "elision",
            "articles": [ "l", "m", "t", "qu", "n", "s",
                          "j", "d", "c", "jusqu", "quoiqu",
                          "lorsqu", "puisqu"
                        ]
        },
        "french_stop": {
          "type":       "stop",
          "stopwords":  "_french_" <a id="CO96-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "french_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO96-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "french_stemmer": {
          "type":       "stemmer",
          "language":   "light_french"
        }
      },
      "analyzer": {
        "french": {
          "tokenizer":  "standard",
          "filter": [
            "french_elision",
            "lowercase",
            "french_stop",
            "french_keywords",
            "french_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO96-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO96-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="galician-analyzer"></a><code class="literal">galician</code> analyzer</h4></div></div></div><p>The <code class="literal">galician</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "galician_stop": {
          "type":       "stop",
          "stopwords":  "_galician_" <a id="CO97-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "galician_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO97-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "galician_stemmer": {
          "type":       "stemmer",
          "language":   "galician"
        }
      },
      "analyzer": {
        "galician": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "galician_stop",
            "galician_keywords",
            "galician_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO97-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO97-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="german-analyzer"></a><code class="literal">german</code> analyzer</h4></div></div></div><p>The <code class="literal">german</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "german_stop": {
          "type":       "stop",
          "stopwords":  "_german_" <a id="CO98-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "german_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO98-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "german_stemmer": {
          "type":       "stemmer",
          "language":   "light_german"
        }
      },
      "analyzer": {
        "german": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "german_stop",
            "german_keywords",
            "german_normalization",
            "german_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO98-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO98-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="greek-analyzer"></a><code class="literal">greek</code> analyzer</h4></div></div></div><p>The <code class="literal">greek</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "greek_stop": {
          "type":       "stop",
          "stopwords":  "_greek_" <a id="CO99-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "greek_lowercase": {
          "type":       "lowercase",
          "language":   "greek"
        },
        "greek_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO99-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "greek_stemmer": {
          "type":       "stemmer",
          "language":   "greek"
        }
      },
      "analyzer": {
        "greek": {
          "tokenizer":  "standard",
          "filter": [
            "greek_lowercase",
            "greek_stop",
            "greek_keywords",
            "greek_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO99-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO99-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="hindi-analyzer"></a><code class="literal">hindi</code> analyzer</h4></div></div></div><p>The <code class="literal">hindi</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "hindi_stop": {
          "type":       "stop",
          "stopwords":  "_hindi_" <a id="CO100-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "hindi_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO100-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "hindi_stemmer": {
          "type":       "stemmer",
          "language":   "hindi"
        }
      },
      "analyzer": {
        "hindi": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "indic_normalization",
            "hindi_normalization",
            "hindi_stop",
            "hindi_keywords",
            "hindi_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO100-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO100-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="hungarian-analyzer"></a><code class="literal">hungarian</code> analyzer</h4></div></div></div><p>The <code class="literal">hungarian</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "hungarian_stop": {
          "type":       "stop",
          "stopwords":  "_hungarian_" <a id="CO101-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "hungarian_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO101-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "hungarian_stemmer": {
          "type":       "stemmer",
          "language":   "hungarian"
        }
      },
      "analyzer": {
        "hungarian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "hungarian_stop",
            "hungarian_keywords",
            "hungarian_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO101-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO101-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="indonesian-analyzer"></a><code class="literal">indonesian</code> analyzer</h4></div></div></div><p>The <code class="literal">indonesian</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "indonesian_stop": {
          "type":       "stop",
          "stopwords":  "_indonesian_" <a id="CO102-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "indonesian_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO102-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "indonesian_stemmer": {
          "type":       "stemmer",
          "language":   "indonesian"
        }
      },
      "analyzer": {
        "indonesian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "indonesian_stop",
            "indonesian_keywords",
            "indonesian_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO102-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO102-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="irish-analyzer"></a><code class="literal">irish</code> analyzer</h4></div></div></div><p>The <code class="literal">irish</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "irish_elision": {
          "type":       "elision",
          "articles": [ "h", "n", "t" ]
        },
        "irish_stop": {
          "type":       "stop",
          "stopwords":  "_irish_" <a id="CO103-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "irish_lowercase": {
          "type":       "lowercase",
          "language":   "irish"
        },
        "irish_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO103-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "irish_stemmer": {
          "type":       "stemmer",
          "language":   "irish"
        }
      },
      "analyzer": {
        "irish": {
          "tokenizer":  "standard",
          "filter": [
            "irish_stop",
            "irish_elision",
            "irish_lowercase",
            "irish_keywords",
            "irish_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO103-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO103-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="italian-analyzer"></a><code class="literal">italian</code> analyzer</h4></div></div></div><p>The <code class="literal">italian</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "italian_elision": {
        "type":         "elision",
            "articles": [
                "c", "l", "all", "dall", "dell",
                "nell", "sull", "coll", "pell",
                "gl", "agl", "dagl", "degl", "negl",
                "sugl", "un", "m", "t", "s", "v", "d"
            ]
        },
        "italian_stop": {
          "type":       "stop",
          "stopwords":  "_italian_" <a id="CO104-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "italian_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO104-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "italian_stemmer": {
          "type":       "stemmer",
          "language":   "light_italian"
        }
      },
      "analyzer": {
        "italian": {
          "tokenizer":  "standard",
          "filter": [
            "italian_elision",
            "lowercase",
            "italian_stop",
            "italian_keywords",
            "italian_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO104-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO104-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="latvian-analyzer"></a><code class="literal">latvian</code> analyzer</h4></div></div></div><p>The <code class="literal">latvian</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "latvian_stop": {
          "type":       "stop",
          "stopwords":  "_latvian_" <a id="CO105-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "latvian_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO105-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "latvian_stemmer": {
          "type":       "stemmer",
          "language":   "latvian"
        }
      },
      "analyzer": {
        "latvian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "latvian_stop",
            "latvian_keywords",
            "latvian_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO105-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO105-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="norwegian-analyzer"></a><code class="literal">norwegian</code> analyzer</h4></div></div></div><p>The <code class="literal">norwegian</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "norwegian_stop": {
          "type":       "stop",
          "stopwords":  "_norwegian_" <a id="CO106-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "norwegian_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO106-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "norwegian_stemmer": {
          "type":       "stemmer",
          "language":   "norwegian"
        }
      },
      "analyzer": {
        "norwegian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "norwegian_stop",
            "norwegian_keywords",
            "norwegian_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO106-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO106-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="persian-analyzer"></a><code class="literal">persian</code> analyzer</h4></div></div></div><p>The <code class="literal">persian</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "char_filter": {
        "zero_width_spaces": {
            "type":       "mapping",
            "mappings": [ "\\u200C=&gt; "] <a id="CO107-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        }
      },
      "filter": {
        "persian_stop": {
          "type":       "stop",
          "stopwords":  "_persian_" <a id="CO107-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        }
      },
      "analyzer": {
        "persian": {
          "tokenizer":     "standard",
          "char_filter": [ "zero_width_spaces" ],
          "filter": [
            "lowercase",
            "arabic_normalization",
            "persian_normalization",
            "persian_stop"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO107-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
Replaces zero-width non-joiners with an ASCII space.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO107-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="portuguese-analyzer"></a><code class="literal">portuguese</code> analyzer</h4></div></div></div><p>The <code class="literal">portuguese</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "portuguese_stop": {
          "type":       "stop",
          "stopwords":  "_portuguese_" <a id="CO108-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "portuguese_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO108-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "portuguese_stemmer": {
          "type":       "stemmer",
          "language":   "light_portuguese"
        }
      },
      "analyzer": {
        "portuguese": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "portuguese_stop",
            "portuguese_keywords",
            "portuguese_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO108-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO108-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="romanian-analyzer"></a><code class="literal">romanian</code> analyzer</h4></div></div></div><p>The <code class="literal">romanian</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "romanian_stop": {
          "type":       "stop",
          "stopwords":  "_romanian_" <a id="CO109-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "romanian_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO109-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "romanian_stemmer": {
          "type":       "stemmer",
          "language":   "romanian"
        }
      },
      "analyzer": {
        "romanian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "romanian_stop",
            "romanian_keywords",
            "romanian_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO109-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO109-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="russian-analyzer"></a><code class="literal">russian</code> analyzer</h4></div></div></div><p>The <code class="literal">russian</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "russian_stop": {
          "type":       "stop",
          "stopwords":  "_russian_" <a id="CO110-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "russian_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO110-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "russian_stemmer": {
          "type":       "stemmer",
          "language":   "russian"
        }
      },
      "analyzer": {
        "russian": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "russian_stop",
            "russian_keywords",
            "russian_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO110-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO110-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="sorani-analyzer"></a><code class="literal">sorani</code> analyzer</h4></div></div></div><p>The <code class="literal">sorani</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "sorani_stop": {
          "type":       "stop",
          "stopwords":  "_sorani_" <a id="CO111-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "sorani_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO111-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "sorani_stemmer": {
          "type":       "stemmer",
          "language":   "sorani"
        }
      },
      "analyzer": {
        "sorani": {
          "tokenizer":  "standard",
          "filter": [
            "sorani_normalization",
            "lowercase",
            "sorani_stop",
            "sorani_keywords",
            "sorani_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO111-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO111-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="spanish-analyzer"></a><code class="literal">spanish</code> analyzer</h4></div></div></div><p>The <code class="literal">spanish</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "spanish_stop": {
          "type":       "stop",
          "stopwords":  "_spanish_" <a id="CO112-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "spanish_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO112-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "spanish_stemmer": {
          "type":       "stemmer",
          "language":   "light_spanish"
        }
      },
      "analyzer": {
        "spanish": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "spanish_stop",
            "spanish_keywords",
            "spanish_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO112-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO112-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="swedish-analyzer"></a><code class="literal">swedish</code> analyzer</h4></div></div></div><p>The <code class="literal">swedish</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "swedish_stop": {
          "type":       "stop",
          "stopwords":  "_swedish_" <a id="CO113-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "swedish_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO113-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "swedish_stemmer": {
          "type":       "stemmer",
          "language":   "swedish"
        }
      },
      "analyzer": {
        "swedish": {
          "tokenizer":  "standard",
          "filter": [
            "lowercase",
            "swedish_stop",
            "swedish_keywords",
            "swedish_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO113-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO113-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="turkish-analyzer"></a><code class="literal">turkish</code> analyzer</h4></div></div></div><p>The <code class="literal">turkish</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "turkish_stop": {
          "type":       "stop",
          "stopwords":  "_turkish_" <a id="CO114-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        },
        "turkish_lowercase": {
          "type":       "lowercase",
          "language":   "turkish"
        },
        "turkish_keywords": {
          "type":       "keyword_marker",
          "keywords":   [] <a id="CO114-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        },
        "turkish_stemmer": {
          "type":       "stemmer",
          "language":   "turkish"
        }
      },
      "analyzer": {
        "turkish": {
          "tokenizer":  "standard",
          "filter": [
            "apostrophe",
            "turkish_lowercase",
            "turkish_stop",
            "turkish_keywords",
            "turkish_stemmer"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO114-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr><tr><td width="5%" valign="top" align="left"><p><a href="#CO114-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This filter should be removed unless there are words which should
    be excluded from stemming.
</p></td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h4 class="title"><a id="thai-analyzer"></a><code class="literal">thai</code> analyzer</h4></div></div></div><p>The <code class="literal">thai</code> analyzer could be reimplemented as a <code class="literal">custom</code> analyzer as follows:</p><div class="pre_wrapper"><pre class="programlisting">{
  "settings": {
    "analysis": {
      "filter": {
        "thai_stop": {
          "type":       "stop",
          "stopwords":  "_thai_" <a id="CO115-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        }
      },
      "analyzer": {
        "thai": {
          "tokenizer":  "thai",
          "filter": [
            "lowercase",
            "thai_stop"
          ]
        }
      }
    }
  }
}</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO115-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
The default stopwords can be overridden with the <code class="literal">stopwords</code>
    or <code class="literal">stopwords_path</code> parameters.
</p></td></tr></tbody></table></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-analyzers.html">Analyzers</a></span>  <span class="breadcrumb-node">Snowball Analyzer</span></div><div class="navheader"><span class="prev"><a href="analysis-lang-analyzer.html">
              &nbsp;
              Language Analyzers</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-custom-analyzer.html">Custom Analyzer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-snowball-analyzer"></a>Snowball Analyzer</h2></div></div></div><p>An analyzer of type <code class="literal">snowball</code> that uses the
<a class="link" href="analysis-standard-tokenizer.html" title="Standard Tokenizer">standard tokenizer</a>, with
<a class="link" href="analysis-standard-tokenfilter.html" title="Standard Token Filter">standard filter</a>,
<a class="link" href="analysis-lowercase-tokenfilter.html" title="Lowercase Token Filter">lowercase filter</a>,
<a class="link" href="analysis-stop-tokenfilter.html" title="Stop Token Filter">stop filter</a>, and
<a class="link" href="analysis-snowball-tokenfilter.html" title="Snowball Token Filter">snowball filter</a>.</p><p>The Snowball Analyzer is a stemming analyzer from Lucene that is
originally based on the snowball project from
<a class="ulink" href="http://snowball.tartarus.org" target="_top">snowball.tartarus.org</a>.</p><p>Sample usage:</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "analyzer" : {
                "my_analyzer" : {
                    "type" : "snowball",
                    "language" : "English"
                }
            }
        }
    }
}</pre></div><p>The <code class="literal">language</code> parameter can have the same values as the
<a class="link" href="analysis-snowball-tokenfilter.html" title="Snowball Token Filter">snowball filter</a> and defaults to <code class="literal">English</code>. Note that not all the language
analyzers have a default set of stopwords provided.</p><p>The <code class="literal">stopwords</code> parameter can be used to provide stopwords for the
languages that have no defaults, or to simply replace the default set
with your custom list. Check <a class="link" href="analysis-stop-analyzer.html" title="Stop Analyzer">Stop Analyzer</a>
for more details. A default set of stopwords for many of these
languages is available from for instance
<a class="ulink" href="https://github.com/apache/lucene-solr/tree/trunk/lucene/analysis/common/src/resources/org/apache/lucene/analysis/" target="_top">here</a>
and
<a class="ulink" href="https://github.com/apache/lucene-solr/tree/trunk/lucene/analysis/common/src/resources/org/apache/lucene/analysis/snowball" target="_top">here.</a></p><p>A sample configuration (in YAML format) specifying Swedish with
stopwords:</p><div class="pre_wrapper"><pre class="programlisting">index :
    analysis :
        analyzer :
           my_analyzer:
                type: snowball
                language: Swedish
                stopwords: "och,det,att,i,en,jag,hon,som,han,p,den,med,var,sig,fr,s,till,r,men,ett,om,hade,de,av,icke,mig,du,henne,d,sin,nu,har,inte,hans,honom,skulle,hennes,dr,min,man,ej,vid,kunde,ngot,frn,ut,nr,efter,upp,vi,dem,vara,vad,ver,n,dig,kan,sina,hr,ha,mot,alla,under,ngon,allt,mycket,sedan,ju,denna,sjlv,detta,t,utan,varit,hur,ingen,mitt,ni,bli,blev,oss,din,dessa,ngra,deras,blir,mina,samma,vilken,er,sdan,vr,blivit,dess,inom,mellan,sdant,varfr,varje,vilka,ditt,vem,vilket,sitta,sdana,vart,dina,vars,vrt,vra,ert,era,vilkas"</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-analyzers.html">Analyzers</a></span>  <span class="breadcrumb-node">Custom Analyzer</span></div><div class="navheader"><span class="prev"><a href="analysis-snowball-analyzer.html">
              &nbsp;
              Snowball Analyzer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-tokenizers.html">Tokenizers
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-custom-analyzer"></a>Custom Analyzer</h2></div></div></div><p>An analyzer of type <code class="literal">custom</code> that allows to combine a <code class="literal">Tokenizer</code> with
zero or more <code class="literal">Token Filters</code>, and zero or more <code class="literal">Char Filters</code>. The
custom analyzer accepts a logical/registered name of the tokenizer to
use, and a list of logical/registered names of token filters.
The name of the custom analyzer must not start with "_".</p><p>The following are settings that can be set for a <code class="literal">custom</code> analyzer type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">tokenizer</code></p></td><td class="entry" align="left" valign="top"><p>The logical / registered name of the tokenizer to use.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">filter</code></p></td><td class="entry" align="left" valign="top"><p>An optional list of logical / registered name of token
filters.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">char_filter</code></p></td><td class="entry" align="left" valign="top"><p>An optional list of logical / registered name of char
filters.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">position_offset_gap</code></p></td><td class="entry" align="left" valign="top"><p>An optional number of positions to increment
between each field value of a field using this analyzer.</p></td></tr></tbody></table></div><p>Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">index :
    analysis :
        analyzer :
            myAnalyzer2 :
                type : custom
                tokenizer : myTokenizer1
                filter : [myTokenFilter1, myTokenFilter2]
                char_filter : [my_html]
                position_offset_gap: 256
        tokenizer :
            myTokenizer1 :
                type : standard
                max_token_length : 900
        filter :
            myTokenFilter1 :
                type : stop
                stopwords : [stop1, stop2, stop3, stop4]
            myTokenFilter2 :
                type : length
                min : 0
                max : 2000
        char_filter :
              my_html :
                type : html_strip
                escaped_tags : [xxx, yyy]
                read_ahead : 1024</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-node">Tokenizers</span></div><div class="navheader"><span class="prev"><a href="analysis-custom-analyzer.html">
              &nbsp;
              Custom Analyzer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-standard-tokenizer.html">Standard Tokenizer
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-tokenizers"></a>Tokenizers</h2></div></div></div><p>Tokenizers are used to break a string down into a stream of terms
or tokens. A simple tokenizer might split the string up into terms
wherever it encounters whitespace or punctuation.</p><p>Elasticsearch has a number of built in tokenizers which can be
used to build <a class="link" href="analysis-custom-analyzer.html" title="Custom Analyzer">custom analyzers</a>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenizers.html">Tokenizers</a></span>  <span class="breadcrumb-node">Standard Tokenizer</span></div><div class="navheader"><span class="prev"><a href="analysis-tokenizers.html">
              &nbsp;
              Tokenizers</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-edgengram-tokenizer.html">Edge NGram Tokenizer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-standard-tokenizer"></a>Standard Tokenizer</h2></div></div></div><p>A tokenizer of type <code class="literal">standard</code> providing grammar based tokenizer that is
a good tokenizer for most European language documents. The tokenizer
implements the Unicode Text Segmentation algorithm, as specified in
<a class="ulink" href="http://unicode.org/reports/tr29/" target="_top">Unicode Standard Annex #29</a>.</p><p>The following are settings that can be set for a <code class="literal">standard</code> tokenizer
type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">max_token_length</code></p></td><td class="entry" align="left" valign="top"><p>The maximum token length. If a token is seen that
exceeds this length then it is split at <code class="literal">max_token_length</code> intervals. Defaults to <code class="literal">255</code>.</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenizers.html">Tokenizers</a></span>  <span class="breadcrumb-node">Edge NGram Tokenizer</span></div><div class="navheader"><span class="prev"><a href="analysis-standard-tokenizer.html">
              &nbsp;
              Standard Tokenizer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-keyword-tokenizer.html">Keyword Tokenizer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-edgengram-tokenizer"></a>Edge NGram Tokenizer</h2></div></div></div><p>A tokenizer of type <code class="literal">edgeNGram</code>.</p><p>This tokenizer is very similar to <code class="literal">nGram</code> but only keeps n-grams which
start at the beginning of a token.</p><p>The following are settings that can be set for a <code class="literal">edgeNGram</code> tokenizer
type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description </th><th class="entry" align="left" valign="top">Default value</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">min_gram</code></p></td><td class="entry" align="left" valign="top"><p>Minimum size in codepoints of a single n-gram</p></td><td class="entry" align="left" valign="top"><p><code class="literal">1</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">max_gram</code></p></td><td class="entry" align="left" valign="top"><p>Maximum size in codepoints of a single n-gram</p></td><td class="entry" align="left" valign="top"><p><code class="literal">2</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">token_chars</code></p></td><td class="entry" align="left" valign="top"><p>Characters classes to keep in the
tokens, Elasticsearch will split on characters that dont belong to any
of these classes.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">[]</code> (Keep all characters)</p></td></tr></tbody></table></div><p><code class="literal">token_chars</code> accepts the following character classes:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">letter</code>
</p>
</td><td class="entry" valign="top">
<p>
for example <code class="literal">a</code>, <code class="literal">b</code>, <code class="literal"></code> or <code class="literal"></code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">digit</code>
</p>
</td><td class="entry" valign="top">
<p>
for example <code class="literal">3</code> or <code class="literal">7</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">whitespace</code>
</p>
</td><td class="entry" valign="top">
<p>
for example <code class="literal">" "</code> or <code class="literal">"\n"</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">punctuation</code>
</p>
</td><td class="entry" valign="top">
<p>
for example <code class="literal">!</code> or <code class="literal">"</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">symbol</code>
</p>
</td><td class="entry" valign="top">
<p>
for example <code class="literal">$</code> or <code class="literal"></code>
</p>
</td></tr></tbody></table></div><h4><a id="_example_6"></a>Example</h4><div class="pre_wrapper"><pre class="programlisting">    curl -XPUT 'localhost:9200/test' -d '
    {
        "settings" : {
            "analysis" : {
                "analyzer" : {
                    "my_edge_ngram_analyzer" : {
                        "tokenizer" : "my_edge_ngram_tokenizer"
                    }
                },
                "tokenizer" : {
                    "my_edge_ngram_tokenizer" : {
                        "type" : "edgeNGram",
                        "min_gram" : "2",
                        "max_gram" : "5",
                        "token_chars": [ "letter", "digit" ]
                    }
                }
            }
        }
    }'

    curl 'localhost:9200/test/_analyze?pretty=1&amp;analyzer=my_edge_ngram_analyzer' -d 'FC Schalke 04'
    # FC, Sc, Sch, Scha, Schal, 04</pre></div><h4><a id="_literal_side_literal_deprecated"></a><code class="literal">side</code> deprecated</h4><p>There used to be a <code class="literal">side</code> parameter up to <code class="literal">0.90.1</code> but it is now deprecated. In
order to emulate the behavior of <code class="literal">"side" : "BACK"</code> a
<a class="link" href="analysis-reverse-tokenfilter.html" title="Reverse Token Filter"><code class="literal">reverse</code> token filter</a>  should be used together
with the <a class="link" href="analysis-edgengram-tokenfilter.html" title="Edge NGram Token Filter"><code class="literal">edgeNGram</code> token filter</a>. The
<code class="literal">edgeNGram</code> filter must be enclosed in <code class="literal">reverse</code> filters like this:</p><div class="pre_wrapper"><pre class="programlisting">    "filter" : ["reverse", "edgeNGram", "reverse"]</pre></div><p>which essentially reverses the token, builds front <code class="literal">EdgeNGrams</code> and reverses
the ngram again. This has the same effect as the previous <code class="literal">"side" : "BACK"</code> setting.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenizers.html">Tokenizers</a></span>  <span class="breadcrumb-node">Keyword Tokenizer</span></div><div class="navheader"><span class="prev"><a href="analysis-edgengram-tokenizer.html">
              &nbsp;
              Edge NGram Tokenizer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-letter-tokenizer.html">Letter Tokenizer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-keyword-tokenizer"></a>Keyword Tokenizer</h2></div></div></div><p>A tokenizer of type <code class="literal">keyword</code> that emits the entire input as a single
output.</p><p>The following are settings that can be set for a <code class="literal">keyword</code> tokenizer
type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">buffer_size</code></p></td><td class="entry" align="left" valign="top"><p>The term buffer size. Defaults to <code class="literal">256</code>.</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenizers.html">Tokenizers</a></span>  <span class="breadcrumb-node">Letter Tokenizer</span></div><div class="navheader"><span class="prev"><a href="analysis-keyword-tokenizer.html">
              &nbsp;
              Keyword Tokenizer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-lowercase-tokenizer.html">Lowercase Tokenizer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-letter-tokenizer"></a>Letter Tokenizer</h2></div></div></div><p>A tokenizer of type <code class="literal">letter</code> that divides text at non-letters. Thats to
say, it defines tokens as maximal strings of adjacent letters. Note,
this does a decent job for most European languages, but does a terrible
job for some Asian languages, where words are not separated by spaces.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenizers.html">Tokenizers</a></span>  <span class="breadcrumb-node">Lowercase Tokenizer</span></div><div class="navheader"><span class="prev"><a href="analysis-letter-tokenizer.html">
              &nbsp;
              Letter Tokenizer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-ngram-tokenizer.html">NGram Tokenizer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-lowercase-tokenizer"></a>Lowercase Tokenizer</h2></div></div></div><p>A tokenizer of type <code class="literal">lowercase</code> that performs the function of
<a class="link" href="analysis-letter-tokenizer.html" title="Letter Tokenizer">Letter Tokenizer</a> and
<a class="link" href="analysis-lowercase-tokenfilter.html" title="Lowercase Token Filter">Lower Case Token Filter</a> together. It divides text at non-letters and converts
them to lower case. While it is functionally equivalent to the
combination of
<a class="link" href="analysis-letter-tokenizer.html" title="Letter Tokenizer">Letter Tokenizer</a> and
<a class="link" href="analysis-lowercase-tokenfilter.html" title="Lowercase Token Filter">Lower Case Token Filter</a>, there is a performance advantage to doing the two
tasks at once, hence this (redundant) implementation.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenizers.html">Tokenizers</a></span>  <span class="breadcrumb-node">NGram Tokenizer</span></div><div class="navheader"><span class="prev"><a href="analysis-lowercase-tokenizer.html">
              &nbsp;
              Lowercase Tokenizer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-whitespace-tokenizer.html">Whitespace Tokenizer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-ngram-tokenizer"></a>NGram Tokenizer</h2></div></div></div><p>A tokenizer of type <code class="literal">nGram</code>.</p><p>The following are settings that can be set for a <code class="literal">nGram</code> tokenizer type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description </th><th class="entry" align="left" valign="top">Default value</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">min_gram</code></p></td><td class="entry" align="left" valign="top"><p>Minimum size in codepoints of a single n-gram</p></td><td class="entry" align="left" valign="top"><p><code class="literal">1</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">max_gram</code></p></td><td class="entry" align="left" valign="top"><p>Maximum size in codepoints of a single n-gram</p></td><td class="entry" align="left" valign="top"><p><code class="literal">2</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">token_chars</code></p></td><td class="entry" align="left" valign="top"><p>Characters classes to keep in the
tokens, Elasticsearch will split on characters that dont belong to any
of these classes.</p></td><td class="entry" align="left" valign="top"><p><code class="literal">[]</code> (Keep all characters)</p></td></tr></tbody></table></div><p><code class="literal">token_chars</code> accepts the following character classes:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">letter</code>
</p>
</td><td class="entry" valign="top">
<p>
for example <code class="literal">a</code>, <code class="literal">b</code>, <code class="literal"></code> or <code class="literal"></code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">digit</code>
</p>
</td><td class="entry" valign="top">
<p>
for example <code class="literal">3</code> or <code class="literal">7</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">whitespace</code>
</p>
</td><td class="entry" valign="top">
<p>
for example <code class="literal">" "</code> or <code class="literal">"\n"</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">punctuation</code>
</p>
</td><td class="entry" valign="top">
<p>
for example <code class="literal">!</code> or <code class="literal">"</code>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">symbol</code>
</p>
</td><td class="entry" valign="top">
<p>
for example <code class="literal">$</code> or <code class="literal"></code>
</p>
</td></tr></tbody></table></div><h4><a id="_example_7"></a>Example</h4><div class="pre_wrapper"><pre class="programlisting">    curl -XPUT 'localhost:9200/test' -d '
    {
        "settings" : {
            "analysis" : {
                "analyzer" : {
                    "my_ngram_analyzer" : {
                        "tokenizer" : "my_ngram_tokenizer"
                    }
                },
                "tokenizer" : {
                    "my_ngram_tokenizer" : {
                        "type" : "nGram",
                        "min_gram" : "2",
                        "max_gram" : "3",
                        "token_chars": [ "letter", "digit" ]
                    }
                }
            }
        }
    }'

    curl 'localhost:9200/test/_analyze?pretty=1&amp;analyzer=my_ngram_analyzer' -d 'FC Schalke 04'
    # FC, Sc, Sch, ch, cha, ha, hal, al, alk, lk, lke, ke, 04</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenizers.html">Tokenizers</a></span>  <span class="breadcrumb-node">Whitespace Tokenizer</span></div><div class="navheader"><span class="prev"><a href="analysis-ngram-tokenizer.html">
              &nbsp;
              NGram Tokenizer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-pattern-tokenizer.html">Pattern Tokenizer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-whitespace-tokenizer"></a>Whitespace Tokenizer</h2></div></div></div><p>A tokenizer of type <code class="literal">whitespace</code> that divides text at whitespace.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenizers.html">Tokenizers</a></span>  <span class="breadcrumb-node">Pattern Tokenizer</span></div><div class="navheader"><span class="prev"><a href="analysis-whitespace-tokenizer.html">
              &nbsp;
              Whitespace Tokenizer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-uaxurlemail-tokenizer.html">UAX Email URL Tokenizer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-pattern-tokenizer"></a>Pattern Tokenizer</h2></div></div></div><p>A tokenizer of type <code class="literal">pattern</code> that can flexibly separate text into terms
via a regular expression. Accepts the following settings:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">pattern</code></p></td><td class="entry" align="left" valign="top"><p>The regular expression pattern, defaults to <code class="literal">\W+</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">flags</code></p></td><td class="entry" align="left" valign="top"><p>The regular expression flags.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">group</code></p></td><td class="entry" align="left" valign="top"><p>Which group to extract into tokens. Defaults to <code class="literal">-1</code> (split).</p></td></tr></tbody></table></div><p><span class="strong emphasis"><strong>IMPORTANT</strong></span>: The regular expression should match the <span class="strong emphasis"><strong>token separators</strong></span>,
not the tokens themselves.</p><div class="sidebar"><div class="titlepage"></div><p>Note that you may need to escape <code class="literal">pattern</code> string literal according to
your client language rules. For example, in many programming languages
a string literal for <code class="literal">\W+</code> pattern is written as <code class="literal">"\\W+"</code>.
There is nothing special about <code class="literal">pattern</code> (you may have to escape other
string literals as well); escaping <code class="literal">pattern</code> is common just because it
often contains characters that should be escaped.</p></div><p><code class="literal">group</code> set to <code class="literal">-1</code> (the default) is equivalent to "split". Using group
&gt;= 0 selects the matching group as the token. For example, if you have:</p><pre class="screen">pattern = '([^']+)'
group   = 0
input   = aaa 'bbb' 'ccc'</pre><p>the output will be two tokens: <code class="literal">'bbb'</code> and <code class="literal">'ccc'</code> (including the <code class="literal">'</code>
marks). With the same input but using group=1, the output would be:
<code class="literal">bbb</code> and <code class="literal">ccc</code> (no <code class="literal">'</code> marks).</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenizers.html">Tokenizers</a></span>  <span class="breadcrumb-node">UAX Email URL Tokenizer</span></div><div class="navheader"><span class="prev"><a href="analysis-pattern-tokenizer.html">
              &nbsp;
              Pattern Tokenizer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-pathhierarchy-tokenizer.html">Path Hierarchy Tokenizer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-uaxurlemail-tokenizer"></a>UAX Email URL Tokenizer</h2></div></div></div><p>A tokenizer of type <code class="literal">uax_url_email</code> which works exactly like the
<code class="literal">standard</code> tokenizer, but tokenizes emails and urls as single tokens.</p><p>The following are settings that can be set for a <code class="literal">uax_url_email</code>
tokenizer type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">max_token_length</code></p></td><td class="entry" align="left" valign="top"><p>The maximum token length. If a token is seen that
exceeds this length then it is discarded. Defaults to <code class="literal">255</code>.</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenizers.html">Tokenizers</a></span>  <span class="breadcrumb-node">Path Hierarchy Tokenizer</span></div><div class="navheader"><span class="prev"><a href="analysis-uaxurlemail-tokenizer.html">
              &nbsp;
              UAX Email URL Tokenizer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-classic-tokenizer.html">Classic Tokenizer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-pathhierarchy-tokenizer"></a>Path Hierarchy Tokenizer</h2></div></div></div><p>The <code class="literal">path_hierarchy</code> tokenizer takes something like this:</p><pre class="screen">/something/something/else</pre><p>And produces tokens:</p><pre class="screen">/something
/something/something
/something/something/else</pre><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">delimiter</code></p></td><td class="entry" align="left" valign="top"><p>The character delimiter to use, defaults to <code class="literal">/</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">replacement</code></p></td><td class="entry" align="left" valign="top"><p>An optional replacement character to use. Defaults to
the <code class="literal">delimiter</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">buffer_size</code></p></td><td class="entry" align="left" valign="top"><p>The buffer size to use, defaults to <code class="literal">1024</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">reverse</code></p></td><td class="entry" align="left" valign="top"><p>Generates tokens in reverse order, defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">skip</code></p></td><td class="entry" align="left" valign="top"><p>Controls initial tokens to skip, defaults to <code class="literal">0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">type</code></p></td><td class="entry" align="left" valign="top"><p>Required.  Must be set to <code class="literal">PathHierarchy</code> (case-sensitive).</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenizers.html">Tokenizers</a></span>  <span class="breadcrumb-node">Classic Tokenizer</span></div><div class="navheader"><span class="prev"><a href="analysis-pathhierarchy-tokenizer.html">
              &nbsp;
              Path Hierarchy Tokenizer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-thai-tokenizer.html">Thai Tokenizer
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-classic-tokenizer"></a>Classic Tokenizer</h2></div></div></div><p>A tokenizer of type <code class="literal">classic</code> providing grammar based tokenizer that is
a good tokenizer for English language documents. This tokenizer has
heuristics for special treatment of acronyms, company names, email addresses,
and internet host names. However, these rules dont always work, and
the tokenizer doesnt work well for most languages other than English.</p><p>The following are settings that can be set for a <code class="literal">classic</code> tokenizer
type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">max_token_length</code></p></td><td class="entry" align="left" valign="top"><p>The maximum token length. If a token is seen that
exceeds this length then it is discarded. Defaults to <code class="literal">255</code>.</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenizers.html">Tokenizers</a></span>  <span class="breadcrumb-node">Thai Tokenizer</span></div><div class="navheader"><span class="prev"><a href="analysis-classic-tokenizer.html">
              &nbsp;
              Classic Tokenizer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-tokenfilters.html">Token Filters
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-thai-tokenizer"></a>Thai Tokenizer</h2></div></div></div><p>A tokenizer of type <code class="literal">thai</code> that segments Thai text into words. This tokenizer
uses the built-in Thai segmentation algorithm included with Java to divide
up Thai text. Text in other languages in general will be treated the same
as <code class="literal">standard</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-node">Token Filters</span></div><div class="navheader"><span class="prev"><a href="analysis-thai-tokenizer.html">
              &nbsp;
              Thai Tokenizer</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-standard-tokenfilter.html">Standard Token Filter
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-tokenfilters"></a>Token Filters</h2></div></div></div><p>Token filters accept a stream of tokens from a
<a class="link" href="analysis-tokenizers.html" title="Tokenizers">tokenizer</a> and can modify tokens
(eg lowercasing), delete tokens (eg remove stopwords)
or add tokens (eg synonyms).</p><p>Elasticsearch has a number of built in token filters which can be
used to build <a class="link" href="analysis-custom-analyzer.html" title="Custom Analyzer">custom analyzers</a>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Standard Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-tokenfilters.html">
              &nbsp;
              Token Filters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-asciifolding-tokenfilter.html">ASCII Folding Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-standard-tokenfilter"></a>Standard Token Filter</h2></div></div></div><p>A token filter of type <code class="literal">standard</code> that normalizes tokens extracted with
the
<a class="link" href="analysis-standard-tokenizer.html" title="Standard Tokenizer">Standard Tokenizer</a>.</p><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>The <code class="literal">standard</code> token filter currently does nothing.  It remains as a placeholder
in case some filtering function needs to be added in a future version.</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">ASCII Folding Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-standard-tokenfilter.html">
              &nbsp;
              Standard Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-length-tokenfilter.html">Length Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-asciifolding-tokenfilter"></a>ASCII Folding Token Filter</h2></div></div></div><p>A token filter of type <code class="literal">asciifolding</code> that converts alphabetic, numeric,
and symbolic Unicode characters which are not in the first 127 ASCII
characters (the "Basic Latin" Unicode block) into their ASCII
equivalents, if one exists.  Example:</p><div class="pre_wrapper"><pre class="programlisting">"index" : {
    "analysis" : {
        "analyzer" : {
            "default" : {
                "tokenizer" : "standard",
                "filter" : ["standard", "asciifolding"]
            }
        }
    }
}</pre></div><p>Accepts <code class="literal">preserve_original</code> setting which defaults to false but if true
will keep the original token as well as emit the folded token.  For
example:</p><div class="pre_wrapper"><pre class="programlisting">"index" : {
    "analysis" : {
        "analyzer" : {
            "default" : {
                "tokenizer" : "standard",
                "filter" : ["standard", "my_ascii_folding"]
            }
        },
        "filter" : {
            "my_ascii_folding" : {
                "type" : "asciifolding",
                "preserve_original" : true
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Length Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-asciifolding-tokenfilter.html">
              &nbsp;
              ASCII Folding Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-lowercase-tokenfilter.html">Lowercase Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-length-tokenfilter"></a>Length Token Filter</h2></div></div></div><p>A token filter of type <code class="literal">length</code> that removes words that are too long or
too short for the stream.</p><p>The following are settings that can be set for a <code class="literal">length</code> token filter
type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">min</code></p></td><td class="entry" align="left" valign="top"><p>The minimum number. Defaults to <code class="literal">0</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">max</code></p></td><td class="entry" align="left" valign="top"><p>The maximum number. Defaults to <code class="literal">Integer.MAX_VALUE</code>.</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Lowercase Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-length-tokenfilter.html">
              &nbsp;
              Length Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-uppercase-tokenfilter.html">Uppercase Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-lowercase-tokenfilter"></a>Lowercase Token Filter</h2></div></div></div><p>A token filter of type <code class="literal">lowercase</code> that normalizes token text to lower
case.</p><p>Lowercase token filter supports Greek, Irish, and Turkish lowercase token
filters through the <code class="literal">language</code> parameter. Below is a usage example in a
custom analyzer</p><div class="pre_wrapper"><pre class="programlisting">index :
    analysis :
        analyzer :
            myAnalyzer2 :
                type : custom
                tokenizer : myTokenizer1
                filter : [myTokenFilter1, myGreekLowerCaseFilter]
                char_filter : [my_html]
        tokenizer :
            myTokenizer1 :
                type : standard
                max_token_length : 900
        filter :
            myTokenFilter1 :
                type : stop
                stopwords : [stop1, stop2, stop3, stop4]
            myGreekLowerCaseFilter :
                type : lowercase
                language : greek
        char_filter :
              my_html :
                type : html_strip
                escaped_tags : [xxx, yyy]
                read_ahead : 1024</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Uppercase Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-lowercase-tokenfilter.html">
              &nbsp;
              Lowercase Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-ngram-tokenfilter.html">NGram Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-uppercase-tokenfilter"></a>Uppercase Token Filter</h2></div></div></div><p>A token filter of type <code class="literal">uppercase</code> that normalizes token text to upper
case.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">NGram Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-uppercase-tokenfilter.html">
              &nbsp;
              Uppercase Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-edgengram-tokenfilter.html">Edge NGram Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-ngram-tokenfilter"></a>NGram Token Filter</h2></div></div></div><p>A token filter of type <code class="literal">nGram</code>.</p><p>The following are settings that can be set for a <code class="literal">nGram</code> token filter
type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">min_gram</code></p></td><td class="entry" align="left" valign="top"><p>Defaults to <code class="literal">1</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">max_gram</code></p></td><td class="entry" align="left" valign="top"><p>Defaults to <code class="literal">2</code>.</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Edge NGram Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-ngram-tokenfilter.html">
              &nbsp;
              NGram Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-porterstem-tokenfilter.html">Porter Stem Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-edgengram-tokenfilter"></a>Edge NGram Token Filter</h2></div></div></div><p>A token filter of type <code class="literal">edgeNGram</code>.</p><p>The following are settings that can be set for a <code class="literal">edgeNGram</code> token
filter type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">min_gram</code></p></td><td class="entry" align="left" valign="top"><p>Defaults to <code class="literal">1</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">max_gram</code></p></td><td class="entry" align="left" valign="top"><p>Defaults to <code class="literal">2</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">side</code></p></td><td class="entry" align="left" valign="top"><p>Either <code class="literal">front</code> or <code class="literal">back</code>. Defaults to <code class="literal">front</code>.</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Porter Stem Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-edgengram-tokenfilter.html">
              &nbsp;
              Edge NGram Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-shingle-tokenfilter.html">Shingle Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-porterstem-tokenfilter"></a>Porter Stem Token Filter</h2></div></div></div><p>A token filter of type <code class="literal">porter_stem</code> that transforms the token stream as
per the Porter stemming algorithm.</p><p>Note, the input to the stemming filter must already be in lower case, so
you will need to use
<a class="link" href="analysis-lowercase-tokenfilter.html" title="Lowercase Token Filter">Lower Case Token Filter</a> or
<a class="link" href="analysis-lowercase-tokenizer.html" title="Lowercase Tokenizer">Lower Case Tokenizer</a> farther down the Tokenizer chain in order for this to
work properly!. For example, when using custom analyzer, make sure the
<code class="literal">lowercase</code> filter comes before the <code class="literal">porter_stem</code> filter in the list of
filters.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Shingle Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-porterstem-tokenfilter.html">
              &nbsp;
              Porter Stem Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-stop-tokenfilter.html">Stop Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-shingle-tokenfilter"></a>Shingle Token Filter</h2></div></div></div><p>A token filter of type <code class="literal">shingle</code> that constructs shingles (token
n-grams) from a token stream. In other words, it creates combinations of
tokens as a single token. For example, the sentence "please divide this
sentence into shingles" might be tokenized into shingles "please
divide", "divide this", "this sentence", "sentence into", and "into
shingles".</p><p>This filter handles position increments &gt; 1 by inserting filler tokens
(tokens with termtext "_"). It does not handle a position increment of
0.</p><p>The following are settings that can be set for a <code class="literal">shingle</code> token filter
type:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">max_shingle_size</code></p></td><td class="entry" align="left" valign="top"><p>The maximum shingle size. Defaults to <code class="literal">2</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">min_shingle_size</code></p></td><td class="entry" align="left" valign="top"><p>The minimum shingle size. Defaults to <code class="literal">2</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">output_unigrams</code></p></td><td class="entry" align="left" valign="top"><p>If <code class="literal">true</code> the output will contain the input tokens
(unigrams) as well as the shingles. Defaults to <code class="literal">true</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">output_unigrams_if_no_shingles</code></p></td><td class="entry" align="left" valign="top"><p>If <code class="literal">output_unigrams</code> is <code class="literal">false</code> the
output will contain the input tokens (unigrams) if no shingles are
available. Note if <code class="literal">output_unigrams</code> is set to <code class="literal">true</code> this setting has
no effect. Defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">token_separator</code></p></td><td class="entry" align="left" valign="top"><p>The string to use when joining adjacent tokens to
form a shingle. Defaults to <code class="literal">" "</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">filler_token</code></p></td><td class="entry" align="left" valign="top"><p>The string to use as a replacement for each position
at which there is no actual token in the stream. For instance this string is
used if the position increment is greater than one when a <code class="literal">stop</code> filter is used
together with the <code class="literal">shingle</code> filter. Defaults to <code class="literal">"_"</code></p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Stop Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-shingle-tokenfilter.html">
              &nbsp;
              Shingle Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-word-delimiter-tokenfilter.html">Word Delimiter Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-stop-tokenfilter"></a>Stop Token Filter</h2></div></div></div><p>A token filter of type <code class="literal">stop</code> that removes stop words from token
streams.</p><p>The following are settings that can be set for a <code class="literal">stop</code> token filter
type:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">stopwords</code>
</p>
</td><td class="entry" valign="top">
<p>
    A list of stop words to use. Defaults to <code class="literal">_english_</code> stop words.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">stopwords_path</code>
</p>
</td><td class="entry" valign="top">
<p>
    A path (either relative to <code class="literal">config</code> location, or absolute) to a stopwords
    file configuration. Each stop word should be in its own "line" (separated
    by a line break). The file must be UTF-8 encoded.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">ignore_case</code>
</p>
</td><td class="entry" valign="top">
<p>
    Set to <code class="literal">true</code> to lower case all words first. Defaults to <code class="literal">false</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">remove_trailing</code>
</p>
</td><td class="entry" valign="top">
<p>
    Set to <code class="literal">false</code> in order to not ignore the last term of a search if it is a
    stop word. This is very useful for the completion suggester as a query
    like <code class="literal">green a</code> can be extended to <code class="literal">green apple</code> even though you remove
    stop words in general. Defaults to <code class="literal">true</code>.
</p>
</td></tr></tbody></table></div><p>The <code class="literal">stopwords</code> parameter accepts either an array of stopwords:</p><div class="pre_wrapper"><pre class="programlisting">PUT /my_index
{
    "settings": {
        "analysis": {
            "filter": {
                "my_stop": {
                    "type":       "stop",
                    "stopwords": ["and", "is", "the"]
                }
            }
        }
    }
}</pre></div><p>or a predefined language-specific list:</p><div class="pre_wrapper"><pre class="programlisting">PUT /my_index
{
    "settings": {
        "analysis": {
            "filter": {
                "my_stop": {
                    "type":       "stop",
                    "stopwords":  "_english_"
                }
            }
        }
    }
}</pre></div><p>Elasticsearch provides the following predefined list of languages:</p><p><code class="literal">_arabic_</code>, <code class="literal">_armenian_</code>, <code class="literal">_basque_</code>, <code class="literal">_brazilian_</code>, <code class="literal">_bulgarian_</code>,
<code class="literal">_catalan_</code>, <code class="literal">_czech_</code>, <code class="literal">_danish_</code>, <code class="literal">_dutch_</code>, <code class="literal">_english_</code>, <code class="literal">_finnish_</code>,
<code class="literal">_french_</code>, <code class="literal">_galician_</code>, <code class="literal">_german_</code>, <code class="literal">_greek_</code>, <code class="literal">_hindi_</code>, <code class="literal">_hungarian_</code>,
<code class="literal">_indonesian_</code>, <code class="literal">_irish_</code>, <code class="literal">_italian_</code>, <code class="literal">_latvian_</code>, <code class="literal">_norwegian_</code>, <code class="literal">_persian_</code>,
<code class="literal">_portuguese_</code>, <code class="literal">_romanian_</code>, <code class="literal">_russian_</code>, <code class="literal">_sorani_</code>, <code class="literal">_spanish_</code>,
<code class="literal">_swedish_</code>, <code class="literal">_thai_</code>, <code class="literal">_turkish_</code>.</p><p>For the empty stopwords list (to disable stopwords) use: <code class="literal">_none_</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Word Delimiter Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-stop-tokenfilter.html">
              &nbsp;
              Stop Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-stemmer-tokenfilter.html">Stemmer Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-word-delimiter-tokenfilter"></a>Word Delimiter Token Filter</h2></div></div></div><p>Named <code class="literal">word_delimiter</code>, it Splits words into subwords and performs
optional transformations on subword groups. Words are split into
subwords with the following rules:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
split on intra-word delimiters (by default, all non alpha-numeric
characters).
</li><li class="listitem">
"Wi-Fi"  "Wi", "Fi"
</li><li class="listitem">
split on case transitions: "PowerShot"  "Power", "Shot"
</li><li class="listitem">
split on letter-number transitions: "SD500"  "SD", "500"
</li><li class="listitem">
leading and trailing intra-word delimiters on each subword are
ignored: "//hello---there, <span class="emphasis"><em>dude</em></span>"  "hello", "there", "dude"
</li><li class="listitem">
trailing "'s" are removed for each subword: "ONeils"  "O", "Neil"
</li></ul></div><p>Parameters include:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">generate_word_parts</code>
</span></dt><dd>
    If <code class="literal">true</code> causes parts of words to be
    generated: "PowerShot"  "Power" "Shot". Defaults to <code class="literal">true</code>.
</dd><dt><span class="term">
<code class="literal">generate_number_parts</code>
</span></dt><dd>
    If <code class="literal">true</code> causes number subwords to be
    generated: "500-42"  "500" "42". Defaults to <code class="literal">true</code>.
</dd><dt><span class="term">
<code class="literal">catenate_words</code>
</span></dt><dd>
    If <code class="literal">true</code> causes maximum runs of word parts to be
    catenated: "wi-fi"  "wifi". Defaults to <code class="literal">false</code>.
</dd><dt><span class="term">
<code class="literal">catenate_numbers</code>
</span></dt><dd>
    If <code class="literal">true</code> causes maximum runs of number parts to
    be catenated: "500-42"  "50042". Defaults to <code class="literal">false</code>.
</dd><dt><span class="term">
<code class="literal">catenate_all</code>
</span></dt><dd>
    If <code class="literal">true</code> causes all subword parts to be catenated:
    "wi-fi-4000"  "wifi4000". Defaults to <code class="literal">false</code>.
</dd><dt><span class="term">
<code class="literal">split_on_case_change</code>
</span></dt><dd>
    If <code class="literal">true</code> causes "PowerShot" to be two tokens;
    ("Power-Shot" remains two parts regards). Defaults to <code class="literal">true</code>.
</dd><dt><span class="term">
<code class="literal">preserve_original</code>
</span></dt><dd>
    If <code class="literal">true</code> includes original words in subwords:
    "500-42"  "500-42" "500" "42". Defaults to <code class="literal">false</code>.
</dd><dt><span class="term">
<code class="literal">split_on_numerics</code>
</span></dt><dd>
    If <code class="literal">true</code> causes "j2se" to be three tokens; "j"
    "2" "se". Defaults to <code class="literal">true</code>.
</dd><dt><span class="term">
<code class="literal">stem_english_possessive</code>
</span></dt><dd>
    If <code class="literal">true</code> causes trailing "'s" to be
    removed for each subword: "ONeils"  "O", "Neil". Defaults to <code class="literal">true</code>.
</dd></dl></div><p>Advance settings include:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">protected_words</code>
</span></dt><dd>
    A list of protected words from being delimiter.
    Either an array, or also can set <code class="literal">protected_words_path</code> which resolved
    to a file configured with protected words (one on each line).
    Automatically resolves to <code class="literal">config/</code> based location if exists.
</dd><dt><span class="term">
<code class="literal">type_table</code>
</span></dt><dd>
    A custom type mapping table, for example (when configured
    using <code class="literal">type_table_path</code>):
</dd></dl></div><div class="pre_wrapper"><pre class="programlisting">    # Map the $, %, '.', and ',' characters to DIGIT
    # This might be useful for financial data.
    $ =&gt; DIGIT
    % =&gt; DIGIT
    . =&gt; DIGIT
    \\u002C =&gt; DIGIT

    # in some cases you might not want to split on ZWJ
    # this also tests the case where we need a bigger byte[]
    # see http://en.wikipedia.org/wiki/Zero-width_joiner
    \\u200D =&gt; ALPHANUM</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Using a tokenizer like the <code class="literal">standard</code> tokenizer may interfere with
the <code class="literal">catenate_*</code> and <code class="literal">preserve_original</code> parameters, as the original
string may already have lost punctuation during tokenization.  Instead,
you may want to use the <code class="literal">whitespace</code> tokenizer.</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Stemmer Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-word-delimiter-tokenfilter.html">
              &nbsp;
              Word Delimiter Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-stemmer-override-tokenfilter.html">Stemmer Override Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-stemmer-tokenfilter"></a>Stemmer Token Filter</h2></div></div></div><p>A filter that provides access to (almost) all of the available stemming token
filters through a single unified interface. For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "analyzer" : {
                "my_analyzer" : {
                    "tokenizer" : "standard",
                    "filter" : ["standard", "lowercase", "my_stemmer"]
                }
            },
            "filter" : {
                "my_stemmer" : {
                    "type" : "stemmer",
                    "name" : "light_german"
                }
            }
        }
    }
}</pre></div><p>The <code class="literal">language</code>/<code class="literal">name</code> parameter controls the stemmer with the following
available values (the preferred filters are marked in <span class="strong emphasis"><strong>bold</strong></span>):</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
Arabic
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/ar/ArabicStemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">arabic</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Armenian
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/armenian/stemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">armenian</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Basque
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/basque/stemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">basque</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Brazilian Portuguese
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/br/BrazilianStemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">brazilian</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Bulgarian
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://members.unine.ch/jacques.savoy/Papers/BUIR.pdf" target="_top"><span class="strong emphasis"><strong><code class="literal">bulgarian</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Catalan
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/catalan/stemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">catalan</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Czech
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://portal.acm.org/citation.cfm?id=1598600" target="_top"><span class="strong emphasis"><strong><code class="literal">czech</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Danish
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/danish/stemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">danish</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Dutch
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/dutch/stemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">dutch</code></strong></span></a>,
<a class="ulink" href="http://snowball.tartarus.org/algorithms/kraaij_pohlmann/stemmer.html" target="_top"><code class="literal">dutch_kp</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
English
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/porter/stemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">english</code></strong></span></a>,
<a class="ulink" href="http://ciir.cs.umass.edu/pubfiles/ir-35.pdf" target="_top"><code class="literal">light_english</code></a>,
<a class="ulink" href="http://www.researchgate.net/publication/220433848_How_effective_is_suffixing" target="_top"><code class="literal">minimal_english</code></a>,
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/en/EnglishPossessiveFilter.html" target="_top"><code class="literal">possessive_english</code></a>,
<a class="ulink" href="http://snowball.tartarus.org/algorithms/english/stemmer.html" target="_top"><code class="literal">porter2</code></a>,
<a class="ulink" href="http://snowball.tartarus.org/algorithms/lovins/stemmer.html" target="_top"><code class="literal">lovins</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Finnish
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/finnish/stemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">finnish</code></strong></span></a>,
<a class="ulink" href="http://clef.isti.cnr.it/2003/WN_web/22.pdf" target="_top"><code class="literal">light_finnish</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
French
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/french/stemmer.html" target="_top"><code class="literal">french</code></a>,
<a class="ulink" href="http://dl.acm.org/citation.cfm?id=1141523" target="_top"><span class="strong emphasis"><strong><code class="literal">light_french</code></strong></span></a>,
<a class="ulink" href="http://dl.acm.org/citation.cfm?id=318984" target="_top"><code class="literal">minimal_french</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Galician
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://bvg.udc.es/recursos_lingua/stemming.jsp" target="_top"><span class="strong emphasis"><strong><code class="literal">galician</code></strong></span></a>,
<a class="ulink" href="http://bvg.udc.es/recursos_lingua/stemming.jsp" target="_top"><code class="literal">minimal_galician</code></a> (Plural step only)
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
German
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/german/stemmer.html" target="_top"><code class="literal">german</code></a>,
<a class="ulink" href="http://snowball.tartarus.org/algorithms/german2/stemmer.html" target="_top"><code class="literal">german2</code></a>,
<a class="ulink" href="http://dl.acm.org/citation.cfm?id=1141523" target="_top"><span class="strong emphasis"><strong><code class="literal">light_german</code></strong></span></a>,
<a class="ulink" href="http://members.unine.ch/jacques.savoy/clef/morpho.pdf" target="_top"><code class="literal">minimal_german</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Greek
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://sais.se/mthprize/2007/ntais2007.pdf" target="_top"><span class="strong emphasis"><strong><code class="literal">greek</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Hindi
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://computing.open.ac.uk/Sites/EACLSouthAsia/Papers/p6-Ramanathan.pdf" target="_top"><span class="strong emphasis"><strong><code class="literal">hindi</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Hungarian
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/hungarian/stemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">hungarian</code></strong></span></a>,
<a class="ulink" href="http://dl.acm.org/citation.cfm?id=1141523&amp;dl=ACM&amp;coll=DL&amp;CFID=179095584&amp;CFTOKEN=80067181" target="_top"><code class="literal">light_hungarian</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Indonesian
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://www.illc.uva.nl/Publications/ResearchReports/MoL-2003-02.text.pdf" target="_top"><span class="strong emphasis"><strong><code class="literal">indonesian</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Irish
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/otherapps/oregan/intro.html" target="_top"><span class="strong emphasis"><strong><code class="literal">irish</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Italian
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/italian/stemmer.html" target="_top"><code class="literal">italian</code></a>,
<a class="ulink" href="http://www.ercim.eu/publication/ws-proceedings/CLEF2/savoy.pdf" target="_top"><span class="strong emphasis"><strong><code class="literal">light_italian</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Kurdish (Sorani)
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/ckb/SoraniStemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">sorani</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Latvian
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/lv/LatvianStemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">latvian</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Norwegian (Bokml)
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/norwegian/stemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">norwegian</code></strong></span></a>,
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/no/NorwegianLightStemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">light_norwegian</code></strong></span></a>,
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/no/NorwegianMinimalStemmer.html" target="_top"><code class="literal">minimal_norwegian</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Norwegian (Nynorsk)
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/no/NorwegianLightStemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">light_nynorsk</code></strong></span></a>,
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/no/NorwegianMinimalStemmer.html" target="_top"><code class="literal">minimal_nynorsk</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Portuguese
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/portuguese/stemmer.html" target="_top"><code class="literal">portuguese</code></a>,
<a class="ulink" href="http://dl.acm.org/citation.cfm?id=1141523&amp;dl=ACM&amp;coll=DL&amp;CFID=179095584&amp;CFTOKEN=80067181" target="_top"><span class="strong emphasis"><strong><code class="literal">light_portuguese</code></strong></span></a>,
<a class="ulink" href="http://www.inf.ufrgs.br/~buriol/papers/Orengo_CLEF07.pdf" target="_top"><code class="literal">minimal_portuguese</code></a>,
<a class="ulink" href="http://www.inf.ufrgs.br/\~viviane/rslp/index.htm" target="_top"><code class="literal">portuguese_rslp</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Romanian
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/romanian/stemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">romanian</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Russian
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/russian/stemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">russian</code></strong></span></a>,
<a class="ulink" href="http://doc.rero.ch/lm.php?url=1000%2C43%2C4%2C20091209094227-CA%2FDolamic_Ljiljana_-_Indexing_and_Searching_Strategies_for_the_Russian_20091209.pdf" target="_top"><code class="literal">light_russian</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Spanish
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/spanish/stemmer.html" target="_top"><code class="literal">spanish</code></a>,
<a class="ulink" href="http://www.ercim.eu/publication/ws-proceedings/CLEF2/savoy.pdf" target="_top"><span class="strong emphasis"><strong><code class="literal">light_spanish</code></strong></span></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Swedish
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/swedish/stemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">swedish</code></strong></span></a>,
<a class="ulink" href="http://clef.isti.cnr.it/2003/WN_web/22.pdf" target="_top"><code class="literal">light_swedish</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Turkish
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://snowball.tartarus.org/algorithms/turkish/stemmer.html" target="_top"><span class="strong emphasis"><strong><code class="literal">turkish</code></strong></span></a>
</p>
</td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Stemmer Override Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-stemmer-tokenfilter.html">
              &nbsp;
              Stemmer Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-keyword-marker-tokenfilter.html">Keyword Marker Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-stemmer-override-tokenfilter"></a>Stemmer Override Token Filter</h2></div></div></div><p>Overrides stemming algorithms, by applying a custom mapping, then
protecting these terms from being modified by stemmers. Must be placed
before any stemming filters.</p><p>Rules are separated by <code class="literal">=&gt;</code></p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">rules</code></p></td><td class="entry" align="left" valign="top"><p>A list of mapping rules to use.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">rules_path</code></p></td><td class="entry" align="left" valign="top"><p>A path (either relative to <code class="literal">config</code> location, or
absolute) to a list of mappings.</p></td></tr></tbody></table></div><p>Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">index :
    analysis :
        analyzer :
            myAnalyzer :
                type : custom
                tokenizer : standard
                filter : [lowercase, custom_stems, porter_stem]
        filter:
            custom_stems:
                type: stemmer_override
                rules_path : analysis/custom_stems.txt</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Keyword Marker Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-stemmer-override-tokenfilter.html">
              &nbsp;
              Stemmer Override Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-keyword-repeat-tokenfilter.html">Keyword Repeat Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-keyword-marker-tokenfilter"></a>Keyword Marker Token Filter</h2></div></div></div><p>Protects words from being modified by stemmers. Must be placed before
any stemming filters.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">keywords</code></p></td><td class="entry" align="left" valign="top"><p>A list of words to use.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">keywords_path</code></p></td><td class="entry" align="left" valign="top"><p>A path (either relative to <code class="literal">config</code> location, or
absolute) to a list of words.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ignore_case</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to lower case all words first. Defaults to
<code class="literal">false</code>.</p></td></tr></tbody></table></div><p>Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">index :
    analysis :
        analyzer :
            myAnalyzer :
                type : custom
                tokenizer : standard
                filter : [lowercase, protwords, porter_stem]
        filter :
            protwords :
                type : keyword_marker
                keywords_path : analysis/protwords.txt</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Keyword Repeat Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-keyword-marker-tokenfilter.html">
              &nbsp;
              Keyword Marker Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-kstem-tokenfilter.html">KStem Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-keyword-repeat-tokenfilter"></a>Keyword Repeat Token Filter</h2></div></div></div><p>The <code class="literal">keyword_repeat</code> token filter Emits each incoming token twice once
as keyword and once as a non-keyword to allow an unstemmed version of a
term to be indexed side by side with the stemmed version of the term.
Given the nature of this filter each token that isnt transformed by a
subsequent stemmer will be indexed twice. Therefore, consider adding a
<code class="literal">unique</code> filter with <code class="literal">only_on_same_position</code> set to <code class="literal">true</code> to drop
unnecessary duplicates.</p><p>Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">index :
    analysis :
        analyzer :
            myAnalyzer :
                type : custom
                tokenizer : standard
                filter : [lowercase, keyword_repeat, porter_stem, unique_stem]
            unique_stem:
                type: unique
                only_on_same_position : true</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">KStem Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-keyword-repeat-tokenfilter.html">
              &nbsp;
              Keyword Repeat Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-snowball-tokenfilter.html">Snowball Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-kstem-tokenfilter"></a>KStem Token Filter</h2></div></div></div><p>The <code class="literal">kstem</code> token filter is a high performance filter for english. All
terms must already be lowercased (use <code class="literal">lowercase</code> filter) for this
filter to work correctly.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Snowball Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-kstem-tokenfilter.html">
              &nbsp;
              KStem Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-phonetic-tokenfilter.html">Phonetic Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-snowball-tokenfilter"></a>Snowball Token Filter</h2></div></div></div><p>A filter that stems words using a Snowball-generated stemmer. The
<code class="literal">language</code> parameter controls the stemmer with the following available
values: <code class="literal">Armenian</code>, <code class="literal">Basque</code>, <code class="literal">Catalan</code>, <code class="literal">Danish</code>, <code class="literal">Dutch</code>, <code class="literal">English</code>,
<code class="literal">Finnish</code>, <code class="literal">French</code>, <code class="literal">German</code>, <code class="literal">German2</code>, <code class="literal">Hungarian</code>, <code class="literal">Italian</code>, <code class="literal">Kp</code>,
<code class="literal">Lovins</code>, <code class="literal">Norwegian</code>, <code class="literal">Porter</code>, <code class="literal">Portuguese</code>, <code class="literal">Romanian</code>, <code class="literal">Russian</code>,
<code class="literal">Spanish</code>, <code class="literal">Swedish</code>, <code class="literal">Turkish</code>.</p><p>For example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "analyzer" : {
                "my_analyzer" : {
                    "tokenizer" : "standard",
                    "filter" : ["standard", "lowercase", "my_snow"]
                }
            },
            "filter" : {
                "my_snow" : {
                    "type" : "snowball",
                    "language" : "Lovins"
                }
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Phonetic Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-snowball-tokenfilter.html">
              &nbsp;
              Snowball Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-synonym-tokenfilter.html">Synonym Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-phonetic-tokenfilter"></a>Phonetic Token Filter</h2></div></div></div><p>The <code class="literal">phonetic</code> token filter is provided as a plugin and located
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-analysis-phonetic" target="_top">here</a>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Synonym Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-phonetic-tokenfilter.html">
              &nbsp;
              Phonetic Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-compound-word-tokenfilter.html">Compound Word Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-synonym-tokenfilter"></a>Synonym Token Filter</h2></div></div></div><p>The <code class="literal">synonym</code> token filter allows to easily handle synonyms during the
analysis process. Synonyms are configured using a configuration file.
Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "analyzer" : {
                "synonym" : {
                    "tokenizer" : "whitespace",
                    "filter" : ["synonym"]
                }
            },
            "filter" : {
                "synonym" : {
                    "type" : "synonym",
                    "synonyms_path" : "analysis/synonym.txt"
                }
            }
        }
    }
}</pre></div><p>The above configures a <code class="literal">synonym</code> filter, with a path of
<code class="literal">analysis/synonym.txt</code> (relative to the <code class="literal">config</code> location). The
<code class="literal">synonym</code> analyzer is then configured with the filter. Additional
settings are: <code class="literal">ignore_case</code> (defaults to <code class="literal">false</code>), and <code class="literal">expand</code>
(defaults to <code class="literal">true</code>).</p><p>The <code class="literal">tokenizer</code> parameter controls the tokenizers that will be used to
tokenize the synonym, and defaults to the <code class="literal">whitespace</code> tokenizer.</p><p>Two synonym formats are supported: Solr, WordNet.</p><h4><a id="_solr_synonyms"></a>Solr synonyms</h4><p>The following is a sample format of the file:</p><div class="pre_wrapper"><pre class="programlisting"># blank lines and lines starting with pound are comments.

#Explicit mappings match any token sequence on the LHS of "=&gt;"
#and replace with all alternatives on the RHS.  These types of mappings
#ignore the expand parameter in the schema.
#Examples:
i-pod, i pod =&gt; ipod,
sea biscuit, sea biscit =&gt; seabiscuit

#Equivalent synonyms may be separated with commas and give
#no explicit mapping.  In this case the mapping behavior will
#be taken from the expand parameter in the schema.  This allows
#the same synonym file to be used in different synonym handling strategies.
#Examples:
ipod, i-pod, i pod
foozball , foosball
universe , cosmos

# If expand==true, "ipod, i-pod, i pod" is equivalent
# to the explicit mapping:
ipod, i-pod, i pod =&gt; ipod, i-pod, i pod
# If expand==false, "ipod, i-pod, i pod" is equivalent
# to the explicit mapping:
ipod, i-pod, i pod =&gt; ipod

#multiple synonym mapping entries are merged.
foo =&gt; foo bar
foo =&gt; baz
#is equivalent to
foo =&gt; foo bar, baz</pre></div><p>You can also define synonyms for the filter directly in the
configuration file (note use of <code class="literal">synonyms</code> instead of <code class="literal">synonyms_path</code>):</p><div class="pre_wrapper"><pre class="programlisting">{
    "filter" : {
        "synonym" : {
            "type" : "synonym",
            "synonyms" : [
                "i-pod, i pod =&gt; ipod",
                "universe, cosmos"
            ]
        }
    }
}</pre></div><p>However, it is recommended to define large synonyms set in a file using
<code class="literal">synonyms_path</code>.</p><h4><a id="_wordnet_synonyms"></a>WordNet synonyms</h4><p>Synonyms based on <a class="ulink" href="http://wordnet.princeton.edu/" target="_top">WordNet</a> format can be
declared using <code class="literal">format</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "filter" : {
        "synonym" : {
            "type" : "synonym",
            "format" : "wordnet",
            "synonyms" : [
                "s(100000001,1,'abstain',v,1,0).",
                "s(100000001,2,'refrain',v,1,0).",
                "s(100000001,3,'desist',v,1,0)."
            ]
        }
    }
}</pre></div><p>Using <code class="literal">synonyms_path</code> to define WordNet synonyms in a file is supported
as well.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Compound Word Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-synonym-tokenfilter.html">
              &nbsp;
              Synonym Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-reverse-tokenfilter.html">Reverse Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-compound-word-tokenfilter"></a>Compound Word Token Filter</h2></div></div></div><p>The <code class="literal">hyphenation_decompounder</code> and <code class="literal">dictionary_decompounder</code> token filters can
decompose compound words found in many German languages into word parts.</p><p>Both token filters require a dictionary of word parts, which can be provided
as:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">word_list</code>
</p>
</td><td class="entry" valign="top">
<p>
An array of words, specified inline in the token filter configuration, or
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">word_list_path</code>
</p>
</td><td class="entry" valign="top">
<p>
The path (either absolute or relative to the <code class="literal">config</code> directory) to a UTF-8
encoded file containing one word per line.
</p>
</td></tr></tbody></table></div><h3><a id="_hyphenation_decompounder"></a>Hyphenation decompounder</h3><p>The <code class="literal">hyphenation_decompounder</code> uses hyphenation grammars to find potential
subwords that are then checked against the word dictionary. The quality of the
output tokens is directly connected to the quality of the grammar file you
use. For languages like German they are quite good.</p><p>XML based hyphenation grammar files can be found in the
<a class="ulink" href="http://offo.sourceforge.net/hyphenation/#FOP+XML+Hyphenation+Patterns" target="_top">Objects For Formatting Objects</a>
(OFFO) Sourceforge project. You can download <a class="ulink" href="http://downloads.sourceforge.net/offo/offo-hyphenation.zip" target="_top">offo-hyphenation.zip</a>
directly and look in the <code class="literal">offo-hyphenation/hyph/</code> directory.
Credits for the hyphenation code go to the Apache FOP project .</p><h3><a id="_dictionary_decompounder"></a>Dictionary decompounder</h3><p>The <code class="literal">dictionary_decompounder</code> uses a brute force approach in conjuction with
only the word dictionary to find subwords in a compound word. It is much
slower than the hyphenation decompounder but can be used as a first start to
check the quality of your dictionary.</p><h3><a id="_compound_token_filter_parameters"></a>Compound token filter parameters</h3><p>The following parameters can be used to configure a compound word token
filter:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">type</code>
</p>
</td><td class="entry" valign="top">
<p>
Either <code class="literal">dictionary_decompounder</code> or <code class="literal">hyphenation_decompounder</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">word_list</code>
</p>
</td><td class="entry" valign="top">
<p>
A array containing a list of words to use for the word dictionary.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">word_list_path</code>
</p>
</td><td class="entry" valign="top">
<p>
The path (either absolute or relative to the <code class="literal">config</code> directory) to the word dictionary.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">hyphenation_patterns_path</code>
</p>
</td><td class="entry" valign="top">
<p>
The path (either absolute or relative to the <code class="literal">config</code> directory) to a FOP XML hyphenation pattern file. (required for hyphenation)
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">min_word_size</code>
</p>
</td><td class="entry" valign="top">
<p>
Minimum word size. Defaults to 5.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">min_subword_size</code>
</p>
</td><td class="entry" valign="top">
<p>
Minimum subword size. Defaults to 2.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max_subword_size</code>
</p>
</td><td class="entry" valign="top">
<p>
Maximum subword size. Defaults to 15.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">only_longest_match</code>
</p>
</td><td class="entry" valign="top">
<p>
Whether to include only the longest matching subword or not.  Defaults to <code class="literal">false</code>
</p>
</td></tr></tbody></table></div><p>Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">index :
    analysis :
        analyzer :
            myAnalyzer2 :
                type : custom
                tokenizer : standard
                filter : [myTokenFilter1, myTokenFilter2]
        filter :
            myTokenFilter1 :
                type : dictionary_decompounder
                word_list: [one, two, three]
            myTokenFilter2 :
                type : hyphenation_decompounder
                word_list_path: path/to/words.txt
                hyphenation_patterns_path: path/to/fop.xml
                max_subword_size : 22</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Reverse Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-compound-word-tokenfilter.html">
              &nbsp;
              Compound Word Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-elision-tokenfilter.html">Elision Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-reverse-tokenfilter"></a>Reverse Token Filter</h2></div></div></div><p>A token filter of type <code class="literal">reverse</code> that simply reverses each token.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Elision Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-reverse-tokenfilter.html">
              &nbsp;
              Reverse Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-truncate-tokenfilter.html">Truncate Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-elision-tokenfilter"></a>Elision Token Filter</h2></div></div></div><p>A token filter which removes elisions. For example, "lavion" (the
plane) will be tokenized as "avion" (plane).</p><p>Accepts <code class="literal">articles</code> setting which is a set of stop words articles. For
example:</p><div class="pre_wrapper"><pre class="programlisting">"index" : {
    "analysis" : {
        "analyzer" : {
            "default" : {
                "tokenizer" : "standard",
                "filter" : ["standard", "elision"]
            }
        },
        "filter" : {
            "elision" : {
                "type" : "elision",
                "articles" : ["l", "m", "t", "qu", "n", "s", "j"]
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Truncate Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-elision-tokenfilter.html">
              &nbsp;
              Elision Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-unique-tokenfilter.html">Unique Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-truncate-tokenfilter"></a>Truncate Token Filter</h2></div></div></div><p>The <code class="literal">truncate</code> token filter can be used to truncate tokens into a
specific length. This can come in handy with keyword (single token)
based mapped fields that are used for sorting in order to reduce memory
usage.</p><p>It accepts a <code class="literal">length</code> parameter which control the number of characters
to truncate to, defaults to <code class="literal">10</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Unique Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-truncate-tokenfilter.html">
              &nbsp;
              Truncate Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-pattern-capture-tokenfilter.html">Pattern Capture Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-unique-tokenfilter"></a>Unique Token Filter</h2></div></div></div><p>The <code class="literal">unique</code> token filter can be used to only index unique tokens during
analysis. By default it is applied on all the token stream. If
<code class="literal">only_on_same_position</code> is set to <code class="literal">true</code>, it will only remove duplicate
tokens on the same position.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Pattern Capture Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-unique-tokenfilter.html">
              &nbsp;
              Unique Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-pattern_replace-tokenfilter.html">Pattern Replace Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-pattern-capture-tokenfilter"></a>Pattern Capture Token Filter</h2></div></div></div><p>The <code class="literal">pattern_capture</code> token filter, unlike the <code class="literal">pattern</code> tokenizer,
emits a token for every capture group in the regular expression.
Patterns are not anchored to the beginning and end of the string, so
each pattern can match multiple times, and matches are allowed to
overlap.</p><p>For instance a pattern like :</p><div class="pre_wrapper"><pre class="programlisting">"(([a-z]+)(\d*))"</pre></div><p>when matched against:</p><div class="pre_wrapper"><pre class="programlisting">"abc123def456"</pre></div><p>would produce the tokens: [ <code class="literal">abc123</code>, <code class="literal">abc</code>, <code class="literal">123</code>, <code class="literal">def456</code>, <code class="literal">def</code>,
<code class="literal">456</code> ]</p><p>If <code class="literal">preserve_original</code> is set to <code class="literal">true</code> (the default) then it would also
emit the original token: <code class="literal">abc123def456</code>.</p><p>This is particularly useful for indexing text like camel-case code, eg
<code class="literal">stripHTML</code> where a user may search for <code class="literal">"strip html"</code> or <code class="literal">"striphtml"</code>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test/  -d '
{
   "settings" : {
      "analysis" : {
         "filter" : {
            "code" : {
               "type" : "pattern_capture",
               "preserve_original" : 1,
               "patterns" : [
                  "(\\p{Ll}+|\\p{Lu}\\p{Ll}+|\\p{Lu}+)",
                  "(\\d+)"
               ]
            }
         },
         "analyzer" : {
            "code" : {
               "tokenizer" : "pattern",
               "filter" : [ "code", "lowercase" ]
            }
         }
      }
   }
}
'</pre></div><p>When used to analyze the text</p><div class="pre_wrapper"><pre class="programlisting">import static org.apache.commons.lang.StringEscapeUtils.escapeHtml</pre></div><p>this emits the tokens: [ <code class="literal">import</code>, <code class="literal">static</code>, <code class="literal">org</code>, <code class="literal">apache</code>, <code class="literal">commons</code>,
<code class="literal">lang</code>, <code class="literal">stringescapeutils</code>, <code class="literal">string</code>, <code class="literal">escape</code>, <code class="literal">utils</code>, <code class="literal">escapehtml</code>,
<code class="literal">escape</code>, <code class="literal">html</code> ]</p><p>Another example is analyzing email addresses:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test/  -d '
{
   "settings" : {
      "analysis" : {
         "filter" : {
            "email" : {
               "type" : "pattern_capture",
               "preserve_original" : 1,
               "patterns" : [
                  "([^@]+)",
                  "(\\p{L}+)",
                  "(\\d+)",
                  "@(.+)"
               ]
            }
         },
         "analyzer" : {
            "email" : {
               "tokenizer" : "uax_url_email",
               "filter" : [ "email", "lowercase",  "unique" ]
            }
         }
      }
   }
}
'</pre></div><p>When the above analyzer is used on an email address like:</p><div class="pre_wrapper"><pre class="programlisting">john-smith_123@foo-bar.com</pre></div><p>it would produce the following tokens:</p><pre class="literallayout">john-smith_123@foo-bar.com, john-smith_123,
john, smith, 123, foo-bar.com, foo, bar, com</pre><p>Multiple patterns are required to allow overlapping captures, but also
means that patterns are less dense and easier to understand.</p><p><span class="strong emphasis"><strong>Note:</strong></span> All tokens are emitted in the same position, and with the same
character offsets, so when combined with highlighting, the whole
original token will be highlighted, not just the matching subset. For
instance, querying the above email address for <code class="literal">"smith"</code> would
highlight:</p><div class="pre_wrapper"><pre class="programlisting">  &lt;em&gt;john-smith_123@foo-bar.com&lt;/em&gt;</pre></div><p>not:</p><div class="pre_wrapper"><pre class="programlisting">  john-&lt;em&gt;smith&lt;/em&gt;_123@foo-bar.com</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Pattern Replace Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-pattern-capture-tokenfilter.html">
              &nbsp;
              Pattern Capture Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-trim-tokenfilter.html">Trim Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-pattern_replace-tokenfilter"></a>Pattern Replace Token Filter</h2></div></div></div><p>The <code class="literal">pattern_replace</code> token filter allows to easily handle string
replacements based on a regular expression. The regular expression is
defined using the <code class="literal">pattern</code> parameter, and the replacement string can be
provided using the <code class="literal">replacement</code> parameter (supporting referencing the
original text, as explained
<a class="ulink" href="http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendReplacement(java.lang.StringBuffer,%20java.lang.String)" target="_top">here</a>).</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Trim Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-pattern_replace-tokenfilter.html">
              &nbsp;
              Pattern Replace Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-limit-token-count-tokenfilter.html">Limit Token Count Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-trim-tokenfilter"></a>Trim Token Filter</h2></div></div></div><p>The <code class="literal">trim</code> token filter trims the whitespace surrounding a token.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Limit Token Count Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-trim-tokenfilter.html">
              &nbsp;
              Trim Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-hunspell-tokenfilter.html">Hunspell Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-limit-token-count-tokenfilter"></a>Limit Token Count Token Filter</h2></div></div></div><p>Limits the number of tokens that are indexed per document and field.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">max_token_count</code></p></td><td class="entry" align="left" valign="top"><p>The maximum number of tokens that should be indexed
per document and field. The default is <code class="literal">1</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">consume_all_tokens</code></p></td><td class="entry" align="left" valign="top"><p>If set to <code class="literal">true</code> the filter exhaust the stream
even if <code class="literal">max_token_count</code> tokens have been consumed already. The default
is <code class="literal">false</code>.</p></td></tr></tbody></table></div><p>Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">index :
    analysis :
        analyzer :
            myAnalyzer :
                type : custom
                tokenizer : standard
                filter : [lowercase, five_token_limit]
        filter :
            five_token_limit :
                type : limit
                max_token_count : 5</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Hunspell Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-limit-token-count-tokenfilter.html">
              &nbsp;
              Limit Token Count Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-common-grams-tokenfilter.html">Common Grams Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-hunspell-tokenfilter"></a>Hunspell Token Filter</h2></div></div></div><p>Basic support for hunspell stemming. Hunspell dictionaries will be
picked up from a dedicated hunspell directory on the filesystem
(defaults to <code class="literal">&lt;path.conf&gt;/hunspell</code>). Each dictionary is expected to
have its own directory named after its associated locale (language).
This dictionary directory is expected to hold a single <code class="literal">*.aff</code> and
one or more <code class="literal">*.dic</code> files (all of which will automatically be picked up).
For example, assuming the default hunspell location is used, the
following directory layout will define the <code class="literal">en_US</code> dictionary:</p><div class="pre_wrapper"><pre class="programlisting">- conf
    |-- hunspell
    |    |-- en_US
    |    |    |-- en_US.dic
    |    |    |-- en_US.aff</pre></div><p>The location of the hunspell directory can be configured using the
<code class="literal">indices.analysis.hunspell.dictionary.location</code> settings in
<span class="emphasis"><em>elasticsearch.yml</em></span>.</p><p>Each dictionary can be configured with one setting:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">ignore_case</code>
</span></dt><dd>
    If true, dictionary matching will be case insensitive
    (defaults to <code class="literal">false</code>)
</dd></dl></div><p>This setting can be configured globally in <code class="literal">elasticsearch.yml</code> using</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">indices.analysis.hunspell.dictionary.ignore_case</code>
</li></ul></div><p>or for specific dictionaries:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">indices.analysis.hunspell.dictionary.en_US.ignore_case</code>.
</li></ul></div><p>It is also possible to add <code class="literal">settings.yml</code> file under the dictionary
directory which holds these settings (this will override any other
settings defined in the <code class="literal">elasticsearch.yml</code>).</p><p>One can use the hunspell stem filter by configuring it the analysis
settings:</p><div class="pre_wrapper"><pre class="programlisting">{
    "analysis" : {
        "analyzer" : {
            "en" : {
                "tokenizer" : "standard",
                "filter" : [ "lowercase", "en_US" ]
            }
        },
        "filter" : {
            "en_US" : {
                "type" : "hunspell",
                "locale" : "en_US",
                "dedup" : true
            }
        }
    }
}</pre></div><p>The hunspell token filter accepts four options:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">locale</code>
</span></dt><dd>
    A locale for this filter. If this is unset, the <code class="literal">lang</code> or
    <code class="literal">language</code> are used instead - so one of these has to be set.
</dd><dt><span class="term">
<code class="literal">dictionary</code>
</span></dt><dd>
    The name of a dictionary. The path to your hunspell
    dictionaries should be configured via
    <code class="literal">indices.analysis.hunspell.dictionary.location</code> before.
</dd><dt><span class="term">
<code class="literal">dedup</code>
</span></dt><dd>
    If only unique terms should be returned, this needs to be
    set to <code class="literal">true</code>. Defaults to <code class="literal">true</code>.
</dd><dt><span class="term">
<code class="literal">longest_only</code>
</span></dt><dd>
    If only the longest term should be returned, set this to <code class="literal">true</code>.
    Defaults to <code class="literal">false</code>: all possible stems are returned.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>As opposed to the snowball stemmers (which are algorithm based)
this is a dictionary lookup based stemmer and therefore the quality of
the stemming is determined by the quality of the dictionary.</p></div></div><h4><a id="_dictionary_loading"></a>Dictionary loading</h4><p>By default, the configured (<code class="literal">indices.analysis.hunspell.dictionary.location</code>)
or default Hunspell directory (<code class="literal">config/hunspell/</code>) is checked for dictionaries
when the node starts up, and any dictionaries are automatically loaded.</p><p>Dictionary loading can be deferred until they are actually used by setting
<code class="literal">indices.analysis.hunspell.dictionary.lazy</code> to `true`in the config file.</p><h4><a id="_references"></a>References</h4><p>Hunspell is a spell checker and morphological analyzer designed for
languages with rich morphology and complex word compounding and
character encoding.</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Wikipedia, <a class="ulink" href="http://en.wikipedia.org/wiki/Hunspell" target="_top">http://en.wikipedia.org/wiki/Hunspell</a>
</li><li class="listitem">
Source code, <a class="ulink" href="http://hunspell.sourceforge.net/" target="_top">http://hunspell.sourceforge.net/</a>
</li><li class="listitem">
Open Office Hunspell dictionaries, <a class="ulink" href="http://wiki.openoffice.org/wiki/Dictionaries" target="_top">http://wiki.openoffice.org/wiki/Dictionaries</a>
</li><li class="listitem">
Mozilla Hunspell dictionaries, <a class="ulink" href="https://addons.mozilla.org/en-US/firefox/language-tools/" target="_top">https://addons.mozilla.org/en-US/firefox/language-tools/</a>
</li><li class="listitem">
Chromium Hunspell dictionaries,
   <a class="ulink" href="http://src.chromium.org/viewvc/chrome/trunk/deps/third_party/hunspell_dictionaries/" target="_top">http://src.chromium.org/viewvc/chrome/trunk/deps/third_party/hunspell_dictionaries/</a>
</li></ol></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Common Grams Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-hunspell-tokenfilter.html">
              &nbsp;
              Hunspell Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-normalization-tokenfilter.html">Normalization Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-common-grams-tokenfilter"></a>Common Grams Token Filter</h2></div></div></div><p>Token filter that generates bigrams for frequently occuring terms.
Single terms are still indexed. It can be used as an alternative to the
<a class="link" href="analysis-stop-tokenfilter.html" title="Stop Token Filter">Stop Token Filter</a> when we dont want to completely ignore common terms.</p><p>For example, the text "the quick brown is a fox" will be tokenized as
"the", "the_quick", "quick", "brown", "brown_is", "is_a", "a_fox",
"fox". Assuming "the", "is" and "a" are common words.</p><p>When <code class="literal">query_mode</code> is enabled, the token filter removes common words and
single terms followed by a common word. This parameter should be enabled
in the search analyzer.</p><p>For example, the query "the quick brown is a fox" will be tokenized as
"the_quick", "quick", "brown_is", "is_a", "a_fox", "fox".</p><p>The following are settings that can be set:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">common_words</code></p></td><td class="entry" align="left" valign="top"><p>A list of common words to use.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">common_words_path</code></p></td><td class="entry" align="left" valign="top"><p>A path (either relative to <code class="literal">config</code> location, or
absolute) to a list of common words. Each word should be in its own
"line" (separated by a line break). The file must be UTF-8 encoded.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ignore_case</code></p></td><td class="entry" align="left" valign="top"><p>If true, common words matching will be case insensitive
(defaults to <code class="literal">false</code>).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">query_mode</code></p></td><td class="entry" align="left" valign="top"><p>Generates bigrams then removes common words and single
terms followed by a common word (defaults to <code class="literal">false</code>).</p></td></tr></tbody></table></div><p>Note, <code class="literal">common_words</code> or <code class="literal">common_words_path</code> field is required.</p><p>Here is an example:</p><div class="pre_wrapper"><pre class="programlisting">index :
    analysis :
        analyzer :
            index_grams :
                tokenizer : whitespace
                filter : [common_grams]
            search_grams :
                tokenizer : whitespace
                filter : [common_grams_query]
        filter :
            common_grams :
                type : common_grams
                common_words: [a, an, the]
            common_grams_query :
                type : common_grams
                query_mode: true
                common_words: [a, an, the]</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Normalization Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-common-grams-tokenfilter.html">
              &nbsp;
              Common Grams Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-cjk-width-tokenfilter.html">CJK Width Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-normalization-tokenfilter"></a>Normalization Token Filter</h2></div></div></div><p>There are several token filters available which try to normalize special
characters of a certain language.</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
Arabic
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/ar/ArabicNormalizer.html" target="_top"><code class="literal">arabic_normalization</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
German
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/de/GermanNormalizationFilter.html" target="_top"><code class="literal">german_normalization</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Hindi
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/hi/HindiNormalizer.html" target="_top"><code class="literal">hindi_normalization</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Indic
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/in/IndicNormalizer.html" target="_top"><code class="literal">indic_normalization</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Kurdish (Sorani)
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/ckb/SoraniNormalizer.html" target="_top"><code class="literal">sorani_normalization</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Persian
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/fa/PersianNormalizer.html" target="_top"><code class="literal">persian_normalization</code></a>
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
Scandinavian
</p>
</td><td class="entry" valign="top">
<p>
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/miscellaneous/ScandinavianNormalizationFilter.html" target="_top"><code class="literal">scandinavian_normalization</code></a>,
<a class="ulink" href="http://lucene.apache.org/core/4_9_0/analyzers-common/org/apache/lucene/analysis/miscellaneous/ScandinavianFoldingFilter.html" target="_top"><code class="literal">scandinavian_folding</code></a>
</p>
</td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">CJK Width Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-normalization-tokenfilter.html">
              &nbsp;
              Normalization Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-cjk-bigram-tokenfilter.html">CJK Bigram Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-cjk-width-tokenfilter"></a>CJK Width Token Filter</h2></div></div></div><p>The <code class="literal">cjk_width</code> token filter normalizes CJK width differences:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Folds fullwidth ASCII variants into the equivalent basic Latin
</li><li class="listitem">
Folds halfwidth Katakana variants into the equivalent Kana
</li></ul></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>This token filter can be viewed as a subset of NFKC/NFKD
Unicode normalization.  See the <a class="xref" href="analysis-icu-plugin.html" title="ICU Analysis Plugin"><em>ICU Analysis Plugin</em></a>
for full normalization support.</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">CJK Bigram Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-cjk-width-tokenfilter.html">
              &nbsp;
              CJK Width Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-delimited-payload-tokenfilter.html">Delimited Payload Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-cjk-bigram-tokenfilter"></a>CJK Bigram Token Filter</h2></div></div></div><p>The <code class="literal">cjk_bigram</code> token filter forms bigrams out of the CJK
terms that are generated by the <a class="link" href="analysis-standard-tokenizer.html" title="Standard Tokenizer"><code class="literal">standard</code> tokenizer</a>
or the <code class="literal">icu_tokenizer</code> (see <a class="xref" href="analysis-icu-plugin.html" title="ICU Analysis Plugin"><em>ICU Analysis Plugin</em></a>).</p><p>By default, when a CJK character has no adjacent characters to form a bigram,
it is output in unigram form. If you always want to output both unigrams and
bigrams, set the <code class="literal">output_unigrams</code> flag to <code class="literal">true</code>. This can be used for a
combined unigram+bigram approach.</p><p>Bigrams are generated for characters in <code class="literal">han</code>, <code class="literal">hiragana</code>, <code class="literal">katakana</code> and
<code class="literal">hangul</code>, but bigrams can be disabled for particular scripts with the
<code class="literal">ignore_scripts</code> parameter.  All non-CJK input is passed through unmodified.</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "analyzer" : {
                "han_bigrams" : {
                    "tokenizer" : "standard",
                    "filter" : ["han_bigrams_filter"]
                }
            },
            "filter" : {
                "han_bigrams_filter" : {
                    "type" : "cjk_bigram",
                    "ignore_scripts": [
                        "hiragana",
                        "katakana",
                        "hangul"
                    ],
                    "output_unigrams" : true
                }
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Delimited Payload Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-cjk-bigram-tokenfilter.html">
              &nbsp;
              CJK Bigram Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-keep-words-tokenfilter.html">Keep Words Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-delimited-payload-tokenfilter"></a>Delimited Payload Token Filter</h2></div></div></div><p>Named <code class="literal">delimited_payload_filter</code>. Splits tokens into tokens and payload whenever a delimiter character is found.</p><p>Example: "the|1 quick|2 fox|3" is split by default into tokens <code class="literal">the</code>, <code class="literal">quick</code>, and <code class="literal">fox</code> with payloads <code class="literal">1</code>, <code class="literal">2</code>, and <code class="literal">3</code> respectively.</p><p>Parameters:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">delimiter</code>
</span></dt><dd>
    Character used for splitting the tokens. Default is <code class="literal">|</code>.
</dd><dt><span class="term">
<code class="literal">encoding</code>
</span></dt><dd>
    The type of the payload. <code class="literal">int</code> for integer, <code class="literal">float</code> for float and <code class="literal">identity</code> for characters. Default is <code class="literal">float</code>.
</dd></dl></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Keep Words Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-delimited-payload-tokenfilter.html">
              &nbsp;
              Delimited Payload Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-keep-types-tokenfilter.html">Keep Types Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-keep-words-tokenfilter"></a>Keep Words Token Filter</h2></div></div></div><p>A token filter of type <code class="literal">keep</code> that only keeps tokens with text contained in a
predefined set of words. The set of words can be defined in the settings or
loaded from a text file containing one word per line.</p><h3><a id="_options_6"></a>Options</h3><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
keep_words
</p>
</td><td class="entry" valign="top">
<p>
a list of words to keep
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
keep_words_path
</p>
</td><td class="entry" valign="top">
<p>
a path to a words file
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
keep_words_case
</p>
</td><td class="entry" valign="top">
<p>
a boolean indicating whether to lower case the words (defaults to <code class="literal">false</code>)
</p>
</td></tr></tbody></table></div><h3><a id="_settings_example"></a>Settings example</h3><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "analyzer" : {
                "my_analyzer" : {
                    "tokenizer" : "standard",
                    "filter" : ["standard", "lowercase", "words_till_three"]
                },
                "my_analyzer1" : {
                    "tokenizer" : "standard",
                    "filter" : ["standard", "lowercase", "words_on_file"]
                }
            },
            "filter" : {
                "words_till_three" : {
                    "type" : "keep",
                    "keep_words" : [ "one", "two", "three"]
                },
                "words_on_file" : {
                    "type" : "keep",
                    "keep_words_path" : "/path/to/word/file"
                }
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Keep Types Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-keep-words-tokenfilter.html">
              &nbsp;
              Keep Words Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-classic-tokenfilter.html">Classic Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-keep-types-tokenfilter"></a>Keep Types Token Filter</h2></div></div></div><p>A token filter of type <code class="literal">keep_types</code> that only keeps tokens with a token type
contained in a predefined set.</p><h3><a id="_options_7"></a>Options</h3><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
types
</p>
</td><td class="entry" valign="top">
<p>
a list of types to keep
</p>
</td></tr></tbody></table></div><h3><a id="_settings_example_2"></a>Settings example</h3><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "analyzer" : {
                "my_analyzer" : {
                    "tokenizer" : "standard",
                    "filter" : ["standard", "lowercase", "extract_numbers"]
                },
            },
            "filter" : {
                "extract_numbers" : {
                    "type" : "keep_types",
                    "types" : [ "&lt;NUM&gt;" ]
                },
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Classic Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-keep-types-tokenfilter.html">
              &nbsp;
              Keep Types Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-apostrophe-tokenfilter.html">Apostrophe Token Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-classic-tokenfilter"></a>Classic Token Filter</h2></div></div></div><p>The <code class="literal">classic</code> token filter does optional post-processing of
terms that are generated by the <a class="link" href="analysis-classic-tokenizer.html" title="Classic Tokenizer"><code class="literal">classic</code> tokenizer</a>.</p><p>This filter removes the english possessive from the end of words, and
it removes dots from acronyms.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-tokenfilters.html">Token Filters</a></span>  <span class="breadcrumb-node">Apostrophe Token Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-classic-tokenfilter.html">
              &nbsp;
              Classic Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-charfilters.html">Character Filters
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-apostrophe-tokenfilter"></a>Apostrophe Token Filter</h2></div></div></div><p>The <code class="literal">apostrophe</code> token filter strips all characters after an apostrophe,
including the apostrophe itself.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-node">Character Filters</span></div><div class="navheader"><span class="prev"><a href="analysis-apostrophe-tokenfilter.html">
              &nbsp;
              Apostrophe Token Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-mapping-charfilter.html">Mapping Char Filter
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-charfilters"></a>Character Filters</h2></div></div></div><p>Character filters are used to preprocess the string of
characters before it is passed to the <a class="link" href="analysis-tokenizers.html" title="Tokenizers">tokenizer</a>.
A character filter may be used to strip out HTML markup, , or to convert
<code class="literal">"&amp;"</code> characters to the word <code class="literal">"and"</code>.</p><p>Elasticsearch has built in characters filters which can be
used to build <a class="link" href="analysis-custom-analyzer.html" title="Custom Analyzer">custom analyzers</a>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-charfilters.html">Character Filters</a></span>  <span class="breadcrumb-node">Mapping Char Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-charfilters.html">
              &nbsp;
              Character Filters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-htmlstrip-charfilter.html">HTML Strip Char Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-mapping-charfilter"></a>Mapping Char Filter</h2></div></div></div><p>A char filter of type <code class="literal">mapping</code> replacing characters of an analyzed text
with given mapping.</p><p>Here is a sample configuration:</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "char_filter" : {
                "my_mapping" : {
                    "type" : "mapping",
                    "mappings" : ["ph=&gt;f", "qu=&gt;k"]
                }
            },
            "analyzer" : {
                "custom_with_char_filter" : {
                    "tokenizer" : "standard",
                    "char_filter" : ["my_mapping"]
                }
            }
        }
    }
}</pre></div><p>Otherwise the setting <code class="literal">mappings_path</code> can specify a file where you can
put the list of char mapping :</p><div class="pre_wrapper"><pre class="programlisting">ph =&gt; f
qu =&gt; k</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-charfilters.html">Character Filters</a></span>  <span class="breadcrumb-node">HTML Strip Char Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-mapping-charfilter.html">
              &nbsp;
              Mapping Char Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-pattern-replace-charfilter.html">Pattern Replace Char Filter
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-htmlstrip-charfilter"></a>HTML Strip Char Filter</h2></div></div></div><p>A char filter of type <code class="literal">html_strip</code> stripping out HTML elements from an
analyzed text.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-link"><a href="analysis-charfilters.html">Character Filters</a></span>  <span class="breadcrumb-node">Pattern Replace Char Filter</span></div><div class="navheader"><span class="prev"><a href="analysis-htmlstrip-charfilter.html">
              &nbsp;
              HTML Strip Char Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="analysis-icu-plugin.html">ICU Analysis Plugin
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-pattern-replace-charfilter"></a>Pattern Replace Char Filter</h2></div></div></div><p>The <code class="literal">pattern_replace</code> char filter allows the use of a regex to
manipulate the characters in a string before analysis. The regular
expression is defined using the <code class="literal">pattern</code> parameter, and the replacement
string can be provided using the <code class="literal">replacement</code> parameter (supporting
referencing the original text, as explained
<a class="ulink" href="http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendReplacement(java.lang.StringBuffer,%20java.lang.String)" target="_top">here</a>).
For more information check the
<a class="ulink" href="http://lucene.apache.org/core/4_3_1/analyzers-common/org/apache/lucene/analysis/pattern/PatternReplaceCharFilter.html" target="_top">lucene
documentation</a></p><p>Here is a sample configuration:</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "char_filter" : {
                "my_pattern":{
                    "type":"pattern_replace",
                    "pattern":"sample(.*)",
                    "replacement":"replacedSample $1"
                }
            },
            "analyzer" : {
                "custom_with_char_filter" : {
                    "tokenizer" : "standard",
                    "char_filter" : ["my_pattern"]
                }
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="analysis.html">Analysis</a></span>  <span class="breadcrumb-node">ICU Analysis Plugin</span></div><div class="navheader"><span class="prev"><a href="analysis-pattern-replace-charfilter.html">
              &nbsp;
              Pattern Replace Char Filter</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules.html">Modules
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="analysis-icu-plugin"></a>ICU Analysis Plugin</h2></div></div></div><p>The <a class="ulink" href="http://icu-project.org/" target="_top">ICU</a> analysis plugin allows for unicode
normalization, collation and folding. The plugin is called
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-analysis-icu" target="_top">elasticsearch-analysis-icu</a>.</p><p>The plugin includes the following analysis components:</p><h3><a id="icu-normalization"></a>ICU Normalization</h3><p>Normalizes characters as explained
<a class="ulink" href="http://userguide.icu-project.org/transforms/normalization" target="_top">here</a>. It
registers itself by default under <code class="literal">icu_normalizer</code> or <code class="literal">icuNormalizer</code>
using the default settings. Allows for the name parameter to be provided
which can include the following values: <code class="literal">nfc</code>, <code class="literal">nfkc</code>, and <code class="literal">nfkc_cf</code>.
Here is a sample settings:</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "analyzer" : {
                "normalization" : {
                    "tokenizer" : "keyword",
                    "filter" : ["icu_normalizer"]
                }
            }
        }
    }
}</pre></div><h3><a id="icu-folding"></a>ICU Folding</h3><p>Folding of unicode characters based on <code class="literal">UTR#30</code>. It registers itself
under <code class="literal">icu_folding</code> and <code class="literal">icuFolding</code> names.
The filter also does lowercasing, which means the lowercase filter can
normally be left out. Sample setting:</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "analyzer" : {
                "folding" : {
                    "tokenizer" : "keyword",
                    "filter" : ["icu_folding"]
                }
            }
        }
    }
}</pre></div><h4><a id="icu-filtering"></a>Filtering</h4><p>The folding can be filtered by a set of unicode characters with the
parameter <code class="literal">unicodeSetFilter</code>. This is useful for a non-internationalized
search engine where retaining a set of national characters which are
primary letters in a specific language is wanted. See syntax for the
UnicodeSet
<a class="ulink" href="http://icu-project.org/apiref/icu4j/com/ibm/icu/text/UnicodeSet.html" target="_top">here</a>.</p><p>The Following example exempts Swedish characters from the folding. Note
that the filtered characters are NOT lowercased which is why we add that
filter below.</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "analyzer" : {
                "folding" : {
                    "tokenizer" : "standard",
                    "filter" : ["my_icu_folding", "lowercase"]
                }
            }
            "filter" : {
                "my_icu_folding" : {
                    "type" : "icu_folding"
                    "unicodeSetFilter" : "[^]"
                }
            }
        }
    }
}</pre></div><h3><a id="icu-collation"></a>ICU Collation</h3><p>Uses collation token filter. Allows to either specify the rules for
collation (defined
<a class="ulink" href="http://www.icu-project.org/userguide/Collate_Customization.html" target="_top">here</a>)
using the <code class="literal">rules</code> parameter (can point to a location or expressed in the
settings, location can be relative to config location), or using the
<code class="literal">language</code> parameter (further specialized by country and variant). By
default registers under <code class="literal">icu_collation</code> or <code class="literal">icuCollation</code> and uses the
default locale.</p><p>Here is a sample settings:</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "analyzer" : {
                "collation" : {
                    "tokenizer" : "keyword",
                    "filter" : ["icu_collation"]
                }
            }
        }
    }
}</pre></div><p>And here is a sample of custom collation:</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "analyzer" : {
                "collation" : {
                    "tokenizer" : "keyword",
                    "filter" : ["myCollator"]
                }
            },
            "filter" : {
                "myCollator" : {
                    "type" : "icu_collation",
                    "language" : "en"
                }
            }
        }
    }
}</pre></div><h4><a id="_options_8"></a>Options</h4><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">strength</code>
</p>
</td><td class="entry" valign="top">
<p>
    The strength property determines the minimum level of difference considered significant during comparison.
     The default strength for the Collator is <code class="literal">tertiary</code>, unless specified otherwise by the locale used to create the Collator.
     Possible values: <code class="literal">primary</code>, <code class="literal">secondary</code>, <code class="literal">tertiary</code>, <code class="literal">quaternary</code> or <code class="literal">identical</code>.

 See <a class="ulink" href="http://icu-project.org/apiref/icu4j/com/ibm/icu/text/Collator.html" target="_top">ICU Collation</a> documentation for a more detailed
 explanation for the specific values.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">decomposition</code>
</p>
</td><td class="entry" valign="top">
<p>
    Possible values: <code class="literal">no</code> or <code class="literal">canonical</code>. Defaults to <code class="literal">no</code>. Setting this decomposition property with
    <code class="literal">canonical</code> allows the Collator to handle un-normalized text properly, producing the same results as if the text were
    normalized. If <code class="literal">no</code> is set, it is the users responsibility to insure that all text is already in the appropriate form
    before a comparison or before getting a CollationKey. Adjusting decomposition mode allows the user to select between
    faster and more complete collation behavior. Since a great many of the worlds languages do not require text
    normalization, most locales set <code class="literal">no</code> as the default decomposition mode.
</p>
</td></tr></tbody></table></div><h4><a id="_expert_options"></a>Expert options:</h4><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">alternate</code>
</p>
</td><td class="entry" valign="top">
<p>
     Possible values: <code class="literal">shifted</code> or <code class="literal">non-ignorable</code>. Sets the alternate handling for strength <code class="literal">quaternary</code>
     to be either shifted or non-ignorable. What boils down to ignoring punctuation and whitespace.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">caseLevel</code>
</p>
</td><td class="entry" valign="top">
<p>
    Possible values: <code class="literal">true</code> or <code class="literal">false</code>. Default is <code class="literal">false</code>. Whether case level sorting is required. When
     strength is set to <code class="literal">primary</code> this will ignore accent differences.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">caseFirst</code>
</p>
</td><td class="entry" valign="top">
<p>
    Possible values: <code class="literal">lower</code> or <code class="literal">upper</code>. Useful to control which case is sorted first when case is not ignored
    for strength <code class="literal">tertiary</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">numeric</code>
</p>
</td><td class="entry" valign="top">
<p>
    Possible values: <code class="literal">true</code> or <code class="literal">false</code>. Whether digits are sorted according to numeric representation. For
    example the value <code class="literal">egg-9</code> is sorted before the value <code class="literal">egg-21</code>. Defaults to <code class="literal">false</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">variableTop</code>
</p>
</td><td class="entry" valign="top">
<p>
    Single character or contraction. Controls what is variable for <code class="literal">alternate</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">hiraganaQuaternaryMode</code>
</p>
</td><td class="entry" valign="top">
<p>
    Possible values: <code class="literal">true</code> or <code class="literal">false</code>. Defaults to <code class="literal">false</code>. Distinguishing between Katakana and
    Hiragana characters in <code class="literal">quaternary</code> strength .
</p>
</td></tr></tbody></table></div><h3><a id="_icu_tokenizer"></a>ICU Tokenizer</h3><p>Breaks text into words according to UAX #29: Unicode Text Segmentation <a id="id-1.13.7.25.1" class="indexterm"></a><a class="ulink" href="http://www.unicode.org/reports/tr29/" target="_top">http://www.unicode.org/reports/tr29/</a>.</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "analyzer" : {
                "collation" : {
                    "tokenizer" : "icu_tokenizer",
                }
            }
        }
    }
}</pre></div><h3><a id="_icu_normalization_charfilter"></a>ICU Normalization CharFilter</h3><p>Normalizes characters as explained <a class="ulink" href="http://userguide.icu-project.org/transforms/normalization" target="_top">here</a>.
It registers itself by default under <code class="literal">icu_normalizer</code> or <code class="literal">icuNormalizer</code> using the default settings.
Allows for the name parameter to be provided which can include the following values: <code class="literal">nfc</code>, <code class="literal">nfkc</code>, and <code class="literal">nfkc_cf</code>.
Allows for the mode parameter to be provided which can include the following values: <code class="literal">compose</code> and <code class="literal">decompose</code>.
Use <code class="literal">decompose</code> with <code class="literal">nfc</code> or <code class="literal">nfkc</code>, to get <code class="literal">nfd</code> or <code class="literal">nfkd</code>, respectively.
Here is a sample settings:</p><div class="pre_wrapper"><pre class="programlisting">{
    "index" : {
        "analysis" : {
            "analyzer" : {
                "collation" : {
                    "tokenizer" : "keyword",
                    "char_filter" : ["icu_normalizer"]
                }
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">Modules</span></div><div class="navheader"><span class="prev"><a href="analysis-icu-plugin.html">
              &nbsp;
              ICU Analysis Plugin</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-cluster.html">Cluster
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="modules"></a>Modules</h1></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">Cluster</span></div><div class="navheader"><span class="prev"><a href="modules.html">
              &nbsp;
              Modules</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-discovery.html">Discovery
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-cluster"></a>Cluster</h2></div></div></div><h3><a id="shards-allocation"></a>Shards Allocation</h3><p>Shards allocation is the process of allocating shards to nodes. This can
happen during initial recovery, replica allocation, rebalancing, or
handling nodes being added or removed.</p><p>The following settings may be used:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">cluster.routing.allocation.allow_rebalance</code>
</span></dt><dd>
        Allow to control when rebalancing will happen based on the total
        state of all the indices shards in the cluster. <code class="literal">always</code>,
        <code class="literal">indices_primaries_active</code>, and <code class="literal">indices_all_active</code> are allowed,
        defaulting to <code class="literal">indices_all_active</code> to reduce chatter during
        initial recovery.
</dd><dt><span class="term">
<code class="literal">cluster.routing.allocation.cluster_concurrent_rebalance</code>
</span></dt><dd>
      Allow to control how many concurrent rebalancing of shards are
      allowed cluster wide, and default it to <code class="literal">2</code>.
</dd><dt><span class="term">
<code class="literal">cluster.routing.allocation.node_initial_primaries_recoveries</code>
</span></dt><dd>
       Allow to control specifically the number of initial recoveries
       of primaries that are allowed per node. Since most times local
       gateway is used, those should be fast and we can handle more of
       those per node without creating load.  Defaults to <code class="literal">4</code>.
</dd><dt><span class="term">
<code class="literal">cluster.routing.allocation.node_concurrent_recoveries</code>
</span></dt><dd>
     How many concurrent recoveries are allowed to happen on a node.
     Defaults to <code class="literal">2</code>.
</dd><dt><span class="term">
<code class="literal">cluster.routing.allocation.enable</code>
</span></dt><dd><p class="simpara">
Controls shard allocation for all indices, by allowing specific
kinds of shard to be allocated.
</p><p class="simpara">Can be set to:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">all</code> - (default) Allows shard allocation for all kinds of shards.
</li><li class="listitem">
<code class="literal">primaries</code> -  Allows shard allocation only for primary shards.
</li><li class="listitem">
<code class="literal">new_primaries</code> - Allows shard allocation only for primary shards for new indices.
</li><li class="listitem">
<code class="literal">none</code> - No shard allocations of any kind are allowed for all indices.
</li></ul></div></dd><dt><span class="term">
<code class="literal">cluster.routing.allocation.same_shard.host</code>
</span></dt><dd>
      Allows to perform a check to prevent allocation of multiple instances
      of the same shard on a single host, based on host name and host address.
      Defaults to <code class="literal">false</code>, meaning that no check is performed by default. This
      setting only applies if multiple nodes are started on the same machine.
</dd><dt><span class="term">
<code class="literal">indices.recovery.concurrent_streams</code>
</span></dt><dd>
       The number of streams to open (on a <span class="strong emphasis"><strong>node</strong></span> level) to recover a
       shard from a peer shard. Defaults to <code class="literal">3</code>.
</dd><dt><span class="term">
<code class="literal">indices.recovery.concurrent_small_file_streams</code>
</span></dt><dd>
       The number of streams to open (on a <span class="strong emphasis"><strong>node</strong></span> level) for small files (under
       5mb) to recover a shard from a peer shard. Defaults to <code class="literal">2</code>.
</dd></dl></div><h3><a id="allocation-awareness"></a>Shard Allocation Awareness</h3><p>Cluster allocation awareness allows to configure shard and replicas
allocation across generic attributes associated the nodes. Lets explain
it through an example:</p><p>Assume we have several racks. When we start a node, we can configure an
attribute called <code class="literal">rack_id</code> (any attribute name works), for example, here
is a sample config:</p><pre class="screen">node.rack_id: rack_one</pre><p>The above sets an attribute called <code class="literal">rack_id</code> for the relevant node with
a value of <code class="literal">rack_one</code>. Now, we need to configure the <code class="literal">rack_id</code> attribute
as one of the awareness allocation attributes (set it on <span class="strong emphasis"><strong>all</strong></span> (master
eligible) nodes config):</p><pre class="screen">cluster.routing.allocation.awareness.attributes: rack_id</pre><p>The above will mean that the <code class="literal">rack_id</code> attribute will be used to do
awareness based allocation of shard and its replicas. For example, lets
say we start 2 nodes with <code class="literal">node.rack_id</code> set to <code class="literal">rack_one</code>, and deploy a
single index with 5 shards and 1 replica. The index will be fully
deployed on the current nodes (5 shards and 1 replica each, total of 10
shards).</p><p>Now, if we start two more nodes, with <code class="literal">node.rack_id</code> set to <code class="literal">rack_two</code>,
shards will relocate to even the number of shards across the nodes, but,
a shard and its replica will not be allocated in the same <code class="literal">rack_id</code>
value. The only exception to the later is when the cluster is left with less
<code class="literal">rack_id</code> values then shard copies. If your cluster spans two racks and one of
them is lost, it is still worth while to spread replicas across the nodes in the
rack that was left (see <a class="link" href="modules-cluster.html#forced-awareness" title="Forced Awarenessedit">Forced Awareness</a> for an alternative).</p><p>The awareness attributes can hold several values, for example:</p><pre class="screen">cluster.routing.allocation.awareness.attributes: rack_id,zone</pre><p><span class="strong emphasis"><strong>NOTE</strong></span>: When using awareness attributes, shards will not be allocated to
nodes that dont have values set for those attributes.</p><p><span class="strong emphasis"><strong>NOTE</strong></span>: Number of primary/replica of a shard allocated on a specific group
of nodes with the same awareness attribute value is determined by the number
of attribute values. When the number of nodes in groups is unbalanced and
there are many replicas, replica shards may be left unassigned.</p><h3><a id="forced-awareness"></a>Forced Awareness</h3><p>Sometimes, we know in advance the number of values an awareness
attribute can have, and more over, we would like never to have more
replicas than needed allocated on a specific group of nodes with the
same awareness attribute value. For that, we can force awareness on
specific attributes.</p><p>For example, lets say we have an awareness attribute called <code class="literal">zone</code>, and
we know we are going to have two zones, <code class="literal">zone1</code> and <code class="literal">zone2</code>. Here is how
we can force awareness on a node:</p><div class="pre_wrapper"><pre class="programlisting">cluster.routing.allocation.awareness.force.zone.values: zone1,zone2
cluster.routing.allocation.awareness.attributes: zone</pre></div><p>Now, lets say we start 2 nodes with <code class="literal">node.zone</code> set to <code class="literal">zone1</code> and
create an index with 5 shards and 1 replica. The index will be created,
but only 5 shards will be allocated (with no replicas). Only when we
start more shards with <code class="literal">node.zone</code> set to <code class="literal">zone2</code> will the replicas be
allocated.</p><h4><a id="_automatic_preference_when_searching_geting"></a>Automatic Preference When Searching / GETing</h4><p>When executing a search, or doing a get, the node receiving the request
will prefer to execute the request on shards that exists on nodes that
have the same attribute values as the executing node. This only happens
when the <code class="literal">cluster.routing.allocation.awareness.attributes</code> setting has
been set to a value.</p><h4><a id="_realtime_settings_update"></a>Realtime Settings Update</h4><p>The settings can be updated using the <a class="link" href="cluster-update-settings.html" title="Cluster Update Settings">cluster update settings API</a> on a live cluster.</p><h3><a id="allocation-filtering"></a>Shard Allocation Filtering</h3><p>Allow to control allocation of indices on nodes based on include/exclude
filters. The filters can be set both on the index level and on the
cluster level. Lets start with an example of setting it on the cluster
level:</p><p>Lets say we have 4 nodes, each has specific attribute called <code class="literal">tag</code>
associated with it (the name of the attribute can be any name). Each
node has a specific value associated with <code class="literal">tag</code>. Node 1 has a setting
<code class="literal">node.tag: value1</code>, Node 2 a setting of <code class="literal">node.tag: value2</code>, and so on.</p><p>We can create an index that will only deploy on nodes that have <code class="literal">tag</code>
set to <code class="literal">value1</code> and <code class="literal">value2</code> by setting
<code class="literal">index.routing.allocation.include.tag</code> to <code class="literal">value1,value2</code>. For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test/_settings -d '{
      "index.routing.allocation.include.tag" : "value1,value2"
}'</pre></div><p>On the other hand, we can create an index that will be deployed on all
nodes except for nodes with a <code class="literal">tag</code> of value <code class="literal">value3</code> by setting
<code class="literal">index.routing.allocation.exclude.tag</code> to <code class="literal">value3</code>. For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test/_settings -d '{
      "index.routing.allocation.exclude.tag" : "value3"
}'</pre></div><p><code class="literal">index.routing.allocation.require.*</code> can be used to
specify a number of rules, all of which MUST match in order for a shard
to be  allocated to a node. This is in contrast to <code class="literal">include</code> which will
include a node if ANY rule matches.</p><p>The <code class="literal">include</code>, <code class="literal">exclude</code> and <code class="literal">require</code> values can have generic simple
matching wildcards, for example, <code class="literal">value1*</code>. A special attribute name
called <code class="literal">_ip</code> can be used to match on node ip values. In addition <code class="literal">_host</code>
attribute can be used to match on either the nodes hostname or its ip
address. Similarly <code class="literal">_name</code> and <code class="literal">_id</code> attributes can be used to match on
node name and node id accordingly.</p><p>Obviously a node can have several attributes associated with it, and
both the attribute name and value are controlled in the setting. For
example, here is a sample of several node configurations:</p><div class="pre_wrapper"><pre class="programlisting">node.group1: group1_value1
node.group2: group2_value4</pre></div><p>In the same manner, <code class="literal">include</code>, <code class="literal">exclude</code> and <code class="literal">require</code> can work against
several attributes, for example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test/_settings -d '{
    "index.routing.allocation.include.group1" : "xxx",
    "index.routing.allocation.include.group2" : "yyy",
    "index.routing.allocation.exclude.group3" : "zzz",
    "index.routing.allocation.require.group4" : "aaa"
}'</pre></div><p>The provided settings can also be updated in real time using the update
settings API, allowing to "move" indices (shards) around in realtime.</p><p>Cluster wide filtering can also be defined, and be updated in real time
using the cluster update settings API. This setting can come in handy
for things like decommissioning nodes (even if the replica count is set
to 0). Here is a sample of how to decommission a node based on <code class="literal">_ip</code>
address:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_cluster/settings -d '{
    "transient" : {
        "cluster.routing.allocation.exclude._ip" : "10.0.0.1"
    }
}'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">Discovery</span></div><div class="navheader"><span class="prev"><a href="modules-cluster.html">
              &nbsp;
              Cluster</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-discovery-azure.html">Azure Discovery
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-discovery"></a>Discovery</h2></div></div></div><p>The discovery module is responsible for discovering nodes within a
cluster, as well as electing a master node.</p><p>Note, Elasticsearch is a peer to peer based system, nodes communicate
with one another directly if operations are delegated / broadcast. All
the main APIs (index, delete, search) do not communicate with the master
node. The responsibility of the master node is to maintain the global
cluster state, and act if nodes join or leave the cluster by reassigning
shards. Each time a cluster state is changed, the state is made known to
the other nodes in the cluster (the manner depends on the actual
discovery implementation).</p><h3><a id="_settings"></a>Settings</h3><p>The <code class="literal">cluster.name</code> allows to create separated clusters from one another.
The default value for the cluster name is <code class="literal">elasticsearch</code>, though it is
recommended to change this to reflect the logical group name of the
cluster running.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-link"><a href="modules-discovery.html">Discovery</a></span>  <span class="breadcrumb-node">Azure Discovery</span></div><div class="navheader"><span class="prev"><a href="modules-discovery.html">
              &nbsp;
              Discovery</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-discovery-ec2.html">EC2 Discovery
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="modules-discovery-azure"></a>Azure Discovery</h2></div></div></div><p>Azure discovery allows to use the Azure APIs to perform automatic discovery (similar to multicast).
Please check the <a class="ulink" href="https://github.com/elasticsearch/elasticsearch-cloud-azure" target="_top">plugin website</a>
to find the full documentation.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-link"><a href="modules-discovery.html">Discovery</a></span>  <span class="breadcrumb-node">EC2 Discovery</span></div><div class="navheader"><span class="prev"><a href="modules-discovery-azure.html">
              &nbsp;
              Azure Discovery</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-discovery-gce.html">Google Compute Engine Discovery
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="modules-discovery-ec2"></a>EC2 Discovery</h2></div></div></div><p>EC2 discovery allows to use the EC2 APIs to perform automatic discovery (similar to multicast).
Please check the <a class="ulink" href="https://github.com/elasticsearch/elasticsearch-cloud-aws" target="_top">plugin website</a>
to find the full documentation.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-link"><a href="modules-discovery.html">Discovery</a></span>  <span class="breadcrumb-node">Google Compute Engine Discovery</span></div><div class="navheader"><span class="prev"><a href="modules-discovery-ec2.html">
              &nbsp;
              EC2 Discovery</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-discovery-zen.html">Zen Discovery
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="modules-discovery-gce"></a>Google Compute Engine Discovery</h2></div></div></div><p>Google Compute Engine (GCE) discovery allows to use the GCE APIs to perform automatic discovery (similar to multicast).
Please check the <a class="ulink" href="https://github.com/elasticsearch/elasticsearch-cloud-gce" target="_top">plugin website</a>
to find the full documentation.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-link"><a href="modules-discovery.html">Discovery</a></span>  <span class="breadcrumb-node">Zen Discovery</span></div><div class="navheader"><span class="prev"><a href="modules-discovery-gce.html">
              &nbsp;
              Google Compute Engine Discovery</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-gateway.html">Gateway
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="modules-discovery-zen"></a>Zen Discovery</h2></div></div></div><p>The zen discovery is the built in discovery module for elasticsearch and
the default. It provides both multicast and unicast discovery as well
being easily extended to support cloud environments.</p><p>The zen discovery is integrated with other modules, for example, all
communication between nodes is done using the
<a class="link" href="modules-transport.html" title="Transport">transport</a> module.</p><p>It is separated into several sub modules, which are explained below:</p><h4><a id="ping"></a>Ping</h4><p>This is the process where a node uses the discovery mechanisms to find
other nodes. There is support for both multicast and unicast based
discovery (these mechanisms can be used in conjunction as well).</p><h5><a id="multicast"></a>Multicast</h5><p>Multicast ping discovery of other nodes is done by sending one or more
multicast requests which existing nodes will receive and
respond to. It provides the following settings with the
<code class="literal">discovery.zen.ping.multicast</code> prefix:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">group</code></p></td><td class="entry" align="left" valign="top"><p>The group address to use. Defaults to <code class="literal">224.2.2.4</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">port</code></p></td><td class="entry" align="left" valign="top"><p>The port to use. Defaults to <code class="literal">54328</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ttl</code></p></td><td class="entry" align="left" valign="top"><p>The ttl of the multicast message. Defaults to <code class="literal">3</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">address</code></p></td><td class="entry" align="left" valign="top"><p>The address to bind to, defaults to <code class="literal">null</code> which means it
will bind to all available network interfaces.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">enabled</code></p></td><td class="entry" align="left" valign="top"><p>Whether multicast ping discovery is enabled. Defaults to <code class="literal">true</code>.</p></td></tr></tbody></table></div><h5><a id="unicast"></a>Unicast</h5><p>The unicast discovery allows for discovery when multicast is
not enabled. It basically requires a list of hosts to use that will act
as gossip routers. It provides the following settings with the
<code class="literal">discovery.zen.ping.unicast</code> prefix:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">hosts</code></p></td><td class="entry" align="left" valign="top"><p>Either an array setting or a comma delimited setting. Each
value is either in the form of <code class="literal">host:port</code>, or in the form of
<code class="literal">host[port1-port2]</code>.</p></td></tr></tbody></table></div><p>The unicast discovery uses the
<a class="link" href="modules-transport.html" title="Transport">transport</a> module to
perform the discovery.</p><h4><a id="master-election"></a>Master Election</h4><p>As part of the ping process a master of the cluster is either
elected or joined to. This is done automatically. The
<code class="literal">discovery.zen.ping_timeout</code> (which defaults to <code class="literal">3s</code>) allows for the
tweaking of election time to handle cases of slow or congested networks
(higher values assure less chance of failure). Once a node joins, it
will send a join request to the master (<code class="literal">discovery.zen.join_timeout</code>)
with a timeout defaulting at 20 times the ping timeout.</p><p>When the master node stops or has encountered a problem, the cluster nodes
start pinging again and will elect a new master. This pinging round also
serves as a protection against (partial) network failures where node may unjustly
think that the master has failed. In this case the node will simply hear from
other nodes about the currently active master.</p><p>If <code class="literal">discovery.zen.master_election.filter_client</code> is <code class="literal">true</code>, pings from client nodes (nodes where <code class="literal">node.client</code> is
<code class="literal">true</code>, or both <code class="literal">node.data</code> and <code class="literal">node.master</code> are <code class="literal">false</code>) are ignored during master election; the default value is
<code class="literal">true</code>. If <code class="literal">discovery.zen.master_election.filter_data</code> is <code class="literal">true</code>, pings from non-master-eligible data nodes (nodes
where <code class="literal">node.data</code> is <code class="literal">true</code> and <code class="literal">node.master</code> is <code class="literal">false</code>) are ignored during master election; the default value is
<code class="literal">false</code>. Pings from master-eligible nodes are always observed during master election.</p><p>Nodes can be excluded from becoming a master by setting <code class="literal">node.master</code> to
<code class="literal">false</code>. Note, once a node is a client node (<code class="literal">node.client</code> set to
<code class="literal">true</code>), it will not be allowed to become a master (<code class="literal">node.master</code> is
automatically set to <code class="literal">false</code>).</p><p>The <code class="literal">discovery.zen.minimum_master_nodes</code> sets the minimum
number of master eligible nodes a node should "see" in order to win a master election.
It must be set to a quorum of your master eligible nodes. It is recommended to avoid
having only two master eligible nodes, since a quorum of two is two. Therefore, a loss
of either master node will result in an inoperable cluster</p><h4><a id="fault-detection"></a>Fault Detection</h4><p>There are two fault detection processes running. The first is by the
master, to ping all the other nodes in the cluster and verify that they
are alive. And on the other end, each node pings to master to verify if
its still alive or an election process needs to be initiated.</p><p>The following settings control the fault detection process using the
<code class="literal">discovery.zen.fd</code> prefix:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">ping_interval</code></p></td><td class="entry" align="left" valign="top"><p>How often a node gets pinged. Defaults to <code class="literal">1s</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ping_timeout</code></p></td><td class="entry" align="left" valign="top"><p>How long to wait for a ping response, defaults to
<code class="literal">30s</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ping_retries</code></p></td><td class="entry" align="left" valign="top"><p>How many ping failures / timeouts cause a node to be
considered failed. Defaults to <code class="literal">3</code>.</p></td></tr></tbody></table></div><h4><a id="_external_multicast"></a>External Multicast</h4><p>The multicast discovery also supports external multicast requests to
discover nodes. The external client can send a request to the multicast
IP/group and port, in the form of:</p><div class="pre_wrapper"><pre class="programlisting">{
    "request" : {
        "cluster_name": "test_cluster"
    }
}</pre></div><p>And the response will be similar to node info response (with node level
information only, including transport/http addresses, and node
attributes):</p><div class="pre_wrapper"><pre class="programlisting">{
    "response" : {
        "cluster_name" : "test_cluster",
        "transport_address" : "...",
        "http_address" : "...",
        "attributes" : {
            "..."
        }
    }
}</pre></div><p>Note, it can still be enabled, with disabled internal multicast
discovery, but still have external discovery working by keeping
<code class="literal">discovery.zen.ping.multicast.enabled</code> set to <code class="literal">true</code> (the default), but,
setting <code class="literal">discovery.zen.ping.multicast.ping.enabled</code> to <code class="literal">false</code>.</p><h4><a id="_cluster_state_updates"></a>Cluster state updates</h4><p>The master node is the only node in a cluster that can make changes to the
cluster state. The master node processes one cluster state update at a time,
applies the required changes and publishes the updated cluster state to all
the other nodes in the cluster. Each node receives the publish message,
updates its own cluster state and replies to the master node, which waits for
all nodes to respond, up to a timeout, before going ahead processing the next
updates in the queue. The <code class="literal">discovery.zen.publish_timeout</code> is set by default
to 30 seconds and can be changed dynamically through the
<a class="link" href="cluster-update-settings.html" title="Cluster Update Settings">cluster update settings api</a></p><h4><a id="no-master-block"></a>No master block</h4><p>For the cluster to be fully operational, it must have an active master and the
number of running master eligible nodes must satisfy the
<code class="literal">discovery.zen.minimum_master_nodes</code> setting if set. The
<code class="literal">discovery.zen.no_master_block</code> settings controls what operations should be
rejected when there is no active master.</p><p>The <code class="literal">discovery.zen.no_master_block</code> setting has two valid options:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">all</code>
</p>
</td><td class="entry" valign="top">
<p>
All operations on the nodei.e. both read &amp; writeswill be rejected. This also applies for api cluster state
read or write operations, like the get index settings, put mapping and cluster state api.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">write</code>
</p>
</td><td class="entry" valign="top">
<p>
(default) Write operations will be rejected. Read operations will succeed, based on the last known cluster configuration.
This may result in partial reads of stale data as this node may be isolated from the rest of the cluster.
</p>
</td></tr></tbody></table></div><p>The <code class="literal">discovery.zen.no_master_block</code> setting doesnt apply to nodes based apis (for example cluster stats, node info and
node stats apis) which will not be blocked and try to execute on any node possible.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">Gateway</span></div><div class="navheader"><span class="prev"><a href="modules-discovery-zen.html">
              &nbsp;
              Zen Discovery</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-gateway-local.html">Local Gateway
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-gateway"></a>Gateway</h2></div></div></div><p>The gateway module allows one to store the state of the cluster meta
data across full cluster restarts. The cluster meta data mainly holds
all the indices created with their respective (index level) settings and
explicit type mappings.</p><p>Each time the cluster meta data changes (for example, when an index is
added or deleted), those changes will be persisted using the gateway.
When the cluster first starts up, the state will be read from the
gateway and applied.</p><p>The gateway set on the node level will automatically control the index
gateway that will be used. For example, if the <code class="literal">local</code> gateway is used,
then automatically, each index created on the node will also use its own
respective index level <code class="literal">local</code> gateway. In this case, if an index should
not persist its state, it should be explicitly set to <code class="literal">none</code> (which is
the only other value it can be set to).</p><p>The default gateway used is the
<a class="link" href="modules-gateway-local.html" title="Local Gateway">local</a> gateway.</p><h3><a id="recover-after"></a>Recovery After Nodes / Time</h3><p>In many cases, the actual cluster meta data should only be recovered
after specific nodes have started in the cluster, or a timeout has
passed. This is handy when restarting the cluster, and each node local
index storage still exists to be reused and not recovered from the
gateway (which reduces the time it takes to recover from the gateway).</p><p>The <code class="literal">gateway.recover_after_nodes</code> setting (which accepts a number)
controls after how many data and master eligible nodes within the
cluster recovery will start. The <code class="literal">gateway.recover_after_data_nodes</code> and
<code class="literal">gateway.recover_after_master_nodes</code> setting work in a similar fashion,
except they consider only the number of data nodes and only the number
of master nodes respectively. The <code class="literal">gateway.recover_after_time</code> setting
(which accepts a time value) sets the time to wait till recovery happens
once all <code class="literal">gateway.recover_after...nodes</code> conditions are met.</p><p>The <code class="literal">gateway.expected_nodes</code> allows to set how many data and master
eligible nodes are expected to be in the cluster, and once met, the
<code class="literal">gateway.recover_after_time</code> is ignored and recovery starts.
Setting <code class="literal">gateway.expected_nodes</code> also defaults <code class="literal">gateway.recover_after_time</code> to <code class="literal">5m</code> The <code class="literal">gateway.expected_data_nodes</code> and <code class="literal">gateway.expected_master_nodes</code>
settings are also supported. For example setting:</p><div class="pre_wrapper"><pre class="programlisting">gateway:
    recover_after_time: 5m
    expected_nodes: 2</pre></div><p>In an expected 2 nodes cluster will cause recovery to start 5 minutes
after the first node is up, but once there are 2 nodes in the cluster,
recovery will begin immediately (without waiting).</p><p>Note, once the meta data has been recovered from the gateway (which
indices to create, mappings and so on), then this setting is no longer
effective until the next full restart of the cluster.</p><p>Operations are blocked while the cluster meta data has not been
recovered in order not to mix with the actual cluster meta data that
will be recovered once the settings has been reached.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-link"><a href="modules-gateway.html">Gateway</a></span>  <span class="breadcrumb-node">Local Gateway</span></div><div class="navheader"><span class="prev"><a href="modules-gateway.html">
              &nbsp;
              Gateway</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-http.html">HTTP
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="modules-gateway-local"></a>Local Gateway</h2></div></div></div><p>The local gateway allows for recovery of the full cluster state and
indices from the local storage of each node, and does not require a
common node level shared storage.</p><p>Note, different from shared gateway types, the persistency to the local
gateway is <span class="strong emphasis"><strong>not</strong></span> done in an async manner. Once an operation is
performed, the data is there for the local gateway to recover it in case
of full cluster failure.</p><p>It is important to configure the <code class="literal">gateway.recover_after_nodes</code> setting
to include most of the expected nodes to be started after a full cluster
restart. This will insure that the latest cluster state is recovered.
For example:</p><div class="pre_wrapper"><pre class="programlisting">gateway:
    recover_after_nodes: 3
    expected_nodes: 5</pre></div><h4><a id="_dangling_indices"></a>Dangling indices</h4><p>When a node joins the cluster, any shards/indices stored in its  local <code class="literal">data/</code>
directory which do not already exist in the cluster will be imported into the
cluster by default.  This functionality has two purposes:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
If a new master node is started which is unaware of the other indices in
   the cluster, adding the old nodes will cause the old indices to be
   imported, instead of being deleted.
</li><li class="listitem">
An old index can be added to an existing cluster by copying it to the
   <code class="literal">data/</code> directory of a new node, starting the node and letting it join
   the cluster. Once the index has been replicated to other nodes in the
   cluster, the new node can be shut down and removed.
</li></ol></div><p>The import of dangling indices can be controlled with the
<code class="literal">gateway.local.auto_import_dangled</code> which accepts:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">yes</code>
</p>
</td><td class="entry" valign="top">
<p>
    Import dangling indices into the cluster (default).
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">closed</code>
</p>
</td><td class="entry" valign="top">
<p>
    Import dangling indices into the cluster state, but leave them closed.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">no</code>
</p>
</td><td class="entry" valign="top">
<p>
    Delete dangling indices after <code class="literal">gateway.local.dangling_timeout</code>, which
    defaults to 2 hours.
</p>
</td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">HTTP</span></div><div class="navheader"><span class="prev"><a href="modules-gateway-local.html">
              &nbsp;
              Local Gateway</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-indices.html">Indices
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-http"></a>HTTP</h2></div></div></div><p>The http module allows to expose <span class="strong emphasis"><strong>elasticsearch</strong></span> APIs
over HTTP.</p><p>The http mechanism is completely asynchronous in nature, meaning that
there is no blocking thread waiting for a response. The benefit of using
asynchronous communication for HTTP is solving the
<a class="ulink" href="http://en.wikipedia.org/wiki/C10k_problem" target="_top">C10k problem</a>.</p><p>When possible, consider using
<a class="ulink" href="http://en.wikipedia.org/wiki/Keepalive#HTTP_Keepalive" target="_top">HTTP keep alive</a>
when connecting for better performance and try to get your favorite
client not to do
<a class="ulink" href="http://en.wikipedia.org/wiki/Chunked_transfer_encoding" target="_top">HTTP chunking</a>.</p><h3><a id="_settings_2"></a>Settings</h3><p>The settings in the table below can be configured for HTTP. Note that none of
them are dynamically updatable so for them to take effect they should be set in
<code class="literal">elasticsearch.yml</code>.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.port</code></p></td><td class="entry" align="left" valign="top"><p>A bind port range. Defaults to <code class="literal">9200-9300</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.publish_port</code></p></td><td class="entry" align="left" valign="top"><p>The port that HTTP clients should use when
communicating with this node. Useful when a cluster node is behind a
proxy or firewall and the <code class="literal">http.port</code> is not directly addressable
from the outside. Defaults to the actual port assigned via <code class="literal">http.port</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.bind_host</code></p></td><td class="entry" align="left" valign="top"><p>The host address to bind the HTTP service to. Defaults to <code class="literal">http.host</code> (if set) or <code class="literal">network.bind_host</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.publish_host</code></p></td><td class="entry" align="left" valign="top"><p>The host address to publish for HTTP clients to connect to. Defaults to <code class="literal">http.host</code> (if set) or <code class="literal">network.publish_host</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.host</code></p></td><td class="entry" align="left" valign="top"><p>Used to set the <code class="literal">http.bind_host</code> and the <code class="literal">http.publish_host</code> Defaults to <code class="literal">http.host</code> or <code class="literal">network.host</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.max_content_length</code></p></td><td class="entry" align="left" valign="top"><p>The max content of an HTTP request. Defaults to
<code class="literal">100mb</code>. If set to greater than <code class="literal">Integer.MAX_VALUE</code>, it will be reset to 100mb.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.max_initial_line_length</code></p></td><td class="entry" align="left" valign="top"><p>The max length of an HTTP URL. Defaults
to <code class="literal">4kb</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.max_header_size</code></p></td><td class="entry" align="left" valign="top"><p>The max size of allowed headers.  Defaults to <code class="literal">8kB</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.compression</code></p></td><td class="entry" align="left" valign="top"><p>Support for compression when possible (with
Accept-Encoding). Defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.compression_level</code></p></td><td class="entry" align="left" valign="top"><p>Defines the compression level to use.
Defaults to <code class="literal">6</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.cors.enabled</code></p></td><td class="entry" align="left" valign="top"><p>Enable or disable cross-origin resource sharing,
i.e. whether a browser on another origin can do requests to
Elasticsearch. Defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.cors.allow-origin</code></p></td><td class="entry" align="left" valign="top"><p>Which origins to allow. Defaults to <code class="literal">*</code>,
i.e. any origin. If you prepend and append a <code class="literal">/</code> to the value, this will
be treated as a regular expression, allowing you to support HTTP and HTTPs.
for example using <code class="literal">/https?:\/\/localhost(:[0-9]+)?/</code> would return the
request header appropriately in both cases.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.cors.max-age</code></p></td><td class="entry" align="left" valign="top"><p>Browsers send a "preflight" OPTIONS-request to
determine CORS settings. <code class="literal">max-age</code> defines how long the result should
be cached for. Defaults to <code class="literal">1728000</code> (20 days)</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.cors.allow-methods</code></p></td><td class="entry" align="left" valign="top"><p>Which methods to allow. Defaults to
<code class="literal">OPTIONS, HEAD, GET, POST, PUT, DELETE</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.cors.allow-headers</code></p></td><td class="entry" align="left" valign="top"><p>Which headers to allow. Defaults to
<code class="literal">X-Requested-With, Content-Type, Content-Length</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.cors.allow-credentials</code></p></td><td class="entry" align="left" valign="top"><p>Whether the <code class="literal">Access-Control-Allow-Credentials</code>
header should be returned. Note: This header is only returned, when the setting is
set to <code class="literal">true</code>. Defaults to <code class="literal">false</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.detailed_errors.enabled</code></p></td><td class="entry" align="left" valign="top"><p>Enables or disables the output of detailed error messages
and stack traces in response output. Note: When set to <code class="literal">false</code> and the <code class="literal">error_trace</code> request
parameter is specified, an error will be returned; when <code class="literal">error_trace</code> is not specified, a
simple message will be returned. Defaults to <code class="literal">true</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.pipelining</code></p></td><td class="entry" align="left" valign="top"><p>Enable or disable HTTP pipelining, defaults to <code class="literal">true</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">http.pipelining.max_events</code></p></td><td class="entry" align="left" valign="top"><p>The maximum number of events to be queued up in memory before a HTTP connection is closed, defaults to <code class="literal">10000</code>.</p></td></tr></tbody></table></div><p>It also uses the common
<a class="link" href="modules-network.html" title="Network Settings">network settings</a>.</p><h3><a id="_disable_http"></a>Disable HTTP</h3><p>The http module can be completely disabled and not started by setting
<code class="literal">http.enabled</code> to <code class="literal">false</code>. Elasticsearch nodes (and Java clients) communicate
internally using the <a class="link" href="modules-transport.html" title="Transport">transport interface</a>, not HTTP. It
might make  sense to disable the <code class="literal">http</code> layer entirely on nodes which are not
meant to serve REST requests directly. For instance, you could disable HTTP on
<a class="link" href="modules-node.html" title="Node">data-only nodes</a> if you also have
<a class="link" href="modules-node.html" title="Node">client nodes</a> which are intended to serve all REST requests.
Be aware, however, that you will not be able to send any REST requests (eg to
retrieve node stats) directly to nodes which have HTTP disabled.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">Indices</span></div><div class="navheader"><span class="prev"><a href="modules-http.html">
              &nbsp;
              HTTP</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-memcached.html">memcached
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-indices"></a>Indices</h2></div></div></div><p>The indices module allow to control settings that are globally managed
for all indices.</p><h3><a id="buffer"></a>Indexing Buffer</h3><p>The indexing buffer setting allows to control how much memory will be
allocated for the indexing process. It is a global setting that bubbles
down to all the different shards allocated on a specific node.</p><p>The <code class="literal">indices.memory.index_buffer_size</code> accepts either a percentage or a
byte size value. It defaults to <code class="literal">10%</code>, meaning that <code class="literal">10%</code> of the total
memory allocated to a node will be used as the indexing buffer size.
This amount is then divided between all the different shards. Also, if
percentage is used, it is possible to set <code class="literal">min_index_buffer_size</code> (defaults to
<code class="literal">48mb</code>) and <code class="literal">max_index_buffer_size</code> (defaults to unbounded).</p><p>The <code class="literal">indices.memory.min_shard_index_buffer_size</code> allows to set a hard
lower limit for the memory allocated per shard for its own indexing
buffer. It defaults to <code class="literal">4mb</code>.</p><h3><a id="indices-ttl"></a>TTL interval</h3><p>You can dynamically set the <code class="literal">indices.ttl.interval</code>, which allows to set how
often expired documents will be automatically deleted. The default value
is 60s.</p><p>The deletion orders are processed by bulk. You can set
<code class="literal">indices.ttl.bulk_size</code> to fit your needs. The default value is 10000.</p><p>See also <a class="xref" href="mapping-ttl-field.html" title="_ttl"><code class="literal">_ttl</code></a>.</p><h3><a id="recovery"></a>Recovery</h3><p>The following settings can be set to manage the recovery policy:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">indices.recovery.concurrent_streams</code>
</p>
</td><td class="entry" valign="top">
<p>
    defaults to <code class="literal">3</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">indices.recovery.concurrent_small_file_streams</code>
</p>
</td><td class="entry" valign="top">
<p>
    defaults to <code class="literal">2</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">indices.recovery.file_chunk_size</code>
</p>
</td><td class="entry" valign="top">
<p>
    defaults to <code class="literal">512kb</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">indices.recovery.translog_ops</code>
</p>
</td><td class="entry" valign="top">
<p>
    defaults to <code class="literal">1000</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">indices.recovery.translog_size</code>
</p>
</td><td class="entry" valign="top">
<p>
    defaults to <code class="literal">512kb</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">indices.recovery.compress</code>
</p>
</td><td class="entry" valign="top">
<p>
    defaults to <code class="literal">true</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">indices.recovery.max_bytes_per_sec</code>
</p>
</td><td class="entry" valign="top">
<p>
    defaults to <code class="literal">40mb</code>.
</p>
</td></tr></tbody></table></div><h3><a id="throttling"></a>Store level throttling</h3><p>The following settings can be set to control the store throttling:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">indices.store.throttle.type</code>
</p>
</td><td class="entry" valign="top">
<p>
    could be <code class="literal">merge</code> (default), <code class="literal">none</code> or <code class="literal">all</code>. See <a class="xref" href="index-modules-store.html" title="Store"><em>Store</em></a>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">indices.store.throttle.max_bytes_per_sec</code>
</p>
</td><td class="entry" valign="top">
<p>
    defaults to <code class="literal">20mb</code>.
</p>
</td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">memcached</span></div><div class="navheader"><span class="prev"><a href="modules-indices.html">
              &nbsp;
              Indices</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-network.html">Network Settings
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-memcached"></a>memcached</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.5.0. </h3>
The memcached transport is deprecated and will be removed in 2.0.0
</div></div><p>The memcached module allows to expose <span class="strong emphasis"><strong>elasticsearch</strong></span>
APIs over the memcached protocol (as closely
as possible).</p><p>It is provided as a plugin called <code class="literal">transport-memcached</code> and installing
is explained
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-transport-memcached" target="_top">here</a>
. Another option is to download the memcached plugin and placing it
under the <code class="literal">plugins</code> directory.</p><p>The memcached protocol supports both the binary and the text protocol,
automatically detecting the correct one to use.</p><h3><a id="_mapping_rest_to_memcached_protocol"></a>Mapping REST to Memcached Protocol</h3><p>Memcached commands are mapped to REST and handled by the same generic
REST layer in elasticsearch. Here is a list of the memcached commands
supported:</p><h4><a id="_get"></a>GET</h4><p>The memcached <code class="literal">GET</code> command maps to a REST <code class="literal">GET</code>. The key used is the
URI (with parameters). The main downside is the fact that the memcached
<code class="literal">GET</code> does not allow body in the request (and <code class="literal">SET</code> does not allow to
return a result). For this reason, most REST APIs (like search) allow
to accept the "source" as a URI parameter as well.</p><h4><a id="_set"></a>SET</h4><p>The memcached <code class="literal">SET</code> command maps to a REST <code class="literal">POST</code>. The key used is the
URI (with parameters), and the body maps to the REST body.</p><h4><a id="_delete"></a>DELETE</h4><p>The memcached <code class="literal">DELETE</code> command maps to a REST <code class="literal">DELETE</code>. The key used is
the URI (with parameters).</p><h4><a id="_quit"></a>QUIT</h4><p>The memcached <code class="literal">QUIT</code> command is supported and disconnects the client.</p><h3><a id="_settings_3"></a>Settings</h3><p>The following are the settings the can be configured for memcached:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">memcached.port</code></p></td><td class="entry" align="left" valign="top"><p>A bind port range. Defaults to <code class="literal">11211-11311</code>.</p></td></tr></tbody></table></div><p>It also uses the common
<a class="link" href="modules-network.html" title="Network Settings">network settings</a>.</p><h3><a id="_disable_memcached"></a>Disable memcached</h3><p>The memcached module can be completely disabled and not started using by
setting <code class="literal">memcached.enabled</code> to <code class="literal">false</code>. By default it is enabled once it
is detected as a plugin.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">Network Settings</span></div><div class="navheader"><span class="prev"><a href="modules-memcached.html">
              &nbsp;
              memcached</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-node.html">Node
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-network"></a>Network Settings</h2></div></div></div><p>There are several modules within a Node that use network based
configuration, for example, the
<a class="link" href="modules-transport.html" title="Transport">transport</a> and
<a class="link" href="modules-http.html" title="HTTP">http</a> modules. Node level
network settings allows to set common settings that will be shared among
all network based modules (unless explicitly overridden in each module).</p><p>The <code class="literal">network.bind_host</code> setting allows to control the host different
network components will bind on. By default, the bind host will be
<code class="literal">anyLocalAddress</code> (typically <code class="literal">0.0.0.0</code> or <code class="literal">::0</code>).</p><p>The <code class="literal">network.publish_host</code> setting allows to control the host the node
will publish itself within the cluster so other nodes will be able to
connect to it. Of course, this cant be the <code class="literal">anyLocalAddress</code>, and by
default, it will be the first non loopback address (if possible), or the
local address.</p><p>The <code class="literal">network.host</code> setting is a simple setting to automatically set both
<code class="literal">network.bind_host</code> and <code class="literal">network.publish_host</code> to the same host value.</p><p>Both settings allows to be configured with either explicit host address
or host name. The settings also accept logical setting values explained
in the following table:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Logical Host Setting Value </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">_local_</code></p></td><td class="entry" align="left" valign="top"><p>Will be resolved to the local ip address.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">_non_loopback_</code></p></td><td class="entry" align="left" valign="top"><p>The first non loopback address.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">_non_loopback:ipv4_</code></p></td><td class="entry" align="left" valign="top"><p>The first non loopback IPv4 address.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">_non_loopback:ipv6_</code></p></td><td class="entry" align="left" valign="top"><p>The first non loopback IPv6 address.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">_[networkInterface]_</code></p></td><td class="entry" align="left" valign="top"><p>Resolves to the ip address of the provided
network interface. For example <code class="literal">_en0_</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">_[networkInterface]:ipv4_</code></p></td><td class="entry" align="left" valign="top"><p>Resolves to the ipv4 address of the
provided network interface. For example <code class="literal">_en0:ipv4_</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">_[networkInterface]:ipv6_</code></p></td><td class="entry" align="left" valign="top"><p>Resolves to the ipv6 address of the
provided network interface. For example <code class="literal">_en0:ipv6_</code>.</p></td></tr></tbody></table></div><p>When the <code class="literal">cloud-aws</code> plugin is installed, the following are also allowed
as valid network host settings:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">EC2 Host Value </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">_ec2:privateIpv4_</code></p></td><td class="entry" align="left" valign="top"><p>The private IP address (ipv4) of the machine.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">_ec2:privateDns_</code></p></td><td class="entry" align="left" valign="top"><p>The private host of the machine.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">_ec2:publicIpv4_</code></p></td><td class="entry" align="left" valign="top"><p>The public IP address (ipv4) of the machine.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">_ec2:publicDns_</code></p></td><td class="entry" align="left" valign="top"><p>The public host of the machine.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">_ec2_</code></p></td><td class="entry" align="left" valign="top"><p>Less verbose option for the private ip address.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">_ec2:privateIp_</code></p></td><td class="entry" align="left" valign="top"><p>Less verbose option for the private ip address.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">_ec2:publicIp_</code></p></td><td class="entry" align="left" valign="top"><p>Less verbose option for the public ip address.</p></td></tr></tbody></table></div><h3><a id="tcp-settings"></a>TCP Settings</h3><p>Any component that uses TCP (like the HTTP, Transport and Memcached)
share the following allowed settings:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">network.tcp.no_delay</code></p></td><td class="entry" align="left" valign="top"><p>Enable or disable tcp no delay setting.
Defaults to <code class="literal">true</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">network.tcp.keep_alive</code></p></td><td class="entry" align="left" valign="top"><p>Enable or disable tcp keep alive. Defaults
to <code class="literal">true</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">network.tcp.reuse_address</code></p></td><td class="entry" align="left" valign="top"><p>Should an address be reused or not.
Defaults to <code class="literal">true</code> on non-windows machines.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">network.tcp.send_buffer_size</code></p></td><td class="entry" align="left" valign="top"><p>The size of the tcp send buffer size
(in size setting format). By default not explicitly set.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">network.tcp.receive_buffer_size</code></p></td><td class="entry" align="left" valign="top"><p>The size of the tcp receive buffer
size (in size setting format). By default not explicitly set.</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">Node</span></div><div class="navheader"><span class="prev"><a href="modules-network.html">
              &nbsp;
              Network Settings</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-tribe.html">Tribe node
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-node"></a>Node</h2></div></div></div><p><span class="strong emphasis"><strong>elasticsearch</strong></span> allows to configure a node to either be allowed to store
data locally or not. Storing data locally basically means that shards of
different indices are allowed to be allocated on that node. By default,
each node is considered to be a data node, and it can be turned off by
setting <code class="literal">node.data</code> to <code class="literal">false</code>.</p><p>This is a powerful setting allowing to create 2 types of  non-data nodes:
dedicated master nodes and client nodes.</p><p><span class="strong emphasis"><strong>client nodes</strong></span> are smart load
balancers that take part in some of the processing steps.
Lets take an example:</p><p>We can start a whole cluster of data nodes which do not even start an
HTTP transport by setting <code class="literal">http.enabled</code> to <code class="literal">false</code>. Such nodes will
communicate with one another using the
<a class="link" href="modules-transport.html" title="Transport">transport</a> module. In front
of the cluster we can start one or more "client" nodes which will
start with HTTP enabled.  These client nodes will have the settings <code class="literal">node.data: false</code>
and <code class="literal">node.master: false</code>.  All HTTP communication will be performed
through these client nodes.</p><p>These "client" nodes are still part of the cluster, and
they can redirect operations exactly to the node that holds the relevant
data without having to query all nodes.  However, they do not store data and also do not perform cluster
management operations.  The other benefit is the fact that for scatter / gather based
operations (such as search), since the client nodes will start the scatter process, they will perform the
actual gather processing.  This relieves the data nodes to do the heavy duty of indexing and
searching, without needing to process HTTP requests (parsing), overload
the network, or perform the gather processing.</p><p><span class="strong emphasis"><strong>dedicated master nodes</strong></span> are nodes with the settings <code class="literal">node.data: false</code>
and <code class="literal">node.master: true</code>.  We actively promote the use of dedicated master nodes in critical clusters to
make sure that there are 3 dedicated nodes whose only role is to be master, a lightweight operational (cluster management)
responsibility.  By reducing the amount of resource intensive work that these nodes do (in other words, do not send index
or search requests to these dedicated master nodes),
we greatly reduce the chance of cluster instability.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">Tribe node</span></div><div class="navheader"><span class="prev"><a href="modules-node.html">
              &nbsp;
              Node</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-plugins.html">Plugins
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-tribe"></a>Tribe node</h2></div></div></div><p>The <span class="emphasis"><em>tribes</em></span> feature allows a <span class="emphasis"><em>tribe node</em></span> to act as a federated client across
multiple clusters.</p><p>The tribe node works by retrieving the cluster state from all connected
clusters and merging them into a global cluster state. With this information
at hand, it is able to perform read and write operations against the nodes in
all clusters as if they were local.</p><p>The <code class="literal">elasticsearch.yml</code> config file for a tribe node just needs to list the
clusters that should be joined, for instance:</p><div class="pre_wrapper"><pre class="programlisting">tribe:
    t1: <a id="CO116-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span>
        cluster.name:   cluster_one
    t2: <a id="CO116-2"></a><span><img class="images-icons-callouts-2-png" alt=""></span>
        cluster.name:   cluster_two</pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO116-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> <a href="#CO116-2"><span><img class="images-icons-callouts-2-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
<code class="literal">t1</code> and <code class="literal">t2</code> are arbitrary names representing the connection to each
    cluster.
</p></td></tr></tbody></table></div><p>The example above configures connections to two clusters, name <code class="literal">t1</code> and <code class="literal">t2</code>
respectively.  The tribe node will create a <a class="link" href="modules-node.html" title="Node">node client</a> to
connect each cluster using <a class="link" href="modules-discovery-zen.html#multicast" title="Multicastedit">multicast discovery</a> by default. Any
other settings for the connection can be configured under <code class="literal">tribe.{name}</code>, just
like the <code class="literal">cluster.name</code> in the example.</p><p>The merged global cluster state means that almost all operations work in the
same way as a single cluster: distributed search, suggest, percolation,
indexing, etc.</p><p>However, there are a few exceptions:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
The merged view cannot handle indices with the same name in multiple
  clusters. By default it will pick one of them, see later for on_conflict options.
</li><li class="listitem">
Master level read operations (eg <a class="xref" href="cluster-state.html" title="Cluster State"><em>Cluster State</em></a>, <a class="xref" href="cluster-health.html" title="Cluster Health"><em>Cluster Health</em></a>)
  will automatically execute with a local flag set to true since there is
  no master.
</li><li class="listitem">
Master level write operations (eg <a class="xref" href="indices-create-index.html" title="Create Index"><em>Create Index</em></a>) are not
  allowed. These should be performed on a single cluster.
</li></ul></div><p>The tribe node can be configured to block all write operations and all
metadata operations with:</p><div class="pre_wrapper"><pre class="programlisting">tribe:
    blocks:
        write:    true
        metadata: true</pre></div><p>The tribe node can also configure blocks on indices explicitly:</p><div class="pre_wrapper"><pre class="programlisting">tribe:
    blocks:
        indices.write: hk*,ldn*</pre></div><p>When there is a conflict and multiple clusters hold the same index, by default
the tribe node will pick one of them. This can be configured using the <code class="literal">tribe.on_conflict</code>
setting. It defaults to <code class="literal">any</code>, but can be set to <code class="literal">drop</code> (drop indices that have
a conflict), or <code class="literal">prefer_[tribeName]</code> to prefer the index from a specific tribe.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">Plugins</span></div><div class="navheader"><span class="prev"><a href="modules-tribe.html">
              &nbsp;
              Tribe node</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-scripting.html">Scripting
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-plugins"></a>Plugins</h2></div></div></div><h3><a id="_plugins"></a>Plugins</h3><p>Plugins are a way to enhance the basic elasticsearch functionality in a
custom manner. They range from adding custom mapping types, custom
analyzers (in a more built in fashion), native scripts, custom discovery
and more.</p><h4><a id="installing"></a>Installing plugins</h4><p>Installing plugins can either be done manually by placing them under the
<code class="literal">plugins</code> directory, or using the <code class="literal">plugin</code> script. Several plugins can
be found under the <a class="ulink" href="https://github.com/elasticsearch" target="_top">elasticsearch</a>
organization in GitHub, starting with <code class="literal">elasticsearch-</code>.</p><p>Installing plugins typically take the following form:</p><div class="pre_wrapper"><pre class="programlisting">plugin --install &lt;org&gt;/&lt;user/component&gt;/&lt;version&gt;</pre></div><p>The plugins will be
automatically downloaded in this case from <code class="literal">download.elastic.co</code>,
and in case they dont exist there, from maven (central and sonatype).</p><p>Note that when the plugin is located in maven central or sonatype
repository, <code class="literal">&lt;org&gt;</code> is the artifact <code class="literal">groupId</code> and <code class="literal">&lt;user/component&gt;</code> is
the <code class="literal">artifactId</code>.</p><p>A plugin can also be installed directly by specifying the URL for it,
for example:</p><div class="pre_wrapper"><pre class="programlisting">bin/plugin --url file:///path/to/plugin --install plugin-name</pre></div><p>You can run <code class="literal">bin/plugin -h</code>.</p><p>Once your plugin is installed, youll have to restart the node(s) for the plugin to become active.</p><h4><a id="site-plugins"></a>Site Plugins</h4><p>Plugins can have "sites" in them, any plugin that exists under the
<code class="literal">plugins</code> directory with a <code class="literal">_site</code> directory, its content will be
statically served when hitting <code class="literal">/_plugin/[plugin_name]/</code> url. Those can
be added even after the process has started.</p><p>Installed plugins that do not contain any java related content, will
automatically be detected as site plugins, and their content will be
moved under <code class="literal">_site</code>.</p><p>The ability to install plugins from Github allows to easily install site
plugins hosted there by downloading the actual repo, for example,
running:</p><div class="pre_wrapper"><pre class="programlisting">bin/plugin --install mobz/elasticsearch-head
bin/plugin --install lukas-vlcek/bigdesk</pre></div><p>Will install both of those site plugins, with <code class="literal">elasticsearch-head</code>
available under <code class="literal">http://localhost:9200/_plugin/head/</code> and <code class="literal">bigdesk</code>
available under <code class="literal">http://localhost:9200/_plugin/bigdesk/</code>.</p><h4><a id="_mandatory_plugins"></a>Mandatory Plugins</h4><p>If you rely on some plugins, you can define mandatory plugins using the
<code class="literal">plugin.mandatory</code> attribute, for example, here is a sample config:</p><div class="pre_wrapper"><pre class="programlisting">plugin.mandatory: mapper-attachments,lang-groovy</pre></div><p>For safety reasons, if a mandatory plugin is not installed, the node
will not start.</p><h4><a id="_installed_plugins"></a>Installed Plugins</h4><p>A list of the currently loaded plugins can be retrieved using the
<a class="link" href="cluster-nodes-info.html" title="Nodes Info">Nodes Info API</a>.</p><h4><a id="_removing_plugins"></a>Removing plugins</h4><p>Removing plugins can either be done manually by removing them under the
<code class="literal">plugins</code> directory, or using the <code class="literal">plugin</code> script.</p><p>Removing plugins typically take the following form:</p><div class="pre_wrapper"><pre class="programlisting">plugin --remove &lt;pluginname&gt;</pre></div><h4><a id="_silent_verbose_mode"></a>Silent/Verbose mode</h4><p>When running the <code class="literal">plugin</code> script, you can get more information (debug mode) using <code class="literal">--verbose</code>.
On the opposite, if you want <code class="literal">plugin</code> script to be silent, use <code class="literal">--silent</code> option.</p><p>Note that exit codes could be:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">0</code>: everything was OK
</li><li class="listitem">
<code class="literal">64</code>: unknown command or incorrect option parameter
</li><li class="listitem">
<code class="literal">74</code>: IO error
</li><li class="listitem">
<code class="literal">70</code>: other errors
</li></ul></div><div class="pre_wrapper"><pre class="programlisting">bin/plugin --install mobz/elasticsearch-head --verbose
plugin --remove head --silent</pre></div><h4><a id="_timeout_settings"></a>Timeout settings</h4><p>By default, the <code class="literal">plugin</code> script will wait indefinitely when downloading before failing.
The timeout parameter can be used to explicitly specify how long it waits. Here is some examples of setting it to
different values:</p><div class="pre_wrapper"><pre class="programlisting"># Wait for 30 seconds before failing
bin/plugin --install mobz/elasticsearch-head --timeout 30s

# Wait for 1 minute before failing
bin/plugin --install mobz/elasticsearch-head --timeout 1m

# Wait forever (default)
bin/plugin --install mobz/elasticsearch-head --timeout 0</pre></div><h4><a id="_proxy_settings"></a>Proxy settings</h4><p>To install a plugin via a proxy, you can pass the proxy details using the environment variables <code class="literal">proxyHost</code> and <code class="literal">proxyPort</code>.</p><p>On Linux and Mac, here is an example of setting it:</p><div class="pre_wrapper"><pre class="programlisting">bin/plugin -DproxyHost=host_name -DproxyPort=port_number --install mobz/elasticsearch-head</pre></div><p>On Windows, here is an example of setting it:</p><div class="pre_wrapper"><pre class="programlisting">set JAVA_OPTS="-DproxyHost=host_name -DproxyPort=port_number"
bin/plugin --install mobz/elasticsearch-head</pre></div><h4><a id="_lucene_version_dependent_plugins"></a>Lucene version dependent plugins</h4><p>For some plugins, such as analysis plugins, a specific major Lucene version is
required to run. In that case, the plugin provides in its <code class="literal">es-plugin.properties</code>
file the Lucene version for which the plugin was built for.</p><p>If present at startup the node will check the Lucene version before loading the plugin.</p><p>You can disable that check using <code class="literal">plugins.check_lucene: false</code>.</p><h3><a id="known-plugins"></a>Known Plugins</h3><h4><a id="analysis-plugins"></a>Analysis Plugins</h4><div class="itemizedlist"><p class="title"><strong>Supported by Elasticsearch</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-analysis-icu" target="_top">ICU Analysis plugin</a>
</li><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-analysis-kuromoji" target="_top">Japanese (Kuromoji) Analysis plugin</a>.
</li><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-analysis-smartcn" target="_top">Smart Chinese Analysis Plugin</a>
</li><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-analysis-stempel" target="_top">Stempel (Polish) Analysis plugin</a>
</li></ul></div><div class="itemizedlist"><p class="title"><strong>Supported by the community</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/barminator/elasticsearch-analysis-annotation" target="_top">Annotation Analysis Plugin</a> (by Michal Samek)
</li><li class="listitem">
<a class="ulink" href="https://github.com/yakaz/elasticsearch-analysis-combo/" target="_top">Combo Analysis Plugin</a> (by Olivier Favre, Yakaz)
</li><li class="listitem">
<a class="ulink" href="https://github.com/jprante/elasticsearch-analysis-hunspell" target="_top">Hunspell Analysis Plugin</a> (by Jrg Prante)
</li><li class="listitem">
<a class="ulink" href="https://github.com/medcl/elasticsearch-analysis-ik" target="_top">IK Analysis Plugin</a> (by Medcl)
</li><li class="listitem">
<a class="ulink" href="https://github.com/suguru/elasticsearch-analysis-japanese" target="_top">Japanese Analysis plugin</a> (by suguru).
</li><li class="listitem">
<a class="ulink" href="https://github.com/medcl/elasticsearch-analysis-mmseg" target="_top">Mmseg Analysis Plugin</a> (by Medcl)
</li><li class="listitem">
<a class="ulink" href="https://github.com/chytreg/elasticsearch-analysis-morfologik" target="_top">Morfologik (Polish) Analysis plugin</a> (by chytreg)
</li><li class="listitem">
<a class="ulink" href="https://github.com/imotov/elasticsearch-analysis-morphology" target="_top">Russian and English Morphological Analysis Plugin</a> (by Igor Motov)
</li><li class="listitem">
<a class="ulink" href="https://github.com/synhershko/elasticsearch-analysis-hebrew" target="_top">Hebrew Analysis Plugin</a> (by Itamar Syn-Hershko)
</li><li class="listitem">
<a class="ulink" href="https://github.com/medcl/elasticsearch-analysis-pinyin" target="_top">Pinyin Analysis Plugin</a> (by Medcl)
</li><li class="listitem">
<a class="ulink" href="https://github.com/medcl/elasticsearch-analysis-string2int" target="_top">String2Integer Analysis Plugin</a> (by Medcl)
</li><li class="listitem">
<a class="ulink" href="https://github.com/duydo/elasticsearch-analysis-vietnamese" target="_top">Vietnamese Analysis Plugin</a> (by Duy Do)
</li><li class="listitem">
<a class="ulink" href="https://github.com/ofir123/elasticsearch-network-analysis" target="_top">Network Addresses Analysis Plugin</a> (by Ofir123)
</li></ul></div><h4><a id="discovery-plugins"></a>Discovery Plugins</h4><div class="itemizedlist"><p class="title"><strong>Supported by Elasticsearch</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-cloud-aws" target="_top">AWS Cloud Plugin</a> - EC2 discovery and S3 Repository
</li><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-cloud-azure" target="_top">Azure Cloud Plugin</a> - Azure discovery
</li><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-cloud-gce" target="_top">Google Compute Engine Cloud Plugin</a> - GCE discovery
</li></ul></div><div class="itemizedlist"><p class="title"><strong>Supported by the community</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/shikhar/eskka" target="_top">eskka Discovery Plugin</a> (by Shikhar Bhushan)
</li><li class="listitem">
<a class="ulink" href="https://github.com/grantr/elasticsearch-srv-discovery" target="_top">DNS SRV Discovery Plugin</a> (by Grant Rodgers)
</li></ul></div><h4><a id="river"></a>River Plugins</h4><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.5.0. </h3>
Rivers have been deprecated.  See https://www.elastic.co/blog/deprecating_rivers for more details
</div></div><div class="itemizedlist"><p class="title"><strong>Supported by Elasticsearch</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-river-couchdb" target="_top">CouchDB River Plugin</a>
</li><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-river-rabbitmq" target="_top">RabbitMQ River Plugin</a>
</li><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-river-twitter" target="_top">Twitter River Plugin</a>
</li><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-river-wikipedia" target="_top">Wikipedia River Plugin</a>
</li></ul></div><div class="itemizedlist"><p class="title"><strong>Supported by the community</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/domdorn/elasticsearch-river-activemq/" target="_top">ActiveMQ River Plugin</a> (by Dominik Dorn)
</li><li class="listitem">
<a class="ulink" href="https://github.com/albogdano/elasticsearch-river-amazonsqs" target="_top">Amazon SQS River Plugin</a> (by Alex Bogdanovski)
</li><li class="listitem">
<a class="ulink" href="https://github.com/xxBedy/elasticsearch-river-csv" target="_top">CSV River Plugin</a> (by Martin Bednar)
</li><li class="listitem">
<a class="ulink" href="http://www.pilato.fr/dropbox/" target="_top">Dropbox River Plugin</a> (by David Pilato)
</li><li class="listitem">
<a class="ulink" href="http://www.pilato.fr/fsriver/" target="_top">FileSystem River Plugin</a> (by David Pilato)
</li><li class="listitem">
<a class="ulink" href="https://github.com/obazoud/elasticsearch-river-git" target="_top">Git River Plugin</a> (by Olivier Bazoud)
</li><li class="listitem">
<a class="ulink" href="https://github.com/uberVU/elasticsearch-river-github" target="_top">GitHub River Plugin</a> (by uberVU)
</li><li class="listitem">
<a class="ulink" href="https://github.com/sksamuel/elasticsearch-river-hazelcast" target="_top">Hazelcast River Plugin</a> (by Steve Samuel)
</li><li class="listitem">
<a class="ulink" href="https://github.com/jprante/elasticsearch-river-jdbc" target="_top">JDBC River Plugin</a> (by Jrg Prante)
</li><li class="listitem">
<a class="ulink" href="https://github.com/qotho/elasticsearch-river-jms" target="_top">JMS River Plugin</a> (by Steve Sarandos)
</li><li class="listitem">
<a class="ulink" href="https://github.com/endgameinc/elasticsearch-river-kafka" target="_top">Kafka River Plugin</a> (by Endgame Inc.)
</li><li class="listitem">
<a class="ulink" href="https://github.com/mariamhakobyan/elasticsearch-river-kafka" target="_top">Kafka River Plugin 2</a> (by Mariam Hakobyan)
</li><li class="listitem">
<a class="ulink" href="https://github.com/tlrx/elasticsearch-river-ldap" target="_top">LDAP River Plugin</a> (by Tanguy Leroux)
</li><li class="listitem">
<a class="ulink" href="https://github.com/richardwilly98/elasticsearch-river-mongodb/" target="_top">MongoDB River Plugin</a> (by Richard Louapre)
</li><li class="listitem">
<a class="ulink" href="https://github.com/sksamuel/elasticsearch-river-neo4j" target="_top">Neo4j River Plugin</a> (by Steve Samuel)
</li><li class="listitem">
<a class="ulink" href="https://github.com/jprante/elasticsearch-river-oai/" target="_top">Open Archives Initiative (OAI) River Plugin</a> (by Jrg Prante)
</li><li class="listitem">
<a class="ulink" href="https://github.com/sksamuel/elasticsearch-river-redis" target="_top">Redis River Plugin</a> (by Steve Samuel)
</li><li class="listitem">
<a class="ulink" href="https://github.com/rethinkdb/elasticsearch-river-rethinkdb" target="_top">RethinkDB River Plugin</a> (by RethinkDB)
</li><li class="listitem">
<a class="ulink" href="http://dadoonet.github.com/rssriver/" target="_top">RSS River Plugin</a> (by David Pilato)
</li><li class="listitem">
<a class="ulink" href="https://github.com/adamlofts/elasticsearch-river-sofa" target="_top">Sofa River Plugin</a> (by adamlofts)
</li><li class="listitem">
<a class="ulink" href="https://github.com/javanna/elasticsearch-river-solr/" target="_top">Solr River Plugin</a> (by Luca Cavanna)
</li><li class="listitem">
<a class="ulink" href="https://github.com/sunnygleason/elasticsearch-river-st9" target="_top">St9 River Plugin</a> (by Sunny Gleason)
</li><li class="listitem">
<a class="ulink" href="https://github.com/plombard/SubversionRiver" target="_top">Subversion River Plugin</a> (by Pascal Lombard)
</li><li class="listitem">
<a class="ulink" href="https://github.com/kzwang/elasticsearch-river-dynamodb" target="_top">DynamoDB River Plugin</a> (by Kevin Wang)
</li><li class="listitem">
<a class="ulink" href="https://github.com/salyh/elasticsearch-river-imap" target="_top">IMAP/POP3 Email River Plugin</a> (by Hendrik Saly)
</li><li class="listitem">
<a class="ulink" href="https://github.com/codelibs/elasticsearch-river-web" target="_top">Web River Plugin</a> (by CodeLibs Project)
</li><li class="listitem">
<a class="ulink" href="https://github.com/eea/eea.elasticsearch.river.rdf" target="_top">EEA ElasticSearch RDF River Plugin</a> (by the European Environment Agency)
</li><li class="listitem">
<a class="ulink" href="https://github.com/lbroudoux/es-amazon-s3-river" target="_top">Amazon S3 River Plugin</a> (by Laurent Broudoux)
</li><li class="listitem">
<a class="ulink" href="https://github.com/lbroudoux/es-google-drive-river" target="_top">Google Drive River Plugin</a> (by Laurent Broudoux)
</li></ul></div><h4><a id="transport"></a>Transport Plugins</h4><div class="itemizedlist"><p class="title"><strong>Supported by Elasticsearch</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-transport-wares" target="_top">Servlet transport</a>
</li></ul></div><div class="itemizedlist"><p class="title"><strong>Supported by the community</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/tlrx/transport-zeromq" target="_top">ZeroMQ transport layer plugin</a> (by Tanguy Leroux)
</li><li class="listitem">
<a class="ulink" href="https://github.com/sonian/elasticsearch-jetty" target="_top">Jetty HTTP transport plugin</a> (by Sonian Inc.)
</li><li class="listitem">
<a class="ulink" href="https://github.com/kzwang/elasticsearch-transport-redis" target="_top">Redis transport plugin</a> (by Kevin Wang)
</li></ul></div><h4><a id="scripting"></a>Scripting Plugins</h4><div class="itemizedlist"><p class="title"><strong>Supported by Elasticsearch</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-lang-groovy" target="_top">Groovy lang Plugin</a>
</li><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-lang-javascript" target="_top">JavaScript language Plugin</a>
</li><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-lang-python" target="_top">Python language Plugin</a>
</li></ul></div><div class="itemizedlist"><p class="title"><strong>Supported by the community</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/hiredman/elasticsearch-lang-clojure" target="_top">Clojure Language Plugin</a> (by Kevin Downey)
</li><li class="listitem">
<a class="ulink" href="https://github.com/NLPchina/elasticsearch-sql/" target="_top">SQL language Plugin</a> (by nlpcn)
</li></ul></div><h4><a id="site"></a>Site Plugins</h4><div class="itemizedlist"><p class="title"><strong>Supported by the community</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/lukas-vlcek/bigdesk" target="_top">BigDesk Plugin</a> (by Luk Vlek)
</li><li class="listitem">
<a class="ulink" href="https://github.com/mobz/elasticsearch-head" target="_top">Elasticsearch Head Plugin</a> (by Ben Birch)
</li><li class="listitem">
<a class="ulink" href="https://github.com/royrusso/elasticsearch-HQ" target="_top">Elasticsearch HQ</a> (by Roy Russo)
</li><li class="listitem">
<a class="ulink" href="https://github.com/andrewvc/elastic-hammer" target="_top">Hammer Plugin</a> (by Andrew Cholakian)
</li><li class="listitem">
<a class="ulink" href="https://github.com/polyfractal/elasticsearch-inquisitor" target="_top">Inquisitor Plugin</a> (by Zachary Tong)
</li><li class="listitem">
<a class="ulink" href="https://github.com/karmi/elasticsearch-paramedic" target="_top">Paramedic Plugin</a> (by Karel Minak)
</li><li class="listitem">
<a class="ulink" href="https://github.com/polyfractal/elasticsearch-segmentspy" target="_top">SegmentSpy Plugin</a> (by Zachary Tong)
</li><li class="listitem">
<a class="ulink" href="https://github.com/xyu/elasticsearch-whatson" target="_top">Whatson Plugin</a> (by Xiao Yu)
</li><li class="listitem">
<a class="ulink" href="https://github.com/lmenezes/elasticsearch-kopf" target="_top">Kopf Plugin</a> (by lmenezes)
</li></ul></div><h4><a id="repository-plugins"></a>Snapshot/Restore Repository Plugins</h4><div class="itemizedlist"><p class="title"><strong>Supported by Elasticsearch</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-hadoop/tree/master/repository-hdfs" target="_top">Hadoop HDFS</a> Repository
</li><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-cloud-aws#s3-repository" target="_top">AWS S3</a> Repository
</li></ul></div><div class="itemizedlist"><p class="title"><strong>Supported by the community</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/kzwang/elasticsearch-repository-gridfs" target="_top">GridFS</a> Repository (by Kevin Wang)
</li><li class="listitem">
<a class="ulink" href="https://github.com/wikimedia/search-repository-swift" target="_top">Openstack Swift</a>
</li></ul></div><h4><a id="misc"></a>Misc Plugins</h4><div class="itemizedlist"><p class="title"><strong>Supported by Elasticsearch</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-mapper-attachments" target="_top">Mapper Attachments Type plugin</a>
</li></ul></div><div class="itemizedlist"><p class="title"><strong>Supported by the community</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/carrot2/elasticsearch-carrot2" target="_top">carrot2 Plugin</a>: Results clustering with carrot2 (by Dawid Weiss)
</li><li class="listitem">
<a class="ulink" href="https://github.com/derryx/elasticsearch-changes-plugin" target="_top">Elasticsearch Changes Plugin</a> (by Thomas Peuss)
</li><li class="listitem">
<a class="ulink" href="https://github.com/johtani/elasticsearch-extended-analyze" target="_top">Extended Analyze Plugin</a> (by Jun Ohtani)
</li><li class="listitem">
<a class="ulink" href="https://github.com/YannBrrd/elasticsearch-entity-resolution" target="_top">Entity Resolution Plugin</a> using <a class="ulink" href="http://github.com/larsga/Duke" target="_top">Duke</a> for duplication detection (by Yann Barraud)
</li><li class="listitem">
<a class="ulink" href="https://github.com/spinscale/elasticsearch-graphite-plugin" target="_top">Elasticsearch Graphite Plugin</a> (by Alexander Reelsen)
</li><li class="listitem">
<a class="ulink" href="https://github.com/mattweber/elasticsearch-mocksolrplugin" target="_top">Elasticsearch Mock Solr Plugin</a> (by Matt Weber)
</li><li class="listitem">
<a class="ulink" href="https://github.com/viniciusccarvalho/elasticsearch-newrelic" target="_top">Elasticsearch New Relic Plugin</a> (by Vinicius Carvalho)
</li><li class="listitem">
<a class="ulink" href="https://github.com/swoop-inc/elasticsearch-statsd-plugin" target="_top">Elasticsearch Statsd Plugin</a> (by Swoop Inc.)
</li><li class="listitem">
<a class="ulink" href="https://github.com/endgameinc/elasticsearch-term-plugin" target="_top">Terms Component Plugin</a> (by Endgame Inc.)
</li><li class="listitem">
<a class="ulink" href="http://tlrx.github.com/elasticsearch-view-plugin" target="_top">Elasticsearch View Plugin</a> (by Tanguy Leroux)
</li><li class="listitem">
<a class="ulink" href="https://github.com/sonian/elasticsearch-zookeeper" target="_top">ZooKeeper Discovery Plugin</a> (by Sonian Inc.)
</li><li class="listitem">
<a class="ulink" href="https://github.com/kzwang/elasticsearch-image" target="_top">Elasticsearch Image Plugin</a> (by Kevin Wang)
</li><li class="listitem">
<a class="ulink" href="https://github.com/wikimedia/search-highlighter" target="_top">Elasticsearch Experimental Highlighter</a> (by Wikimedia Foundation/Nik Everett)
</li><li class="listitem">
<a class="ulink" href="https://github.com/salyh/elasticsearch-security-plugin" target="_top">Elasticsearch Security Plugin</a> (by Hendrik Saly)
</li><li class="listitem">
<a class="ulink" href="https://github.com/codelibs/elasticsearch-taste" target="_top">Elasticsearch Taste Plugin</a> (by CodeLibs Project)
</li><li class="listitem">
<a class="ulink" href="http://siren.solutions/siren/downloads/" target="_top">Elasticsearch SIREn Plugin</a>: Nested data search (by SIREn Solutions)
</li><li class="listitem">
<a class="ulink" href="https://github.com/hadashiA/elasticsearch-flavor" target="_top">Elasticsearch Flavor Plugin</a> using <a class="ulink" href="http://mahout.apache.org/" target="_top">Mahout</a> Collaboration filtering (by hadashiA)
</li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">Scripting</span></div><div class="navheader"><span class="prev"><a href="modules-plugins.html">
              &nbsp;
              Plugins</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-advanced-scripting.html">Text scoring in scripts
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-scripting"></a>Scripting</h2></div></div></div><p>The scripting module allows to use scripts in order to evaluate custom
expressions. For example, scripts can be used to return "script fields"
as part of a search request, or can be used to evaluate a custom score
for a query and so on.</p><p>The scripting module uses by default <a class="ulink" href="http://groovy.codehaus.org/" target="_top">groovy</a>
as the scripting language with some extensions. Groovy is used since it is extremely
fast and very simple to use.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Change in Groovy casting behavour</h3><p>The Groovy upgrade in Elasticsearch 1.6.1 fixed a casting bug, which may
change the behaviour of existing scripts which relied on this bug.  For
instance, before the upgrade, the following script would have returned a
<code class="literal">long</code> value:</p><div class="pre_wrapper"><pre class="programlisting">(long) _value / 1000 + 1</pre></div><p>After the upgrade, the above script will now return a <code class="literal">float</code> value.  To
return a <code class="literal">long</code> value, the script should be rewritten as follows:</p><div class="pre_wrapper"><pre class="programlisting">(long) (_value / 1000 + 1)</pre></div><p>See <a class="ulink" href="https://issues.apache.org/jira/browse/GROOVY-4421" target="_top">GROOVY-4421</a>
and <a class="ulink" href="https://issues.apache.org/jira/browse/GROOVY-5185" target="_top">GROOVY-5185</a>
for more information.</p></div></div><div class="important admon"><div class="icon"><img alt="Important" class="images-icons-important-png"></div><div class="admon_content"><h3>Groovy dynamic scripting disabled by default from v1.4.3</h3><p>Elasticsearch versions 1.3.0-1.3.7 and 1.4.0-1.4.2 have a vulnerability in the
Groovy scripting engine.  The vulnerability allows an attacker to construct
Groovy scripts that escape the sandbox and execute shell commands as the user
running the Elasticsearch Java VM.</p><p>If you are running a vulnerable version of Elasticsearch, you should either
upgrade to at least v1.3.8 or v1.4.3, or disable dynamic Groovy scripts by
adding this setting to the <code class="literal">config/elasticsearch.yml</code> file in all nodes in the
cluster:</p><div class="pre_wrapper"><pre class="programlisting">script.groovy.sandbox.enabled: false</pre></div><p>This will turn off the Groovy sandbox, thus preventing dynamic Groovy scripts
from being accepted as part of a request or retrieved from the special
<code class="literal">.scripts</code> index. You will still be able to use Groovy scripts stored in files
in the <code class="literal">config/scripts/</code> directory on every node.</p><p>To convert an inline script to a file, take this simple script
as an example:</p><div class="pre_wrapper"><pre class="programlisting">GET /_search
{
    "script_fields": {
        "my_field": {
            "script": "1 + my_var",
            "params": {
              "my_var": 2
            }
        }
    }
}</pre></div><p>Save the contents of the script as a file called <code class="literal">config/scripts/my_script.groovy</code>
on every data node in the cluster:</p><div class="pre_wrapper"><pre class="programlisting">1 + my_var</pre></div><p>Now you can access the script by file name (without the extension):</p><div class="pre_wrapper"><pre class="programlisting">GET /_search
{
    "script_fields": {
        "my_field": {
            "script_file": "my_script",
            "params": {
              "my_var": 2
            }
        }
    }
}</pre></div></div></div><p>Additional <code class="literal">lang</code> plugins are provided to allow to execute scripts in
different languages. All places where a <code class="literal">script</code> parameter can be used, a <code class="literal">lang</code> parameter
(on the same level) can be provided to define the language of the
script. The following are the supported scripting languages:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"><col class="col_3"></colgroup><thead><tr><th class="entry" align="left" valign="top">Language   </th><th class="entry" align="left" valign="top">Sandboxed </th><th class="entry" align="left" valign="top">Required plugin</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p>groovy</p></td><td class="entry" align="left" valign="top"><p>no</p></td><td class="entry" align="left" valign="top"><p>built-in</p></td></tr><tr><td class="entry" align="left" valign="top"><p>expression</p></td><td class="entry" align="left" valign="top"><p>yes</p></td><td class="entry" align="left" valign="top"><p>built-in</p></td></tr><tr><td class="entry" align="left" valign="top"><p>mustache</p></td><td class="entry" align="left" valign="top"><p>yes</p></td><td class="entry" align="left" valign="top"><p>built-in</p></td></tr><tr><td class="entry" align="left" valign="top"><p>mvel</p></td><td class="entry" align="left" valign="top"><p>no</p></td><td class="entry" align="left" valign="top"><p><a class="ulink" href="https://github.com/elastic/elasticsearch-lang-mvel" target="_top">elasticsearch-lang-mvel</a></p></td></tr><tr><td class="entry" align="left" valign="top"><p>javascript</p></td><td class="entry" align="left" valign="top"><p>no</p></td><td class="entry" align="left" valign="top"><p><a class="ulink" href="https://github.com/elastic/elasticsearch-lang-javascript" target="_top">elasticsearch-lang-javascript</a></p></td></tr><tr><td class="entry" align="left" valign="top"><p>python</p></td><td class="entry" align="left" valign="top"><p>no</p></td><td class="entry" align="left" valign="top"><p><a class="ulink" href="https://github.com/elastic/elasticsearch-lang-python" target="_top">elasticsearch-lang-python</a></p></td></tr></tbody></table></div><p>To increase security, Elasticsearch does not allow you to specify scripts for
non-sandboxed languages with a request. Instead, scripts must be placed in the
<code class="literal">scripts</code> directory inside the configuration directory (the directory where
elasticsearch.yml is). Scripts placed into this directory will automatically be
picked up and be available to be used. Once a script has been placed in this
directory, it can be referenced by name. For example, a script called
<code class="literal">calculate-score.groovy</code> can be referenced in a request like this:</p><div class="pre_wrapper"><pre class="programlisting">$ tree config
config
 elasticsearch.yml
 logging.yml
 scripts
     calculate-score.groovy</pre></div><div class="pre_wrapper"><pre class="programlisting">$ cat config/scripts/calculate-score.groovy
log(_score * 2) + my_modifier</pre></div><div class="pre_wrapper"><pre class="programlisting">curl -XPOST localhost:9200/_search -d '{
  "query": {
    "function_score": {
      "query": {
        "match": {
          "body": "foo"
        }
      },
      "functions": [
        {
          "script_score": {
            "lang": "groovy",
            "script_file": "calculate-score",
            "params": {
              "my_modifier": 8
            }
          }
        }
      ]
    }
  }
}'</pre></div><p>The name of the script is derived from the hierarchy of directories it
exists under, and the file name without the lang extension. For example,
a script placed under <code class="literal">config/scripts/group1/group2/test.py</code> will be
named <code class="literal">group1_group2_test</code>.</p><h3><a id="_indexed_scripts"></a>Indexed Scripts</h3><p>Elasticsearch allows you to store scripts in an internal index known as
<code class="literal">.scripts</code> and reference them by id. There are REST endpoints to manage
indexed scripts as follows:</p><p>Requests to the scripts endpoint look like :</p><div class="pre_wrapper"><pre class="programlisting">/_scripts/{lang}/{id}</pre></div><p>Where the <code class="literal">lang</code> part is the language the script is in and the <code class="literal">id</code> part is the id
of the script. In the <code class="literal">.scripts</code> index the type of the document will be set to the <code class="literal">lang</code>.</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST localhost:9200/_scripts/groovy/indexedCalculateScore -d '{
     "script": "log(_score * 2) + my_modifier"
}'</pre></div><p>This will create a document with id: <code class="literal">indexedCalculateScore</code> and type: <code class="literal">groovy</code> in the
<code class="literal">.scripts</code> index. The type of the document is the language used by the script.</p><p>This script can be accessed at query time by appending <code class="literal">_id</code> to
the script parameter and passing the script id. So <code class="literal">script</code> becomes <code class="literal">script_id</code>.:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST localhost:9200/_search -d '{
  "query": {
    "function_score": {
      "query": {
        "match": {
          "body": "foo"
        }
      },
      "functions": [
        {
          "script_score": {
            "script_id": "indexedCalculateScore",
            "lang" : "groovy",
            "params": {
              "my_modifier": 8
            }
          }
        }
      ]
    }
  }
}'</pre></div><p>The script can be viewed by:</p><div class="pre_wrapper"><pre class="programlisting">curl -XGET localhost:9200/_scripts/groovy/indexedCalculateScore</pre></div><p>This is rendered as:</p><div class="pre_wrapper"><pre class="programlisting">'{
     "script": "log(_score * 2) + my_modifier"
}'</pre></div><p>Indexed scripts can be deleted by:</p><div class="pre_wrapper"><pre class="programlisting">curl -XDELETE localhost:9200/_scripts/groovy/indexedCalculateScore</pre></div><h3><a id="enable-dynamic-scripting"></a>Enabling dynamic scripting</h3><p>We recommend running Elasticsearch behind an application or proxy, which
protects Elasticsearch from the outside world. If users are allowed to run
inline scripts (even in a search request) or indexed scripts, then they have
the same access to your box as the user that Elasticsearch is running as. For
this reason dynamic scripting is allowed only for sandboxed languages by default.</p><p>First, you should not run Elasticsearch as the <code class="literal">root</code> user, as this would allow
a script to access or do <span class="strong emphasis"><strong>anything</strong></span> on your server, without limitations. Second,
you should not expose Elasticsearch directly to users, but instead have a proxy
application inbetween. If you <span class="strong emphasis"><strong>do</strong></span> intend to expose Elasticsearch directly to
your users, then you have to decide whether you trust them enough to run scripts
on your box or not.</p><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.6.0. </h3>
 the script.disable_dynamic setting is deprecated in favour of fine-grained settings described as follows
</div></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><h3>Added in 1.6.0. </h3>
 Fine-grained script settings replace the script.disable_dynamic setting
</div></div><p>It is possible to enable scripts based on their source, for
every script engine, through the following settings that need to be added to the
<code class="literal">config/elasticsearch.yml</code> file on every node.</p><div class="pre_wrapper"><pre class="programlisting">script.inline: on
script.indexed: on</pre></div><p>While this still allows execution of named scripts provided in the config, or
<span class="emphasis"><em>native</em></span> Java scripts registered through plugins, it also allows users to run
arbitrary scripts via the API. Instead of sending the name of the file as the
script, the body of the script can be sent instead or retrieved from the
<code class="literal">.scripts</code> indexed if previously stored.</p><p>There are three possible configuration values for any of the fine-grained
script settings:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Value </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">off</code></p></td><td class="entry" align="left" valign="top"><p>scripting is turned off completely, in the context of the setting being set.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">on</code></p></td><td class="entry" align="left" valign="top"><p>scripting is turned on, in the context of the setting being set.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">sandbox</code></p></td><td class="entry" align="left" valign="top"><p>scripts may be executed only for languages that are sandboxed</p></td></tr></tbody></table></div><p>The default values are the following:</p><div class="pre_wrapper"><pre class="programlisting">script.inline: sandbox
script.indexed: sandbox
script.file: on</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Global scripting settings affect the <code class="literal">mustache</code> scripting language.
<a class="link" href="search-template.html" title="Search Template">Search templates</a> internally use the <code class="literal">mustache</code> language,
and will still be enabled by default as the <code class="literal">mustache</code> engine is sandboxed,
but they will be enabled/disabled according to fine-grained settings
specified in <code class="literal">elasticsearch.yml</code>. <span class="added">
      [<span class="version">1.6.0</span>]
      <span class="detail">Added in 1.6.0.
<code class="literal">mustache</code> scripts were previously always on regardless of whether dynamic scripts were enabled or not
</span></span></p></div></div><p>It is also possible to control which operations can execute scripts. The
supported operations are:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Value </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">aggs</code></p></td><td class="entry" align="left" valign="top"><p>Aggregations (wherever they may be used)</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">mapping</code></p></td><td class="entry" align="left" valign="top"><p>Mappings (script transform feature)</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">search</code></p></td><td class="entry" align="left" valign="top"><p>Search api, Percolator api and Suggester api (e.g filters, script_fields)</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">update</code></p></td><td class="entry" align="left" valign="top"><p>Update api</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">plugin</code></p></td><td class="entry" align="left" valign="top"><p>Any plugin that makes use of scripts under the generic <code class="literal">plugin</code> category</p></td></tr></tbody></table></div><p>Plugins can also define custom operations that they use scripts for instead
of using the generic <code class="literal">plugin</code> category. Those operations can be referred to
in the following form: <code class="literal">${pluginName}_${operation}</code>.</p><p>The following example disables scripting for <code class="literal">update</code> and <code class="literal">mapping</code> operations,
regardless of the script source, for any engine. Scripts can still be
executed from sandboxed languages as part of <code class="literal">aggregations</code>, <code class="literal">search</code>
and plugins execution though, as the above defaults still get applied.</p><div class="pre_wrapper"><pre class="programlisting">script.update: off
script.mapping: off</pre></div><p>Generic settings get applied in order, operation based ones have precedence
over source based ones. Language specific settings are supported too. They
need to be prefixed with the <code class="literal">script.engine.&lt;engine&gt;</code> prefix and have
precedence over any other generic settings.</p><div class="pre_wrapper"><pre class="programlisting">script.engine.groovy.file.aggs: on
script.engine.groovy.file.mapping: on
script.engine.groovy.file.search: on
script.engine.groovy.file.update: on
script.engine.groovy.file.plugin: on
script.engine.groovy.indexed.aggs: on
script.engine.groovy.indexed.mapping: off
script.engine.groovy.indexed.search: on
script.engine.groovy.indexed.update: off
script.engine.groovy.indexed.plugin: off
script.engine.groovy.inline.aggs: on
script.engine.groovy.inline.mapping: off
script.engine.groovy.inline.search: off
script.engine.groovy.inline.update: off
script.engine.groovy.inline.plugin: off</pre></div><h3><a id="_default_scripting_language"></a>Default Scripting Language</h3><p>The default scripting language (assuming no <code class="literal">lang</code> parameter is provided) is
<code class="literal">groovy</code>. In order to change it, set the <code class="literal">script.default_lang</code> to the
appropriate language.</p><h3><a id="_groovy_sandboxing"></a>Groovy Sandboxing</h3><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.6.0. </h3>
Groovy sandboxing has been disabled by default since 1.4.3 because it has proved to be ineffective. It will be removed completely in 2.0.0"
</div></div><p>Elasticsearch sandboxes Groovy scripts that are compiled and executed in order
to ensure they dont perform unwanted actions. There are a number of options
that can be used for configuring this sandbox:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">script.groovy.sandbox.receiver_whitelist</code>
</span></dt><dd>
    Comma-separated list of string classes for objects that may have methods
    invoked.
</dd><dt><span class="term">
<code class="literal">script.groovy.sandbox.package_whitelist</code>
</span></dt><dd>
    Comma-separated list of packages under which new objects may be constructed.
</dd><dt><span class="term">
<code class="literal">script.groovy.sandbox.class_whitelist</code>
</span></dt><dd>
    Comma-separated list of classes that are allowed to be constructed.
</dd><dt><span class="term">
<code class="literal">script.groovy.sandbox.method_blacklist</code>
</span></dt><dd>
    Comma-separated list of methods that are never allowed to be invoked,
    regardless of target object.
</dd><dt><span class="term">
<code class="literal">script.groovy.sandbox.enabled</code>
</span></dt><dd>
    Flag to enable the sandbox (defaults to <code class="literal">false</code> meaning the sandbox is
    disabled).
</dd></dl></div><p>When specifying whitelist or blacklist settings for the groovy sandbox, all
options replace the current whitelist, they are not additive.</p><h3><a id="_automatic_script_reloading"></a>Automatic Script Reloading</h3><p>The <code class="literal">config/scripts</code> directory is scanned periodically for changes.
New and changed scripts are reloaded and deleted script are removed
from preloaded scripts cache. The reload frequency can be specified
using <code class="literal">watcher.interval</code> setting, which defaults to <code class="literal">60s</code>.
To disable script reloading completely set <code class="literal">script.auto_reload_enabled</code>
to <code class="literal">false</code>.</p><h3><a id="native-java-scripts"></a>Native (Java) Scripts</h3><p>Even though <code class="literal">groovy</code> is pretty fast, this allows to register native Java based
scripts for faster execution.</p><p>In order to allow for scripts, the <code class="literal">NativeScriptFactory</code> needs to be
implemented that constructs the script that will be executed. There are
two main types, one that extends <code class="literal">AbstractExecutableScript</code> and one that
extends <code class="literal">AbstractSearchScript</code> (probably the one most users will extend,
with additional helper classes in <code class="literal">AbstractLongSearchScript</code>,
<code class="literal">AbstractDoubleSearchScript</code>, and <code class="literal">AbstractFloatSearchScript</code>).</p><p>Registering them can either be done by settings, for example:
<code class="literal">script.native.my.type</code> set to <code class="literal">sample.MyNativeScriptFactory</code> will
register a script named <code class="literal">my</code>. Another option is in a plugin, access
<code class="literal">ScriptModule</code> and call <code class="literal">registerScript</code> on it.</p><p>Executing the script is done by specifying the <code class="literal">lang</code> as <code class="literal">native</code>, and
the name of the script as the <code class="literal">script</code>.</p><p>Note, the scripts need to be in the classpath of elasticsearch. One
simple way to do it is to create a directory under plugins (choose a
descriptive name), and place the jar / classes files there. They will be
automatically loaded.</p><h3><a id="_lucene_expressions_scripts"></a>Lucene Expressions Scripts</h3><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>This feature is <span class="strong emphasis"><strong>experimental</strong></span> and subject to change in future versions.</p></div></div><p>Lucenes expressions module provides a mechanism to compile a
<code class="literal">javascript</code> expression to bytecode.  This allows very fast execution,
as if you had written a <code class="literal">native</code> script.  Expression scripts can be
used in <code class="literal">script_score</code>, <code class="literal">script_fields</code>, sort scripts and numeric aggregation scripts.</p><p>See the <a class="ulink" href="http://lucene.apache.org/core/4_9_0/expressions/index.html?org/apache/lucene/expressions/js/package-summary.html" target="_top">expressions module documentation</a>
for details on what operators and functions are available.</p><p>Variables in <code class="literal">expression</code> scripts are available to access:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Single valued document fields, e.g. <code class="literal">doc['myfield'].value</code>
</li><li class="listitem">
Parameters passed into the script, e.g. <code class="literal">mymodifier</code>
</li><li class="listitem">
The current documents score, <code class="literal">_score</code> (only available when used in a <code class="literal">script_score</code>)
</li></ul></div><p>There are a few limitations relative to other script languages:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Only numeric fields may be accessed
</li><li class="listitem">
Stored fields are not available
</li><li class="listitem">
If a field is sparse (only some documents contain a value), documents missing the field will have a value of <code class="literal">0</code>
</li></ul></div><h3><a id="_score"></a>Score</h3><p>In all scripts that can be used in aggregations, the current
documents score is accessible in <code class="literal">_score</code>.</p><h3><a id="_computing_scores_based_on_terms_in_scripts"></a>Computing scores based on terms in scripts</h3><p>see <a class="link" href="modules-advanced-scripting.html" title="Text scoring in scripts">advanced scripting documentation</a></p><h3><a id="_document_fields"></a>Document Fields</h3><p>Most scripting revolve around the use of specific document fields data.
The <code class="literal">doc['field_name']</code> can be used to access specific field data within
a document (the document in question is usually derived by the context
the script is used). Document fields are very fast to access since they
end up being loaded into memory (all the relevant field values/tokens
are loaded to memory). Note, however, that the <code class="literal">doc[...]</code> notation only
allows for simple valued fields (cant return a json object from it)
and makes sense only on non-analyzed or single term based fields.</p><p>The following data can be extracted from a field:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Expression </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].value</code></p></td><td class="entry" align="left" valign="top"><p>The native value of the field. For example,
if its a short type, it will be short.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].values</code></p></td><td class="entry" align="left" valign="top"><p>The native array values of the field. For
example, if its a short type, it will be short[]. Remember, a field can
have several values within a single doc. Returns an empty array if the
field has no values.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].empty</code></p></td><td class="entry" align="left" valign="top"><p>A boolean indicating if the field has no
values within the doc.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].multiValued</code></p></td><td class="entry" align="left" valign="top"><p>A boolean indicating that the field
has several values within the corpus.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].lat</code></p></td><td class="entry" align="left" valign="top"><p>The latitude of a geo point type.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].lon</code></p></td><td class="entry" align="left" valign="top"><p>The longitude of a geo point type.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].lats</code></p></td><td class="entry" align="left" valign="top"><p>The latitudes of a geo point type.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].lons</code></p></td><td class="entry" align="left" valign="top"><p>The longitudes of a geo point type.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].distance(lat, lon)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">plane</code> distance (in meters)
of this geo point field from the provided lat/lon.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].distanceWithDefault(lat, lon, default)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">plane</code> distance (in meters)
of this geo point field from the provided lat/lon with a default value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].distanceInMiles(lat, lon)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">plane</code> distance (in
miles) of this geo point field from the provided lat/lon.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].distanceInMilesWithDefault(lat, lon, default)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">plane</code> distance (in
miles) of this geo point field from the provided lat/lon with a default value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].distanceInKm(lat, lon)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">plane</code> distance (in
km) of this geo point field from the provided lat/lon.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].distanceInKmWithDefault(lat, lon, default)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">plane</code> distance (in
km) of this geo point field from the provided lat/lon with a default value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].arcDistance(lat, lon)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">arc</code> distance (in
meters) of this geo point field from the provided lat/lon.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].arcDistanceWithDefault(lat, lon, default)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">arc</code> distance (in
meters) of this geo point field from the provided lat/lon with a default value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].arcDistanceInMiles(lat, lon)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">arc</code> distance (in
miles) of this geo point field from the provided lat/lon.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].arcDistanceInMilesWithDefault(lat, lon, default)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">arc</code> distance (in
miles) of this geo point field from the provided lat/lon with a default value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].arcDistanceInKm(lat, lon)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">arc</code> distance (in
km) of this geo point field from the provided lat/lon.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].arcDistanceInKmWithDefault(lat, lon, default)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">arc</code> distance (in
km) of this geo point field from the provided lat/lon with a default value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].factorDistance(lat, lon)</code></p></td><td class="entry" align="left" valign="top"><p>The distance factor of this geo point field from the provided lat/lon.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].factorDistance(lat, lon, default)</code></p></td><td class="entry" align="left" valign="top"><p>The distance factor of this geo point field from the provided lat/lon with a default value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].geohashDistance(geohash)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">arc</code> distance (in meters)
of this geo point field from the provided geohash.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].geohashDistanceInKm(geohash)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">arc</code> distance (in km)
of this geo point field from the provided geohash.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">doc['field_name'].geohashDistanceInMiles(geohash)</code></p></td><td class="entry" align="left" valign="top"><p>The <code class="literal">arc</code> distance (in
miles) of this geo point field from the provided geohash.</p></td></tr></tbody></table></div><h3><a id="_stored_fields"></a>Stored Fields</h3><p>Stored fields can also be accessed when executing a script. Note, they
are much slower to access compared with document fields, as they are not
loaded into memory. They can be simply accessed using
<code class="literal">_fields['my_field_name'].value</code> or <code class="literal">_fields['my_field_name'].values</code>.</p><h3><a id="_accessing_the_score_of_a_document_within_a_script"></a>Accessing the score of a document within a script</h3><p>When using scripting for calculating the score of a document (for instance, with
the <code class="literal">function_score</code> query), you can access the score using the <code class="literal">_score</code>
variable inside of a Groovy script.</p><h3><a id="_source_field"></a>Source Field</h3><p>The source field can also be accessed when executing a script. The
source field is loaded per doc, parsed, and then provided to the script
for evaluation. The <code class="literal">_source</code> forms the context under which the source
field can be accessed, for example <code class="literal">_source.obj2.obj1.field3</code>.</p><p>Accessing <code class="literal">_source</code> is much slower compared to using <code class="literal">doc</code>
but the data is not loaded into memory. For a single field access <code class="literal">_fields</code> may be
faster than using <code class="literal">_source</code> due to the extra overhead of potentially parsing large documents.
However, <code class="literal">_source</code> may be faster if you access multiple fields or if the source has already been
loaded for other purposes.</p><h3><a id="_groovy_built_in_functions"></a>Groovy Built In Functions</h3><p>There are several built in functions that can be used within scripts.
They include:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Function </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">sin(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the trigonometric sine of an angle.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">cos(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the trigonometric cosine of an angle.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">tan(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the trigonometric tangent of an angle.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">asin(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the arc sine of a value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">acos(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the arc cosine of a value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">atan(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the arc tangent of a value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">toRadians(angdeg)</code></p></td><td class="entry" align="left" valign="top"><p>Converts an angle measured in degrees to an
approximately equivalent angle measured in radians</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">toDegrees(angrad)</code></p></td><td class="entry" align="left" valign="top"><p>Converts an angle measured in radians to an
approximately equivalent angle measured in degrees.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">exp(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns Eulers number <span class="emphasis"><em>e</em></span> raised to the power of value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">log(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the natural logarithm (base <span class="emphasis"><em>e</em></span>) of a value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">log10(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the base 10 logarithm of a value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">sqrt(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the correctly rounded positive square root of a
value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">cbrt(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the cube root of a double value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">IEEEremainder(f1, f2)</code></p></td><td class="entry" align="left" valign="top"><p>Computes the remainder operation on two
arguments as prescribed by the IEEE 754 standard.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ceil(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the smallest (closest to negative infinity) value
that is greater than or equal to the argument and is equal to a
mathematical integer.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">floor(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the largest (closest to positive infinity) value
that is less than or equal to the argument and is equal to a
mathematical integer.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">rint(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the value that is closest in value to the argument
and is equal to a mathematical integer.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">atan2(y, x)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the angle <span class="emphasis"><em>theta</em></span> from the conversion of
rectangular coordinates (<span class="emphasis"><em>x</em></span>, <span class="emphasis"><em>y</em></span>) to polar coordinates (r,<span class="emphasis"><em>theta</em></span>).</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">pow(a, b)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the value of the first argument raised to the
power of the second argument.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">round(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the closest <span class="emphasis"><em>int</em></span> to the argument.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">random()</code></p></td><td class="entry" align="left" valign="top"><p>Returns a random <span class="emphasis"><em>double</em></span> value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">abs(a)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the absolute value of a value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">max(a, b)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the greater of two values.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">min(a, b)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the smaller of two values.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">ulp(d)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the size of an ulp of the argument.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">signum(d)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the signum function of the argument.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">sinh(x)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the hyperbolic sine of a value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">cosh(x)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the hyperbolic cosine of a value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">tanh(x)</code></p></td><td class="entry" align="left" valign="top"><p>Returns the hyperbolic tangent of a value.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">hypot(x, y)</code></p></td><td class="entry" align="left" valign="top"><p>Returns sqrt(<span class="emphasis"><em>x2</em></span> + <span class="emphasis"><em>y2</em></span>) without intermediate overflow
or underflow.</p></td></tr></tbody></table></div><h3><a id="_arithmetic_precision_in_mvel"></a>Arithmetic precision in MVEL</h3><p>When dividing two numbers using MVEL based scripts, the engine tries to
be smart and adheres to the default behaviour of java. This means if you
divide two integers (you might have configured the fields as integer in
the mapping), the result will also be an integer. This means, if a
calculation like <code class="literal">1/num</code> is happening in your scripts and <code class="literal">num</code> is an
integer with the value of <code class="literal">8</code>, the result is <code class="literal">0</code> even though you were
expecting it to be <code class="literal">0.125</code>. You may need to enforce precision by
explicitly using a double like <code class="literal">1.0/num</code> in order to get the expected
result.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">Text scoring in scripts</span></div><div class="navheader"><span class="prev"><a href="modules-scripting.html">
              &nbsp;
              Scripting</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-threadpool.html">Thread Pool
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-advanced-scripting"></a>Text scoring in scripts</h2></div></div></div><p>Text features, such as term or document frequency for a specific term can be accessed in scripts (see <a class="link" href="modules-scripting.html" title="Scripting">scripting documentation</a> ) with the <code class="literal">_index</code> variable. This can be useful if, for example, you want to implement your own scoring model using for example a script inside a <a class="link" href="query-dsl-function-score-query.html" title="Function Score Query">function score query</a>.
Statistics over the document collection are computed <span class="strong emphasis"><strong>per shard</strong></span>, not per
index.</p><h3><a id="_nomenclature"></a>Nomenclature:</h3><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">df</code>
</p>
</td><td class="entry" valign="top">
<p>
    document frequency. The number of documents a term appears in. Computed
    per field.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">tf</code>
</p>
</td><td class="entry" valign="top">
<p>
    term frequency. The number times a term appears in a field in one specific
    document.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">ttf</code>
</p>
</td><td class="entry" valign="top">
<p>
    total term frequency. The number of times this term appears in all
    documents, that is, the sum of <code class="literal">tf</code> over all documents.  Computed per
    field.
</p>
</td></tr></tbody></table></div><p><code class="literal">df</code> and <code class="literal">ttf</code> are computed per shard and therefore these numbers can vary
depending on the shard the current document resides in.</p><h3><a id="_shard_statistics"></a>Shard statistics:</h3><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">_index.numDocs()</code>
</span></dt><dd>
    Number of documents in shard.
</dd><dt><span class="term">
<code class="literal">_index.maxDoc()</code>
</span></dt><dd>
    Maximal document number in shard.
</dd><dt><span class="term">
<code class="literal">_index.numDeletedDocs()</code>
</span></dt><dd>
    Number of deleted documents in shard.
</dd></dl></div><h3><a id="_field_statistics_3"></a>Field statistics:</h3><p>Field statistics can be accessed with a subscript operator like this:
<code class="literal">_index['FIELD']</code>.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">_index['FIELD'].docCount()</code>
</span></dt><dd>
    Number of documents containing the field <code class="literal">FIELD</code>. Does not take deleted documents into account.
</dd><dt><span class="term">
<code class="literal">_index['FIELD'].sumttf()</code>
</span></dt><dd>
    Sum of <code class="literal">ttf</code> over all terms that appear in field <code class="literal">FIELD</code> in all documents.
</dd><dt><span class="term">
<code class="literal">_index['FIELD'].sumdf()</code>
</span></dt><dd>
    The sum of <code class="literal">df</code> s over all terms that appear in field <code class="literal">FIELD</code> in all
    documents.
</dd></dl></div><p>Field statistics are computed per shard and therefore these numbers can vary
depending on the shard the current document resides in.
The number of terms in a field cannot be accessed using the <code class="literal">_index</code> variable. See <a class="link" href="mapping-core-types.html" title="Core Types">word count mapping type</a> on how to do that.</p><h3><a id="_term_statistics_2"></a>Term statistics:</h3><p>Term statistics for a field can be accessed with a subscript operator like
this: <code class="literal">_index['FIELD']['TERM']</code>. This will never return null, even if term or field does not exist.
If you do not need the term frequency, call <code class="literal">_index['FIELD'].get('TERM', 0)</code>
to avoid uneccesary initialization of the frequencies. The flag will have only
affect is your set the <code class="literal">index_options</code> to <code class="literal">docs</code> (see <a class="link" href="mapping-core-types.html" title="Core Types">mapping documentation</a>).</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">_index['FIELD']['TERM'].df()</code>
</span></dt><dd>
    <code class="literal">df</code> of term <code class="literal">TERM</code> in field <code class="literal">FIELD</code>. Will be returned, even if the term
    is not present in the current document.
</dd><dt><span class="term">
<code class="literal">_index['FIELD']['TERM'].ttf()</code>
</span></dt><dd>
    The sum of term frequencies of term <code class="literal">TERM</code> in field <code class="literal">FIELD</code> over all
    documents. Will be returned, even if the term is not present in the
    current document.
</dd><dt><span class="term">
<code class="literal">_index['FIELD']['TERM'].tf()</code>
</span></dt><dd>
    <code class="literal">tf</code> of term <code class="literal">TERM</code> in field <code class="literal">FIELD</code>. Will be 0 if the term is not present
    in the current document.
</dd></dl></div><h3><a id="_term_positions_offsets_and_payloads"></a>Term positions, offsets and payloads:</h3><p>If you need information on the positions of terms in a field, call
<code class="literal">_index['FIELD'].get('TERM', flag)</code> where flag can be</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">_POSITIONS</code>
</p>
</td><td class="entry" valign="top">
<p>
if you need the positions of the term
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">_OFFSETS</code>
</p>
</td><td class="entry" valign="top">
<p>
if you need the offsets of the term
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">_PAYLOADS</code>
</p>
</td><td class="entry" valign="top">
<p>
if you need the payloads of the term
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">_CACHE</code>
</p>
</td><td class="entry" valign="top">
<p>
if you need to iterate over all positions several times
</p>
</td></tr></tbody></table></div><p>The iterator uses the underlying lucene classes to iterate over positions. For efficiency reasons, you can only iterate over positions once. If you need to iterate over the positions several times, set the <code class="literal">_CACHE</code> flag.</p><p>You can combine the operators with a <code class="literal">|</code> if you need more than one info. For
example, the following will return an object holding the positions and payloads,
as well as all statistics:</p><pre class="literallayout">`_index['FIELD'].get('TERM', _POSITIONS | _PAYLOADS)`</pre><p>Positions can be accessed with an iterator that returns an object
(<code class="literal">POS_OBJECT</code>) holding position, offsets and payload for each term position.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">POS_OBJECT.position</code>
</span></dt><dd>
    The position of the term.
</dd><dt><span class="term">
<code class="literal">POS_OBJECT.startOffset</code>
</span></dt><dd>
    The start offset of the term.
</dd><dt><span class="term">
<code class="literal">POS_OBJECT.endOffset</code>
</span></dt><dd>
    The end offset of the term.
</dd><dt><span class="term">
<code class="literal">POS_OBJECT.payload</code>
</span></dt><dd>
    The payload of the term.
</dd><dt><span class="term">
<code class="literal">POS_OBJECT.payloadAsInt(missingValue)</code>
</span></dt><dd>
    The payload of the term converted to integer. If the current position has
    no payload, the <code class="literal">missingValue</code> will be returned. Call this only if you
    know that your payloads are integers.
</dd><dt><span class="term">
<code class="literal">POS_OBJECT.payloadAsFloat(missingValue)</code>
</span></dt><dd>
    The payload of the term converted to float. If the current position has no
    payload, the <code class="literal">missingValue</code> will be returned. Call this only if you know
    that your payloads are floats.
</dd><dt><span class="term">
<code class="literal">POS_OBJECT.payloadAsString()</code>
</span></dt><dd>
    The payload of the term converted to string. If the current position has
    no payload, <code class="literal">null</code> will be returned. Call this only if you know that your
    payloads are strings.
</dd></dl></div><p>Example: sums up all payloads for the term <code class="literal">foo</code>.</p><div class="pre_wrapper"><pre class="programlisting">termInfo = _index['my_field'].get('foo',_PAYLOADS);
score = 0;
for (pos in termInfo) {
    score = score + pos.payloadAsInt(0);
}
return score;</pre></div><h3><a id="_term_vectors"></a>Term vectors:</h3><p>The <code class="literal">_index</code> variable can only be used to gather statistics for single terms. If you want to use information on all terms in a field, you must store the term vectors (set <code class="literal">term_vector</code> in the mapping as described in the <a class="link" href="mapping-core-types.html" title="Core Types">mapping documentation</a>). To access them, call
<code class="literal">_index.termVectors()</code> to get a
<a class="ulink" href="https://lucene.apache.org/core/4_0_0/core/org/apache/lucene/index/Fields.html" target="_top">Fields</a>
instance. This object can then be used as described in <a class="ulink" href="https://lucene.apache.org/core/4_0_0/core/org/apache/lucene/index/Fields.html" target="_top">lucene doc</a> to iterate over fields and then for each field iterate over each term in the field.
The method will return null if the term vectors were not stored.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">Thread Pool</span></div><div class="navheader"><span class="prev"><a href="modules-advanced-scripting.html">
              &nbsp;
              Text scoring in scripts</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-thrift.html">Thrift
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-threadpool"></a>Thread Pool</h2></div></div></div><p>A node holds several thread pools in order to improve how threads memory consumption
are managed within a node. Many of these pools also have queues associated with them,
which allow pending requests to be held instead
of discarded.</p><p>There are several thread pools, but the important ones include:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">index</code>
</p>
</td><td class="entry" valign="top">
<p>
    For index/delete operations. Defaults to <code class="literal">fixed</code>
    with a size of <code class="literal"># of available processors</code>,
    queue_size of <code class="literal">200</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">search</code>
</p>
</td><td class="entry" valign="top">
<p>
    For count/search operations. Defaults to <code class="literal">fixed</code>
    with a size of <code class="literal">int((# of available_processors * 3) / 2) + 1</code>,
    queue_size of <code class="literal">1000</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">suggest</code>
</p>
</td><td class="entry" valign="top">
<p>
    For suggest operations. Defaults to <code class="literal">fixed</code>
    with a size of <code class="literal"># of available processors</code>,
    queue_size of <code class="literal">1000</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">get</code>
</p>
</td><td class="entry" valign="top">
<p>
    For get operations. Defaults to <code class="literal">fixed</code>
    with a size of <code class="literal"># of available processors</code>,
    queue_size of <code class="literal">1000</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">bulk</code>
</p>
</td><td class="entry" valign="top">
<p>
    For bulk operations. Defaults to <code class="literal">fixed</code>
    with a size of <code class="literal"># of available processors</code>,
    queue_size of <code class="literal">50</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">percolate</code>
</p>
</td><td class="entry" valign="top">
<p>
    For percolate operations. Defaults to <code class="literal">fixed</code>
    with a size of <code class="literal"># of available processors</code>,
    queue_size of <code class="literal">1000</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">snapshot</code>
</p>
</td><td class="entry" valign="top">
<p>
    For snapshot/restore operations. Defaults to <code class="literal">scaling</code>,
    keep-alive <code class="literal">5m</code> with a size of <code class="literal">(# of available processors)/2</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">warmer</code>
</p>
</td><td class="entry" valign="top">
<p>
    For segment warm-up operations. Defaults to <code class="literal">scaling</code>
    with a <code class="literal">5m</code> keep-alive.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">refresh</code>
</p>
</td><td class="entry" valign="top">
<p>
    For refresh operations. Defaults to <code class="literal">scaling</code>
    with a <code class="literal">5m</code> keep-alive.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">listener</code>
</p>
</td><td class="entry" valign="top">
<p>
    Mainly for java client executing of action when listener threaded is set to true.
    Default size of <code class="literal">(# of available processors)/2</code>, max at 10.
</p>
</td></tr></tbody></table></div><p>Changing a specific thread pool can be done by setting its type and
specific type parameters, for example, changing the <code class="literal">index</code> thread pool
to have more threads:</p><div class="pre_wrapper"><pre class="programlisting">threadpool:
    index:
        type: fixed
        size: 30</pre></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>you can update threadpool settings live using
      <a class="xref" href="cluster-update-settings.html" title="Cluster Update Settings"><em>Cluster Update Settings</em></a>.</p></div></div><h3><a id="types"></a>Thread pool types</h3><p>The following are the types of thread pools that can be used and their
respective parameters:</p><h4><a id="_literal_cache_literal"></a><code class="literal">cache</code></h4><p>The <code class="literal">cache</code> thread pool is an unbounded thread pool that will spawn a
thread if there are pending requests. Here is an example of how to set
it:</p><div class="pre_wrapper"><pre class="programlisting">threadpool:
    index:
        type: cached</pre></div><h4><a id="_literal_fixed_literal"></a><code class="literal">fixed</code></h4><p>The <code class="literal">fixed</code> thread pool holds a fixed size of threads to handle the
requests with a queue (optionally bounded) for pending requests that
have no threads to service them.</p><p>The <code class="literal">size</code> parameter controls the number of threads, and defaults to the
number of cores times 5.</p><p>The <code class="literal">queue_size</code> allows to control the size of the queue of pending
requests that have no threads to execute them. By default, it is set to
<code class="literal">-1</code> which means its unbounded. When a request comes in and the queue is
full, it will abort the request.</p><div class="pre_wrapper"><pre class="programlisting">threadpool:
    index:
        type: fixed
        size: 30
        queue_size: 1000</pre></div><h3><a id="processors"></a>Processors setting</h3><p>The number of processors is automatically detected, and the thread pool
settings are automatically set based on it. In some cases it can be
useful to override the number of detected processors. This can be done
by explicitly setting the <code class="literal">processors</code> setting.</p><div class="pre_wrapper"><pre class="programlisting">processors: 4</pre></div><p>There are a few use-cases for explicitly overriding the <code class="literal">processors</code>
setting:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
If you are running multiple instances of Elasticsearch on the same
host but want Elasticsearch to size its thread pools as if it only has a
fraction of the CPU, you should override the <code class="literal">processors</code> setting to the
desired fraction (e.g., if youre running two instances of Elasticsearch
on a 16-core machine, set <code class="literal">processors</code> to 8). Note that this is an
expert-level use-case and theres a lot more involved than just setting
the <code class="literal">processors</code> setting as there are other considerations like changing
the number of garbage collector threads, pinning processes to cores,
etc.
</li><li class="listitem">
The number of processors is by default bounded to 32. This means that
on systems that have more than 32 processors, Elasticsearch will size
its thread pools as if there are only 32 processors present. This
limitation was added to avoid creating too many threads on systems that
have not properly adjusted the <code class="literal">ulimit</code> for max number of processes. In
cases where youve adjusted the <code class="literal">ulimit</code> appropriately, you can override
this bound by explicitly setting the <code class="literal">processors</code> setting.
</li><li class="listitem">
Sometimes the number of processors is wrongly detected and in such
cases explicitly setting the <code class="literal">processors</code> setting will workaround such
issues.
</li></ol></div><p>In order to check the number of processors detected, use the nodes info
API with the <code class="literal">os</code> flag.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">Thrift</span></div><div class="navheader"><span class="prev"><a href="modules-threadpool.html">
              &nbsp;
              Thread Pool</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-transport.html">Transport
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-thrift"></a>Thrift</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.5.0. </h3>
The thrift transport is deprecated and will be removed in 2.0.0
</div></div><p>The <a class="ulink" href="https://thrift.apache.org/" target="_top">thrift</a> transport module allows to expose the REST interface of
elasticsearch using thrift. Thrift should provide better performance
over http. Since thrift provides both the wire protocol and the
transport, it should make using Elasticsearch more efficient (though it has limited
documentation).</p><p>Using thrift requires installing the <code class="literal">transport-thrift</code> plugin, located
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-transport-thrift" target="_top">here</a>.</p><p>The thrift
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-transport-thrift/blob/master/elasticsearch.thrift" target="_top">schema</a>
can be used to generate thrift clients.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">thrift.port</code></p></td><td class="entry" align="left" valign="top"><p>The port to bind to. Defaults to 9500-9600</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">thrift.frame</code></p></td><td class="entry" align="left" valign="top"><p>Defaults to <code class="literal">-1</code>, which means no framing. Set to a
higher value to specify the frame size (like <code class="literal">15mb</code>).</p></td></tr></tbody></table></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">Transport</span></div><div class="navheader"><span class="prev"><a href="modules-thrift.html">
              &nbsp;
              Thrift</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="modules-snapshots.html">Snapshot And Restore
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-transport"></a>Transport</h2></div></div></div><p>The transport module is used for internal communication between nodes
within the cluster. Each call that goes from one node to the other uses
the transport module (for example, when an HTTP GET request is processed
by one node, and should actually be processed by another node that holds
the data).</p><p>The transport mechanism is completely asynchronous in nature, meaning
that there is no blocking thread waiting for a response. The benefit of
using asynchronous communication is first solving the
<a class="ulink" href="http://en.wikipedia.org/wiki/C10k_problem" target="_top">C10k problem</a>, as well as
being the ideal solution for scatter (broadcast) / gather operations such
as search in ElasticSearch.</p><h3><a id="_tcp_transport"></a>TCP Transport</h3><p>The TCP transport is an implementation of the transport module using
TCP. It allows for the following settings:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">transport.tcp.port</code></p></td><td class="entry" align="left" valign="top"><p>A bind port range. Defaults to <code class="literal">9300-9400</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">transport.publish_port</code></p></td><td class="entry" align="left" valign="top"><p>The port that other nodes in the cluster
should use when communicating with this node. Useful when a cluster node
is behind a proxy or firewall and the <code class="literal">transport.tcp.port</code> is not directly
addressable from the outside. Defaults to the actual port assigned via
<code class="literal">transport.tcp.port</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">transport.bind_host</code></p></td><td class="entry" align="left" valign="top"><p>The host address to bind the transport service to. Defaults to <code class="literal">transport.host</code> (if set) or <code class="literal">network.bind_host</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">transport.publish_host</code></p></td><td class="entry" align="left" valign="top"><p>The host address to publish for nodes in the cluster to connect to. Defaults to <code class="literal">transport.host</code> (if set) or <code class="literal">network.publish_host</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">transport.host</code></p></td><td class="entry" align="left" valign="top"><p>Used to set the <code class="literal">transport.bind_host</code> and the <code class="literal">transport.publish_host</code> Defaults to <code class="literal">transport.host</code> or <code class="literal">network.host</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">transport.tcp.connect_timeout</code></p></td><td class="entry" align="left" valign="top"><p>The socket connect timeout setting (in
time setting format). Defaults to <code class="literal">30s</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">transport.tcp.compress</code></p></td><td class="entry" align="left" valign="top"><p>Set to <code class="literal">true</code> to enable compression (LZF)
between all nodes. Defaults to <code class="literal">false</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">transport.ping_schedule</code></p></td><td class="entry" align="left" valign="top"><p>Schedule a regular ping message to ensure that connections are kept alive. Defaults to <code class="literal">5s</code> in the transport client and <code class="literal">-1</code> (disabled) elsewhere.</p></td></tr></tbody></table></div><p>It also uses the common
<a class="link" href="modules-network.html" title="Network Settings">network settings</a>.</p><h4><a id="_tcp_transport_profiles"></a>TCP Transport Profiles</h4><p>Elasticsearch allows you to bind to multiple ports on different interfaces by the use of transport profiles. See this example configuration</p><div class="pre_wrapper"><pre class="programlisting">transport.profiles.default.port: 9300-9400
transport.profiles.default.bind_host: 10.0.0.1
transport.profiles.client.port: 9500-9600
transport.profiles.client.bind_host: 192.168.0.1
transport.profiles.dmz.port: 9700-9800
transport.profiles.dmz.bind_host: 172.16.1.2</pre></div><p>The <code class="literal">default</code> profile is a special. It is used as fallback for any other profiles, if those do not have a specific configuration setting set.
Note that the default profile is how other nodes in the cluster will connect to this node usually. In the future this feature will allow to enable node-to-node communication via multiple interfaces.</p><p>The following parameters can be configured like that</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">port</code>: The port to bind to
</li><li class="listitem">
<code class="literal">bind_host</code>: The host to bind
</li><li class="listitem">
<code class="literal">publish_host</code>: The host which is published in informational APIs
</li><li class="listitem">
<code class="literal">tcp_no_delay</code>: Configures the <code class="literal">TCP_NO_DELAY</code> option for this socket
</li><li class="listitem">
<code class="literal">tcp_keep_alive</code>: Configures the <code class="literal">SO_KEEPALIVE</code> option for this socket
</li><li class="listitem">
<code class="literal">reuse_address</code>: Configures the <code class="literal">SO_REUSEADDR</code> option for this socket
</li><li class="listitem">
<code class="literal">tcp_send_buffer_size</code>: Configures the send buffer size of the socket
</li><li class="listitem">
<code class="literal">tcp_receive_buffer_size</code>: Configures the receive buffer size of the socket
</li></ul></div><h3><a id="_local_transport"></a>Local Transport</h3><p>This is a handy transport to use when running integration tests within
the JVM. It is automatically enabled when using
<code class="literal">NodeBuilder#local(true)</code>.</p><h3><a id="_transport_tracer"></a>Transport Tracer</h3><p>The transport module has a dedicated tracer logger which, when activated, logs incoming and out going requests. The log can be dynamically activated
by settings the level of the <code class="literal">transport.tracer</code> logger to <code class="literal">TRACE</code>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_cluster/settings -d '{
    "transient" : {
        "logger.transport.tracer" : "TRACE"
    }
}'</pre></div><p>You can also control which actions will be traced, using a set of include and exclude wildcard patterns. By default every request will be traced
except for fault detection pings:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_cluster/settings -d '{
    "transient" : {
        "transport.tracer.include" : "*"
        "transport.tracer.exclude" : "internal:discovery/zen/fd*"
    }
}'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="modules.html">Modules</a></span>  <span class="breadcrumb-node">Snapshot And Restore</span></div><div class="navheader"><span class="prev"><a href="modules-transport.html">
              &nbsp;
              Transport</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="index-modules.html">Index Modules
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="modules-snapshots"></a>Snapshot And Restore</h2></div></div></div><p>The snapshot and restore module allows to create snapshots of individual
indices or an entire cluster into a remote repository like shared file system,
S3, or HDFS. These snapshots are great for backups because they can be restored
relatively quickly but they are not archival because they can only be restored
to versions of Elasticsearch that can read the index. That means that:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
A snapshot of an index created in 2.x can be restored to 5.x.
</li><li class="listitem">
A snapshot of an index created in 1.x can be restored to 2.x.
</li><li class="listitem">
A snapshot of an index created in 1.x can <span class="strong emphasis"><strong>not</strong></span> be restored to 5.x.
</li></ul></div><p>To restore a snapshot of an index created in 1.x to 5.x you can restore it to
a 2.x cluster and use reindex-from-remote (only available in 5.0+) to rebuild
the index in a 5.x cluster. This is as time consuming as restoring from
archival copies of the original data.</p><h3><a id="_repositories"></a>Repositories</h3><p>Before any snapshot or restore operation can be performed, a snapshot repository should be registered in
Elasticsearch. The repository settings are repository-type specific. See below for details.</p><div class="pre_wrapper"><pre class="programlisting">PUT /_snapshot/my_backup
{
  "type": "fs",
  "settings": {
        ... repository specific settings ...
  }
}</pre></div><p>Once a repository is registered, its information can be obtained using the following command:</p><div class="pre_wrapper"><pre class="programlisting">GET /_snapshot/my_backup</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/1.json"></div><p>which returns:</p><div class="pre_wrapper"><pre class="programlisting">{
  "my_backup": {
    "type": "fs",
    "settings": {
      "compress": "true",
      "location": "/mount/backups/my_backup"
    }
  }
}</pre></div><p>If a repository name is not specified, or <code class="literal">_all</code> is used as repository name Elasticsearch will return information about
all repositories currently registered in the cluster:</p><div class="pre_wrapper"><pre class="programlisting">GET /_snapshot</pre></div><p>or</p><div class="pre_wrapper"><pre class="programlisting">GET /_snapshot/_all</pre></div><h5><a id="_shared_file_system_repository"></a>Shared File System Repository</h5><p>The shared file system repository (<code class="literal">"type": "fs"</code>) uses the shared file system to store snapshots. In order to register
the shared file system repository it is necessary to mount the same shared filesystem to the same location on all
master and data nodes. This location (or one of its parent directories) has to be registered in the <code class="literal">path.repo</code>
setting on all master and data nodes.</p><p>Assuming that the shared filesystem is mounted to <code class="literal">/mount/backups/my_backup</code>, the following setting should be added to
<code class="literal">elasticsearch.yml</code> file:</p><div class="pre_wrapper"><pre class="programlisting">path.repo: ["/mount/backups", "/mount/longterm_backups"]</pre></div><p>The <code class="literal">path.repo</code> setting supports Microsoft Windows UNC paths as long as at least server name and share are specified as
a prefix and back slashes are properly escaped:</p><div class="pre_wrapper"><pre class="programlisting">path.repo: ["\\\\MY_SERVER\\Snapshots"]</pre></div><p>After all nodes are restarted, the following command can be used to register the shared file system repository with
the name <code class="literal">my_backup</code>:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/_snapshot/my_backup' -d '{
    "type": "fs",
    "settings": {
        "location": "/mount/backups/my_backup",
        "compress": true
    }
}'</pre></div><p>If the repository location is specified as a relative path this path will be resolved against the first path specified
in <code class="literal">path.repo</code>:</p><div class="pre_wrapper"><pre class="programlisting">$ curl -XPUT 'http://localhost:9200/_snapshot/my_backup' -d '{
    "type": "fs",
    "settings": {
        "location": "my_backup",
        "compress": true
    }
}'</pre></div><p>The following settings are supported:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">location</code>
</p>
</td><td class="entry" valign="top">
<p>
Location of the snapshots. Mandatory.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">compress</code>
</p>
</td><td class="entry" valign="top">
<p>
Turns on compression of the snapshot files. Compression is applied only to metadata files (index mapping and settings). Data files are not compressed. Defaults to <code class="literal">true</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">chunk_size</code>
</p>
</td><td class="entry" valign="top">
<p>
Big files can be broken down into chunks during snapshotting if needed. The chunk size can be specified in bytes or by
 using size value notation, i.e. 1g, 10m, 5k. Defaults to <code class="literal">null</code> (unlimited chunk size).
</p>
</td></tr></tbody></table></div><h5><a id="_read_only_url_repository"></a>Read-only URL Repository</h5><p>The URL repository (<code class="literal">"type": "url"</code>) can be used as an alternative read-only way to access data created by the shared file
system repository. The URL specified in the <code class="literal">url</code> parameter should
point to the root of the shared filesystem repository. The following settings are supported:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">url</code>
</p>
</td><td class="entry" valign="top">
<p>
Location of the snapshots. Mandatory.
</p>
</td></tr></tbody></table></div><p>URL Repository supports the following protocols: "http", "https", "ftp", "file" and "jar". URL repositories with <code class="literal">http:</code>,
<code class="literal">https:</code>, and <code class="literal">ftp:</code> URLs has to be whitelisted by specifying allowed URLs in the <code class="literal">repositories.url.allowed_urls</code> setting.
This setting supports wildcards in the place of host, path, query, and fragment. For example:</p><div class="pre_wrapper"><pre class="programlisting">repositories.url.allowed_urls: ["http://www.example.org/root/*", "https://*.mydomain.com/*?*#*"]</pre></div><p>URL repositories with <code class="literal">file:</code> URLs can only point to locations registered in the <code class="literal">path.repo</code> setting similiar to
shared file system repository.</p><h5><a id="_common_repository_settings"></a>Common Repository Settings</h5><p>The following are common settings applicable for all repository types:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">max_restore_bytes_per_sec</code>
</p>
</td><td class="entry" valign="top">
<p>
Throttles per node restore rate. Defaults to <code class="literal">40mb</code> per second.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">max_snapshot_bytes_per_sec</code>
</p>
</td><td class="entry" valign="top">
<p>
Throttles per node snapshot rate. Defaults to <code class="literal">40mb</code> per second.
</p>
</td></tr></tbody></table></div><h5><a id="_repository_plugins"></a>Repository plugins</h5><p>Other repository backends are available in these official plugins:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-cloud-aws#s3-repository" target="_top">AWS Cloud Plugin</a> for S3 repositories
</li><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-hadoop/tree/master/repository-hdfs" target="_top">HDFS Plugin</a> for Hadoop environments
</li><li class="listitem">
<a class="ulink" href="https://github.com/elasticsearch/elasticsearch-cloud-azure#azure-repository" target="_top">Azure Cloud Plugin</a> for Azure storage repositories
</li></ul></div><h5><a id="_repository_verification"></a>Repository Verification</h5><p>When a repository is registered, its immediately verified on all master and data nodes to make sure that it is functional
on all nodes currently present in the cluster. The <code class="literal">verify</code> parameter can be used to explicitly disable the repository
verification when registering or updating a repository:</p><div class="pre_wrapper"><pre class="programlisting">PUT /_snapshot/s3_repository?verify=false
{
  "type": "s3",
  "settings": {
    "bucket": "my_s3_bucket",
    "region": "eu-west-1"
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/2.json"></div><p>The verification process can also be executed manually by running the following command:</p><div class="pre_wrapper"><pre class="programlisting">POST /_snapshot/my_backup/_verify</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/3.json"></div><p>It returns a list of nodes where repository was successfully verified or an error message if verification process failed.</p><h3><a id="_snapshot"></a>Snapshot</h3><p>A repository can contain multiple snapshots of the same cluster. Snapshots are identified by unique names within the
cluster. A snapshot with the name <code class="literal">snapshot_1</code> in the repository <code class="literal">my_backup</code> can be created by executing the following
command:</p><div class="pre_wrapper"><pre class="programlisting">PUT /_snapshot/my_backup/snapshot_1?wait_for_completion=true</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/4.json"></div><p>The <code class="literal">wait_for_completion</code> parameter specifies whether or not the request should return immediately after snapshot
initialization (default) or wait for snapshot completion. During snapshot initialization, information about all
previous snapshots is loaded into the memory, which means that in large repositories it may take several seconds (or
even minutes) for this command to return even if the <code class="literal">wait_for_completion</code> parameter is set to <code class="literal">false</code>.</p><p>By default a snapshot of all open and started indices in the cluster is created. This behavior can be changed by
specifying the list of indices in the body of the snapshot request.</p><div class="pre_wrapper"><pre class="programlisting">PUT /_snapshot/my_backup/snapshot_1
{
  "indices": "index_1,index_2",
  "ignore_unavailable": "true",
  "include_global_state": false
}</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/5.json"></div><p>The list of indices that should be included into the snapshot can be specified using the <code class="literal">indices</code> parameter that
supports <a class="link" href="search-search.html#search-multi-index-type" title="Multi-Index, Multi-Typeedit">multi index syntax</a>. The snapshot request also supports the
<code class="literal">ignore_unavailable</code> option. Setting it to <code class="literal">true</code> will cause indices that do not exist to be ignored during snapshot
creation. By default, when <code class="literal">ignore_unavailable</code> option is not set and an index is missing the snapshot request will fail.
By setting <code class="literal">include_global_state</code> to false its possible to prevent the cluster global state to be stored as part of
the snapshot. By default, the entire snapshot will fail if one or more indices participating in the snapshot dont have
all primary shards available. This behaviour can be changed by setting <code class="literal">partial</code> to <code class="literal">true</code>.</p><p>The index snapshot process is incremental. In the process of making the index snapshot Elasticsearch analyses
the list of the index files that are already stored in the repository and copies only files that were created or
changed since the last snapshot. That allows multiple snapshots to be preserved in the repository in a compact form.
Snapshotting process is executed in non-blocking fashion. All indexing and searching operation can continue to be
executed against the index that is being snapshotted. However, a snapshot represents the point-in-time view of the index
at the moment when snapshot was created, so no records that were added to the index after the snapshot process was started
will be present in the snapshot. The snapshot process starts immediately for the primary shards that has been started
and are not relocating at the moment. Elasticsearch waits for
relocation or initialization of shards to complete before snapshotting them.</p><p>Besides creating a copy of each index the snapshot process can also store global cluster metadata, which includes persistent
cluster settings and templates. The transient settings and registered snapshot repositories are not stored as part of
the snapshot.</p><p>Only one snapshot process can be executed in the cluster at any time. While snapshot of a particular shard is being
created this shard cannot be moved to another node, which can interfere with rebalancing process and allocation
filtering. Elasticsearch will only be able to move a shard to another node (according to the current allocation
filtering settings and rebalancing algorithm) once the snapshot is finished.</p><p>Once a snapshot is created information about this snapshot can be obtained using the following command:</p><div class="pre_wrapper"><pre class="programlisting">GET /_snapshot/my_backup/snapshot_1</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/6.json"></div><p>All snapshots currently stored in the repository can be listed using the following command:</p><div class="pre_wrapper"><pre class="programlisting">GET /_snapshot/my_backup/_all</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/7.json"></div><p>A snapshot can be deleted from the repository using the following command:</p><div class="pre_wrapper"><pre class="programlisting">DELETE /_snapshot/my_backup/snapshot_1</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/8.json"></div><p>When a snapshot is deleted from a repository, Elasticsearch deletes all files that are associated with the deleted
snapshot and not used by any other snapshots. If the deleted snapshot operation is executed while the snapshot is being
created the snapshotting process will be aborted and all files created as part of the snapshotting process will be
cleaned. Therefore, the delete snapshot operation can be used to cancel long running snapshot operations that were
started by mistake.</p><p>A repository can be deleted using the following command:</p><div class="pre_wrapper"><pre class="programlisting">DELETE /_snapshot/my_backup</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/9.json"></div><p>When a repository is deleted, Elasticsearch only removes the reference to the location where the repository is storing
the snapshots. The snapshots themselves are left untouched and in place.</p><h3><a id="_restore"></a>Restore</h3><p>A snapshot can be restored using the following command:</p><div class="pre_wrapper"><pre class="programlisting">POST /_snapshot/my_backup/snapshot_1/_restore</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/10.json"></div><p>By default, all indices in the snapshot as well as cluster state are restored. Its possible to select indices that
should be restored as well as prevent global cluster state from being restored by using <code class="literal">indices</code> and
<code class="literal">include_global_state</code> options in the restore request body. The list of indices supports
<a class="link" href="search-search.html#search-multi-index-type" title="Multi-Index, Multi-Typeedit">multi index syntax</a>. The <code class="literal">rename_pattern</code> and <code class="literal">rename_replacement</code> options can be also used to
rename index on restore using regular expression that supports referencing the original text as explained
<a class="ulink" href="http://docs.oracle.com/javase/6/docs/api/java/util/regex/Matcher.html#appendReplacement(java.lang.StringBuffer,%20java.lang.String)" target="_top">here</a>.
Set <code class="literal">include_aliases</code> to <code class="literal">false</code> to prevent aliases from being restored together with associated indices</p><div class="pre_wrapper"><pre class="programlisting">POST /_snapshot/my_backup/snapshot_1/_restore
{
  "indices": "index_1,index_2",
  "ignore_unavailable": "true",
  "include_global_state": false,
  "rename_pattern": "index_(.+)",
  "rename_replacement": "restored_index_$1"
}</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/11.json"></div><p>The restore operation can be performed on a functioning cluster. However, an existing index can be only restored if its
<a class="link" href="indices-open-close.html" title="Open / Close Index API">closed</a> and has the same number of shards as the index in the snapshot.
The restore operation automatically opens restored indices if they were closed and creates new indices if they
didnt exist in the cluster. If cluster state is restored, the restored templates that dont currently exist in the
cluster are added and existing templates with the same name are replaced by the restored templates. The restored
persistent settings are added to the existing persistent settings.</p><h4><a id="_partial_restore"></a>Partial restore</h4><p>By default, the entire restore operation will fail if one or more indices participating in the operation dont have
snapshots of all shards available. It can occur if some shards failed to snapshot for example. It is still possible to
restore such indices by setting <code class="literal">partial</code> to <code class="literal">true</code>. Please note, that only successfully snapshotted shards will be
restored in this case and all missing shards will be recreated empty.</p><h4><a id="_changing_index_settings_during_restore"></a>Changing index settings during restore</h4><p>Most of index settings can be overridden during the restore process. For example, the following command will restore
the index <code class="literal">index_1</code> without creating any replicas while switching back to default refresh interval:</p><div class="pre_wrapper"><pre class="programlisting">POST /_snapshot/my_backup/snapshot_1/_restore
{
  "indices": "index_1",
  "index_settings": {
    "index.number_of_replicas": 0
  },
  "ignore_index_settings": [
    "index.refresh_interval"
  ]
}</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/12.json"></div><p>Please note, that some settings such as <code class="literal">index.number_of_shards</code> cannot be changed during restore operation.</p><h4><a id="_restoring_to_a_different_cluster"></a>Restoring to a different cluster</h4><p>The information stored in a snapshot is not tied to a particular cluster or a cluster name. Therefore its possible to
restore a snapshot made from one cluster into another cluster. All that is required is registering the repository
containing the snapshot in the new cluster and starting the restore process. The new cluster doesnt have to have the
same size or topology.  However, the version of the new cluster should be the same or newer than the cluster that was
used to create the snapshot.</p><p>If the new cluster has a smaller size additional considerations should be made. First of all its necessary to make sure
that new cluster have enough capacity to store all indices in the snapshot. Its possible to change indices settings
during restore to reduce the number of replicas, which can help with restoring snapshots into smaller cluster. Its also
possible to select only subset of the indices using the <code class="literal">indices</code> parameter.  Prior to version 1.5.0 elasticsearch
didnt check restored persistent settings making it possible to accidentally restore an incompatible
<code class="literal">discovery.zen.minimum_master_nodes</code> setting, and as a result disable a smaller cluster until the required number of
master eligible nodes is added.  Starting with version 1.5.0 incompatible settings are ignored.</p><p>If indices in the original cluster were assigned to particular nodes using
<a class="link" href="index-modules-allocation.html#shard-allocation-filtering" title="Shard Allocation Filteringedit">shard allocation filtering</a>, the same rules will be enforced in the new cluster. Therefore
if the new cluster doesnt contain nodes with appropriate attributes that a restored index can be allocated on, such
index will not be successfully restored unless these index allocation settings are changed during restore operation.</p><h3><a id="_snapshot_status"></a>Snapshot status</h3><p>A list of currently running snapshots with their detailed status information can be obtained using the following command:</p><div class="pre_wrapper"><pre class="programlisting">GET /_snapshot/_status</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/13.json"></div><p>In this format, the command will return information about all currently running snapshots. By specifying a repository name, its possible
to limit the results to a particular repository:</p><div class="pre_wrapper"><pre class="programlisting">GET /_snapshot/my_backup/_status</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/14.json"></div><p>If both repository name and snapshot id are specified, this command will return detailed status information for the given snapshot even
if its not currently running:</p><div class="pre_wrapper"><pre class="programlisting">GET /_snapshot/my_backup/snapshot_1/_status</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/15.json"></div><p>Multiple ids are also supported:</p><div class="pre_wrapper"><pre class="programlisting">GET /_snapshot/my_backup/snapshot_1,snapshot_2/_status</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/16.json"></div><h3><a id="_monitoring_snapshot_restore_progress"></a>Monitoring snapshot/restore progress</h3><p>There are several ways to monitor the progress of the snapshot and restores processes while they are running. Both
operations support <code class="literal">wait_for_completion</code> parameter that would block client until the operation is completed. This is
the simplest method that can be used to get notified about operation completion.</p><p>The snapshot operation can be also monitored by periodic calls to the snapshot info:</p><div class="pre_wrapper"><pre class="programlisting">GET /_snapshot/my_backup/snapshot_1</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/17.json"></div><p>Please note that snapshot info operation uses the same resources and thread pool as the snapshot operation. So,
executing a snapshot info operation while large shards are being snapshotted can cause the snapshot info operation to wait
for available resources before returning the result. On very large shards the wait time can be significant.</p><p>To get more immediate and complete information about snapshots the snapshot status command can be used instead:</p><div class="pre_wrapper"><pre class="programlisting">GET /_snapshot/my_backup/snapshot_1/_status</pre></div><div class="sense_widget" data-snippet="snippets/modules-snapshots/18.json"></div><p>While snapshot info method returns only basic information about the snapshot in progress, the snapshot status returns
complete breakdown of the current state for each shard participating in the snapshot.</p><p>The restore process piggybacks on the standard recovery mechanism of the Elasticsearch. As a result, standard recovery
monitoring services can be used to monitor the state of restore. When restore operation is executed the cluster
typically goes into <code class="literal">red</code> state. It happens because the restore operation starts with "recovering" primary shards of the
restored indices. During this operation the primary shards become unavailable which manifests itself in the <code class="literal">red</code> cluster
state. Once recovery of primary shards is completed Elasticsearch is switching to standard replication process that
creates the required number of replicas at this moment cluster switches to the <code class="literal">yellow</code> state. Once all required replicas
are created, the cluster switches to the <code class="literal">green</code> states.</p><p>The cluster health operation provides only a high level status of the restore process. Its possible to get more
detailed insight into the current state of the recovery process by using <a class="link" href="indices-recovery.html" title="Indices Recovery">indices recovery</a> and
<a class="link" href="cat-recovery.html" title="cat recovery">cat recovery</a> APIs.</p><h3><a id="_stopping_currently_running_snapshot_and_restore_operations"></a>Stopping currently running snapshot and restore operations</h3><p>The snapshot and restore framework allows running only one snapshot or one restore operation at a time. If a currently
running snapshot was executed by mistake, or takes unusually long, it can be terminated using the snapshot delete operation.
The snapshot delete operation checks if the deleted snapshot is currently running and if it does, the delete operation stops
that snapshot before deleting the snapshot data from the repository.</p><p>The restore operation uses the standard shard recovery mechanism. Therefore, any currently running restore operation can
be canceled by deleting indices that are being restored. Please note that data for all deleted indices will be removed
from the cluster as a result of this operation.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">Index Modules</span></div><div class="navheader"><span class="prev"><a href="modules-snapshots.html">
              &nbsp;
              Snapshot And Restore</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="index-modules-analysis.html">Analysis
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="index-modules"></a>Index Modules</h1></div></div></div><div class="partintro"><div></div><p>Index Modules are modules created per index and control all aspects
related to an index. Since those modules lifecycle are tied to an index,
all the relevant modules settings can be provided when creating an index
(and it is actually the recommended way to configure an index).</p><h2><a id="index-modules-settings"></a>Index Settings</h2><p>There are specific index level settings that are not associated with any
specific module. These include:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<a id="index-compound-format"></a><code class="literal">index.compound_format</code>
</span></dt><dd><p class="simpara">
        <span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span>
        Should the compound file format be used (boolean or float setting).
        The compound format was created to reduce the number of open
        file handles when using file based storage.  If you set this
        to <code class="literal">false</code> be sure the OS is also configured to give
        Elasticsearch enough file handles.
    See <a class="xref" href="setup-configuration.html#file-descriptors" title="File Descriptorsedit">the section called File Descriptors</a>.
</p><p class="simpara">Alternatively, <code class="literal">compound_format</code> can be set to a number between <code class="literal">0</code> and
<code class="literal">1</code>, where <code class="literal">0</code> means <code class="literal">false</code>, <code class="literal">1</code> means <code class="literal">true</code> and a number in between
represents a percentage: if the merged segment is less than this
percentage of the total index, then it is written in compound format,
otherwise it is written in non-compound format.</p><p class="simpara">Default is 0.1.</p></dd><dt><span class="term">
<a id="index-compound-on-flush"></a><code class="literal">index.compound_on_flush</code>
</span></dt><dd>
    <span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span>
    Should a new segment (create by indexing, not by merging) be written
    in compound format or non-compound format? Defaults to <code class="literal">true</code>.
    This is a dynamic setting.
</dd><dt><span class="term">
<code class="literal">index.refresh_interval</code>
</span></dt><dd>
        A time setting controlling how often the
        refresh operation will be executed. Defaults to <code class="literal">1s</code>. Can be set to <code class="literal">-1</code>
        in order to disable it.
</dd><dt><span class="term">
<code class="literal">index.shard.check_on_startup</code>
</span></dt><dd>
        <span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span>
        Should shard consistency be checked upon opening.
        When <code class="literal">true</code>, the shard will be checked, preventing it from being open in
        case some segments appear to be corrupted.
        When <code class="literal">fix</code>, the shard will also be checked but segments that were reported
        as corrupted will be automatically removed.
        Default value is <code class="literal">false</code>, which doesnt check shards.
</dd></dl></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Checking shards may take a lot of time on large indices.</p></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>Setting <code class="literal">index.shard.check_on_startup</code> to <code class="literal">fix</code> may result in data loss,
         use with caution.</p></div></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-node">Analysis</span></div><div class="navheader"><span class="prev"><a href="index-modules.html">
              &nbsp;
              Index Modules</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="index-modules-allocation.html">Index Shard Allocation
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index-modules-analysis"></a>Analysis</h2></div></div></div><p>The index analysis module acts as a configurable registry of Analyzers
that can be used in order to break down indexed (analyzed) fields when a
document is indexed as well as to process query strings. It maps to the Lucene
<code class="literal">Analyzer</code>.</p><p>Analyzers are (generally) composed of a single <code class="literal">Tokenizer</code> and zero or
more <code class="literal">TokenFilters</code>. A set of <code class="literal">CharFilters</code> can be associated with an
analyzer to process the characters prior to other analysis steps. The
analysis module allows one to register <code class="literal">TokenFilters</code>, <code class="literal">Tokenizers</code> and
<code class="literal">Analyzers</code> under logical names that can then be referenced either in
mapping definitions or in certain APIs. The Analysis module
automatically registers (<span class="strong emphasis"><strong>if not explicitly defined</strong></span>) built in
analyzers, token filters, and tokenizers.</p><p>See <a class="xref" href="analysis.html" title="Analysis">Analysis</a> for configuration details.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-node">Index Shard Allocation</span></div><div class="navheader"><span class="prev"><a href="index-modules-analysis.html">
              &nbsp;
              Analysis</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="delayed-allocation.html">Delaying allocation when a node leaves
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index-modules-allocation"></a>Index Shard Allocation</h2></div></div></div><h3><a id="shard-allocation-filtering"></a>Shard Allocation Filtering</h3><p>Allows to control the allocation of indices on nodes based on include/exclude
filters. The filters can be set both on the index level and on the
cluster level. Lets start with an example of setting it on the cluster
level:</p><p>Lets say we have 4 nodes, each has specific attribute called <code class="literal">tag</code>
associated with it (the name of the attribute can be any name). Each
node has a specific value associated with <code class="literal">tag</code>. Node 1 has a setting
<code class="literal">node.tag: value1</code>, Node 2 a setting of <code class="literal">node.tag: value2</code>, and so on.</p><p>We can create an index that will only deploy on nodes that have <code class="literal">tag</code>
set to <code class="literal">value1</code> and <code class="literal">value2</code> by setting
<code class="literal">index.routing.allocation.include.tag</code> to <code class="literal">value1,value2</code>. For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test/_settings -d '{
    "index.routing.allocation.include.tag" : "value1,value2"
}'</pre></div><p>On the other hand, we can create an index that will be deployed on all
nodes except for nodes with a <code class="literal">tag</code> of value <code class="literal">value3</code> by setting
<code class="literal">index.routing.allocation.exclude.tag</code> to <code class="literal">value3</code>. For example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test/_settings -d '{
    "index.routing.allocation.exclude.tag" : "value3"
}'</pre></div><p><code class="literal">index.routing.allocation.require.*</code> can be used to
specify a number of rules, all of which MUST match in order for a shard
to be allocated to a node. This is in contrast to <code class="literal">include</code> which will
include a node if ANY rule matches.</p><p>The <code class="literal">include</code>, <code class="literal">exclude</code> and <code class="literal">require</code> values can have generic simple
matching wildcards, for example, <code class="literal">value1*</code>. Additionally, special attribute
names called <code class="literal">_ip</code>, <code class="literal">_name</code>, <code class="literal">_id</code> and <code class="literal">_host</code> can be used to match by node
ip address, name, id or host name, respectively.</p><p>Obviously a node can have several attributes associated with it, and
both the attribute name and value are controlled in the setting. For
example, here is a sample of several node configurations:</p><div class="pre_wrapper"><pre class="programlisting">node.group1: group1_value1
node.group2: group2_value4</pre></div><p>In the same manner, <code class="literal">include</code>, <code class="literal">exclude</code> and <code class="literal">require</code> can work against
several attributes, for example:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/test/_settings -d '{
    "index.routing.allocation.include.group1" : "xxx"
    "index.routing.allocation.include.group2" : "yyy",
    "index.routing.allocation.exclude.group3" : "zzz",
    "index.routing.allocation.require.group4" : "aaa",
}'</pre></div><p>The provided settings can also be updated in real time using the update
settings API, allowing to "move" indices (shards) around in realtime.</p><p>Cluster wide filtering can also be defined, and be updated in real time
using the cluster update settings API. This setting can come in handy
for things like decommissioning nodes (even if the replica count is set
to 0). Here is a sample of how to decommission a node based on <code class="literal">_ip</code>
address:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_cluster/settings -d '{
    "transient" : {
        "cluster.routing.allocation.exclude._ip" : "10.0.0.1"
    }
}'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-link"><a href="index-modules-allocation.html">Index Shard Allocation</a></span>  <span class="breadcrumb-node">Delaying allocation when a node leaves</span></div><div class="navheader"><span class="prev"><a href="index-modules-allocation.html">
              &nbsp;
              Index Shard Allocation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="recovery-prioritization.html">Index recovery prioritization
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="delayed-allocation"></a>Delaying allocation when a node leaves</h2></div></div></div><p>When a node leaves the cluster for whatever reason, intentional or otherwise,
the master reacts by:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Promoting a replica shard to primary to replace any primaries that were on the node.
</li><li class="listitem">
Allocating replica shards to replace the missing replicas (assuming there are enough nodes).
</li><li class="listitem">
Rebalancing shards evenly across the remaining nodes.
</li></ul></div><p>These actions are intended to protect the cluster against data loss by
ensuring that every shard is fully replicated as soon as possible.</p><p>Even though we throttle concurrent recoveries both at the
<a class="link" href="modules-indices.html#recovery" title="Recoveryedit">node level</a> and at the <a class="link" href="modules-cluster.html#shards-allocation" title="Shards Allocationedit">cluster level</a>, this
shard-shuffle can still put a lot of extra load on the cluster which
may not be necessary if the missing node is likely to return soon. Imagine
this scenario:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Node 5 loses network connectivity.
</li><li class="listitem">
The master promotes a replica shard to primary for each primary that was on Node 5.
</li><li class="listitem">
The master allocates new replicas to other nodes in the cluster.
</li><li class="listitem">
Each new replica makes an entire copy of the primary shard across the network.
</li><li class="listitem">
More shards are moved to different nodes to rebalance the cluster.
</li><li class="listitem">
Node 5 returns after a few minutes.
</li><li class="listitem">
The master rebalances the cluster by allocating shards to Node 5.
</li></ul></div><p>If the master had just waited for a few minutes, then the missing shards could
have been re-allocated to Node 5 with the minimum of network traffic.  This
process would be even quicker for idle shards (shards not receiving indexing
requests) which have been automatically <a class="link" href="indices-synced-flush.html" title="Synced Flush">sync-flushed</a>.</p><p>The allocation of replica shards which become unassigned because a node has
left can be delayed with the <code class="literal">index.unassigned.node_left.delayed_timeout</code>
dynamic setting, which defaults to <code class="literal">1m</code>.</p><p>This setting can be updated on a live index (or on all indices):</p><div class="pre_wrapper"><pre class="programlisting">PUT /_all/_settings
{
  "settings": {
    "index.unassigned.node_left.delayed_timeout": "5m"
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/delayed-allocation/1.json"></div><p>With delayed allocation enabled, the above scenario changes to look like this:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Node 5 loses network connectivity.
</li><li class="listitem">
The master promotes a replica shard to primary for each primary that was on Node 5.
</li><li class="listitem">
The master logs a message that allocation of unassigned shards has been delayed, and for how long.
</li><li class="listitem">
The cluster remains yellow because there are unassigned replica shards.
</li><li class="listitem">
Node 5 returns after a few minutes, before the <code class="literal">timeout</code> expires.
</li><li class="listitem">
The missing replicas are re-allocated to Node 5 (and sync-flushed shards recover almost immediately).
</li></ul></div><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>This setting will not affect the promotion of replicas to primaries, nor
will it affect the assignment of replicas that have not been assigned
previously.</p></div></div><h4><a id="_monitoring_delayed_unassigned_shards"></a>Monitoring delayed unassigned shards</h4><p>The number of shards whose allocation has been delayed by this timeout setting
can be viewed with the <a class="link" href="cluster-health.html" title="Cluster Health">cluster health API</a>:</p><div class="pre_wrapper"><pre class="programlisting">GET _cluster/health <a id="CO117-1"></a><span><img class="images-icons-callouts-1-png" alt=""></span></pre></div><div class="calloutlist"><table border="0" summary="Callout list"><tbody><tr><td width="5%" valign="top" align="left"><p><a href="#CO117-1"><span><img class="images-icons-callouts-1-png" alt=""></span></a> </p></td><td valign="top" align="left"><p class="para">
This request will return a <code class="literal">delayed_unassigned_shards</code> value.
</p></td></tr></tbody></table></div><h4><a id="_removing_a_node_permanently"></a>Removing a node permanently</h4><p>If a node is not going to return and you would like Elasticsearch to allocate
the missing shards immediately, just update the timeout to zero:</p><div class="pre_wrapper"><pre class="programlisting">PUT /_all/_settings
{
  "settings": {
    "index.unassigned.node_left.delayed_timeout": "0"
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/delayed-allocation/2.json"></div><p>You can reset the timeout as soon as the missing shards have started to recover.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-link"><a href="index-modules-allocation.html">Index Shard Allocation</a></span>  <span class="breadcrumb-node">Index recovery prioritization</span></div><div class="navheader"><span class="prev"><a href="delayed-allocation.html">
              &nbsp;
              Delaying allocation when a node leaves</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_total_shards_per_node.html">Total Shards Per Node
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="recovery-prioritization"></a>Index recovery prioritization</h2></div></div></div><p>Unallocated shards are recovered in order of priority, whenever possible.
Indices are sorted into priority order as follows:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
the optional <code class="literal">index.priority</code> setting (higher before lower)
</li><li class="listitem">
the index creation date (higher before lower)
</li><li class="listitem">
the index name (higher before lower)
</li></ul></div><p>This means that, by default, newer indices will be recovered before older indices.</p><p>Use the per-index dynamically updateable <code class="literal">index.priority</code> setting to customise
the index prioritization order.  For instance:</p><div class="pre_wrapper"><pre class="programlisting">PUT index_1

PUT index_2

PUT index_3
{
  "settings": {
    "index.priority": 10
  }
}

PUT index_4
{
  "settings": {
    "index.priority": 5
  }
}</pre></div><div class="sense_widget" data-snippet="snippets/recovery-prioritization/1.json"></div><p>In the above example:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<code class="literal">index_3</code> will be recovered first because it has the highest <code class="literal">index.priority</code>.
</li><li class="listitem">
<code class="literal">index_4</code> will be recovered next because it has the next highest priority.
</li><li class="listitem">
<code class="literal">index_2</code> will be recovered next because it was created more recently.
</li><li class="listitem">
<code class="literal">index_1</code> will be recovered last.
</li></ul></div><p>This setting accepts an integer, and can be updated on a live index with the
<a class="link" href="indices-update-settings.html" title="Update Indices Settings">update index settings API</a>:</p><div class="pre_wrapper"><pre class="programlisting">PUT index_4/_settings
{
  "index.priority": 1
}</pre></div><div class="sense_widget" data-snippet="snippets/recovery-prioritization/2.json"></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-link"><a href="index-modules-allocation.html">Index Shard Allocation</a></span>  <span class="breadcrumb-node">Total Shards Per Node</span></div><div class="navheader"><span class="prev"><a href="recovery-prioritization.html">
              &nbsp;
              Index recovery prioritization</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="disk.html">Disk-based Shard Allocation
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_total_shards_per_node"></a>Total Shards Per Node</h2></div></div></div><p>The <code class="literal">index.routing.allocation.total_shards_per_node</code> setting allows to
control how many total shards (replicas and primaries) for an index will be allocated per node.
It can be dynamically set on a live index using the update index
settings API.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-link"><a href="index-modules-allocation.html">Index Shard Allocation</a></span>  <span class="breadcrumb-node">Disk-based Shard Allocation</span></div><div class="navheader"><span class="prev"><a href="_total_shards_per_node.html">
              &nbsp;
              Total Shards Per Node</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="index-modules-slowlog.html">Index Slow Log
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="disk"></a>Disk-based Shard Allocation</h2></div></div></div><p>Elasticsearch can be configured to prevent shard
allocation on nodes depending on disk usage for the node. This
functionality is enabled by default, and can be changed either in the
configuration file, or dynamically using:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_cluster/settings -d '{
    "transient" : {
        "cluster.routing.allocation.disk.threshold_enabled" : false
    }
}'</pre></div><p>Once enabled, Elasticsearch uses two watermarks to decide whether
shards should be allocated or can remain on the node.</p><p><code class="literal">cluster.routing.allocation.disk.watermark.low</code> controls the low
watermark for disk usage. It defaults to 85%, meaning ES will not
allocate new shards to nodes once they have more than 85% disk
used. It can also be set to an absolute byte value (like 500mb) to
prevent ES from allocating shards if less than the configured amount
of space is available.</p><p><code class="literal">cluster.routing.allocation.disk.watermark.high</code> controls the high
watermark. It defaults to 90%, meaning ES will attempt to relocate
shards to another node if the node disk usage rises above 90%. It can
also be set to an absolute byte value (similar to the low watermark)
to relocate shards once less than the configured amount of space is
available on the node.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Percentage values refer to used disk space, while byte values refer to
free disk space. This can be confusing, since it flips the meaning of
high and low. For example, it makes sense to set the low watermark to 10gb
and the high watermark to 5gb, but not the other way around.</p></div></div><p>Both watermark settings can be changed dynamically using the cluster
settings API. By default, Elasticsearch will retrieve information
about the disk usage of the nodes every 30 seconds. This can also be
changed by setting the <code class="literal">cluster.info.update.interval</code> setting.</p><p>An example of updating the low watermark to no more than 80% of the disk size, a
high watermark of at least 50 gigabytes free, and updating the information about
the cluster every minute:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_cluster/settings -d '{
    "transient" : {
        "cluster.routing.allocation.disk.watermark.low" : "80%",
        "cluster.routing.allocation.disk.watermark.high" : "50gb",
        "cluster.info.update.interval" : "1m"
    }
}'</pre></div><p>By default, Elasticsearch will take into account shards that are currently being
relocated to the target node when computing a nodes disk usage. This can be
changed by setting the cluster.routing.allocation.disk.include_relocations`
setting to <code class="literal">false</code> (defaults to <code class="literal">true</code>). Taking relocating shards sizes into
account may, however, mean that the disk usage for a node is incorrectly
estimated on the high side, since the relocation could be 90% complete and a
recently retrieved disk usage would include the total size of the relocating
shard as well as the space already used by the running relocation.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-node">Index Slow Log</span></div><div class="navheader"><span class="prev"><a href="disk.html">
              &nbsp;
              Disk-based Shard Allocation</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="index-modules-merge.html">Merge
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index-modules-slowlog"></a>Index Slow Log</h2></div></div></div><h3><a id="search-slow-log"></a>Search Slow Log</h3><p>Shard level slow search log allows to log slow search (query and fetch
executions) into a dedicated log file.</p><p>Thresholds can be set for both the query phase of the execution, and
fetch phase, here is a sample:</p><div class="pre_wrapper"><pre class="programlisting">#index.search.slowlog.threshold.query.warn: 10s
#index.search.slowlog.threshold.query.info: 5s
#index.search.slowlog.threshold.query.debug: 2s
#index.search.slowlog.threshold.query.trace: 500ms

#index.search.slowlog.threshold.fetch.warn: 1s
#index.search.slowlog.threshold.fetch.info: 800ms
#index.search.slowlog.threshold.fetch.debug: 500ms
#index.search.slowlog.threshold.fetch.trace: 200ms</pre></div><p>By default, none are enabled (set to <code class="literal">-1</code>). Levels (<code class="literal">warn</code>, <code class="literal">info</code>,
<code class="literal">debug</code>, <code class="literal">trace</code>) allow to control under which logging level the log
will be logged. Not all are required to be configured (for example, only
<code class="literal">warn</code> threshold can be set). The benefit of several levels is the
ability to quickly "grep" for specific thresholds breached.</p><p>The logging is done on the shard level scope, meaning the execution of a
search request within a specific shard. It does not encompass the whole
search request, which can be broadcast to several shards in order to
execute. Some of the benefits of shard level logging is the association
of the actual execution on the specific machine, compared with request
level.</p><p>All settings are index level settings (and each index can have different
values for it), and can be changed in runtime using the index update
settings API.</p><p>The logging file is configured by default using the following
configuration (found in <code class="literal">logging.yml</code>):</p><div class="pre_wrapper"><pre class="programlisting">index_search_slow_log_file:
  type: dailyRollingFile
  file: ${path.logs}/${cluster.name}_index_search_slowlog.log
  datePattern: "'.'yyyy-MM-dd"
  layout:
    type: pattern
    conversionPattern: "[%d{ISO8601}][%-5p][%-25c] %m%n"</pre></div><h3><a id="index-slow-log"></a>Index Slow log</h3><p>The indexing slow log, similar in functionality to the search slow
log. The log file is ends with <code class="literal">_index_indexing_slowlog.log</code>. Log and
the thresholds are configured in the elasticsearch.yml file in the same
way as the search slowlog. Index slowlog sample:</p><div class="pre_wrapper"><pre class="programlisting">#index.indexing.slowlog.threshold.index.warn: 10s
#index.indexing.slowlog.threshold.index.info: 5s
#index.indexing.slowlog.threshold.index.debug: 2s
#index.indexing.slowlog.threshold.index.trace: 500ms</pre></div><p>The index slow log file is configured by default in the <code class="literal">logging.yml</code>
file:</p><div class="pre_wrapper"><pre class="programlisting">index_indexing_slow_log_file:
    type: dailyRollingFile
    file: ${path.logs}/${cluster.name}_index_indexing_slowlog.log
    datePattern: "'.'yyyy-MM-dd"
    layout:
      type: pattern
      conversionPattern: "[%d{ISO8601}][%-5p][%-25c] %m%n"</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-node">Merge</span></div><div class="navheader"><span class="prev"><a href="index-modules-slowlog.html">
              &nbsp;
              Index Slow Log</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="index-modules-store.html">Store
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index-modules-merge"></a>Merge</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p></div></div><p>A shard in elasticsearch is a Lucene index, and a Lucene index is broken
down into segments. Segments are internal storage elements in the index
where the index data is stored, and are immutable up to delete markers.
Segments are, periodically, merged into larger segments to keep the
index size at bay and expunge deletes.</p><p>The more segments one has in the Lucene index means slower searches and
more memory used. Segment merging is used to reduce the number of segments,
however merges can be expensive to perform, especially on low IO environments.
Merges can be throttled using <a class="link" href="index-modules-store.html#store-throttling" title="Store Level Throttlingedit">store level throttling</a>.</p><h3><a id="policy"></a>Policy</h3><p>The index merge policy module allows one to control which segments of a
shard index are to be merged. There are several types of policies with
the default set to <code class="literal">tiered</code>.</p><h4><a id="tiered"></a>tiered</h4><p>Merges segments of approximately equal size, subject to an allowed
number of segments per tier. This is similar to <code class="literal">log_bytes_size</code> merge
policy, except this merge policy is able to merge non-adjacent segment,
and separates how many segments are merged at once from how many
segments are allowed per tier. This merge policy also does not
over-merge (i.e., cascade merges).</p><p>This policy has the following settings:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">index.merge.policy.expunge_deletes_allowed</code>
</span></dt><dd>
        When expungeDeletes is called, we only merge away a segment if its delete
        percentage is over this threshold. Default is <code class="literal">10</code>.
</dd><dt><span class="term">
<code class="literal">index.merge.policy.floor_segment</code>
</span></dt><dd>
        Segments smaller than this are "rounded up" to this size, i.e. treated as
        equal (floor) size for merge selection. This is to prevent frequent
        flushing of tiny segments, thus preventing a long tail in the index. Default
        is <code class="literal">2mb</code>.
</dd><dt><span class="term">
<code class="literal">index.merge.policy.max_merge_at_once</code>
</span></dt><dd>
        Maximum number of segments to be merged at a time during "normal" merging.
        Default is <code class="literal">10</code>.
</dd><dt><span class="term">
<code class="literal">index.merge.policy.max_merge_at_once_explicit</code>
</span></dt><dd>
        Maximum number of segments to be merged at a time, during optimize or
        expungeDeletes. Default is <code class="literal">30</code>.
</dd><dt><span class="term">
<code class="literal">index.merge.policy.max_merged_segment</code>
</span></dt><dd>
        Maximum sized segment to produce during normal merging (not explicit
        optimize). This setting is approximate: the estimate of the merged segment
        size is made by summing sizes of to-be-merged segments (compensating for
        percent deleted docs). Default is <code class="literal">5gb</code>.
</dd><dt><span class="term">
<code class="literal">index.merge.policy.segments_per_tier</code>
</span></dt><dd>
        Sets the allowed number of segments per tier. Smaller values mean more
        merging but fewer segments. Default is <code class="literal">10</code>. Note, this value needs to be
        &gt;= than the <code class="literal">max_merge_at_once</code> otherwise youll force too many merges to
        occur.
</dd><dt><span class="term">
<code class="literal">index.merge.policy.reclaim_deletes_weight</code>
</span></dt><dd>
        Controls how aggressively merges that reclaim more deletions are favored.
        Higher values favor selecting merges that reclaim deletions. A value of
        <code class="literal">0.0</code> means deletions dont impact merge selection. Defaults to <code class="literal">2.0</code>.
</dd><dt><span class="term">
<code class="literal">index.compound_format</code>
</span></dt><dd>
        Should the index be stored in compound format or not. Defaults to <code class="literal">false</code>.
        See <a class="link" href="index-modules.html#index-compound-format"><code class="literal">index.compound_format</code></a> in
        <a class="xref" href="index-modules.html#index-modules-settings" title="Index Settingsedit">the section called Index Settings</a>.
</dd></dl></div><p>For normal merging, this policy first computes a "budget" of how many
segments are allowed to be in the index. If the index is over-budget,
then the policy sorts segments by decreasing size (proportionally considering percent
deletes), and then finds the least-cost merge. Merge cost is measured by
a combination of the "skew" of the merge (size of largest seg divided by
smallest seg), total merge size and pct deletes reclaimed, so that
merges with lower skew, smaller size and those reclaiming more deletes,
are favored.</p><p>If a merge will produce a segment thats larger than
<code class="literal">max_merged_segment</code> then the policy will merge fewer segments (down to
1 at once, if that one has deletions) to keep the segment size under
budget.</p><p>Note, this can mean that for large shards that holds many gigabytes of
data, the default of <code class="literal">max_merged_segment</code> (<code class="literal">5gb</code>) can cause for many
segments to be in an index, and causing searches to be slower. Use the
indices segments API to see the segments that an index has, and
possibly either increase the <code class="literal">max_merged_segment</code> or issue an optimize
call for the index (try and aim to issue it on a low traffic time).</p><h4><a id="log-byte-size"></a>log_byte_size</h4><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.6.0. </h3>
This policy will be removed in 2.0 in favour of the tiered merge policy
</div></div><p>A merge policy that merges segments into levels of exponentially
increasing <span class="strong emphasis"><strong>byte size</strong></span>, where each level has fewer segments than the
value of the merge factor. Whenever extra segments (beyond the merge
factor upper bound) are encountered, all segments within the level are
merged.</p><p>This policy has the following settings:</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p>index.merge.policy.merge_factor</p></td><td class="entry" align="left" valign="top"><p>Determines how often segment indices
are merged by index operation. With smaller values, less RAM is used
while indexing, and searches on unoptimized indices are faster, but
indexing speed is slower. With larger values, more RAM is used during
indexing, and while searches on unoptimized indices are slower, indexing
is faster. Thus larger values (greater than 10) are best for batch index
creation, and smaller values (lower than 10) for indices that are
interactively maintained. Defaults to <code class="literal">10</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p>index.merge.policy.min_merge_size</p></td><td class="entry" align="left" valign="top"><p>A size setting type which sets the
minimum size for the lowest level segments. Any segments below this size
are considered to be on the same level (even if they vary drastically in
size) and will be merged whenever there are mergeFactor of them. This
effectively truncates the "long tail" of small segments that would
otherwise be created into a single level. If you set this too large, it
could greatly increase the merging cost during indexing (if you flush
many small segments). Defaults to <code class="literal">1.6mb</code></p></td></tr><tr><td class="entry" align="left" valign="top"><p>index.merge.policy.max_merge_size</p></td><td class="entry" align="left" valign="top"><p>A size setting type which sets the
largest segment (measured by total byte size of the segments files)
that may be merged with other segments. Defaults to unbounded.</p></td></tr><tr><td class="entry" align="left" valign="top"><p>index.merge.policy.max_merge_docs</p></td><td class="entry" align="left" valign="top"><p>Determines the largest segment
(measured by document count) that may be merged with other segments.
Defaults to unbounded.</p></td></tr></tbody></table></div><h4><a id="log-doc"></a>log_doc</h4><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><h3>Deprecated in 1.6.0. </h3>
This policy will be removed in 2.0 in favour of the tiered merge policy
</div></div><p>A merge policy that tries to merge segments into levels of exponentially
increasing <span class="strong emphasis"><strong>document count</strong></span>, where each level has fewer segments than
the value of the merge factor. Whenever extra segments (beyond the merge
factor upper bound) are encountered, all segments within the level are
merged.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p>index.merge.policy.merge_factor</p></td><td class="entry" align="left" valign="top"><p>Determines how often segment indices
are merged by index operation. With smaller values, less RAM is used
while indexing, and searches on unoptimized indices are faster, but
indexing speed is slower. With larger values, more RAM is used during
indexing, and while searches on unoptimized indices are slower, indexing
is faster. Thus larger values (greater than 10) are best for batch index
creation, and smaller values (lower than 10) for indices that are
interactively maintained. Defaults to <code class="literal">10</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p>index.merge.policy.min_merge_docs</p></td><td class="entry" align="left" valign="top"><p>Sets the minimum size for the lowest
level segments. Any segments below this size are considered to be on the
same level (even if they vary drastically in size) and will be merged
whenever there are mergeFactor of them. This effectively truncates the
"long tail" of small segments that would otherwise be created into a
single level. If you set this too large, it could greatly increase the
merging cost during indexing (if you flush many small segments).
Defaults to <code class="literal">1000</code>.</p></td></tr><tr><td class="entry" align="left" valign="top"><p>index.merge.policy.max_merge_docs</p></td><td class="entry" align="left" valign="top"><p>Determines the largest segment
(measured by document count) that may be merged with other segments.
Defaults to unbounded.</p></td></tr></tbody></table></div><h3><a id="scheduling"></a>Scheduling</h3><p>The merge scheduler (ConcurrentMergeScheduler) controls the execution of
merge operations once they are needed (according to the merge policy).  Merges
run in separate threads, and when the maximum number of threads is reached,
further merges will wait until a merge thread becomes available.  The merge
scheduler supports this setting:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">index.merge.scheduler.max_thread_count</code>
</span></dt><dd>
The maximum number of threads that may be merging at once. Defaults to
<code class="literal">Math.max(1, Math.min(3, Runtime.getRuntime().availableProcessors() / 2))</code>
which works well for a good solid-state-disk (SSD).  If your index is on
spinning platter drives instead, decrease this to 1.
</dd></dl></div><h4><a id="_serialmergescheduler"></a>SerialMergeScheduler</h4><p>This is accepted for backwards compatibility, but just uses
ConcurrentMergeScheduler with index.merge.scheduler.max_thread_count
set to 1 so that only 1 merge may run at a time.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-node">Store</span></div><div class="navheader"><span class="prev"><a href="index-modules-merge.html">
              &nbsp;
              Merge</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="index-modules-mapper.html">Mapper
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index-modules-store"></a>Store</h2></div></div></div><div class="warning admon"><div class="icon"><img alt="Warning" class="images-icons-warning-png"></div><div class="admon_content"><p>This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</p></div></div><p>The store module allows you to control how index data is stored.</p><p>The index can either be stored in-memory (no persistence) or on-disk
(the default). In-memory indices provide better performance at the cost
of limiting the index size to the amount of available physical memory.</p><p>When using a local gateway (the default), file system storage with <span class="strong emphasis"><strong>no</strong></span>
in memory storage is required to maintain index consistency. This is
required since the local gateway constructs its state from the local
index state of each node.</p><h3><a id="store-throttling"></a>Store Level Throttling</h3><p>The way Lucene, the IR library elasticsearch uses under the covers,
works is by creating immutable segments (up to deletes) and constantly
merging them (the merge policy settings allow to control how those
merges happen). The merge process happens in an asynchronous manner
without affecting the indexing / search speed. The problem though,
especially on systems with low IO, is that the merge process can be
expensive and affect search / index operation simply by the fact that
the box is now taxed with more IO happening.</p><p>The store module allows throttling to be  configured for merges (or for all
writes) either on the node level, or on the index level. Node level throttling
makes more sense because all the shards on the node have to  compete for the
same disk I/O.  Node level throttling can be controlled by setting
<code class="literal">indices.store.throttle.type</code> to <code class="literal">merge</code> (the default), <code class="literal">all</code>, or <code class="literal">none</code>, and
setting <code class="literal">indices.store.throttle.max_bytes_per_sec</code> to something like <code class="literal">5mb</code>.
The node level settings can be changed dynamically using the cluster update
settings API. The default is set to <code class="literal">20mb</code> with type <code class="literal">merge</code>.</p><p>If specific index level configuration is needed, regardless of the node level
settings, it can be set as well using the <code class="literal">index.store.throttle.type</code>, and
<code class="literal">index.store.throttle.max_bytes_per_sec</code>. The default value for the type is
<code class="literal">node</code>, meaning it will be subject to the node level settings and participate
in the node-wide throttling. Both settings can be set using the index update
settings API dynamically.</p><h3><a id="file-system"></a>File system storage types</h3><p>File system based storage is the default storage used. There are
different implementations or <span class="emphasis"><em>storage types</em></span>. The best one for the
operating environment will be automatically chosen: <code class="literal">mmapfs</code> on
Windows 64bit, <code class="literal">simplefs</code> on Windows 32bit, and <code class="literal">default</code>
(hybrid <code class="literal">niofs</code> and <code class="literal">mmapfs</code>) for the rest.</p><p>This can be overridden for all indices by adding this to the
<code class="literal">config/elasticsearch.yml</code> file:</p><div class="pre_wrapper"><pre class="programlisting">index.store.type: niofs</pre></div><p>It can also be set on a per-index basis at index creation time:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/my_index -d '{
    "settings": {
        "index.store.type": "niofs"
    }
}';</pre></div><p>The following sections lists all the different storage types supported.</p><h4><a id="simplefs"></a>Simple FS</h4><p>The <code class="literal">simplefs</code> type is a straightforward implementation of file system
storage (maps to Lucene <code class="literal">SimpleFsDirectory</code>) using a random access file.
This implementation has poor concurrent performance (multiple threads
will bottleneck). It is usually better to use the <code class="literal">niofs</code> when you need
index persistence.</p><h4><a id="niofs"></a>NIO FS</h4><p>The <code class="literal">niofs</code> type stores the shard index on the file system (maps to
Lucene <code class="literal">NIOFSDirectory</code>) using NIO. It allows multiple threads to read
from the same file concurrently. It is not recommended on Windows
because of a bug in the SUN Java implementation.</p><h4><a id="mmapfs"></a>MMap FS</h4><p>The <code class="literal">mmapfs</code> type stores the shard index on the file system (maps to
Lucene <code class="literal">MMapDirectory</code>) by mapping a file into memory (mmap). Memory
mapping uses up a portion of the virtual memory address space in your
process equal to the size of the file being mapped. Before using this
class, be sure your have plenty of virtual address space.
See <a class="xref" href="setup-configuration.html#vm-max-map-count" title="Virtual memoryedit">the section called Virtual memory</a></p><h4><a id="default_fs"></a>Hybrid MMap / NIO FS</h4><p>The <code class="literal">default</code> type stores the shard index on the file system depending on
the file type by mapping a file into memory (mmap) or using Java NIO. Currently
only the Lucene term dictionary and doc values files are memory mapped to reduce
the impact on the operating system. All other files are opened using Lucene <code class="literal">NIOFSDirectory</code>.
Address space settings (<a class="xref" href="setup-configuration.html#vm-max-map-count" title="Virtual memoryedit">the section called Virtual memory</a>) might also apply if your term
dictionaries are large.</p><h3><a id="store-memory"></a>Memory</h3><p>The <code class="literal">memory</code> type stores the index in main memory, using Lucenes
<code class="literal">RAMDirectory</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-node">Mapper</span></div><div class="navheader"><span class="prev"><a href="index-modules-store.html">
              &nbsp;
              Store</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="index-modules-translog.html">Translog
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index-modules-mapper"></a>Mapper</h2></div></div></div><p>The mapper module acts as a registry for the type mapping definitions
added to an index either when creating it or by using the put mapping
api. It also handles the dynamic mapping support for types that have no
explicit mappings pre defined. For more information about mapping
definitions, check out the <a class="link" href="mapping.html" title="Mapping">mapping section</a>.</p><h3><a id="_dynamic_mappings"></a>Dynamic Mappings</h3><p>New types and new fields within types can be added dynamically just
by indexing a document.  When Elasticsearch encounters a new type,
it creates the type using the <code class="literal">_default_</code> mapping (see below).</p><p>When it encounters a new field within a type, it autodetects the
datatype that the field contains and adds it to the type mapping
automatically.</p><p>See <a class="xref" href="mapping-dynamic-mapping.html" title="Dynamic Mapping"><em>Dynamic Mapping</em></a> for details of how to control and
configure dynamic mapping.</p><h3><a id="_default_mapping"></a>Default Mapping</h3><p>When a new type is created (at <a class="link" href="indices-create-index.html" title="Create Index">index creation</a> time,
using the  <a class="link" href="indices-put-mapping.html" title="Put Mapping"><code class="literal">put-mapping</code> API</a> or just by indexing a
document into it), the type uses the <code class="literal">_default_</code> mapping as its basis.  Any
mapping specified in the  <a class="link" href="indices-create-index.html" title="Create Index"><code class="literal">create-index</code></a> or
<a class="link" href="indices-put-mapping.html" title="Put Mapping"><code class="literal">put-mapping</code></a> request override values set in the
<code class="literal">_default_</code> mapping.</p><p>The default mapping definition is a plain mapping definition that is
embedded within ElasticSearch:</p><div class="pre_wrapper"><pre class="programlisting">{
    _default_ : {
    }
}</pre></div><p>Pretty short, isnt it? Basically, everything is `<span class="emphasis"><em>default</em></span>`ed, including the
dynamic nature of the root object mapping which allows new fields to be added
automatically.</p><p>The built-in default mapping definition can be overridden in several ways. A
<code class="literal">_default_</code> mapping can be specified when creating a new index, or the global
<code class="literal">_default_</code> mapping (for all indices) can be configured by creating a file
called <code class="literal">config/default-mapping.json</code>. (This location can be changed with
the <code class="literal">index.mapper.default_mapping_location</code> setting.)</p><p>Dynamic creation of mappings for unmapped types can be completely
disabled by setting <code class="literal">index.mapper.dynamic</code> to <code class="literal">false</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-node">Translog</span></div><div class="navheader"><span class="prev"><a href="index-modules-mapper.html">
              &nbsp;
              Mapper</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="index-modules-cache.html">Cache
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index-modules-translog"></a>Translog</h2></div></div></div><p>Each shard has a transaction log or write ahead log associated with it.
It allows to guarantee that when an index/delete operation occurs, it is
applied atomically, while not "committing" the internal Lucene index for
each request. A flush ("commit") still happens based on several
parameters:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">index.translog.flush_threshold_ops</code>
</span></dt><dd>
After how many operations to flush. Defaults to <code class="literal">unlimited</code>.
</dd><dt><span class="term">
<code class="literal">index.translog.flush_threshold_size</code>
</span></dt><dd>
Once the translog hits this size, a flush will happen. Defaults to <code class="literal">512mb</code>.
</dd><dt><span class="term">
<code class="literal">index.translog.flush_threshold_period</code>
</span></dt><dd>
The period with no flush happening to force a flush. Defaults to <code class="literal">30m</code>.
</dd><dt><span class="term">
<code class="literal">index.translog.interval</code>
</span></dt><dd>
How often to check if a flush is needed, randomized
between the interval value and 2x the interval value. Defaults to <code class="literal">5s</code>.
</dd><dt><span class="term">
<code class="literal">index.gateway.local.sync</code>
</span></dt><dd>
How often the translog is <code class="literal">fsync</code>ed to disk. Defaults to <code class="literal">5s</code>.
</dd></dl></div><p>Note: these parameters except <code class="literal">index.gateway.local.sync</code> can be updated at runtime using the Index
Settings Update API (for example, these numbers can be increased when
executing bulk updates to support higher TPS)</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-node">Cache</span></div><div class="navheader"><span class="prev"><a href="index-modules-translog.html">
              &nbsp;
              Translog</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="index-modules-shard-query-cache.html">Shard query cache
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index-modules-cache"></a>Cache</h2></div></div></div><p>There are different caching inner modules associated with an index. They
include <code class="literal">filter</code> and others.</p><h3><a id="filter"></a>Filter Cache</h3><p>The filter cache is responsible for caching the results of filters (used
in the query). The default implementation of a filter cache (and the one
recommended to use in almost all cases) is the <code class="literal">node</code> filter cache type.</p><h4><a id="node-filter"></a>Node Filter Cache</h4><p>The <code class="literal">node</code> filter cache may be configured to use either a percentage of
the total memory allocated to the process or a specific amount of
memory. All shards present on a node share a single node cache (thats
why its called <code class="literal">node</code>). The cache implements an LRU eviction policy:
when a cache becomes full, the least recently used data is evicted to
make way for new data.</p><p>The setting that allows one to control the memory size for the filter
cache is <code class="literal">indices.cache.filter.size</code>, which defaults to <code class="literal">10%</code>. <span class="strong emphasis"><strong>Note</strong></span>,
this is <span class="strong emphasis"><strong>not</strong></span> an index level setting but a node level setting (can be
configured in the node configuration).</p><p><code class="literal">indices.cache.filter.size</code> can accept either a percentage value, like
<code class="literal">30%</code>, or an exact value, like <code class="literal">512mb</code>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-node">Shard query cache</span></div><div class="navheader"><span class="prev"><a href="index-modules-cache.html">
              &nbsp;
              Cache</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="index-modules-fielddata.html">Field data
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index-modules-shard-query-cache"></a>Shard query cache</h2></div></div></div><p>When a search request is run against an index or against many indices, each
involved shard executes the search locally and returns its local results to
the <span class="emphasis"><em>coordinating node</em></span>, which combines these shard-level results into a
global result set.</p><p>The shard-level query cache module caches the local results on each shard.
This allows frequently used (and potentially heavy) search requests to return
results almost instantly. The query cache is a very good fit for the logging
use case, where only the most recent index is being actively updatedresults from older indices will be served directly from the cache.</p><div class="important admon"><div class="icon"><img alt="Important" class="images-icons-important-png"></div><div class="admon_content"><p>For now, the query cache will only cache the results of search requests
where <a class="link" href="search-request-search-type.html#count" title="Count"><code class="literal">?search_type=count</code></a>, so it will not cache <code class="literal">hits</code>,
but it will cache <code class="literal">hits.total</code>,  <a class="link" href="search-aggregations.html" title="Aggregations">aggregations</a>, and
<a class="link" href="search-suggesters.html" title="Suggesters">suggestions</a>.</p><p>Queries that use <code class="literal">now</code> (see <a class="xref" href="mapping-date-format.html#date-math" title="Date Mathedit">the section called Date Math</a>) cannot be cached.</p></div></div><h3><a id="_cache_invalidation"></a>Cache invalidation</h3><p>The cache is smartit keeps the same <span class="emphasis"><em>near real-time</em></span> promise as uncached
search.</p><p>Cached results are invalidated automatically whenever the shard refreshes, but
only if the data in the shard has actually changed.  In other words, you will
always get the same results from the cache as you would for an uncached search
request.</p><p>The longer the refresh interval, the longer that cached entries will remain
valid. If the cache is full, the least recently used cache keys will be
evicted.</p><p>The cache can be expired manually with the <a class="link" href="indices-clearcache.html" title="Clear Cache"><code class="literal">clear-cache</code> API</a>:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPOST 'localhost:9200/kimchy,elasticsearch/_cache/clear?query_cache=true'</pre></div><h3><a id="_enabling_caching_by_default"></a>Enabling caching by default</h3><p>The cache is not enabled by default, but can be enabled when creating a new
index as follows:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/my_index -d'
{
  "settings": {
    "index.cache.query.enable": true
  }
}
'</pre></div><p>It can also be enabled or disabled dynamically on an existing index with the
<a class="link" href="indices-update-settings.html" title="Update Indices Settings"><code class="literal">update-settings</code></a> API:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/my_index/_settings -d'
{ "index.cache.query.enable": true }
'</pre></div><h3><a id="_enabling_caching_per_request"></a>Enabling caching per request</h3><p>The <code class="literal">query_cache</code> query-string parameter can be used to enable or disable
caching on a <span class="strong emphasis"><strong>per-query</strong></span> basis.  If set, it overrides the index-level setting:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/my_index/_search?search_type=count&amp;query_cache=true' -d'
{
  "aggs": {
    "popular_colors": {
      "terms": {
        "field": "colors"
      }
    }
  }
}
'</pre></div><div class="important admon"><div class="icon"><img alt="Important" class="images-icons-important-png"></div><div class="admon_content"><p>If your query uses a script whose result is not deterministic (e.g.
it uses a random function or references the current time) you should set the
<code class="literal">query_cache</code> flag to <code class="literal">false</code> to disable caching for that request.</p></div></div><h3><a id="_cache_key"></a>Cache key</h3><p>The whole JSON body is used as the cache key.  This means that if the JSON
changesfor instance if keys are output in a different orderthen the
cache key will not be recognised.</p><div class="tip admon"><div class="icon"><img alt="Tip" class="images-icons-tip-png"></div><div class="admon_content"><p>Most JSON libraries support a <span class="emphasis"><em>canonical</em></span> mode which ensures that JSON
keys are always emitted in the same order. This canonical mode can be used in
the application to ensure that a request is always serialized in the same way.</p></div></div><h3><a id="_cache_settings"></a>Cache settings</h3><p>The cache is managed at the node level, and has a default maximum size of <code class="literal">1%</code>
of the heap.  This can be changed in the <code class="literal">config/elasticsearch.yml</code> file with:</p><div class="pre_wrapper"><pre class="programlisting">indices.cache.query.size: 2%</pre></div><p>Also, you can use the <code class="literal">indices.cache.query.expire</code> setting to specify a TTL
for cached results, but there should be no reason to do so.  Remember that
stale results are automatically invalidated when the index is refreshed. This
setting is provided for completeness' sake only.</p><h3><a id="_monitoring_cache_usage"></a>Monitoring cache usage</h3><p>The size of the cache (in bytes) and the number of evictions can be viewed
by index, with the <a class="link" href="indices-stats.html" title="Indices Stats"><code class="literal">indices-stats</code></a> API:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_stats/query_cache?pretty&amp;human'</pre></div><p>or by node with the <a class="link" href="cluster-nodes-stats.html" title="Nodes Stats"><code class="literal">nodes-stats</code></a> API:</p><div class="pre_wrapper"><pre class="programlisting">curl 'localhost:9200/_nodes/stats/indices/query_cache?pretty&amp;human'</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-node">Field data</span></div><div class="navheader"><span class="prev"><a href="index-modules-shard-query-cache.html">
              &nbsp;
              Shard query cache</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="fielddata-formats.html">Field data formats
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index-modules-fielddata"></a>Field data</h2></div></div></div><p>The field data cache is used mainly when sorting on or aggregating on a
field. It loads all the field values to memory in order to provide fast
document based access to those values. The field data cache can be
expensive to build for a field, so its recommended to have enough memory
to allocate it, and to keep it loaded.</p><p>The amount of memory used for the field
data cache can be controlled using <code class="literal">indices.fielddata.cache.size</code>. Note:
reloading  the field data which does not fit into your cache will be expensive
and  perform poorly.</p><div class="informaltable"><table cellpadding="4px" border="1"><colgroup><col class="col_1"><col class="col_2"></colgroup><thead><tr><th class="entry" align="left" valign="top">Setting </th><th class="entry" align="left" valign="top">Description</th></tr></thead><tbody><tr><td class="entry" align="left" valign="top"><p><code class="literal">indices.fielddata.cache.size</code></p></td><td class="entry" align="left" valign="top"><p>The max size of the field data cache,
eg <code class="literal">30%</code> of node heap space, or an absolute value, eg <code class="literal">12GB</code>. Defaults
to unbounded.</p></td></tr><tr><td class="entry" align="left" valign="top"><p><code class="literal">indices.fielddata.cache.expire</code></p></td><td class="entry" align="left" valign="top"><p><span class="experimental">
      [<span class="experimental_title">experimental</span>]
      <span class="detail">This functionality is experimental and may be changed or removed completely in a future release. Elastic will take a best effort approach to fix any issues, but experimental features are not subject to the support SLA of official GA features.</span></span> A time based setting that expires
field data after a certain time of inactivity. Defaults to <code class="literal">-1</code>. For
example, can be set to <code class="literal">5m</code> for a 5 minute expiry.</p></td></tr></tbody></table></div><h3><a id="circuit-breaker"></a>Circuit Breaker</h3><p>Elasticsearch contains multiple circuit breakers used to prevent operations from
causing an OutOfMemoryError. Each breaker specifies a limit for how much memory
it can use. Additionally, there is a parent-level breaker that specifies the
total amount of memory that can be used across all breakers.</p><p>The parent-level breaker can be configured with the following setting:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">indices.breaker.total.limit</code>
</span></dt><dd>
    Starting limit for overall parent breaker, defaults to 70% of JVM heap
</dd></dl></div><p>All circuit breaker settings can be changed dynamically using the cluster update
settings API.</p><h4><a id="fielddata-circuit-breaker"></a>Field data circuit breaker</h4><p>The field data circuit breaker allows Elasticsearch to estimate the amount of
memory a field will require to be loaded into memory. It can then prevent the
field data loading by raising an exception. By default the limit is configured
to 60% of the maximum JVM heap. It can be configured with the following
parameters:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">indices.breaker.fielddata.limit</code>
</span></dt><dd>
    Limit for fielddata breaker, defaults to 60% of JVM heap
</dd><dt><span class="term">
<code class="literal">indices.breaker.fielddata.overhead</code>
</span></dt><dd>
    A constant that all field data estimations are multiplied with to determine a
    final estimation. Defaults to 1.03
</dd></dl></div><h4><a id="request-circuit-breaker"></a>Request circuit breaker</h4><p>The request circuit breaker allows Elasticsearch to prevent per-request data
structures (for example, memory used for calculating aggregations during a
request) from exceeding a certain amount of memory.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">indices.breaker.request.limit</code>
</span></dt><dd>
    Limit for request breaker, defaults to 40% of JVM heap
</dd><dt><span class="term">
<code class="literal">indices.breaker.request.overhead</code>
</span></dt><dd>
    A constant that all request estimations are multiplied with to determine a
    final estimation. Defaults to 1
</dd></dl></div><h3><a id="fielddata-monitoring"></a>Monitoring field data</h3><p>You can monitor memory usage for field data as well as the field data circuit
breaker using
<a class="link" href="cluster-nodes-stats.html" title="Nodes Stats">Nodes Stats API</a></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-node">Field data formats</span></div><div class="navheader"><span class="prev"><a href="index-modules-fielddata.html">
              &nbsp;
              Field data</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="index-modules-similarity.html">Similarity module
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="fielddata-formats"></a>Field data formats</h2></div></div></div><p>The field data format controls how field data should be stored.</p><p>Depending on the field type, there might be several field data types
available. In particular, string and numeric types support the <code class="literal">doc_values</code>
format which allows for computing the field data data-structures at indexing
time and storing them on disk. Although it will make the index larger and may
be slightly slower, this implementation will be more near-realtime-friendly
and will require much less memory from the JVM than other implementations.</p><p>Here is an example of how to configure the <code class="literal">tag</code> field to use the <code class="literal">fst</code> field
data format.</p><div class="pre_wrapper"><pre class="programlisting">{
    "tag": {
        "type":      "string",
        "fielddata": {
            "format": "fst"
        }
    }
}</pre></div><p>It is possible to change the field data format (and the field data settings
in general) on a live index by using the update mapping API. When doing so,
field data which had already been loaded for existing segments will remain
alive while new segments will use the new field data configuration. Thanks to
the background merging process, all segments will eventually use the new
field data format.</p><h4><a id="_string_field_data_types"></a>String field data types</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">paged_bytes</code> (default)
</span></dt><dd>
    Stores unique terms sequentially in a large buffer and maps documents to
    the indices of the terms they contain in this large buffer.
</dd><dt><span class="term">
<code class="literal">fst</code>
</span></dt><dd>
    Stores terms in a FST (finite state transducer). Slower to build than
    <code class="literal">paged_bytes</code> but can help lower memory usage if many terms share common
    prefixes and/or suffixes.
</dd><dt><span class="term">
<code class="literal">doc_values</code>
</span></dt><dd>
    Computes and stores field data data-structures on disk at indexing time.
    Lowers memory usage but only works on non-analyzed strings (<code class="literal">index</code>: <code class="literal">no</code> or
    <code class="literal">not_analyzed</code>).
</dd></dl></div><h4><a id="_numeric_field_data_types"></a>Numeric field data types</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">array</code> (default)
</span></dt><dd>
    Stores field values in memory using arrays.
</dd><dt><span class="term">
<code class="literal">doc_values</code>
</span></dt><dd>
    Computes and stores field data data-structures on disk at indexing time.
</dd></dl></div><h4><a id="_geo_point_field_data_types"></a>Geo point field data types</h4><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">array</code> (default)
</span></dt><dd>
    Stores latitudes and longitudes in arrays.
</dd><dt><span class="term">
<code class="literal">doc_values</code>
</span></dt><dd>
    Computes and stores field data data-structures on disk at indexing time.
</dd></dl></div><h4><a id="_global_ordinals"></a>Global ordinals</h4><p>Global ordinals is a data-structure on top of field data, that maintains an
incremental numbering for all the terms in field data in a lexicographic order.
Each term has a unique number and the number of term <span class="emphasis"><em>A</em></span> is lower than the number
of term <span class="emphasis"><em>B</em></span>. Global ordinals are only supported on string fields.</p><p>Field data on string also has ordinals, which is a unique numbering for all terms
in a particular segment and field. Global ordinals just build on top of this,
by providing a mapping between the segment ordinals and the global ordinals.
The latter being unique across the entire shard.</p><p>Global ordinals can be beneficial in search features that use segment ordinals already
such as the terms aggregator to improve the execution time. Often these search features
need to merge the segment ordinal results to a cross segment terms result. With
global ordinals this mapping happens during field data load time instead of during each
query execution. With global ordinals search features only need to resolve the actual
term when building the (shard) response, but during the execution there is no need
at all to use the actual terms and the unique numbering global ordinals provided is
sufficient and improves the execution time.</p><p>Global ordinals for a specified field are tied to all the segments of a shard (Lucene index),
which is different than for field data for a specific field which is tied to a single segment.
For this reason global ordinals need to be rebuilt in its entirety once new segments
become visible. This one time cost would happen anyway without global ordinals, but
then it would happen for each search execution instead!</p><p>The loading time of global ordinals depends on the number of terms in a field, but in general
it is low, since it source field data has already been loaded. The memory overhead of global
ordinals is a small because it is very efficiently compressed. Eager loading of global ordinals
can move the loading time from the first search request, to the refresh itself.</p><h3><a id="_fielddata_loading"></a>Fielddata loading</h3><p>By default, field data is loaded lazily, ie. the first time that a query that
requires them is executed. However, this can make the first requests that
follow a merge operation quite slow since fielddata loading is a heavy
operation.</p><p>It is possible to force field data to be loaded and cached eagerly through the
<code class="literal">loading</code> setting of fielddata:</p><div class="pre_wrapper"><pre class="programlisting">{
    "category": {
        "type":      "string",
        "fielddata": {
            "loading": "eager"
        }
    }
}</pre></div><p>Global ordinals can also be eagerly loaded:</p><div class="pre_wrapper"><pre class="programlisting">{
    "category": {
        "type":      "string",
        "fielddata": {
            "loading": "eager_global_ordinals"
        }
    }
}</pre></div><p>With the above setting both field data and global ordinals for a specific field
are eagerly loaded.</p><h4><a id="_disabling_field_data_loading"></a>Disabling field data loading</h4><p>Field data can take a lot of RAM so it makes sense to disable field data
loading on the fields that dont need field data, for example those that are
used for full-text search only. In order to disable field data loading, just
change the field data format to <code class="literal">disabled</code>. When disabled, all requests that
will try to load field data, e.g. when they include aggregations and/or sorting,
will return an error.</p><div class="pre_wrapper"><pre class="programlisting">{
    "text": {
        "type":      "string",
        "fielddata": {
            "format": "disabled"
        }
    }
}</pre></div><p>The <code class="literal">disabled</code> format is supported by all field types.</p><h3><a id="field-data-filtering"></a>Filtering fielddata</h3><p>It is possible to control which field values are loaded into memory,
which is particularly useful for string fields. When specifying the
<a class="link" href="mapping-core-types.html" title="Core Types">mapping</a> for a field, you
can also specify a fielddata filter.</p><p>Fielddata filters can be changed using the
<a class="link" href="indices-put-mapping.html" title="Put Mapping">PUT mapping</a>
API. After changing the filters, use the
<a class="link" href="indices-clearcache.html" title="Clear Cache">Clear Cache</a> API
to reload the fielddata using the new filters.</p><h4><a id="_filtering_by_frequency"></a>Filtering by frequency:</h4><p>The frequency filter allows you to only load terms whose frequency falls
between a <code class="literal">min</code> and <code class="literal">max</code> value, which can be expressed an absolute
number or as a percentage (eg <code class="literal">0.01</code> is <code class="literal">1%</code>). Frequency is calculated
<span class="strong emphasis"><strong>per segment</strong></span>. Percentages are based on the number of docs which have a
value for the field, as opposed to all docs in the segment.</p><p>Small segments can be excluded completely by specifying the minimum
number of docs that the segment should contain with <code class="literal">min_segment_size</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tag": {
        "type":      "string",
        "fielddata": {
            "filter": {
                "frequency": {
                    "min":              0.001,
                    "max":              0.1,
                    "min_segment_size": 500
                }
            }
        }
    }
}</pre></div><h4><a id="_filtering_by_regex"></a>Filtering by regex</h4><p>Terms can also be filtered by regular expression - only values which
match the regular expression are loaded. Note: the regular expression is
applied to each term in the field, not to the whole field value. For
instance, to only load hashtags from a tweet, we can use a regular
expression which matches terms beginning with <code class="literal">#</code>:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet": {
        "type":      "string",
        "analyzer":  "whitespace"
        "fielddata": {
            "filter": {
                "regex": {
                    "pattern": "^#.*"
                }
            }
        }
    }
}</pre></div><h4><a id="_combining_filters"></a>Combining filters</h4><p>The <code class="literal">frequency</code> and <code class="literal">regex</code> filters can be combined:</p><div class="pre_wrapper"><pre class="programlisting">{
    "tweet": {
        "type":      "string",
        "analyzer":  "whitespace"
        "fielddata": {
            "filter": {
                "regex": {
                    "pattern":          "^#.*",
                },
                "frequency": {
                    "min":              0.001,
                    "max":              0.1,
                    "min_segment_size": 500
                }
            }
        }
    }
}</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="index-modules.html">Index Modules</a></span>  <span class="breadcrumb-node">Similarity module</span></div><div class="navheader"><span class="prev"><a href="fielddata-formats.html">
              &nbsp;
              Field data formats</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="testing.html">Testing
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="index-modules-similarity"></a>Similarity module</h2></div></div></div><p>A similarity (scoring / ranking model) defines how matching documents
are scored. Similarity is per field, meaning that via the mapping one
can define a different similarity per field.</p><p>Configuring a custom similarity is considered a expert feature and the
builtin similarities are most likely sufficient as is described in the
<a class="link" href="mapping-core-types.html" title="Core Types">mapping section</a></p><h3><a id="configuration"></a>Configuring a similarity</h3><p>Most existing or custom Similarities have configuration options which
can be configured via the index settings as shown below. The index
options can be provided when creating an index or updating index
settings.</p><div class="pre_wrapper"><pre class="programlisting">"similarity" : {
  "my_similarity" : {
    "type" : "DFR",
    "basic_model" : "g",
    "after_effect" : "l",
    "normalization" : "h2",
    "normalization.h2.c" : "3.0"
  }
}</pre></div><p>Here we configure the DFRSimilarity so it can be referenced as
<code class="literal">my_similarity</code> in mappings as is illustrate in the below example:</p><div class="pre_wrapper"><pre class="programlisting">{
  "book" : {
    "properties" : {
      "title" : { "type" : "string", "similarity" : "my_similarity" }
    }
}</pre></div><h3><a id="_available_similarities"></a>Available similarities</h3><h4><a id="default-similarity"></a>Default similarity</h4><p>The default similarity that is based on the TF/IDF model. This
similarity has the following option:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
<code class="literal">discount_overlaps</code>
</span></dt><dd>
    Determines whether overlap tokens (Tokens with
    0 position increment) are ignored when computing norm. By default this
    is true, meaning overlap tokens do not count when computing norms.
</dd></dl></div><p>Type name: <code class="literal">default</code></p><h4><a id="bm25"></a>BM25 similarity</h4><p>Another TF/IDF based similarity that has built-in tf normalization and
is supposed to work better for short fields (like names). See
<a class="ulink" href="http://en.wikipedia.org/wiki/Okapi_BM25" target="_top">Okapi_BM25</a> for more details.
This similarity has the following options:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">k1</code>
</p>
</td><td class="entry" valign="top">
<p>
    Controls non-linear term frequency normalization
    (saturation).
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">b</code>
</p>
</td><td class="entry" valign="top">
<p>
    Controls to what degree document length normalizes tf values.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">discount_overlaps</code>
</p>
</td><td class="entry" valign="top">
<p>
    Determines whether overlap tokens (Tokens with
    0 position increment) are ignored when computing norm. By default this
    is true, meaning overlap tokens do not count when computing norms.
</p>
</td></tr></tbody></table></div><p>Type name: <code class="literal">BM25</code></p><h4><a id="drf"></a>DFR similarity</h4><p>Similarity that implements the
<a class="ulink" href="http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/search/similarities/DFRSimilarity.html" target="_top">divergence
from randomness</a> framework. This similarity has the following options:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">basic_model</code>
</p>
</td><td class="entry" valign="top">
<p>
    Possible values: <code class="literal">be</code>, <code class="literal">d</code>, <code class="literal">g</code>, <code class="literal">if</code>, <code class="literal">in</code>, <code class="literal">ine</code> and <code class="literal">p</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">after_effect</code>
</p>
</td><td class="entry" valign="top">
<p>
    Possible values: <code class="literal">no</code>, <code class="literal">b</code> and <code class="literal">l</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">normalization</code>
</p>
</td><td class="entry" valign="top">
<p>
    Possible values: <code class="literal">no</code>, <code class="literal">h1</code>, <code class="literal">h2</code>, <code class="literal">h3</code> and <code class="literal">z</code>.
</p>
</td></tr></tbody></table></div><p>All options but the first option need a normalization value.</p><p>Type name: <code class="literal">DFR</code></p><h4><a id="ib"></a>IB similarity.</h4><p><a class="ulink" href="http://lucene.apache.org/core/4_1_0/core/org/apache/lucene/search/similarities/IBSimilarity.html" target="_top">Information
based model</a> . This similarity has the following options:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">distribution</code>
</p>
</td><td class="entry" valign="top">
<p>
Possible values: <code class="literal">ll</code> and <code class="literal">spl</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">lambda</code>
</p>
</td><td class="entry" valign="top">
<p>
Possible values: <code class="literal">df</code> and <code class="literal">ttf</code>.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">normalization</code>
</p>
</td><td class="entry" valign="top">
<p>
Same as in <code class="literal">DFR</code> similarity.
</p>
</td></tr></tbody></table></div><p>Type name: <code class="literal">IB</code></p><h4><a id="lm_dirichlet"></a>LM Dirichlet similarity.</h4><p><a class="ulink" href="http://lucene.apache.org/core/4_7_1/core/org/apache/lucene/search/similarities/LMDirichletSimilarity.html" target="_top">LM
Dirichlet similarity</a> . This similarity has the following options:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">mu</code>
</p>
</td><td class="entry" valign="top">
<p>
Default to <code class="literal">2000</code>.
</p>
</td></tr></tbody></table></div><p>Type name: <code class="literal">LMDirichlet</code></p><h4><a id="lm_jelinek_mercer"></a>LM Jelinek Mercer similarity.</h4><p><a class="ulink" href="http://lucene.apache.org/core/4_7_1/core/org/apache/lucene/search/similarities/LMJelinekMercerSimilarity.html" target="_top">LM
Jelinek Mercer similarity</a> . This similarity has the following options:</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">lambda</code>
</p>
</td><td class="entry" valign="top">
<p>
The optimal value depends on both the collection and the query. The optimal value is around <code class="literal">0.1</code>
for title queries and <code class="literal">0.7</code> for long queries. Default to <code class="literal">0.1</code>.
</p>
</td></tr></tbody></table></div><p>Type name: <code class="literal">LMJelinekMercer</code></p><h4><a id="default-base"></a>Default and Base Similarities</h4><p>By default, Elasticsearch will use whatever similarity is configured as
<code class="literal">default</code>. However, the similarity functions <code class="literal">queryNorm()</code> and <code class="literal">coord()</code>
are not per-field. Consequently, for expert users wanting to change the
implementation used for these two methods, while not changing the
<code class="literal">default</code>, it is possible to configure a similarity with the name
<code class="literal">base</code>. This similarity will then be used for the two methods.</p><p>You can change the default similarity for all fields like this:</p><div class="pre_wrapper"><pre class="programlisting">index.similarity.default.type: BM25</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">Testing</span></div><div class="navheader"><span class="prev"><a href="index-modules-similarity.html">
              &nbsp;
              Similarity module</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="testing-framework.html">Java Testing Framework
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="testing"></a>Testing</h1></div></div></div><div class="partintro"><div></div><p>This section is about utilizing elasticsearch as part of your testing infrastructure.</p><h2><a id="testing-header"></a>Testing:</h2><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
<a class="xref" href="testing-framework.html" title="Java Testing Framework"><em>Java Testing Framework</em></a>
</li></ul></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="testing.html">Testing</a></span>  <span class="breadcrumb-node">Java Testing Framework</span></div><div class="navheader"><span class="prev"><a href="testing.html">
              &nbsp;
              Testing</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="why-randomized-testing.html">why randomized testing?
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="testing-framework"></a>Java Testing Framework</h2></div></div></div><p><a id="testing-intro"></a>Testing is a crucial part of your application, and as information retrieval itself is already a complex topic, there should not be any additional complexity in setting up a testing infrastructure, which uses elasticsearch. This is the main reason why we decided to release an additional file to the release, which allows you to use the same testing infrastructure we do in the elasticsearch core. The testing framework allows you to setup clusters with multiple nodes in order to check if your code covers everything needed to run in a cluster. The framework prevents you from writing complex code yourself to start, stop or manage several test nodes in a cluster. In addition there is another very important feature called randomized testing, which you are getting for free as it is part of the elasticsearch infrastructure.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="testing.html">Testing</a></span>  <span class="breadcrumb-link"><a href="testing-framework.html">Java Testing Framework</a></span>  <span class="breadcrumb-node">why randomized testing?</span></div><div class="navheader"><span class="prev"><a href="testing-framework.html">
              &nbsp;
              Java Testing Framework</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="using-elasticsearch-test-classes.html">Using the elasticsearch test classes
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="why-randomized-testing"></a>why randomized testing?</h2></div></div></div><p>The key concept of randomized testing is not to use the same input values for every testcase, but still be able to reproduce it in case of a failure. This allows to test with vastly different input variables in order to make sure, that your implementation is actually independent from your provided test data.</p><p>All of the tests are run using a custom junit runner, the <code class="literal">RandomizedRunner</code> provided by the randomized-testing project. If you are interested in the implementation being used, check out the <a class="ulink" href="http://labs.carrotsearch.com/randomizedtesting.html" target="_top">RandomizedTesting webpage</a>.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="testing.html">Testing</a></span>  <span class="breadcrumb-link"><a href="testing-framework.html">Java Testing Framework</a></span>  <span class="breadcrumb-node">Using the elasticsearch test classes</span></div><div class="navheader"><span class="prev"><a href="why-randomized-testing.html">
              &nbsp;
              why randomized testing?</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="unit-tests.html">unit tests
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="using-elasticsearch-test-classes"></a>Using the elasticsearch test classes</h2></div></div></div><p>First, you need to include the testing dependency in your project. If you use maven and its <code class="literal">pom.xml</code> file, it looks like this</p><a id="source"></a><pre class="screen">&lt;dependencies&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;com.carrotsearch.randomizedtesting&lt;/groupId&gt;
    &lt;artifactId&gt;randomizedtesting-runner&lt;/artifactId&gt;
    &lt;version&gt;${randomizedtesting-runner.version}&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.apache.lucene&lt;/groupId&gt;
    &lt;artifactId&gt;lucene-test-framework&lt;/artifactId&gt;
    &lt;version&gt;${lucene.version}&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.elasticsearch&lt;/groupId&gt;
    &lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;
    &lt;version&gt;${elasticsearch.version}&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
    &lt;type&gt;test-jar&lt;/type&gt;
  &lt;/dependency&gt;
  &lt;dependency&gt;
    &lt;groupId&gt;org.elasticsearch&lt;/groupId&gt;
    &lt;artifactId&gt;elasticsearch&lt;/artifactId&gt;
    &lt;version&gt;${elasticsearch.version}&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;</pre><p>Replace the elasticsearch version and the lucene versions with the current elasticsearch version and its accompanying lucene release.
And replace the "randomizedtesting version" with the version that the current elasticsearch uses.</p><p>They already have a couple of classes, you can inherit from in your own test classes. The advantages of doing so is having already defined loggers, the whole randomized infrastructure is set up already.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="testing.html">Testing</a></span>  <span class="breadcrumb-link"><a href="testing-framework.html">Java Testing Framework</a></span>  <span class="breadcrumb-node">unit tests</span></div><div class="navheader"><span class="prev"><a href="using-elasticsearch-test-classes.html">
              &nbsp;
              Using the elasticsearch test classes</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="integration-tests.html">integration tests
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="unit-tests"></a>unit tests</h2></div></div></div><p>In case you only need to execute a unit test, because your implementation can be isolated that well and does not require an up and running elasticsearch cluster, you can use the <code class="literal">ElasticsearchTestCase</code>. If you are testing lucene features, use <code class="literal">ElasticsearchLuceneTestCase</code> and if you are testing concrete token streams, use the <code class="literal">ElasticsearchTokenStreamTestCase</code> class. Those specific classes execute additional checks, which ensure that no resources leaks are happening, after the test has run.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="testing.html">Testing</a></span>  <span class="breadcrumb-link"><a href="testing-framework.html">Java Testing Framework</a></span>  <span class="breadcrumb-node">integration tests</span></div><div class="navheader"><span class="prev"><a href="unit-tests.html">
              &nbsp;
              unit tests</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="parametrized-tests.html">parameterized tests
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="integration-tests"></a>integration tests</h2></div></div></div><p>These kind of tests require firing up a whole cluster of nodes, before the tests can actually be run. Compared to unit tests they are obviously way more time consuming, but the test infrastructure tries to minimize the time cost by only restarting the whole cluster, if this is configured explicitly.</p><p>The class your tests have to inherit from is <code class="literal">ElasticsearchIntegrationTest</code>. As soon as you inherit, there is no need for you to start any elasticsearch nodes manually in your test anymore, though you might need to ensure that at least a certain number of nodes is up.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="number-of-shards"></a>number of shards</h3></div></div></div><p>The number of shards used for indices created during integration tests is randomized between <code class="literal">1</code> and <code class="literal">10</code> unless overwritten upon index creation via index settings.
Rule of thumb is not to specify the number of shards unless needed, so that each test will use a different one all the time.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="helper-methods"></a>generic helper methods</h3></div></div></div><p>There are a couple of helper methods in <code class="literal">ElasticsearchIntegrationTest</code>, which will make your tests shorter and more concise.</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">refresh()</code>
</p>
</td><td class="entry" valign="top">
<p>
Refreshes all indices in a cluster
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">ensureGreen()</code>
</p>
</td><td class="entry" valign="top">
<p>
Ensures a green health cluster state, waiting for relocations. Waits the default timeout of 30 seconds before failing.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">ensureYellow()</code>
</p>
</td><td class="entry" valign="top">
<p>
Ensures a yellow health cluster state, also waits for 30 seconds before failing.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">createIndex(name)</code>
</p>
</td><td class="entry" valign="top">
<p>
Creates an index with the specified name
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">flush()</code>
</p>
</td><td class="entry" valign="top">
<p>
Flushes all indices in a cluster
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">flushAndRefresh()</code>
</p>
</td><td class="entry" valign="top">
<p>
Combines <code class="literal">flush()</code> and <code class="literal">refresh()</code> calls
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">optimize()</code>
</p>
</td><td class="entry" valign="top">
<p>
Waits for all relocations and optimized all indices in the cluster to one segment.
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">indexExists(name)</code>
</p>
</td><td class="entry" valign="top">
<p>
Checks if given index exists
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">admin()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns an <code class="literal">AdminClient</code> for administrative tasks
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">clusterService()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns the cluster service java class
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">cluster()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns the test cluster class, which is explained in the next paragraphs
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="test-cluster-methods"></a>test cluster methods</h3></div></div></div><p>The <code class="literal">TestCluster</code> class is the heart of the cluster functionality in a randomized test and allows you to configure a specific setting or replay certain types of outages to check, how your custom code reacts.</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">ensureAtLeastNumNodes(n)</code>
</p>
</td><td class="entry" valign="top">
<p>
Ensure at least the specified number of nodes is running in the cluster
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">ensureAtMostNumNodes(n)</code>
</p>
</td><td class="entry" valign="top">
<p>
Ensure at most the specified number of nodes is running in the cluster
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">getInstance()</code>
</p>
</td><td class="entry" valign="top">
<p>
Get a guice instantiated instance of a class from a random node
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">getInstanceFromNode()</code>
</p>
</td><td class="entry" valign="top">
<p>
Get a guice instantiated instance of a class from a specified node
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">stopRandomNode()</code>
</p>
</td><td class="entry" valign="top">
<p>
Stop a random node in your cluster to mimic an outage
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">stopCurrentMasterNode()</code>
</p>
</td><td class="entry" valign="top">
<p>
Stop the current master node to force a new election
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">stopRandomNonMaster()</code>
</p>
</td><td class="entry" valign="top">
<p>
Stop a random non master node to mimic an outage
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">buildNode()</code>
</p>
</td><td class="entry" valign="top">
<p>
Create a new elasticsearch node
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">startNode(settings)</code>
</p>
</td><td class="entry" valign="top">
<p>
Create and start a new elasticsearch node
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="accessing-clients"></a>Accessing clients</h3></div></div></div><p>In order to execute any actions, you have to use a client. You can use the <code class="literal">ElasticsearchIntegrationTest.client()</code> method to get back a random client. This client can be a <code class="literal">TransportClient</code> or a <code class="literal">NodeClient</code> - and usually you do not need to care as long as the action gets executed. There are several more methods for client selection inside of the <code class="literal">TestCluster</code> class, which can be accessed using the <code class="literal">ElasticsearchIntegrationTest.cluster()</code> method.</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">iterator()</code>
</p>
</td><td class="entry" valign="top">
<p>
An iterator over all available clients
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">masterClient()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a client which is connected to the master node
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">nonMasterClient()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a client which is not connected to the master node
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">clientNodeClient()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a client, which is running on a client node
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">client(String nodeName)</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a client to a given node
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">smartClient()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a smart client
</p>
</td></tr></tbody></table></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="scoping"></a>Scoping</h3></div></div></div><p>By default the tests are run with unique cluster per test suite. Of course all indices and templates are deleted between each test. However, sometimes you need to start a new cluster for each test - for example, if you load a certain plugin, but you do not want to load it for every test.</p><p>You can use the <code class="literal">@ClusterScope</code> annotation at class level to configure this behaviour</p><div class="pre_wrapper"><pre class="programlisting">@ClusterScope(scope=TEST, numNodes=1)
public class CustomSuggesterSearchTests extends ElasticsearchIntegrationTest {
  // ... tests go here
}</pre></div><p>The above sample configures the test to use a new cluster for each test method. The default scope is <code class="literal">SUITE</code> (one cluster for all test methods in the test). The <code class="literal">numNodes</code> settings allows you to only start a certain number of nodes, which can speed up test execution, as starting a new node is a costly and time consuming operation and might not be needed for this test.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="changing-node-configuration"></a>Changing node configuration</h3></div></div></div><p>As elasticsearch is using JUnit 4, using the <code class="literal">@Before</code> and <code class="literal">@After</code> annotations is not a problem. However you should keep in mind, that this does not have any effect in your cluster setup, as the cluster is already up and running when those methods are run. So in case you want to configure settings - like loading a plugin on node startup - before the node is actually running, you should overwrite the <code class="literal">nodeSettings()</code> method from the <code class="literal">ElasticsearchIntegrationTest</code> class and change the cluster scope to <code class="literal">SUITE</code>.</p><div class="pre_wrapper"><pre class="programlisting">@Override
protected Settings nodeSettings(int nodeOrdinal) {
  return ImmutableSettings.settingsBuilder()
           .put("plugin.types", CustomSuggesterPlugin.class.getName())
           .put(super.nodeSettings(nodeOrdinal)).build();
}</pre></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="testing.html">Testing</a></span>  <span class="breadcrumb-link"><a href="testing-framework.html">Java Testing Framework</a></span>  <span class="breadcrumb-node">parameterized tests</span></div><div class="navheader"><span class="prev"><a href="integration-tests.html">
              &nbsp;
              integration tests</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="randomized-testing.html">Randomized testing
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="parametrized-tests"></a>parameterized tests</h2></div></div></div><p>It is possible to write parameterized tests, that get run multiple times with different parameters. <code class="literal">RandomizedRunner</code> needs to be used rather than the <code class="literal">Parameterized</code> runner provided with junit (all the base test classes already use <code class="literal">RandomizedRunner</code> though). The method that provides the parameters
needs to be annotated with the <code class="literal">@ParametersFactory</code> annotation and must be <code class="literal">static</code>, <code class="literal">public</code>, without arguments and must have a return type assignable to <code class="literal">Iterable&lt;Object[]&gt;</code>. The iterable must return arrays conforming to the suite classs constructor with respect to the number and types of parameters.
The constructors parameters can be annotated with the <code class="literal">@Name</code> annotation to provide more descriptive parameter names for test descriptions. Have a look at <code class="literal">ElasticsearchRestTests</code> for an example.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="testing.html">Testing</a></span>  <span class="breadcrumb-link"><a href="testing-framework.html">Java Testing Framework</a></span>  <span class="breadcrumb-node">Randomized testing</span></div><div class="navheader"><span class="prev"><a href="parametrized-tests.html">
              &nbsp;
              parameterized tests</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="assertions.html">Assertions
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="randomized-testing"></a>Randomized testing</h2></div></div></div><p>The code snippets you saw so far did not show any trace of randomized testing features, as they are carefully hidden under the hood. However when you are writing your own tests, you should make use of these features as well. Before starting with that, you should know, how to repeat a failed test with the same setup, how it failed. Luckily this is quite easy, as the whole mvn call is logged together with failed tests, which means you can simply copy and paste that line and run the test.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="generating-random-data"></a>Generating random data</h3></div></div></div><p>The next step is to convert your test using static test data into a test using randomized test data. The kind of data you could randomize varies a lot with the functionality you are testing against. Take a look at the following examples (note, that this list could go on for pages, as a distributed system has many, many moving parts):</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Searching for data using arbitrary UTF8 signs
</li><li class="listitem">
Changing your mapping configuration, index and field names with each run
</li><li class="listitem">
Changing your response sizes/configurable limits with each run
</li><li class="listitem">
Changing the number of shards/replicas when creating an index
</li></ul></div><p>So, how can you create random data. The most important thing to know is, that you never should instantiate your own <code class="literal">Random</code> instance, but use the one provided in the <code class="literal">RandomizedTest</code>, from which all elasticsearch dependent test classes inherit from.</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">getRandom()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns the random instance, which can recreated when calling the test with specific parameters
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">randomBoolean()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a random boolean
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">randomByte()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a random byte
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">randomShort()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a random short
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">randomInt()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a random integer
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">randomLong()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a random long
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">randomFloat()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a random float
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">randomDouble()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a random double
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">randomInt(max)</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a random integer between 0 and max
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">between()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a random between the supplied range
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">atLeast()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a random integer of at least the specified integer
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">atMost()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a random integer of at most the specified integer
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">randomLocale()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a random locale
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">randomTimeZone()</code>
</p>
</td><td class="entry" valign="top">
<p>
Returns a random timezone
</p>
</td></tr></tbody></table></div><p>In addition, there are a couple of helper methods, allowing you to create random ASCII and Unicode strings, see methods beginning with <code class="literal">randomAscii</code>, <code class="literal">randomUnicode</code>, and <code class="literal">randomRealisticUnicode</code> in the random test class. The latter one tries to create more realistic unicode string by not being arbitrary random.</p><p>If you want to debug a specific problem with a specific random seed, you can use the <code class="literal">@Seed</code> annotation to configure a specific seed for a test. If you want to run a test more than once, instead of starting the whole test suite over and over again, you can use the <code class="literal">@Repeat</code> annotation with an arbitrary value. Each iteration than gets run with a different seed.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-link"><a href="testing.html">Testing</a></span>  <span class="breadcrumb-link"><a href="testing-framework.html">Java Testing Framework</a></span>  <span class="breadcrumb-node">Assertions</span></div><div class="navheader"><span class="prev"><a href="randomized-testing.html">
              &nbsp;
              Randomized testing</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="glossary.html">Glossary of terms
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="assertions"></a>Assertions</h2></div></div></div><p>As many elasticsearch tests are checking for a similar output, like the amount of hits or the first hit or special highlighting, a couple of predefined assertions have been created. Those have been put into the <code class="literal">ElasticsearchAssertions</code> class.</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">assertHitCount()</code>
</p>
</td><td class="entry" valign="top">
<p>
Checks hit count of a search or count request
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">assertAcked()</code>
</p>
</td><td class="entry" valign="top">
<p>
Ensure the a request has been acknowledged by the master
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">assertSearchHits()</code>
</p>
</td><td class="entry" valign="top">
<p>
Asserts a search response contains specific ids
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">assertMatchCount()</code>
</p>
</td><td class="entry" valign="top">
<p>
Asserts a matching count from a percolation response
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">assertFirstHit()</code>
</p>
</td><td class="entry" valign="top">
<p>
Asserts the first hit hits the specified matcher
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">assertSecondHit()</code>
</p>
</td><td class="entry" valign="top">
<p>
Asserts the second hit hits the specified matcher
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">assertThirdHit()</code>
</p>
</td><td class="entry" valign="top">
<p>
Asserts the third hits hits the specified matcher
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">assertSearchHit()</code>
</p>
</td><td class="entry" valign="top">
<p>
Assert a certain element in a search response hits the specified matcher
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">assertNoFailures()</code>
</p>
</td><td class="entry" valign="top">
<p>
Asserts that no shard failures have occured in the response
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">assertFailures()</code>
</p>
</td><td class="entry" valign="top">
<p>
Asserts that shard failures have happened during a search request
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">assertHighlight()</code>
</p>
</td><td class="entry" valign="top">
<p>
Assert specific highlights matched
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">assertSuggestion()</code>
</p>
</td><td class="entry" valign="top">
<p>
Assert for specific suggestions
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">assertSuggestionSize()</code>
</p>
</td><td class="entry" valign="top">
<p>
Assert for specific suggestion count
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">assertThrows()</code>
</p>
</td><td class="entry" valign="top">
<p>
Assert a specific exception has been thrown
</p>
</td></tr></tbody></table></div><p>Common matchers</p><div class="informaltable"><table cellpadding="4px" border="0"><colgroup><col><col></colgroup><tbody valign="top"><tr><td class="entry" valign="top">
<p>
<code class="literal">hasId()</code>
</p>
</td><td class="entry" valign="top">
<p>
Matcher to check for a search hit id
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">hasType()</code>
</p>
</td><td class="entry" valign="top">
<p>
Matcher to check for a search hit type
</p>
</td></tr><tr><td class="entry" valign="top">
<p>
<code class="literal">hasIndex()</code>
</p>
</td><td class="entry" valign="top">
<p>
Matcher to check for a search hit index
</p>
</td></tr></tbody></table></div><p>Usually, you would combine assertions and matchers in your test like this</p><div class="pre_wrapper"><pre class="programlisting">SearchResponse seearchResponse = client().prepareSearch() ...;
assertHitCount(searchResponse, 4);
assertFirstHit(searchResponse, hasId("4"));
assertSearchHits(searchResponse, "1", "2", "3", "4");</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Elasticsearch Reference
      [1.7]
    </a></span>  <span class="breadcrumb-node">Glossary of terms</span></div><div class="navheader"><span class="prev"><a href="assertions.html">
              &nbsp;
              Assertions</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          </span></div><div class="glossary"><div class="titlepage"><div><div><h1 class="title"><a id="glossary"></a>Glossary of terms</h1></div></div></div><dl><dt><span class="glossterm">
<a id="glossary-analysis"></a> analysis
</span></dt><dd class="glossdef"><p>
  Analysis is the process of converting <a class="link" href="glossary.html#glossary-text">full text</a> to
  <a class="link" href="glossary.html#glossary-term">terms</a>. Depending on which analyzer is used, these phrases:
  <code class="literal">FOO BAR</code>, <code class="literal">Foo-Bar</code>, <code class="literal">foo,bar</code> will probably all result in the
  terms <code class="literal">foo</code> and <code class="literal">bar</code>. These terms are what is actually stored in
  the index.

  A full text query (not a <a class="link" href="glossary.html#glossary-term">term</a> query) for <code class="literal">FoO:bAR</code> will
  also be analyzed to the terms <code class="literal">foo</code>,<code class="literal">bar</code> and will thus match the
  terms stored in the index.

  It is this process of analysis (both at index time and at search time)
  that allows elasticsearch to perform full text queries.

  Also see <a class="link" href="glossary.html#glossary-text">text</a> and <a class="link" href="glossary.html#glossary-term">term</a>.
</p></dd><dt><span class="glossterm">
<a id="glossary-cluster"></a> cluster
</span></dt><dd class="glossdef"><p>
  A cluster consists of one or more <a class="link" href="glossary.html#glossary-node">nodes</a> which share the
  same cluster name. Each cluster has a single master node which is
  chosen automatically by the cluster and which can be replaced if the
  current master node fails.
</p></dd><dt><span class="glossterm">
<a id="glossary-document"></a> document
</span></dt><dd class="glossdef"><p>
  A document is a JSON document which is stored in elasticsearch. It is
  like a row in a table in a relational database. Each document is
  stored in an <a class="link" href="glossary.html#glossary-index">index</a> and has a <a class="link" href="glossary.html#glossary-type">type</a> and an
  <a class="link" href="glossary.html#glossary-id">id</a>.

  A document is a JSON object (also known in other languages as a hash /
  hashmap / associative array) which contains zero or more
  <a class="link" href="glossary.html#glossary-field">fields</a>, or key-value pairs.

  The original JSON document that is indexed will be stored in the
  <a class="link" href="glossary.html#glossary-source_field"><code class="literal">_source</code> field</a>, which is returned by default when
  getting or searching for a document.
</p></dd><dt><span class="glossterm">
<a id="glossary-id"></a> id
</span></dt><dd class="glossdef"><p>
  The ID of a <a class="link" href="glossary.html#glossary-document">document</a> identifies a document. The
  <code class="literal">index/type/id</code> of a document must be unique. If no ID is provided,
  then it will be auto-generated. (also see <a class="link" href="glossary.html#glossary-routing">routing</a>)
</p></dd><dt><span class="glossterm">
<a id="glossary-field"></a> field
</span></dt><dd class="glossdef"><p>
  A <a class="link" href="glossary.html#glossary-document">document</a> contains a list of fields, or key-value
  pairs. The value can be a simple (scalar) value (eg a string, integer,
  date), or a nested structure like an array or an object. A field is
  similar to a column in a table in a relational database.

  The <a class="link" href="glossary.html#glossary-mapping">mapping</a> for each field has a field <span class="emphasis"><em>type</em></span> (not to
  be confused with document <a class="link" href="glossary.html#glossary-type">type</a>) which indicates the type
  of data that can be stored in that field, eg <code class="literal">integer</code>, <code class="literal">string</code>,
  <code class="literal">object</code>. The mapping also allows you to define (amongst other things)
  how the value for a field should be analyzed.
</p></dd><dt><span class="glossterm">
<a id="glossary-index"></a> index
</span></dt><dd class="glossdef"><p>
  An index is like a <span class="emphasis"><em>database</em></span> in a relational database. It has a
  <a class="link" href="glossary.html#glossary-mapping">mapping</a> which defines multiple <a class="link" href="glossary.html#glossary-type">types</a>.

  An index is a logical namespace which maps to one or more
  <a class="link" href="glossary.html#glossary-primary-shard">primary shards</a> and can have zero or more
  <a class="link" href="glossary.html#glossary-replica-shard">replica shards</a>.
</p></dd><dt><span class="glossterm">
<a id="glossary-mapping"></a> mapping
</span></dt><dd class="glossdef"><p>
  A mapping is like a <span class="emphasis"><em>schema definition</em></span> in a relational database. Each
  <a class="link" href="glossary.html#glossary-index">index</a> has a mapping, which defines each <a class="link" href="glossary.html#glossary-type">type</a>
  within the index, plus a number of index-wide settings.

  A mapping can either be defined explicitly, or it will be generated
  automatically when a document is indexed.
</p></dd><dt><span class="glossterm">
<a id="glossary-node"></a> node
</span></dt><dd class="glossdef"><p>
  A node is a running instance of elasticsearch which belongs to a
  <a class="link" href="glossary.html#glossary-cluster">cluster</a>. Multiple nodes can be started on a single
  server for testing purposes, but usually you should have one node per
  server.

  At startup, a node will use unicast (or multicast, if specified) to
  discover an existing cluster with the same cluster name and will try
  to join that cluster.
</p></dd><dt><span class="glossterm">
<a id="glossary-primary-shard"></a> primary shard
</span></dt><dd class="glossdef"><p>
  Each document is stored in a single primary <a class="link" href="glossary.html#glossary-shard">shard</a>. When
  you index a document, it is indexed first on the primary shard, then
  on all <a class="link" href="glossary.html#glossary-replica-shard">replicas</a> of the primary shard.

  By default, an <a class="link" href="glossary.html#glossary-index">index</a> has 5 primary shards. You can
  specify fewer or more primary shards to scale the number of
  <a class="link" href="glossary.html#glossary-document">documents</a> that your index can handle.

  You cannot change the number of primary shards in an index, once the
  index is created.

  See also <a class="link" href="glossary.html#glossary-routing">routing</a>
</p></dd><dt><span class="glossterm">
<a id="glossary-replica-shard"></a> replica shard
</span></dt><dd class="glossdef"><p>
  Each <a class="link" href="glossary.html#glossary-primary-shard">primary shard</a> can have zero or more
  replicas. A replica is a copy of the primary shard, and has two
  purposes:

</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
increase failover: a replica shard can be promoted to a primary
  shard if the primary fails
</li><li class="listitem">
increase performance: get and search requests can be handled by
  primary or replica shards.

  By default, each primary shard has one replica, but the number of
  replicas can be changed dynamically on an existing index. A replica
  shard will never be started on the same node as its primary shard.
</li></ol></div></dd><dt><span class="glossterm">
<a id="glossary-routing"></a> routing
</span></dt><dd class="glossdef"><p>
  When you index a document, it is stored on a single
  <a class="link" href="glossary.html#glossary-primary-shard">primary shard</a>. That shard is chosen by hashing
  the <code class="literal">routing</code> value. By default, the <code class="literal">routing</code> value is derived from
  the ID of the document or, if the document has a specified parent
  document, from the ID of the parent document (to ensure that child and
  parent documents are stored on the same shard).

  This value can be overridden by specifying a <code class="literal">routing</code> value at index
  time, or a <a class="link" href="mapping-routing-field.html" title="_routing">routing   field</a> in the <a class="link" href="glossary.html#glossary-mapping">mapping</a>.
</p></dd><dt><span class="glossterm">
<a id="glossary-shard"></a> shard
</span></dt><dd class="glossdef"><p>
  A shard is a single Lucene instance. It is a low-level worker unit
  which is managed automatically by elasticsearch. An index is a logical
  namespace which points to <a class="link" href="glossary.html#glossary-primary-shard">primary</a> and
  <a class="link" href="glossary.html#glossary-replica-shard">replica</a> shards.

  Other than defining the number of primary and replica shards that an
  index should have, you never need to refer to shards directly.
  Instead, your code should deal only with an index.

  Elasticsearch distributes shards amongst all <a class="link" href="glossary.html#glossary-node">nodes</a> in the
  <a class="link" href="glossary.html#glossary-cluster">cluster</a>, and can move shards automatically from one
  node to another in the case of node failure, or the addition of new
  nodes.
</p></dd><dt><span class="glossterm">
<a id="glossary-source_field"></a> source field
</span></dt><dd class="glossdef"><p>
  By default, the JSON document that you index will be stored in the
  <code class="literal">_source</code> field and will be returned by all get and search requests.
  This allows you access to the original object directly from search
  results, rather than requiring a second step to retrieve the object
  from an ID.

  Note: the exact JSON string that you indexed will be returned to you,
  even if it contains invalid JSON. The contents of this field do not
  indicate anything about how the data in the object has been indexed.
</p></dd><dt><span class="glossterm">
<a id="glossary-term"></a> term
</span></dt><dd class="glossdef"><p>
  A term is an exact value that is indexed in elasticsearch. The terms
  <code class="literal">foo</code>, <code class="literal">Foo</code>, <code class="literal">FOO</code> are NOT equivalent. Terms (i.e. exact values) can
  be searched for using <span class="emphasis"><em>term</em></span> queries.
   See also <a class="link" href="glossary.html#glossary-text">text</a> and <a class="link" href="glossary.html#glossary-analysis">analysis</a>.
</p></dd><dt><span class="glossterm">
<a id="glossary-text"></a> text
</span></dt><dd class="glossdef"><p>
  Text (or full text) is ordinary unstructured text, such as this
  paragraph. By default, text will be <a class="link" href="glossary.html#glossary-analysis">analyzed</a> into
  <a class="link" href="glossary.html#glossary-term">terms</a>, which is what is actually stored in the index.

  Text <a class="link" href="glossary.html#glossary-field">fields</a> need to be analyzed at index time in order to
  be searchable as full text, and keywords in full text queries must be
  analyzed at search time to produce (and search for) the same terms
  that were generated at index time.

  See also <a class="link" href="glossary.html#glossary-term">term</a> and <a class="link" href="glossary.html#glossary-analysis">analysis</a>.
</p></dd><dt><span class="glossterm">
<a id="glossary-type"></a> type
</span></dt><dd class="glossdef"><p>
  A type is like a <span class="emphasis"><em>table</em></span> in a relational database. Each type has a
  list of <a class="link" href="glossary.html#glossary-field">fields</a> that can be specified for
  <a class="link" href="glossary.html#glossary-document">documents</a> of that type. The <a class="link" href="glossary.html#glossary-mapping">mapping</a>
  defines how each field in the document is analyzed.
</p></dd></dl></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-node">Introduction</span></div><div class="navheader"><span class="prev">
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="using-kibana-for-the-first-time.html">10 Minute Walk Through
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="kibana-guide"></a>Introduction</h1></div></div></div><p>Kibana is an open source (Apache Licensed), browser based analytics and search dashboard for
ElasticSearch. Kibana is a snap to setup and start using. Written entirely in HTML and Javascript
it requires only a plain webserver, Kibana requires no fancy server side components.
Kibana strives to be easy to get started with, while also being flexible and powerful, just like
Elasticsearch.</p><div class="note admon"><div class="icon"><img alt="Note" class="images-icons-note-png"></div><div class="admon_content"><p>Kibana 3 depends on the <a class="ulink" href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-facets.html" target="_top"><span class="emphasis"><em>facets</em></span></a>
feature. Facets were removed in the 2.0 release of Elasticsearch. Kibana 3 does not support Elasticsearch versions greater
than 1.7.</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-node">10 Minute Walk Through</span></div><div class="navheader"><span class="prev"><a href="kibana-guide.html">
              &nbsp;
              Introduction</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="import-some-data.html">Import some data
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="using-kibana-for-the-first-time"></a>10 Minute Walk Through</h1></div></div></div><p>Kibana is a great tool for real time data analytics and simply being on
this page has put you on your way to making the most of it! If you have
not downloaded Kibana yet, you can get it here:
<a class="ulink" href="http://www.elasticsearch.org/overview/kibana/installation/" target="_top">Download
Kibana</a>. We recommend you start this tutorial with a clean Elasticsearch
instance.</p><p>By the end of this document you will have:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Imported some data
</li><li class="listitem">
Tried out the sample dashboard
</li><li class="listitem">
Searched your data
</li><li class="listitem">
Configured Kibana to point only at your new index instead of all
indices
</li></ul></div><p>We will assume you have already:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Installed Elasticsearch on your workstation
</li><li class="listitem">
Have webserver installed on your workstation and have the distribution
extracted into the configured document root.
</li><li class="listitem">
You are familiar with the UNIX command line and have used <code class="literal">curl</code>
</li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="using-kibana-for-the-first-time.html">10 Minute Walk Through</a></span>  <span class="breadcrumb-node">Import some data</span></div><div class="navheader"><span class="prev"><a href="using-kibana-for-the-first-time.html">
              &nbsp;
              10 Minute Walk Through</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="accessing-the-kibana-interface.html">Accessing the Kibana interface
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="import-some-data"></a>Import some data</h2></div></div></div><p>We will be using the entire collected works of Shakespeare as our
example data. In order to make the best use of Kibana you will likely
want to apply a mapping to your new index. Lets create the shakespeare
index with the following mapping. Our data will have more fields than
this, but these are the ones we want to explicitly map. Specifically we
do not want to analyze <span class="emphasis"><em>speaker</em></span> and <span class="emphasis"><em>play_name</em></span>. Youll see why later
on.</p><p>Run in a terminal:</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT http://localhost:9200/shakespeare -d '
{
 "mappings" : {
  "_default_" : {
   "properties" : {
    "speaker" : {"type": "string", "index" : "not_analyzed" },
    "play_name" : {"type": "string", "index" : "not_analyzed" },
    "line_id" : { "type" : "integer" },
    "speech_number" : { "type" : "integer" }
   }
  }
 }
}
';</pre></div><p>Great, weve created the index. Now we want to import the data. You can
download the entire works of shakespeare in elasticsearch bulk import
format here: <a class="ulink" href="https://raw.githubusercontent.com/elastic/kibana/v3.1.3/docs/snippets/shakespeare.json" target="_top">shakespeare.json</a></p><p>Import it into your local elasticsearch instance with the following command.
This may take a few minutes. Shakespeare wrote a lot of stuff!</p><div class="pre_wrapper"><pre class="programlisting">curl -XPUT localhost:9200/_bulk --data-binary @shakespeare.json</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="using-kibana-for-the-first-time.html">10 Minute Walk Through</a></span>  <span class="breadcrumb-node">Accessing the Kibana interface</span></div><div class="navheader"><span class="prev"><a href="import-some-data.html">
              &nbsp;
              Import some data</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="the-first-search.html">The first search
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="accessing-the-kibana-interface"></a>Accessing the Kibana interface</h2></div></div></div><p>Now that you have data, lets do something with it. Point your browser
at your local webserver, the one with Kibana already installed.</p><p><span class="inlinemediaobject"><img src="./tutorials/intro/intro.png" alt="Welcome Page"></span></p><p>If you have Kibana extracted to your
document root you will be presented with this lovely welcome page. Click
<span class="strong emphasis"><strong>Sample Dashboard</strong></span></p><p><span class="inlinemediaobject"><img src="./tutorials/intro/sample_shakespeare.png" alt="Sample Dashboard"></span> And there you have your
sample dashboard! Now if you started with a clean elasticsearch instance
youll see a very heavily weighted pie chart. This represents the type
of documents in your index. As you can see, 99% them are lines for
characters, with only a few denoting acts and scenes.</p><p>Below that you will see a long list of JSON formatted lines of
shakespeare.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="using-kibana-for-the-first-time.html">10 Minute Walk Through</a></span>  <span class="breadcrumb-node">The first search</span></div><div class="navheader"><span class="prev"><a href="accessing-the-kibana-interface.html">
              &nbsp;
              Accessing the Kibana interface</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="configuring-another-index.html">Configuring another index
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="the-first-search"></a>The first search</h2></div></div></div><p>Kibana allows you to search Elasticsearch data via the Lucene Query
String syntax. Queries can be run via the query input at the top of the
page <span class="inlinemediaobject"><img src="./tutorials/intro/query.png" alt="Sample Dashboard"></span></p><p>Type this in the query bar. Then check out the first few rows of the
table.</p><div class="pre_wrapper"><pre class="programlisting">friends, romans, countrymen</pre></div><p><span class="inlinemediaobject"><img src="./tutorials/intro/firsttable.png" alt="Sample Dashboard"></span></p><p>For more information on queries see <a class="ulink" href="./working-with-queries-and-filters.html" target="_top">Queries and Filters</a></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="using-kibana-for-the-first-time.html">10 Minute Walk Through</a></span>  <span class="breadcrumb-node">Configuring another index</span></div><div class="navheader"><span class="prev"><a href="the-first-search.html">
              &nbsp;
              The first search</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_next_steps.html">Next steps
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="configuring-another-index"></a>Configuring another index</h2></div></div></div><p>Right now Kibana is pointing at the special Elasticsearch index <code class="literal">_all</code>.
Think of <code class="literal">_all</code> as a composite index that points at all of your indices.
Right now you only have one, <code class="literal">shakespeare</code>, but you might have more
someday and we dont want Kibana searching all of that data if youre
only looking for your favorite line from Macbeth.</p><p>To configure the index click the configure icon in the top right:</p><p><span class="inlinemediaobject"><img src="./tutorials/intro/configicon.png" alt="Sample Dashboard"></span></p><p>From here, you can set your index to <code class="literal">shakespeare</code> and ensure that
Kibana only searches the <code class="literal">shakespeare</code> index</p><p><span class="inlinemediaobject"><img src="./tutorials/intro/indexconfigure.png" alt="Sample Dashboard"></span></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="using-kibana-for-the-first-time.html">10 Minute Walk Through</a></span>  <span class="breadcrumb-node">Next steps</span></div><div class="navheader"><span class="prev"><a href="configuring-another-index.html">
              &nbsp;
              Configuring another index</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="working-with-queries-and-filters.html">Queries and Filters
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_next_steps"></a>Next steps</h2></div></div></div><p>Congratulations, youve installed and configured kibana and dipped your
toes in the water. Next, check out some of our videos and other
tutorials for more advanced usage. Now you can try adding your own panels
to a blank dashboard. For more information on queries see
<a class="ulink" href="./working-with-queries-and-filters.html" target="_top">Queries and Filters</a></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-node">Queries and Filters</span></div><div class="navheader"><span class="prev"><a href="_next_steps.html">
              &nbsp;
              Next steps</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="our-dashboard.html">Our Dashboard
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="working-with-queries-and-filters"></a>Queries and Filters</h1></div></div></div><p>Charts and tables and maps oh my! But how do we constrain the data
displayed on them. This is the role of queries and filters. Because
Kibana is powered by Elasticsearch it supports the powerful Lucene Query
String syntax, as well as making use of some of Elasticsearchs filter
capabilities.</p><p>We will assume you have already:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Installed Elasticsearch on your workstation.
</li><li class="listitem">
Have a webserver installed on your workstation and have the distribution
extracted into the configured document root.
</li><li class="listitem">
Have read <a class="ulink" href="./using-kibana-for-the-first-time.html" target="_top">Using Kibana for the first time</a>
and have the <code class="literal">shakespeare</code> index populated with the data from the
tutorial.
</li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="working-with-queries-and-filters.html">Queries and Filters</a></span>  <span class="breadcrumb-node">Our Dashboard</span></div><div class="navheader"><span class="prev"><a href="working-with-queries-and-filters.html">
              &nbsp;
              Queries and Filters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="queries.html">Queries
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="our-dashboard"></a>Our Dashboard</h2></div></div></div><p>Our dashboard looks like this, we will be searching through lines of shakespeare.
If you would like to follow along with the screenshots in this guide you
can <a class="ulink" href="https://raw.githubusercontent.com/elastic/kibana/v3.1.3/docs/snippets/plays.json" target="_top">download the exported dashboard schema</a></p><p><span class="inlinemediaobject"><img src="./tutorials/queries_filters/plays.png" alt="image"></span></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="working-with-queries-and-filters.html">Queries and Filters</a></span>  <span class="breadcrumb-node">Queries</span></div><div class="navheader"><span class="prev"><a href="our-dashboard.html">
              &nbsp;
              Our Dashboard</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="multiple-queries.html">Multiple queries
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="queries"></a>Queries</h2></div></div></div><p>Type this very simple query into the search bar:</p><div class="pre_wrapper"><pre class="programlisting">to be or not to be</pre></div><p>You will notice, in the table, your first hit is Hamlet as expected.
However, look at the next line by Sir Andrew, it does not contain "to
be", nor does it contain "not to be". The search we have actually
performed is: <code class="literal">to OR be OR or OR not OR to OR be</code>.</p><p>We can also match the entire phrase:</p><div class="pre_wrapper"><pre class="programlisting">"to be or not to be"</pre></div><p>Or in specifc fields:</p><div class="pre_wrapper"><pre class="programlisting">line_id:86169</pre></div><p>We can express complex searches with AND/OR, note these words must be
capitalized:</p><div class="pre_wrapper"><pre class="programlisting">food AND love</pre></div><p>Or parantheses:</p><div class="pre_wrapper"><pre class="programlisting">("played upon" OR "every man") AND stage</pre></div><p>Numeric ranges can also be easily searched:</p><div class="pre_wrapper"><pre class="programlisting">line_id:[30000 TO 80000] AND havoc</pre></div><p>And of course to search everything:</p><div class="pre_wrapper"><pre class="programlisting">*</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="working-with-queries-and-filters.html">Queries and Filters</a></span>  <span class="breadcrumb-node">Multiple queries</span></div><div class="navheader"><span class="prev"><a href="queries.html">
              &nbsp;
              Queries</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="colors-and-legends.html">Colors and Legends
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="multiple-queries"></a>Multiple queries</h2></div></div></div><p>In some cases, you might want to compare the results of two seperate queries. Kibana can handle multiple queries by joining them with a logical
<code class="literal">OR</code> and using the knowledge that they should be treated as seperate to
influence visualizations.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="adding"></a>Adding</h3></div></div></div><p>Click the <span class="strong emphasis"><strong>+</strong></span> to the right of the query input to add another query.</p><p><span class="inlinemediaobject"><img src="./tutorials/queries_filters/Addquery.png" alt="image"></span></p><p>You should now have this:</p><p><span class="inlinemediaobject"><img src="./tutorials/queries_filters/split.png" alt="image"></span></p><p>In the lefthand, green input, type <code class="literal">"to be"</code> and in the right, yellow
input, type <code class="literal">"not to be"</code>. This will search for every document that has
<code class="literal">"to be"</code> OR <code class="literal">"not to be"</code> in it, and break that down on our hits pie
chart. So we go from a big green circle to:</p><p><span class="inlinemediaobject"><img src="./tutorials/queries_filters/pieslice.png" alt="image"></span></p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="removing"></a>Removing</h3></div></div></div><p>To remove a query, click the <span class="strong emphasis"><strong>x</strong></span> icon that appears when you mouse over
the query input field</p><p><span class="inlinemediaobject"><img src="./tutorials/queries_filters/remove.png" alt="image"></span></p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="working-with-queries-and-filters.html">Queries and Filters</a></span>  <span class="breadcrumb-node">Colors and Legends</span></div><div class="navheader"><span class="prev"><a href="multiple-queries.html">
              &nbsp;
              Multiple queries</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="filters.html">Filters
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="colors-and-legends"></a>Colors and Legends</h2></div></div></div><p>Kibana will automatically determine a free color to use for your
queries, but you can set your color explicitly if youd like by clicking
the colored dot associated with the query to open the query settings
drop down. From here you can change the color of the query, or set a new
value for the legend</p><p><span class="inlinemediaobject"><img src="./tutorials/queries_filters/settings.png" alt="image"></span></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="working-with-queries-and-filters.html">Queries and Filters</a></span>  <span class="breadcrumb-node">Filters</span></div><div class="navheader"><span class="prev"><a href="colors-and-legends.html">
              &nbsp;
              Colors and Legends</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_more_reading.html">More reading
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="filters"></a>Filters</h2></div></div></div><p>Many Kibana charts are interactive and can be used to filter the view of
your data. For example, click on the first bar of the chart. You will
end up with something like this. As you can see, the chart has become
one big green bar. This is because a filter was added to match that term
in the <code class="literal">play_name</code> field.</p><p><span class="inlinemediaobject"><img src="./tutorials/queries_filters/comedyoferrors.png" alt="image"></span></p><p>"But where" you say?</p><p>The answer lies in that little white star that appeared on the filtering
tab. Give the tab a click and we can see that a filter has added to the
<span class="emphasis"><em>filtering</em></span> panel. From the <span class="emphasis"><em>filtering</em></span> panel filters can be added,
edited, toggled and removed. Many panels have the ability to add
filters, including the table, histogram, map and others.</p><p><span class="inlinemediaobject"><img src="./tutorials/queries_filters/filteradded.png" alt="image"></span></p><p>Filters can also be added manually by clicking the <span class="strong emphasis"><strong>+</strong></span></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="working-with-queries-and-filters.html">Queries and Filters</a></span>  <span class="breadcrumb-node">More reading</span></div><div class="navheader"><span class="prev"><a href="filters.html">
              &nbsp;
              Filters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="rows-and-panels.html">Rows and Panels
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_more_reading"></a>More reading</h2></div></div></div><p>Now that you have a solid handle on filters and queries you might be
interested in how theyre described in <a class="ulink" href="./_dashboard_schema.html" target="_top">the Kibana
schema</a>. If youre interested in inserting queries or filters via URL
parameters you might also take a look at
<a class="ulink" href="./templated-and-scripted-dashboards.html" target="_top">Templated and Scripted
Dashboards</a></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-node">Rows and Panels</span></div><div class="navheader"><span class="prev"><a href="_more_reading.html">
              &nbsp;
              More reading</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="loading-a-blank-dashboard.html">Loading a blank dashboard
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="rows-and-panels"></a>Rows and Panels</h1></div></div></div><p>Kibanas dashboards are organized into a system of rows and panels.
These can be added, removed and rearranged to suite your needs.</p><p>In this section we will cover:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Loading a blank dashboard
</li><li class="listitem">
Adding, sizing and hiding rows
</li><li class="listitem">
Adding and sizing panels
</li><li class="listitem">
Removing panels and rows
</li></ul></div><p>We will assume you have already:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Installed Elasticsearch on your workstation
</li><li class="listitem">
Have webserver installed on your workstation and have the distribution
extracted into the configured document root.
</li><li class="listitem">
Have read <a class="ulink" href="./using-kibana-for-the-first-time.html" target="_top">Using Kibana for the first time</a>
and have the <code class="literal">shakespeare</code> index populated with the data from the
tutorial.
</li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="rows-and-panels.html">Rows and Panels</a></span>  <span class="breadcrumb-node">Loading a blank dashboard</span></div><div class="navheader"><span class="prev"><a href="rows-and-panels.html">
              &nbsp;
              Rows and Panels</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="adding-a-row.html">Adding a row
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="loading-a-blank-dashboard"></a>Loading a blank dashboard</h2></div></div></div><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/home.png" alt="home screen"></span></p><p>From the homescreen, select option #3, this will load a Blank Dashboard.
By default, the blank dashboard is configured to look at Elasticsearchs
<code class="literal">_all</code> index, which points to all of your indices. If you would like to
configure Kibana to point at a different index, see
<a class="ulink" href="./using-kibana-for-the-first-time.html" target="_top">Using Kibana for the first time</a></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="rows-and-panels.html">Rows and Panels</a></span>  <span class="breadcrumb-node">Adding a row</span></div><div class="navheader"><span class="prev"><a href="loading-a-blank-dashboard.html">
              &nbsp;
              Loading a blank dashboard</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="the-row-controls.html">The row controls
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="adding-a-row"></a>Adding a row</h2></div></div></div><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/Addingrow.png" alt="Adding a row"></span></p><p>Your new blank dashboard will appear with the query and filter sections
expanded, a time filter input in the navigation bar at the top, and not
a whole lot else. Click the <span class="strong emphasis"><strong>Add a row</strong></span> button on the right to add your
first row.</p><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/addedrow.png" alt="Adding a row"></span></p><p>Give your row a title and click <span class="strong emphasis"><strong>Create Row</strong></span>. You will see your new row
appear in the list of rows to the left. Click <span class="strong emphasis"><strong>Save</strong></span></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="rows-and-panels.html">Rows and Panels</a></span>  <span class="breadcrumb-node">The row controls</span></div><div class="navheader"><span class="prev"><a href="adding-a-row.html">
              &nbsp;
              Adding a row</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="adding-panels.html">Adding panels
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="the-row-controls"></a>The row controls</h2></div></div></div><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/rowbuttons.png" alt="Row buttons"></span></p><p>Now that you have a row, you will notice a few new elements on your
dashboard. Chiefly the 3 brightly colored rectangles to the left. Move
the mouse over them</p><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/buttons_expanded.png" alt="Row buttons"></span></p><p>Ah hah! these buttons allow you to accomplish 3 things</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Collapsing rows (blue)
</li><li class="listitem">
Configuring rows (orange)
</li><li class="listitem">
Adding panels (green)
</li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="rows-and-panels.html">Rows and Panels</a></span>  <span class="breadcrumb-node">Adding panels</span></div><div class="navheader"><span class="prev"><a href="the-row-controls.html">
              &nbsp;
              The row controls</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="collapsing-and-expanding-rows.html">Collapsing and expanding rows
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="adding-panels"></a>Adding panels</h2></div></div></div><p>For now well focus on the <span class="emphasis"><em>green</em></span> button in the row controls. Give it a
try. You can also click the <span class="emphasis"><em>grey</em></span> button labeled <span class="strong emphasis"><strong>Add panel to empty
row</strong></span>, but its grey, and what fun is that?</p><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/addpanel.png" alt="Add panel"></span></p><p>Lets add a <span class="strong emphasis"><strong>terms</strong></span> panel. The <span class="strong emphasis"><strong>terms</strong></span> panel allows us to make use of
the Elasticsearch <span class="strong emphasis"><strong>terms facet</strong></span> to find the most popular values in a
field.</p><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/terms_settings.png" alt="Add panel"></span></p><p>As you can see, the terms panel has a number of optional settings,
however well focus on the general settings in the first section for
now:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
Title: The name for this panel
</li><li class="listitem">
Span: The width of the panel. Kibana dashboards are made of 12
equally sized <span class="emphasis"><em>spans</em></span>. Panels can be up to 12 spans wide. Rows can
contain more than a total of 12, with new panels wrapping to the next
line. Leave this at 4 for now.
</li><li class="listitem">
Editable: If this panel is configurable later. Leave this checked
for now.
</li><li class="listitem">
Inspectable: If the user can view the query used for this panel.
Also leave this checked for now.
</li><li class="listitem">
Click <span class="strong emphasis"><strong>Save</strong></span> to add your new <span class="strong emphasis"><strong>terms</strong></span> panel to your dashboard
</li></ol></div><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/firstpanel.png" alt="First panel"></span></p><p>Great! Now you have a panel! You may recognize this breakdown of data
from the pie chart in <a class="ulink" href="./using-kibana-for-the-first-time.html" target="_top">Using Kibana for the first time</a>. The <code class="literal">shakespeare</code> data set is comprised largely of lines of
speech, with a few markers between acts and scenes thrown in there.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="rows-and-panels.html">Rows and Panels</a></span>  <span class="breadcrumb-node">Collapsing and expanding rows</span></div><div class="navheader"><span class="prev"><a href="adding-panels.html">
              &nbsp;
              Adding panels</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="editing-rows.html">Editing rows
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="collapsing-and-expanding-rows"></a>Collapsing and expanding rows</h2></div></div></div><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/buttons_expanded.png" alt="Row buttons"></span></p><p>The blue button collapses your rows. Panels in collapsed rows do not
refresh data and thus require no Elasticsearch resources to keep around.
Collapsed rows are great for data that you dont need to see often.
Click the blue button again to expand the row.</p><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/collapsed.png" alt="Collapsed row"></span></p><p>The query and filter sections at the top can also be collapsed. Click
the colored label to collapse and expand</p><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/toprowscollapsed.png" alt="Collapsed top row"></span></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="rows-and-panels.html">Rows and Panels</a></span>  <span class="breadcrumb-node">Editing rows</span></div><div class="navheader"><span class="prev"><a href="collapsing-and-expanding-rows.html">
              &nbsp;
              Collapsing and expanding rows</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="moving-and-removing-panels.html">Moving and Removing panels
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="editing-rows"></a>Editing rows</h2></div></div></div><p>Rows can be renamed, resized and edited via the row editor. Click the
orange cog icon button to open the row editor.</p><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/roweditor.png" alt="Row edit"></span></p><p>The same dialog also allows you to change the order and size of panels,
as well as remove them.</p><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/rowpanels.png" alt="Removing Panels"></span></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="rows-and-panels.html">Rows and Panels</a></span>  <span class="breadcrumb-node">Moving and Removing panels</span></div><div class="navheader"><span class="prev"><a href="editing-rows.html">
              &nbsp;
              Editing rows</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="moving-and-removing-rows.html">Moving and Removing Rows
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="moving-and-removing-panels"></a>Moving and Removing panels</h2></div></div></div><p>Panels can be dragged and dropped within their own row, or into another
row, by dragging the crosshair shaped move icon in the top right of the
panel.</p><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/movepanel.png" alt="Removing Panels"></span></p><p>Click the <span class="emphasis"><em>remove</em></span> icon in the top right of a panel to remove it from
the dashboard. Panels can also be removed from the row editor.</p><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/removing_panels.png" alt="Removing Panels"></span></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="rows-and-panels.html">Rows and Panels</a></span>  <span class="breadcrumb-node">Moving and Removing Rows</span></div><div class="navheader"><span class="prev"><a href="moving-and-removing-panels.html">
              &nbsp;
              Moving and Removing panels</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_next_steps_2.html">Next steps
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="moving-and-removing-rows"></a>Moving and Removing Rows</h2></div></div></div><p>Rows can be re-ordered and removed via the dashboard configuration
screen. Click the cog in the top left of the screen, and select the
<span class="strong emphasis"><strong>Rows</strong></span> tab to make changes to the row layout. You may remember this
screen from when we added our first row.</p><p><span class="inlinemediaobject"><img src="./tutorials/rows_panels/rowmove.png" alt="Removing Rows"></span></p><p>The arrows to the left allow you to change the order of the rows on your
dashboard. The <span class="strong emphasis"><strong>X</strong></span> is used to remove rows.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="rows-and-panels.html">Rows and Panels</a></span>  <span class="breadcrumb-node">Next steps</span></div><div class="navheader"><span class="prev"><a href="moving-and-removing-rows.html">
              &nbsp;
              Moving and Removing Rows</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="saving-and-loading-dashboards.html">Saving and Loading
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_next_steps_2"></a>Next steps</h2></div></div></div><p>Before you close your browser you might want to save this new dashboard.
See <a class="ulink" href="./saving-and-loading-dashboards.html" target="_top">Saving and Loading dashboards</a></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-node">Saving and Loading</span></div><div class="navheader"><span class="prev"><a href="_next_steps_2.html">
              &nbsp;
              Next steps</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="saving-your-awesome-dashboard.html">Saving your awesome dashboard
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="saving-and-loading-dashboards"></a>Saving and Loading</h1></div></div></div><p>Youve built an amazing dashboard! Now you want to share it with your
team, maybe turn on auto-refresh and put it up on a big screen? Kibana
can persist dashboard designs to Elasticsearch and allow you to recall
them via the load menu or links.</p><p><span class="inlinemediaobject"><img src="./tutorials/saving_loading/awesome_dashboard.png" alt="image"></span></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="saving-and-loading-dashboards.html">Saving and Loading</a></span>  <span class="breadcrumb-node">Saving your awesome dashboard</span></div><div class="navheader"><span class="prev"><a href="saving-and-loading-dashboards.html">
              &nbsp;
              Saving and Loading</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="recalling-your-dashboard.html">Recalling your dashboard
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="saving-your-awesome-dashboard"></a>Saving your awesome dashboard</h2></div></div></div><p>Saving your flashy new interface is as easy as opening the save drop
down by clicking the <span class="strong emphasis"><strong>Save</strong></span> icon in the upper righthand corner. Give
your new dashboard a name and hit <span class="emphasis"><em>enter</em></span>. Now your dashboard has been
saved to a special Elasticsearch index called <code class="literal">kibana-int</code></p><p><span class="inlinemediaobject"><img src="./tutorials/saving_loading/savebutton.png" alt="image"></span></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="saving-and-loading-dashboards.html">Saving and Loading</a></span>  <span class="breadcrumb-node">Recalling your dashboard</span></div><div class="navheader"><span class="prev"><a href="saving-your-awesome-dashboard.html">
              &nbsp;
              Saving your awesome dashboard</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="sharing-dashboards.html">Sharing dashboards
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="recalling-your-dashboard"></a>Recalling your dashboard</h2></div></div></div><p>To search a list of your saved dashboards click the <span class="strong emphasis"><strong>Load</strong></span> icon in the
upper righthand corner. From here you can load, share and remove
dashboards.</p><p><span class="inlinemediaobject"><img src="./tutorials/saving_loading/searchdashboards.png" alt="image"></span></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="saving-and-loading-dashboards.html">Saving and Loading</a></span>  <span class="breadcrumb-node">Sharing dashboards</span></div><div class="navheader"><span class="prev"><a href="recalling-your-dashboard.html">
              &nbsp;
              Recalling your dashboard</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="saving-a-static-dashboard.html">Saving a static dashboard
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="sharing-dashboards"></a>Sharing dashboards</h2></div></div></div><p>Saved dashboards can be shared via the URL in your browers navigation
bar. Dashboards persisted to Elasticsearch will have a URL that points
to them, such as:</p><div class="pre_wrapper"><pre class="programlisting">http://your_host/index.html#/dashboard/elasticsearch/MYDASHBOARD</pre></div><p>In this example <code class="literal">MYDASHBOARD</code> is the title we have given the dashboard
when saving.</p><p>You can also share links to adhoc dashboards by generating a temporary
URL to them by clicking the <span class="strong emphasis"><strong>Share</strong></span> icon in the upper righthand corner
of Kibana.</p><p><span class="inlinemediaobject"><img src="./tutorials/saving_loading/sharebutton.png" alt="image"></span></p><p>By default these temporary URLs live for 30 days.</p><p><span class="inlinemediaobject"><img src="./tutorials/saving_loading/sharelink.png" alt="image"></span></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="saving-and-loading-dashboards.html">Saving and Loading</a></span>  <span class="breadcrumb-node">Saving a static dashboard</span></div><div class="navheader"><span class="prev"><a href="sharing-dashboards.html">
              &nbsp;
              Sharing dashboards</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_next_steps_3.html">Next steps
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="saving-a-static-dashboard"></a>Saving a static dashboard</h2></div></div></div><p>Dashboards can also be saved to disk on your server as .json files.
Place them in the <code class="literal">app/dashboards</code> directory and access them via</p><div class="pre_wrapper"><pre class="programlisting">http://your_host/index.html#/dashboard/file/MYDASHBOARD.json</pre></div><p>Where <code class="literal">MYDASHBOARD.json</code> is the name of the file on disk. Note the path
<code class="literal">/#dashboard/file/</code> appears similar to the above path for accessing
Elasticsearch stored dashboards, but in this case we are accessing a
file instead of elasticsearch. For information on exporting the
dashboard schema to a file see <a class="ulink" href="./_dashboard_schema.html" target="_top">The
Dashboard Schema Explained</a></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="saving-and-loading-dashboards.html">Saving and Loading</a></span>  <span class="breadcrumb-node">Next steps</span></div><div class="navheader"><span class="prev"><a href="saving-a-static-dashboard.html">
              &nbsp;
              Saving a static dashboard</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_dashboard_schema.html">Dashboard Schema
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_next_steps_3"></a>Next steps</h2></div></div></div><p>Now that you know how to save dashboards, how to load them and how to
access them on disk you might be interested in passing them parameters
via the URL so you can programatically make links to data from other
applications. See <a class="ulink" href="./templated-and-scripted-dashboards.html" target="_top">Templated and
Scripted Dashboards</a></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-node">Dashboard Schema</span></div><div class="navheader"><span class="prev"><a href="_next_steps_3.html">
              &nbsp;
              Next steps</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="services.html">Services
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="_dashboard_schema"></a>Dashboard Schema</h1></div></div></div><p>Kibana dashboards can be easily created right in the browser, and in
most cases, the browser is all you will need to build a powerful,
informative, interface. When you need that extra little bit of tweaking,
Kibana allows for the editing of the dashboard schema.</p><p><span class="strong emphasis"><strong>NOTE</strong></span>: This section is for advanced users only. JSON syntax is very
strict, a stray comma or missing brace will cause your dashboard not to
load.</p><p><span class="inlinemediaobject"><img src="./tutorials/dashboard_schema/schema_dashboard.png" alt="image"></span></p><p>We will be using the above dashboard as an example. You can export the
schema of any dashboard by clicking the <span class="strong emphasis"><strong>Save</strong></span> icon in the top right,
selecting advanced and choosing <span class="strong emphasis"><strong>Export Schema</strong></span>. You can download this
schema here: <a class="ulink" href="https://raw.githubusercontent.com/elastic/kibana/v3.1.3/docs/snippets/schema.json" target="_top">schema.json</a></p><p>While the dashboard is made up of one large JSON document, we will break
it down into pieces for the purpose of instruction in this guide.</p><p>Like any JSON document, we start with an opening brace.</p><div class="pre_wrapper"><pre class="programlisting">{</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="_dashboard_schema.html">Dashboard Schema</a></span>  <span class="breadcrumb-node">Services</span></div><div class="navheader"><span class="prev"><a href="_dashboard_schema.html">
              &nbsp;
              Dashboard Schema</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="pulldown.html">Pulldown
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="services"></a>Services</h2></div></div></div><div class="pre_wrapper"><pre class="programlisting">  "services": {</pre></div><p>Services are persisted objects that are used by multiple panels. There
are currently 2 services that attach to the dashboard object and if
omitted will be automatically populated with query and filter services.</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Query
</li><li class="listitem">
Filter
</li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="query"></a>Query</h3></div></div></div><div class="pre_wrapper"><pre class="programlisting">    "query": {
      "list": {
        "0": {
          "query": "play_name:\"Romeo and Juliet\"",
          "alias": "",
          "color": "#7EB26D",
          "id": 0,
          "pin": false,
          "type": "lucene",
          "enable": true
        }
      },
      "ids": [
        0
      ]
    },</pre></div><p>The query service is controlled largely by the query dropdown at the top
of the dashboard. It has 2 properties:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
List: An object made of numericly keyed objects, each describing a
query object. The query keys are fairly self explanitory and describe
the look and behavior of the query input.
</li><li class="listitem">
Ids: An array of IDs that must match the keys in the list. The ids
array is used for ordering the list for the purpose of display.
</li></ul></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="filter"></a>Filter</h3></div></div></div><div class="pre_wrapper"><pre class="programlisting">    "filter": {
      "list": {
        "0": {
          "type": "querystring",
          "query": "speaker:ROMEO",
          "mandate": "must",
          "active": true,
          "alias": "",
          "id": 0
        }
      },
      "ids": [
        0
      ]
    }
  },</pre></div><p>Filters behave much like queries, but are not selectable on a panel
level, they filter the entire dashboard view. Much like the query
service, there are are two properties: list and ids. Each of these
behaves like their query counter part.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="_dashboard_schema.html">Dashboard Schema</a></span>  <span class="breadcrumb-node">Pulldown</span></div><div class="navheader"><span class="prev"><a href="services.html">
              &nbsp;
              Services</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="nav.html">Nav
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="pulldown"></a>Pulldown</h2></div></div></div><div class="pre_wrapper"><pre class="programlisting">  "pulldowns": [</pre></div><p>Pulldowns are a special type of panel. Rather, theyre a special place
you can put panels. The panels in the <code class="literal">pulldown</code> section work just like
panels in a row except they dont get a span, theyre all full width.
Also panels in pulldowns are not movable or editable by the user.
Theyre great for panels that take input. the <code class="literal">pulldown</code> property is an
array that contains panel objects. For documentation for specific panels
see <a class="ulink" href="./panels.html" target="_top">Kibana Panels</a></p><div class="pre_wrapper"><pre class="programlisting">    {
      "type": "query",
      "collapse": false,
      "notice": false,
      "enable": true,
      "query": "*",
      "pinned": true,
      "history": [
        "play_name:\"Romeo and Juliet\"",
        "playname:\"Romeo and Juliet\"",
        "romeo"
      ],
      "remember": 10
    },
    {
      "type": "filtering",
      "collapse": false,
      "notice": true,
      "enable": true
    }
  ],</pre></div><p>Pulldown panels have 2 options that traditional row based panels do not
have:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Collapse: Set to true or false, this describes whether the panel is
collapsed or expanded.
</li><li class="listitem">
Notice: This property can be set by the panel and controls a small
star icon in the pulldown tabs title. It is usually used to notify the
user that something has changed in the panel.
</li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="_dashboard_schema.html">Dashboard Schema</a></span>  <span class="breadcrumb-node">Nav</span></div><div class="navheader"><span class="prev"><a href="pulldown.html">
              &nbsp;
              Pulldown</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="loader.html">Loader
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="nav"></a>Nav</h2></div></div></div><p>The <code class="literal">nav</code> property also contains a list of panels, however these panels
need to be designed to fit into the nav bar at the top of the screen.
The only currently support nav panel is the timepicker</p><div class="pre_wrapper"><pre class="programlisting">  "nav": [
    {
      "type": "timepicker",
      "collapse": false,
      "notice": false,
      "enable": true,
      "status": "Stable",
      "time_options": [
        "5m",
        "15m",
        "1h",
        "6h",
        "12h",
        "24h",
        "2d",
        "7d",
        "30d"
      ],
      "refresh_intervals": [
        "5s",
        "10s",
        "30s",
        "1m",
        "5m",
        "15m",
        "30m",
        "1h",
        "2h",
        "1d"
      ],
      "timefield": "@timestamp"
    }
  ],</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="_dashboard_schema.html">Dashboard Schema</a></span>  <span class="breadcrumb-node">Loader</span></div><div class="navheader"><span class="prev"><a href="nav.html">
              &nbsp;
              Nav</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="rows-array.html">Rows Array
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="loader"></a>Loader</h2></div></div></div><p>The <code class="literal">loader</code> property describes the behavior of the save and load
buttons at the top of the dashboard.</p><div class="pre_wrapper"><pre class="programlisting">  "loader": {
    "save_gist": false,
    "save_elasticsearch": true,
    "save_local": true,
    "save_default": true,
    "save_temp": true,
    "save_temp_ttl_enable": true,
    "save_temp_ttl": "30d",
    "load_gist": false,
    "load_elasticsearch": true,
    "load_elasticsearch_size": 20,
    "load_local": false,
    "hide": false
  },</pre></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="_dashboard_schema.html">Dashboard Schema</a></span>  <span class="breadcrumb-node">Rows Array</span></div><div class="navheader"><span class="prev"><a href="loader.html">
              &nbsp;
              Loader</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="index-settings.html">Index Settings
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="rows-array"></a>Rows Array</h2></div></div></div><p><code class="literal">rows</code> are where panels are usually placed, and the only place they can
be added via the browser UI.</p><div class="pre_wrapper"><pre class="programlisting">"rows": [
    {
      "title": "Charts",
      "height": "150px",
      "editable": true,
      "collapse": false,
      "collapsable": true,</pre></div><p>Row objects contain a panel array as well as several other properties
describing the row:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
title: The row title
</li><li class="listitem">
height: The height of the row, in pixels, with the <span class="emphasis"><em>px</em></span> designation
</li><li class="listitem">
editable: true/false describing whether or not the panel is editable
</li><li class="listitem">
collapse: true/false describing whether or not the row is collapse
</li><li class="listitem">
collapsable:true/false describing whether or not the user is allowed
to collapse the row
</li></ul></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="panels-array"></a>Panels Array</h3></div></div></div><p>The <code class="literal">panels</code> array property of a row contains a list of panel objects in
the order in which they appear in the row. For a list of common panel
properties and documentation for specific panels see
<a class="ulink" href="./panels.html" target="_top">Kibana Panels</a></p><div class="pre_wrapper"><pre class="programlisting">      "panels": [
        {
          "error": false,
          "span": 8,
          "editable": true,
          "type": "terms",
          "loadingEditor": false,
          "field": "speech_number",
          "exclude": [],
          "missing": false,
          "other": false,
          "size": 10,
          "order": "count",
          "style": {
            "font-size": "10pt"
          },
          "donut": false,
          "tilt": false,
          "labels": true,
          "arrangement": "horizontal",
          "chart": "bar",
          "counter_pos": "above",
          "spyable": true,
          "queries": {
            "mode": "all",
            "ids": [
              0
            ]
          },
          "tmode": "terms",
          "tstat": "total",
          "valuefield": "",
          "title": "Longest Speeches"
        },
        {
          "error": false,
          "span": 4,
          "editable": true,
          "type": "goal",
          "loadingEditor": false,
          "donut": true,
          "tilt": false,
          "legend": "none",
          "labels": true,
          "spyable": true,
          "query": {
            "goal": 111397
          },
          "queries": {
            "mode": "all",
            "ids": [
              0
            ]
          },
          "title": "Percentage of Total"
        }
      ]
    }
  ],</pre></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="_dashboard_schema.html">Dashboard Schema</a></span>  <span class="breadcrumb-node">Index Settings</span></div><div class="navheader"><span class="prev"><a href="rows-array.html">
              &nbsp;
              Rows Array</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="the-rest.html">The Rest
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="index-settings"></a>Index Settings</h2></div></div></div><p>The index property contains information on the Elasticsearch index that
Kibana communicates with.</p><div class="pre_wrapper"><pre class="programlisting">  "index": {
    "interval": "none",
    "default": "_all",
    "pattern": "[logstash-]YYYY.MM.DD",
    "warm_fields": false
  },</pre></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
interval: none, hour, day, week, month. This property describes the
timestamping pattern that the index follows.
</li><li class="listitem">
default: The index to use if <code class="literal">interval</code> is set to none or the
<code class="literal">failover</code> setting below is set to <code class="literal">true</code> and no indices match the
pattern
</li><li class="listitem">
pattern: If <code class="literal">interval</code> is set to anything other than <span class="emphasis"><em>none</em></span>, parse
this pattern, taking into consideration any time filters, to determine
the indices to query.
</li><li class="listitem">
warm_fields: If the mapping should be parsed to determine a list of
fields
</li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="_dashboard_schema.html">Dashboard Schema</a></span>  <span class="breadcrumb-node">The Rest</span></div><div class="navheader"><span class="prev"><a href="index-settings.html">
              &nbsp;
              Index Settings</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="importing-schemas.html">Importing Schemas
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="the-rest"></a>The Rest</h2></div></div></div><p>The following are top level dashboard settings</p><div class="pre_wrapper"><pre class="programlisting">  "failover": false,
  "editable": true,
  "style": "dark",
  "refresh": false
}</pre></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
failover: true/false, whether or not we should use <code class="literal">index.default</code> if
no indices match the index pattern
</li><li class="listitem">
editable: true/false, whether or not to show the configure button for
the dashboard
</li><li class="listitem">
style: "light" or "dark"
</li><li class="listitem">
refresh: False, or an elasticsearch date math (eg 10s, 1m, 1h)
expression describing how often to issue a refresh event instructing
panels to refresh their data.
</li></ul></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="_dashboard_schema.html">Dashboard Schema</a></span>  <span class="breadcrumb-node">Importing Schemas</span></div><div class="navheader"><span class="prev"><a href="the-rest.html">
              &nbsp;
              The Rest</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="templated-and-scripted-dashboards.html">Templates and Scripts
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="importing-schemas"></a>Importing Schemas</h2></div></div></div><p>By default, importing of schemas is disabled. It can be re-enabled via
the <span class="strong emphasis"><strong>Controls</strong></span> tab of the dashboard settings screen by checking the
<span class="strong emphasis"><strong>Local file</strong></span> option. Schemas can be imported from the <span class="strong emphasis"><strong>Load</strong></span> icon in the
top left of the dashboard by selecting <span class="strong emphasis"><strong>Advanced</strong></span> and choosing a file to
import.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-node">Templates and Scripts</span></div><div class="navheader"><span class="prev"><a href="importing-schemas.html">
              &nbsp;
              Importing Schemas</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="the-dashboard-directory.html">The dashboard directory
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="templated-and-scripted-dashboards"></a>Templates and Scripts</h1></div></div></div><p>Kibana has support for creating dashboards dynamically via templates,
and more advanced scripts. This allows you to create a based dashboard,
then influence it with parameters, such as inserting a new query or
filter via the URL.</p><p>Templates and scripts must be stored on disk, storing them to
Elasticsearch is not supported. They must also be created by editing or
creating a schema. Because of this we highly recommend reading
<a class="ulink" href="./_dashboard_schema.html" target="_top">The Kibana Schema Explained</a></p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="templated-and-scripted-dashboards.html">Templates and Scripts</a></span>  <span class="breadcrumb-node">The dashboard directory</span></div><div class="navheader"><span class="prev"><a href="templated-and-scripted-dashboards.html">
              &nbsp;
              Templates and Scripts</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="templated-dashboards-.json.html">Templated Dashboards <code class="literal">(.json)</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="the-dashboard-directory"></a>The dashboard directory</h2></div></div></div><p>Dashboards are stored in the <code class="literal">app/dashboards</code> directory within the
Kibana installation directory. You will notice there are 2 types of
files: <code class="literal">.json</code> files and <code class="literal">.js</code> files.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="templated-and-scripted-dashboards.html">Templates and Scripts</a></span>  <span class="breadcrumb-node">Templated Dashboards <code class="literal">(.json)</code></span></div><div class="navheader"><span class="prev"><a href="the-dashboard-directory.html">
              &nbsp;
              The dashboard directory</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="scripted-dashboards-.js.html">Scripted Dashboards <code class="literal">(.js)</code>
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="templated-dashboards-.json"></a>Templated Dashboards <code class="literal">(.json)</code></h2></div></div></div><p><code class="literal">.json</code> files are templated dashboards. An example of templating can be
found on the query and filter objects of the <code class="literal">logstash.json</code> dashboard.
Templates use handlebar syntax that allow you insert javascript clauses
into your json. URL parameters are available on the <code class="literal">ARGS</code> object. For
example, a snippet from <code class="literal">logstash.json</code>'s
<a class="ulink" href="https://github.com/elasticsearch/kibana/blob/3.0/src/app/dashboards/logstash.json" target="_top">(on
github)</a> query and filter services:</p><div class="pre_wrapper"><pre class="programlisting">  "0": {
    "query": "{{ARGS.query || '*'}}",
    "alias": "",
    "color": "#7EB26D",
    "id": 0,
    "pin": false
  }

  [...]

  "0": {
    "type": "time",
    "field": "@timestamp",
    "from": "now-{{ARGS.from || '24h'}}",
    "to": "now",
    "mandate": "must",
    "active": true,
    "alias": "",
    "id": 0
  }</pre></div><p>This allows us to set 2 parameters, <code class="literal">query</code> and <code class="literal">from</code> in the url. If
they are not set, they will default to the value after the <code class="literal">||</code>. For
example, this would search for <code class="literal">status:200</code> in the last 7 days:</p><p><span class="strong emphasis"><strong>Note</strong></span>: Take careful note of the <code class="literal">file</code> part of
<code class="literal">#/dashboard/file/logstash.json</code></p><pre class="screen">http://yourserver/index.html#/dashboard/file/logstash.json?query=status:200&amp;from=7d</pre></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="templated-and-scripted-dashboards.html">Templates and Scripts</a></span>  <span class="breadcrumb-node">Scripted Dashboards <code class="literal">(.js)</code></span></div><div class="navheader"><span class="prev"><a href="templated-dashboards-.json.html">
              &nbsp;
              Templated Dashboards <code class="literal">(.json)</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_parameters.html">Parameters
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="scripted-dashboards-.js"></a>Scripted Dashboards <code class="literal">(.js)</code></h2></div></div></div><p>Scripted dashboards are much more powerful than templated dashboards. Of
course, with power comes responsibility, and scripted dashboards are
more complex to build. The goal in a scripted dashboard is to build and
return a javascript object that describes the dashboard schema. A well
commented example scripted dashboard can be found in
<code class="literal">app/dashboards/logstash.js</code>
<a class="ulink" href="https://github.com/elasticsearch/kibana/blob/3.0/src/app/dashboards/logstash.js" target="_top">(on
github)</a>. This file accomplishes the same goals as <code class="literal">logstash.json</code>, but
with the added power of scripts we can do things like split queries on
commas:</p><p><span class="strong emphasis"><strong>Note</strong></span>: Take careful note of the <code class="literal">script</code> part of
<code class="literal">#/dashboard/script/logstash.js</code>. This instructs kibana to treat this
file as javascript.</p><pre class="screen">http://yourserver/index.html#/dashboard/script/logstash.js?query=status:403,status:404&amp;from=7d</pre><p>This will create 2 query objects, <code class="literal">status:403</code> and <code class="literal">status:404</code> and
chart them seperately. In fact this dashboard takes another parameter
that describes the string by which to split the query on: <code class="literal">split</code></p><pre class="screen">http://yourserver/index.html#/dashboard/script/logstash.js?query=status:403!status:404&amp;from=7d&amp;split=!</pre><p>We can see this happening in <code class="literal">logstash.js</code>
<a class="ulink" href="https://github.com/elasticsearch/kibana/blob/3.0/src/app/dashboards/logstash.js" target="_top">(on
github)</a> here:</p><div class="pre_wrapper"><pre class="programlisting">// In this dashboard we let users pass queries as comma separated list to the query parameter.
// Or they can specify a split character using the split parameter
// If query is defined, split it into a list of query objects
// NOTE: ids must be integers, hence the parseInt()s
if(!_.isUndefined(ARGS.query)) {
  queries = _.object(_.map(ARGS.query.split(ARGS.split||','), function(v,k) {
    return [k,{
      query: v,
      id: parseInt(k,10),
      alias: v
    }];
  }));
} else {
  // No queries passed? Initialize a single query to match everything
  queries = {
    0: {
      query: '*',
      id: 0,
    }
  };
}</pre></div><p>This dashboard takes more parameters than this, all of which are
described in the comments at the top of <code class="literal">logstash.js</code>
<a class="ulink" href="https://github.com/elasticsearch/kibana/blob/3.0/src/app/dashboards/logstash.js" target="_top">(on
github)</a>
== Configuration
config.js is where you will find the core Kibana configuration. This file contains parameter that
must be set before kibana is run for the first time.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="templated-and-scripted-dashboards.html">Templates and Scripts</a></span>  <span class="breadcrumb-node">Parameters</span></div><div class="navheader"><span class="prev"><a href="scripted-dashboards-.js.html">
              &nbsp;
              Scripted Dashboards <code class="literal">(.js)</code></a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="panels.html">Panels
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_parameters"></a>Parameters</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_elasticsearch"></a>elasticsearch</h3></div></div></div><p>The URL to your elasticsearch server. You almost certainly dont
want <code class="literal">http://localhost:9200</code> here. Even if Kibana and Elasticsearch are on
the same host. By default this will attempt to reach ES at the same host you have
kibana installed on. You probably want to set it to the FQDN of your
elasticsearch host</p><p>Note: this can also be an object if you want to pass options to the http client. For example:</p><pre class="literallayout">+elasticsearch: {server: "http://localhost:9200", withCredentials: true}+</pre></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_default_route"></a>default_route</h3></div></div></div><p>This is the default landing page when you dont specify a dashboard to load. You can specify
files, scripts or saved dashboards here. For example, if you had saved a dashboard called
WebLogs to elasticsearch you might use:</p><p>default_route: <span class="emphasis"><em>/dashboard/elasticsearch/WebLogs</em></span>,</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_kibana_int"></a>kibana-int</h3></div></div></div><p>The default ES index to use for storing Kibana specific object
such as stored dashboards</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_panel_name"></a>panel_name</h3></div></div></div><p>An array of panel modules available. Panels will only be loaded when they are defined in the
dashboard, but this list is used in the "add panel" interface.</p></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-node">Panels</span></div><div class="navheader"><span class="prev"><a href="_parameters.html">
              &nbsp;
              Parameters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_bettermap.html">Bettermap
              &nbsp;
            </a></span></div><div class="part"><div class="titlepage"><div><div><h1 class="title"><a id="panels"></a>Panels</h1></div></div></div><div class="partintro"><div></div><p><span class="strong emphasis"><strong>Kibana</strong></span> dashboards are made up of blocks called <code class="literal">panels</code>. Panels are organized into rows
and can serve many purposes, though most are designed to provide the results of a query or
multiple queries as a visualization. Other panels may show collections of documents or
allow you to insert instructions for your users.</p><p>Panels can be configured easily via the Kibana web interface. For more advanced usage, such
as templated or scripted dashboards, documentation of panel properties is available in this
section. You may find settings here which are not exposed via the web interface.</p><p>Each panel type has its own properties, however there are several that are shared.</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
span
</span></dt><dd>
A number, 1-12, that describes the width of the panel.
</dd><dt><span class="term">
editable
</span></dt><dd>
Enable or disable the edit button of the panel
</dd><dt><span class="term">
type
</span></dt><dd>
The type of panel this object contains. Each panel type will require additional
properties. See the panel types list to the right.
</dd></dl></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-node">Bettermap</span></div><div class="navheader"><span class="prev"><a href="panels.html">
              &nbsp;
              Panels</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_parameters_2.html">Parameters
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_bettermap"></a>Bettermap</h2></div></div></div><p>Status: <span class="strong emphasis"><strong>Experimental</strong></span></p><p>Bettermap is called bettermap for lack of a better name. Bettermap uses geographic coordinates to
create clusters of markers on map and shade them orange, yellow and green depending on the
density of the cluster.</p><p>To drill down, click on a cluster. The map will be zoomed and the cluster broken into smaller cluster.
When it no longer makes visual sense to cluster, individual markers will be displayed. Hover over
a marker to see the tooltip value/</p><div class="important admon"><div class="icon"><img alt="Important" class="images-icons-important-png"></div><div class="admon_content"><p>bettermap requires an internet connection to download its map panels.</p></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-link"><a href="_bettermap.html">Bettermap</a></span>  <span class="breadcrumb-node">Parameters</span></div><div class="navheader"><span class="prev"><a href="_bettermap.html">
              &nbsp;
              Bettermap</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_column.html">Column
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_parameters_2"></a>Parameters</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
field
</span></dt><dd>
The field that contains the coordinates, in geojson format. GeoJSON is
<code class="literal">[longitude,latitude]</code> in an array. This is different from most implementations, which use
latitude, longitude.
</dd><dt><span class="term">
size
</span></dt><dd>
The number of documents to use when drawing the map
</dd><dt><span class="term">
spyable
</span></dt><dd>
Should the <code class="literal">inspect</code> icon be shown?
</dd><dt><span class="term">
tooltip
</span></dt><dd>
Which field to use for the tooltip when hovering over a marker
</dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_queries"></a>Queries</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries object
</span></dt><dd><p class="simpara">
This object describes the queries to use on this panel.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries.mode
</span></dt><dd>
Of the queries available, which to use. Options: <code class="literal">all, pinned, unpinned, selected</code>
</dd><dt><span class="term">
queries.ids
</span></dt><dd>
In <code class="literal">selected</code> mode, which query ids are selected.
</dd></dl></div></dd></dl></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-node">Column</span></div><div class="navheader"><span class="prev"><a href="_parameters_2.html">
              &nbsp;
              Parameters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_parameters_3.html">Parameters
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_column"></a>Column</h2></div></div></div><p>Status: <span class="strong emphasis"><strong>Stable</strong></span></p><p>A pseudo panel that lets you add other panels to be arranged in a column with defined heights.
While the column panel is stable, it does have many limitations, including the inability to drag
and drop panels within its borders. It may be removed in a future release.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-link"><a href="_column.html">Column</a></span>  <span class="breadcrumb-node">Parameters</span></div><div class="navheader"><span class="prev"><a href="_column.html">
              &nbsp;
              Column</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_goal.html">Goal
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_parameters_3"></a>Parameters</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
panel
</span></dt><dd>
An array of panel objects
</dd></dl></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-node">Goal</span></div><div class="navheader"><span class="prev"><a href="_parameters_3.html">
              &nbsp;
              Parameters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_parameters_4.html">Parameters
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_goal"></a>Goal</h2></div></div></div><p>Status: <span class="strong emphasis"><strong>Stable</strong></span></p><p>The goal panel display progress towards a fixed goal on a pie chart</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-link"><a href="_goal.html">Goal</a></span>  <span class="breadcrumb-node">Parameters</span></div><div class="navheader"><span class="prev"><a href="_goal.html">
              &nbsp;
              Goal</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_histogram.html">Histogram
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_parameters_4"></a>Parameters</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
donut
</span></dt><dd>
Draw a hole in the middle of the pie, creating a tasty donut.
</dd><dt><span class="term">
tilt
</span></dt><dd>
Tilt the pie back into an oval shape
</dd><dt><span class="term">
legend
</span></dt><dd>
The location of the legend, above, below or none
</dd><dt><span class="term">
labels
</span></dt><dd>
Set to false to disable drawing labels inside the pie slices
</dd><dt><span class="term">
spyable
</span></dt><dd>
Set to false to disable the inspect function.
</dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_query"></a>Query</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
query object
</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">
query.goal
</span></dt><dd>
the fixed goal for goal mode
</dd></dl></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_queries_2"></a>Queries</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries object
</span></dt><dd><p class="simpara">
This object describes the queries to use on this panel.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries.mode
</span></dt><dd>
Of the queries available, which to use. Options: <code class="literal">all, pinned, unpinned, selected</code>
</dd><dt><span class="term">
queries.ids
</span></dt><dd>
In <code class="literal">selected</code> mode, which query ids are selected.
</dd></dl></div></dd></dl></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-node">Histogram</span></div><div class="navheader"><span class="prev"><a href="_parameters_4.html">
              &nbsp;
              Parameters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_parameters_5.html">Parameters
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_histogram"></a>Histogram</h2></div></div></div><p>Status: <span class="strong emphasis"><strong>Stable</strong></span></p><p>The histogram panel allow for the display of time charts. It includes several modes and tranformations
to display event counts, mean, min, max and total of numeric fields, and derivatives of counter
fields.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-link"><a href="_histogram.html">Histogram</a></span>  <span class="breadcrumb-node">Parameters</span></div><div class="navheader"><span class="prev"><a href="_histogram.html">
              &nbsp;
              Histogram</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_hits.html">Hits
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_parameters_5"></a>Parameters</h2></div></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_axis_options"></a>Axis options</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
mode
</span></dt><dd>
Value to use for the y-axis. For all modes other than count, <code class="literal">value_field</code> must be
defined. Possible values: count, mean, max, min, total.
</dd><dt><span class="term">
time_field
</span></dt><dd>
x-axis field. This must be defined as a date type in Elasticsearch.
</dd><dt><span class="term">
value_field
</span></dt><dd>
y-axis field if <code class="literal">mode</code> is set to mean, max, min or total. Must be numeric.
</dd><dt><span class="term">
x-axis
</span></dt><dd>
Show the x-axis
</dd><dt><span class="term">
y-axis
</span></dt><dd>
Show the y-axis
</dd><dt><span class="term">
scale
</span></dt><dd>
Scale the y-axis by this factor
</dd><dt><span class="term">
y_format
</span></dt><dd>
<span class="emphasis"><em>none</em></span>,<span class="emphasis"><em>bytes</em></span>,'short '
</dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_annotations"></a>Annotations</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
annotate object
</span></dt><dd><p class="simpara">
A query can be specified, the results of which will be displayed as markers on
the chart. For example, for noting code deploys.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
annotate.enable
</span></dt><dd>
Should annotations, aka markers, be shown?
</dd><dt><span class="term">
annotate.query
</span></dt><dd>
Lucene query_string syntax query to use for markers.
</dd><dt><span class="term">
annotate.size
</span></dt><dd>
Max number of markers to show
</dd><dt><span class="term">
annotate.field
</span></dt><dd>
Field from documents to show
</dd><dt><span class="term">
annotate.sort
</span></dt><dd>
Sort array in format [field,order], For example [@timestamp,desc]
==== Interval options
</dd></dl></div></dd><dt><span class="term">
auto_int
</span></dt><dd>
Automatically scale intervals?
</dd><dt><span class="term">
resolution
</span></dt><dd>
If auto_int is true, shoot for this many bars.
</dd><dt><span class="term">
interval
</span></dt><dd>
If auto_int is set to false, use this as the interval.
</dd><dt><span class="term">
interval
</span></dt><dd>
Array of possible intervals in the <span class="strong emphasis"><strong>View</strong></span> selector. Example [auto,1s,5m,3h]
==== Drawing options
</dd><dt><span class="term">
lines
</span></dt><dd>
Show line chart
</dd><dt><span class="term">
fill
</span></dt><dd>
Area fill factor for line charts, 1-10
</dd><dt><span class="term">
linewidth
</span></dt><dd>
Weight of lines in pixels
</dd><dt><span class="term">
points
</span></dt><dd>
Show points on chart
</dd><dt><span class="term">
pointradius
</span></dt><dd>
Size of points in pixels
</dd><dt><span class="term">
bars
</span></dt><dd>
Show bars on chart
</dd><dt><span class="term">
stack
</span></dt><dd>
Stack multiple series
</dd><dt><span class="term">
spyable
</span></dt><dd>
Show inspect icon
</dd><dt><span class="term">
zoomlinks
</span></dt><dd>
Show Zoom Out link
</dd><dt><span class="term">
options
</span></dt><dd>
Show quick view options section
</dd><dt><span class="term">
legend
</span></dt><dd>
Display the legend
</dd><dt><span class="term">
show_query
</span></dt><dd>
If no alias is set, should the query be displayed?
</dd><dt><span class="term">
interactive
</span></dt><dd>
Enable click-and-drag to zoom functionality
</dd><dt><span class="term">
legend_counts
</span></dt><dd>
Show counts in legend
==== Transformations
</dd><dt><span class="term">
timezone
</span></dt><dd>
Correct for browser timezone?. Valid values: browser, utc
</dd><dt><span class="term">
percentage
</span></dt><dd>
Show the y-axis as a percentage of the axis total. Only makes sense for multiple
queries
</dd><dt><span class="term">
zerofill
</span></dt><dd>
Improves the accuracy of line charts at a small performance cost.
</dd><dt><span class="term">
derivative
</span></dt><dd>
Show each point on the x-axis as the change from the previous point
</dd><dt><span class="term">
tooltip object
</span></dt><dd><div class="variablelist"><dl class="variablelist"><dt><span class="term">
tooltip.value_type
</span></dt><dd>
Individual or cumulative controls how tooltips are display on stacked charts
</dd><dt><span class="term">
tooltip.query_as_alias
</span></dt><dd>
If no alias is set, should the query be displayed?
</dd></dl></div></dd><dt><span class="term">
grid object
</span></dt><dd><p class="simpara">
Min and max y-axis values
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
grid.min
</span></dt><dd>
Minimum y-axis value
</dd><dt><span class="term">
grid.max
</span></dt><dd>
Maximum y-axis value
</dd></dl></div></dd></dl></div></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_queries_3"></a>Queries</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries object
</span></dt><dd><p class="simpara">
This object describes the queries to use on this panel.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries.mode
</span></dt><dd>
Of the queries available, which to use. Options: <code class="literal">all, pinned, unpinned, selected</code>
</dd><dt><span class="term">
queries.ids
</span></dt><dd>
In <code class="literal">selected</code> mode, which query ids are selected.
</dd></dl></div></dd></dl></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-node">Hits</span></div><div class="navheader"><span class="prev"><a href="_parameters_5.html">
              &nbsp;
              Parameters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_parameters_6.html">Parameters
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_hits"></a>Hits</h2></div></div></div><p>Status: <span class="strong emphasis"><strong>Stable</strong></span></p><p>The hits panel displays the number of hits for each of the queries on the dashboard in a
configurable format specified by the chart property.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-link"><a href="_hits.html">Hits</a></span>  <span class="breadcrumb-node">Parameters</span></div><div class="navheader"><span class="prev"><a href="_hits.html">
              &nbsp;
              Hits</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_map.html">Map
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_parameters_6"></a>Parameters</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
arrangement
</span></dt><dd>
The arrangement of the legend. horizontal or vertical
</dd><dt><span class="term">
chart
</span></dt><dd>
bar, pie or none
</dd><dt><span class="term">
counter_pos
</span></dt><dd>
The position of the legend, above or below
</dd><dt><span class="term">
donut
</span></dt><dd>
If the chart is set to pie, setting donut to true will draw a hole in the midle of it
</dd><dt><span class="term">
tilt
</span></dt><dd>
If the chart is set to pie, setting tilt to true will tilt it back into an oval
</dd><dt><span class="term">
labels
</span></dt><dd>
If the chart is set to pie, setting labels to true will draw labels in the slices
</dd><dt><span class="term">
spyable
</span></dt><dd>
Setting spyable to false disables the inspect icon.
</dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_queries_4"></a>Queries</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries object
</span></dt><dd><p class="simpara">
This object describes the queries to use on this panel.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries.mode
</span></dt><dd>
Of the queries available, which to use. Options: <code class="literal">all, pinned, unpinned, selected</code>
</dd><dt><span class="term">
queries.ids
</span></dt><dd>
In <code class="literal">selected</code> mode, which query ids are selected.
</dd></dl></div></dd></dl></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-node">Map</span></div><div class="navheader"><span class="prev"><a href="_parameters_6.html">
              &nbsp;
              Parameters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_parameters_7.html">Parameters
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_map"></a>Map</h2></div></div></div><p>Status: <span class="strong emphasis"><strong>Stable</strong></span></p><p>The map panel translates 2 letter country or state codes into shaded regions on a map. Currently
available maps are world, usa and europe.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-link"><a href="_map.html">Map</a></span>  <span class="breadcrumb-node">Parameters</span></div><div class="navheader"><span class="prev"><a href="_map.html">
              &nbsp;
              Map</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_sparklines.html">Sparklines
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_parameters_7"></a>Parameters</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
map
</span></dt><dd>
Map to display. world, usa, europe
</dd><dt><span class="term">
colors
</span></dt><dd>
An array of colors to use to shade the map. If 2 colors are specified, shades
between them will be used. For example [#A0E2E2, #265656]
</dd><dt><span class="term">
size
</span></dt><dd>
Max number of regions to shade
</dd><dt><span class="term">
exclude
</span></dt><dd>
Exclude this array of regions. For example [US,BR,IN]
</dd><dt><span class="term">
spyable
</span></dt><dd>
Setting spyable to false disables the inspect icon.
</dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_queries_5"></a>Queries</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries object
</span></dt><dd><p class="simpara">
This object describes the queries to use on this panel.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries.mode
</span></dt><dd>
Of the queries available, which to use. Options: <code class="literal">all, pinned, unpinned, selected</code>
</dd><dt><span class="term">
queries.ids
</span></dt><dd>
In <code class="literal">selected</code> mode, which query ids are selected.
</dd></dl></div></dd></dl></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-node">Sparklines</span></div><div class="navheader"><span class="prev"><a href="_parameters_7.html">
              &nbsp;
              Parameters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_parameters_8.html">Parameters
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_sparklines"></a>Sparklines</h2></div></div></div><p>Status: <span class="strong emphasis"><strong>Experimental</strong></span></p><p>The sparklines panel shows tiny time charts. The purpose of these is not to give an exact value,
but rather to show the shape of the time series in a compact manner</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-link"><a href="_sparklines.html">Sparklines</a></span>  <span class="breadcrumb-node">Parameters</span></div><div class="navheader"><span class="prev"><a href="_sparklines.html">
              &nbsp;
              Sparklines</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_table.html">table
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_parameters_8"></a>Parameters</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
mode
</span></dt><dd>
Value to use for the y-axis. For all modes other than count, <code class="literal">value_field</code> must be
defined. Possible values: count, mean, max, min, total.
</dd><dt><span class="term">
time_field
</span></dt><dd>
x-axis field. This must be defined as a date type in Elasticsearch.
</dd><dt><span class="term">
value_field
</span></dt><dd>
y-axis field if <code class="literal">mode</code> is set to mean, max, min or total. Must be numeric.
</dd><dt><span class="term">
interval
</span></dt><dd>
Sparkline intervals are computed automatically as long as there is a time filter
present. In the absence of a time filter, use this interval.
</dd><dt><span class="term">
spyable
</span></dt><dd>
Show inspect icon
</dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_queries_6"></a>Queries</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries object
</span></dt><dd><p class="simpara">
This object describes the queries to use on this panel.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries.mode
</span></dt><dd>
Of the queries available, which to use. Options: <code class="literal">all, pinned, unpinned, selected</code>
</dd><dt><span class="term">
queries.ids
</span></dt><dd>
In <code class="literal">selected</code> mode, which query ids are selected.
</dd></dl></div></dd></dl></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-node">table</span></div><div class="navheader"><span class="prev"><a href="_parameters_8.html">
              &nbsp;
              Parameters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_parameters_9.html">Parameters
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_table"></a>table</h2></div></div></div><p>Status: <span class="strong emphasis"><strong>Stable</strong></span></p><p>The table panel contains a sortable, pagable view of documents that. It can be arranged into
defined columns and offers several interactions, such as performing adhoc terms aggregations.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-link"><a href="_table.html">table</a></span>  <span class="breadcrumb-node">Parameters</span></div><div class="navheader"><span class="prev"><a href="_table.html">
              &nbsp;
              table</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_terms.html">terms
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_parameters_9"></a>Parameters</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
size
</span></dt><dd>
The number of hits to show per page
</dd><dt><span class="term">
pages
</span></dt><dd>
The number of pages available
</dd><dt><span class="term">
offset
</span></dt><dd>
The current page
</dd><dt><span class="term">
sort
</span></dt><dd>
An array describing the sort order of the table. For example [@timestamp,desc]
</dd><dt><span class="term">
overflow
</span></dt><dd>
The css overflow property. min-height (expand) or auto (scroll)
</dd><dt><span class="term">
fields
</span></dt><dd>
The fields used a columns of the table, in an array.
</dd><dt><span class="term">
highlight
</span></dt><dd>
The fields on which to highlight, in an array
</dd><dt><span class="term">
sortable
</span></dt><dd>
Set sortable to false to disable sorting
</dd><dt><span class="term">
header
</span></dt><dd>
Set to false to hide the table column names
</dd><dt><span class="term">
paging
</span></dt><dd>
Set to false to hide the paging controls of the table
</dd><dt><span class="term">
field_list
</span></dt><dd>
Set to false to hide the list of fields. The user will be able to expand it,
but it will be hidden by default
</dd><dt><span class="term">
all_fields
</span></dt><dd>
Set to true to show all fields in the mapping, not just the current fields in
the table.
</dd><dt><span class="term">
trimFactor
</span></dt><dd>
The trim factor is the length at which to truncate fields taking the number of
columns in the table into consideration. For example, a trimFactor of 100, with 5
columns in the table, would trim each column at 20 character. The entirety of the field is
still available in the expanded view of the event.
</dd><dt><span class="term">
localTime
</span></dt><dd>
Set to true to adjust the timeField to the browsers local time
</dd><dt><span class="term">
timeField
</span></dt><dd>
If localTime is set to true, this field will be adjusted to the browsers local time
</dd><dt><span class="term">
spyable
</span></dt><dd>
Set to false to disable the inspect icon
</dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_queries_7"></a>Queries</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries object
</span></dt><dd><p class="simpara">
This object describes the queries to use on this panel.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries.mode
</span></dt><dd>
Of the queries available, which to use. Options: <code class="literal">all, pinned, unpinned, selected</code>
</dd><dt><span class="term">
queries.ids
</span></dt><dd>
In <code class="literal">selected</code> mode, which query ids are selected.
</dd></dl></div></dd></dl></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-node">terms</span></div><div class="navheader"><span class="prev"><a href="_parameters_9.html">
              &nbsp;
              Parameters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_parameters_10.html">Parameters
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_terms"></a>terms</h2></div></div></div><p>Status: <span class="strong emphasis"><strong>Stable</strong></span></p><p>A table, bar chart or pie chart based on the results of an Elasticsearch terms facet.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-link"><a href="_terms.html">terms</a></span>  <span class="breadcrumb-node">Parameters</span></div><div class="navheader"><span class="prev"><a href="_terms.html">
              &nbsp;
              terms</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_text.html">text
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_parameters_10"></a>Parameters</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
field
</span></dt><dd>
The field on which to compute the facet
</dd><dt><span class="term">
exclude
</span></dt><dd>
terms to exclude from the results
</dd><dt><span class="term">
missing
</span></dt><dd>
Set to false to disable the display of a counter showing how much results are
missing the field
</dd><dt><span class="term">
other
</span></dt><dd>
Set to false to disable the display of a counter representing the aggregate of all
values outside of the scope of your <code class="literal">size</code> property
</dd><dt><span class="term">
size
</span></dt><dd>
Show this many terms
</dd><dt><span class="term">
order
</span></dt><dd>
In terms mode: count, term, reverse_count or reverse_term,
in terms_stats mode: term, reverse_term, count, reverse_count,
total, reverse_total, min, reverse_min, max, reverse_max, mean or reverse_mean
</dd><dt><span class="term">
donut
</span></dt><dd>
In pie chart mode, draw a hole in the middle of the pie to make a tasty donut.
</dd><dt><span class="term">
tilt
</span></dt><dd>
In pie chart mode, tilt the chart back to appear as more of an oval shape
</dd><dt><span class="term">
labels
</span></dt><dd>
In pie chart mode, draw labels in the pie slices
</dd><dt><span class="term">
arrangement
</span></dt><dd>
In bar or pie mode, arrangement of the legend. horizontal or vertical
</dd><dt><span class="term">
chart
</span></dt><dd>
table, bar or pie
</dd><dt><span class="term">
counter_pos
</span></dt><dd>
The location of the legend in respect to the chart, above, below, or none.
</dd><dt><span class="term">
spyable
</span></dt><dd>
Set spyable to false to disable the inspect button
</dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_queries_8"></a>Queries</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries object
</span></dt><dd><p class="simpara">
This object describes the queries to use on this panel.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries.mode
</span></dt><dd>
Of the queries available, which to use. Options: <code class="literal">all, pinned, unpinned, selected</code>
</dd><dt><span class="term">
queries.ids
</span></dt><dd>
In <code class="literal">selected</code> mode, which query ids are selected.
</dd></dl></div></dd><dt><span class="term">
tmode
</span></dt><dd>
Facet mode: terms or terms_stats
</dd><dt><span class="term">
tstat
</span></dt><dd>
Terms_stats facet stats field
</dd><dt><span class="term">
valuefield
</span></dt><dd>
Terms_stats facet value field
</dd></dl></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-node">text</span></div><div class="navheader"><span class="prev"><a href="_parameters_10.html">
              &nbsp;
              Parameters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_parameters_11.html">Parameters
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_text"></a>text</h2></div></div></div><p>Status: <span class="strong emphasis"><strong>Stable</strong></span></p><p>The text panel is used for displaying static text formated as markdown, sanitized html or as plain
text.</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-link"><a href="_text.html">text</a></span>  <span class="breadcrumb-node">Parameters</span></div><div class="navheader"><span class="prev"><a href="_text.html">
              &nbsp;
              text</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_trends.html">trends
              &nbsp;
            </a></span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_parameters_11"></a>Parameters</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
mode
</span></dt><dd>
html, markdown or text
</dd><dt><span class="term">
content
</span></dt><dd>
The content of your panel, written in the mark up specified in <code class="literal">mode</code>
</dd></dl></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-node">trends</span></div><div class="navheader"><span class="prev"><a href="_parameters_11.html">
              &nbsp;
              Parameters</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          <a href="_parameters_12.html">Parameters
              &nbsp;
            </a></span></div><div class="chapter"><div class="titlepage"><div><div><h2 class="title"><a id="_trends"></a>trends</h2></div></div></div><p>Status: <span class="strong emphasis"><strong>Beta</strong></span></p><p>A stock-ticker style representation of how queries are moving over time. For example, if the
time is 1:10pm, your time picker was set to "Last 10m", and the "Time Ago" parameter was set to
"1h", the panel would show how much the query results have changed since 12:00-12:10pm</p></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>











    <div class="main-container">
      <section id="content">
        <div class="content-wrapper">



	<section id="guide" lang="en">
		<div class="container">
			<div class="row">


            <div class="col-xs-12 col-sm-8 col-md-8 guide-section">

<div class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">Kibana User Guide
      [3.0]
    </a></span>  <span class="breadcrumb-link"><a href="panels.html">Panels</a></span>  <span class="breadcrumb-link"><a href="_trends.html">trends</a></span>  <span class="breadcrumb-node">Parameters</span></div><div class="navheader"><span class="prev"><a href="_trends.html">
              &nbsp;
              trends</a>
          &nbsp;
        </span><span class="next">
          &nbsp;
          </span></div><div class="section"><div class="titlepage"><div><div><h2 class="title"><a id="_parameters_12"></a>Parameters</h2></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
ago
</span></dt><dd>
A date math formatted string describing the relative time period to compare the
queries to.
</dd><dt><span class="term">
arrangement
</span></dt><dd>
horizontal or vertical
</dd><dt><span class="term">
spyable
</span></dt><dd>
Set to false to disable the inspect icon
</dd></dl></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_queries_9"></a>Queries</h3></div></div></div><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries object
</span></dt><dd><p class="simpara">
This object describes the queries to use on this panel.
</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">
queries.mode
</span></dt><dd>
Of the queries available, which to use. Options: <code class="literal">all, pinned, unpinned, selected</code>
</dd><dt><span class="term">
queries.ids
</span></dt><dd>
In <code class="literal">selected</code> mode, which query ids are selected.
</dd></dl></div></dd></dl></div></div></div>

            </div>

			</div>
		</div>
	</section>

        </div>

      </section>
    </div>

</body></html>
